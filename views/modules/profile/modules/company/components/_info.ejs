<%
const update = action === 'update';
%>

<div v-if="activePart == 'info'" class="company_form_items">

	<form method="POST" class="<%-action%>_form" action="/action/company/<%- type %>/<%- update ? `update/${obj.id}` : 'create' %>">

		<div class="button_checkbox">
			<label class="draft">
				<span><%- __("Send_as_draft") %></span>
				<input type="radio" v-on:change="submit" name="status" value="draft">
			</label>
			<label class="moderation">
				<span><%- __("Send_to_moderation") %></span>
				<input type="radio" checked v-on:click="submit" name="status" value="moderation">
			</label>
		</div>

		<div class="form-group form-group-image-pick">
			<label><%- __("Logo") %></label>
			<div class="image_pick_area<%- (update && obj.images.logo) ? ' active' : '' %>">
				<input class="image_pick" type="file" accept="image/">
				<%-(update && obj.images.logo) ? `<img src="/uploads${obj.images.logo}">` : ''%>
				<input type="hidden" class="hidden_image_url" value="<%=(update && obj.images.logo) ? obj.images.logo : ''%>" name="images[logo]" />
				<a class="upload_new_image" data-del-url="<%-update ? obj.images.logo : ''%>" href="#"><%- __("upload_new_image") %></a>
				<a class="delete_image" data-url="<%-update ? obj.images.logo : ''%>" href="#"><%- __("delete_image") %></a>
			</div>
		</div>

		<div class="form-group form-group-image-pick">
			<label><%- __("Thumb") %></label>
			<div class="image_pick_area<%- (update && obj.images.thumb) ? ' active' : '' %>">
				<input class="image_pick" type="file" accept="image/">
				<%-(update && obj.images.thumb) ? `<img src="/uploads${obj.images.thumb}">` : ''%>
				<input type="hidden" class="hidden_image_url" value="<%=(update && obj.images.thumb) ? obj.images.thumb : ''%>" name="images[thumb]" />
				<a class="upload_new_image" data-del-url="<%-update ? obj.images.thumb : ''%>" href="#"><%- __("upload_new_image") %></a>
				<a class="delete_image" data-url="<%-update ? obj.images.thumb : ''%>" href="#"><%- __("delete_image") %></a>
			</div>
		</div>

		<div class="form-group form-group-image-pick">
			<label><%- __("Main") %></label>
			<div class="image_pick_area<%- (action === 'update' && obj.images.main) ? ' active' : '' %>">
				<input class="image_pick" type="file" accept="image/">
				<%-(action === 'update' && obj.images.main) ? `<img src="/uploads${obj.images.main}">` : ''%>
				<input type="hidden" class="hidden_image_url" value="<%=(action === 'update' && obj.images.main) ? obj.images.main : ''%>" name="images[main]" />
				<a class="upload_new_image" data-del-url="<%-action === 'update' ? obj.images.main : ''%>" href="#"><%- __("upload_new_image") %></a>
				<a class="delete_image" data-url="<%-action === 'update' ? obj.images.main : ''%>" href="#"><%- __("delete_image") %></a>
			</div>
		</div>

		<div>

			<div class="form_block">
				<h2>На каком языке я хочу описать компанию</h2>
				<p>Сайт мультиязычный. Представленный на украинском, английском, русском языках.</p>
				<div class="radiobuttons">
					<% locales.forEach((el, i) => { %>
						<label>
						<input type="checkbox" :required="!description_lang.length ? true : false" name="description_lang[]" v-model="description_lang" value="<%-el%>" <%- (update && obj.description_lang.includes(el)) ? 'checked' : '' %>>
						<span><%-el%></span>
						</label>
						<% }); %>
					</div>
				</div>

				<div v-show="description_lang.length > 0">
					<% locales.forEach((lang, i) => { %>
						<div class="form-group">
						<label for="name_<%-lang%>"><%- __("Name") %> <%-lang%> <b style="color: #ee6e73" v-if="description_lang.includes('<%-lang%>')">*</b></label>
						<textarea maxlength="200" :required="description_lang.includes('<%-lang%>') ? true : false" id="name_<%-lang%>" name="name[<%-lang%>]" rows="2"><%- update ? obj.name[lang] : '' %></textarea>
						</div>
						<% }); %>
					</div>

					<div class="form_block">
						<div class="form-group">
							<label for="phone"><%- __("Phone") %></label>
							<input id="phone" name="phones[]" type="tel" value="<%- update ? obj.phones[0] : '' %>" />
						</div>
					</div>

					<div class="form-group">
						<label for="website"><%- __("website") %></label>
						<input id="website" name="social[website]" type="text" value="<%- update ? obj.social.website : '' %>"/>
					</div>

					<div class="form-group">
						<label for="fasebook">Facebook</label>
						<input id="fasebook" name="social[fasebook]" type="text" value="<%- update ? obj.social.fasebook : '' %>"/>
					</div>

					<div class="form-group">
						<label for="linkedin">LinkedIn</label>
						<input id="linkedin" name="social[linkedin]" type="text" value="<%- update ? obj.social.linkedin : '' %>"/>
					</div>

					<input type="submit" value="<%- __('Send_to_moderation') %>">

				</div>
			</div>

		</form>
