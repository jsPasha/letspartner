/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./public/js/common.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @license Copyright (c) 2003-2018, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */
(function(e){e.en=Object.assign(e.en||{},{a:'Cannot upload file:',b:'Block quote',c:'Bold',d:'Italic',e:'image widget',f:'Enter image caption',g:'Choose heading',h:'Heading',i:'Full size image',j:'Side image',k:'Left aligned image',l:'Centered image',m:'Right aligned image',n:'Upload failed',o:'Insert image',p:'Numbered List',q:'Bulleted List',r:'Link',s:'Change image text alternative',t:'Paragraph',u:'Heading 1',v:'Heading 2',w:'Heading 3',x:'Save',y:'Cancel',z:'Link URL',aa:'Unlink',ab:'Edit link',ac:'Open link in new tab',ad:'This link has no URL',ae:'Rich Text Editor, %0',af:'Rich Text Editor',ag:'Undo',ah:'Redo',ai:'Text alternative'})})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),function(e,t){ true?module.exports=t():undefined}('undefined'==typeof self?this:self,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(o,'a',o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=6)}([function(e,t,o){function n(e,t){for(var o=0;o<e.length;o++){var n=e[o],i=g[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(c(n.parts[r],t))}else{for(var a=[],r=0;r<n.parts.length;r++)a.push(c(n.parts[r],t));g[n.id]={id:n.id,refs:1,parts:a}}}}function i(e,t){for(var o=[],n={},r=0;r<e.length;r++){var i=e[r],a=t.base?i[0]+t.base:i[0],s=i[1],l=i[2],d=i[3],c={css:s,media:l,sourceMap:d};n[a]?n[a].parts.push(c):o.push(n[a]={id:a,parts:[c]})}return o}function r(e,t){var o=b(e.insertInto);if(!o)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var n=w[w.length-1];if('top'===e.insertAt)n?n.nextSibling?o.insertBefore(t,n.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),w.push(t);else if('bottom'===e.insertAt)o.appendChild(t);else if('object'==typeof e.insertAt&&e.insertAt.before){var i=b(e.insertInto+' '+e.insertAt.before);o.insertBefore(t,i)}else throw new Error('[Style Loader]\n\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\n Must be \'top\', \'bottom\', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n')}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=w.indexOf(e);0<=t&&w.splice(t,1)}function s(e){var t=document.createElement('style');return e.attrs.type='text/css',d(t,e.attrs),r(e,t),t}function l(e){var t=document.createElement('link');return e.attrs.type='text/css',e.attrs.rel='stylesheet',d(t,e.attrs),r(e,t),t}function d(e,t){Object.keys(t).forEach(function(o){e.setAttribute(o,t[o])})}function c(e,t){var o,n,i,r;if(t.transform&&e.css)if(r=t.transform(e.css),r)e.css=r;else return function(){};if(t.singleton){var d=_++;o=k||(k=s(t)),n=u.bind(null,o,d,!1),i=u.bind(null,o,d,!0)}else e.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(o=l(t),n=p.bind(null,o,t),i=function(){a(o),o.href&&URL.revokeObjectURL(o.href)}):(o=s(t),n=m.bind(null,o),i=function(){a(o)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function u(e,t,o,n){var i=o?'':n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function m(e,t){var o=t.css,n=t.media;if(n&&e.setAttribute('media',n),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}function p(e,t,o){var n=o.css,i=o.sourceMap,r=t.convertToAbsoluteUrls===void 0&&i;(t.convertToAbsoluteUrls||r)&&(n=v(n)),i&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+' */');var a=new Blob([n],{type:'text/css'}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var g={},f=function(e){var t;return function(){return'undefined'==typeof t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),h=function(e){return document.querySelector(e)},b=function(){var e={};return function(t){if('function'==typeof t)return t();if('undefined'==typeof e[t]){var o=h.call(this,t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),k=null,_=0,w=[],v=o(13);e.exports=function(e,t){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');t=t||{},t.attrs='object'==typeof t.attrs?t.attrs:{},t.singleton||'boolean'==typeof t.singleton||(t.singleton=f()),t.insertInto||(t.insertInto='head'),t.insertAt||(t.insertAt='bottom');var o=i(e,t);return n(o,t),function(e){for(var r=[],a=0;a<o.length;a++){var s=o[a],l=g[s.id];l.refs--,r.push(l)}if(e){var d=i(e,t);n(d,t)}for(var a=0,l;a<r.length;a++)if(l=r[a],0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete g[l.id]}}};var y=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join('\n')}}()},function(e,t,o){'use strict';(function(e,n){var i=o(8),r={function:!0,object:!0},a=r[typeof exports]&&exports&&!exports.nodeType?exports:void 0,s=r[typeof e]&&e&&!e.nodeType?e:void 0,l=Object(i.a)(a&&s&&'object'==typeof n&&n),d=Object(i.a)(r[typeof self]&&self),c=Object(i.a)(r[typeof window]&&window),u=Object(i.a)(r[typeof this]&&this),m=l||c!==(u&&u.window)&&c||d||u||Function('return this')();t.a=m}).call(t,o(2)(e),o(7))},function(e){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,'loaded',{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,'id',{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,'exports',{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z" fill="#000" fill-rule="evenodd"/></svg>'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z" fill="#000" fill-rule="evenodd"/></svg>'},function(e,t,o){var n=o(61);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e,t,o){'use strict';function n(e){const t=e.match(/^([^:]+):/);return t?e+` Read more: ${Xa}#error-${t[1]}\n`:e}function i(){let e='e';for(let t=0;8>t;t++)e+=za(65536*(1+Math.random())).toString(16).substring(1);return e}function r(e,t){return e[is]&&e[is][t]?e[is][t].emitter:null}function a(e,t){e[rs]||(e[rs]=t||i())}function s(e){return e[rs]}function l(e){return e._events||Object.defineProperty(e,'_events',{value:{}}),e._events}function d(){return{callbacks:[],childEvents:[]}}function c(e,t){const o=l(e);if(o[t])return;let n=t,i=null;const r=[];for(;''!==n&&!o[n];)o[n]=d(),r.push(o[n]),i&&o[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(':'));if(''!==n){for(const e of r)e.callbacks=o[n].callbacks.slice();o[n].childEvents.push(i)}}function u(e,t){const o=l(e)[t];if(!o)return[];let n=[o.callbacks];for(let r=0;r<o.childEvents.length;r++){const t=u(e,o.childEvents[r]);n=n.concat(t)}return n}function m(e,t){let o;return e._events&&(o=e._events[t])&&o.callbacks.length?o.callbacks:-1<t.indexOf(':')?m(e,t.substr(0,t.lastIndexOf(':'))):null}function p(e,t,o){for(let[n,i]of e){i?'function'==typeof i&&(i=i(t.name)):i=t.name;const e=new ts(t.source,i);e.path=[...t.path],n.fire(e,...o)}}function g(e,t,o){const n=u(e,t);for(const r of n)for(let e=0;e<r.length;e++)r[e].callback==o&&(r.splice(e,1),e--)}function f(e,...t){t.forEach((t)=>{Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach((o)=>{if(!(o in e.prototype)){const n=Object.getOwnPropertyDescriptor(t,o);n.enumerable=!1,Object.defineProperty(e.prototype,o,n)}})})}function h(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function b(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function _(e){this.__data__=new ms(e)}function w(e,t,o){var n=e[t];Ws.call(e,t)&&ls(n,o)&&(o!==void 0||t in e)||(e[t]=o)}function v(e,t){return Gs.call(e,t)||'object'==typeof e&&t in e&&null===qa(e)}function y(e){return yl(Object(e))}function x(e){return ql.call(e)}function C(e,t,o,n,i,r,a){var s;if(n&&(s=r?n(e,i,r,a):n(e)),void 0!==s)return s;if(!ps(e))return e;var l=dl(e);if(!l){var d=$l(e),c=d==xd||d==Cd;if(Object(vd.a)(e))return wl(e,t);if(d==Ad||d==yd||c&&!r){if(Wa(e))return r?e:{};if(s=wd(c?{}:e),!t)return Cl(e,_l(s,e))}else{if(!Td[d])return r?e:{};s=bd(e,d,C,t)}}else if(s=Yl(e),!t)return vl(e,s);a||(a=new zs);var u=a.get(e);if(u)return u;if(a.set(e,s),!l)var m=o?Pl(e):kl(e);return js(m||e,function(i,r){m&&(r=i,i=e[r]),Us(s,r,C(i,t,o,n,r,e,a))}),s}function A(e,t){const o=La(e.length,t.length);for(let n=0;n<o;n++)if(e[n]!=t[n])return n;return e.length==t.length?'same':e.length<t.length?'prefix':'extension'}function T(e){const t=new Map;for(const o in e)t.set(o,e[o]);return t}function P(e){return!!(e&&e[Symbol.iterator])}function E(e,t){if('function'==typeof t)return t(e);const o={};return t.name&&(o.name=S(t.name,e.name),!o.name)?null:t.attributes&&(o.attributes=O(t.attributes,e),!o.attributes)?null:!(t.classes&&(o.classes=R(t.classes,e),!o.classes))&&!(t.styles&&(o.styles=I(t.styles,e),!o.styles))&&o}function S(e,t){return e instanceof RegExp?e.test(t):e===t}function O(e,t){const o=[];for(const n in e){const i=e[n];if(t.hasAttribute(n)){const e=t.getAttribute(n);if(!0===i)o.push(n);else if(i instanceof RegExp){if(i.test(e))o.push(n);else return null;}else if(e===i)o.push(n);else return null}else return null}return o}function R(e,t){const o=[];for(const n of e)if(n instanceof RegExp){const e=t.getClassNames();for(const t of e)n.test(t)&&o.push(t);if(0===o.length)return null}else if(t.hasClass(n))o.push(n);else return null;return o}function I(e,t){const o=[];for(const n in e){const i=e[n];if(t.hasStyle(n)){const e=t.getStyle(n);if(i instanceof RegExp){if(i.test(e))o.push(n);else return null;}else if(e===i)o.push(n);else return null}else return null}return o}function V(e){e=Qa(e)?T(e):new Map(e);for(const[t,o]of e)null===o?e.delete(t):'string'!=typeof o&&e.set(t,o+'');return e}function F(e,t){let o=null,n=0,r=0,a=null;if(e.clear(),''!==t){';'!=t.charAt(t.length-1)&&(t+=';');for(let s=0;s<t.length;s++){const i=t.charAt(s);if(null===o)switch(i){case':':a||(a=t.substr(n,s-n),r=s+1);break;case'"':case'\'':o=i;break;case';':const l=t.substr(r,s-r);a&&e.set(a.trim(),l.trim()),a=null,n=s+1;}else i===o&&(o=null)}}}function N(e,t){const o=t.split(/\s+/);e.clear(),o.forEach((t)=>e.add(t))}function M(e){return'string'==typeof e?[new Od(e)]:(P(e)||(e=[e]),Array.from(e).map((e)=>'string'==typeof e?new Od(e):e instanceof Rd?new Od(e.data):e))}function D(){for(const e of this.getChildren())if(!e.is('uiElement'))return null;return this.childCount}function B(e,t,o){if(!ps(o))return!1;var n=typeof t;return!('number'==n?!(tl(o)&&fl(t,o.length)):!('string'==n&&t in o))&&ls(o[t],e)}function L(e){e=null==e?e:Object(e);var t=[];for(var o in e)t.push(o);return t}function z(e){pc in e||(Object.defineProperty(e,pc,{value:new Map}),Object.defineProperty(e,gc,{value:new Map}),Object.defineProperty(e,fc,{value:new Map}))}function j(...e){const t=H(...e),o=Array.from(this._bindings.keys()),n=o.length;if(!t.callback&&1<t.to.length)throw new Za('observable-bind-to-no-callback: Binding multiple observables only possible with callback.');if(1<n&&t.callback)throw new Za('observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.');t.to.forEach((e)=>{if(e.properties.length&&e.properties.length!==n)throw new Za('observable-bind-to-properties-length: The number of properties must match.');e.properties.length||(e.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(o[0]).callback=t.callback),J(this._observable,this._to),G(this),this._bindProperties.forEach((e)=>{$(this._observable,e)})}function q(e,t,o){if(1<this._bindings.size)throw new Za('observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().');this.to(...W(e,t),o)}function W(e,t){const o=e.map((e)=>[e,t]);return Array.prototype.concat.apply([],o)}function U(e){return e.every((e)=>'string'==typeof e)}function H(...e){if(!e.length)throw new Za('observable-bind-to-parse-error: Invalid argument syntax in `to()`.');const t={to:[]};let o;return'function'==typeof e[e.length-1]&&(t.callback=e.pop()),e.forEach((e)=>{if('string'==typeof e)o.properties.push(e);else if('object'==typeof e)o={observable:e,properties:[]},t.to.push(o);else throw new Za('observable-bind-to-parse-error: Invalid argument syntax in `to()`.')}),t}function K(e,t,o,n){const i=e[gc],r=i.get(o),a=r||{};a[n]||(a[n]=new Set),a[n].add(t),r||i.set(o,a)}function G(e){let t;e._bindings.forEach((o,n)=>{e._to.forEach((i)=>{t=i.properties[o.callback?0:e._bindProperties.indexOf(n)],o.to.push([i.observable,t]),K(e._observable,o,i.observable,t)})})}function $(e,t){const o=e[fc],n=o.get(t);let i;n.callback?i=n.callback.apply(e,n.to.map((e)=>e[0][e[1]])):(i=n.to[0],i=i[0][i[1]]),e.hasOwnProperty(t)?e[t]=i:e.set(t,i)}function J(e,t){t.forEach((t)=>{const o=e[gc];let n;o.get(t.observable)||e.listenTo(t.observable,'change',(i,r)=>{n=o.get(t.observable)[r],n&&n.forEach((t)=>{$(e,t.property)})})})}function Q(e){return!!(e.item.is('attributeElement')||e.item.is('uiElement'))}function Y(e){let t=0;for(const o of e)t++;return t}function X(){if(Z(this))return null;let e=this.parent;for(;e&&e.is('attributeElement');){if(1<Z(e))return null;e=e.parent}return!e||1<Z(e)?null:this.childCount}function Z(e){return Array.from(e.getChildren()).filter((e)=>!e.is('uiElement')).length}function ee(){return null}function te(e){let t;if('string'!=typeof e)t=e.keyCode+(e.altKey?Dc.alt:0)+(e.ctrlKey?Dc.ctrl:0)+(e.shiftKey?Dc.shift:0);else if(t=Dc[e.toLowerCase()],!t)throw new Za('keyboard-unknown-key: Unknown key name.',{key:e});return t}function oe(e){return'string'==typeof e&&(e=ie(e)),e.map((e)=>'string'==typeof e?te(e):e).reduce((e,t)=>t+e,0)}function ne(e){return Fc.isMac?ie(e).map((e)=>Mc[e.toLowerCase()]||e).reduce((e,t)=>e.slice(-1)in Nc?e+t:e+'+'+t):e}function ie(e){return e.split(/\s*\+\s*/)}function re(e){e.document.on('keydown',(t,o)=>se(t,o,e.domConverter))}function ae(){return null}function se(e,t,o){if(t.keyCode==Dc.arrowright){const e=t.domTarget.ownerDocument.defaultView.getSelection(),n=1==e.rangeCount&&e.getRangeAt(0).collapsed;if(n||t.shiftKey){const t=e.focusNode,i=e.focusOffset,r=o.domPositionToView(t,i);if(null===r)return;let a=!1;const s=r.getLastMatchingPosition((e)=>(e.item.is('uiElement')&&(a=!0),!!(e.item.is('uiElement')||e.item.is('attributeElement'))));if(a){const t=o.viewPositionToDom(s);n?e.collapse(t.parent,t.offset):e.extend(t.parent,t.offset)}}}}function le(e){return'string'==typeof e?[new Od(e)]:(P(e)||(e=[e]),Array.from(e).map((e)=>'string'==typeof e?new Od(e):e instanceof Rd?new Od(e.data):e))}function de(e){return Array.from(e.getChildren()).some((e)=>!e.is('uiElement'))}function ce(e){let t=e.parent;for(;!be(t);){if(!t)return;t=t.parent}return t}function ue(e,t){if(e.priority<t.priority)return!0;return!(e.priority>t.priority)&&e.getIdentity()<t.getIdentity()}function me(e){const t=e.nodeBefore;if(t&&t.is('text'))return new xc(t,t.data.length);const o=e.nodeAfter;return o&&o.is('text')?new xc(o,0):e}function pe(e){if(e.offset==e.parent.data.length)return new xc(e.parent.parent,e.parent.index+1);if(0===e.offset)return new xc(e.parent.parent,e.parent.index);const t=e.parent.data.slice(e.offset);return e.parent._data=e.parent.data.slice(0,e.offset),e.parent.parent._insertChild(e.parent.index+1,new Od(t)),new xc(e.parent.parent,e.parent.index+1)}function ge(e,t){const o=e.data.length;return e._data+=t.data,t._remove(),new xc(e,o)}function fe(e){return e.start.parent==e.end.parent&&e.start.parent.is('attributeElement')&&0===e.start.offset&&e.end.offset===e.start.parent.childCount}function he(e){for(const t of e){if(!jc.some((e)=>t instanceof e))throw new Za('view-writer-insert-invalid-node');t.is('text')||he(t.getChildren())}}function be(e){return e&&(e.is('containerElement')||e.is('documentFragment'))}function ke(e){const t=ce(e.start),o=ce(e.end);if(!t||!o||t!==o)throw new Za('view-writer-invalid-range-container')}function _e(e,t){return null===e.id&&null===t.id}function we(e){return e instanceof Text&&e.data.substr(0,Uc)===Hc}function ve(e){return e.data.length==Uc&&we(e)}function ye(e){return we(e)?e.data.slice(Uc):e.data}function xe(e,t){let o=Kc.get(t);return o||(o=t(window.document),Kc.set(t,o)),e.isEqualNode(o)}function Ce(e){e.document.on('keydown',Ae)}function Ae(e,t){if(t.keyCode==Dc.arrowleft){const e=t.domTarget.ownerDocument.defaultView.getSelection();if(1==e.rangeCount&&e.getRangeAt(0).collapsed){const t=e.getRangeAt(0).startContainer,o=e.getRangeAt(0).startOffset;we(t)&&o<=Uc&&e.collapse(t,0)}}}function Te(e,t,o){function i(n){const i=(c[n-1]===void 0?-1:c[n-1])+1,u=c[n+1]===void 0?-1:c[n+1],m=i>u?-1:1;d[n+m]&&(d[n]=d[n+m].slice(0)),d[n]||(d[n]=[]),d[n].push(i>u?r:a);let p=Ba(i,u),g=p-n;for(;g<s&&p<l&&o(e[g],t[p]);)g++,p++,d[n].push('equal');return p}o=o||function(e,t){return e===t};let r,a;if(t.length<e.length){const o=e;e=t,t=o,r='delete',a='insert'}else r='insert',a='delete';const s=e.length,l=t.length,n=l-s,d={},c={};let u=0,m;do{for(m=-u;m<n;m++)c[m]=i(m);for(m=n+u;m>n;m--)c[m]=i(m);c[n]=i(n),u++}while(c[n]!==l);return d[n].slice(1)}function Pe(e,t,o){e.insertBefore(o,e.childNodes[t]||null)}function Ee(e){const t=e.parentNode;t&&t.removeChild(e)}function Se(e){return'[object Text]'==Object.prototype.toString.call(e)}function Oe(e){if('false'==e.getAttribute('contenteditable'))return!1;const t=e.findAncestor((e)=>e.hasAttribute('contenteditable'));return!t||'true'==t.getAttribute('contenteditable')}function Re(e){let t=0;for(;e.previousSibling;)e=e.previousSibling,t++;return t}function Ie(e){const t=[];for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}function Ve(e,t){const o=Ie(e),n=Ie(t);let r=0;for(;o[r]==n[r]&&o[r];)r++;return 0==r?null:o[r-1]}function Fe(e,t,o){let n=Ie(e);return o&&(n=n.slice(n.indexOf(o)+1)),n.some((e)=>e.tagName&&t.includes(e.tagName.toLowerCase()))}function Ne(e,t){for(;e&&e!=$c.document;)t(e),e=e.parentNode}function Me(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}function De(e){return'[object Window]'==Object.prototype.toString.apply(e)}function Be(e){return e['data-ck-expando']||(e['data-ck-expando']=i())}function Le(e){var t=-1,o=e?e.length:0;for(this.__data__=new Ls;++t<o;)this.add(e[t])}function ze(e,t,o,n,i,r){var a=i&au,s=kl(e),l=s.length,d=kl(t),c=d.length;if(l!=c&&!a)return!1;for(var u=l,m;u--;)if(m=s[u],a?!(m in t):!$s(t,m))return!1;var p=r.get(e);if(p)return p==t;var g=!0;r.set(e,t);for(var f=a;++u<l;){m=s[u];var h=e[m],b=t[m];if(n)var k=a?n(b,h,m,t,e,r):n(h,b,m,e,t,r);if(void 0===k?!(h===b||o(h,b,n,i,r)):!k){g=!1;break}f||(f='constructor'==m)}if(g&&!f){var _=e.constructor,w=t.constructor;_!=w&&'constructor'in e&&'constructor'in t&&!('function'==typeof _&&_ instanceof _&&'function'==typeof w&&w instanceof w)&&(g=!1)}return r['delete'](e),g}function je(e,t,o,n,i){return!(e!==t)||(null!=e&&null!=t&&(ps(e)||Ua(t))?hu(e,t,je,o,n,i):e!==e&&t!==t)}function qe(e,t,o){function n(t){var o=b,n=k;return b=k=void 0,p=t,w=e.apply(n,o),w}function i(e){return p=e,v=setTimeout(s,t),g?n(e):w}function r(e){var o=e-m,n=e-p,i=t-o;return f?Pu(i,_-n):i}function a(e){var o=e-m,n=e-p;return!m||o>=t||0>o||f&&n>=_}function s(){var e=Cu();return a(e)?l(e):void(v=setTimeout(s,r(e)))}function l(e){return(clearTimeout(v),v=void 0,h&&b)?n(e):(b=k=void 0,w)}function d(){void 0!==v&&clearTimeout(v),m=p=0,b=k=v=void 0}function c(){return void 0===v?w:l(Cu())}function u(){var e=Cu(),o=a(e);if(b=arguments,k=this,m=e,o){if(void 0===v)return i(m);if(f)return clearTimeout(v),v=setTimeout(s,t),n(m)}return void 0===v&&(v=setTimeout(s,t)),w}var m=0,p=0,g=!1,f=!1,h=!0,b,k,_,w,v;if('function'!=typeof e)throw new TypeError(Au);return t=Kd(t)||0,ps(o)&&(g=!!o.leading,f='maxWait'in o,_=f?Tu(Kd(o.maxWait)||0,t):_,h='trailing'in o?!!o.trailing:h),u.cancel=d,u.flush=c,u}function We(e){return e==Dc.arrowright||e==Dc.arrowleft||e==Dc.arrowup||e==Dc.arrowdown}function Ue(e){return'[object Range]'==Object.prototype.toString.apply(e)}function He(e){const t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}function Ke(e,t){for(const o of Du)e[o]=t[o]}function Ge(e){return!!Nu(e)&&e===e.ownerDocument.body}function $e({target:e,viewportOffset:t=0}){const o=tt(e);for(let n=o,i=null;n;){let r;r=n==o?nt(e):nt(i),Qe(r,()=>it(e,n));const a=it(e,n);Je(n,a,t),n.parent==n?n=null:(i=n.frameElement,n=n.parent)}}function Je(e,t,o){const n=t.clone().moveBy(0,o),i=t.clone().moveBy(0,-o),r=new Mu(e).excludeScrollbarsAndBorders();if(![i,n].every((e)=>r.contains(e))){let{scrollX:a,scrollY:s}=e;Xe(i,r)?s-=r.top-t.top+o:Ye(n,r)&&(s+=t.bottom-r.bottom+o),Ze(t,r)?a-=r.left-t.left+o:et(t,r)&&(a+=t.right-r.right+o),e.scrollTo(a,s)}}function Qe(e,t){const o=tt(e);for(let n,i;e!=o.document.body;)i=t(),n=new Mu(e).excludeScrollbarsAndBorders(),n.contains(i)||(Xe(i,n)?e.scrollTop-=n.top-i.top:Ye(i,n)&&(e.scrollTop+=i.bottom-n.bottom),Ze(i,n)?e.scrollLeft-=n.left-i.left:et(i,n)&&(e.scrollLeft+=i.right-n.right)),e=e.parentNode}function Ye(e,t){return e.bottom>t.bottom}function Xe(e,t){return e.top<t.top}function Ze(e,t){return e.left<t.left}function et(e,t){return e.right>t.right}function tt(e){return Ue(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function nt(e){if(Ue(e)){let t=e.commonAncestorContainer;return Se(t)&&(t=t.parentNode),t}return e.parentNode}function it(e,t){const o=tt(e),n=new Mu(e);if(o===t)return n;for(let i=o;i!=t;){const e=i.frameElement,t=new Mu(e).excludeScrollbarsAndBorders();n.moveBy(t.left,t.top),i=i.parent}return n}function rt(e){return Qa(e)?T(e):new Map(e)}function at(e){return'string'==typeof e?[new zu(e)]:(P(e)||(e=[e]),Array.from(e).map((e)=>'string'==typeof e?new zu(e):e instanceof ju?new zu(e.data,e.getAttributes()):e))}function st(e,t,o,n,i){return{done:!1,value:{type:e,item:t,previousPosition:o,nextPosition:n,length:i}}}function lt(e){const t=e.split(':');return 1<t.length?t[0]+':'+t[1]:t[0]}function dt(e,t,o){const n=t.getRange(),i=Array.from(e.getAncestors());i.shift(),i.reverse();const r=i.some((e)=>{if(n.containsItem(e)){const t=o.toViewElement(e);return!!t.getCustomProperty('addHighlight')}});return!r}function ct(e,t){return!t.has(e)&&(t.add(e),e.document.model.schema.isBlock(e)&&e.parent)}function ut(e,t){const o=e.parent.getAncestors({parentFirst:!0,includeSelf:!0}),n=o.find((e)=>ct(e,t));return o.forEach((e)=>t.add(e)),n}function mt(){const e=new Set(['insert','move','remove','reinsert']);this.listenTo(this.root.document.model,'applyOperation',(t,o)=>{const n=o[0];!n.isDocumentOperation||e.has(n.type)&&pt.call(this,n)},{priority:'low'})}function pt(e){const t=e.type,o=e.delta.batch;let n,i;'insert'==t?n=Gu.createFromPositionAndShift(e.position,e.nodes.maxOffset):(n=Gu.createFromPositionAndShift(e.getMovedRangeStart(),e.howMany),i=e.sourcePosition);const r=n.end.offset-n.start.offset;let a=n.start;('move'==t||'remove'==t||'reinsert'==t)&&(a=a._getTransformedByInsertion(i,r));const s=this._getTransformedByDocumentChange(t,e.delta.type,a,r,i);('move'==t||'remove'==t||'reinsert'==t)&&3==s.length&&(s[2]=n);const l=Gu.createFromRanges(s),d=!l.isEqual(this),c=this.containsPosition(a),u=i&&(this.containsPosition(i)||this.start.isEqual(i));if(d){const e=Gu.createFromRange(this);this.start=l.start,this.end=l.end,this.fire('change:range',e,{type:t,batch:o,range:n,sourcePosition:i})}else(c||u)&&this.fire('change:content',Gu.createFromRange(this),{type:t,batch:o,range:n,sourcePosition:i})}function gt(e){return e instanceof ju||e instanceof zu?e.getAttributes():null}function ft(e,t){const o=e.document.differ;for(const n of o.getChanges()){if('insert'!=n.type)continue;const o=n.position.parent,i=n.length===o.maxOffset;i&&e.enqueueChange(t,(e)=>{const t=Array.from(o.getAttributeKeys()).filter((e)=>e.startsWith(Zu));for(const n of t)e.removeAttribute(n,o)})}}function ht(e){return e=om(e),e.view=_t(e.view,'container'),(t)=>{t.on('insert:'+e.model,xt(e.view),{priority:e.priority||'normal'})}}function bt(e){e=om(e);const t=e.model.key?e.model.key:e.model;let o='attribute:'+t;if(e.model.name&&(o+=':'+e.model.name),e.model.values)for(const t of e.model.values)e.view[t]=_t(e.view[t],'attribute');else e.view=_t(e.view,'attribute');const n=vt(e);return(t)=>{t.on(o,Pt(n),{priority:e.priority||'normal'})}}function kt(e){e=om(e);const t=e.model.key?e.model.key:e.model;let o='attribute:'+t;if(e.model.name&&(o+=':'+e.model.name),e.model.values)for(const t of e.model.values)e.view[t]=yt(e.view[t]);else e.view=yt(e.view);const n=vt(e);return(t)=>{t.on(o,Tt(n),{priority:e.priority||'normal'})}}function _t(e,t){return'function'==typeof e?e:(o,n)=>wt(e,n,t)}function wt(e,t,o){'string'==typeof e&&(e={name:e});let n;if(n='container'==o?t.createContainerElement(e.name,Object.assign({},e.attributes)):'attribute'==o?t.createAttributeElement(e.name,Object.assign({},e.attributes)):t.createUIElement(e.name,Object.assign({},e.attributes)),e.styles){const o=Object.keys(e.styles);for(const i of o)t.setStyle(i,e.styles[i],n)}if(e.classes){const o=e.classes;if('string'==typeof o)t.addClass(o,n);else for(const e of o)t.addClass(e,n)}return n}function vt(e){return e.model.values?(t,o)=>{const n=e.view[t];return n?n(t,o):null}:e.view}function yt(e){return'string'==typeof e?(t)=>({key:e,value:t}):'object'==typeof e?e.value?()=>e:(t)=>({key:e.key,value:t}):e}function xt(e){return(t,o,n)=>{const i=e(o.item,n.writer);if(i&&n.consumable.consume(o.item,'insert')){const e=n.mapper.toViewPosition(o.range.start);n.mapper.bindElements(o.item,i),n.writer.insert(e,i)}}}function Ct(){return(e,t,o)=>{if(o.consumable.consume(t.item,'insert')){const e=o.writer,n=o.mapper.toViewPosition(t.range.start),i=e.createText(t.item.data);e.insert(n,i)}}}function At(){return(e,t,o)=>{const n=o.mapper.toViewPosition(t.position),i=t.position.getShiftedBy(t.length),r=o.mapper.toViewPosition(i,{isPhantom:!0}),a=new Cc(n,r),s=o.writer.remove(a.getTrimmed());for(const n of Cc.createIn(s).getItems())o.mapper.unbindViewElement(n)}}function Tt(e){return e=e||((e,t)=>({value:e,key:t.attributeKey})),(t,o,n)=>{const i=e(o.attributeOldValue,o),r=e(o.attributeNewValue,o);if((i||r)&&n.consumable.consume(o.item,t.name)){const e=n.mapper.toViewElement(o.item),t=n.writer;if(null!==o.attributeOldValue&&i)if('class'==i.key){const o=Array.isArray(i.value)?i.value:[i.value];for(const n of o)t.removeClass(n,e)}else if('style'==i.key){const o=Object.keys(i.value);for(const n of o)t.removeStyle(n,e)}else t.removeAttribute(i.key,e);if(null!==o.attributeNewValue&&r)if('class'==r.key){const o=Array.isArray(r.value)?r.value:[r.value];for(const n of o)t.addClass(n,e)}else if('style'==r.key){const o=Object.keys(r.value);for(const n of o)t.setStyle(n,r.value[n],e)}else t.setAttribute(r.key,r.value,e)}}}function Pt(e){return(t,o,n)=>{const i=e(o.attributeOldValue,n.writer),r=e(o.attributeNewValue,n.writer);if((i||r)&&n.consumable.consume(o.item,t.name)){const e=n.writer,t=e.document.selection;if(o.item instanceof Yu||o.item instanceof em)e.wrap(t.getFirstRange(),r);else{let t=n.mapper.toViewRange(o.range);null!==o.attributeOldValue&&i&&(t=e.unwrap(t,i)),null!==o.attributeNewValue&&r&&e.wrap(t,r)}}}}function Et(e,t){return(o,n)=>{const i=n.newSelection,r=new Yu,a=[];for(const e of i.getRanges())a.push(t.toModelRange(e));r.setTo(a,{backward:i.isBackward}),r.isEqual(e.document.selection)||e.change((e)=>{e.setSelection(r)})}}function St(){return(e,t,o)=>{const n=t.selection;if(!n.isCollapsed&&o.consumable.consume(n,'selection')){const e=[];for(const t of n.getRanges()){const n=o.mapper.toViewRange(t);e.push(n)}o.writer.setSelection(e,{backward:n.isBackward})}}}function Ot(){return(e,t,o)=>{const n=t.selection;if(n.isCollapsed&&o.consumable.consume(n,'selection')){const e=o.writer,t=n.getFirstPosition(),i=o.mapper.toViewPosition(t),r=e.breakAttributes(i);e.setSelection(r)}}}function Rt(){return(e,t,o)=>{const n=o.writer,i=n.document.selection;for(const n of i.getRanges())n.isCollapsed&&n.end.parent.document&&o.writer.mergeAttributes(n.start);n.setSelection(null)}}function It(e,t){const o=Ft();if(1===o&&(e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0]),0===o||!Vt(e,t))return t.replace(/ \[context: [^\]]+\]$/,'');const n=window.CKEDITOR_TRANSLATIONS[e];return n[t].replace(/ \[context: [^\]]+\]$/,'')}function Vt(e,t){return e in window.CKEDITOR_TRANSLATIONS&&t in window.CKEDITOR_TRANSLATIONS[e]}function Ft(){return Object.keys(window.CKEDITOR_TRANSLATIONS).length}function Nt(e,t){const o={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};return qt(e,o),Wt(e,o,'allowIn'),Wt(e,o,'allowContentOf'),Wt(e,o,'allowWhere'),Wt(e,o,'allowAttributes'),Wt(e,o,'allowAttributesOf'),Wt(e,o,'inheritTypesFrom'),Ut(e,o),o}function Mt(e,t){for(const o of e[t].allowContentOf)if(e[o]){const n=Ht(e,o);n.forEach((e)=>{e.allowIn.push(t)})}delete e[t].allowContentOf}function Dt(e,t){for(const o of e[t].allowWhere){const n=e[o];if(n){const o=n.allowIn;e[t].allowIn.push(...o)}}delete e[t].allowWhere}function Bt(e,t){for(const o of e[t].allowAttributesOf){const n=e[o];if(n){const o=n.allowAttributes;e[t].allowAttributes.push(...o)}}delete e[t].allowAttributesOf}function Lt(e,t){const o=e[t];for(const n of o.inheritTypesFrom){const t=e[n];if(t){const e=Object.keys(t).filter((e)=>e.startsWith('is'));for(const n of e)n in o||(o[n]=t[n])}}delete o.inheritTypesFrom}function zt(e,t){const o=e[t],n=o.allowIn.filter((t)=>e[t]);o.allowIn=Array.from(new Set(n))}function jt(e,t){const o=e[t];o.allowAttributes=Array.from(new Set(o.allowAttributes))}function qt(e,t){for(const o of e){const e=Object.keys(o).filter((e)=>e.startsWith('is'));for(const n of e)t[n]=o[n]}}function Wt(e,t,o){for(const n of e)'string'==typeof n[o]?t[o].push(n[o]):Array.isArray(n[o])&&t[o].push(...n[o])}function Ut(e,t){for(const o of e){const e=o.inheritAllFrom;e&&(t.allowContentOf.push(e),t.allowWhere.push(e),t.allowAttributesOf.push(e),t.inheritTypesFrom.push(e))}}function Ht(e,t){const o=e[t];return Kt(e).filter((e)=>e.allowIn.includes(o.name))}function Kt(e){return Object.keys(e).map((t)=>e[t])}function Gt(e){return'string'==typeof e?{name:e,*getAttributeKeys(){},getAttribute(){}}:{name:e.is('element')?e.name:'$text',*getAttributeKeys(){yield*e.getAttributeKeys()},getAttribute(t){return e.getAttribute(t)}}}function*$t(e,t){for(let o=!1;!o;){if(o=!0,e){const t=e.next();t.done||(o=!1,yield{walker:e,value:t.value})}if(t){const e=t.next();e.done||(o=!1,yield{walker:t,value:e.value})}}}function Jt(e,t){const o=new Set,n=new Map,i=Gu.createIn(e).getItems();for(const n of i)'$marker'==n.name&&o.add(n);for(const i of o){const e=i.getAttribute('data-name'),o=Ku.createBefore(i);n.has(e)?n.get(e).end=Ku.createFromPosition(o):n.set(e,new Gu(Ku.createFromPosition(o))),t.remove(i)}return n}function Qt(e,t){let o;for(const n of new cm(e)){const e={};for(const t of n.getAttributeKeys())e[t]=n.getAttribute(t);const i=t.createElement(n.name,e);o&&t.append(i,o),o=Ku.createAt(i)}return o}function Yt(e){e=om(e);const t=to(e),o=eo(e),n=o?'element:'+o:'element';return(o)=>{o.on(n,t,{priority:e.priority||'normal'})}}function Xt(e){e=om(e),io(e);const t=ro(e),o=eo(e),n=o?'element:'+o:'element';return(o)=>{o.on(n,t,{priority:e.priority||'normal'})}}function Zt(e){e=om(e);let t=null;('string'==typeof e.view||e.view.key)&&(t=no(e)),io(e,t);const o=ro(e);return(t)=>{t.on('element',o,{priority:e.priority||'low'})}}function eo(e){return'string'==typeof e.view?e.view:'object'==typeof e.view&&'string'==typeof e.view.name?e.view.name:null}function to(e){const t=new Id(e.view);return(o,n,i)=>{const r=t.match(n.viewItem);if(r){r.match.name=!0;const t=oo(e.model,n.viewItem,i.writer);if(t&&i.consumable.test(n.viewItem,r.match)){const e=i.splitToAllowedParent(t,n.modelCursor);if(e){i.writer.insert(t,e.position);const o=i.convertChildren(n.viewItem,Ku.createAt(t));i.consumable.consume(n.viewItem,r.match),n.modelRange=new Gu(Ku.createBefore(t),Ku.createAfter(o.modelCursor.parent)),n.modelCursor=e.cursorParent?Ku.createAt(e.cursorParent):n.modelRange.end}}}}}function oo(e,t,o){return e instanceof Function?e(t,o):o.createElement(e)}function no(e){'string'==typeof e.view&&(e.view={key:e.view});const t=e.view.key;let o;if('class'==t||'style'==t){const n='class'==t?'classes':'styles';o={[n]:e.view.value}}else{const n='undefined'==typeof e.view.value?/[\s\S]*/:e.view.value;o={attributes:{[t]:n}}}return e.view.name&&(o.name=e.view.name),e.view=o,t}function io(e,t=null){const o='object'==typeof e.model?e.model.key:e.model,n='object'!=typeof e.model||'undefined'==typeof e.model.value?!(null!==t)||((e)=>e.getAttribute(t)):e.model.value;e.model={key:o,value:n}}function ro(e){const t=new Id(e.view);return(o,n,i)=>{const r=t.match(n.viewItem);if(r){const t=e.model.key,o='function'==typeof e.model.value?e.model.value(n.viewItem):e.model.value;if(null!==o&&(ao(e)?r.match.name=!0:delete r.match.name,!!i.consumable.test(n.viewItem,r.match))){n.modelRange||(n=Object.assign(n,i.convertChildren(n.viewItem,n.modelCursor)));const e=so(n.modelRange,{key:t,value:o},i);e&&i.consumable.consume(n.viewItem,r.match)}}}}function ao(e){return!!('object'!=typeof e.view||eo(e))&&!e.view.classes&&!e.view.attributes&&!e.view.styles}function so(e,t,o){let n=!1;for(const i of Array.from(e.getItems()))o.schema.checkAttribute(i,t.key)&&(o.writer.setAttribute(t.key,t.value,i),n=!0);return n}function lo(){return(e,t,o)=>{if(!t.modelRange&&o.consumable.consume(t.viewItem,{name:!0})){const{modelRange:e,modelCursor:n}=o.convertChildren(t.viewItem,t.modelCursor);t.modelRange=e,t.modelCursor=n}}}function co(){return(e,t,o)=>{if(o.schema.checkChild(t.modelCursor,'$text')&&o.consumable.consume(t.viewItem)){const e=o.writer.createText(t.viewItem.data);o.writer.insert(e,t.modelCursor),t.modelRange=Gu.createFromPositionAndShift(t.modelCursor,e.offsetSize),t.modelCursor=t.modelRange.end}}}function uo(e){const t=[],o=e.root.document;if(!o)return[];const n=Gu.createIn(e);for(const i of o.model.markers){const e=n.getIntersection(i.getRange());e&&t.push([i.name,e])}return t}function mo(e,t){for(const o of e)t(o)}function*po(e){if(e.model.values)for(const t of e.model.values){const o={key:e.model.key,value:t},n=e.view[t],i=e.upcastAlso?e.upcastAlso[t]:void 0;yield*go(o,n,i)}else yield*go(e.model,e.view,e.upcastAlso)}function*go(e,t,o){if(yield{model:e,view:t},o){o=Array.isArray(o)?o:[o];for(const t of o)yield{model:e,view:t}}}function fo(e){return'string'==typeof e?[new zu(e)]:(P(e)||(e=[e]),Array.from(e).map((e)=>'string'==typeof e?new zu(e):e instanceof ju?new zu(e.data,e.getAttributes()):e))}function ho(e,t){t=wo(t);const o=t.reduce((e,t)=>e+t.offsetSize,0),n=e.parent;yo(e);const i=e.index;return n._insertChild(i,t),vo(n,i+t.length),vo(n,i),new Gu(e,e.getShiftedBy(o))}function bo(e){if(!e.isFlat)throw new Za('operation-utils-remove-range-not-flat: Trying to remove a range which starts and ends in different element.');const t=e.start.parent;yo(e.start),yo(e.end);const o=t._removeChildren(e.start.index,e.end.index-e.start.index);return vo(t,e.start.index),o}function ko(e,t){if(!e.isFlat)throw new Za('operation-utils-move-range-not-flat: Trying to move a range which starts and ends in different element.');const o=bo(e);return t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset),ho(t,o)}function _o(e,t,o){yo(e.start),yo(e.end);for(const n of e.getItems()){const e=n.is('textProxy')?n.textNode:n;null===o?e._removeAttribute(t):e._setAttribute(t,o),vo(e.parent,e.index)}vo(e.end.parent,e.end.index)}function wo(e){const t=[];e instanceof Array||(e=[e]);for(let o=0;o<e.length;o++)if('string'==typeof e[o])t.push(new zu(e[o]));else if(e[o]instanceof ju)t.push(new zu(e[o].data,e[o].getAttributes()));else if(e[o]instanceof fm||e[o]instanceof qu)for(const n of e[o])t.push(n);else e[o]instanceof Lu&&t.push(e[o]);for(let o=1;o<t.length;o++){const e=t[o],n=t[o-1];e instanceof zu&&n instanceof zu&&xo(e,n)&&(t.splice(o-1,2,new zu(n.data+e.data,n.getAttributes())),o--)}return t}function vo(e,t){const o=e.getChild(t-1),n=e.getChild(t);if(o&&n&&o.is('text')&&n.is('text')&&xo(o,n)){const i=new zu(o.data+n.data,o.getAttributes());e._removeChildren(t-1,2),e._insertChild(t-1,i)}}function yo(e){const t=e.textNode,o=e.parent;if(t){const n=e.offset-t.startOffset,i=t.index;o._removeChildren(i,1);const r=new zu(t.data.substr(0,n),t.getAttributes()),a=new zu(t.data.substr(n),t.getAttributes());o._insertChild(i,[r,a])}}function xo(e,t){const o=e.getAttributes(),n=t.getAttributes();for(const i of o){if(i[1]!==t.getAttribute(i[0]))return!1;n.next()}return n.next().done}function Co(e){return[e.clone()]}function Ao(e,t){for(let o=0;o<t.length;o++)t[o].baseVersion=e+o+1;return t}function To(e,t){return null===e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)}function Po(e){return 0===e.length?null:1==e.length?e[0]:(e[0].end=e[e.length-1].end,e[0])}function Eo(e,t,o){const n=[];for(let r=0;r<e.length;r++){const i=So(e[r],t,o.isSticky);n.push(i);for(let t=r+1;t<e.length;t++)e[t]=e[t]._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)[0];t=t._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany,!0,!1)}return n}function So(e,t,o){let n='$graveyard'==t.root.rootName?wm:'$graveyard'==e.start.root.rootName?_m:km;const i=new n(e.start,e.end.offset-e.start.offset,t,0);return i.isSticky=o,i}function Oo(e,t,o,n,i){var r=-1,a=e.length;for(o||(o=Um),i||(i=[]);++r<a;){var s=e[r];0<t&&o(s)?1<t?Oo(s,t-1,o,n,i):Al(i,s):!n&&(i[i.length]=s)}return i}function Ro(e,t,o,n){var i=o.length,r=i,a=!n;if(null==e)return!r;for(e=Object(e);i--;){var s=o[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<r;){s=o[i];var l=s[0],d=e[l],c=s[1];if(!(a&&s[2])){var u=new zs;if(n)var m=n(d,c,l,e,t,u);if(void 0===m?!bu(c,d,n,tp|op,u):!m)return!1}else if(void 0===d&&!(l in e))return!1}return!0}function Io(e,t){if('function'!=typeof e||t&&'function'!=typeof t)throw new TypeError(cp);var o=function(){var n=arguments,i=t?t.apply(this,n):n[0],r=o.cache;if(r.has(i))return r.get(i);var a=e.apply(this,n);return o.cache=r.set(i,a),a};return o.cache=new(Io.Cache||Ls),o}function Vo(e,t){if(dl(e))return!1;var o=typeof e;return!!('number'==o||'symbol'==o||'boolean'==o||null==e||Ld(e))||wp.test(e)||!_p.test(e)||null!=t&&e in Object(t)}function Fo(e,t){return t in Object(e)}function No(e,t){for(const o of t)for(const t of o.operations)t.baseVersion=++e;return t}function Mo(e){return e.reduce((e,t)=>e+t.operations.length,0)}function Do(e,t){const o=e[e.length-1];let n=o.operations.length+o.baseVersion;const r=new Om;for(let o=0;o<t;o++)r.addOperation(new xm(n++));e.push(r)}function Bo(e,t,o){qo(e,t,o),Lo(e,t,o),jo(t,o),zo(t,o)}function Lo(e,t,o){const n=o.originalDelta.get(t);if(o.document.history.isUndoingDelta(n)){const t=o.document.history.getUndoneDelta(n),i=o.wasAffected.get(e),r=i.get(t);r!==void 0&&(o.insertBefore=r)}}function zo(e,t){const o=t.originalDelta.get(e),n=t.document.history;t.forceNotSticky=n.isUndoneDelta(o)||n.isUndoingDelta(o)}function jo(e,t){const o=t.document.history,n=t.originalDelta.get(e);t.forceWeakRemove=o.isUndoneDelta(n)}function qo(e,t,o){o.wasAffected.get(e)||o.wasAffected.set(e,new Map);const n=o.originalDelta.get(t);let i=!!o.wasAffected.get(e).get(n);for(const n of e.operations){for(const e of t.operations)if(n instanceof km&&e instanceof km&&Wo(n,e)){i=!0;break}if(i)break}o.wasAffected.get(e).set(n,i)}function Wo(e,t){const o=e.targetPosition,n=t.sourcePosition,i=A(n.getParentPath(),o.getParentPath());return!(o.root!=n.root)&&'same'==i&&n.offset<o.offset}function Uo(e,t,o){delete o.insertBefore,delete o.forceNotSticky,delete o.forceWeakRemove;const n=o.wasAffected.get(e);o.wasAffected.delete(e);for(const i of t)o.wasAffected.set(i,new Map(n))}function Ho(e,t){let n=[],i=null,o;switch(e){case Fm:case Nm:for(const e of t)i=e instanceof xm?new Om:e instanceof wm?new Nm:new Fm,i.addOperation(e),n.push(i);return n;case Im:case Dm:return i=new e,i.addOperation(t[0]),i.addOperation(t[1]),n=Ho(Fm,t.slice(2)),[i].concat(n);case Vm:case Bm:return n=Ho(Fm,t.slice(0,-2)),i=new e,i.addOperation(t[t.length-2]),i.addOperation(t[t.length-1]),n.concat(i);case Mm:return i=t[0]instanceof xm?new Om:new Mm,i.addOperation(t[0]),[i];case Rm:for(o=0;o<t.length&&!!(t[o]instanceof xm);o++);o==t.length?i=new Om:(i=new Rm,0!=o&&t.unshift(t.splice(o,1)[0]));for(const e of t)i.addOperation(e);return[i];default:i=new e;for(const e of t)i.addOperation(e);return[i];}}function Ko(e,t){const o=e.clone(),n=o.operations[0];return n.oldRange&&(n.oldRange=n.oldRange.getTransformedByDelta(t)[0]),n.newRange&&(n.newRange=n.newRange.getTransformedByDelta(t)[0]),[o]}function Go(e,t){function o(){const o=new Gu(e.position.getShiftedBy(s),e.position.getShiftedBy(l)),i=new bm(o,t.key,a,t.value,0);n.addOperation(i)}const n=new Rm,r=e.nodes;let a=r.getNode(0).getAttribute(t.key),s=0,l=r.getNode(0).offsetSize;for(let n=1;n<r.length;n++){const e=r.getNode(n),i=e.getAttribute(t.key);i!=a&&(a!=t.value&&o(),a=i,s=l),l+=e.offsetSize}return o(),n}function $o(){const e=new Om;return e.addOperation(new xm(0)),e}function Jo(e,t,o,n){function i(){0===r.operations.length&&e.batch.addDelta(r);const n=new Gu(l,d),i=n.root.document?s.version:null,u=new bm(n,t,c,o,i);r.addOperation(u),a.applyOperation(u)}const r=new Rm,a=e.model,s=a.document;let l=n.start,d,c,u;for(const r of n)u=r.item.getAttribute(t),d&&c!=u&&(c!=o&&i(),l=d),d=r.nextPosition,c=u;d instanceof Ku&&d!=l&&c!=o&&i()}function Qo(e,t,o,n){const i=e.model,r=i.document,a=n.getAttribute(t);let s,l;if(a!=o){const d=n.root===n,c=d?new Lg:new Rm;if(e.batch.addDelta(c),d){const e=n.document?r.version:null;l=new Am(n,t,a,o,e)}else{s=n.is('element')?new Gu(Ku.createBefore(n),Ku.createFromParentAndOffset(n,0)):new Gu(Ku.createBefore(n),Ku.createAfter(n));const e=s.root.document?r.version:null;l=new bm(s,t,a,o,e)}c.addOperation(l),i.applyOperation(l)}}function Yo(e,t,o,n){const i=e.model,r=i.document,a=new Ng,s=new ym(t,o,n,i.markers,r.version);e.batch.addDelta(a),a.addOperation(s),i.applyOperation(s)}function Xo(e,t,o,n){let i;if(e.root.document){const o=n.document,r=new Ku(o.graveyard,[0]);i=new wm(e,t,r,o.version)}else i=new zg(e,t);o.addOperation(i),n.applyOperation(i)}function Zo(e,t){return!(e!==t)||!!(e instanceof jg&&t instanceof jg)}function en(e){const t=[];for(const o of e)if(o.is('text'))for(let e=0;e<o.data.length;e++)t.push({name:'$text',attributes:new Map(o.getAttributes())});else t.push({name:o.name,attributes:new Map(o.getAttributes())});return t}function tn(e,t){const o=[];let n=0,i=0;for(const r of t)r.offset>n&&(o.push(...'e'.repeat(r.offset-n).split('')),i+=r.offset-n),'insert'==r.type?(o.push(...'i'.repeat(r.howMany).split('')),n=r.offset+r.howMany):'remove'==r.type?(o.push(...'r'.repeat(r.howMany).split('')),n=r.offset,i+=r.howMany):(o.push(...'a'.repeat(r.howMany).split('')),n=r.offset+r.howMany,i+=r.howMany);return i<e&&o.push(...'e'.repeat(e-i).split('')),o}function on(e){const t=e.position&&'$graveyard'==e.position.root.rootName,o=e.range&&'$graveyard'==e.range.root.rootName;return!t&&!o}function nn(e){return!!e&&1==e.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e)}function rn(e){return!!e&&1==e.length&&/[\ud800-\udbff]/.test(e)}function an(e){return!!e&&1==e.length&&/[\udc00-\udfff]/.test(e)}function sn(e,t){return rn(e.charAt(t-1))&&an(e.charAt(t))}function ln(e,t){return nn(e.charAt(t))}function dn(e){const t=e.textNode;if(t){const o=t.data,n=e.offset-t.startOffset;return!sn(o,n)&&!ln(o,n)}return!0}function cn(){const e=new Set(['insert','move','remove','reinsert']);this.listenTo(this.root.document.model,'applyOperation',(t,o)=>{const n=o[0];!n.isDocumentOperation||e.has(n.type)&&un.call(this,n)},{priority:'low'})}function un(e){let t,o;'insert'==e.type?t=Gu.createFromPositionAndShift(e.position,e.nodes.maxOffset):(t=Gu.createFromPositionAndShift(e.getMovedRangeStart(),e.howMany),o=e.sourcePosition);const n=t.end.offset-t.start.offset;let i;switch(e.type){case'insert':const r='sticksToNext'==this.stickiness;i=this._getTransformedByInsertion(t.start,n,r);break;case'move':case'remove':case'reinsert':const a=Gu.createFromPositionAndShift(o,n),s=a.containsPosition(this)||a.start.isEqual(this)&&'sticksToNext'==this.stickiness||a.end.isEqual(this)&&'sticksToPrevious'==this.stickiness;if(s)i=this._getCombined(o,t.start);else{const e='sticksToNext'==this.stickiness,r=t.start._getTransformedByInsertion(o,n);i=this._getTransformedByMove(o,r,n,e)}}if(!this.isEqual(i)){const e=Ku.createFromPosition(this);this.path=i.path,this.root=i.root,this.fire('change',e)}}function mn(e,t,o){e.change((n)=>{o.isCollapsed||e.deleteContent(o);const i=new Qg(e,n,o.anchor);let r;r=t.is('documentFragment')?t.getChildren():[t],i.handleNodes(r,{isFirst:!0,isLast:!0});const a=i.getSelectionRange();a?o instanceof em?n.setSelection(a):o.setTo(a):Ru.warn('insertcontent-no-range: Cannot determine a proper selection range after insertion.')})}function pn(e,t,o={}){if(t.isCollapsed)return;const n=e.schema;e.change((e)=>{if(!o.doNotResetEntireContent&&_n(n,t))return void kn(e,t,n);const i=t.getFirstRange(),r=i.start,a=Jg.createFromPosition(i.end);i.start.isTouching(i.end)||e.remove(i),o.leaveUnmerged||(gn(e,r,a),n.removeDisallowedAttributes(r.parent.getChildren(),e)),t instanceof em?e.setSelection(r):t.setTo(r),fn(n,r)&&bn(e,r,t),a.detach()})}function gn(e,t,o){const n=t.parent,i=o.parent;if(n!=i&&n.parent&&i.parent&&hn(t,o,e.model.schema)){for(t=Ku.createAfter(n),o=Ku.createBefore(i),o.isEqual(t)||e.insert(i,t),e.merge(t);o.parent.isEmpty;){const t=o.parent;o=Ku.createBefore(t),e.remove(t)}gn(e,t,o)}}function fn(e,t){const o=e.checkChild(t,'$text'),n=e.checkChild(t,'paragraph');return!o&&n}function hn(e,t,o){const n=new Gu(e,t);for(const i of n.getWalker())if(o.isObject(i.item)||o.isLimit(i.item))return!1;return!0}function bn(e,t,o){const n=e.createElement('paragraph');e.insert(n,t),o instanceof em?e.setSelection(n,0):o.setTo(n,0)}function kn(e,t){const o=e.model.schema.getLimitElement(t);e.remove(Gu.createIn(o)),bn(e,Ku.createAt(o),t)}function _n(e,t){const o=e.getLimitElement(t);if(!t.containsEntireContent(o))return!1;const n=t.getFirstRange();return n.start.parent!=n.end.parent&&e.checkChild(o,'paragraph')}function wn(e,t,o={}){const n=e.schema,i='backward'!=o.direction,r=o.unit?o.unit:'character',a=t.focus,s=new Uu({boundaries:Cn(a,i),singleCharacters:!0,direction:i?'forward':'backward'}),l={walker:s,schema:n,isForward:i,unit:r};for(let n;n=s.next();){if(n.done)return;const o=vn(l,n.value);if(o)return void(t instanceof em?e.change((e)=>{e.setSelectionFocus(o)}):t.setFocus(o))}}function vn(e,t){if('text'==t.type)return'word'===e.unit?xn(e.walker,e.isForward):yn(e.walker,e.unit,e.isForward);if(t.type==(e.isForward?'elementStart':'elementEnd')){if(e.schema.isObject(t.item))return Ku.createAt(t.item,e.isForward?'after':'before');if(e.schema.checkChild(t.nextPosition,'$text'))return t.nextPosition}else{if(e.schema.isLimit(t.item))return void e.walker.skip(()=>!0);if(e.schema.checkChild(t.nextPosition,'$text'))return t.nextPosition}}function yn(e,t){const o=e.position.textNode;if(o){const n=o.data;for(let i=e.position.offset-o.startOffset;sn(n,i)||'character'==t&&ln(n,i);)e.next(),i=e.position.offset-o.startOffset}return e.position}function xn(e,t){let o=e.position.textNode;if(o)for(let n=e.position.offset-o.startOffset;!An(o.data,n,t)&&!Tn(o,n,t);){e.next();const i=t?e.position.nodeAfter:e.position.nodeBefore;if(i){const n=i.data.charAt(t?0:i.data.length-1);Yg.includes(n)||(e.next(),o=e.position.textNode)}n=e.position.offset-o.startOffset}return e.position}function Cn(e,t){const o=e.root,n=Ku.createAt(o,t?'end':0);return t?new Gu(e,n):new Gu(n,e)}function An(e,t,o){const n=t+(o?0:-1);return Yg.includes(e.charAt(n))}function Tn(e,t,o){return t===(o?e.endOffset:0)}function Pn(e,t){return e.change((e)=>{const o=e.createDocumentFragment(),n=t.getFirstRange();if(!n||n.isCollapsed)return o;const i=n.start.root,r=n.start.getCommonPath(n.end),a=i.getNodeByPath(r);let s=n.start.parent==n.end.parent?n:Gu.createFromParentsAndOffsets(a,n.start.path[r.length],a,n.end.path[r.length]+1);const l=s.end.offset-s.start.offset;for(const t of s.getItems({shallow:!0}))t.is('textProxy')?e.appendText(t.data,t.getAttributes(),o):e.append(t._clone(!0),o);if(s!=n){const t=n._getTransformedByMove(s.start,Ku.createAt(o,0),l)[0],i=new Gu(Ku.createAt(o),t.start),r=new Gu(t.end,Ku.createAt(o,'end'));En(r,e),En(i,e)}return o})}function En(e,t){const o=[];Array.from(e.getItems({direction:'backward'})).map((e)=>Gu.createOn(e)).filter((t)=>{const o=(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end));return o}).forEach((e)=>{o.push(e.start.parent),t.remove(e)}),o.forEach((e)=>{for(let o=e;o.parent&&o.isEmpty;){const e=Gu.createOn(o);o=o.parent,t.remove(e)}})}function Sn(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}function On(e){if(!hs(e.updateElement))throw new Za('attachtoform-missing-elementapi-interface: ElementApi interface is required.');const t=e.element;if(t&&'textarea'===t.tagName.toLowerCase()&&t.form){let o;const n=t.form,i=()=>e.updateElement();hs(n.submit)&&(o=n.submit,n.submit=()=>{i(),o.apply(n)}),n.addEventListener('submit',i),e.on('destroy',()=>{n.removeEventListener('submit',i),o&&(n.submit=o)})}}function Rn(e){return(e+'').toLowerCase()}function In({origin:e,originKeystrokeHandler:t,originFocusTracker:o,toolbar:n,beforeFocus:i,afterBlur:r}){o.add(n.element),t.set('Alt+F10',(e,t)=>{o.isFocused&&!n.focusTracker.isFocused&&(i&&i(),n.focus(),t())}),n.keystrokes.set('Esc',(t,o)=>{n.focusTracker.isFocused&&(e.focus(),r&&r(),o())})}function Vn(e){return Array.isArray(e)?{items:e}:e?Object.assign({items:[]},e):{items:[]}}function Fn(e){return e.every((e)=>'string'==typeof e)}function Nn(e){return!!e&&((e.value&&(e=e.value),Array.isArray(e))?e.some(Nn):!!(e instanceof pf))}function Mn(e,t){return e.map((e)=>e instanceof pf?e.getValue(t):e)}function Dn(e,t,{node:o}){let n=Mn(e,o);n=1==e.length&&e[0]instanceof ff?n[0]:n.reduce($n,''),Yn(n)?t.remove():t.set(n)}function Bn(e){return{set(t){e.textContent=t},remove(){e.textContent=''}}}function Ln(e,t,o){return{set(n){e.setAttributeNS(o,t,n)},remove(){e.removeAttributeNS(o,t)}}}function zn(e,t){return{set(o){e.style[t]=o},remove(){e.style[t]=null}}}function jn(e){const t=uf(e,(e)=>{if(e&&(e instanceof pf||Zn(e)||Xn(e)||ei(e)))return e});return t}function qn(e){if('string'==typeof e?e=Hn(e):e.text&&Kn(e),e.on&&(e.eventListeners=Un(e.on),delete e.on),!e.text){e.attributes&&Wn(e.attributes);const t=[];if(e.children)if(ei(e.children))t.push(e.children);else for(const o of e.children)Zn(o)||Xn(o)||Me(o)?t.push(o):t.push(new mf(o));e.children=t}return e}function Wn(e){for(const t in e)e[t].value&&(e[t].value=[].concat(e[t].value)),Gn(e,t)}function Un(e){for(const t in e)Gn(e,t);return e}function Hn(e){return{text:[e]}}function Kn(e){Array.isArray(e.text)||(e.text=[e.text])}function Gn(e,t){Array.isArray(e[t])||(e[t]=[e[t]])}function $n(e,t){return Yn(t)?e:Yn(e)?t:`${e} ${t}`}function Jn(e,t){for(const o in t)e[o]?e[o].push(...t[o]):e[o]=t[o]}function Qn(e,t){if(t.attributes&&(!e.attributes&&(e.attributes={}),Jn(e.attributes,t.attributes)),t.eventListeners&&(!e.eventListeners&&(e.eventListeners={}),Jn(e.eventListeners,t.eventListeners)),t.text&&e.text.push(...t.text),t.children&&t.children.length){if(e.children.length!=t.children.length)throw new Za('ui-template-extend-children-mismatch: The number of children in extended definition does not match.');let o=0;for(const n of t.children)Qn(e.children[o++],n)}}function Yn(e){return!e&&0!==e}function Xn(e){return e instanceof kf}function Zn(e){return e instanceof mf}function ei(e){return e instanceof cf}function ti(){return{children:[],bindings:[],attributes:{}}}function oi(e){return'class'==e||'style'==e}function ni(e){return(t)=>t+e}function ii(e){return!!(e.focus&&'none'!=$c.window.getComputedStyle(e.element).display)}function ri(e){return e.bindTemplate.to((t)=>{t.target===e.element&&t.preventDefault()})}function ai(e){return e instanceof HTMLTextAreaElement?e.value:e.innerHTML}function si(e){const t=e.files?Array.from(e.files):[],o=e.items?Array.from(e.items):[];return t.length?t:o.filter((e)=>'file'===e.kind).map((e)=>e.getAsFile())}function li(e,t){const o=t.target.ownerDocument,n=t.clientX,i=t.clientY;let r;return o.caretRangeFromPoint&&o.caretRangeFromPoint(n,i)?r=o.caretRangeFromPoint(n,i):t.rangeParent&&(r=o.createRange(),r.setStart(t.rangeParent,t.rangeOffset),r.collapse(!0)),r?e.domConverter.domRangeToView(r):e.document.selection.getFirstRange()}function di(e){return e=e.replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n\n/g,'</p><p>').replace(/\n/g,' ').replace(/^\s/,'&nbsp;').replace(/\s$/,'&nbsp;').replace(/\s\s/g,' &nbsp;'),-1<e.indexOf('</p><p>')&&(e=`<p>${e}</p>`),e}function ci(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>1==t.length?' ':t)}function ui(e){let t='';if(e.is('text')||e.is('textProxy'))t=e.data;else if(e.is('img')&&e.hasAttribute('alt'))t=e.getAttribute('alt');else{let o=null;for(const n of e.getChildren()){const e=ui(n);o&&(o.is('containerElement')||n.is('containerElement'))&&(Hf.includes(o.name)||Hf.includes(n.name)?t+='\n':t+='\n\n'),t+=e,o=n}}return t}function mi(e,t,o,n){const i=o.isCollapsed,r=o.getFirstRange(),a=r.start.parent,s=r.end.parent;if(n.isLimit(a)||n.isLimit(s))return void(i||a!=s||e.deleteContent(o));if(i)pi(t,o,r.start);else{const n=!(r.start.isAtStart&&r.end.isAtEnd);e.deleteContent(o,{leaveUnmerged:n}),n&&(a==s?pi(t,o,o.focus):t.setSelection(s,0))}}function pi(e,t,o){const n=o.parent,i=new n.constructor(n.name,n.getAttributes());o.isAtEnd?e.insert(i,o.parent,'after'):o.isAtStart?e.insert(i,o.parent,'before'):e.split(o),e.setSelection(o.parent.nextSibling,0)}function gi(e,t){function o(){a&&(i.push(a),a=null)}function n(e){return a&&a.type==e}const i=[];let r=0,a;return e.forEach((e)=>{'equal'==e?(o(),r++):'insert'==e?(n('insert')?a.values.push(t[r]):(o(),a={type:'insert',index:r,values:[t[r]]}),r++):n('delete')?a.howMany++:(o(),a={type:'delete',index:r,howMany:1})}),o(),i}function fi(e){return!!e.ctrlKey||th.includes(e.keyCode)}function hi(e,t){return e instanceof Od&&t instanceof Od?e.data===t.data:e===t}function bi(e){if(1==e.newChildren.length-e.oldChildren.length){const t=Te(e.oldChildren,e.newChildren,hi),o=gi(t,e.newChildren);if(!(1<o.length)){const e=o[0];return e.values[0]instanceof Od?e:void 0}}}function ki(e){const t=e.map((e)=>e.node).reduce((e,t)=>e.getCommonAncestor(t,{includeSelf:!0}));return t?t.getAncestors({includeSelf:!0,parentFirst:!0}).find((e)=>e.is('containerElement')||e.is('rootElement')):void 0}function _i(e){if(0==e.length)return!1;for(const t of e)if('children'===t.type&&!bi(t))return!0;return!1}function wi(e){return e.every((e)=>e.is('text'))}function vi(e){let t=null,o=null;for(let n=0;n<e.length;n++){const i=e[n];'equal'!=i&&(t=null===t?n:t,o=n)}let n=0,r=0;for(let a=t;a<=o;a++)'insert'!=e[a]&&n++,'delete'!=e[a]&&r++;return{insertions:r,deletions:n,firstChangeAt:t}}function yi(e,t){const o=xi([e],t);o.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let n=1;n<o.length;n++){const e=o[n-1],t=o[n];e.end.isTouching(t.start)&&(e.end=t.end,o.splice(n,1),n--)}return o}function xi(e,t){for(const o of t)for(const t of o.operations)for(let o=0;o<e.length;o++){let n;switch(t.type){case'insert':n=e[o]._getTransformedByInsertion(t.position,t.nodes.maxOffset,!0);break;case'move':case'remove':case'reinsert':n=e[o]._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!0);}n&&(e.splice(o,1,...n),o=o+n.length-1)}return e}function Ci(){let e=Ai(Sh);return e&&e.length==Oh||(e=Pi(Oh),Ti(Sh,e)),e}function Ai(e){e=e.toLowerCase();const t=document.cookie.split(';');for(const o of t){const t=o.split('='),n=decodeURIComponent(t[0].trim().toLowerCase());if(n===e)return decodeURIComponent(t[1])}return null}function Ti(e,t){document.cookie=encodeURIComponent(e)+'='+encodeURIComponent(t)+';path=/'}function Pi(e){let t='';const o=new Uint8Array(e);window.crypto.getRandomValues(o);for(let n=0;n<o.length;n++){const e=Rh.charAt(o[n]%Rh.length);t+=.5<Math.random()?e.toUpperCase():e}return t}function Ei(e){return Array.from(e.getChildren()).reduce((e,t)=>e+t.data,'')}function Si(e,t){return t.filter((e)=>e[0]!==void 0&&e[1]!==void 0).map((t)=>Gu.createFromParentsAndOffsets(e,t[0],e,t[1]))}function Oi(e){const t=e.next();return t.done?null:t.value}function Ri(e){return'blockQuote'==e.parent.name?e.parent:null}function Ii(e){let t=0,o;const n=[];for(;t<e.length;){const i=e[t],r=e[t+1];o||(o=Ku.createBefore(i)),r&&i.nextSibling==r||(n.push(new Gu(o,Ku.createAfter(i))),o=null),t++}return n}function Vi(e,t){const o=e.checkChild(t.parent,'blockQuote'),n=e.checkChild(['$root','blockQuote'],t);return o&&n}function Fi(e,t=512){try{const o=e.match(ab)[1],n=atob(e.replace(ab,'')),i=[];for(let e=0;e<n.length;e+=t){const o=n.slice(e,e+t),r=Array(o.length);for(let e=0;e<o.length;e++)r[e]=o.charCodeAt(e);i.push(new Uint8Array(r))}return new Blob(i,{type:o})}catch(e){throw new Error('Problem with decoding Base64 image data.')}}function Ni(e){if('string'!=typeof e)return!1;const t=e.match(ab);return!!(t&&t.length)}function Mi(){function e(e,t,o){if(o.consumable.test(t.viewItem,{name:!0,classes:'image'})){const e=Array.from(t.viewItem.getChildren()).find((e)=>e.is('img'));if(e&&e.hasAttribute('src')&&o.consumable.test(e,{name:!0})){const n=o.convertItem(e,t.modelCursor),i=Oi(n.modelRange.getItems());i&&(o.convertChildren(t.viewItem,Ku.createAt(i)),t.modelRange=n.modelRange,t.modelCursor=n.modelCursor)}}}return(t)=>{t.on('element:figure',e)}}function Di(){function e(e,t,o){if(o.consumable.consume(t.item,e.name)){const e=o.writer,n=o.mapper.toViewElement(t.item),i=n.getChild(0);if(null===t.attributeNewValue){const o=t.attributeOldValue;o.data&&(e.removeAttribute('srcset',i),e.removeAttribute('sizes',i),o.width&&e.removeAttribute('width',i))}else{const o=t.attributeNewValue;o.data&&(e.setAttribute('srcset',o.data,i),e.setAttribute('sizes','100vw',i),o.width&&e.setAttribute('width',o.width,i))}}}return(t)=>{t.on('attribute:srcset:image',e)}}function Bi(e){function t(e,t,o){if(o.consumable.consume(t.item,e.name)){const e=o.writer,n=o.mapper.toViewElement(t.item),i=n.getChild(0);null===t.attributeNewValue?e.removeAttribute(t.attributeKey,i):e.setAttribute(t.attributeKey,t.attributeNewValue,i)}}return(o)=>{o.on(`attribute:${e}:image`,t)}}function Li(e,t){return e&&t&&e.priority==t.priority&&ji(e.classes)==ji(t.classes)}function zi(e,t){if(e.priority>t.priority)return!0;return!(e.priority<t.priority)&&ji(e.classes)>ji(t.classes)}function ji(e){return Array.isArray(e)?e.sort().join(','):e}function qi(e){return!!e.getCustomProperty(gb)}function Wi(e,t,o={}){function n(e){return Array.isArray(e)?e:[e]}return t.setAttribute('contenteditable','false',e),t.addClass(hb,e),t.setCustomProperty(gb,!0,e),e.getFillerOffset=$i,o.label&&Hi(e,o.label,t),Ui(e,t,(e,t,o)=>o.addClass(n(t.classes),e),(e,t,o)=>o.removeClass(n(t.classes),e)),e}function Ui(e,t,o,n){const i=new pb;i.on('change:top',(t,i)=>{i.oldDescriptor&&n(e,i.oldDescriptor,i.writer),i.newDescriptor&&o(e,i.newDescriptor,i.writer)}),t.setCustomProperty('addHighlight',(e,t,o)=>i.add(t,o),e),t.setCustomProperty('removeHighlight',(e,t,o)=>i.remove(t,o),e)}function Hi(e,t,o){o.setCustomProperty(fb,t,e)}function Ki(e){const t=e.getCustomProperty(fb);return t?'function'==typeof t?t():t:''}function Gi(e,t){return t.addClass(['ck-editor__editable','ck-editor__nested-editable'],e),t.setAttribute('contenteditable',e.isReadOnly?'false':'true',e),e.on('change:isReadOnly',(o,n,i)=>{t.setAttribute('contenteditable',i?'false':'true',e)}),e.on('change:isFocused',(o,n,i)=>{i?t.addClass('ck-editor__nested-editable_focused',e):t.removeClass('ck-editor__nested-editable_focused',e)}),e}function $i(){return null}function Ji(e,t,o){return t.setCustomProperty(kb,!0,e),Wi(e,t,{label:function(){const t=e.getChild(0),n=t.getAttribute('alt');return n?`${n} ${o}`:o}})}function Qi(e){return!!e.getCustomProperty(kb)&&qi(e)}function Yi(e){const t=e.getSelectedElement();return!!(t&&Qi(t))}function Xi(e){return e instanceof Wu&&'image'==e.name}function Zi(e){const t=e.createEmptyElement('img'),o=e.createContainerElement('figure',{class:'image'});return e.insert(xc.createAt(o),t),o}function er(e){return e==Dc.arrowright||e==Dc.arrowleft||e==Dc.arrowup||e==Dc.arrowdown}function tr(e){return te(e)==xb}function or(e){for(;e;){if(e instanceof _c&&!(e instanceof vc))return!0;e=e.parent}return!1}function nr({emitter:e,activator:t,callback:o,contextElements:n}){e.listenTo(document,'mousedown',(e,{target:i})=>{if(t()){for(const e of n)if(e.contains(i))return;o()}})}function ir({view:e}){e.listenTo(e.element,'submit',(t,o)=>{o.preventDefault(),e.fire('submit')},{useCapture:!0})}function rr(e){for(;e&&'html'!=e.tagName.toLowerCase();){if('static'!=$c.window.getComputedStyle(e).position)return e;e=e.parentElement}return null}function ar({element:e,target:t,positions:o,limiter:n,fitInViewport:i}){hs(t)&&(t=t()),hs(n)&&(n=n());const r=rr(e.parentElement),a=new Mu(e),s=new Mu(t);let l,d;if(!n&&!i)[d,l]=sr(o[0],s,a);else{const e=n&&new Mu(n).getVisible(),t=i&&new Mu($c.window);[d,l]=lr(o,s,a,e,t)||sr(o[0],s,a)}let{left:c,top:u}=dr(l);if(r){const e=dr(new Mu(r)),t=He(r);c-=e.left,u-=e.top,c+=r.scrollLeft,u+=r.scrollTop,c-=t.left,u-=t.top}return{left:c,top:u,name:d}}function sr(e,t,o){const{left:n,top:i,name:r}=e(t,o);return[r,o.clone().moveTo(n,i)]}function lr(e,t,o,n,i){let r=0,a=0,s,l;const d=o.getArea();return e.some((e)=>{function c(){a=g,r=p,s=m,l=u}const[u,m]=sr(e,t,o);let p,g;if(n)if(i){const e=n.getIntersection(i);p=e?e.getIntersectionArea(m):0}else p=n.getIntersectionArea(m);return i&&(g=i.getIntersectionArea(m)),i&&!n?g>a&&c():!i&&n?p>r&&c():g>a&&p>=r?c():g>=a&&p>r&&c(),p===d}),s?[l,s]:null}function dr({left:e,top:t}){const{scrollX:o,scrollY:n}=$c.window;return{left:e+o,top:t+n}}function cr(e){return Nu(e)?e:Ue(e)?e.commonAncestorContainer:'function'==typeof e?cr(e()):null}function ur(e,t){return e.top-t.height-qb.arrowVerticalOffset}function mr(e){return e.bottom+qb.arrowVerticalOffset}function pr(e){const t=e.plugins.get('ContextualBalloon');if(Yi(e.editing.view.document.selection)){const o=gr(e);t.updatePosition(o)}}function gr(e){const t=e.editing.view,o=qb.defaultPositions;return{target:t.domConverter.viewToDom(t.document.selection.getSelectedElement()),positions:[o.northArrowSouth,o.northArrowSouthWest,o.northArrowSouthEast,o.southArrowNorth,o.southArrowNorthWest,o.southArrowNorthEast]}}function fr(e){const t=/^image\/(jpeg|png|gif|bmp)$/;return t.test(e.type)}function hr(e){const t=e.getSelectedElement();if(t)return Ku.createAfter(t);const o=e.getSelectedBlocks().next().value;if(o){if(o.isEmpty)return Ku.createAt(o);const t=Ku.createAfter(o);return e.focus.isTouching(t)?t:Ku.createBefore(o)}return e.focus}function br(e,t){e.hasClass('ck-appear')||t.addClass('ck-appear',e)}function kr(e,t){t.removeClass('ck-appear',e)}function _r(e,t,o){t.hasClass('ck-image-upload-placeholder')||o.addClass('ck-image-upload-placeholder',t),t.hasClass('ck-infinite-progress')||o.addClass('ck-infinite-progress',t);const n=t.getChild(0);n.getAttribute('src')!==e&&o.setAttribute('src',e,n)}function wr(e,t){e.hasClass('ck-image-upload-placeholder')&&t.removeClass('ck-image-upload-placeholder',e),e.hasClass('ck-infinite-progress')&&t.removeClass('ck-infinite-progress',e)}function vr(e,t,o,n){const i=xr(t);t.insert(xc.createAt(e,'end'),i),o.on('change:uploadedPercent',(e,t,o)=>{n.change((e)=>{e.setStyle('width',o+'%',i)})})}function yr(e,t){const o=Cr(e);o&&t.remove(Cc.createOn(o))}function xr(e){const t=e.createUIElement('div',{class:'ck-progress-bar'});return e.setCustomProperty(sk,!0,t),t}function Cr(e){for(const t of e.getChildren())if(t.getCustomProperty(sk))return t}function Ar(e){return Array.from(e.types).includes('text/html')&&''!==e.getData('text/html')}function Tr(e,t){return t.checkChild(e.parent,'paragraph')&&!t.isObject(e)}function Pr(e,t,o){const n=o.writer.createElement('paragraph');return o.writer.insert(n,t),o.convertItem(e,Ku.createAt(n))}function Er(e,t,o){const n=new cm(t);return!!o.checkChild(n,'paragraph')&&!!o.checkChild(n.push('paragraph'),e)}function Sr(e,t,o){return o.checkChild(e.parent,t)&&!o.isObject(e)}function Or(e,t=Ak){const o=new t(e),n=new _k(e),i=new yk(e,o,n);return o.bind('isEnabled').to(i),o instanceof Ak?o.bind('isOn').to(i,'isOpen'):o.arrowView.bind('isOn').to(i,'isOpen'),Ir(i),i}function Rr(e,t){const o=e.locale,n=e.listView=new Ek(o);n.items.bindTo(t).using((e)=>{const t=new Sk(o);return t.bind(...Object.keys(e)).to(e),t}),e.panelView.children.add(n),n.items.delegate('execute').to(e)}function Ir(e){Vr(e),Fr(e),Nr(e)}function Vr(e){e.on('render',()=>{nr({emitter:e,activator:()=>e.isOpen,callback:()=>{e.isOpen=!1},contextElements:[e.element]})})}function Fr(e){e.on('execute',()=>{e.isOpen=!1})}function Nr(e){e.keystrokes.set('arrowdown',(t,o)=>{e.isOpen&&(e.panelView.focus(),o())}),e.keystrokes.set('arrowup',(t,o)=>{e.isOpen&&(e.panelView.focusLast(),o())})}function Mr(e){const o=e.t,t={Paragraph:o('t'),"Heading 1":o('u'),"Heading 2":o('v'),"Heading 3":o('w')};return e.config.get('heading.options').map((e)=>{const o=t[e.title];return o&&o!=e.title&&(e=Object.assign({},e,{title:o})),e})}function Dr(e,t,o,n){const i=e.document;zk.has(i)||(zk.set(i,new Map),i.registerPostFixer((e)=>Br(i,e))),zk.get(i).set(t,{placeholderText:o,checkFunction:n}),e.render()}function Br(e,t){const o=zk.get(e);let n=!1;for(const[i,r]of o)Lr(t,i,r)&&(n=!0);return n}function Lr(e,t,o){const n=t.document,i=o.placeholderText;let r=!1;if(!n)return!1;t.getAttribute('data-placeholder')!==i&&(e.setAttribute('data-placeholder',i,t),r=!0);const a=n.selection,s=a.anchor,l=o.checkFunction;if(l&&!l())return t.hasClass('ck-placeholder')&&(e.removeClass('ck-placeholder',t),r=!0),r;const d=!Array.from(t.getChildren()).some((e)=>!e.is('uiElement'));return!n.isFocused&&d?(t.hasClass('ck-placeholder')||(e.addClass('ck-placeholder',t),r=!0),r):(d&&s&&s.parent!==t?!t.hasClass('ck-placeholder')&&(e.addClass('ck-placeholder',t),r=!0):t.hasClass('ck-placeholder')&&(e.removeClass('ck-placeholder',t),r=!0),r)}function zr(e,t){return(o)=>{const n=o.createEditableElement('figcaption');return o.setCustomProperty(jk,!0,n),Dr(e,n,t),Gi(n,o)}}function jr(e){for(const t of e.getChildren())if(t instanceof Wu&&'caption'==t.name)return t;return null}function qr(e){const t=e.parent;return'figcaption'==e.name&&t&&'figure'==t.name&&t.hasClass('image')?{name:!0}:null}function Wr(e,t=!0){return(o,n,i)=>{const r=n.item;if((r.childCount||t)&&Xi(r.parent)){if(!i.consumable.consume(n.item,'insert'))return;const t=i.mapper.toViewElement(n.range.start.parent),o=e(i.writer),a=i.writer;r.childCount||a.addClass('ck-hidden',o),Ur(o,n.item,t,i)}}}function Ur(e,t,o,n){const i=xc.createAt(o,'end');n.writer.insert(i,e),n.mapper.bindElements(t,e)}function Hr(e){const t=e.getAncestors({includeSelf:!0}),o=t.find((e)=>'caption'==e.name);return o&&o.parent&&'image'==o.parent.name?o:null}function Kr(e,t){return!(e.childCount||e.hasClass('ck-hidden'))&&(t.addClass('ck-hidden',e),!0)}function Gr(e,t){return!!e.hasClass('ck-hidden')&&(t.removeClass('ck-hidden',e),!0)}function $r(e){return(t,o,n)=>{if(n.consumable.consume(o.item,t.name)){const t=Qr(o.attributeNewValue,e),i=Qr(o.attributeOldValue,e),r=n.mapper.toViewElement(o.item),a=n.writer;i&&a.removeClass(i.className,r),t&&a.addClass(t.className,r)}}}function Jr(e){const t=e.filter((e)=>!e.isDefault);return(e,o,n)=>{if(o.modelRange){const e=o.viewItem,i=Oi(o.modelRange.getItems());if(n.schema.checkAttribute(i,'imageStyle'))for(const o of t)n.consumable.consume(e,{classes:o.className})&&n.writer.setAttribute('imageStyle',o.name,i)}}}function Qr(e,t){for(const o of t)if(o.name===e)return o}function Yr(e=[]){return e.map(Xr).map((e)=>Object.assign({},e))}function Xr(e){if('string'==typeof e){const t=e;t_[t]?e=Object.assign({},t_[t]):(Ru.warn('image-style-not-found: There is no such image style of given name.',{name:t}),e={name:t})}else if(t_[e.name]){const t=t_[e.name],o=Object.assign({},e);for(const n in t)e.hasOwnProperty(n)||(o[n]=t[n]);e=o}return'string'==typeof e.icon&&o_[e.icon]&&(e.icon=o_[e.icon]),e}function Zr(e,t){for(const o of e)t[o.title]&&(o.title=t[o.title]);return e}function ea(e,t){return new Gu(ta(e,t,!0),ta(e,t,!1))}function ta(e,t,o){let n=e.textNode||(o?e.nodeBefore:e.nodeAfter),i=null;for(;n&&n.getAttribute('linkHref')==t;)i=n,n=o?n.previousSibling:n.nextSibling;return i?Ku.createAt(i,o?'before':'after'):e}function oa(e){return e.is('attributeElement')&&!!e.getCustomProperty(u_)}function na(e,t){const o=t.createAttributeElement('a',{href:e},{priority:5});return t.setCustomProperty(u_,!0,o),o}function ia(e){return e+='',ra(e)?e:'#'}function ra(e){const t=e.replace(m_,'');return t.match(p_)}function aa(e,t,o,n){const i=new g_(t,o,n),r=t.document.selection;o.listenTo(e.document,'keydown',(e,t)=>{if(!r.isCollapsed)return;if(t.shiftKey||t.altKey||t.ctrlKey)return;const o=t.keyCode==Dc.arrowright,n=t.keyCode==Dc.arrowleft;if(!o&&!n)return;const a=r.getFirstPosition();let s;s=o?i.handleForwardMovement(a,t):i.handleBackwardMovement(a,t),s&&e.stop()},{priority:ns.get('high')+1})}function sa(e,t){return la(e,t)||da(e,t)}function la(e,t){const{nodeBefore:o,nodeAfter:n}=e,i=!!o&&o.hasAttribute(t),r=!!n&&n.hasAttribute(t);return r&&(!i||o.getAttribute(t)!==n.getAttribute(t))}function da(e,t){const{nodeBefore:o,nodeAfter:n}=e,i=!!o&&o.hasAttribute(t),r=!!n&&n.hasAttribute(t);return i&&(!r||o.getAttribute(t)!==n.getAttribute(t))}function ca(e,t){const{nodeBefore:o,nodeAfter:n}=e,i=!!o&&o.hasAttribute(t),r=!!n&&n.hasAttribute(t);return r&&i?n.getAttribute(t)!==o.getAttribute(t):void 0}function ua(e,t){return sa(e.getShiftedBy(-1),t)}function ma(e){return e.getAncestors().find((e)=>oa(e))}function pa(e,t,o){const n=t?e[0]:e[e.length-1];if(n.is('listItem'))for(let i=n[t?'previousSibling':'nextSibling'],r=n.getAttribute('indent');i&&i.is('listItem')&&i.getAttribute('indent')>=o;)r>i.getAttribute('indent')&&(r=i.getAttribute('indent')),i.getAttribute('indent')==r&&e[t?'unshift':'push'](i),i=i[t?'previousSibling':'nextSibling']}function ga(e,t){return t.checkChild(e.parent,'listItem')&&!t.isObject(e)}function fa(e){const t=e.createContainerElement('li');return t.getFillerOffset=ha,t}function ha(){const e=!this.isEmpty&&('ul'==this.getChild(0).name||'ol'==this.getChild(0).name);return this.isEmpty||e?0:null}function ba(e,t,o){const n=o.consumable;if(n.test(t.item,'insert')&&n.test(t.item,'attribute:type')&&n.test(t.item,'attribute:indent')){n.consume(t.item,'insert'),n.consume(t.item,'attribute:type'),n.consume(t.item,'attribute:indent');const e=t.item,i=Oa(e,o);Va(e,i,o)}}function ka(e,t,o){const n=o.mapper.toViewPosition(t.position).getLastMatchingPosition((e)=>!e.item.is('li')),i=n.nodeAfter,r=o.writer;r.breakContainer(xc.createBefore(i)),r.breakContainer(xc.createAfter(i));const a=i.parent,s=a.previousSibling,l=Cc.createOn(a),d=r.remove(l);s&&s.nextSibling&&Ia(r,s,s.nextSibling);const c=o.mapper.toModelElement(i);Fa(c.getAttribute('indent')+1,t.position,l.start,i,o);for(const n of Cc.createIn(d).getItems())o.mapper.unbindViewElement(n);e.stop()}function _a(e,t,o){if(!o.consumable.consume(t.item,'attribute:type'))return;const n=o.mapper.toViewElement(t.item),i=o.writer;i.breakContainer(xc.createBefore(n)),i.breakContainer(xc.createAfter(n));let r=n.parent;const a='numbered'==t.attributeNewValue?'ol':'ul';r=i.rename(r,a),Ia(i,r,r.nextSibling),Ia(i,r.previousSibling,r);for(const n of t.item.getChildren())o.consumable.consume(n,'insert')}function wa(e,t,o){if(o.consumable.consume(t.item,'attribute:indent')){const e=o.mapper.toViewElement(t.item),n=o.writer;n.breakContainer(xc.createBefore(e)),n.breakContainer(xc.createAfter(e));const i=e.parent,r=i.previousSibling,a=Cc.createOn(i);n.remove(a),r&&r.nextSibling&&Ia(n,r,r.nextSibling),Fa(t.attributeOldValue+1,t.range.start,a.start,e,o),Va(t.item,e,o);for(const e of t.item.getChildren())o.consumable.consume(e,'insert')}}function va(e,t,o){if('listItem'!=t.item.name){let e=o.mapper.toViewPosition(t.range.start);const n=o.writer,r=[];for(;('ul'==e.parent.name||'ol'==e.parent.name)&&(e=n.breakContainer(e),'li'==e.parent.name);){const t=e,o=xc.createAt(e.parent,'end');if(!t.isEqual(o)){const e=n.remove(new Cc(t,o));r.push(e)}e=xc.createAfter(e.parent)}if(0<r.length){for(let t=0;t<r.length;t++){const o=e.nodeBefore,i=n.insert(e,r[t]);if(e=i.end,0<t){const t=Ia(n,o,o.nextSibling);t&&t.parent==o&&e.offset--}}Ia(n,e.nodeBefore,e.nodeAfter)}}}function ya(e,t,o){const n=o.mapper.toViewPosition(t.position),i=n.nodeBefore,r=n.nodeAfter;Ia(o.writer,i,r)}function xa(e,t,o){if(o.consumable.consume(t.viewItem,{name:!0})){const e=o.writer,n=this.conversionApi.store,i=e.createElement('listItem');n.indent=n.indent||0,e.setAttribute('indent',n.indent,i);const r=t.viewItem.parent&&'ol'==t.viewItem.parent.name?'numbered':'bulleted';e.setAttribute('type',r,i),n.indent++;const a=o.splitToAllowedParent(i,t.modelCursor);if(!a)return;e.insert(i,a.position);let s=Ku.createAfter(i);for(const e of t.viewItem.getChildren())'ul'==e.name||'ol'==e.name?s=o.convertItem(e,s).modelCursor:o.convertItem(e,Ku.createAt(i,'end'));n.indent--,t.modelRange=new Gu(t.modelCursor,s),t.modelCursor=a.cursorParent?Ku.createAt(a.cursorParent):t.modelRange.end}}function Ca(e,t,o){if(o.consumable.test(t.viewItem,{name:!0})){const e=Array.from(t.viewItem.getChildren());for(const t of e)t.is('li')||t._remove()}}function Aa(e,t,o){if(o.consumable.test(t.viewItem,{name:!0})){if(0===t.viewItem.childCount)return;const e=[...t.viewItem.getChildren()];let o=!1,n=!0;for(const t of e)!o||t.is('ul')||t.is('ol')||t._remove(),t.is('text')?(n&&(t._data=t.data.replace(/^\s+/,'')),(!t.nextSibling||t.nextSibling.is('ul')||t.nextSibling.is('ol'))&&(t._data=t.data.replace(/\s+$/,''))):(t.is('ul')||t.is('ol'))&&(o=!0),n=!1}}function Ta(e,t){if(!t.isPhantom){const e=t.modelPosition.nodeBefore;if(e&&e.is('listItem')){const o=t.mapper.toViewElement(e),n=o.getAncestors().find((e)=>e.is('ul')||e.is('ol')),i=new yc({startPosition:xc.createAt(o,0)});for(const e of i)if('elementStart'==e.type&&e.item.is('li')){t.viewPosition=e.previousPosition;break}else if('elementEnd'==e.type&&e.item==n){t.viewPosition=e.nextPosition;break}}}}function Pa(e,t){const o=t.viewPosition,n=o.parent,i=t.mapper;if('ul'==n.name||'ol'==n.name){if(!o.isAtEnd){const e=i.toModelElement(o.nodeAfter);t.modelPosition=Ku.createBefore(e)}else{const e=i.toModelElement(o.nodeBefore),n=i.getModelLength(o.nodeBefore);t.modelPosition=Ku.createBefore(e).getShiftedBy(n)}e.stop()}else if('li'==n.name&&o.nodeBefore&&('ul'==o.nodeBefore.name||'ol'==o.nodeBefore.name)){const r=i.toModelElement(n);let a=1,s=o.nodeBefore;for(;s&&(s.is('ul')||s.is('ol'));)a+=i.getModelLength(s),s=s.previousSibling;t.modelPosition=Ku.createBefore(r).getShiftedBy(a),e.stop()}}function Ea(e,t){function o(e){const t=e.nodeBefore;if(!t||!t.is('listItem')){const t=e.nodeAfter;t&&t.is('listItem')&&a.set(t,t)}else{let o=t;if(a.has(o))return;for(;o.previousSibling&&o.previousSibling.is('listItem');)if(o=o.previousSibling,a.has(o))return;a.set(e.nodeBefore,o)}}function n(e){for(let o=0,n=null;e&&e.is('listItem');){const i=e.getAttribute('indent');if(i>o){let r;null===n?(n=i-o,r=o):(n>i&&(n=i),r=i-n),t.setAttribute('indent',r,e),s=!0}else n=null,o=e.getAttribute('indent')+1;e=e.nextSibling}}function i(e){for(let o=[],n=null;e&&e.is('listItem');){const i=e.getAttribute('indent');if(n&&n.getAttribute('indent')>i&&(o=o.slice(0,i+1)),0!=i)if(o[i]){const n=o[i];e.getAttribute('type')!=n&&(t.setAttribute('type',n,e),s=!0)}else o[i]=e.getAttribute('type');n=e,e=e.nextSibling}}const r=e.document.differ.getChanges(),a=new Map;let s=!1;for(const n of r)if('insert'==n.type&&'listItem'==n.name)o(n.position);else if('insert'==n.type&&'listItem'!=n.name){if('$text'!=n.name){const e=n.position.nodeAfter;e.hasAttribute('indent')&&(t.removeAttribute('indent',e),s=!0),e.hasAttribute('type')&&(t.removeAttribute('type',e),s=!0)}const e=n.position.getShiftedBy(n.length);o(e)}else'remove'==n.type&&'listItem'==n.name?o(n.position):'attribute'==n.type&&'indent'==n.attributeKey?o(n.range.start):'attribute'==n.type&&'type'==n.attributeKey&&o(n.range.start);for(const o of a.values())n(o),i(o);return s}function Sa(e,[t,o]){let n=t.is('documentFragment')?t.getChild(0):t;if(n&&n.is('listItem')){const e=o.getFirstPosition();let t=null;if(e.parent.is('listItem')?t=e.parent:e.nodeBefore&&e.nodeBefore.is('listItem')&&(t=e.nodeBefore),t){const e=t.getAttribute('indent');if(0<e)for(;n&&n.is('listItem');)n._setAttribute('indent',n.getAttribute('indent')+e),n=n.nextSibling}}}function Oa(e,t){const o=t.mapper,n=t.writer,i='numbered'==e.getAttribute('type')?'ol':'ul',r=fa(n),a=n.createContainerElement(i,null);return n.insert(xc.createAt(a),r),o.bindElements(e,r),r}function Ra(e,t){const o=!!t.sameIndent,n=!!t.smallerIndent,i=e instanceof Wu?e.getAttribute('indent'):t.indent;for(let r=e instanceof Wu?e.previousSibling:e.nodeBefore;r&&'listItem'==r.name;){const e=r.getAttribute('indent');if(o&&i==e||n&&i>e)return r;r=r.previousSibling}return null}function Ia(e,t,o){return t&&o&&('ul'==t.name||'ol'==t.name)&&t.name==o.name?e.mergeContainers(xc.createAfter(t)):null}function Va(e,t,o){const n=t.parent,i=o.mapper,r=o.writer;let a=i.toViewPosition(Ku.createBefore(e));const s=Ra(e,{sameIndent:!0,smallerIndent:!0}),l=e.previousSibling;if(s&&s.getAttribute('indent')==e.getAttribute('indent')){const e=i.toViewElement(s);a=r.breakContainer(xc.createAfter(e))}else a=l&&'listItem'==l.name?i.toViewPosition(Ku.createAt(l,'end')):i.toViewPosition(Ku.createBefore(e));if(a=Na(a),r.insert(a,n),l&&'listItem'==l.name){const e=i.toViewElement(l),o=new yc({boundaries:new Cc(xc.createAt(e,0),a),ignoreElementEnd:!0});for(const e of o)if(e.item.is('li')){const n=r.breakContainer(xc.createBefore(e.item)),i=e.item.parent,a=xc.createAt(t,'end');Ia(r,a.nodeBefore,a.nodeAfter),r.move(Cc.createOn(i),a),o.position=n}}else{const o=n.nextSibling;if(o&&(o.is('ul')||o.is('ol'))){let n=null;for(const t of o.getChildren()){const o=i.toModelElement(t);if(o&&o.getAttribute('indent')>e.getAttribute('indent'))n=t;else break}n&&(r.breakContainer(xc.createAfter(n)),r.move(Cc.createOn(n.parent),xc.createAt(t,'end')))}}Ia(r,n,n.nextSibling),Ia(r,n.previousSibling,n)}function Fa(e,t,o,n,i){const r=Ra(t,{sameIndent:!0,smallerIndent:!0,indent:e}),a=i.mapper,s=i.writer,l=r?r.getAttribute('indent'):null;let d;if(!r)d=o;else if(l==e){const e=a.toViewElement(r).parent;d=xc.createAfter(e)}else{const e=Ku.createAt(r,'end');d=a.toViewPosition(e)}d=Na(d);for(const r of[...n.getChildren()])(r.is('ul')||r.is('ol'))&&(d=s.move(Cc.createOn(r),d).end,Ia(s,r,r.nextSibling),Ia(s,r.previousSibling,r))}function Na(e){return e.getLastMatchingPosition((e)=>e.item.is('uiElement'))}function Ma(e){let t=1;for(const o of e.getChildren())if('ul'==o.name||'ol'==o.name)for(const e of o.getChildren())t+=Ma(e);return t}var Da=Number.POSITIVE_INFINITY,Ba=Math.max,La=Math.min,za=Math.floor;Object.defineProperty(t,'__esModule',{value:!0});var ja=Object.getPrototypeOf,qa=function(e){return ja(Object(e))},Wa=function(e){var t=!1;if(null!=e&&'function'!=typeof e.toString)try{t=!!(e+'')}catch(t){}return t},Ua=function(e){return!!e&&'object'==typeof e},Ha=Object.prototype,Ka=Function.prototype.toString,Ga=Ha.hasOwnProperty,$a=Ka.call(Object),Ja=Ha.toString,Qa=function(e){if(!Ua(e)||Ja.call(e)!='[object Object]'||Wa(e))return!1;var t=qa(e);if(null===t)return!0;var o=Ga.call(t,'constructor')&&t.constructor;return'function'==typeof o&&o instanceof o&&Ka.call(o)==$a};class Ya{constructor(e,t){this._config={},t&&this.define(t),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}_setToTarget(e,t,o,n=!1){if(Qa(t))return void this._setObjectToTarget(e,t,n);const i=t.split('.');t=i.pop();for(const r of i)Qa(e[r])||(e[r]={}),e=e[r];return Qa(o)?(Qa(e[t])||(e[t]={}),e=e[t],void this._setObjectToTarget(e,o,n)):void(n&&'undefined'!=typeof e[t]||(e[t]=o))}_getFromSource(e,t){const o=t.split('.');t=o.pop();for(const n of o){if(!Qa(e[n])){e=null;break}e=e[n]}return e?e[t]:void 0}_setObjectToTarget(e,t,o){Object.keys(t).forEach((n)=>{this._setToTarget(e,n,t[n],o)})}}const Xa='https://docs.ckeditor.com/ckeditor5/latest/framework/guides/support/error-codes.html';class Za extends Error{constructor(e,t){e=n(e),t&&(e+=' '+JSON.stringify(t)),super(e),this.name='CKEditorError',this.data=t}static isCKEditorError(e){return e instanceof Za}}var es=function(){return function e(){e.called=!0}};class ts{constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=es(),this.off=es()}}const os={get(e){return'number'==typeof e?e:this[e]||this.normal},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};var ns=os;const is=Symbol('listeningTo'),rs=Symbol('emitterId'),as={on(e,t,o={}){this.listenTo(this,e,t,o)},once(e,t,o){this.listenTo(this,e,function(e,...o){e.off(),t.call(this,e,...o)},o)},off(e,t){this.stopListening(this,e,t)},listenTo(e,t,o,n={}){let i,r;this[is]||(this[is]={});const l=this[is];s(e)||a(e);const d=s(e);(i=l[d])||(i=l[d]={emitter:e,callbacks:{}}),(r=i.callbacks[t])||(r=i.callbacks[t]=[]),r.push(o),c(e,t);const m=u(e,t),p=ns.get(n.priority),g={callback:o,priority:p};for(const r of m){let e=!1;for(let t=0;t<r.length;t++)if(r[t].priority<p){r.splice(t,0,g),e=!0;break}e||r.push(g)}},stopListening(e,t,o){const n=this[is];let i=e&&s(e);const r=n&&i&&n[i],a=r&&t&&r.callbacks[t];if(n&&(!e||r)&&(!t||a))if(o)g(e,t,o);else if(a){for(;o=a.pop();)g(e,t,o);delete r.callbacks[t]}else if(r){for(t in r.callbacks)this.stopListening(e,t);delete n[i]}else{for(i in n)this.stopListening(n[i].emitter);delete this[is]}},fire(e,...t){const o=e instanceof ts?e:new ts(this,e),n=o.name;let r=m(this,n);if(o.path.push(this),r){const e=[o,...t];r=Array.from(r);for(let t=0;t<r.length&&(r[t].callback.apply(this,e),o.off.called&&(delete o.off.called,g(this,n,r[t].callback)),!o.stop.called);t++);}if(this._delegations){const e=this._delegations.get(n),i=this._delegations.get('*');e&&p(e,o,t),i&&p(i,o,t)}return o.return},delegate(...e){return{to:(t,o)=>{this._delegations||(this._delegations=new Map);for(const n of e){const e=this._delegations.get(n);e?e.set(t,o):this._delegations.set(n,new Map([[t,o]]))}}}},stopDelegating(e,t){if(this._delegations)if(!e)this._delegations.clear();else if(!t)this._delegations.delete(e);else{const o=this._delegations.get(e);o&&o.delete(t)}}};var ss=as,ls=function(e,t){return e===t||e!==e&&t!==t},ds=function(e,t){for(var o=e.length;o--;)if(ls(e[o][0],t))return o;return-1},cs=Array.prototype,us=cs.splice;h.prototype.clear=function(){this.__data__=[]},h.prototype['delete']=function(e){var t=this.__data__,o=ds(t,e);if(0>o)return!1;var n=t.length-1;return o==n?t.pop():us.call(t,o,1),!0},h.prototype.get=function(e){var t=this.__data__,o=ds(t,e);return 0>o?void 0:t[o][1]},h.prototype.has=function(e){return-1<ds(this.__data__,e)},h.prototype.set=function(e,t){var o=this.__data__,n=ds(o,e);return 0>n?o.push([e,t]):o[n][1]=t,this};var ms=h,ps=function(e){var t=typeof e;return!!e&&('object'==t||'function'==t)},gs=Object.prototype,fs=gs.toString,hs=function(e){var t=ps(e)?fs.call(e):'';return t=='[object Function]'||t=='[object GeneratorFunction]'},bs=Function.prototype.toString,ks=function(e){if(null!=e){try{return bs.call(e)}catch(t){}try{return e+''}catch(t){}}return''},_s=/[\\^$.*+?()[\]{}|]/g,ws=/^\[object .+?Constructor\]$/,vs=Object.prototype,ys=Function.prototype.toString,xs=vs.hasOwnProperty,Cs=RegExp('^'+ys.call(xs).replace(_s,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$'),As=function(e){if(!ps(e))return!1;var t=hs(e)||Wa(e)?Cs:ws;return t.test(ks(e))},Ts=function(e,t){var o=e[t];return As(o)?o:void 0},Ps=Ts(Object,'create'),Es=Ps,Ss=Object.prototype,Os=Ss.hasOwnProperty,Rs=Object.prototype,Is=Rs.hasOwnProperty;b.prototype.clear=function(){this.__data__=Es?Es(null):{}},b.prototype['delete']=function(e){return this.has(e)&&delete this.__data__[e]},b.prototype.get=function(e){var t=this.__data__;if(Es){var o=t[e];return o==='__lodash_hash_undefined__'?void 0:o}return Os.call(t,e)?t[e]:void 0},b.prototype.has=function(e){var t=this.__data__;return Es?t[e]!==void 0:Is.call(t,e)},b.prototype.set=function(e,t){var o=this.__data__;return o[e]=Es&&void 0===t?'__lodash_hash_undefined__':t,this};var Vs=b,Fs=o(1),Ns=Ts(Fs.a,'Map'),Ms=Ns,Ds=function(e){var t=typeof e;return'string'==t||'number'==t||'symbol'==t||'boolean'==t?'__proto__'!==e:null===e},Bs=function(e,t){var o=e.__data__;return Ds(t)?o['string'==typeof t?'string':'hash']:o.map};k.prototype.clear=function(){this.__data__={hash:new Vs,map:new(Ms||ms),string:new Vs}},k.prototype['delete']=function(e){return Bs(this,e)['delete'](e)},k.prototype.get=function(e){return Bs(this,e).get(e)},k.prototype.has=function(e){return Bs(this,e).has(e)},k.prototype.set=function(e,t){return Bs(this,e).set(e,t),this};var Ls=k;_.prototype.clear=function(){this.__data__=new ms},_.prototype['delete']=function(e){return this.__data__['delete'](e)},_.prototype.get=function(e){return this.__data__.get(e)},_.prototype.has=function(e){return this.__data__.has(e)},_.prototype.set=function(e,t){var o=this.__data__;return o instanceof ms&&o.__data__.length==200&&(o=this.__data__=new Ls(o.__data__)),o.set(e,t),this};var zs=_,js=function(e,t){for(var o=-1,n=e.length;++o<n&&!(!1===t(e[o],o,e)););return e},qs=Object.prototype,Ws=qs.hasOwnProperty,Us=w,Hs=function(e,t,o,n){o||(o={});for(var i=-1,r=t.length;++i<r;){var a=t[i],s=n?n(o[a],e[a],a,o,e):e[a];Us(o,a,s)}return o},Ks=Object.prototype,Gs=Ks.hasOwnProperty,$s=v,Js=Object.keys,Qs=function(e){return Js(Object(e))},Ys=function(e,t){for(var o=-1,n=Array(e);++o<e;)n[o]=t(o);return n},Xs=function(e){return function(t){return null==t?void 0:t[e]}},Zs=Xs('length'),el=function(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=9007199254740991},tl=function(e){return null!=e&&el(Zs(e))&&!hs(e)},ol=function(e){return Ua(e)&&tl(e)},nl=Object.prototype,il=nl.hasOwnProperty,rl=nl.toString,al=nl.propertyIsEnumerable,sl=function(e){return ol(e)&&il.call(e,'callee')&&(!al.call(e,'callee')||rl.call(e)=='[object Arguments]')},ll=Array.isArray,dl=ll,cl=Object.prototype,ul=cl.toString,ml=function(e){return'string'==typeof e||!dl(e)&&Ua(e)&&ul.call(e)=='[object String]'},pl=function(e){var t=e?e.length:void 0;return el(t)&&(dl(e)||ml(e)||sl(e))?Ys(t,String):null},gl=/^(?:0|[1-9]\d*)$/,fl=function(e,t){return t=null==t?9007199254740991:t,!!t&&('number'==typeof e||gl.test(e))&&-1<e&&0==e%1&&e<t},hl=Object.prototype,bl=function(e){var t=e&&e.constructor,o='function'==typeof t&&t.prototype||hl;return e===o},kl=function(e){var t=bl(e);if(!(t||tl(e)))return Qs(e);var o=pl(e),n=o||[],i=n.length;for(var r in e)!$s(e,r)||!!o&&('length'==r||fl(r,i))||t&&'constructor'==r||n.push(r);return n},_l=function(e,t){return e&&Hs(t,kl(t),e)},wl=function(e,t){if(t)return e.slice();var o=new e.constructor(e.length);return e.copy(o),o},vl=function(e,t){var o=-1,n=e.length;for(t||(t=Array(n));++o<n;)t[o]=e[o];return t},yl=Object.getOwnPropertySymbols;yl||(y=function(){return[]});var xl=y,Cl=function(e,t){return Hs(e,xl(e),t)},Al=function(e,t){for(var o=-1,n=t.length,i=e.length;++o<n;)e[i+o]=t[o];return e},Tl=function(e,t,o){var n=t(e);return dl(e)?n:Al(n,o(e))},Pl=function(e){return Tl(e,kl,xl)},El=Ts(Fs.a,'DataView'),Sl=El,Ol=Ts(Fs.a,'Promise'),Rl=Ol,Il=Ts(Fs.a,'Set'),Vl=Il,Fl=Ts(Fs.a,'WeakMap'),Nl=Fl,Ml='[object Map]',Dl='[object Promise]',Bl='[object Set]',Ll='[object WeakMap]',zl='[object DataView]',jl=Object.prototype,ql=jl.toString,Wl=ks(Sl),Ul=ks(Ms),Hl=ks(Rl),Kl=ks(Vl),Gl=ks(Nl);(Sl&&x(new Sl(new ArrayBuffer(1)))!=zl||Ms&&x(new Ms)!=Ml||Rl&&x(Rl.resolve())!=Dl||Vl&&x(new Vl)!=Bl||Nl&&x(new Nl)!=Ll)&&(x=function(e){var t=ql.call(e),o=t=='[object Object]'?e.constructor:void 0,n=o?ks(o):void 0;if(n)switch(n){case Wl:return zl;case Ul:return Ml;case Hl:return Dl;case Kl:return Bl;case Gl:return Ll;}return t});var $l=x,Jl=Object.prototype,Ql=Jl.hasOwnProperty,Yl=function(e){var t=e.length,o=e.constructor(t);return t&&'string'==typeof e[0]&&Ql.call(e,'index')&&(o.index=e.index,o.input=e.input),o},Xl=Fs.a.Uint8Array,Zl=Xl,ed=function(e){var t=new e.constructor(e.byteLength);return new Zl(t).set(new Zl(e)),t},td=function(e,t){var o=t?ed(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)},od=function(e,t){return e.set(t[0],t[1]),e},nd=function(e,t,o,n){var i=-1,r=e.length;for(n&&r&&(o=e[++i]);++i<r;)o=t(o,e[i],i,e);return o},id=function(e){var t=-1,o=Array(e.size);return e.forEach(function(e,n){o[++t]=[n,e]}),o},rd=function(e,t,o){var n=t?o(id(e),!0):id(e);return nd(n,od,new e.constructor)},ad=/\w*$/,sd=function(e){var t=new e.constructor(e.source,ad.exec(e));return t.lastIndex=e.lastIndex,t},ld=function(e,t){return e.add(t),e},dd=function(e){var t=-1,o=Array(e.size);return e.forEach(function(e){o[++t]=e}),o},cd=function(e,t,o){var n=t?o(dd(e),!0):dd(e);return nd(n,ld,new e.constructor)},ud=Fs.a.Symbol,md=ud,pd=md?md.prototype:void 0,gd=pd?pd.valueOf:void 0,fd=function(e){return gd?Object(gd.call(e)):{}},hd=function(e,t){var o=t?ed(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)},bd=function(e,t,o,n){var i=e.constructor;return t==='[object ArrayBuffer]'?ed(e):t==='[object Boolean]'||t==='[object Date]'?new i(+e):t==='[object DataView]'?td(e,n):t==='[object Float32Array]'||t==='[object Float64Array]'||t==='[object Int8Array]'||t==='[object Int16Array]'||t==='[object Int32Array]'||t==='[object Uint8Array]'||t==='[object Uint8ClampedArray]'||t==='[object Uint16Array]'||t==='[object Uint32Array]'?hd(e,n):t==='[object Map]'?rd(e,n,o):t==='[object Number]'||t==='[object String]'?new i(e):t==='[object RegExp]'?sd(e):t==='[object Set]'?cd(e,n,o):t==='[object Symbol]'?fd(e):void 0},kd=Object.create,_d=function(e){return ps(e)?kd(e):{}},wd=function(e){return'function'!=typeof e.constructor||bl(e)?{}:_d(qa(e))},vd=o(9),yd='[object Arguments]',xd='[object Function]',Cd='[object GeneratorFunction]',Ad='[object Object]',Td={};Td[yd]=Td['[object Array]']=Td['[object ArrayBuffer]']=Td['[object DataView]']=Td['[object Boolean]']=Td['[object Date]']=Td['[object Float32Array]']=Td['[object Float64Array]']=Td['[object Int8Array]']=Td['[object Int16Array]']=Td['[object Int32Array]']=Td['[object Map]']=Td['[object Number]']=Td[Ad]=Td['[object RegExp]']=Td['[object Set]']=Td['[object String]']=Td['[object Symbol]']=Td['[object Uint8Array]']=Td['[object Uint8ClampedArray]']=Td['[object Uint16Array]']=Td['[object Uint32Array]']=!0,Td['[object Error]']=Td[xd]=Td['[object WeakMap]']=!1;var Pd=C,Ed=function(e){return Pd(e,!1,!0)};class Sd{constructor(){this.parent=null}get index(){let e;if(!this.parent)return null;if(-1==(e=this.parent.getChildIndex(this)))throw new Za('view-node-not-found-in-parent: The node\'s parent does not contain this node.');return e}get nextSibling(){const e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get document(){return this.parent instanceof Sd?this.parent.document:null}getPath(){const e=[];for(let t=this;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];for(let o=e.includeSelf?this:this.parent;o;)t[e.parentFirst?'push':'unshift'](o),o=o.parent;return t}getCommonAncestor(e,t={}){const o=this.getAncestors(t),n=e.getAncestors(t);let r=0;for(;o[r]==n[r]&&o[r];)r++;return 0==r?null:o[r-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;const t=this.getPath(),o=e.getPath(),n=A(t,o);return!('prefix'!==n)||'extension'!==n&&t[n]<o[n]}isAfter(e){return this!=e&&!(this.root!==e.root)&&!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire('change:'+e,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){const e=Ed(this);return delete e.parent,e}is(e){return'node'==e}}f(Sd,ss);class Od extends Sd{constructor(e){super(),this._textData=e}is(e){return'text'==e||super.is(e)}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange('text',this),this._textData=e}isSimilar(e){return!!(e instanceof Od)&&(this===e||this.data===e.data)}_clone(){return new Od(this.data)}}class Rd{constructor(e,t,o){if(this.textNode=e,0>t||t>e.data.length)throw new Za('view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.');if(0>o||t+o>e.data.length)throw new Za('view-textproxy-wrong-length: Given length value is incorrect.');this.data=e.data.substring(t,t+o),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(e){return'textProxy'==e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];for(let o=e.includeSelf?this.textNode:this.parent;null!==o;)t[e.parentFirst?'push':'unshift'](o),o=o.parent;return t}}class Id{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let t of e)('string'==typeof t||t instanceof RegExp)&&(t={name:t}),t.classes&&('string'==typeof t.classes||t.classes instanceof RegExp)&&(t.classes=[t.classes]),this._patterns.push(t)}match(...e){for(const t of e)for(const e of this._patterns){const o=E(t,e);if(o)return{element:t,pattern:e,match:o}}return null}matchAll(...e){const t=[];for(const o of e)for(const e of this._patterns){const n=E(o,e);n&&t.push({element:o,pattern:e,match:n})}return 0<t.length?t:null}getElementName(){if(1!==this._patterns.length)return null;const e=this._patterns[0],t=e.name;return'function'!=typeof e&&t&&!(t instanceof RegExp)?t:null}}class Vd extends Sd{constructor(e,t,o){if(super(),this.name=e,this._attrs=V(t),this._children=[],o&&this._insertChild(0,o),this._classes=new Set,this._attrs.has('class')){const e=this._attrs.get('class');N(this._classes,e),this._attrs.delete('class')}this._styles=new Map,this._attrs.has('style')&&(F(this._styles,this._attrs.get('style')),this._attrs.delete('style')),this._customProperties=new Map}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}is(e,t=null){return t?'element'==e&&t==this.name:'element'==e||e==this.name||super.is(e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){0<this._classes.size&&(yield'class'),0<this._styles.size&&(yield'style');for(const e of this._attrs.keys())yield e}*getAttributes(){yield*this._attrs.entries(),0<this._classes.size&&(yield['class',this.getAttribute('class')]),0<this._styles.size&&(yield['style',this.getAttribute('style')])}getAttribute(e){if('class'==e)return 0<this._classes.size?[...this._classes].join(' '):void 0;if('style'==e){if(0<this._styles.size){let e='';for(const[t,o]of this._styles)e+=`${t}:${o};`;return e}return}return this._attrs.get(e)}hasAttribute(e){return'class'==e?0<this._classes.size:'style'==e?0<this._styles.size:this._attrs.has(e)}isSimilar(e){if(!(e instanceof Vd))return!1;if(this===e)return!0;if(this.name!=e.name)return!1;if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[t,o]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==o)return!1;for(const t of this._classes)if(!e._classes.has(t))return!1;for(const[t,o]of this._styles)if(!e._styles.has(t)||e._styles.get(t)!==o)return!1;return!0}hasClass(...e){for(const t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.get(e)}getStyleNames(){return this._styles.keys()}hasStyle(...e){for(const t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new Id(...e);for(let o=this.parent;o;){if(t.match(o))return o;o=o.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(','),t=Array.from(this._styles).map((e)=>`${e[0]}:${e[1]}`).sort().join(';'),o=Array.from(this._attrs).map((e)=>`${e[0]}="${e[1]}"`).sort().join(' ');return this.name+(''==e?'':` class="${e}"`)+(''==t?'':` style="${t}"`)+(''==o?'':` ${o}`)}_clone(e=!1){const t=[];if(e)for(const o of this.getChildren())t.push(o._clone(e));const o=new this.constructor(this.name,this._attrs,t);return o._classes=new Set(this._classes),o._styles=new Map(this._styles),o._customProperties=new Map(this._customProperties),o.getFillerOffset=this.getFillerOffset,o}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange('children',this);let o=0;const n=M(t);for(const i of n)null!==i.parent&&i._remove(),i.parent=this,this._children.splice(e,0,i),e++,o++;return o}_removeChildren(e,t=1){this._fireChange('children',this);for(let o=e;o<e+t;o++)this._children[o].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){t=t+'',this._fireChange('attributes',this),'class'==e?N(this._classes,t):'style'==e?F(this._styles,t):this._attrs.set(e,t)}_removeAttribute(e){return this._fireChange('attributes',this),'class'==e?!!(0<this._classes.size)&&(this._classes.clear(),!0):'style'==e?!!(0<this._styles.size)&&(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange('attributes',this),e=Array.isArray(e)?e:[e],e.forEach((e)=>this._classes.add(e))}_removeClass(e){this._fireChange('attributes',this),e=Array.isArray(e)?e:[e],e.forEach((e)=>this._classes.delete(e))}_setStyle(e,t){if(this._fireChange('attributes',this),Qa(e)){const t=Object.keys(e);for(const o of t)this._styles.set(o,e[o])}else this._styles.set(e,t)}_removeStyle(e){this._fireChange('attributes',this),e=Array.isArray(e)?e:[e],e.forEach((e)=>this._styles.delete(e))}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}class Fd extends Vd{constructor(e,t,o){super(e,t,o),this.getFillerOffset=D}is(e,t=null){return t?'containerElement'==e&&t==this.name||super.is(e,t):'containerElement'==e||super.is(e)}}var Nd=B,Md=function(e,t,o){var n=o.length;return 0===n?e.call(t):1===n?e.call(t,o[0]):2===n?e.call(t,o[0],o[1]):3===n?e.call(t,o[0],o[1],o[2]):e.apply(t,o)},Dd=Object.prototype,Bd=Dd.toString,Ld=function(e){return'symbol'==typeof e||Ua(e)&&Bd.call(e)=='[object Symbol]'},zd=0/0,jd=/^\s+|\s+$/g,qd=/^[-+]0x[0-9a-f]+$/i,Wd=/^0b[01]+$/i,Ud=/^0o[0-7]+$/i,Hd=parseInt,Kd=function(e){if('number'==typeof e)return e;if(Ld(e))return zd;if(ps(e)){var t=hs(e.valueOf)?e.valueOf():e;e=ps(t)?t+'':t}if('string'!=typeof e)return 0===e?e:+e;e=e.replace(jd,'');var o=Wd.test(e);return o||Ud.test(e)?Hd(e.slice(2),o?2:8):qd.test(e)?zd:+e},Gd=1/0,$d=function(e){if(!e)return 0===e?e:0;if(e=Kd(e),e===Gd||e===-Gd){var t=0>e?-1:1;return t*17976931348623157e292}return e===e?e:0},Jd=function(e){var t=$d(e),o=t%1;return t===t?o?t-o:t:0},Qd=Ba,Yd=function(e,t){if('function'!=typeof e)throw new TypeError('Expected a function');return t=Qd(void 0===t?e.length-1:Jd(t),0),function(){for(var o=arguments,n=-1,i=Qd(o.length-t,0),r=Array(i);++n<i;)r[n]=o[t+n];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,o[0],r);case 2:return e.call(this,o[0],o[1],r);}var a=Array(t+1);for(n=-1;++n<t;)a[n]=o[n];return a[t]=r,Md(e,this,a)}},Xd=Fs.a.Reflect,Zd=Xd,ec=function(e){for(var t=[],o;!(o=e.next()).done;)t.push(o.value);return t},tc=Object.prototype,oc=Zd?Zd.enumerate:void 0,nc=tc.propertyIsEnumerable;oc&&!nc.call({valueOf:1},'valueOf')&&(L=function(e){return ec(oc(e))});var ic=L,rc=Object.prototype,ac=rc.hasOwnProperty,sc=function(e){for(var t=-1,o=bl(e),n=ic(e),i=n.length,r=pl(e),a=r||[],s=a.length;++t<i;){var l=n[t];!!r&&('length'==l||fl(l,s))||'constructor'==l&&(o||!ac.call(e,l))||a.push(l)}return a},lc=Object.prototype,dc=lc.propertyIsEnumerable,cc=!dc.call({valueOf:1},'valueOf'),uc=function(e){return Yd(function(t,o){var n=-1,i=o.length,r=1<i?o[i-1]:void 0,a=2<i?o[2]:void 0;for(r=3<e.length&&'function'==typeof r?(i--,r):void 0,a&&Nd(o[0],o[1],a)&&(r=3>i?void 0:r,i=1),t=Object(t);++n<i;){var s=o[n];s&&e(t,s,n,r)}return t})}(function(e,t){if(cc||bl(t)||tl(t))return void Hs(t,sc(t),e);for(var o in t)Us(e,o,t[o])}),mc=uc;const pc=Symbol('observableProperties'),gc=Symbol('boundObservables'),fc=Symbol('boundProperties'),hc={set(e,t){if(ps(e))return void Object.keys(e).forEach((t)=>{this.set(t,e[t])},this);z(this);const o=this[pc];if(e in this&&!o.has(e))throw new Za('observable-set-cannot-override: Cannot override an existing property.');Object.defineProperty(this,e,{enumerable:!0,configurable:!0,get(){return o.get(e)},set(t){const n=o.get(e);n===t&&o.has(e)||(o.set(e,t),this.fire('change:'+e,e,t,n))}}),this[e]=t},bind(...e){if(!e.length||!U(e))throw new Za('observable-bind-wrong-properties: All properties must be strings.');if(new Set(e).size!==e.length)throw new Za('observable-bind-duplicate-properties: Properties must be unique.');z(this);const t=this[fc];e.forEach((e)=>{if(t.has(e))throw new Za('observable-bind-rebind: Cannot bind the same property more that once.')});const o=new Map;return e.forEach((e)=>{const n={property:e,to:[]};t.set(e,n),o.set(e,n)}),{to:j,toMany:q,_observable:this,_bindProperties:e,_to:[],_bindings:o}},unbind(...e){if(!(pc in this))return;const t=this[fc],o=this[gc];if(e.length){if(!U(e))throw new Za('observable-unbind-wrong-properties: Properties must be strings.');e.forEach((e)=>{const n=t.get(e);if(!n)return;let i,r,a,s;n.to.forEach((e)=>{i=e[0],r=e[1],a=o.get(i),s=a[r],s.delete(n),s.size||delete a[r],Object.keys(a).length||(o.delete(i),this.stopListening(i,'change'))}),t.delete(e)})}else o.forEach((e,t)=>{this.stopListening(t,'change')}),o.clear(),t.clear()},decorate(e){const t=this[e];if(!t)throw new Za('observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.',{object:this,methodName:e});this.on(e,(e,o)=>{e.return=t.apply(this,o)}),this[e]=function(...t){return this.fire(e,t)}}};mc(hc,ss);var bc=hc;const kc=Symbol('document');class _c extends Fd{constructor(e,t,o){super(e,t,o),this.set('isReadOnly',!1),this.set('isFocused',!1)}get document(){return this.getCustomProperty(kc)}set _document(e){if(this.getCustomProperty(kc))throw new Za('view-editableelement-document-already-set: View document is already set.');this._setCustomProperty(kc,e),this.bind('isReadOnly').to(e),this.bind('isFocused').to(e,'isFocused',(t)=>t&&e.selection.editableElement==this),this.listenTo(e.selection,'change',()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}}f(_c,bc);const wc=Symbol('rootName');class vc extends _c{constructor(e){super(e),this.rootName='main'}is(e,t=null){return t?'rootElement'==e&&t==this.name||super.is(e,t):'rootElement'==e||super.is(e)}get rootName(){return this.getCustomProperty(wc)}set rootName(e){this._setCustomProperty(wc,e)}set _name(e){this.name=e}}class yc{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new Za('view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.');if(e.direction&&'forward'!=e.direction&&'backward'!=e.direction)throw new Za('view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.',{direction:e.direction});this.boundaries=e.boundaries||null,this.position=e.startPosition?xc.createFromPosition(e.startPosition):xc.createFromPosition(e.boundaries['backward'==e.direction?'end':'start']),this.direction=e.direction||'forward',this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}skip(e){let t,o,n;do n=this.position,({done:t,value:o}=this.next());while(!t&&e(o));t||(this.position=n)}next(){return'forward'==this.direction?this._next():this._previous()}_next(){let e=xc.createFromPosition(this.position);const t=this.position,o=e.parent;if(null===o.parent&&e.offset===o.childCount)return{done:!0};if(o===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0};let n;if(o instanceof Od){if(e.isAtEnd)return this.position=xc.createAfter(o),this._next();n=o.data[e.offset]}else n=o.getChild(e.offset);if(n instanceof Vd)return this.shallow?e.offset++:e=new xc(n,0),this.position=e,this._formatReturnValue('elementStart',n,t,e,1);if(!(n instanceof Od)){if('string'==typeof n){let n;if(this.singleCharacters)n=1;else{const t=o===this._boundaryEndParent?this.boundaries.end.offset:o.data.length;n=t-e.offset}const i=new Rd(o,e.offset,n);return e.offset+=n,this.position=e,this._formatReturnValue('text',i,t,e,n)}return e=xc.createAfter(o),this.position=e,this.ignoreElementEnd?this._next():this._formatReturnValue('elementEnd',o,t,e)}if(this.singleCharacters)return e=new xc(n,0),this.position=e,this._next();else{let o=n.data.length,i;return n==this._boundaryEndParent?(o=this.boundaries.end.offset,i=new Rd(n,0,o),e=xc.createAfter(i)):(i=new Rd(n,0,n.data.length),e.offset++),this.position=e,this._formatReturnValue('text',i,t,e,o)}}_previous(){let e=xc.createFromPosition(this.position);const t=this.position,o=e.parent;if(null===o.parent&&0===e.offset)return{done:!0};if(o==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0};let n;if(o instanceof Od){if(e.isAtStart)return this.position=xc.createBefore(o),this._previous();n=o.data[e.offset-1]}else n=o.getChild(e.offset-1);if(n instanceof Vd)return this.shallow?(e.offset--,this.position=e,this._formatReturnValue('elementStart',n,t,e,1)):(e=new xc(n,n.childCount),this.position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue('elementEnd',n,t,e));if(!(n instanceof Od)){if('string'==typeof n){let n;if(!this.singleCharacters){const t=o===this._boundaryStartParent?this.boundaries.start.offset:0;n=e.offset-t}else n=1;e.offset-=n;const i=new Rd(o,e.offset,n);return this.position=e,this._formatReturnValue('text',i,t,e,n)}return e=xc.createBefore(o),this.position=e,this._formatReturnValue('elementStart',o,t,e,1)}if(this.singleCharacters)return e=new xc(n,n.data.length),this.position=e,this._previous();else{let o=n.data.length,i;if(n==this._boundaryStartParent){const t=this.boundaries.start.offset;i=new Rd(n,t,n.data.length-t),o=i.data.length,e=xc.createBefore(i)}else i=new Rd(n,0,n.data.length),e.offset--;return this.position=e,this._formatReturnValue('text',i,t,e,o)}}_formatReturnValue(e,t,o,n,i){return t instanceof Rd&&(t.offsetInText+t.data.length==t.textNode.data.length&&('forward'!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?o=xc.createAfter(t.textNode):(n=xc.createAfter(t.textNode),this.position=n)),0===t.offsetInText&&('backward'!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?o=xc.createBefore(t.textNode):(n=xc.createBefore(t.textNode),this.position=n))),{done:!1,value:{type:e,item:t,previousPosition:o,nextPosition:n,length:i}}}}class xc{constructor(e,t){this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is('text')?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is('text')?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const e=this.parent.is('text')?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof _c);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=xc.createFromPosition(this),o=t.offset+e;return t.offset=0>o?0:o,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const o=new yc(t);return o.skip(e),o.position}getAncestors(){return this.parent.is('documentFragment')?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),o=e.getAncestors();let n=0;for(;t[n]==o[n]&&t[n];)n++;return 0==n?null:t[n-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return'before'==this.compareWith(e)}isAfter(e){return'after'==this.compareWith(e)}compareWith(e){if(this.root!==e.root)return'different';if(this.isEqual(e))return'same';const t=this.parent.is('node')?this.parent.getPath():[],o=e.parent.is('node')?e.parent.getPath():[];t.push(this.offset),o.push(e.offset);const n=A(t,o);return'prefix'===n?'before':'extension'===n?'after':t[n]<o[n]?'before':'after'}static createAt(e,t){if(e instanceof xc)return this.createFromPosition(e);else{const o=e;if('end'==t)t=o.is('text')?o.data.length:o.childCount;else{if('before'==t)return this.createBefore(o);if('after'==t)return this.createAfter(o);t||(t=0)}return new xc(o,t)}}static createAfter(e){if(e.is('textProxy'))return new xc(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new Za('view-position-after-root: You can not make position after root.',{root:e});return new xc(e.parent,e.index+1)}static createBefore(e){if(e.is('textProxy'))return new xc(e.textNode,e.offsetInText);if(!e.parent)throw new Za('view-position-before-root: You can not make position before root.',{root:e});return new xc(e.parent,e.index)}static createFromPosition(e){return new this(e.parent,e.offset)}}class Cc{constructor(e,t=null){this.start=xc.createFromPosition(e),this.end=t?xc.createFromPosition(t):xc.createFromPosition(e)}*[Symbol.iterator](){yield*new yc({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Q,{direction:'backward'}),t=this.end.getLastMatchingPosition(Q);return e.parent.is('text')&&e.isAtStart&&(e=xc.createBefore(e.parent)),t.parent.is('text')&&t.isAtEnd&&(t=xc.createAfter(t.parent)),new Cc(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Q);if(e.isAfter(this.end)||e.isEqual(this.end))return new Cc(e,e);let t=this.end.getLastMatchingPosition(Q,{direction:'backward'});const o=e.nodeAfter,n=t.nodeBefore;return o&&o.is('text')&&(e=new xc(o,0)),n&&n.is('text')&&(t=new xc(n,n.data.length)),new Cc(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const o=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return o&&n}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Cc(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Cc(e.end,this.end))):t.push(Cc.createFromRange(this)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,o=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(o=e.end),new Cc(t,o)}return null}getWalker(e={}){return e.boundaries=this,new yc(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new yc(e);for(const o of t)yield o.item}*getPositions(e={}){e.boundaries=this;const t=new yc(e);yield t.position;for(const o of t)yield o.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static createFromParentsAndOffsets(e,t,o,n){return new this(new xc(e,t),new xc(o,n))}static createFromRange(e){return new this(e.start,e.end)}static createFromPositionAndShift(e,t){const o=e,n=e.getShiftedBy(t);return 0<t?new this(o,n):new this(n,o)}static createIn(e){return this.createFromParentsAndOffsets(e,0,e,e.childCount)}static createOn(e){const t=e.is('textProxy')?e.offsetSize:1;return this.createFromPositionAndShift(xc.createBefore(e),t)}static createCollapsedAt(e,t){const o=xc.createAt(e,t),n=xc.createFromPosition(o);return new Cc(o,n)}}class Ac{constructor(e=null,t,o){this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel='',this.setTo(e,t,o)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1],t=this._lastRangeBackward?e.end:e.start;return xc.createFromPosition(t)}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1],t=this._lastRangeBackward?e.start:e.end;return xc.createFromPosition(t)}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield Cc.createFromRange(e)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?Cc.createFromRange(e):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?Cc.createFromRange(e):null}getFirstPosition(){const e=this.getFirstRange();return e?xc.createFromPosition(e.start):null}getLastPosition(){const e=this.getLastRange();return e?xc.createFromPosition(e.end):null}isEqual(e){if(this.isFake!=e.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel)return!1;if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let o=!1;for(const n of e._ranges)if(t.isEqual(n)){o=!0;break}if(!o)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=Y(this.getRanges()),o=Y(e.getRanges());if(t!=o)return!1;if(0==t)return!0;for(let t of this.getRanges()){t=t.getTrimmed();let o=!1;for(let n of e.getRanges())if(n=n.getTrimmed(),t.start.isEqual(n.start)&&t.end.isEqual(n.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){if(1!==this.rangeCount)return null;const e=this.getFirstRange(),t=e.start.nodeAfter,o=e.end.nodeBefore;return t instanceof Vd&&t==o?t:null}setTo(e,t,o){if(null===e)this._setRanges([]),this._setFakeOptions(t);else if(e instanceof Ac||e instanceof Tc)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Cc)this._setRanges([e],t&&t.backward),this._setFakeOptions(t);else if(e instanceof xc)this._setRanges([new Cc(e)]),this._setFakeOptions(t);else if(e instanceof Sd){const n=!!o&&!!o.backward;let i;if(t===void 0)throw new Za('view-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.');else i='in'==t?Cc.createIn(e):'on'==t?Cc.createOn(e):Cc.createCollapsedAt(e,t);this._setRanges([i],n),this._setFakeOptions(o)}else if(P(e))this._setRanges(e,t&&t.backward),this._setFakeOptions(t);else throw new Za('view-selection-setTo-not-selectable: Cannot set selection to given place.');this.fire('change')}setFocus(e,t){if(null===this.anchor)throw new Za('view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.');const o=xc.createAt(e,t);if('same'!=o.compareWith(this.focus)){const e=this.anchor;this._ranges.pop(),'before'==o.compareWith(e)?this._addRange(new Cc(o,e),!0):this._addRange(new Cc(e,o)),this.fire('change')}}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const o of e)this._addRange(o);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake?e.label||'':''}_addRange(e,t=!1){if(!(e instanceof Cc))throw new Za('view-selection-invalid-range: Invalid Range.');this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new Za('view-selection-range-intersects: Trying to add a range that intersects with another range from selection.',{addedRange:e,intersectingRange:t});this._ranges.push(Cc.createFromRange(e))}}f(Ac,ss);class Tc{constructor(e=null,t,o){this._selection=new Ac,this._selection.delegate('change').to(this),this._selection.setTo(e,t,o)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(e,t,o){this._selection.setTo(e,t,o)}_setFocus(e,t){this._selection.setFocus(e,t)}}f(Tc,ss);class Pc{constructor(e={}){this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||'id',this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[]}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){let o;const n=this._idProperty;if(n in e){if(o=e[n],'string'!=typeof o)throw new Za('collection-add-invalid-id');if(this.get(o))throw new Za('collection-add-item-already-exists')}else e[n]=o=i();if(void 0===t)t=this._items.length;else if(t>this._items.length||0>t)throw new Za('collection-add-item-invalid-index');return this._items.splice(t,0,e),this._itemMap.set(o,e),this.fire('add',e,t),this}get(e){let t;if('string'==typeof e)t=this._itemMap.get(e);else if('number'==typeof e)t=this._items[e];else throw new Za('collection-get-invalid-arg: Index or id must be given.');return t||null}getIndex(e){let t;return t='string'==typeof e?this._itemMap.get(e):e,this._items.indexOf(t)}remove(e){let t=!1,o,n,i;const r=this._idProperty;if('string'==typeof e?(n=e,i=this._itemMap.get(n),t=!i,i&&(o=this._items.indexOf(i))):'number'==typeof e?(o=e,i=this._items[o],t=!i,i&&(n=i[r])):(i=e,n=i[r],o=this._items.indexOf(i),t=-1==o||!this._itemMap.get(n)),t)throw new Za('collection-remove-404: Item not found.');this._items.splice(o,1),this._itemMap.delete(n);const a=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(a),this.fire('remove',i,o),i}map(e,t){return this._items.map(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){for(this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);this.length;)this.remove(0)}bindTo(e){if(this._bindToCollection)throw new Za('collection-bind-to-rebind: The collection cannot be bound more than once.');return this._bindToCollection=e,{as:(e)=>{this._setUpBindToBinding((t)=>new e(t))},using:(e)=>{'function'==typeof e?this._setUpBindToBinding((t)=>e(t)):this._setUpBindToBinding((t)=>t[e])}}}_setUpBindToBinding(e){const t=this._bindToCollection,o=(o,n,i)=>{const r=t._bindToCollection==this,a=t._bindToInternalToExternalMap.get(n);if(r&&a)this._bindToExternalToInternalMap.set(n,a),this._bindToInternalToExternalMap.set(a,n);else{const o=e(n);if(!o)return void this._skippedIndexesFromExternal.push(i);let r=i;for(const e of this._skippedIndexesFromExternal)i>e&&r--;for(const e of t._skippedIndexesFromExternal)r>=e&&r++;this._bindToExternalToInternalMap.set(n,o),this._bindToInternalToExternalMap.set(o,n),this.add(o,r);for(let e=0;e<t._skippedIndexesFromExternal.length;e++)r<=t._skippedIndexesFromExternal[e]&&t._skippedIndexesFromExternal[e]++}};for(const n of t)o(null,n,t.getIndex(n));this.listenTo(t,'add',o),this.listenTo(t,'remove',(e,t,o)=>{const n=this._bindToExternalToInternalMap.get(t);n&&this.remove(n),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((e,t)=>(o<t&&e.push(t-1),o>t&&e.push(t),e),[])})}[Symbol.iterator](){return this._items[Symbol.iterator]()}}f(Pc,ss);class Ec{constructor(){this.selection=new Tc,this.roots=new Pc({idProperty:'rootName'}),this.set('isReadOnly',!1),this.set('isFocused',!1),this.set('isComposing',!1),this._postFixers=new Set}getRoot(e='main'){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}_callPostFixers(e){let t=!1;do for(const o of this._postFixers)if(t=o(e),t)break;while(t)}}f(Ec,bc);const Sc=10;class Oc extends Vd{constructor(e,t,o){super(e,t,o),this.getFillerOffset=X,this._priority=Sc,this._id=null,this._clonesGroup=null}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new Za('attribute-element-get-elements-with-same-id-no-id: Cannot get elements with the same id for an attribute element without id.');return new Set(this._clonesGroup)}is(e,t=null){return t?'attributeElement'==e&&t==this.name||super.is(e,t):'attributeElement'==e||super.is(e)}isSimilar(e){return null!==this.id||null!==e.id?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}}Oc.DEFAULT_PRIORITY=Sc;class Rc extends Vd{constructor(e,t,o){super(e,t,o),this.getFillerOffset=ee}is(e,t=null){return t?'emptyElement'==e&&t==this.name||super.is(e,t):'emptyElement'==e||super.is(e)}_insertChild(e,t){if(t&&(t instanceof Sd||0<Array.from(t).length))throw new Za('view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.')}}const Ic=navigator.userAgent.toLowerCase(),Vc={isMac:function(e){return-1<e.indexOf('macintosh')}(Ic)};var Fc=Vc;const Nc={"":'ctrl',"":'shift',"":'alt'},Mc={ctrl:'\u2318',shift:'\u21E7',alt:'\u2325'},Dc=function(){const e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(let t=65;90>=t;t++){const o=String.fromCharCode(t);e[o.toLowerCase()]=t}for(let t=48;57>=t;t++)e[t-48]=t;for(let t=112;123>=t;t++)e['f'+(t-111)]=t;return e}();class Bc extends Vd{constructor(e,t,o){super(e,t,o),this.getFillerOffset=ae}is(e,t=null){return t?'uiElement'==e&&t==this.name||super.is(e,t):'uiElement'==e||super.is(e)}_insertChild(e,t){if(t&&(t instanceof Sd||0<Array.from(t).length))throw new Za('view-uielement-cannot-add: Cannot add child nodes to UIElement instance.')}render(e){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const o of this.getAttributeKeys())t.setAttribute(o,this.getAttribute(o));return t}}class Lc{constructor(e){this._children=[],e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return'documentFragment'==e}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange('children',this);let o=0;const n=le(t);for(const i of n)null!==i.parent&&i._remove(),i.parent=this,this._children.splice(e,0,i),e++,o++;return o}_removeChildren(e,t=1){this._fireChange('children',this);for(let o=e;o<e+t;o++)this._children[o].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire('change:'+e,t)}}f(Lc,ss);class zc{constructor(e){this.document=e,this._cloneGroups=new Map}setSelection(e,t,o){this.document.selection._setTo(e,t,o)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createText(e){return new Od(e)}createAttributeElement(e,t,o={}){const n=new Oc(e,t);return o.priority&&(n._priority=o.priority),o.id&&(n._id=o.id),n}createContainerElement(e,t){return new Fd(e,t)}createEditableElement(e,t){const o=new _c(e,t);return o._document=this.document,o}createEmptyElement(e,t){return new Rc(e,t)}createUIElement(e,t,o){const n=new Bc(e,t);return o&&(n.render=o),n}setAttribute(e,t,o){o._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,o){Qa(e)&&o===void 0&&(o=t),o._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,o){o._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof xc?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is('containerElement'))throw new Za('view-writer-break-non-container-element: Trying to break an element which is not a container element.');if(!t.parent)throw new Za('view-writer-break-root: Trying to break root element.');if(e.isAtStart)return xc.createBefore(t);if(!e.isAtEnd){const o=t._clone(!1);this.insert(xc.createAfter(t),o);const n=new Cc(e,xc.createAt(t,'end')),i=new xc(o,0);this.move(n,i)}return xc.createAfter(t)}mergeAttributes(e){const t=e.offset,o=e.parent;if(o.is('text'))return e;if(o.is('attributeElement')&&0===o.childCount){const e=o.parent,t=o.index;return o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new xc(e,t))}const n=o.getChild(t-1),i=o.getChild(t);if(!n||!i)return e;if(n.is('text')&&i.is('text'))return ge(n,i);if(n.is('attributeElement')&&i.is('attributeElement')&&n.isSimilar(i)){const e=n.childCount;return n._appendChild(i.getChildren()),i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new xc(n,e))}return e}mergeContainers(e){const t=e.nodeBefore,o=e.nodeAfter;if(!t||!o||!t.is('containerElement')||!o.is('containerElement'))throw new Za('view-writer-merge-containers-invalid-position: Element before and after given position cannot be merged.');const n=t.getChild(t.childCount-1),i=n instanceof Od?xc.createAt(n,'end'):xc.createAt(t,'end');return this.move(Cc.createIn(o),xc.createAt(t,'end')),this.remove(Cc.createOn(o)),i}insert(e,t){t=P(t)?[...t]:[t],he(t);const o=ce(e);if(!o)throw new Za('view-writer-invalid-position-container');const n=this._breakAttributes(e,!0),i=o._insertChild(n.offset,t);for(const o of t)this._addToClonedElementsGroup(o);const r=n.getShiftedBy(i),a=this.mergeAttributes(n);if(0===i)return new Cc(a,a);else{a.isEqual(n)||r.offset--;const e=this.mergeAttributes(r);return new Cc(a,e)}}remove(e){if(ke(e),e.isCollapsed)return new Lc;const{start:t,end:o}=this._breakAttributesRange(e,!0),n=t.parent,i=o.offset-t.offset,r=n._removeChildren(t.offset,i);for(const t of r)this._removeFromClonedElementsGroup(t);const a=this.mergeAttributes(t);return e.start=a,e.end=xc.createFromPosition(a),new Lc(r)}clear(e,t){ke(e);const o=e.getWalker({direction:'backward',ignoreElementEnd:!0});for(const n of o){const o=n.item;let i;if(o.is('element')&&t.isSimilar(o))i=Cc.createOn(o);else if(!n.nextPosition.isAfter(e.start)&&o.is('textProxy')){const e=o.getAncestors().find((e)=>e.is('element')&&t.isSimilar(e));e&&(i=Cc.createIn(e))}i&&(i.end.isAfter(e.end)&&(i.end=e.end),i.start.isBefore(e.start)&&(i.start=e.start),this.remove(i))}}move(e,t){let o;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const n=t.parent,i=n.childCount;e=this._breakAttributesRange(e,!0),o=this.remove(e),t.offset+=n.childCount-i}else o=this.remove(e);return this.insert(t,o)}wrap(e,t){if(!(t instanceof Oc))throw new Za('view-writer-wrap-invalid-attribute');if(ke(e),!e.isCollapsed)return this._wrapRange(e,t);else{let o=e.start;o.parent.is('element')&&!de(o.parent)&&(o=o.getLastMatchingPosition((e)=>e.item.is('uiElement'))),o=this._wrapPosition(o,t);const n=this.document.selection;return n.isCollapsed&&n.getFirstPosition().isEqual(e.start)&&this.setSelection(o),new Cc(o)}}unwrap(e,t){if(!(t instanceof Oc))throw new Za('view-writer-unwrap-invalid-attribute');if(ke(e),e.isCollapsed)return e;const{start:o,end:n}=this._breakAttributesRange(e,!0);if(n.isEqual(o.getShiftedBy(1))){const e=o.nodeAfter;if(!t.isSimilar(e)&&e instanceof Oc&&this._unwrapAttributeElement(t,e)){const e=this.mergeAttributes(o);e.isEqual(o)||n.offset--;const t=this.mergeAttributes(n);return new Cc(e,t)}}const i=o.parent,r=this._unwrapChildren(i,o.offset,n.offset,t),a=this.mergeAttributes(r.start);a.isEqual(r.start)||r.end.offset--;const s=this.mergeAttributes(r.end);return new Cc(a,s)}rename(e,t){const o=new Fd(t,e.getAttributes());return this.insert(xc.createAfter(e),o),this.move(Cc.createIn(e),xc.createAt(o)),this.remove(Cc.createOn(e)),o}_wrapChildren(e,t,o,n){let r=t;const i=[];for(;r<o;){const t=e.getChild(r),o=t.is('text'),a=t.is('attributeElement'),s=t.is('emptyElement'),l=t.is('uiElement');if(o||s||l||a&&ue(n,t)){const o=n._clone();t._remove(),o._appendChild(t),e._insertChild(r,o),this._addToClonedElementsGroup(o),i.push(new xc(e,r))}else a&&this._wrapChildren(t,0,t.childCount,n);r++}let a=0;for(const r of i){if(r.offset-=a,r.offset==t)continue;const e=this.mergeAttributes(r);e.isEqual(r)||(a++,o--)}return Cc.createFromParentsAndOffsets(e,t,e,o)}_unwrapChildren(e,t,o,n){let r=t;const i=[];for(;r<o;){const t=e.getChild(r);if(t.isSimilar(n)){const n=t.getChildren(),a=t.childCount;t._remove(),e._insertChild(r,n),this._removeFromClonedElementsGroup(t),i.push(new xc(e,r),new xc(e,r+a)),r+=a,o+=a-1}else t.is('attributeElement')&&this._unwrapChildren(t,0,t.childCount,n),r++}let a=0;for(const r of i){if(r.offset-=a,r.offset==t||r.offset==o)continue;const e=this.mergeAttributes(r);e.isEqual(r)||(a++,o--)}return Cc.createFromParentsAndOffsets(e,t,e,o)}_wrapRange(e,t){if(fe(e)&&this._wrapAttributeElement(t,e.start.parent)){const t=e.start.parent,o=this.mergeAttributes(xc.createAfter(t)),n=this.mergeAttributes(xc.createBefore(t));return new Cc(n,o)}const{start:o,end:n}=this._breakAttributesRange(e,!0);if(n.isEqual(o.getShiftedBy(1))){const e=o.nodeAfter;if(e instanceof Oc&&this._wrapAttributeElement(t,e)){const e=this.mergeAttributes(o);e.isEqual(o)||n.offset--;const t=this.mergeAttributes(n);return new Cc(e,t)}}const i=o.parent,r=this._unwrapChildren(i,o.offset,n.offset,t),a=this._wrapChildren(i,r.start.offset,r.end.offset,t),s=this.mergeAttributes(a.start);s.isEqual(a.start)||a.end.offset--;const l=this.mergeAttributes(a.end);return new Cc(s,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return me(xc.createFromPosition(e));e.parent.is('text')&&(e=pe(e));const o=this.createAttributeElement();o._priority=Da,o.isSimilar=()=>!1,e.parent._insertChild(e.offset,o);const n=new Cc(e,e.getShiftedBy(1));this.wrap(n,t);const i=new xc(o.parent,o.index);o._remove();const r=i.nodeBefore,a=i.nodeAfter;return r instanceof Od&&a instanceof Od?ge(r,a):me(i)}_wrapAttributeElement(e,t){if(!_e(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const o of e.getAttributeKeys())if('class'!==o&&'style'!==o&&t.hasAttribute(o)&&t.getAttribute(o)!==e.getAttribute(o))return!1;for(const o of e.getStyleNames())if(t.hasStyle(o)&&t.getStyle(o)!==e.getStyle(o))return!1;for(const o of e.getAttributeKeys())'class'!==o&&'style'!==o&&(t.hasAttribute(o)||this.setAttribute(o,e.getAttribute(o),t));for(const o of e.getStyleNames())t.hasStyle(o)||this.setStyle(o,e.getStyle(o),t);for(const o of e.getClassNames())t.hasClass(o)||this.addClass(o,t);return!0}_unwrapAttributeElement(e,t){if(!_e(e,t))return!1;if(e.name!==t.name||e.priority!==t.priority)return!1;for(const o of e.getAttributeKeys())if('class'!==o&&'style'!==o&&(!t.hasAttribute(o)||t.getAttribute(o)!==e.getAttribute(o)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(const o of e.getStyleNames())if(!t.hasStyle(o)||t.getStyle(o)!==e.getStyle(o))return!1;for(const o of e.getAttributeKeys())'class'!==o&&'style'!==o&&this.removeAttribute(o,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){const o=e.start,n=e.end;if(ke(e),e.isCollapsed){const o=this._breakAttributes(e.start,t);return new Cc(o,o)}const i=this._breakAttributes(n,t),r=i.parent.childCount,a=this._breakAttributes(o,t);return i.offset+=i.parent.childCount-r,new Cc(a,i)}_breakAttributes(e,t=!1){const o=e.offset,n=e.parent;if(e.parent.is('emptyElement'))throw new Za('view-writer-cannot-break-empty-element');if(e.parent.is('uiElement'))throw new Za('view-writer-cannot-break-ui-element');if(!t&&n.is('text')&&be(n.parent))return xc.createFromPosition(e);if(be(n))return xc.createFromPosition(e);if(n.is('text'))return this._breakAttributes(pe(e),t);const i=n.childCount;if(o==i){const e=new xc(n.parent,n.index+1);return this._breakAttributes(e,t)}if(0===o){const e=new xc(n.parent,n.index);return this._breakAttributes(e,t)}else{const e=n.index+1,i=n._clone();n.parent._insertChild(e,i),this._addToClonedElementsGroup(i);const r=n.childCount-o,a=n._removeChildren(o,r);i._appendChild(a);const s=new xc(n.parent,e);return this._breakAttributes(s,t)}}_addToClonedElementsGroup(e){if(!e.root.is('rootElement'))return;if(e.is('element'))for(const t of e.getChildren())this._addToClonedElementsGroup(t);const t=e.id;if(!t)return;let o=this._cloneGroups.get(t);o||(o=new Set,this._cloneGroups.set(t,o)),o.add(e),e._clonesGroup=o}_removeFromClonedElementsGroup(e){if(e.is('element'))for(const t of e.getChildren())this._removeFromClonedElementsGroup(t);const t=e.id;if(t){const o=this._cloneGroups.get(t);o&&(o.delete(e),0===o.size&&this._cloneGroups.delete(t))}}}const jc=[Od,Oc,Fd,Rc,Bc],qc=(e)=>{const t=e.createElement('br');return t.dataset.ckeFiller=!0,t},Wc=(e)=>e.createTextNode('\xA0'),Uc=7;let Hc='';for(let n=0;n<Uc;n++)Hc+='\u200B';const Kc=new WeakMap;class Gc{constructor(e,t){this.domDocuments=new Set,this.domConverter=e,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this.selection=t,this._inlineFiller=null,this.isFocused=!1,this._fakeSelectionContainer=null}markToSync(e,t){if('text'===e)this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if('attributes'===e)this.markedAttributes.add(t);else if('children'===e)this.markedChildren.add(t);else throw new Za('view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.')}}render(){let e;this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent));for(const e of this.markedAttributes)this._updateAttrs(e);for(const t of this.markedChildren)this._updateChildren(t,{inlineFillerPosition:e});for(const t of this.markedTexts)!this.markedChildren.has(t.parent)&&this.domConverter.mapViewToDom(t.parent)&&this._updateText(t,{inlineFillerPosition:e});if(e){const t=this.domConverter.viewPositionToDom(e),o=t.parent.ownerDocument;this._inlineFiller=we(t.parent)?t.parent:this._addInlineFiller(o,t.parent,t.offset)}else this._inlineFiller=null;this._updateSelection(),this._updateFocus(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_addInlineFiller(e,t,o){const n=t instanceof Array?t:t.childNodes,i=n[o];if(Se(i))return i.data=Hc+i.data,i;else{const i=e.createTextNode(Hc);return Array.isArray(t)?n.splice(o,0,i):Pe(t,o,i),i}}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is('text')?xc.createBefore(this.selection.getFirstPosition().parent):e}_isSelectionInInlineFiller(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&Se(t.parent)&&we(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!we(e))throw new Za('view-renderer-filler-was-lost: The inline filler node was lost.');ve(e)?e.parentNode.removeChild(e):e.data=e.data.substr(Uc),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,o=e.offset;if(!this.domConverter.mapViewToDom(t.root))return!1;if(!t.is('element'))return!1;if(!Oe(t))return!1;if(o===t.getFillerOffset())return!1;const n=e.nodeBefore,i=e.nodeAfter;return!(n instanceof Od||i instanceof Od)}_updateText(e,t){const o=this.domConverter.findCorrespondingDomText(e),n=this.domConverter.viewToDom(e,o.ownerDocument),i=o.data;let r=n.data;const a=t.inlineFillerPosition;a&&a.parent==e.parent&&a.offset==e.index&&(r=Hc+r),i!=r&&(o.data=r)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e),o=Array.from(t.attributes).map((e)=>e.name),n=e.getAttributeKeys();for(const o of n)t.setAttribute(o,e.getAttribute(o));for(const n of o)e.hasAttribute(n)||t.removeAttribute(n)}_updateChildren(e,t){function o(e,t){if(e===t)return!0;return Se(e)&&Se(t)?e.data===t.data:!!(xe(e,n.blockFiller)&&xe(t,n.blockFiller))}const n=this.domConverter,r=n.mapViewToDom(e);if(r){const a=r.ownerDocument,s=t.inlineFillerPosition,l=r.childNodes,d=Array.from(n.viewChildrenToDom(e,a,{bind:!0}));s&&s.parent==e&&this._addInlineFiller(a,d,s.offset);const c=Te(l,d,o);let u=0;const i=new Set;for(const e of c)'insert'===e?(Pe(r,u,d[u]),u++):'delete'===e?(i.add(l[u]),Ee(l[u])):(this._markDescendantTextToSync(n.domToView(d[u])),u++);for(const e of i)e.parentNode||this.domConverter.unbindDomElement(e)}}_markDescendantTextToSync(e){if(e)if(e.is('text'))this.markedTexts.add(e);else if(e.is('element'))for(const t of e.getChildren())this._markDescendantTextToSync(t)}_updateSelection(){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();const e=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&e&&(this.selection.isFake?this._updateFakeSelection(e):(this._removeFakeSelection(),this._updateDomSelection(e)))}_updateFakeSelection(e){const t=e.ownerDocument;let o=this._fakeSelectionContainer;o||(this._fakeSelectionContainer=o=t.createElement('div'),Object.assign(o.style,{position:'fixed',top:0,left:'-9999px',width:'42px'}),o.appendChild(t.createTextNode('\xA0'))),o.parentElement||e.appendChild(o),o.firstChild.data=this.selection.fakeSelectionLabel||'\xA0';const n=t.getSelection(),i=t.createRange();n.removeAllRanges(),i.selectNodeContents(o),n.addRange(i),this.domConverter.bindFakeSelection(o,this.selection)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(t)){const o=this.domConverter.viewPositionToDom(this.selection.anchor),n=this.domConverter.viewPositionToDom(this.selection.focus);e.focus(),t.collapse(o.parent,o.offset),t.extend(n.parent,n.offset)}}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t))&&(this.selection.isCollapsed||!this.selection.isSimilar(t))}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const t=e.activeElement,o=this.domConverter.mapDomToView(t);t&&o&&e.getSelection().removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}f(Gc,bc);var $c={window,document};class Jc{constructor(e={}){this.blockFiller=e.blockFiller||qc,this.preElements=['pre'],this.blockElements=['p','div','h1','h2','h3','h4','h5','h6'],this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Ac(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const t of Array.from(e.childNodes))this.unbindDomElement(t)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}viewToDom(e,t,o={}){if(e.is('text')){const o=this._processDataFromViewText(e);return t.createTextNode(o)}else{if(this.mapViewToDom(e))return this.mapViewToDom(e);let n;if(e.is('documentFragment'))n=t.createDocumentFragment(),o.bind&&this.bindDocumentFragments(n,e);else{if(e.is('uiElement'))return n=e.render(t),o.bind&&this.bindElements(n,e),n;n=t.createElement(e.name),o.bind&&this.bindElements(n,e);for(const t of e.getAttributeKeys())n.setAttribute(t,e.getAttribute(t))}if(o.withChildren||void 0===o.withChildren)for(const i of this.viewChildrenToDom(e,t,o))n.appendChild(i);return n}}*viewChildrenToDom(e,t,o={}){const n=e.getFillerOffset&&e.getFillerOffset();let i=0;for(const r of e.getChildren())n===i&&(yield this.blockFiller(t)),yield this.viewToDom(r,t,o),i++;n===i&&(yield this.blockFiller(t))}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),o=this.viewPositionToDom(e.end),n=document.createRange();return n.setStart(t.parent,t.offset),n.setEnd(o.parent,o.offset),n}viewPositionToDom(e){const t=e.parent;if(t.is('text')){const o=this.findCorrespondingDomText(t);if(!o)return null;let n=e.offset;return we(o)&&(n+=Uc),{parent:o,offset:n}}else{let o,n,i;if(0===e.offset){if(o=this.mapViewToDom(t),!o)return null;i=o.childNodes[0]}else{const t=e.nodeBefore;if(n=t.is('text')?this.findCorrespondingDomText(t):this.mapViewToDom(e.nodeBefore),!n)return null;o=n.parentNode,i=n.nextSibling}if(Se(i)&&we(i))return{parent:i,offset:Uc};const r=n?Re(n)+1:0;return{parent:o,offset:r}}}domToView(e,t={}){if(xe(e,this.blockFiller))return null;const o=this.getParentUIElement(e,this._domToViewMapping);if(o)return o;if(Se(e)){if(ve(e))return null;else{const t=this._processDataFromDomText(e);return''===t?null:new Od(t)}}else if(this.isComment(e))return null;else{if(this.mapDomToView(e))return this.mapDomToView(e);let o;if(this.isDocumentFragment(e))o=new Lc,t.bind&&this.bindDocumentFragments(e,o);else{const n=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();o=new Vd(n),t.bind&&this.bindElements(e,o);const r=e.attributes;for(let e=r.length-1;0<=e;e--)o._setAttribute(r[e].name,r[e].value)}if(t.withChildren||void 0===t.withChildren)for(const n of this.domChildrenToView(e,t))o._appendChild(n);return o}}*domChildrenToView(e,t={}){for(let o=0;o<e.childNodes.length;o++){const n=e.childNodes[o],i=this.domToView(n,t);null!==i&&(yield i)}}domSelectionToView(e){if(1===e.rangeCount){let t=e.getRangeAt(0).startContainer;Se(t)&&(t=t.parentNode);const o=this.fakeSelectionToView(t);if(o)return o}const t=this.isDomSelectionBackward(e),o=[];for(let t=0;t<e.rangeCount;t++){const n=e.getRangeAt(t),i=this.domRangeToView(n);i&&o.push(i)}return new Ac(o,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),o=this.domPositionToView(e.endContainer,e.endOffset);return t&&o?new Cc(t,o):null}domPositionToView(e,t){if(xe(e,this.blockFiller))return this.domPositionToView(e.parentNode,Re(e));const o=this.mapDomToView(e);if(o&&o.is('uiElement'))return xc.createBefore(o);if(Se(e)){if(ve(e))return this.domPositionToView(e.parentNode,Re(e));const o=this.findCorrespondingViewText(e);let n=t;return o?(we(e)&&(n-=Uc,n=0>n?0:n),new xc(o,n)):null}if(0===t){const t=this.mapDomToView(e);if(t)return new xc(t,0)}else{const o=e.childNodes[t-1],n=Se(o)?this.findCorrespondingViewText(o):this.mapDomToView(o);if(n&&n.parent)return new xc(n.parent,n.index+1)}return null}mapDomToView(e){return this.getParentUIElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(ve(e))return null;const t=this.getParentUIElement(e);if(t)return t;const o=e.previousSibling;if(o){if(!this.isElement(o))return null;const e=this.mapDomToView(o);if(e){const t=e.nextSibling;return t instanceof Od?e.nextSibling:null}}else{const t=this.mapDomToView(e.parentNode);if(t){const e=t.getChild(0);return e instanceof Od?e:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){const{scrollX:e,scrollY:o}=$c.window,n=[];Ne(t,(e)=>{const{scrollLeft:t,scrollTop:o}=e;n.push([t,o])}),t.focus(),Ne(t,(e)=>{const[t,o]=n.shift();e.scrollLeft=t,e.scrollTop=o}),$c.window.scrollTo(e,o)}}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isComment(e){return e&&e.nodeType==Node.COMMENT_NODE}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset);const o=t.collapsed;return t.detach(),o}getParentUIElement(e){const t=Ie(e);for(t.pop();t.length;){const e=t.pop(),o=this._domToViewMapping.get(e);if(o&&o.is('uiElement'))return o}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}_isDomSelectionPositionCorrect(e,t){if(Se(e)&&we(e)&&t<Uc)return!1;if(this.isElement(e)&&we(e.childNodes[t]))return!1;const o=this.mapDomToView(e);return!(o&&o.is('uiElement'))}_processDataFromViewText(e){let t=e.data;if(e.getAncestors().some((e)=>this.preElements.includes(e.name)))return t;if(' '==t.charAt(0)){const o=this._getTouchingViewTextNode(e,!1),n=o&&this._nodeEndsWithSpace(o);(n||!o)&&(t='\xA0'+t.substr(1))}if(' '==t.charAt(t.length-1)){const o=this._getTouchingViewTextNode(e,!0);o||(t=t.substr(0,t.length-1)+'\xA0')}return t.replace(/ {2}/g,' \xA0')}_nodeEndsWithSpace(e){if(e.getAncestors().some((e)=>this.preElements.includes(e.name)))return!1;const t=this._processDataFromViewText(e);return' '==t.charAt(t.length-1)}_processDataFromDomText(e){let t=e.data;if(Fe(e,this.preElements))return ye(e);t=t.replace(/[ \n\t\r]{1,}/g,' ');const o=this._getTouchingDomTextNode(e,!1),n=this._getTouchingDomTextNode(e,!0);return(!o||/[^\S\u00A0]/.test(o.data.charAt(o.data.length-1)))&&(t=t.replace(/^ /,'')),n||we(e)||(t=t.replace(/ $/,'')),t=ye(new Text(t)),t=t.replace(/ \u00A0/g,'  '),(!o||/[^\S\u00A0]/.test(o.data.charAt(o.data.length-1)))&&(t=t.replace(/^\u00A0/,' ')),n&&'\xA0'!=n.data.charAt(0)||(t=t.replace(/\u00A0( *)$/,' $1')),t}_getTouchingViewTextNode(e,t){const o=new yc({startPosition:t?xc.createAfter(e):xc.createBefore(e),direction:t?'forward':'backward'});for(const n of o){if(n.item.is('containerElement'))return null;if(n.item.is('textProxy'))return n.item}return null}_getTouchingDomTextNode(e,t){if(!e.parentNode)return null;const o=t?'nextNode':'previousNode',n=e.ownerDocument,i=Ie(e)[0],r=n.createTreeWalker(i,NodeFilter.SHOW_TEXT);r.currentNode=e;const a=r[o]();if(null!==a){const t=Ve(e,a);if(t&&!Fe(e,this.blockElements,t)&&!Fe(a,this.blockElements,t))return a}return null}}const Qc=mc({},ss,{listenTo(e,...t){if(Me(e)||De(e)){const o=this._getProxyEmitter(e)||new Xc(e);o.attach(...t),e=o}ss.listenTo.call(this,e,...t)},stopListening(e,t,o){if(Me(e)||De(e)){const t=this._getProxyEmitter(e);if(!t)return;e=t}ss.stopListening.call(this,e,t,o),e instanceof Xc&&e.detach(t)},_getProxyEmitter(e){return r(this,Be(e))}});var Yc=Qc;class Xc{constructor(e){a(this,Be(e)),this._domNode=e}}mc(Xc.prototype,ss,{attach(e,t,o={}){if(!(this._domListeners&&this._domListeners[e])){const t=this._createDomListener(e,!!o.useCapture);this._domNode.addEventListener(e,t,!!o.useCapture),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}},detach(e){let t;!this._domListeners[e]||(t=this._events[e])&&t.callbacks.length||this._domListeners[e].removeListener()},_createDomListener(e,t){const o=(t)=>{this.fire(e,t)};return o.removeListener=()=>{this._domNode.removeEventListener(e,o,t),delete this._domListeners[e]},o}});class Zc{constructor(e){this.view=e,this.document=e.document,this.isEnabled=!1}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}destroy(){this.disable(),this.stopListening()}}f(Zc,Yc);Le.prototype.add=Le.prototype.push=function(e){return this.__data__.set(e,'__lodash_hash_undefined__'),this},Le.prototype.has=function(e){return this.__data__.has(e)};var eu=Le,tu=function(e,t){for(var o=-1,n=e.length;++o<n;)if(t(e[o],o,e))return!0;return!1},ou=function(e,t,o,n,i,r){var a=i&2,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var d=r.get(e);if(d)return d==t;var c=-1,u=!0,m=i&1?new eu:void 0;for(r.set(e,t);++c<s;){var p=e[c],g=t[c];if(n)var f=a?n(g,p,c,t,e,r):n(p,g,c,e,t,r);if(void 0!==f){if(f)continue;u=!1;break}if(m){if(!tu(t,function(e,t){if(!m.has(t)&&(p===e||o(p,e,n,i,r)))return m.add(t)})){u=!1;break}}else if(!(p===g||o(p,g,n,i,r))){u=!1;break}}return r['delete'](e),u},nu=md?md.prototype:void 0,iu=nu?nu.valueOf:void 0,ru=function(e,t,o,n,i,r,a){switch(o){case'[object DataView]':if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case'[object ArrayBuffer]':return!!(e.byteLength==t.byteLength&&n(new Zl(e),new Zl(t)));case'[object Boolean]':case'[object Date]':return+e==+t;case'[object Error]':return e.name==t.name&&e.message==t.message;case'[object Number]':return e==+e?e==+t:t!=+t;case'[object RegExp]':case'[object String]':return e==t+'';case'[object Map]':var s=id;case'[object Set]':var l=r&2;if(s||(s=dd),e.size!=t.size&&!l)return!1;var d=a.get(e);return d?d==t:(r|=1,a.set(e,t),ou(s(e),s(t),n,i,r,a));case'[object Symbol]':if(iu)return iu.call(e)==iu.call(t);}return!1},au=2,su={};su['[object Float32Array]']=su['[object Float64Array]']=su['[object Int8Array]']=su['[object Int16Array]']=su['[object Int32Array]']=su['[object Uint8Array]']=su['[object Uint8ClampedArray]']=su['[object Uint16Array]']=su['[object Uint32Array]']=!0,su['[object Arguments]']=su['[object Array]']=su['[object ArrayBuffer]']=su['[object Boolean]']=su['[object DataView]']=su['[object Date]']=su['[object Error]']=su['[object Function]']=su['[object Map]']=su['[object Number]']=su['[object Object]']=su['[object RegExp]']=su['[object Set]']=su['[object String]']=su['[object WeakMap]']=!1;var lu=Object.prototype,du=lu.toString,cu=function(e){return Ua(e)&&el(e.length)&&!!su[du.call(e)]},uu='[object Arguments]',mu='[object Array]',pu='[object Object]',gu=Object.prototype,fu=gu.hasOwnProperty,hu=function(e,t,o,n,i,r){var a=dl(e),s=dl(t),l=mu,d=mu;a||(l=$l(e),l=l==uu?pu:l),s||(d=$l(t),d=d==uu?pu:d);var c=l==pu&&!Wa(e),u=d==pu&&!Wa(t),m=l==d;if(m&&!c)return r||(r=new zs),a||cu(e)?ou(e,t,o,n,i,r):ru(e,t,l,o,n,i,r);if(!(i&2)){var p=c&&fu.call(e,'__wrapped__'),g=u&&fu.call(t,'__wrapped__');if(p||g){var f=p?e.value():e,h=g?t.value():t;return r||(r=new zs),o(f,h,n,i,r)}}return!!m&&(r||(r=new zs),ze(e,t,o,n,i,r))},bu=je,ku=function(e,t,o){o='function'==typeof o?o:void 0;var n=o?o(e,t):void 0;return n===void 0?bu(e,t,o):!!n};class _u extends Zc{constructor(e){super(e),this._config={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=[],this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.push(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){function t(e,t){if(!Array.isArray(e))return e===t||!!(e.is('text')&&t.is('text'))&&e.data===t.data}if(0===e.length)return;const o=this.domConverter,n=new Map,i=new Set;for(const t of e)if('childList'===t.type){const e=o.mapDomToView(t.target);if(e&&e.is('uiElement'))continue;e&&!this._isBogusBrMutation(t)&&i.add(e)}for(const t of e){const e=o.mapDomToView(t.target);if(!(e&&e.is('uiElement'))&&'characterData'===t.type){const e=o.findCorrespondingViewText(t.target);e&&!i.has(e.parent)?n.set(e,{type:'text',oldText:e.data,newText:ye(t.target),node:e}):!e&&we(t.target)&&i.add(o.mapDomToView(t.target.parentNode))}}const r=[];for(const t of n.values())this.renderer.markToSync('text',t.node),r.push(t);for(const n of i){const e=o.mapViewToDom(n),i=Array.from(n.getChildren()),a=Array.from(o.domChildrenToView(e,{withChildren:!1}));ku(i,a,t)||(this.renderer.markToSync('children',n),r.push({type:'children',oldChildren:i,newChildren:a,node:n}))}const a=e[0].target.ownerDocument.getSelection();let s=null;if(a&&a.anchorNode){const e=o.domPositionToView(a.anchorNode,a.anchorOffset),t=o.domPositionToView(a.focusNode,a.focusOffset);e&&t&&(s=new Ac(e),s.setFocus(t))}this.document.fire('mutations',r,s),this.view.render()}_isBogusBrMutation(e){let t=null;return null===e.nextSibling&&0===e.removedNodes.length&&1==e.addedNodes.length&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is('element','br')}}class wu{constructor(e,t,o){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,mc(this,o)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class vu extends Zc{constructor(e){super(e),this.useCapture=!1}observe(e){const t='string'==typeof this.domEventType?[this.domEventType]:this.domEventType;t.forEach((t)=>{this.listenTo(e,t,(e,t)=>{this.isEnabled&&this.onDomEvent(t)},{useCapture:this.useCapture})})}fire(e,t,o){this.isEnabled&&this.document.fire(e,new wu(this.view,t,o))}}class yu extends vu{constructor(e){super(e),this.domEventType=['keydown','keyup']}onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,get keystroke(){return te(this)}})}}var xu=Date.now,Cu=xu,Au='Expected a function',Tu=Ba,Pu=La,Eu=qe;class Su extends Zc{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Eu((e)=>this.document.fire('selectionChangeDone',e),200)}observe(){const e=this.document;e.on('keydown',(t,o)=>{const n=e.selection;n.isFake&&We(o.keyCode)&&this.isEnabled&&(o.preventDefault(),this._handleSelectionMove(o.keyCode))},{priority:'lowest'})}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,o=new Ac(t.getRanges(),{backward:t.isBackward,fake:!1});(e==Dc.arrowleft||e==Dc.arrowup)&&o.setTo(o.getFirstPosition()),(e==Dc.arrowright||e==Dc.arrowdown)&&o.setTo(o.getLastPosition());const n={oldSelection:t,newSelection:o,domSelection:null};this.document.fire('selectionChange',n),this._fireSelectionChangeDoneDebounced(n)}}const Ou={error(e,t){console.error(n(e),t)},warn(e,t){console.warn(n(e),t)}};var Ru=Ou;class Iu extends Zc{constructor(e){super(e),this.mutationObserver=e.getObserver(_u),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=Eu((e)=>this.document.fire('selectionChangeDone',e),200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._loopbackCounter=0}observe(e){const t=e.ownerDocument;this._documents.has(t)||(this.listenTo(t,'selectionchange',()=>{this._handleSelectionChange(t)}),this._documents.add(t))}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionChange(e){if(this.isEnabled&&(this.document.isFocused||this.document.isReadOnly)){this.mutationObserver.flush();const t=e.defaultView.getSelection(),o=this.domConverter.domSelectionToView(t);if(!(this.selection.isEqual(o)&&this.domConverter.isDomSelectionCorrect(t))){if(60<++this._loopbackCounter)return void Ru.warn('selectionchange-infinite-loop: Selection change observer detected an infinite rendering loop.');if(this.selection.isSimilar(o))this.view.render();else{const e={oldSelection:this.selection,newSelection:o,domSelection:t};this.document.fire('selectionChange',e),this._fireSelectionChangeDoneDebounced(e)}}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class Vu extends vu{constructor(e){super(e),this.domEventType=['focus','blur'],this.useCapture=!0;const t=this.document;t.on('focus',()=>{t.isFocused=!0,this._renderTimeoutId=setTimeout(()=>e.render(),50)}),t.on('blur',(o,n)=>{const i=t.selection.editableElement;(null===i||i===n.target)&&(t.isFocused=!1,e.render())})}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}class Fu extends vu{constructor(e){super(e),this.domEventType=['compositionstart','compositionupdate','compositionend'];const t=this.document;t.on('compositionstart',()=>{t.isComposing=!0}),t.on('compositionend',()=>{t.isComposing=!1})}onDomEvent(e){this.fire(e.type,e)}}var Nu=function(e){return!!e&&1===e.nodeType&&Ua(e)&&!Qa(e)};class Mu{constructor(e){const t=Ue(e);if(Object.defineProperty(this,'_source',{value:e._source||e,writable:!0,enumerable:!1}),Nu(e)||t){const o=t?e.startContainer:e;o.ownerDocument&&o.ownerDocument.body.contains(o)||Ru.warn('rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',{source:e}),t?Ke(this,Mu.getDomRangeRects(e)[0]):Ke(this,e.getBoundingClientRect())}else if(De(e)){const{innerWidth:t,innerHeight:o}=e;Ke(this,{top:0,right:t,bottom:o,left:0,width:t,height:o})}else Ke(this,e)}clone(){return new Mu(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Ba(this.top,e.top),right:La(this.right,e.right),bottom:La(this.bottom,e.bottom),left:Ba(this.left,e.left)};return t.width=t.right-t.left,t.height=t.bottom-t.top,0>t.width||0>t.height?null:new Mu(t)}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(!Ge(e))for(let o=e.parentNode||e.commonAncestorContainer;o&&!Ge(o);){const e=new Mu(o),n=t.getIntersection(e);if(n)n.getArea()<t.getArea()&&(t=n);else return null;o=o.parentNode}return t}isEqual(e){for(const t of Du)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}excludeScrollbarsAndBorders(){const e=this._source;let t,o;if(De(e))t=e.innerWidth-e.document.documentElement.clientWidth,o=e.innerHeight-e.document.documentElement.clientHeight;else{const n=He(this._source);t=e.offsetWidth-e.clientWidth,o=e.offsetHeight-e.clientHeight,this.moveBy(n.left,n.top)}return this.width-=t,this.right-=t,this.height-=o,this.bottom-=o,this}static getDomRangeRects(e){const t=[],o=Array.from(e.getClientRects());if(o.length)for(const e of o)t.push(new Mu(e));else{let o=e.startContainer;Se(o)&&(o=o.parentNode);const n=new Mu(o.getBoundingClientRect());n.right=n.left,n.width=0,t.push(n)}return t}}const Du=['top','right','bottom','left','width','height'];Object.assign({},{scrollViewportToShowTarget:$e,scrollAncestorsToShowTarget:function(e){const t=nt(e);Qe(t,()=>new Mu(e))}});class Bu{constructor(){this.document=new Ec,this.domConverter=new Jc,this._renderer=new Gc(this.domConverter,this.document.selection),this._renderer.bind('isFocused').to(this.document),this.domRoots=new Map,this._observers=new Map,this._ongoingChange=!1,this._renderingInProgress=!1,this._postFixersInProgress=!1,this._writer=new zc(this.document),this.addObserver(_u),this.addObserver(Iu),this.addObserver(Vu),this.addObserver(yu),this.addObserver(Su),this.addObserver(Fu),Ce(this),re(this),this.on('render',()=>{this._render()})}attachDomRoot(e,t='main'){const o=this.document.getRoot(t);o._name=e.tagName.toLowerCase(),this.domRoots.set(t,e),this.domConverter.bindElements(e,o),this._renderer.markToSync('children',o),this._renderer.domDocuments.add(e.ownerDocument),o.on('change:children',(e,t)=>this._renderer.markToSync('children',t)),o.on('change:attributes',(e,t)=>this._renderer.markToSync('attributes',t)),o.on('change:text',(e,t)=>this._renderer.markToSync('text',t));for(const o of this._observers.values())o.observe(e,t)}getDomRoot(e='main'){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[o,n]of this.domRoots)t.observe(n,o);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection(){const e=this.document.selection.getFirstRange();e&&$e({target:this.domConverter.viewRangeToDom(e),viewportOffset:20})}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e?(this.domConverter.focus(e),this.render()):Ru.warn('view-focus-no-selection: There is no selection in any editable to focus.')}}change(e){if(this._renderingInProgress||this._postFixersInProgress)throw new Za('cannot-change-view-tree: Attempting to make changes to the view when it is in incorrect state: rendering or post fixers are in progress. This may cause some unexpected behaviour and inconsistency between the DOM and the view.');return this._ongoingChange?void e(this._writer):void(this._ongoingChange=!0,e(this._writer),this._ongoingChange=!1,this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire('render'))}render(){this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.stopListening()}_render(){this._renderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this._renderingInProgress=!1}}f(Bu,bc);class Lu{constructor(e){this.parent=null,this._attrs=rt(e)}get index(){let e;if(!this.parent)return null;if(null===(e=this.parent.getChildIndex(this)))throw new Za('model-node-not-found-in-parent: The node\'s parent does not contain this node.');return e}get startOffset(){let e;if(!this.parent)return null;if(null===(e=this.parent.getChildStartOffset(this)))throw new Za('model-node-not-found-in-parent: The node\'s parent does not contain this node.');return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return null!==e&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return null!==e&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get document(){return this.root==this?null:this.root.document||null}getPath(){const e=[];for(let t=this;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];for(let o=e.includeSelf?this:this.parent;o;)t[e.parentFirst?'push':'unshift'](o),o=o.parent;return t}getCommonAncestor(e,t={}){const o=this.getAncestors(t),n=e.getAncestors(t);let r=0;for(;o[r]==n[r]&&o[r];)r++;return 0==r?null:o[r-1]}isBefore(e){if(this==e)return!1;if(this.root!==e.root)return!1;const t=this.getPath(),o=e.getPath(),n=A(t,o);return!('prefix'!==n)||'extension'!==n&&t[n]<o[n]}isAfter(e){return this!=e&&!(this.root!==e.root)&&!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=[...this._attrs]),e}_clone(){return new Lu(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=rt(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}is(e){return'node'==e}}class zu extends Lu{constructor(e,t){super(t),this._data=e||''}get offsetSize(){return this.data.length}get data(){return this._data}is(e){return'text'==e||super.is(e)}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new zu(this.data,this.getAttributes())}static fromJSON(e){return new zu(e.data,e.attributes)}}class ju{constructor(e,t,o){if(this.textNode=e,0>t||t>e.offsetSize)throw new Za('model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.');if(0>o||t+o>e.offsetSize)throw new Za('model-textproxy-wrong-length: Given length value is incorrect.');this.data=e.data.substring(t,t+o),this.offsetInText=t}get startOffset(){return null===this.textNode.startOffset?null:this.textNode.startOffset+this.offsetInText}get offsetSize(){return this.data.length}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}is(e){return'textProxy'==e}getPath(){const e=this.textNode.getPath();return 0<e.length&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={includeSelf:!1,parentFirst:!1}){const t=[];for(let o=e.includeSelf?this:this.parent;o;)t[e.parentFirst?'push':'unshift'](o),o=o.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}class qu{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,t)=>e+t.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const t=this._nodes.indexOf(e);return-1==t?null:t}getNodeStartOffset(e){const t=this.getNodeIndex(e);return null===t?null:this._nodes.slice(0,t).reduce((e,t)=>e+t.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new Za('model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.');return this.getNodeStartOffset(t)}offsetToIndex(e){let t=0;for(const o of this._nodes){if(e>=t&&e<t+o.offsetSize)return this.getNodeIndex(o);t+=o.offsetSize}if(t!=e)throw new Za('model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.');return this.length}_insertNodes(e,t){for(const o of t)if(!(o instanceof Lu))throw new Za('model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.');this._nodes.splice(e,0,...t)}_removeNodes(e,t=1){return this._nodes.splice(e,t)}toJSON(){return this._nodes.map((e)=>e.toJSON())}}class Wu extends Lu{constructor(e,t,o){super(t),this.name=e,this._children=new qu,o&&this._insertChild(0,o)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}is(e,t=null){return t?'element'==e&&t==this.name:'element'==e||e==this.name||super.is(e)}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const o of e)t=t.getChild(t.offsetToIndex(o));return t}toJSON(){const e=super.toJSON();if(e.name=this.name,0<this._children.length){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?Array.from(this._children).map((e)=>e._clone(!0)):null;return new Wu(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const o=at(t);for(const n of o)null!==n.parent&&n._remove(),n.parent=this;this._children._insertNodes(e,o)}_removeChildren(e,t=1){const o=this._children._removeNodes(e,t);for(const n of o)n.parent=null;return o}static fromJSON(e){let t=null;if(e.children){t=[];for(const o of e.children)o.name?t.push(Wu.fromJSON(o)):t.push(zu.fromJSON(o))}return new Wu(e.name,e.attributes,t)}}class Uu{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new Za('model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.');const t=e.direction||'forward';if('forward'!=t&&'backward'!=t)throw new Za('model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.',{direction:t});this.direction=t,this.boundaries=e.boundaries||null,this.position=e.startPosition?Ku.createFromPosition(e.startPosition):Ku.createFromPosition(this.boundaries['backward'==this.direction?'end':'start']),this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}skip(e){let t,o,n,i;do n=this.position,i=this._visitedParent,({done:t,value:o}=this.next());while(!t&&e(o));t||(this.position=n,this._visitedParent=i)}next(){return'forward'==this.direction?this._next():this._previous()}_next(){const e=this.position,t=Ku.createFromPosition(this.position),o=this._visitedParent;if(null===o.parent&&t.offset===o.maxOffset)return{done:!0};if(o===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0};const n=t.textNode?t.textNode:t.nodeAfter;if(n instanceof Wu)return this.shallow?t.offset++:(t.path.push(0),this._visitedParent=n),this.position=t,st('elementStart',n,e,t,1);if(n instanceof zu){let i;if(this.singleCharacters)i=1;else{let e=n.endOffset;this._boundaryEndParent==o&&this.boundaries.end.offset<e&&(e=this.boundaries.end.offset),i=e-t.offset}const r=t.offset-n.startOffset,a=new ju(n,r,i);return t.offset+=i,this.position=t,st('text',a,e,t,i)}return t.path.pop(),t.offset++,this.position=t,this._visitedParent=o.parent,this.ignoreElementEnd?this._next():st('elementEnd',o,e,t)}_previous(){const e=this.position,t=Ku.createFromPosition(this.position),o=this._visitedParent;if(null===o.parent&&0===t.offset)return{done:!0};if(o==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0};const n=t.textNode?t.textNode:t.nodeBefore;if(n instanceof Wu)return t.offset--,this.shallow?(this.position=t,st('elementStart',n,e,t,1)):(t.path.push(n.maxOffset),this.position=t,this._visitedParent=n,this.ignoreElementEnd?this._previous():st('elementEnd',n,e,t));if(n instanceof zu){let i;if(this.singleCharacters)i=1;else{let e=n.startOffset;this._boundaryStartParent==o&&this.boundaries.start.offset>e&&(e=this.boundaries.start.offset),i=t.offset-e}const r=t.offset-n.startOffset,a=new ju(n,r-i,i);return t.offset-=i,this.position=t,st('text',a,e,t,i)}return t.path.pop(),this.position=t,this._visitedParent=o.parent,st('elementStart',o,e,t,1)}}var Hu=function(e){var t=e?e.length:0;return t?e[t-1]:void 0};class Ku{constructor(e,t){if(!e.is('element')&&!e.is('documentFragment'))throw new Za('model-position-root-invalid: Position root invalid.');if(!(t instanceof Array)||0===t.length)throw new Za('model-position-path-incorrect: Position path must be an array with at least one item.',{path:t});t=e.getPath().concat(t),e=e.root,this.root=e,this.path=t}get offset(){return Hu(this.path)}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)e=e.getChild(e.offsetToIndex(this.path[t]));return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){const e=this.parent.getChild(this.index);return e instanceof zu&&e.startOffset<this.offset?e:null}get nodeAfter(){return null===this.textNode?this.parent.getChild(this.index):null}get nodeBefore(){return null===this.textNode?this.parent.getChild(this.index-1):null}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return'different';const t=A(this.path,e.path);return'same'===t?'same':'prefix'===t?'before':'extension'===t?'after':this.path[t]<e.path[t]?'before':'after'}getLastMatchingPosition(e,t={}){t.startPosition=this;const o=new Uu(t);return o.skip(e),o.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){return this.parent.is('documentFragment')?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonPath(e){if(this.root!=e.root)return[];const t=A(this.path,e.path),o='string'==typeof t?La(this.path.length,e.path.length):t;return this.path.slice(0,o)}getCommonAncestor(e){const t=this.getAncestors(),o=e.getAncestors();let n=0;for(;t[n]==o[n]&&t[n];)n++;return 0==n?null:t[n-1]}getShiftedBy(e){const t=Ku.createFromPosition(this),o=t.offset+e;return t.offset=0>o?0:o,t}isAfter(e){return'after'==this.compareWith(e)}isBefore(e){return'before'==this.compareWith(e)}isEqual(e){return'same'==this.compareWith(e)}isTouching(e){let t=null,o=null;const n=this.compareWith(e);switch(n){case'same':return!0;case'before':t=Ku.createFromPosition(this),o=Ku.createFromPosition(e);break;case'after':t=Ku.createFromPosition(e),o=Ku.createFromPosition(this);break;default:return!1;}for(let n=t.parent;t.path.length+o.path.length;){if(t.isEqual(o))return!0;if(t.path.length>o.path.length){if(t.offset!==n.maxOffset)return!1;t.path=t.path.slice(0,-1),n=n.parent,t.offset++}else{if(0!==o.offset)return!1;o.path=o.path.slice(0,-1)}}}_getTransformedByDeletion(e,t){const o=Ku.createFromPosition(this);if(this.root!=e.root)return o;if('same'==A(e.getParentPath(),this.getParentPath())){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;o.offset-=t}}else if('prefix'==A(e.getParentPath(),this.getParentPath())){const n=e.path.length-1;if(e.offset<=this.path[n]){if(e.offset+t>this.path[n])return null;o.path[n]-=t}}return o}_getTransformedByInsertion(e,t,o){const n=Ku.createFromPosition(this);if(this.root!=e.root)return n;if('same'==A(e.getParentPath(),this.getParentPath()))(e.offset<this.offset||e.offset==this.offset&&o)&&(n.offset+=t);else if('prefix'==A(e.getParentPath(),this.getParentPath())){const o=e.path.length-1;e.offset<=this.path[o]&&(n.path[o]+=t)}return n}_getTransformedByMove(e,t,o,n,i){let r=this._getTransformedByDeletion(e,o);return t=t._getTransformedByDeletion(e,o),r=null===r||i&&r.isEqual(e)?this._getCombined(e,t):r._getTransformedByInsertion(t,o,n),r}_getCombined(e,t){const o=e.path.length-1,n=Ku.createFromPosition(t);return n.offset=n.offset+this.path[o]-e.offset,n.path=n.path.concat(this.path.slice(o+1)),n}static createAt(e,t){if(e instanceof Ku)return this.createFromPosition(e);else{const o=e;if('end'==t)t=o.maxOffset;else{if('before'==t)return this.createBefore(o);if('after'==t)return this.createAfter(o);t||(t=0)}return this.createFromParentAndOffset(o,t)}}static createAfter(e){if(!e.parent)throw new Za('model-position-after-root: You cannot make a position after root.',{root:e});return this.createFromParentAndOffset(e.parent,e.endOffset)}static createBefore(e){if(!e.parent)throw new Za('model-position-before-root: You cannot make a position before root.',{root:e});return this.createFromParentAndOffset(e.parent,e.startOffset)}static createFromParentAndOffset(e,t){if(!e.is('element')&&!e.is('documentFragment'))throw new Za('model-position-parent-incorrect: Position parent have to be a element or document fragment.');const o=e.getPath();return o.push(t),new this(e.root,o)}static createFromPosition(e){return new this(e.root,e.path.slice())}static fromJSON(e,t){if('$graveyard'===e.root)return new Ku(t.graveyard,e.path);if(!t.getRoot(e.root))throw new Za('model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.',{rootName:e.root});return new Ku(t.getRoot(e.root),e.path)}}class Gu{constructor(e,t=null){this.start=Ku.createFromPosition(e),this.end=t?Ku.createFromPosition(t):Ku.createFromPosition(e)}*[Symbol.iterator](){yield*new Uu({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const o=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return o&&n}containsItem(e){const t=Ku.createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Gu(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Gu(e.end,this.end))):t.push(Gu.createFromRange(this)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,o=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(o=e.end),new Gu(t,o)}return null}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,o=Ku.createFromPosition(this.start);for(let n=o.parent;o.path.length>t+1;){const t=n.maxOffset-o.offset;0!=t&&e.push(new Gu(o,o.getShiftedBy(t))),o.path=o.path.slice(0,-1),o.offset++,n=n.parent}for(;o.path.length<=this.end.path.length;){const t=this.end.path[o.path.length-1],n=t-o.offset;0!=n&&e.push(new Gu(o,o.getShiftedBy(n))),o.offset=t,o.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Uu(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new Uu(e);for(const o of t)yield o.item}*getPositions(e={}){e.boundaries=this;const t=new Uu(e);yield t.position;for(const o of t)yield o.nextPosition}getTransformedByDelta(e){const t=[Gu.createFromRange(this)],o=new Set(['insert','move','remove','reinsert']);for(const n of e.operations)if(o.has(n.type))for(let o=0;o<t.length;o++){let i;i='insert'==n.type?t[o]._getTransformedByDocumentChange(n.type,e.type,n.position,n.nodes.maxOffset):t[o]._getTransformedByDocumentChange(n.type,e.type,n.targetPosition,n.howMany,n.sourcePosition),t.splice(o,1,...i),o+=i.length-1}return t}getTransformedByDeltas(e){const t=[Gu.createFromRange(this)];for(const o of e)for(let e=0;e<t.length;e++){const n=t[e].getTransformedByDelta(o);t.splice(e,1,...n),e+=n.length-1}for(let o=0;o<t.length;o++){const e=t[o];for(let n=o+1;n<t.length;n++){const o=t[n];(e.containsRange(o)||o.containsRange(e)||e.isEqual(o))&&t.splice(n,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}_getTransformedByDocumentChange(e,t,o,n,i){if('insert'==e)return this._getTransformedByInsertion(o,n,!1,!1);else{const e=Gu.createFromPositionAndShift(i,n);if('merge'==t&&this.isCollapsed&&(this.start.isEqual(e.start)||this.start.isEqual(e.end))){const t=this.start.offset-e.start.offset;return[new Gu(o.getShiftedBy(t))]}if('split'==t&&this.isCollapsed&&this.end.isEqual(e.end))return[new Gu(o.getShiftedBy(n))];if((e.containsPosition(this.start)||e.start.isEqual(this.start))&&this.containsPosition(e.end)&&this.end.isAfter(o)){const e=this.start._getCombined(i,o._getTransformedByDeletion(i,n)),t=this.end._getTransformedByMove(i,o,n,!1,!1);return[new Gu(e,t)]}if((e.containsPosition(this.end)||e.end.isEqual(this.end))&&this.containsPosition(e.start)&&this.start.isBefore(o)){const e=this.start._getTransformedByMove(i,o,n,!0,!1),t=this.end._getCombined(i,o._getTransformedByDeletion(i,n));return[new Gu(e,t)]}return this._getTransformedByMove(i,o,n)}}_getTransformedByInsertion(e,t,o=!1,n=!1){if(o&&this.containsPosition(e))return[new Gu(this.start,e),new Gu(e._getTransformedByInsertion(e,t,!0),this.end._getTransformedByInsertion(e,t,this.isCollapsed))];else{const o=Gu.createFromRange(this),i=!!o.isCollapsed||n;return o.start=o.start._getTransformedByInsertion(e,t,!n),o.end=o.end._getTransformedByInsertion(e,t,i),[o]}}_getTransformedByMove(e,t,o){if(this.isCollapsed){const n=this.start._getTransformedByMove(e,t,o,!0,!1);return[new Gu(n)]}let n;const i=new Gu(e,e.getShiftedBy(o)),r=this.getDifference(i);let a=null;const s=this.getIntersection(i);1==r.length?a=new Gu(r[0].start._getTransformedByDeletion(e,o),r[0].end._getTransformedByDeletion(e,o)):2==r.length&&(a=new Gu(this.start,this.end._getTransformedByDeletion(e,o)));const l=t._getTransformedByDeletion(e,o);return n=a?a._getTransformedByInsertion(l,o,null!==s):[],s&&n.push(new Gu(s.start._getCombined(i.start,l),s.end._getCombined(i.start,l))),n}static createFromPositionAndShift(e,t){const o=e,n=e.getShiftedBy(t);return 0<t?new this(o,n):new this(n,o)}static createFromParentsAndOffsets(e,t,o,n){return new this(Ku.createFromParentAndOffset(e,t),Ku.createFromParentAndOffset(o,n))}static createFromRange(e){return new this(e.start,e.end)}static createIn(e){return this.createFromParentsAndOffsets(e,0,e,e.maxOffset)}static createOn(e){return this.createFromPositionAndShift(Ku.createBefore(e),e.offsetSize)}static createCollapsedAt(e,t){const o=Ku.createAt(e,t),n=Ku.createFromPosition(o);return new Gu(o,n)}static createFromRanges(e){if(0===e.length)throw new Za('range-create-from-ranges-empty-array: At least one range has to be passed.');else if(1==e.length)return this.createFromRange(e[0]);const t=e[0];e.sort((e,t)=>e.start.isAfter(t.start)?1:-1);const o=e.indexOf(t),n=new this(t.start,t.end);for(let t=o-1;0<=t&&e[t].end.isEqual(n.start);t++)n.start=Ku.createFromPosition(e[t].start);for(let t=o+1;t<e.length&&e[t].start.isEqual(n.end);t++)n.end=Ku.createFromPosition(e[t].end);return n}static fromJSON(e,t){return new this(Ku.fromJSON(e.start,t),Ku.fromJSON(e.end,t))}}class $u{constructor(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this.on('modelToViewPosition',(e,t)=>{if(!t.viewPosition){const e=this._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=this._findPositionIn(e,t.modelPosition.offset)}},{priority:'low'}),this.on('viewToModelPosition',(e,t)=>{if(t.modelPosition)return;let o=t.viewPosition.parent,n=this._viewToModelMapping.get(o);for(;!n;)o=o.parent,n=this._viewToModelMapping.get(o);const i=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,o);t.modelPosition=Ku.createFromParentAndOffset(n,i)},{priority:'low'})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e){const t=this.toModelElement(e);this._viewToModelMapping.delete(e),this._modelToViewMapping.get(t)==e&&this._modelToViewMapping.delete(t)}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){const o=this._markerNameToElements.get(t)||new Set;o.add(e),this._markerNameToElements.set(t,o)}unbindElementsFromMarkerName(e){this._markerNameToElements.delete(e)}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Gu(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Cc(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire('viewToModelPosition',t),t.modelPosition}toViewPosition(e,t={isPhantom:!1}){const o={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire('modelToViewPosition',o),o.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const o=new Set;for(const n of t)if(n.is('attributeElement'))for(const e of n.getElementsWithSameId())o.add(e);else o.add(n);return o}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}_toModelOffset(e,t,o){if(o!=e){const n=this._toModelOffset(e.parent,e.index,o),i=this._toModelOffset(e,t,e);return n+i}if(e.is('text'))return t;let n=0;for(let r=0;r<t;r++)n+=this.getModelLength(e.getChild(r));return n}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name)){const t=this._viewToModelLengthCallbacks.get(e.name);return t(e)}if(this._viewToModelMapping.has(e))return 1;if(e.is('text'))return e.data.length;if(e.is('uiElement'))return 0;else{let t=0;for(const o of e.getChildren())t+=this.getModelLength(o);return t}}_findPositionIn(e,t){let o=0,n=0,i=0,r;if(e.is('text'))return new xc(e,t);for(;n<t;)r=e.getChild(i),o=this.getModelLength(r),n+=o,i++;return n==t?this._moveViewPositionToTextNode(new xc(e,i)):this._findPositionIn(r,t-(n-o))}_moveViewPositionToTextNode(e){const t=e.nodeBefore,o=e.nodeAfter;if(t instanceof Od)return new xc(t,t.data.length);return o instanceof Od?new xc(o,0):e}}f($u,ss);class Ju{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,t){t=lt(t),e instanceof ju&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=lt(t),e instanceof ju&&(e=this._getSymbolForTextProxy(e)),!!this.test(e,t)&&(this._consumable.get(e).set(t,!1),!0)}test(e,t){t=lt(t),e instanceof ju&&(e=this._getSymbolForTextProxy(e));const o=this._consumable.get(e);if(o===void 0)return null;const n=o.get(t);return void 0===n?null:n}revert(e,t){t=lt(t),e instanceof ju&&(e=this._getSymbolForTextProxy(e));const o=this.test(e,t);return!1===o?(this._consumable.get(e).set(t,!0),!0):!0!==o&&null}_getSymbolForTextProxy(e){let t=null;const o=this._textProxyRegistry.get(e.startOffset);if(o){const n=o.get(e.endOffset);n&&(t=n.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent)),t}_addSymbolForTextProxy(e,t,o){const n=Symbol('textProxySymbol');let i,r;return i=this._textProxyRegistry.get(e),i||(i=new Map,this._textProxyRegistry.set(e,i)),r=i.get(t),r||(r=new Map,i.set(t,r)),r.set(o,n),n}}class Qu{constructor(e={}){this.conversionApi=mc({dispatcher:this},e)}convertChanges(e,t){for(const o of e.getMarkersToRemove())this.convertMarkerRemove(o.name,o.range,t);for(const o of e.getChanges())'insert'==o.type?this.convertInsert(Gu.createFromPositionAndShift(o.position,o.length),t):'remove'==o.type?this.convertRemove(o.position,o.length,o.name,t):this.convertAttribute(o.range,o.attributeKey,o.attributeOldValue,o.attributeNewValue,t);for(const o of e.getMarkersToAdd())this.convertMarkerAdd(o.name,o.range,t)}convertInsert(e,t){this.conversionApi.writer=t,this.conversionApi.consumable=this._createInsertConsumable(e);for(const o of e){const e=o.item,t=Gu.createFromPositionAndShift(o.previousPosition,o.length),n={item:e,range:t};this._testAndFire('insert',n);for(const t of e.getAttributeKeys())n.attributeKey=t,n.attributeOldValue=null,n.attributeNewValue=e.getAttribute(t),this._testAndFire(`attribute:${t}`,n)}this._clearConversionApi()}convertRemove(e,t,o,n){this.conversionApi.writer=n,this.fire('remove:'+o,{position:e,length:t},this.conversionApi),this._clearConversionApi()}convertAttribute(e,t,o,n,i){this.conversionApi.writer=i,this.conversionApi.consumable=this._createConsumableForRange(e,`attribute:${t}`);for(const r of e){const e=r.item,i=Gu.createFromPositionAndShift(r.previousPosition,r.length);this._testAndFire(`attribute:${t}`,{item:e,range:i,attributeKey:t,attributeOldValue:o,attributeNewValue:n})}this._clearConversionApi()}convertSelection(e,t,o){const n=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this.conversionApi.writer=o,this.conversionApi.consumable=this._createSelectionConsumable(e,n),this.fire('selection',{selection:e},this.conversionApi),!!e.isCollapsed){for(const t of n){const o=t.getRange();if(!dt(e.getFirstPosition(),t,this.conversionApi.mapper))continue;const n={item:e,markerName:t.name,markerRange:o};this.conversionApi.consumable.test(e,'addMarker:'+t.name)&&this.fire('addMarker:'+t.name,n,this.conversionApi)}for(const t of e.getAttributeKeys()){const o={item:e,range:e.getFirstRange(),attributeKey:t,attributeOldValue:null,attributeNewValue:e.getAttribute(t)};this.conversionApi.consumable.test(e,'attribute:'+o.attributeKey)&&this.fire('attribute:'+o.attributeKey,o,this.conversionApi)}this._clearConversionApi()}}convertMarkerAdd(e,t,o){if(t.root.document&&'$graveyard'!=t.root.rootName){this.conversionApi.writer=o;const n='addMarker:'+e;if(t.isCollapsed){const o=new Ju;return o.add(t,n),this.conversionApi.consumable=o,void this.fire(n,{markerName:e,markerRange:t},this.conversionApi)}this.conversionApi.consumable=this._createConsumableForRange(t,n);for(const o of t.getItems()){if(!this.conversionApi.consumable.test(o,n))continue;const i={item:o,range:Gu.createOn(o),markerName:e,markerRange:t};this.fire(n,i,this.conversionApi)}this._clearConversionApi()}}convertMarkerRemove(e,t,o){t.root.document&&'$graveyard'!=t.root.rootName&&(this.conversionApi.writer=o,this.fire('removeMarker:'+e,{markerName:e,markerRange:t},this.conversionApi),this._clearConversionApi())}_createInsertConsumable(e){const t=new Ju;for(const o of e){const e=o.item;t.add(e,'insert');for(const o of e.getAttributeKeys())t.add(e,'attribute:'+o)}return t}_createConsumableForRange(e,t){const o=new Ju;for(const n of e.getItems())o.add(n,t);return o}_createSelectionConsumable(e,t){const o=new Ju;o.add(e,'selection');for(const n of t)o.add(e,'addMarker:'+n.name);for(const n of e.getAttributeKeys())o.add(e,'attribute:'+n);return o}_testAndFire(e,t){if(this.conversionApi.consumable.test(t.item,e)){const o=t.item.name||'$text';this.fire(e+':'+o,t,this.conversionApi)}}_clearConversionApi(){delete this.conversionApi.writer,delete this.conversionApi.consumable}}f(Qu,ss);class Yu{constructor(e,t,o){this._lastRangeBackward=!1,this._ranges=[],this._attrs=new Map,e&&this.setTo(e,t,o)}get anchor(){if(0<this._ranges.length){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(0<this._ranges.length){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){const e=this._ranges.length;return!(1!==e)&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let o=!1;for(const n of e._ranges)if(t.isEqual(n)){o=!0;break}if(!o)return!1}return!0}*getRanges(){for(const e of this._ranges)yield Gu.createFromRange(e)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?Gu.createFromRange(e):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?Gu.createFromRange(e):null}getFirstPosition(){const e=this.getFirstRange();return e?Ku.createFromPosition(e.start):null}getLastPosition(){const e=this.getLastRange();return e?Ku.createFromPosition(e.end):null}setTo(e,t,o){if(null===e)this._setRanges([]);else if(e instanceof Yu)this._setRanges(e.getRanges(),e.isBackward);else if(e&&'function'==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Gu)this._setRanges([e],!!t&&!!t.backward);else if(e instanceof Ku)this._setRanges([new Gu(e)]);else if(e instanceof Lu){const n=!!o&&!!o.backward;let i;if('in'==t)i=Gu.createIn(e);else if('on'==t)i=Gu.createOn(e);else if(t!==void 0)i=Gu.createCollapsedAt(e,t);else throw new Za('model-selection-setTo-required-second-parameter: selection.setTo requires the second parameter when the first parameter is a node.');this._setRanges([i],n)}else if(P(e))this._setRanges(e,t&&!!t.backward);else throw new Za('model-selection-setTo-not-selectable: Cannot set selection to given place.')}_setRanges(e,t=!1){e=Array.from(e);const o=e.some((e)=>{if(!(e instanceof Gu))throw new Za('model-selection-added-not-range: Trying to add an object that is not an instance of Range.');return this._ranges.every((t)=>!t.isEqual(e))});if(e.length!==this._ranges.length||o){this._removeAllRanges();for(const t of e)this._pushRange(t);this._lastRangeBackward=!!t,this.fire('change:range',{directChange:!0})}}setFocus(e,t){if(null===this.anchor)throw new Za('model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.');const o=Ku.createAt(e,t);if('same'!=o.compareWith(this.focus)){const e=this.anchor;this._ranges.length&&this._popRange(),'before'==o.compareWith(e)?(this._pushRange(new Gu(o,e)),this._lastRangeBackward=!0):(this._pushRange(new Gu(e,o)),this._lastRangeBackward=!1),this.fire('change:range',{directChange:!0})}}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire('change:attribute',{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire('change:attribute',{attributeKeys:[e],directChange:!0}))}getSelectedElement(){if(1!==this.rangeCount)return null;const e=this.getFirstRange(),t=e.start.nodeAfter,o=e.end.nodeBefore;return t instanceof Wu&&t==o?t:null}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const o=ut(t.start,e);o&&(yield o);for(const o of t.getWalker())'elementEnd'==o.type&&ct(o.item,e)&&(yield o.item);const n=ut(t.end,e);n&&!t.end.isTouching(Ku.createAt(n))&&(yield n)}}containsEntireContent(e=this.anchor.root){const t=Ku.createAt(e),o=Ku.createAt(e,'end');return t.isTouching(this.getFirstPosition())&&o.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(Gu.createFromRange(e))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new Za('model-selection-range-intersects: Trying to add a range that intersects with another range from selection.',{addedRange:e,intersectingRange:this._ranges[t]})}_removeAllRanges(){for(;0<this._ranges.length;)this._popRange()}_popRange(){this._ranges.pop()}}f(Yu,ss);class Xu extends Gu{constructor(e,t){super(e,t),mt.call(this)}detach(){this.stopListening()}}f(Xu,ss);const Zu='selection:';class em{constructor(e){this._selection=new tm(e),this._selection.delegate('change:range').to(this),this._selection.delegate('change:attribute').to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(e,t,o){this._selection.setTo(e,t,o)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection._getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Zu+e}static _isStoreAttributeKey(e){return e.startsWith(Zu)}}f(em,ss);class tm extends Yu{constructor(e){super(),this._model=e.model,this._document=e,this._attributePriority=new Map,this._fixGraveyardRangesData=[],this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this.on('change:range',()=>{for(const e of this.getRanges())if(!this._document._validateSelectionRange(e))throw new Za('document-selection-wrong-position: Range from document selection starts or ends at incorrect position.',{range:e})}),this.listenTo(this._document,'change',(e,t)=>{this._updateAttributes(!1),ft(this._model,t)}),this.listenTo(this._model,'applyOperation',()=>{for(;this._fixGraveyardRangesData.length;){const{liveRange:e,sourcePosition:t}=this._fixGraveyardRangesData.shift();this._fixGraveyardSelection(e,t)}this._hasChangedRange&&(this._hasChangedRange=!1,this.fire('change:range',{directChange:!1}))},{priority:'lowest'})}get isCollapsed(){const e=this._ranges.length;return 0===e?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return 0<this._ranges.length}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(e,t,o){super.setTo(e,t,o),this._refreshAttributes()}setFocus(e,t){super.setFocus(e,t),this._refreshAttributes()}setAttribute(e,t){if(this._setAttribute(e,t)){this.fire('change:attribute',{attributeKeys:[e],directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){this.fire('change:attribute',{attributeKeys:[e],directChange:!0})}}overrideGravity(){const e=i();return this._overriddenGravityRegister.add(e),1===this._overriddenGravityRegister.size&&this._refreshAttributes(),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new Za('document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.',{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._refreshAttributes()}_refreshAttributes(){this._updateAttributes(!0)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return void Ru.warn('model-selection-range-in-graveyard: Trying to add a Range that is in the graveyard root. Range rejected.');const t=Xu.createFromRange(e);return t.on('change:range',(e,o,n)=>{this._hasChangedRange=!0,t.root==this._document.graveyard&&this._fixGraveyardRangesData.push({liveRange:t,sourcePosition:n.sourcePosition})}),t}_updateAttributes(e){const t=rt(this._getSurroundingAttributes()),o=rt(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[e,t]of this._attributePriority)'low'==t&&(this._attrs.delete(e),this._attributePriority.delete(e));this._setAttributesTo(t);const n=[];for(const[t,i]of this.getAttributes())o.has(t)&&o.get(t)===i||n.push(t);for(const[t]of o)this.hasAttribute(t)||n.push(t);0<n.length&&this.fire('change:attribute',{attributeKeys:n,directChange:!1})}_setAttribute(e,t,o=!0){const n=o?'normal':'low';if('low'==n&&'normal'==this._attributePriority.get(e))return!1;const i=super.getAttribute(e);return i!==t&&(this._attrs.set(e,t),this._attributePriority.set(e,n),!0)}_removeAttribute(e,t=!0){const o=t?'normal':'low';return('low'!=o||'normal'!=this._attributePriority.get(e))&&(this._attributePriority.set(e,o),!!super.hasAttribute(e))&&(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[t,o]of this.getAttributes())e.get(t)!==o&&this._removeAttribute(t,!1);for(const[o,n]of e){const e=this._setAttribute(o,n,!1);e&&t.add(o)}return t}*_getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())if(t.startsWith(Zu)){const o=t.substr(Zu.length);yield[o,e.getAttribute(t)]}}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;let o=null;if(!this.isCollapsed){const e=this.getFirstRange();for(const n of e){if(n.item.is('element')&&t.isObject(n.item))break;'text'==n.type&&null===o&&(o=n.item.getAttributes())}}else{const t=e.textNode?e.textNode:e.nodeBefore,n=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(o=gt(t)),o||(o=gt(n)),!this.isGravityOverridden&&!o)for(let e=t;e&&!o;)e=e.previousSibling,o=gt(e);if(!o)for(let e=n;e&&!o;)e=e.nextSibling,o=gt(e);o||(o=this._getStoredAttributes())}return o}_fixGraveyardSelection(e,t){const o=Ku.createFromPosition(t),n=this._model.schema.getNearestSelectionRange(o),i=this._ranges.indexOf(e);if(this._ranges.splice(i,1),e.detach(),n){const e=this._prepareRange(n);this._ranges.splice(i,0,e)}}}var om=function(e){return Pd(e,!0,!0)};class nm{constructor(e){this.model=e,this.view=new Bu,this.mapper=new $u,this.downcastDispatcher=new Qu({mapper:this.mapper});const t=this.model.document,o=t.selection,n=this.model.markers;this.listenTo(t,'change',()=>{this.view.change((e)=>{this.downcastDispatcher.convertChanges(t.differ,e),this.downcastDispatcher.convertSelection(o,n,e)})},{priority:'low'}),this.listenTo(this.view.document,'selectionChange',Et(this.model,this.mapper)),this.downcastDispatcher.on('insert:$text',Ct(),{priority:'lowest'}),this.downcastDispatcher.on('remove',At(),{priority:'low'}),this.downcastDispatcher.on('selection',Rt(),{priority:'low'}),this.downcastDispatcher.on('selection',St(),{priority:'low'}),this.downcastDispatcher.on('selection',Ot(),{priority:'low'}),this.view.document.roots.bindTo(this.model.document.roots).using((e)=>{if('$graveyard'==e.rootName)return null;const t=new vc(e.name);return t.rootName=e.rootName,t._document=this.view.document,this.mapper.bindElements(e,t),t})}destroy(){this.view.destroy(),this.stopListening()}}f(nm,bc);class im{constructor(e,t=[]){this._editor=e,this._availablePlugins=new Map,this._plugins=new Map;for(const o of t)this._availablePlugins.set(o,o),o.pluginName&&this._availablePlugins.set(o.pluginName,o)}*[Symbol.iterator](){for(const e of this._plugins)'function'==typeof e[0]&&(yield e)}get(e){return this._plugins.get(e)}load(e,t=[]){function o(e){return u.includes(e)||a.get(e)||l.has(e)?void 0:n(e).catch((t)=>{throw Ru.error('plugincollection-load: It was not possible to load the plugin.',{plugin:e}),t})}function n(e){return new Promise((n)=>{l.add(e),e.requires&&e.requires.forEach((n)=>{const r=i(n);if(t.includes(r))throw new Za('plugincollection-required: Cannot load a plugin because one of its dependencies is listed inthe `removePlugins` option.',{plugin:r,requiredBy:e});o(r)});const r=new e(s);a._add(e,r),d.push(r),n()})}function i(e){return'function'==typeof e?e:a._availablePlugins.get(e)}function r(e){return e.map((e)=>i(e)).filter((e)=>!!e)}const a=this,s=this._editor,l=new Set,d=[],c=r(e),u=r(t),m=function(e){const t=[];for(const o of e)i(o)||t.push(o);return t.length?t:null}(e);if(m){const e='plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.';return Ru.error(e,{plugins:m}),Promise.reject(new Za(e,{plugins:m}))}return Promise.all(c.map(o)).then(()=>d)}destroy(){const e=Array.from(this).map(([,e])=>e).filter((e)=>'function'==typeof e.destroy).map((e)=>e.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const o=e.pluginName;o&&(this._plugins.has(o)?Ru.warn('plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.',{pluginName:o,plugin1:this._plugins.get(o).constructor,plugin2:e}):this._plugins.set(o,t))}}class rm{constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const o=this.get(e);if(!o)throw new Za('commandcollection-command-not-found: Command does not exist.',{commandName:e});o.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={});class am{constructor(e){this.language=e||'en',this.t=(...e)=>this._t(...e)}_t(e,t){let o=It(this.language,e);return t&&(o=o.replace(/%(\d+)/g,(e,o)=>o<t.length?t[o]:e)),o}}class sm{constructor(){this._consumables=new Map}add(e,t){let o;return e.is('text')||e.is('documentFragment')?void this._consumables.set(e,!0):void(this._consumables.has(e)?o=this._consumables.get(e):(o=new lm,this._consumables.set(e,o)),o.add(t))}test(e,t){const o=this._consumables.get(e);return void 0===o?null:e.is('text')||e.is('documentFragment')?o:o.test(t)}consume(e,t){return!!this.test(e,t)&&(e.is('text')||e.is('documentFragment')?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0)}revert(e,t){const o=this._consumables.get(e);o!==void 0&&(e.is('text')||e.is('documentFragment')?this._consumables.set(e,!0):o.revert(t))}static consumablesFromElement(e){const t={name:!0,attributes:[],classes:[],styles:[]},o=e.getAttributeKeys();for(const n of o)'style'!=n&&'class'!=n&&t.attributes.push(n);const n=e.getClassNames();for(const o of n)t.classes.push(o);const i=e.getStyleNames();for(const o of i)t.styles.push(o);return t}static createFrom(e,t){if(t||(t=new sm),e.is('text'))return t.add(e),t;e.is('element')&&t.add(e,sm.consumablesFromElement(e)),e.is('documentFragment')&&t.add(e);for(const o of e.getChildren())t=sm.createFrom(o,t);return t}}class lm{constructor(){this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){for(const t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const t in this._consumables)if(t in e){const o=this._test(t,e[t]);if(!0!==o)return o}return!0}consume(e){for(const t in e.name&&(this._canConsumeName=!1),this._consumables)t in e&&this._consume(t,e[t])}revert(e){for(const t in e.name&&(this._canConsumeName=!0),this._consumables)t in e&&this._revert(t,e[t])}_add(e,t){const o=dl(t)?t:[t],n=this._consumables[e];for(const i of o){if('attributes'===e&&('class'===i||'style'===i))throw new Za('viewconsumable-invalid-attribute: Classes and styles should be handled separately.');n.set(i,!0)}}_test(e,t){const o=dl(t)?t:[t],n=this._consumables[e];for(const i of o)if('attributes'===e&&('class'===i||'style'===i)){const e='class'==i?'classes':'styles',t=this._test(e,[...this._consumables[e].keys()]);if(!0!==t)return t}else{const e=n.get(i);if(e===void 0)return null;if(!e)return!1}return!0}_consume(e,t){const o=dl(t)?t:[t],n=this._consumables[e];for(const i of o)if('attributes'===e&&('class'===i||'style'===i)){const e='class'==i?'classes':'styles';this._consume(e,[...this._consumables[e].keys()])}else n.set(i,!1)}_revert(e,t){const o=dl(t)?t:[t],n=this._consumables[e];for(const i of o)if('attributes'===e&&('class'===i||'style'===i)){const e='class'==i?'classes':'styles';this._revert(e,[...this._consumables[e].keys()])}else{const e=n.get(i);!1===e&&n.set(i,!0)}}}class dm{constructor(){this._sourceDefinitions={},this.decorate('checkChild'),this.decorate('checkAttribute'),this.on('checkAttribute',(e,t)=>{t[0]=new cm(t[0])},{priority:'highest'}),this.on('checkChild',(e,t)=>{t[0]=new cm(t[0]),t[1]=this.getDefinition(t[1])},{priority:'highest'})}register(e,t){if(this._sourceDefinitions[e])throw new Za('schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.',{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new Za('schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.',{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return t='string'==typeof e?e:e.is&&(e.is('text')||e.is('textProxy'))?'$text':e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return!!(t&&t.isLimit)}isObject(e){const t=this.getDefinition(e);return!!(t&&t.isObject)}checkChild(e,t){return!!t&&this._checkContextMatch(t,e)}checkAttribute(e,t){const o=this.getDefinition(e.last);return!!o&&o.allowAttributes.includes(t)}checkMerge(e,t=null){if(e instanceof Ku){const t=e.nodeBefore,o=e.nodeAfter;if(!(t instanceof Wu))throw new Za('schema-check-merge-no-element-before: The node before the merge position must be an element.');if(!(o instanceof Wu))throw new Za('schema-check-merge-no-element-after: The node after the merge position must be an element.');return this.checkMerge(t,o)}for(const o of t.getChildren())if(!this.checkChild(e,o))return!1;return!0}addChildCheck(e){this.on('checkChild',(t,[o,n])=>{if(n){const i=e(o,n);'boolean'==typeof i&&(t.stop(),t.return=i)}},{priority:'high'})}addAttributeCheck(e){this.on('checkAttribute',(t,[o,n])=>{const i=e(o,n);'boolean'==typeof i&&(t.stop(),t.return=i)},{priority:'high'})}getLimitElement(e){let t=Array.from(e.getRanges()).reduce((e,t)=>{const o=t.getCommonAncestor();return e?e.getCommonAncestor(o,{includeSelf:!0}):o},null);for(;!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed)return this.checkAttribute([...e.getFirstPosition().getAncestors(),'$text'],t);else{const o=e.getRanges();for(const e of o)for(const o of e)if(this.checkAttribute(o.item,t))return!0}return!1}getValidRanges(e,t){const o=[];for(const n of e){let e=n.start,i=n.start;const r=n.end;for(const r of n.getWalker())this.checkAttribute(r.item,t)||(!i.isEqual(e)&&o.push(new Gu(i,e)),i=r.nextPosition),e=r.nextPosition;i&&!i.isEqual(r)&&o.push(new Gu(i,r))}return o}getNearestSelectionRange(e,t='both'){if(this.checkChild(e,'$text'))return new Gu(e);let o,n;('both'==t||'backward'==t)&&(o=new Uu({startPosition:e,direction:'backward'})),('both'==t||'forward'==t)&&(n=new Uu({startPosition:e}));for(const i of $t(o,n)){const e=i.walker==o?'elementEnd':'elementStart',t=i.value;if(t.type==e&&this.isObject(t.item))return Gu.createOn(t.item);if(this.checkChild(t.nextPosition,'$text'))return new Gu(t.nextPosition)}return null}findAllowedParent(e,t){for(let o=t.parent;o;){if(this.checkChild(o,e))return o;if(this.isLimit(o)||this.isObject(o))return null;o=o.parent}return null}removeDisallowedAttributes(e,t){for(const o of e){for(const e of o.getAttributeKeys())this.checkAttribute(o,e)||t.removeAttribute(e,o);o.is('element')&&this.removeDisallowedAttributes(o.getChildren(),t)}}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,o=Object.keys(t);for(const n of o)e[n]=Nt(t[n],n);for(const t of o)Mt(e,t);for(const t of o)Dt(e,t);for(const t of o)Bt(e,t),Lt(e,t);for(const t of o)zt(e,t),jt(e,t);this._compiledDefinitions=e}_checkContextMatch(e,t,o=t.length-1){const n=t.getItem(o);if(!e.allowIn.includes(n.name))return!1;else if(0==o)return!0;else{const e=this.getDefinition(n);return this._checkContextMatch(e,t,o-1)}}}f(dm,bc);class cm{constructor(e){return e instanceof cm?e:void('string'==typeof e?e=[e]:!Array.isArray(e)&&(e=e.getAncestors({includeSelf:!0})),e[0]&&'string'!=typeof e[0]&&e[0].is('documentFragment')&&e.shift(),this._items=e.map(Gt))}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new cm([e]);return t._items=[...this._items,...t._items],t}getItem(e){return this._items[e]}*getNames(){yield*this._items.map((e)=>e.name)}endsWith(e){return Array.from(this.getNames()).join(' ').endsWith(e)}}class um{constructor(e={}){this._removeIfEmpty=new Set,this._modelCursor=null,this.conversionApi=Object.assign({},e),this.conversionApi.convertItem=this._convertItem.bind(this),this.conversionApi.convertChildren=this._convertChildren.bind(this),this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this)}convert(e,t,o=['$root']){this.fire('viewCleanup',e),this._modelCursor=Qt(o,t),this.conversionApi.writer=t,this.conversionApi.consumable=sm.createFrom(e),this.conversionApi.store={};const{modelRange:n}=this._convertItem(e,this._modelCursor),i=t.createDocumentFragment();if(n){this._removeEmptyElements();for(const e of Array.from(this._modelCursor.parent.getChildren()))t.append(e,i);i.markers=Jt(i,t)}return this._modelCursor=null,this._removeIfEmpty.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,i}_convertItem(e,t){const o=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is('element')?this.fire('element:'+e.name,o,this.conversionApi):e.is('text')?this.fire('text',o,this.conversionApi):this.fire('documentFragment',o,this.conversionApi),o.modelRange&&!(o.modelRange instanceof Gu))throw new Za('view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.');return{modelRange:o.modelRange,modelCursor:o.modelCursor}}_convertChildren(e,t){const o=new Gu(t);let n=t;for(const i of Array.from(e.getChildren())){const e=this._convertItem(i,n);e.modelRange instanceof Gu&&(o.end=e.modelRange.end,n=e.modelCursor)}return{modelRange:o,modelCursor:n}}_splitToAllowedParent(e,t){const o=this.conversionApi.schema.findAllowedParent(e,t);if(!o)return null;if(o===t.parent)return{position:t};if(this._modelCursor.parent.getAncestors().includes(o))return null;const n=this.conversionApi.writer.split(t,o);for(const o of n.range.getPositions())o.isEqual(n.position)||this._removeIfEmpty.add(o.parent);return{position:n.position,cursorParent:n.range.end.parent}}_removeEmptyElements(){let e=!1;for(const t of this._removeIfEmpty)t.isEmpty&&(this.conversionApi.writer.remove(t),this._removeIfEmpty.delete(t),e=!0);e&&this._removeEmptyElements()}}f(um,ss);class mm{constructor(e,t){this.model=e,this.processor=t,this.mapper=new $u,this.downcastDispatcher=new Qu({mapper:this.mapper}),this.downcastDispatcher.on('insert:$text',Ct(),{priority:'lowest'}),this.upcastDispatcher=new um({schema:e.schema}),this.upcastDispatcher.on('text',co(),{priority:'lowest'}),this.upcastDispatcher.on('element',lo(),{priority:'lowest'}),this.upcastDispatcher.on('documentFragment',lo(),{priority:'lowest'}),this.decorate('init')}get(e='main'){return this.stringify(this.model.document.getRoot(e))}stringify(e){const t=this.toView(e);return this.processor.toData(t)}toView(e){const t=Gu.createIn(e),o=new Lc,n=new zc(new Ec());if(this.mapper.bindElements(e,o),this.downcastDispatcher.convertInsert(t,n),!e.is('documentFragment')){const t=uo(e);for(const[e,o]of t)this.downcastDispatcher.convertMarkerAdd(e,o,n)}return this.mapper.clearBindings(),o}init(e,t='main'){if(this.model.document.version)throw new Za('datacontroller-init-document-not-empty: Trying to set initial data to not empty document.');const o=this.model.document.getRoot(t);return this.model.enqueueChange('transparent',(t)=>{t.insert(this.parse(e,o),o)}),Promise.resolve()}set(e,t='main'){const o=this.model.document.getRoot(t);this.model.enqueueChange('transparent',(t)=>{t.setSelection(null),t.removeSelectionAttribute(this.model.document.selection.getAttributeKeys()),t.remove(Gu.createIn(o)),t.insert(this.parse(e,o),o)})}parse(e,t='$root'){const o=this.processor.toView(e);return this.toModel(o,t)}toModel(e,t='$root'){return this.model.change((o)=>this.upcastDispatcher.convert(e,o,t))}destroy(){}}f(mm,bc);class pm{constructor(){this._dispatchersGroups=new Map}register(e,t){if(this._dispatchersGroups.has(e))throw new Za('conversion-register-group-exists: Trying to register a group name that was already registered.');this._dispatchersGroups.set(e,t)}for(e){const t=this._getDispatchers(e);return{add(e){return mo(t,e),this}}}elementToElement(e){this.for('downcast').add(ht(e));for(const{model:t,view:o}of po(e))this.for('upcast').add(Yt({model:t,view:o,priority:e.priority}))}attributeToElement(e){this.for('downcast').add(bt(e));for(const{model:t,view:o}of po(e))this.for('upcast').add(Xt({view:o,model:t,priority:e.priority}))}attributeToAttribute(e){this.for('downcast').add(kt(e));for(const{model:t,view:o}of po(e))this.for('upcast').add(Zt({view:o,model:t}))}_getDispatchers(e){const t=this._dispatchersGroups.get(e);if(!t)throw new Za('conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.');return t}}class gm{constructor(e){this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion}_validate(){}toJSON(){const e=Ed(this,!0);return e.__className=this.constructor.className,delete e.delta,delete e.isDocumentOperation,e}static get className(){return'engine.model.operation.Operation'}static fromJSON(e){return new this(e.baseVersion)}}class fm{constructor(e){this.markers=new Map,this._children=new qu,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}is(e){return'documentFragment'==e}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const o of e)t=t.getChild(t.offsetToIndex(o));return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const o of e)o.name?t.push(Wu.fromJSON(o)):t.push(zu.fromJSON(o));return new fm(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const o=fo(t);for(const n of o)null!==n.parent&&n._remove(),n.parent=this;this._children._insertNodes(e,o)}_removeChildren(e,t=1){const o=this._children._removeNodes(e,t);for(const n of o)n.parent=null;return o}}var hm=function(e,t){return bu(e,t)};class bm extends gm{constructor(e,t,o,n,i){super(i),this.range=Gu.createFromRange(e),this.key=t,this.oldValue=o===void 0?null:o,this.newValue=n===void 0?null:n}get type(){return null===this.oldValue?'addAttribute':null===this.newValue?'removeAttribute':'changeAttribute'}clone(){return new bm(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new bm(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){for(const e of this.range.getItems()){if(null!==this.oldValue&&!hm(e.getAttribute(this.key),this.oldValue))throw new Za('attribute-operation-wrong-old-value: Changed node has different attribute value than operation\'s old attribute value.',{item:e,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&e.hasAttribute(this.key))throw new Za('attribute-operation-attribute-exists: The attribute with given key already exists.',{node:e,key:this.key})}}_execute(){hm(this.oldValue,this.newValue)||_o(this.range,this.key,this.newValue)}static get className(){return'engine.model.operation.AttributeOperation'}static fromJSON(e,t){return new bm(Gu.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class km extends gm{constructor(e,t,o,n){super(n),this.sourcePosition=Ku.createFromPosition(e),this.howMany=t,this.targetPosition=Ku.createFromPosition(o),this.isSticky=!1}get type(){return'move'}clone(){const e=new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);return e.isSticky=this.isSticky,e}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany),t=new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1);return t.isSticky=this.isSticky,t}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,o=this.sourcePosition.offset,n=this.targetPosition.offset;if(!e||!t)throw new Za('move-operation-position-invalid: Source position or target position is invalid.');else if(o+this.howMany>e.maxOffset)throw new Za('move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.');else if(e===t&&o<n&&n<o+this.howMany)throw new Za('move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.');else if(this.sourcePosition.root==this.targetPosition.root&&'prefix'==A(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const e=this.sourcePosition.path.length-1;if(this.targetPosition.path[e]>=o&&this.targetPosition.path[e]<o+this.howMany)throw new Za('move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.')}}_execute(){ko(Gu.createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}static get className(){return'engine.model.operation.MoveOperation'}static fromJSON(e,t){const o=Ku.fromJSON(e.sourcePosition,t),n=Ku.fromJSON(e.targetPosition,t),i=new this(o,e.howMany,n,e.baseVersion);return e.isSticky&&(i.isSticky=!0),i}}class _m extends km{get position(){return this.targetPosition}set position(e){this.targetPosition=e}get type(){return'reinsert'}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new wm(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){if(super._validate(),!this.sourcePosition.root.document)throw new Za('reinsert-operation-on-detached-item: Cannot reinsert detached item.');if(!this.targetPosition.root.document)throw new Za('reinsert-operation-to-detached-parent: Cannot reinsert item to detached parent.')}static get className(){return'engine.model.operation.ReinsertOperation'}}class wm extends km{get type(){return'remove'}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new _m(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){if(super._validate(),!this.sourcePosition.root.document)throw new Za('remove-operation-on-detached-item: Cannot remove detached item.')}static get className(){return'engine.model.operation.RemoveOperation'}}class vm extends gm{constructor(e,t,o){super(o),this.position=Ku.createFromPosition(e),this.nodes=new qu(wo(t))}get type(){return'insert'}clone(){const e=new qu([...this.nodes].map((e)=>e._clone(!0)));return new vm(this.position,e,this.baseVersion)}getReversed(){const e=this.position.root.document.graveyard,t=new Ku(e,[0]);return new wm(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new Za('insert-operation-position-invalid: Insertion position is invalid.')}_execute(){const e=this.nodes;this.nodes=new qu([...e].map((e)=>e._clone(!0))),ho(this.position,e)}static get className(){return'engine.model.operation.InsertOperation'}static fromJSON(e,t){const o=[];for(const n of e.nodes)n.name?o.push(Wu.fromJSON(n)):o.push(zu.fromJSON(n));return new vm(Ku.fromJSON(e.position,t),o,e.baseVersion)}}class ym extends gm{constructor(e,t,o,n,i){super(i),this.name=e,this.oldRange=t?Gu.createFromRange(t):null,this.newRange=o?Gu.createFromRange(o):null,this._markers=n}get type(){return'marker'}clone(){return new ym(this.name,this.oldRange,this.newRange,this._markers,this.baseVersion)}getReversed(){return new ym(this.name,this.newRange,this.oldRange,this._markers,this.baseVersion+1)}_execute(){const e=this.newRange?'_set':'_remove';this._markers[e](this.name,this.newRange,!0)}toJSON(){const e=super.toJSON();return delete e._markers,e}static get className(){return'engine.model.operation.MarkerOperation'}static fromJSON(e,t){return new ym(e.name,e.oldRange?Gu.fromJSON(e.oldRange,t):null,e.newRange?Gu.fromJSON(e.newRange,t):null,t.model.markers,e.baseVersion)}}class xm extends gm{get type(){return'noop'}clone(){return new xm(this.baseVersion)}getReversed(){return new xm(this.baseVersion+1)}_execute(){}static get className(){return'engine.model.operation.NoOperation'}}class Cm extends gm{constructor(e,t,o,n){super(n),this.position=e,this.oldName=t,this.newName=o}get type(){return'rename'}clone(){return new Cm(Ku.createFromPosition(this.position),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Cm(Ku.createFromPosition(this.position),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(!(e instanceof Wu))throw new Za('rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.');else if(e.name!==this.oldName)throw new Za('rename-operation-wrong-name: Element to change has different name than operation\'s old name.')}_execute(){const e=this.position.nodeAfter;e.name=this.newName}static get className(){return'engine.model.operation.RenameOperation'}static fromJSON(e,t){return new Cm(Ku.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class Am extends gm{constructor(e,t,o,n,i){super(i),this.root=e,this.key=t,this.oldValue=o,this.newValue=n}get type(){return null===this.oldValue?'addRootAttribute':null===this.newValue?'removeRootAttribute':'changeRootAttribute'}clone(){return new Am(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Am(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is('documentFragment'))throw new Za('rootattribute-operation-not-a-root: The element to change is not a root element.',{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Za('rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation\'s old attribute value.',{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Za('rootattribute-operation-attribute-exists: The attribute with given key already exists.',{root:this.root,key:this.key})}_execute(){null===this.newValue?this.root._removeAttribute(this.key):this.root._setAttribute(this.key,this.newValue)}static get className(){return'engine.model.operation.RootAttributeOperation'}static fromJSON(e,t){if(!t.getRoot(e.root))throw new Za('rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.',{rootName:e});return new Am(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}const Tm={};Tm[bm.className]=bm,Tm[vm.className]=vm,Tm[ym.className]=ym,Tm[km.className]=km,Tm[xm.className]=xm,Tm[gm.className]=gm,Tm[_m.className]=_m,Tm[wm.className]=wm,Tm[Cm.className]=Cm,Tm[Am.className]=Am;class Pm{static fromJSON(e,t){return Tm[e.__className].fromJSON(e,t)}}const Em=new Map;class Sm{static fromJSON(e,t){if(!Em.has(e.__className))throw new Za('delta-fromjson-no-deserializer: This delta has no defined deserializer',{name:e.__className});const o=Em.get(e.__className),n=new o;for(const o of e.operations)n.addOperation(Pm.fromJSON(o,t));for(const o in e)'__className'!=o&&void 0===n[o]&&(n[o]=e[o]);return n}static register(e){Em.set(e.className,e)}}class Om{constructor(){this.batch=null,this.operations=[]}get baseVersion(){return 0<this.operations.length?this.operations[0].baseVersion:null}set baseVersion(e){for(const t of this.operations)t.baseVersion=e++}get _reverseDeltaClass(){return Om}addOperation(e){return e.delta=this,this.operations.push(e),e}clone(){const e=new this.constructor;for(const t of this.operations)e.addOperation(t.clone());return e}getReversed(){const e=new this._reverseDeltaClass;for(const t of this.operations)e.addOperation(t.getReversed());e.operations.reverse();for(let t=0;t<e.operations.length;t++)e.operations[t].baseVersion=this.operations[this.operations.length-1].baseVersion+t+1;return e}toJSON(){const e=Ed(this);return e.__className=this.constructor.className,delete e.batch,e}static get className(){return'engine.model.delta.Delta'}}Sm.register(Om);class Rm extends Om{get type(){return'attribute'}get key(){return this.operations[0]?this.operations[0].key:null}get value(){return this.operations[0]?this.operations[0].newValue:null}get range(){if(this._range)return this._range;let e=null,t=null;for(const o of this.operations)o instanceof xm||((null===e||e.isAfter(o.range.start))&&(e=o.range.start),(null===t||t.isBefore(o.range.end))&&(t=o.range.end));return e&&t?(this._range=new Gu(e,t),this._range):null}get _reverseDeltaClass(){return Rm}toJSON(){const e=super.toJSON();return delete e._range,e}static get className(){return'engine.model.delta.AttributeDelta'}}Sm.register(Rm);class Im extends Om{get type(){return'split'}get position(){return this._moveOperation?this._moveOperation.sourcePosition:null}get _cloneOperation(){return this.operations[0]||null}get _moveOperation(){return this.operations[1]&&this.operations[1]instanceof km?this.operations[1]:null}get _reverseDeltaClass(){return Vm}static get className(){return'engine.model.delta.SplitDelta'}}Sm.register(Im);class Vm extends Om{get type(){return'merge'}get position(){return this._removeOperation?this._removeOperation.sourcePosition:null}get _removeOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return Im}static get className(){return'engine.model.delta.MergeDelta'}}Sm.register(Vm);class Fm extends Om{get type(){return'move'}get howMany(){return this._moveOperation?this._moveOperation.howMany:null}get sourcePosition(){return this._moveOperation?this._moveOperation.sourcePosition:null}get targetPosition(){return this._moveOperation?this._moveOperation.targetPosition:null}get _moveOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return Fm}static get className(){return'engine.model.delta.MoveDelta'}}Sm.register(Fm);class Nm extends Fm{static get className(){return'engine.model.delta.RemoveDelta'}}Sm.register(Nm);class Mm extends Om{get type(){return'rename'}get _reverseDeltaClass(){return Mm}static get className(){return'engine.model.delta.RenameDelta'}}Sm.register(Mm);class Dm extends Om{get type(){return'wrap'}get range(){const e=this._moveOperation;return e?Gu.createFromPositionAndShift(e.sourcePosition,e.howMany):null}get howMany(){const e=this.range;return e?e.end.offset-e.start.offset:0}get _insertOperation(){return this.operations[0]||null}get _moveOperation(){return this.operations[1]||null}get _reverseDeltaClass(){return Bm}static get className(){return'engine.model.delta.WrapDelta'}}Sm.register(Dm);class Bm extends Om{get type(){return'unwrap'}get position(){return this._moveOperation?this._moveOperation.targetPosition:null}get _moveOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return Dm}static get className(){return'engine.model.delta.UnwrapDelta'}}Sm.register(Bm);class Lm extends Om{get type(){return'insert'}get position(){return this._insertOperation?this._insertOperation.position:null}get nodes(){return this._insertOperation?this._insertOperation.nodes:null}get _insertOperation(){return this.operations[0]||null}get _reverseDeltaClass(){return Nm}static get className(){return'engine.model.delta.InsertDelta'}}Sm.register(Lm);class zm extends Lm{static get className(){return'engine.model.delta.WeakInsertDelta'}}Sm.register(zm);var jm=function(e,t,o={isStrong:!1}){let n,i;e instanceof vm?n=qm.InsertOperation:e instanceof bm?n=qm.AttributeOperation:e instanceof Am?n=qm.RootAttributeOperation:e instanceof Cm?n=qm.RenameOperation:e instanceof ym?n=qm.MarkerOperation:e instanceof km?n=qm.MoveOperation:i=Co,n&&(t instanceof vm?i=n.InsertOperation:t instanceof bm?i=n.AttributeOperation:t instanceof Am?i=n.RootAttributeOperation:t instanceof Cm?i=n.RenameOperation:t instanceof ym?i=n.MarkerOperation:t instanceof km?i=n.MoveOperation:i=Co);const r=i(e,t,o);return Ao(e.baseVersion,r)};const qm={InsertOperation:{InsertOperation(e,t,o){const n=e.clone(),i=void 0===o.insertBefore?!o.isStrong:o.insertBefore;return n.position=n.position._getTransformedByInsertion(t.position,t.nodes.maxOffset,i),[n]},AttributeOperation:Co,RootAttributeOperation:Co,RenameOperation:Co,MarkerOperation:Co,MoveOperation(e,t,o){const n=e.clone(),i=void 0===o.insertBefore?!o.isStrong:o.insertBefore;return n.position=e.position._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,i,t.isSticky&&!o.forceNotSticky),[n]}},AttributeOperation:{InsertOperation(e,t){const o=e.range._getTransformedByInsertion(t.position,t.nodes.maxOffset,!0,!1);return o.reverse().map((t)=>new bm(t,e.key,e.oldValue,e.newValue,e.baseVersion))},AttributeOperation(e,t,o){if(e.key===t.key){const n=e.range.getDifference(t.range).map((t)=>new bm(t,e.key,e.oldValue,e.newValue,e.baseVersion)),i=e.range.getIntersection(t.range);return i&&(o.isStrong?n.push(new bm(i,t.key,t.newValue,e.newValue,e.baseVersion)):0===n.length&&n.push(new xm(0))),n}return[e.clone()]},RootAttributeOperation:Co,RenameOperation:Co,MarkerOperation:Co,MoveOperation(e,t){const o=Gu.createFromPositionAndShift(t.sourcePosition,t.howMany);let n=[];const i=Po(e.range.getDifference(o)),r=e.range.getIntersection(o);return null!==i&&(i.start=i.start._getTransformedByDeletion(t.sourcePosition,t.howMany),i.end=i.end._getTransformedByDeletion(t.sourcePosition,t.howMany),n=i._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,!0,!1).reverse()),null!==r&&(r.start=r.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),r.end=r.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.push(r)),n.map((t)=>new bm(t,e.key,e.oldValue,e.newValue,e.baseVersion))}},RootAttributeOperation:{InsertOperation:Co,AttributeOperation:Co,RootAttributeOperation(e,t,o){return e.root!==t.root||e.key!==t.key||(e.newValue===t.newValue||o.isStrong)&&e.newValue!==t.newValue?[e.clone()]:[new xm(e.baseVersion)]},RenameOperation:Co,MarkerOperation:Co,MoveOperation:Co},RenameOperation:{InsertOperation(e,t){const o=e.clone();return o.position=o.position._getTransformedByInsertion(t.position,t.nodes.maxOffset,!0),[o]},AttributeOperation:Co,RootAttributeOperation:Co,RenameOperation(e,t,o){const n=e.clone();if(e.position.isEqual(t.position))if(o.isStrong)n.oldName=t.newName;else return[new xm(e.baseVersion)];return[n]},MarkerOperation:Co,MoveOperation(e,t){const o=e.clone(),n=o.position.isEqual(t.sourcePosition);return o.position=o.position._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!0,n),[o]}},MarkerOperation:{InsertOperation(e,t){const o=e.clone();return o.oldRange&&(o.oldRange=o.oldRange._getTransformedByInsertion(t.position,t.nodes.maxOffset,!1,!1)[0]),o.newRange&&(o.newRange=o.newRange._getTransformedByInsertion(t.position,t.nodes.maxOffset,!1,!1)[0]),[o]},AttributeOperation:Co,RootAttributeOperation:Co,RenameOperation:Co,MarkerOperation(e,t,o){const n=e.clone();if(e.name==t.name)if(o.isStrong)n.oldRange=t.newRange;else return[new xm(e.baseVersion)];return[n]},MoveOperation(e,t){const o=e.clone();if(o.oldRange){const e=o.oldRange._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);o.oldRange=Gu.createFromRanges(e)}if(o.newRange){const e=o.newRange._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);o.newRange=Gu.createFromRanges(e)}return[o]}},MoveOperation:{InsertOperation(e,t,o){let n=Gu.createFromPositionAndShift(e.sourcePosition,e.howMany);const i=e.isSticky&&!o.forceNotSticky;n=n._getTransformedByInsertion(t.position,t.nodes.maxOffset,!1,i)[0];const r=void 0===o.insertBefore?!o.isStrong:o.insertBefore,a=new e.constructor(n.start,n.end.offset-n.start.offset,e.targetPosition._getTransformedByInsertion(t.position,t.nodes.maxOffset,r),e.baseVersion);return a.isSticky=e.isSticky,[a]},AttributeOperation:Co,RootAttributeOperation:Co,RenameOperation:Co,MarkerOperation:Co,MoveOperation(e,t,o){const n=Gu.createFromPositionAndShift(e.sourcePosition,e.howMany),i=Gu.createFromPositionAndShift(t.sourcePosition,t.howMany);let r=o.isStrong;const a=e.isSticky&&!o.forceNotSticky,s=void 0===o.insertBefore?!r:o.insertBefore,l=e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,s,t.isSticky&&!o.forceNotSticky);if(To(e,t)&&To(t,e))return[t.getReversed()];const d=n.containsPosition(t.targetPosition)||n.start.isEqual(t.targetPosition)&&a||n.end.isEqual(t.targetPosition)&&a;if(d&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!a),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,a),Eo([n],l,e);const c=i.containsPosition(e.targetPosition)||i.start.isEqual(e.targetPosition)&&t.isSticky&&!o.forceNotSticky||i.end.isEqual(e.targetPosition)&&t.isSticky&&!o.forceNotSticky;if(c&&i.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),Eo([n],l,e);const u=A(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if('prefix'==u||'extension'==u)return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!a),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,a),Eo([n],l,e);o.forceWeakRemove||(e instanceof wm&&!(t instanceof wm)?r=!0:!(e instanceof wm)&&t instanceof wm&&(r=!1));const m=[],p=n.getDifference(i);for(const n of p){n.start=n.start._getTransformedByDeletion(t.sourcePosition,t.howMany),n.end=n.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const e='same'==A(n.start.getParentPath(),t.getMovedRangeStart().getParentPath()),o=n._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,e,a);m.push(...o)}const g=n.getIntersection(i);return null!==g&&r&&!d&&(g.start=g.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),g.end=g.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),0===m.length?m.push(g):1==m.length?i.start.isBefore(n.start)||i.start.isEqual(n.start)?m.unshift(g):m.push(g):m.splice(1,0,g)),0===m.length?[new xm(e.baseVersion)]:Eo(m,l,e)}}};var ot=function(e,t,o){var n=-1,i=e.length;0>t&&(t=-t>i?0:i+t),o=o>i?i:o,0>o&&(o+=i),i=t>o?0:o-t>>>0,t>>>=0;for(var r=Array(i);++n<i;)r[n]=e[n+t];return r},Wm=Math.ceil,Um=function(e){return dl(e)||sl(e)},Hm=Oo,Km=function(e,t,o){for(var n=e.length,i=t+(o?0:-1);o?i--:++i<n;){var r=e[i];if(r!==r)return i}return-1},Gm=function(e,t,o){if(t!==t)return Km(e,o);for(var n=o-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1},$m=function(e,t){return!!e.length&&-1<Gm(e,t,0)},Jm=function(e,t,o){for(var n=-1,i=e.length;++n<i;)if(o(t,e[n]))return!0;return!1},Qm=function(e,t){for(var o=-1,n=e.length,i=Array(n);++o<n;)i[o]=t(e[o],o,e);return i},Ym=function(e){return function(t){return e(t)}},Xm=function(e,t){return e.has(t)},Zm=function(e,t,o,n){var i=-1,r=$m,a=!0,s=e.length,l=[],d=t.length;if(!s)return l;o&&(t=Qm(t,Ym(o))),n?(r=Jm,a=!1):t.length>=200&&(r=Xm,a=!1,t=new eu(t));outer:for(;++i<s;){var c=e[i],u=o?o(c):c;if(c=n||0!==c?c:0,a&&u===u){for(var m=d;m--;)if(t[m]===u)continue outer;l.push(c)}else r(t,u,n)||l.push(c)}return l},ep=Yd(function(e,t){return ol(e)?Zm(e,Hm(t,1,ol,!0)):[]}),tp=1,op=2,np=function(e){return e===e&&!ps(e)},ip=function(e,t){return Qm(t,function(t){return[t,e[t]]})},rp=function(e){var t=-1,o=Array(e.size);return e.forEach(function(e){o[++t]=[e,e]}),o},ap=function(e){return function(t){var o=$l(t);return o=='[object Map]'?id(t):o=='[object Set]'?rp(t):ip(t,e(t))}}(kl),sp=function(e){for(var t=ap(e),o=t.length;o--;)t[o][2]=np(t[o][1]);return t},lp=function(e,t){return function(o){return null!=o&&o[e]===t&&(t!==void 0||e in Object(o))}},dp=function(e){var t=sp(e);return 1==t.length&&t[0][2]?lp(t[0][0],t[0][1]):function(o){return o===e||Ro(o,e,t)}},cp='Expected a function';Io.Cache=Ls;var up=md?md.prototype:void 0,mp=up?up.toString:void 0,pp=function(e){if('string'==typeof e)return e;if(Ld(e))return mp?mp.call(e):'';var t=e+'';return'0'==t&&1/e==-(1/0)?'-0':t},gp=function(e){return null==e?'':pp(e)},fp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,hp=/\\(\\)?/g,bp=Io(function(e){var t=[];return gp(e).replace(fp,function(e,o,n,i){t.push(n?i.replace(hp,'$1'):o||e)}),t}),kp=function(e){return dl(e)?e:bp(e)},_p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wp=/^\w*$/,vp=Vo,yp=function(e){if('string'==typeof e||Ld(e))return e;var t=e+'';return'0'==t&&1/e==-(1/0)?'-0':t},xp=function(e,t){t=vp(t,e)?[t]:kp(t);for(var o=0,n=t.length;null!=e&&o<n;)e=e[yp(t[o++])];return o&&o==n?e:void 0},Cp=function(e,t,o){var n=null==e?void 0:xp(e,t);return n===void 0?o:n},Ap=function(e,t,o){t=vp(t,e)?[t]:kp(t);for(var n=-1,i=t.length,r;++n<i;){var a=yp(t[n]);if(!(r=null!=e&&o(e,a)))break;e=e[a]}if(r)return r;var i=e?e.length:0;return!!i&&el(i)&&fl(a,i)&&(dl(e)||ml(e)||sl(e))},Tp=function(e,t){return null!=e&&Ap(e,t,Fo)},Pp=function(e,t){return vp(e)&&np(t)?lp(yp(e),t):function(o){var n=Cp(o,e);return n===void 0&&n===t?Tp(o,e):bu(t,n,void 0,1|2)}},Ep=function(e){return e},Sp=function(e){return function(t){return xp(t,e)}},Op=function(e){return vp(e)?Xs(yp(e)):Sp(e)},Rp=function(e){return'function'==typeof e?e:null==e?Ep:'object'==typeof e?dl(e)?Pp(e[0],e[1]):dp(e):Op(e)},Ip=Yd(function(e,t){var o=Hu(t);return ol(o)&&(o=void 0),ol(e)?Zm(e,Hm(t,1,ol,!0),Rp(o)):[]}),Vp=Yd(function(e,t){var o=Hu(t);return ol(o)&&(o=void 0),ol(e)?Zm(e,Hm(t,1,ol,!0),void 0,o):[]}),Fp=function(e,t,o){var n=e?e.length:0;return n?(t=o||void 0===t?1:Jd(t),ot(e,0>t?0:t,n)):[]},Np=function(e,t,o){var n=e?e.length:0;return n?(t=o||void 0===t?1:Jd(t),t=n-t,ot(e,0,0>t?0:t)):[]},Mp=function(e,t,o,n){for(var i=e.length,r=n?i:-1;(n?r--:++r<i)&&t(e[r],r,e););return o?ot(e,n?0:r,n?r+1:i):ot(e,n?r+1:0,n?i:r)},Dp=function(e,t,o){return e===e&&(void 0!==o&&(e=e<=o?e:o),void 0!==t&&(e=e>=t?e:t)),e},Bp=function(e){return e?Dp(Jd(e),0,4294967295):0},Lp=function(e,t,o,n){var i=e.length;for(o=Jd(o),0>o&&(o=-o>i?0:i+o),n=void 0===n||n>i?i:Jd(n),0>n&&(n+=i),n=o>n?0:Bp(n);o<n;)e[o++]=t;return e},zp=function(e,t,o){for(var n=e.length,i=o?n:-1;o?i--:++i<n;)if(t(e[i],i,e))return i;return-1},jp=function(e){return e&&e.length?e[0]:void 0},qp=function(e,t,o){for(var n=o?Jm:$m,i=e[0].length,r=e.length,a=r,s=Array(r),l=Infinity,d=[];a--;){var c=e[a];a&&t&&(c=Qm(c,Ym(t))),l=La(c.length,l),s[a]=!o&&(t||120<=i&&120<=c.length)?new eu(a&&c):void 0}c=e[0];var u=-1,m=s[0];outer:for(;++u<i&&d.length<l;){var p=c[u],g=t?t(p):p;if(p=o||0!==p?p:0,m?!Xm(m,g):!n(d,g,o)){for(a=r;--a;){var f=s[a];if(f?!Xm(f,g):!n(e[a],g,o))continue outer}m&&m.push(g),d.push(p)}}return d},Wp=function(e){return ol(e)?e:[]},Up=Yd(function(e){var t=Qm(e,Wp);return t.length&&t[0]===e[0]?qp(t):[]}),Hp=Yd(function(e){var t=Hu(e),o=Qm(e,Wp);return t===Hu(o)?t=void 0:o.pop(),o.length&&o[0]===e[0]?qp(o,Rp(t)):[]}),Kp=Yd(function(e){var t=Hu(e),o=Qm(e,Wp);return t===Hu(o)?t=void 0:o.pop(),o.length&&o[0]===e[0]?qp(o,void 0,t):[]}),Gp=Array.prototype,$p=Gp.join,Jp=function(e,t){var o=e.length;if(o)return t+=0>t?o:0,fl(t,o)?e[t]:void 0},Qp=function(e,t,o,n){for(var i=o-1,r=e.length;++i<r;)if(n(e[i],t))return i;return-1},Yp=Array.prototype,Xp=Yp.splice,Zp=function(e,t,o,n){var i=n?Qp:Gm,r=-1,a=t.length,s=e;for(o&&(s=Qm(e,Ym(o)));++r<a;)for(var l=0,d=t[r],c=o?o(d):d;-1<(l=i(s,c,l,n));)s!==e&&Xp.call(s,l,1),Xp.call(e,l,1);return e},eg=function(e,t){return e&&e.length&&t&&t.length?Zp(e,t):e},tg=Yd(eg),og=function(e,t){for(var o=-1,n=t.length,i=Array(n);++o<n;)i[o]=null==e?void 0:Cp(e,t[o]);return i},ng=function(e,t){return 1==t.length?e:xp(e,ot(t,0,-1))},ig=Array.prototype,rg=ig.splice,ag=function(e,t){for(var o=e?t.length:0,n=o-1;o--;){var i=t[o];if(o==n||i!==r){var r=i;if(fl(i))rg.call(e,i,1);else if(!vp(i,e)){var a=kp(i),s=ng(e,a);null!=s&&delete s[yp(Hu(a))]}else delete e[yp(i)]}}return e},sg=function(e,t){if(e!==t){var o=e!==void 0,n=null===e,i=e===e,r=Ld(e),a=t!==void 0,s=null===t,l=t===t,d=Ld(t);if(!s&&!d&&!r&&e>t||r&&a&&l&&!s&&!d||n&&a&&l||!o&&l||!i)return 1;if(!n&&!r&&!d&&e<t||d&&o&&i&&!n&&!r||s&&o&&i||!a&&i||!l)return-1}return 0},lg=Yd(function(e,t){t=Hm(t,1);var o=e?e.length:0,n=og(e,t);return ag(e,Qm(t,function(e){return fl(e,o)?+e:e}).sort(sg)),n}),dg=Array.prototype,cg=dg.reverse,ug=function(e,t,o,n){t=o(t);for(var i=0,r=e?e.length:0,a=t!==t,s=null===t,l=Ld(t),d=void 0===t;i<r;){var c=za((i+r)/2),u=o(e[c]),m=u!==void 0,p=null===u,g=u===u,f=Ld(u);if(a)var h=n||g;else h=d?g&&(n||m):s?g&&m&&(n||!p):l?g&&m&&!p&&(n||!f):!(p||f)&&(n?u<=t:u<t);h?i=c+1:r=c}return La(r,4294967295-1)},mg=function(e,t,o){var n=0,i=e?e.length:n;if('number'==typeof t&&t===t&&i<=4294967295>>>1){for(;n<i;){var r=n+i>>>1,a=e[r];null!==a&&!Ld(a)&&(o?a<=t:a<t)?n=r+1:i=r}return i}return ug(e,t,Ep,o)},pg=function(e,t){for(var o=-1,n=e.length,i=0,r=[];++o<n;){var a=e[o],s=t?t(a):a;if(!o||!ls(s,l)){var l=s;r[i++]=0===a?0:a}}return r},gg=Vl&&1/dd(new Vl([,-0]))[1]==1/0?function(e){return new Vl(e)}:function(){},fg=function(e,t,o){var n=-1,i=$m,r=e.length,a=!0,s=[],l=s;if(o)a=!1,i=Jm;else if(r>=200){var d=t?null:gg(e);if(d)return dd(d);a=!1,i=Xm,l=new eu}else l=t?[]:s;outer:for(;++n<r;){var c=e[n],u=t?t(c):c;if(c=o||0!==c?c:0,a&&u===u){for(var m=l.length;m--;)if(l[m]===u)continue outer;t&&l.push(u),s.push(c)}else i(l,u,o)||(l!==s&&l.push(u),s.push(c))}return s},hg=Yd(function(e){return fg(Hm(e,1,ol,!0))}),bg=Yd(function(e){var t=Hu(e);return ol(t)&&(t=void 0),fg(Hm(e,1,ol,!0),Rp(t))}),kg=Yd(function(e){var t=Hu(e);return ol(t)&&(t=void 0),fg(Hm(e,1,ol,!0),void 0,t)}),_g=function(e,t){for(var o=-1,n=e.length,i=0,r=[];++o<n;){var a=e[o];t(a,o,e)&&(r[i++]=a)}return r},wg=function(e){if(!(e&&e.length))return[];var t=0;return e=_g(e,function(e){if(ol(e))return t=Ba(e.length,t),!0}),Ys(t,function(t){return Qm(e,Xs(t))})},vg=function(e,t){if(!(e&&e.length))return[];var o=wg(e);return null==t?o:Qm(o,function(e){return Md(t,void 0,e)})},yg=Yd(function(e,t){return ol(e)?Zm(e,t):[]}),xg=function(e,t,o){for(var n=-1,i=e.length;++n<i;)var r=r?Al(Zm(r,e[n],t,o),Zm(e[n],r,t,o)):e[n];return r&&r.length?fg(r,t,o):[]},Cg=Yd(function(e){return xg(_g(e,ol))}),Ag=Yd(function(e){var t=Hu(e);return ol(t)&&(t=void 0),xg(_g(e,ol),Rp(t))}),Tg=Yd(function(e){var t=Hu(e);return ol(t)&&(t=void 0),xg(_g(e,ol),void 0,t)}),Pg=Yd(wg),Eg=function(e,t,o){for(var n=-1,i=e.length,r=t.length,a={};++n<i;){var s=n<r?t[n]:void 0;o(a,e[n],s)}return a},Sg=function(e,t,o,n){t=vp(t,e)?[t]:kp(t);for(var i=-1,r=t.length,a=e;null!=a&&++i<r;){var s=yp(t[i]);if(ps(a)){var l=o;if(i!=r-1){var d=a[s];l=n?n(d,s,a):void 0,l===void 0&&(l=null==d?fl(t[i+1])?[]:{}:d)}Us(a,s,l)}a=a[s]}return e},Og=Yd(function(e){var t=e.length,o=1<t?e[t-1]:void 0;return o='function'==typeof o?(e.pop(),o):void 0,vg(e,o)}),Rg={chunk:function(e,t,o){t=(o?Nd(e,t,o):void 0===t)?1:Ba(Jd(t),0);var n=e?e.length:0;if(!n||1>t)return[];for(var i=0,r=0,a=Array(Wm(n/t));i<n;)a[r++]=ot(e,i,i+=t);return a},compact:function(e){for(var t=-1,o=e?e.length:0,n=0,i=[];++t<o;){var r=e[t];r&&(i[n++]=r)}return i},concat:function(){for(var e=arguments.length,t=Array(e?e-1:0),o=arguments[0],n=e;n--;)t[n-1]=arguments[n];return e?Al(dl(o)?vl(o):[o],Hm(t,1)):[]},difference:ep,differenceBy:Ip,differenceWith:Vp,drop:Fp,dropRight:Np,dropRightWhile:function(e,t){return e&&e.length?Mp(e,Rp(t,3),!0,!0):[]},dropWhile:function(e,t){return e&&e.length?Mp(e,Rp(t,3),!0):[]},fill:function(e,t,o,n){var i=e?e.length:0;return i?(o&&'number'!=typeof o&&Nd(e,t,o)&&(o=0,n=i),Lp(e,t,o,n)):[]},findIndex:function(e,t){return e&&e.length?zp(e,Rp(t,3)):-1},findLastIndex:function(e,t){return e&&e.length?zp(e,Rp(t,3),!0):-1},first:jp,flatten:function(e){var t=e?e.length:0;return t?Hm(e,1):[]},flattenDeep:function(e){var t=e?e.length:0;return t?Hm(e,1/0):[]},flattenDepth:function(e,t){var o=e?e.length:0;return o?(t=void 0===t?1:Jd(t),Hm(e,t)):[]},fromPairs:function(e){for(var t=-1,o=e?e.length:0,n={};++t<o;){var i=e[t];n[i[0]]=i[1]}return n},head:jp,indexOf:function(e,t,o){var n=e?e.length:0;return n?(o=Jd(o),0>o&&(o=Ba(n+o,0)),Gm(e,t,o)):-1},initial:function(e){return Np(e,1)},intersection:Up,intersectionBy:Hp,intersectionWith:Kp,join:function(e,t){return e?$p.call(e,t):''},last:Hu,lastIndexOf:function(e,t,o){var n=e?e.length:0;if(!n)return-1;var i=n;if(void 0!==o&&(i=Jd(o),i=(0>i?Ba(n+i,0):La(i,n-1))+1),t!==t)return Km(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},nth:function(e,t){return e&&e.length?Jp(e,Jd(t)):void 0},pull:tg,pullAll:eg,pullAllBy:function(e,t,o){return e&&e.length&&t&&t.length?Zp(e,t,Rp(o)):e},pullAllWith:function(e,t,o){return e&&e.length&&t&&t.length?Zp(e,t,void 0,o):e},pullAt:lg,remove:function(e,t){var o=[];if(!(e&&e.length))return o;var n=-1,i=[],r=e.length;for(t=Rp(t,3);++n<r;){var a=e[n];t(a,n,e)&&(o.push(a),i.push(n))}return ag(e,i),o},reverse:function(e){return e?cg.call(e):e},slice:function(e,t,o){var n=e?e.length:0;return n?(o&&'number'!=typeof o&&Nd(e,t,o)?(t=0,o=n):(t=null==t?0:Jd(t),o=void 0===o?n:Jd(o)),ot(e,t,o)):[]},sortedIndex:function(e,t){return mg(e,t)},sortedIndexBy:function(e,t,o){return ug(e,t,Rp(o))},sortedIndexOf:function(e,t){var o=e?e.length:0;if(o){var n=mg(e,t);if(n<o&&ls(e[n],t))return n}return-1},sortedLastIndex:function(e,t){return mg(e,t,!0)},sortedLastIndexBy:function(e,t,o){return ug(e,t,Rp(o),!0)},sortedLastIndexOf:function(e,t){var o=e?e.length:0;if(o){var n=mg(e,t,!0)-1;if(ls(e[n],t))return n}return-1},sortedUniq:function(e){return e&&e.length?pg(e):[]},sortedUniqBy:function(e,t){return e&&e.length?pg(e,Rp(t)):[]},tail:function(e){return Fp(e,1)},take:function(e,t,o){return e&&e.length?(t=o||void 0===t?1:Jd(t),ot(e,0,0>t?0:t)):[]},takeRight:function(e,t,o){var n=e?e.length:0;return n?(t=o||void 0===t?1:Jd(t),t=n-t,ot(e,0>t?0:t,n)):[]},takeRightWhile:function(e,t){return e&&e.length?Mp(e,Rp(t,3),!1,!0):[]},takeWhile:function(e,t){return e&&e.length?Mp(e,Rp(t,3)):[]},union:hg,unionBy:bg,unionWith:kg,uniq:function(e){return e&&e.length?fg(e):[]},uniqBy:function(e,t){return e&&e.length?fg(e,Rp(t)):[]},uniqWith:function(e,t){return e&&e.length?fg(e,void 0,t):[]},unzip:wg,unzipWith:vg,without:yg,xor:Cg,xorBy:Ag,xorWith:Tg,zip:Pg,zipObject:function(e,t){return Eg(e||[],t||[],Us)},zipObjectDeep:function(e,t){return Eg(e||[],t||[],Sg)},zipWith:Og};const Ig=new Map,Vg={transform(e,t,o){const n=Vg.getTransformationCase(e,t)||Vg.defaultTransform,i=n(e,t,Object.assign({},o)),r=Rg.last(t.operations).baseVersion;return No(r,i)},defaultTransform(e,t,o){const n=[];let i=t.operations,r=[];for(const a of e.operations){const e=[a];for(const t of i)for(let n=0;n<e.length;n++){const i=e[n],a=jm(i,t,o);Array.prototype.splice.apply(e,[n,1].concat(a)),n+=a.length-1;const s=Object.assign({},o);s.isStrong=!o.isStrong,s.insertBefore=o.insertBefore===void 0?void 0:!o.insertBefore;const l=jm(t,i,s);Array.prototype.push.apply(r,l)}i=r,r=[];for(const t of e)n.push(t)}return Ho(e.constructor,n)},addTransformationCase(e,t,o){let n=Ig.get(e);n||(n=new Map,Ig.set(e,n)),n.set(t,o)},getTransformationCase(e,t){let o=Ig.get(e.constructor);if(!o||!o.get(t.constructor)){const n=Ig.keys();for(const i of n)if(e instanceof i&&Ig.get(i).get(t.constructor)){o=Ig.get(i);break}}return o?o.get(t.constructor):void 0},transformDeltaSets(e,t,o=null){const n=Array.from(e),i=Array.from(t),r=null!==o,a={isStrong:!0};if(r){a.wasAffected=new Map,a.originalDelta=new Map,a.document=o,a.undoMode=!0;for(const e of i)a.originalDelta.set(e,e)}for(let s=0;s<n.length;s++){const e=[n[s]];for(let t=0;t<i.length;t++){const o=[i[t]];for(let t=0;t<e.length;t++)for(let n=0;n<o.length;n++){r&&Bo(e[t],o[n],a);const i=Vg.transform(e[t],o[n],{insertBefore:a.insertBefore,forceNotSticky:a.forceNotSticky,isStrong:a.isStrong,forceWeakRemove:a.forceWeakRemove,undoMode:a.undoMode}),s=Vg.transform(o[n],e[t],{insertBefore:!a.insertBefore,forceNotSticky:a.forceNotSticky,isStrong:!a.isStrong,forceWeakRemove:a.forceWeakRemove,undoMode:a.undoMode});if(r){Uo(e[t],i,a);const r=a.originalDelta.get(o[n]);for(const e of s)a.originalDelta.set(e,r)}e.splice(t,1,...i),t+=i.length-1,o.splice(n,1,...s),n+=s.length-1}i.splice(t,1,...o),t+=o.length-1}n.splice(s,1,...e),s+=e.length-1}const s=Mo(n)-Mo(e),l=Mo(i)-Mo(t);return l<s?Do(i,s-l):s<l&&Do(n,l-s),{deltasA:n,deltasB:i}}};var Fg=Vg;class Ng extends Om{get type(){return'marker'}get _reverseDeltaClass(){return Ng}static get className(){return'engine.model.delta.MarkerDelta'}}Sm.register(Ng);const Mg=Fg.addTransformationCase,Dg=Fg.defaultTransform;Mg(Rm,zm,(e,t,o)=>{const n=Dg(e,t,o);return e.range.containsPosition(t.position)&&n.push(Go(t,e)),n}),Mg(Rm,Im,(e,t,o)=>{if(!t.position)return Dg(e,t,o);const n=o.undoMode,i=new Ku(t.position.root,t.position.path.slice(0,-1)),r=Dg(e,t,o);if(n||!(t._cloneOperation instanceof vm))return r;for(const n of e.operations)if(n.range.containsPosition(i)||n.range.start.isEqual(i)){const e=new Rm,o=i.getShiftedBy(1),a=Ku.createFromPosition(o);a.path.push(0);const s=t._cloneOperation.nodes.getNode(0).getAttribute(n.key);e.addOperation(new bm(new Gu(o,a),n.key,s===void 0?null:s,n.newValue,0)),r.push(e);break}return r}),Mg(Lm,Vm,(e,t,o)=>{if(!t.position)return Dg(e,t,o);const n=o.undoMode;return!n&&e.position.isEqual(t.position)?[t.getReversed(),e.clone()]:Dg(e,t,o)}),Mg(Ng,Im,Ko),Mg(Ng,Vm,Ko),Mg(Ng,Dm,Ko),Mg(Ng,Bm,Ko),Mg(Ng,Fm,Ko),Mg(Ng,Mm,Ko),Mg(Fm,Vm,(e,t,o)=>{const n=o.undoMode;if(n||!t.position)return Dg(e,t,o);const i=e.sourcePosition.root==t.position.root&&'same'===A(e.sourcePosition.getParentPath(),t.position.getParentPath()),r=e.sourcePosition.offset<=t.position.offset&&e.sourcePosition.offset+e.howMany>t.position.offset;return i&&r?[t.getReversed(),e.clone()]:Dg(e,t,o)}),Mg(Vm,Lm,(e,t,o)=>{if(!e.position)return Dg(e,t,o);const n=o.undoMode;return!n&&e.position.isEqual(t.position)?[$o()]:Dg(e,t,o)}),Mg(Vm,Fm,(e,t,o)=>{const n=o.undoMode;if(n||!e.position)return Dg(e,t,o);const i=e.position.root==t.sourcePosition.root&&'same'===A(e.position.getParentPath(),t.sourcePosition.getParentPath()),r=t.sourcePosition.offset<=e.position.offset&&t.sourcePosition.offset+t.howMany>e.position.offset;return i&&r?[$o()]:Dg(e,t,o)}),Mg(Im,Im,(e,t,o)=>{const n=o.undoMode;if(n)return Dg(e,t,o);if(!e.position||!t.position)return Dg(e,t,o);const i=e.position.getParentPath(),r=t.position.getParentPath();if(e.position.root==t.position.root&&'same'==A(i,r))if(e=e.clone(),e.position.offset<t.position.offset||e.position.offset==t.position.offset&&o.isStrong){e._cloneOperation instanceof _m&&t._cloneOperation instanceof _m&&e._cloneOperation.sourcePosition.offset>t._cloneOperation.sourcePosition.offset&&e._cloneOperation.sourcePosition.offset--;const o=Gu.createFromPositionAndShift(e.position,e._moveOperation.howMany),n=Gu.createFromPositionAndShift(t.position,t._moveOperation.howMany),i=o.getDifference(n);let r=0;for(const e of i)r+=e.end.offset-e.start.offset;return 0==r?(e.operations.pop(),e.addOperation(new xm(e.operations[0].baseVersion+1))):e.operations[1].howMany=r,[e]}else{const n=Object.assign({},o);return n.isStrong=!0,n.insertBefore=!0,Dg(e,t,n)}return Dg(e,t,o)}),Mg(Im,Bm,(e,t,o)=>e.position?e.position.root==t.position.root&&'same'===A(t.position.path,e.position.getParentPath())?[$o()]:Dg(e,t,o):Dg(e,t,o)),Mg(Im,Dm,(e,t,o)=>{if(!e.position)return Dg(e,t,o);const n=e.position.root==t.range.start.root,i=n&&'same'===A(e.position.getParentPath(),t.range.start.getParentPath()),r=t.range.start.offset<e.position.offset&&t.range.end.offset>=e.position.offset;if(i&&r)return[$o()];if(n&&'same'===A(e.position.getParentPath(),t.range.end.getShiftedBy(-1).path)){const o=e.clone(),n=Ku.createFromPosition(t.range.start);n.path.push(t.howMany-1);const i=n.getShiftedBy(1);o._cloneOperation.position=i;const r=Ku.createFromPosition(n);r.path.push(e.position.offset),o._moveOperation.sourcePosition=r;const a=Ku.createFromPosition(i);return a.path.push(0),o._moveOperation.targetPosition=a,[o]}return Dg(e,t,o)}),Mg(Im,Rm,(e,t,o)=>{if(!e.position)return Dg(e,t,o);e=e.clone();const n=o.undoMode,i=new Ku(e.position.root,e.position.path.slice(0,-1));if(n||!(e._cloneOperation instanceof vm))return[e];for(const n of t.operations)if(n.range.containsPosition(i)||n.range.start.isEqual(i)){null===n.newValue?e._cloneOperation.nodes.getNode(0)._removeAttribute(n.key):e._cloneOperation.nodes.getNode(0)._setAttribute(n.key,n.newValue);break}return[e]}),Mg(Bm,Im,(e,t,o)=>t.position?e.position.root==t.position.root&&'same'===A(e.position.path,t.position.getParentPath())?[t.getReversed(),e.clone()]:Dg(e,t,o):Dg(e,t,o)),Mg(zm,Rm,(e,t)=>{const o=[e.clone()];return t.range.containsPosition(e.position)&&o.push(Go(e,t)),o}),Mg(Dm,Im,(e,t,o)=>{if(!t.position)return Dg(e,t,o);const n=e.range.start.root==t.position.root,i=n&&'same'===A(e.range.start.getParentPath(),t.position.getParentPath()),r=e.range.start.offset<t.position.offset&&e.range.end.offset>=t.position.offset;if(i&&r)return[t.getReversed(),e.clone()];if(n&&'same'===A(t.position.getParentPath(),e.range.end.getShiftedBy(-1).path)){const t=e.clone();return t._insertOperation.position.offset++,t._moveOperation.howMany++,t._moveOperation.targetPosition.path[t._moveOperation.targetPosition.path.length-2]++,[t]}return Dg(e,t,o)}),Mg(Mm,Im,(e,t,o)=>{const n=o.undoMode,i=Dg(e,t,o);if(n||!(t._cloneOperation instanceof vm))return i;const r=t._cloneOperation.position.getShiftedBy(-1);if(r&&e.operations[0].position.isEqual(r)){const t=e.clone();t.operations[0].position=r.getShiftedBy(1),i.push(t)}return i}),Mg(Im,Mm,(e,t,o)=>{e=e.clone();const n=o.undoMode;if(n||!(e._cloneOperation instanceof vm))return[e];const i=e._cloneOperation.position.getShiftedBy(-1);if(i&&!n&&t.operations[0].position.isEqual(i)){const o=t.clone();return o.operations[0].position=i.getShiftedBy(1),o.operations[0].oldName=e._cloneOperation.nodes.getNode(0).name,[e,o]}return[e]}),Mg(Nm,Im,(e,t,o)=>{const n=Dg(e,t,o),i=t._cloneOperation.position||t._cloneOperation.targetPosition;if(!i)return Dg(e,t,o);const r=o.undoMode;if(r)return n;for(const r of n)if(r instanceof Nm){const e=r._moveOperation,t=e.sourcePosition.getShiftedBy(e.howMany);t.isEqual(i)&&(e.howMany+=1)}return n}),Mg(Im,Nm,(e,t,o)=>{const n=o.undoMode;if(n)return Dg(e,t,o);const i=e._cloneOperation.position||e._cloneOperation.targetPosition;if(!i)return Dg(e,t,o);t=t.clone();const r=t._moveOperation,a=r.sourcePosition.getShiftedBy(r.howMany);return a.isEqual(i)&&(r.howMany+=1),Dg(e,t,o)});class Bg{constructor(e='default'){this.deltas=[],this.type=e}get baseVersion(){for(const e of this.deltas)if(null!==e.baseVersion)return e.baseVersion;return null}addDelta(e){return e.batch=this,this.deltas.push(e),e}*getOperations(){for(const e of this.deltas)yield*e.operations}}class Lg extends Om{static get className(){return'engine.model.delta.RootAttributeDelta'}}Sm.register(Lg);class zg extends gm{constructor(e,t){super(null),this.sourcePosition=Ku.createFromPosition(e),this.howMany=t}get type(){return'detach'}_validate(){if(this.sourcePosition.root.document)throw new Za('detach-operation-on-document-node: Cannot detach document node.')}_execute(){bo(Gu.createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return'engine.model.operation.DetachOperation'}}class jg extends Wu{constructor(e,t,o='main'){super(t),this._doc=e,this.rootName=o}get document(){return this._doc}is(e,t){return t?'rootElement'==e&&t==this.name||super.is(e,t):'rootElement'==e||super.is(e)}toJSON(){return this.rootName}}class qg{constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new zu(e,t)}createElement(e,t){return new Wu(e,t)}createDocumentFragment(){return new fm}insert(e,t,o){this._assertWriterUsedCorrectly();const n=Ku.createAt(t,o),i=e instanceof zu&&!e.parent?new zm:new Lm;if(e.parent){if(Zo(e.root,n.root))return void this.move(Gu.createOn(e),n);if(e.root.document)throw new Error('model-writer-insert-forbidden-move: Cannot move a node from a document to a different tree.');else this.remove(e)}const r=n.root.document?n.root.document.version:null,a=new vm(n,e,r);if(this.batch.addDelta(i),i.addOperation(a),this.model.applyOperation(a),e instanceof fm)for(const[t,o]of e.markers){const e=Ku.createAt(o.root),i=new Gu(o.start._getCombined(e,n),o.end._getCombined(e,n));this.addMarker(t,{range:i,usingOperation:!0})}}insertText(e,t,o,n){t instanceof fm||t instanceof Wu||t instanceof Ku?this.insert(this.createText(e),t,o):this.insert(this.createText(e,t),o,n)}insertElement(e,t,o,n){t instanceof fm||t instanceof Wu||t instanceof Ku?this.insert(this.createElement(e),t,o):this.insert(this.createElement(e,t),o,n)}append(e,t){this.insert(e,t,'end')}appendText(e,t,o){t instanceof fm||t instanceof Wu?this.insert(this.createText(e),t,'end'):this.insert(this.createText(e,t),o,'end')}appendElement(e,t,o){t instanceof fm||t instanceof Wu?this.insert(this.createElement(e),t,'end'):this.insert(this.createElement(e,t),o,'end')}setAttribute(e,t,o){this._assertWriterUsedCorrectly(),o instanceof Gu?Jo(this,e,t,o):Qo(this,e,t,o)}setAttributes(e,t){for(const[o,n]of rt(e))this.setAttribute(o,n,t)}removeAttribute(e,t){this._assertWriterUsedCorrectly(),t instanceof Gu?Jo(this,e,null,t):Qo(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=(e)=>{for(const t of e.getAttributeKeys())this.removeAttribute(t,e)};if(!(e instanceof Gu))t(e);else for(const o of e.getItems())t(o)}move(e,t,o){if(this._assertWriterUsedCorrectly(),!(e instanceof Gu))throw new Za('writer-move-invalid-range: Invalid range to move.');if(!e.isFlat)throw new Za('writer-move-range-not-flat: Range to move is not flat.');const n=Ku.createAt(t,o);if(!Zo(e.root,n.root))throw new Za('writer-move-different-document: Range is going to be moved between different documents.');const i=new Fm;this.batch.addDelta(i);const r=e.root.document?e.root.document.version:null,a=new km(e.start,e.end.offset-e.start.offset,n,r);i.addOperation(a),this.model.applyOperation(a)}remove(e){this._assertWriterUsedCorrectly();const t=(e,t)=>{const o=new Nm;this.batch.addDelta(o),Xo(e,t,o,this.model)};if(e instanceof Gu){const o=e.getMinimalFlatRanges().reverse();for(const e of o)t(e.start,e.end.offset-e.start.offset)}else{const o=e.is('text')?e.offsetSize:1;t(Ku.createBefore(e),o)}}merge(e){this._assertWriterUsedCorrectly();const t=new Vm;this.batch.addDelta(t);const o=e.nodeBefore,n=e.nodeAfter;if(!(o instanceof Wu))throw new Za('writer-merge-no-element-before: Node before merge position must be an element.');if(!(n instanceof Wu))throw new Za('writer-merge-no-element-after: Node after merge position must be an element.');const i=Ku.createFromParentAndOffset(n,0),r=Ku.createFromParentAndOffset(o,o.maxOffset),a=e.root.document?e.root.document.version:null,s=new km(i,n.maxOffset,r,a);s.isSticky=!0,t.addOperation(s),this.model.applyOperation(s),Xo(e,1,t,this.model)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Wu))throw new Za('writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.');const o=new Mm;this.batch.addDelta(o);const n=e.root.document?e.root.document.version:null,i=new Cm(Ku.createBefore(e),e.name,t,n);o.addOperation(i),this.model.applyOperation(i)}split(e,t){this._assertWriterUsedCorrectly();let o=e.parent;if(!o.parent)throw new Za('writer-split-element-no-parent: Element with no parent can not be split.');if(t||(t=o.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new Za('writer-split-invalid-limit-element: Limit element is not a position ancestor.');let n,i;do{const t=new Im;this.batch.addDelta(t);const r=new Wu(o.name,o.getAttributes()),a=o.root.document?o.root.document.version:null,s=new vm(Ku.createAfter(o),r,a);t.addOperation(s),this.model.applyOperation(s);const l=null===a?null:a+1,d=new km(e,o.maxOffset-e.offset,Ku.createFromParentAndOffset(r,0),l);d.isSticky=!0,t.addOperation(d),this.model.applyOperation(d),n||i||(n=o,i=r),e=Ku.createBefore(r),o=e.parent}while(o!==t);return{position:e,range:new Gu(Ku.createAt(n,'end'),Ku.createAt(i))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new Za('writer-wrap-range-not-flat: Range to wrap is not flat.');const o=t instanceof Wu?t:new Wu(t);if(0<o.childCount)throw new Za('writer-wrap-element-not-empty: Element to wrap with is not empty.');if(null!==o.parent)throw new Za('writer-wrap-element-attached: Element to wrap with is already attached to tree model.');const n=new Dm;this.batch.addDelta(n);const i=e.root.document?e.root.document.version:null,r=new vm(e.end,o,i);n.addOperation(r),this.model.applyOperation(r);const a=null===i?null:i+1,s=Ku.createFromParentAndOffset(o,0),l=new km(e.start,e.end.offset-e.start.offset,s,a);n.addOperation(l),this.model.applyOperation(l)}unwrap(e){if(this._assertWriterUsedCorrectly(),null===e.parent)throw new Za('writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.');const t=new Bm;this.batch.addDelta(t);const o=Ku.createFromParentAndOffset(e,0),n=o.root.document?o.root.document.version:null,i=new km(o,e.maxOffset,Ku.createBefore(e),n);i.isSticky=!0,t.addOperation(i),this.model.applyOperation(i),Xo(Ku.createBefore(e),1,t,this.model)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||'boolean'!=typeof t.usingOperation)throw new Za('writer-addMarker-no-usingOperations: The options.usingOperations parameter is required when adding a new marker.');const o=t.usingOperation,n=t.range;if(this.model.markers.has(e))throw new Za('writer-addMarker-marker-exists: Marker with provided name already exists.');if(!n)throw new Za('writer-addMarker-no-range: Range parameter is required when adding a new marker.');return o?(Yo(this,e,null,n),this.model.markers.get(e)):this.model.markers._set(e,n,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();const o='string'==typeof e?e:e.name,n=this.model.markers.get(o);if(!n)throw new Za('writer-updateMarker-marker-not-exists: Marker with provided name does not exists.');const i=t&&t.range,r=!!t&&'boolean'==typeof t.usingOperation;if(!r&&!i)throw new Za('writer-updateMarker-wrong-options: One of options is required - provide range or usingOperations.');if(r&&t.usingOperation!==n.managedUsingOperations){if(t.usingOperation)Yo(this,o,null,i?i:n.getRange());else{const e=n.getRange();Yo(this,o,e,null),this.model.markers._set(o,i?i:e)}return}n.managedUsingOperations?Yo(this,o,n.getRange(),i):this.model.markers._set(o,i)}removeMarker(e){this._assertWriterUsedCorrectly();const t='string'==typeof e?e:e.name;if(!this.model.markers.has(t))throw new Za('writer-removeMarker-no-marker: Trying to remove marker which does not exist.');const o=this.model.markers.get(t);if(!o.managedUsingOperations)return void this.model.markers._remove(t);const n=o.getRange();Yo(this,t,n,null)}setSelection(e,t,o){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(e,t,o)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),'string'==typeof e)this._setSelectionAttribute(e,t);else for(const[t,o]of rt(e))this._setSelectionAttribute(t,o)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),'string'==typeof e)this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const o=this.model.document.selection;if(o.isCollapsed&&o.anchor.parent.isEmpty){const n=em._getStoreAttributeKey(e);this.setAttribute(n,t,o.anchor.parent)}o._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const o=em._getStoreAttributeKey(e);this.removeAttribute(o,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new Za('writer-incorrect-use: Trying to use a writer outside the change() block.')}}class Wg{constructor(e){this._markerCollection=e,this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null}get isEmpty(){return 0==this._changesInElement.size&&0==this._changedMarkers.size}bufferOperation(e){switch(e.type){case'insert':{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case'addAttribute':case'removeAttribute':case'changeAttribute':{for(const t of e.range.getItems())this._isInInsertedElement(t.parent)||this._markAttribute(t);break}case'remove':case'move':case'reinsert':{const t=this._isInInsertedElement(e.sourcePosition.parent),o=this._isInInsertedElement(e.targetPosition.parent);t||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),o||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break}case'rename':{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const t=Gu.createFromPositionAndShift(e.position,1);for(const e of this._markerCollection.getMarkersIntersectingRange(t)){const t=e.getRange();this.bufferMarkerChange(e.name,t,t)}break}}this._cachedChanges=null}bufferMarkerChange(e,t,o){const n=this._changedMarkers.get(e);n?(n.newRange=o,null==n.oldRange&&null==n.newRange&&this._changedMarkers.delete(e)):this._changedMarkers.set(e,{oldRange:t,newRange:o})}getMarkersToRemove(){const e=[];for(const[t,o]of this._changedMarkers)null!=o.oldRange&&e.push({name:t,range:o.oldRange});return e}getMarkersToAdd(){const e=[];for(const[t,o]of this._changedMarkers)null!=o.newRange&&e.push({name:t,range:o.newRange});return e}getChanges(e={includeChangesInGraveyard:!1}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();const t=[];for(const o of this._changesInElement.keys()){const e=this._changesInElement.get(o).sort((e,t)=>e.offset===t.offset?e.type==t.type?0:'remove'==e.type?-1:1:e.offset<t.offset?-1:1),n=this._elementSnapshots.get(o),r=en(o.getChildren()),a=tn(n.length,e);let s=0,i=0;for(const e of a)if('i'===e)t.push(this._getInsertDiff(o,s,r[s].name)),s++;else if('r'===e)t.push(this._getRemoveDiff(o,s,n[i].name)),i++;else if('a'===e){const e=r[s].attributes,a=n[i].attributes;let l;if('$text'==r[s].name)l=Gu.createFromParentsAndOffsets(o,s,o,s+1);else{const e=o.offsetToIndex(s);l=Gu.createFromParentsAndOffsets(o,s,o.getChild(e),0)}t.push(...this._getAttributesDiff(l,a,e)),s++,i++}else s++,i++}t.sort((e,t)=>e.position.root==t.position.root?e.position.isEqual(t.position)?e.changeCount<t.changeCount?-1:1:e.position.isBefore(t.position)?-1:1:e.position.root.rootName<t.position.root.rootName?-1:1);for(let o=1;o<t.length;o++){const e=t[o-1],n=t[o],i='remove'==e.type&&'remove'==n.type&&'$text'==e.name&&'$text'==n.name&&e.position.isEqual(n.position),r='insert'==e.type&&'insert'==n.type&&'$text'==e.name&&'$text'==n.name&&e.position.parent==n.position.parent&&e.position.offset+e.length==n.position.offset,a='attribute'==e.type&&'attribute'==n.type&&e.position.parent==n.position.parent&&e.range.isFlat&&n.range.isFlat&&e.position.offset+e.length==n.position.offset&&e.attributeKey==n.attributeKey&&e.attributeOldValue==n.attributeOldValue&&e.attributeNewValue==n.attributeNewValue;(i||r||a)&&(t[o-1].length++,a&&(t[o-1].range.end=t[o-1].range.end.getShiftedBy(1)),t.splice(o,1),o--)}for(const o of t)delete o.changeCount,'attribute'==o.type&&(delete o.position,delete o.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t.slice(),this._cachedChanges=t.slice().filter(on),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard:this._cachedChanges}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._cachedChanges=null}_markInsert(e,t,o){const n={type:'insert',offset:t,howMany:o,count:this._changeCount++};this._markChange(e,n)}_markRemove(e,t,o){const n={type:'remove',offset:t,howMany:o,count:this._changeCount++};this._markChange(e,n),this._removeAllNestedChanges(e,t,o)}_markAttribute(e){const t={type:'attribute',offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshot(e);const o=this._getChangesForElement(e);this._handleChange(t,o),o.push(t);for(let n=0;n<o.length;n++)1>o[n].howMany&&(o.splice(n,1),n--)}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,en(e.getChildren()))}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const o of t){const n=e.offset+e.howMany,i=o.offset+o.howMany;if('insert'==e.type&&('insert'==o.type&&(e.offset<=o.offset?o.offset+=e.howMany:e.offset<i&&(o.howMany+=e.nodesToHandle,e.nodesToHandle=0)),'remove'==o.type&&e.offset<o.offset&&(o.offset+=e.howMany),'attribute'==o.type))if(e.offset<=o.offset)o.offset+=e.howMany;else if(e.offset<i){const i=o.howMany;o.howMany=e.offset-o.offset,t.unshift({type:'attribute',offset:n,howMany:i-o.howMany,count:this._changeCount++})}if('remove'==e.type){if('insert'==o.type)if(n<=o.offset)o.offset-=e.howMany;else if(n<=i){if(e.offset<o.offset){const t=n-o.offset;o.offset=e.offset,o.howMany-=t,e.nodesToHandle-=t}else o.howMany-=e.nodesToHandle,e.nodesToHandle=0;}else if(e.offset<=o.offset)e.nodesToHandle-=o.howMany,o.howMany=0;else if(e.offset<i){const t=i-e.offset;o.howMany-=t,e.nodesToHandle-=t}if('remove'==o.type&&(n<=o.offset?o.offset-=e.howMany:e.offset<o.offset&&(e.nodesToHandle+=o.howMany,o.howMany=0)),'attribute'==o.type)if(n<=o.offset)o.offset-=e.howMany;else if(e.offset<o.offset){const t=n-o.offset;o.offset=e.offset,o.howMany-=t}else if(e.offset<i)if(n<=i){const n=o.howMany;o.howMany=e.offset-o.offset;const i=n-o.howMany-e.nodesToHandle;t.unshift({type:'attribute',offset:e.offset,howMany:i,count:this._changeCount++})}else o.howMany-=i-e.offset}if('attribute'==e.type){if('insert'==o.type)if(e.offset<o.offset&&n>o.offset){if(n>i){const e={type:'attribute',offset:i,howMany:n-i,count:this._changeCount++};this._handleChange(e,t),t.push(e)}e.nodesToHandle=o.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=o.offset&&e.offset<i&&(n>i?(e.nodesToHandle=n-i,e.offset=i):e.nodesToHandle=0);'attribute'==o.type&&(e.offset>=o.offset&&n<=i?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=o.offset&&n>=i&&(o.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,o){return{type:'insert',position:Ku.createFromParentAndOffset(e,t),name:o,length:1,changeCount:this._changeCount++}}_getRemoveDiff(e,t,o){return{type:'remove',position:Ku.createFromParentAndOffset(e,t),name:o,length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,o){const n=[];o=new Map(o);for(const[i,r]of t){const t=o.has(i)?o.get(i):null;t!==r&&n.push({type:'attribute',position:e.start,range:Gu.createFromRange(e),length:1,attributeKey:i,attributeOldValue:r,attributeNewValue:t,changeCount:this._changeCount++}),o.delete(i)}for(const[i,r]of o)n.push({type:'attribute',position:e.start,range:Gu.createFromRange(e),length:1,attributeKey:i,attributeOldValue:null,attributeNewValue:r,changeCount:this._changeCount++});return n}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const o=this._changesInElement.get(t),n=e.startOffset;if(o)for(const e of o)if('insert'==e.type&&n>=e.offset&&n<e.offset+e.howMany)return!0;return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,o){const n=Gu.createFromParentsAndOffsets(e,t,e,t+o);for(const i of n.getItems({shallow:!0}))i.is('element')&&(this._elementSnapshots.delete(i),this._changesInElement.delete(i),this._removeAllNestedChanges(i,0,i.maxOffset))}}class Ug{constructor(){this._deltas=[],this._historyPoints=new Map,this._undoPairs=new Map,this._undoneDeltas=new Set}addDelta(e){if(0<e.operations.length&&!this._historyPoints.has(e.baseVersion)){const t=this._deltas.length;this._deltas[t]=e,this._historyPoints.set(e.baseVersion,t)}}*getDeltas(e=0,t=Da){if(0!==this._deltas.length){let o=this._getIndex(e);if(-1!=o)for(;o<this._deltas.length;){const e=this._deltas[o++];if(e.baseVersion>=t)break;yield e}}}getDelta(e){const t=this._historyPoints.get(e);return t===void 0?null:this._deltas[t]}setDeltaAsUndone(e,t){this._undoPairs.set(t,e),this._undoneDeltas.add(e)}isUndoingDelta(e){return this._undoPairs.has(e)}isUndoneDelta(e){return this._undoneDeltas.has(e)}getUndoneDelta(e){return this._undoPairs.get(e)}_getIndex(e){const t=this._historyPoints.get(e);if(t===void 0){const t=this._deltas[this._deltas.length-1],o=t.baseVersion+t.operations.length;if(0>e||e>=o)return-1;throw new Za('model-history-wrong-version: Given base version points to the middle of a delta.')}return t}}const Hg='$graveyard';class Kg{constructor(e){this.model=e,this.version=0,this.history=new Ug(this),this.selection=new em(this),this.roots=new Pc({idProperty:'rootName'}),this.differ=new Wg(e.markers),this._postFixers=new Set,this.createRoot('$root',Hg),this.listenTo(e,'applyOperation',(e,t)=>{const o=t[0];if(o.isDocumentOperation&&o.baseVersion!==this.version)throw new Za('model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.',{operation:o})},{priority:'highest'}),this.listenTo(e,'applyOperation',(e,t)=>{const o=t[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:'high'}),this.listenTo(e,'applyOperation',(e,t)=>{const o=t[0];o.isDocumentOperation&&(this.version++,this.history.addDelta(o.delta))},{priority:'low'});let t=!1;this.listenTo(this.selection,'change',()=>{t=!0}),this.listenTo(e,'_change',(e,o)=>{(!this.differ.isEmpty||t)&&(this._callPostFixers(o),this.fire('change',o.batch),this.differ.reset(),t=!1)}),this.listenTo(e.markers,'update',(e,t,o,n)=>{this.differ.bufferMarkerChange(t.name,o,n),null===o&&t.on('change',(e,o)=>{this.differ.bufferMarkerChange(t.name,o,t.getRange())})})}get graveyard(){return this.getRoot(Hg)}createRoot(e='$root',t='main'){if(this.roots.get(t))throw new Za('model-document-createRoot-name-exists: Root with specified name already exists.',{name:t});const o=new jg(this,e,t);return this.roots.add(o),o}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e='main'){return this.roots.get(e)}getRootNames(){return Array.from(this.roots,(e)=>e.rootName).filter((e)=>e!=Hg)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=Ed(this);return e.selection='[engine.model.DocumentSelection]',e.model='[engine.model.Model]',e}_getDefaultRoot(){for(const e of this.roots)if(e!==this.graveyard)return e;return this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model.schema,o=new Ku(e,[0]),n=t.getNearestSelectionRange(o);return n||new Gu(o)}_validateSelectionRange(e){return dn(e.start)&&dn(e.end)}_callPostFixers(e){let t=!1;do for(const o of this._postFixers)if(t=o(e),t)break;while(t)}}f(Kg,ss);class Gg{constructor(){this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){return this._markers.has(e)}get(e){return this._markers.get(e)||null}_set(e,t,o=!1){const n=e instanceof $g?e.name:e,i=this._markers.get(n);if(i){const e=i.getRange();let r=!1;return e.isEqual(t)||(i._attachLiveRange(Xu.createFromRange(t)),r=!0),o!=i.managedUsingOperations&&(i._managedUsingOperations=o,r=!0),r&&this.fire('update:'+n,i,e,t),i}const r=Xu.createFromRange(t),a=new $g(n,r,o);return this._markers.set(n,a),this.fire('update:'+n,a,null,t),a}_remove(e){const t=e instanceof $g?e.name:e,o=this._markers.get(t);return!!o&&(this._markers.delete(t),this.fire('update:'+t,o,o.getRange(),null),this._destroyMarker(o),!0)}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)null!==t.getRange().getIntersection(e)&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+':')&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}f(Gg,ss);class $g{constructor(e,t,o){this.name=e,this._managedUsingOperations=o,this._liveRange=this._attachLiveRange(t)}get managedUsingOperations(){if(!this._liveRange)throw new Za('marker-destroyed: Cannot use a destroyed marker instance.');return this._managedUsingOperations}getStart(){if(!this._liveRange)throw new Za('marker-destroyed: Cannot use a destroyed marker instance.');return Ku.createFromPosition(this._liveRange.start)}getEnd(){if(!this._liveRange)throw new Za('marker-destroyed: Cannot use a destroyed marker instance.');return Ku.createFromPosition(this._liveRange.end)}getRange(){if(!this._liveRange)throw new Za('marker-destroyed: Cannot use a destroyed marker instance.');return Gu.createFromRange(this._liveRange)}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate('change:range').to(this),e.delegate('change:content').to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating('change:range',this),this._liveRange.stopDelegating('change:content',this),this._liveRange.detach(),this._liveRange=null}}f($g,ss);class Jg extends Ku{constructor(e,t,o){if(super(e,t),!this.root.is('rootElement'))throw new Za('model-liveposition-root-not-rootelement: LivePosition\'s root has to be an instance of RootElement.');this.stickiness=o||'sticksToNext',cn.call(this)}detach(){this.stopListening()}}f(Jg,ss);class Qg{constructor(e,t,o){this.model=e,this.writer=t,this.position=o,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._filterAttributesOf=[]}handleNodes(e,t){e=Array.from(e);for(let o=0;o<e.length;o++){const n=e[o];this._handleNode(n,{isFirst:0===o&&t.isFirst,isLast:o===e.length-1&&t.isLast})}this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}getSelectionRange(){return this.nodeToSelect?Gu.createOn(this.nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}_handleNode(e,t){if(this.schema.isObject(e))return void this._handleObject(e,t);const o=this._checkAndSplitToAllowedPosition(e,t);return o?void(this._insert(e),this._mergeSiblingsOf(e,t)):void this._handleDisallowedNode(e,t)}_handleObject(e,t){this._checkAndSplitToAllowedPosition(e)?this._insert(e):this._tryAutoparagraphing(e,t)}_handleDisallowedNode(e,t){e.is('element')?this.handleNodes(e.getChildren(),t):this._tryAutoparagraphing(e,t)}_insert(e){if(!this.schema.checkChild(this.position,e))return void Ru.error('insertcontent-wrong-position: The node cannot be inserted on the given position.',{node:e,position:this.position});const t=Jg.createFromPosition(this.position);this.writer.insert(e,this.position),this.position=Ku.createFromPosition(t),t.detach(),this.nodeToSelect=this.schema.isObject(e)&&!this.schema.checkChild(this.position,'$text')?e:null,this._filterAttributesOf.push(e)}_mergeSiblingsOf(e,t){if(e instanceof Wu){const o=this._canMergeLeft(e,t),n=this._canMergeRight(e,t),i=Jg.createBefore(e),r=Jg.createAfter(e);if(o){const e=Jg.createFromPosition(this.position);this.writer.merge(i),this.position=Ku.createFromPosition(e),e.detach()}if(n){this.position.isEqual(r)||Ru.error('insertcontent-wrong-position-on-merge: The insertion position should equal the merge position'),this.position=Ku.createAt(r.nodeBefore,'end');const e=new Jg(this.position.root,this.position.path,'sticksToPrevious');this.writer.merge(r),this.position=Ku.createFromPosition(e),e.detach()}(o||n)&&this._filterAttributesOf.push(this.position.parent),i.detach(),r.detach()}}_canMergeLeft(e,t){const o=e.previousSibling;return t.isFirst&&o instanceof Wu&&this.canMergeWith.has(o)&&this.model.schema.checkMerge(o,e)}_canMergeRight(e,t){const o=e.nextSibling;return t.isLast&&o instanceof Wu&&this.canMergeWith.has(o)&&this.model.schema.checkMerge(e,o)}_tryAutoparagraphing(e,t){const o=this.writer.createElement('paragraph');this._getAllowedIn(o,this.position.parent)&&this.schema.checkChild(o,e)&&(o._appendChild(e),this._handleNode(o,t))}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(e,this.position.parent);if(!t)return!1;for(;t!=this.position.parent;){if(this.schema.isLimit(this.position.parent))return!1;if(this.position.isAtStart){const e=this.position.parent;this.position=Ku.createBefore(e),e.isEmpty&&this.writer.remove(e)}else if(this.position.isAtEnd)this.position=Ku.createAfter(this.position.parent);else{const e=Ku.createAfter(this.position.parent);this.writer.split(this.position),this.position=e,this.canMergeWith.add(this.position.nodeAfter)}}return!0}_getAllowedIn(e,t){return this.schema.checkChild(t,e)?t:t.parent?this._getAllowedIn(e,t.parent):null}}const Yg=' ,.?!:;"-()';class Xg{constructor(){this.markers=new Gg,this.document=new Kg(this),this.schema=new dm,this._pendingChanges=[],this._currentWriter=null,['insertContent','deleteContent','modifySelection','getSelectedContent','applyOperation'].forEach((e)=>this.decorate(e)),this.on('applyOperation',(e,t)=>{const o=t[0];o._validate()},{priority:'highest'}),this.schema.register('$root',{isLimit:!0}),this.schema.register('$block',{allowIn:'$root',isBlock:!0}),this.schema.register('$text',{allowIn:'$block'}),this.schema.register('$clipboardHolder',{allowContentOf:'$root',isLimit:!0}),this.schema.extend('$text',{allowIn:'$clipboardHolder'}),this.schema.register('$marker',{allowIn:['$root','$block']})}change(e){return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new Bg,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}enqueueChange(e,t){'string'==typeof e?e=new Bg(e):'function'==typeof e&&(t=e,e=new Bg),this._pendingChanges.push({batch:e,callback:t}),1==this._pendingChanges.length&&this._runPendingChanges()}applyOperation(e){e._execute()}transformDeltas(e,t,o=!1){return Fg.transformDeltaSets(e,t,o?this.document:null)}insertContent(e,t){mn(this,e,t)}deleteContent(e,t){pn(this,e,t)}modifySelection(e,t){wn(this,e,t)}getSelectedContent(e){return Pn(this,e)}hasContent(e){if(e instanceof Wu&&(e=Gu.createIn(e)),e.isCollapsed)return!1;for(const t of e.getItems())if(t.is('textProxy')||this.schema.isObject(t))return!0;return!1}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new qg(this,t);const o=this._pendingChanges[0].callback(this._currentWriter);e.push(o),this.fire('_change',this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}return e}}f(Xg,bc);class Zg{constructor(){this._listener=Object.create(Yc)}listenTo(e){this._listener.listenTo(e,'keydown',(e,t)=>{this._listener.fire('_keydown:'+te(t),t)})}set(e,t,o={}){const n=oe(e),i=o.priority;this._listener.listenTo(this._listener,'_keydown:'+n,(e,o)=>{t(o,()=>{o.preventDefault(),o.stopPropagation(),e.stop()}),e.return=!0},{priority:i})}press(e){return!!this._listener.fire('_keydown:'+te(e),e)}destroy(){this._listener.stopListening()}}class ef extends Zg{constructor(e){super(),this.editor=e}set(e,t,o={}){if('string'==typeof t){const e=t;t=(t,o)=>{this.editor.execute(e),o()}}super.set(e,t,o)}}class tf{constructor(e){const t=this.constructor.build&&this.constructor.build.plugins;this.config=new Ya(e,this.constructor.build&&this.constructor.build.config),this.config.define('plugins',t),this.plugins=new im(this,t),this.commands=new rm,this.locale=new am(this.config.get('language')),this.t=this.locale.t,this.set('isReadOnly',!1),this.model=new Xg,this.data=new mm(this.model),this.editing=new nm(this.model),this.editing.view.document.bind('isReadOnly').to(this),this.conversion=new pm,this.conversion.register('downcast',[this.editing.downcastDispatcher,this.data.downcastDispatcher]),this.conversion.register('editingDowncast',[this.editing.downcastDispatcher]),this.conversion.register('dataDowncast',[this.data.downcastDispatcher]),this.conversion.register('upcast',[this.data.upcastDispatcher]),this.keystrokes=new ef(this),this.keystrokes.listenTo(this.editing.view.document)}initPlugins(){function e(e,t){return e.reduce((e,o)=>o[t]?e.then(o[t].bind(o)):e,Promise.resolve())}const t=this,o=this.config;return function(){const e=o.get('plugins')||[],n=o.get('removePlugins')||[];return t.plugins.load(e,n)}().then((t)=>e(t,'init').then(()=>e(t,'afterInit'))).then(()=>this.fire('pluginsReady'))}destroy(){return this.fire('destroy'),this.stopListening(),this.commands.destroy(),this.plugins.destroy().then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()})}execute(...e){this.commands.execute(...e)}static create(e){return new Promise((t)=>{const o=new this(e);t(o.initPlugins().then(()=>{o.fire('dataReady'),o.fire('ready')}).then(()=>o))})}}f(tf,bc);const of={setData(e){this.data.set(e)},getData(){return this.data.get()}};const nf={updateElement(){Sn(this.element,this.data.get())}};class rf{getHtml(e){const t=document.implementation.createHTMLDocument(''),o=t.createElement('div');return o.appendChild(e),o.innerHTML}}class af{constructor(){this._domParser=new DOMParser,this._domConverter=new Jc({blockFiller:Wc}),this._htmlWriter=new rf}toData(e){const t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this._domConverter.domToView(t)}_toDom(e){const t=this._domParser.parseFromString(e,'text/html'),o=t.createDocumentFragment(),n=t.body.childNodes;for(;0<n.length;)o.appendChild(n[0]);return o}}class sf{constructor(e){this.editor=e,this._components=new Map}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){if(this.has(e))throw new Za('componentfactory-item-exists: The item already exists in the component factory.',{name:e});this._components.set(Rn(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new Za('componentfactory-item-missing: The required component is not registered in the factory.',{name:e});return this._components.get(Rn(e)).callback(this.editor.locale)}has(e){return this._components.has(Rn(e))}}class lf{constructor(){this.set('isFocused',!1),this.focusedElement=null,this._elements=new Set,this._nextEventLoopTimeout=null}add(e){if(this._elements.has(e))throw new Za('focusTracker-add-element-already-exist');this.listenTo(e,'focus',()=>this._focus(e),{useCapture:!0}),this.listenTo(e,'blur',()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(e),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}f(lf,Yc),f(lf,bc);class df{constructor(e,t){this.editor=e,this.view=t,this.componentFactory=new sf(e),this.focusTracker=new lf,this._toolbarConfig=Vn(e.config.get('toolbar'))}init(){const e=this.editor,t=this.view;t.render(),t.stickyPanel.bind('isActive').to(this.focusTracker,'isFocused'),t.stickyPanel.limiterElement=t.element,this._toolbarConfig.viewportTopOffset&&(t.stickyPanel.viewportTopOffset=this._toolbarConfig.viewportTopOffset);const o=e.editing.view.document.getRoot();t.editable.bind('isReadOnly').to(o),t.editable.bind('isFocused').to(e.editing.view.document),t.editable.name=o.rootName,this.focusTracker.add(this.view.editableElement),this.view.toolbar.fillFromConfig(this._toolbarConfig.items,this.componentFactory),In({origin:e.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:this.view.toolbar})}destroy(){this.view.destroy()}}class cf extends Pc{constructor(e){super({idProperty:'viewUid'}),this.on('add',(e,t,o)=>{t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[o])}),this.on('remove',(e,t)=>{t.element&&this._parentElement&&t.element.remove()}),this.locale=e,this._parentElement=null}destroy(){this.map((e)=>e.destroy())}setParent(e){this._parentElement=e}delegate(...e){if(!e.length||!Fn(e))throw new Za('ui-viewcollection-delegate-wrong-events: All event names must be strings.');return{to:(t)=>{for(const o of this)for(const n of e)o.delegate(n).to(t);this.on('add',(o,n)=>{for(const i of e)n.delegate(i).to(t)}),this.on('remove',(o,n)=>{for(const i of e)n.stopDelegating(i,t)})}}}}f(Pc,bc);var uf=function(e,t){return Pd(e,!0,!0,t)};class mf{constructor(e){Object.assign(this,qn(jn(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=ti(),this._renderNode({node:e,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new Za('ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.');this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const o of t.children)Xn(o)?yield o:Zn(o)&&(yield*e(o))}yield*e(this)}static bind(e,t){return{to(o,n){return new gf({eventNameOrFunction:o,attribute:o,observable:e,emitter:t,callback:n})},if(o,n,i){return new ff({observable:e,emitter:t,attribute:o,valueIfTrue:n,callback:i})}}}static extend(e,t){e._isRendered&&Ru.warn('template-extend-render: Attempting to extend a template which has already been rendered.'),Qn(e,qn(jn(t)))}_renderNode(e){let t;if(t=e.node?this.tag&&this.text:this.tag?this.text:!this.text,t)throw new Za('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.');return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||'http://www.w3.org/1999/xhtml',this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(''),Nn(this.text)?this._bindToObservable({schema:this.text,updater:Bn(t),data:e}):t.textContent=this.text.join(''),t}_renderAttributes(e){let t,o,n,i;if(this.attributes){const r=e.node,a=e.revertData;for(t in this.attributes)if(n=r.getAttribute(t),o=this.attributes[t],a&&(a.attributes[t]=n),i=ps(o[0])&&o[0].ns?o[0].ns:null,Nn(o)){const s=i?o[0].value:o;a&&oi(t)&&s.unshift(n),this._bindToObservable({schema:s,updater:Ln(r,t,i),data:e})}else'style'==t&&'string'!=typeof o[0]?this._renderStyleAttribute(o[0],e):(a&&n&&oi(t)&&o.unshift(n),o=o.map((e)=>e?e.value||e:e).reduce((e,t)=>e.concat(t),[]).reduce($n,''),Yn(o)||r.setAttributeNS(i,t,o))}}_renderStyleAttribute(e,t){const o=t.node;for(const n in e){const i=e[n];Nn(i)?this._bindToObservable({schema:[i],updater:zn(o,n),data:t}):o.style[n]=i}}_renderElementChildren(e){const t=e.node,o=e.intoFragment?document.createDocumentFragment():t,n=e.isApplying;let i=0;for(const r of this.children)if(ei(r)){if(!n){r.setParent(t);for(const e of r)o.appendChild(e.element)}}else if(Xn(r))n||(!r.isRendered&&r.render(),o.appendChild(r.element));else if(Me(r))o.appendChild(r);else if(n){const t=e.revertData,n=ti();t.children.push(n),r._renderNode({node:o.childNodes[i++],isApplying:!0,revertData:n})}else o.appendChild(r.render());e.intoFragment&&t.appendChild(o)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const o=this.eventListeners[t].map((o)=>{const[n,i]=t.split('@');return o.activateDomEventListener(n,i,e)});e.revertData&&e.revertData.bindings.push(o)}}_bindToObservable({schema:e,updater:t,data:o}){const n=o.revertData;Dn(e,t,o);const i=e.filter((e)=>!Yn(e)).filter((e)=>e.observable).map((n)=>n.activateAttributeListener(e,t,o));n&&n.bindings.push(i)}_revertTemplateFromNode(e,t){for(const o of t.bindings)for(const e of o)e();if(t.text)return void(e.textContent=t.text);for(const o in t.attributes){const n=t.attributes[o];null===n?e.removeAttribute(o):e.setAttribute(o,n)}for(let o=0;o<t.children.length;++o)this._revertTemplateFromNode(e.childNodes[o],t.children[o])}}f(mf,ss);class pf{constructor(e){Object.assign(this,e)}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,o){const n=()=>Dn(e,t,o);return this.emitter.listenTo(this.observable,'change:'+this.attribute,n),()=>{this.emitter.stopListening(this.observable,'change:'+this.attribute,n)}}}class gf extends pf{activateDomEventListener(e,t,o){const n=(e,o)=>{(!t||o.target.matches(t))&&('function'==typeof this.eventNameOrFunction?this.eventNameOrFunction(o):this.observable.fire(this.eventNameOrFunction,o))};return this.emitter.listenTo(o.node,e,n),()=>{this.emitter.stopListening(o.node,e,n)}}}class ff extends pf{getValue(e){const t=super.getValue(e);return!Yn(t)&&(this.valueIfTrue||!0)}}var hf=o(11),bf=o.n(hf);class kf{constructor(e){this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Pc,this._unboundChildren=this.createCollection(),this._viewCollections.on('add',(t,o)=>{o.locale=e}),this.decorate('render')}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=mf.bind(this,this)}createCollection(){const e=new cf;return this._viewCollections.add(e),e}registerChild(e){P(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){P(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new mf(e)}extendTemplate(e){mf.extend(this.template,e)}render(){if(this.isRendered)throw new Za('ui-view-render-already-rendered: This View has already been rendered.');this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map((e)=>e.destroy())}}f(kf,Yc),f(kf,bc);var _f=o(14),wf=o.n(_f);class vf extends kf{constructor(e){super(e),this.body=this.createCollection()}render(){super.render(),this._renderBodyCollection()}destroy(){return this._bodyCollectionContainer.remove(),super.destroy()}_renderBodyCollection(){const e=this._bodyCollectionContainer=new mf({tag:'div',attributes:{class:['ck','ck-reset_all','ck-body','ck-rounded-corners']},children:this.body}).render();document.body.appendChild(e)}}var yf=o(16),xf=o.n(yf);class Cf extends kf{constructor(e){super(e),this.set('text'),this.set('for');const t=this.bindTemplate;this.setTemplate({tag:'label',attributes:{class:['ck','ck-label'],for:t.to('for')},children:[{text:t.to('text')}]})}}class Af extends vf{constructor(e){super(e);const t=i();this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(t),this.setTemplate({tag:'div',attributes:{class:['ck','ck-reset','ck-editor','ck-rounded-corners'],role:'application',dir:'ltr',lang:e.language,"aria-labelledby":`ck-editor__aria-label_${t}`},children:[this._voiceLabelView,{tag:'div',attributes:{class:['ck','ck-editor__top','ck-reset_all'],role:'presentation'},children:this.top},{tag:'div',attributes:{class:['ck','ck-editor__main'],role:'presentation'},children:this.main}]})}_createVoiceLabel(e){const o=this.t,t=new Cf;return t.text=o('af'),t.extendTemplate({attributes:{id:`ck-editor__aria-label_${e}`,class:'ck-voice-label'}}),t}}class Tf extends kf{constructor(e,t){super(e);const o=this.bindTemplate;t&&(this.element=this.editableElement=t),this.setTemplate({tag:'div',attributes:{class:['ck','ck-content','ck-editor__editable','ck-rounded-corners',o.to('isFocused',(e)=>e?'ck-focused':'ck-blurred')],contenteditable:o.to('isReadOnly',(e)=>!e)}}),this.set('isReadOnly',!1),this.set('isFocused',!1),this.externalElement=t}render(){super.render(),this.externalElement?this.template.apply(this.element=this.externalElement):this.editableElement=this.element}destroy(){this.externalElement&&this.template.revert(this.externalElement),super.destroy()}}class Pf extends Tf{constructor(e,o){super(e,o);const n=this.bindTemplate,i=this.t;this.set('name',null);this.extendTemplate({attributes:{role:'textbox',"aria-label":n.to('name',(e)=>i('ae',[e])),class:'ck-editor__editable_inline'}})}}var Ef=o(18),Sf=o.n(Ef);const Of=ni('px');class Rf extends kf{constructor(e){super(e);const t=this.bindTemplate;this.set('isActive',!1),this.set('isSticky',!1),this.set('limiterElement',null),this.set('limiterBottomOffset',50),this.set('viewportTopOffset',0),this.set('_marginLeft',null),this.set('_isStickyToTheLimiter',!1),this.set('_hasViewportTopOffset',!1),this.content=this.createCollection(),this._contentPanelPlaceholder=new mf({tag:'div',attributes:{class:['ck','ck-sticky-panel__placeholder'],style:{display:t.to('isSticky',(e)=>e?'block':'none'),height:t.to('isSticky',(e)=>e?Of(this._panelRect.height):null)}}}).render(),this._contentPanel=new mf({tag:'div',attributes:{class:['ck','ck-sticky-panel__content',t.if('isSticky','ck-sticky-panel__content_sticky'),t.if('_isStickyToTheLimiter','ck-sticky-panel__content_sticky_bottom-limit')],style:{width:t.to('isSticky',(e)=>e?Of(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to('_hasViewportTopOffset',(e)=>e?Of(this.viewportTopOffset):null),bottom:t.to('_isStickyToTheLimiter',(e)=>e?Of(this.limiterBottomOffset):null),marginLeft:t.to('_marginLeft')}},children:this.content}).render(),this.setTemplate({tag:'div',attributes:{class:['ck','ck-sticky-panel']},children:[this._contentPanelPlaceholder,this._contentPanel]})}render(){super.render(),this._checkIfShouldBeSticky(),this.listenTo($c.window,'scroll',()=>{this._checkIfShouldBeSticky()}),this.listenTo(this,'change:isActive',()=>{this._checkIfShouldBeSticky()})}_checkIfShouldBeSticky(){const e=this._panelRect=this._contentPanel.getBoundingClientRect();let t;this.limiterElement?(t=this._limiterRect=this.limiterElement.getBoundingClientRect(),this.isSticky=this.isActive&&t.top<this.viewportTopOffset&&this._panelRect.height+this.limiterBottomOffset<t.height):this.isSticky=!1,this.isSticky?(this._isStickyToTheLimiter=t.bottom<e.height+this.limiterBottomOffset+this.viewportTopOffset,this._hasViewportTopOffset=!this._isStickyToTheLimiter&&!!this.viewportTopOffset,this._marginLeft=this._isStickyToTheLimiter?null:Of(-$c.window.scrollX)):(this._isStickyToTheLimiter=!1,this._hasViewportTopOffset=!1,this._marginLeft=null)}}class If{constructor(e){if(Object.assign(this,e),e.actions&&e.keystrokeHandler)for(const t in e.actions){let o=e.actions[t];'string'==typeof o&&(o=[o]);for(const n of o)e.keystrokeHandler.set(n,(e,o)=>{this[t](),o()})}}get first(){return this.focusables.find(ii)||null}get last(){return this.focusables.filter(ii).slice(-1)[0]||null}get next(){return this._getFocusableItem(1)}get previous(){return this._getFocusableItem(-1)}get current(){let e=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((t,o)=>{const n=t.element===this.focusTracker.focusedElement;return n&&(e=o),n}),e)}focusFirst(){this._focus(this.first)}focusLast(){this._focus(this.last)}focusNext(){this._focus(this.next)}focusPrevious(){this._focus(this.previous)}_focus(e){e&&e.focus()}_getFocusableItem(e){const t=this.current,o=this.focusables.length;if(!o)return null;if(null===t)return this[1===e?'first':'last'];let n=(t+o+e)%o;do{const t=this.focusables.get(n);if(ii(t))return t;n=(n+o+e)%o}while(n!==t);return null}}class Vf extends kf{constructor(e){super(e),this.setTemplate({tag:'span',attributes:{class:['ck','ck-toolbar__separator']}})}}var Ff=o(20),Nf=o.n(Ff);class Mf extends kf{constructor(e){super(e);const t=this.bindTemplate;this.items=this.createCollection(),this.focusTracker=new lf,this.keystrokes=new Zg,this.set('isVertical',!1),this.set('className'),this._focusCycler=new If({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:['arrowleft','arrowup'],focusNext:['arrowright','arrowdown']}}),this.setTemplate({tag:'div',attributes:{class:['ck','ck-toolbar',t.if('isVertical','ck-toolbar_vertical'),t.to('className')]},children:this.items,on:{mousedown:ri(this)}})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on('add',(e,t)=>{this.focusTracker.add(t.element)}),this.items.on('remove',(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t){e.map((e)=>{'|'==e?this.items.add(new Vf):t.has(e)?this.items.add(t.create(e)):Ru.warn('toolbarview-item-unavailable: The requested toolbar item is unavailable.',{name:e})})}}var Df=o(22),Bf=o.n(Df);class Lf extends Af{constructor(e){super(e),this.stickyPanel=new Rf(e),this.toolbar=new Mf(e),this.editable=new Pf(e)}render(){super.render(),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}get editableElement(){return this.editable.element}}class zf{constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display='none',t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display='',t&&t.remove()}),this._replacedElements=[]}}class jf extends tf{constructor(e,t){super(t),this._elementReplacer=new zf,this.element=e,this.data.processor=new af,this.model.document.createRoot(),this.ui=new df(this,new Lf(this.locale)),On(this)}destroy(){return this.updateElement(),this._elementReplacer.restore(),this.ui.destroy(),super.destroy()}static create(e,t){return new Promise((o)=>{const n=new this(e,t);o(n.initPlugins().then(()=>n.ui.init()).then(()=>{n._elementReplacer.replace(e,n.ui.view.element),n.fire('uiReady')}).then(()=>n.editing.view.attachDomRoot(n.ui.view.editableElement)).then(()=>n.data.init(ai(e))).then(()=>{n.fire('dataReady'),n.fire('ready')}).then(()=>n))})}}f(jf,of),f(jf,nf);class qf{constructor(e){this.editor=e}destroy(){this.stopListening()}}f(qf,bc);class Wf{constructor(e){this.files=si(e),this._native=e}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}}class Uf extends vu{constructor(e){function t(e,t){t.preventDefault();const n=t.dropRange?[t.dropRange]:Array.from(o.selection.getRanges());o.fire('clipboardInput',{dataTransfer:t.dataTransfer,targetRanges:n})}super(e);const o=this.document;this.domEventType=['paste','copy','cut','drop','dragover'],this.listenTo(o,'paste',t,{priority:'low'}),this.listenTo(o,'drop',t,{priority:'low'})}onDomEvent(e){const t={dataTransfer:new Wf(e.clipboardData?e.clipboardData:e.dataTransfer)};'drop'==e.type&&(t.dropRange=li(this.view,e)),this.fire(e.type,e,t)}}const Hf=['figcaption','li'];class Kf extends qf{static get pluginName(){return'Clipboard'}init(){function e(e,n){const r=n.dataTransfer;n.preventDefault();const a=t.data.toView(t.model.getSelectedContent(o.selection));i.fire('clipboardOutput',{dataTransfer:r,content:a,method:e.name})}const t=this.editor,o=t.model.document,n=t.editing.view,i=n.document;this._htmlDataProcessor=new af,n.addObserver(Uf),this.listenTo(i,'clipboardInput',(e,o)=>{if(t.isReadOnly)return;const i=o.dataTransfer;let r='';i.getData('text/html')?r=ci(i.getData('text/html')):i.getData('text/plain')&&(r=di(i.getData('text/plain'))),r=this._htmlDataProcessor.toView(r),this.fire('inputTransformation',{content:r}),n.scrollToTheSelection()},{priority:'low'}),this.listenTo(this,'inputTransformation',(e,t)=>{if(!t.content.isEmpty){const e=this.editor.data,n=this.editor.model,i=e.toModel(t.content,'$clipboardHolder');if(0==i.childCount)return;n.insertContent(i,o.selection)}},{priority:'low'}),this.listenTo(i,'copy',e,{priority:'low'}),this.listenTo(i,'cut',(o,n)=>{t.isReadOnly?n.preventDefault():e(o,n)},{priority:'low'}),this.listenTo(i,'clipboardOutput',(e,n)=>{n.content.isEmpty||(n.dataTransfer.setData('text/html',this._htmlDataProcessor.toData(n.content)),n.dataTransfer.setData('text/plain',ui(n.content))),'cut'==n.method&&t.model.deleteContent(o.selection)},{priority:'low'})}}class Gf{constructor(e){function t(){this.isEnabled=!1}this.editor=e,this.set('value',void 0),this.set('isEnabled',!1),this.decorate('execute'),this.listenTo(this.editor.model.document,'change',()=>{this.refresh()}),this.on('execute',(e)=>{this.isEnabled||e.stop()},{priority:'high'}),this.listenTo(e,'change:isReadOnly',(e,o,n)=>{n?(this.on('change:isEnabled',t,{priority:'lowest'}),this.isEnabled=!1):(this.off('change:isEnabled',t),this.refresh())})}refresh(){this.isEnabled=!0}execute(){}destroy(){this.stopListening()}}f(Gf,bc);class $f extends Gf{execute(){const e=this.editor.model,t=e.document;e.change((o)=>{mi(this.editor.model,o,t.selection,e.schema),this.fire('afterExecute',{writer:o})})}}class Jf extends Zc{constructor(e){super(e);const t=this.document;t.on('keydown',(e,o)=>{if(this.isEnabled&&o.keyCode==Dc.enter){let n;t.once('enter',(e)=>n=e,{priority:'highest'}),t.fire('enter',new wu(t,o.domEvent)),n&&n.stop.called&&e.stop()}})}observe(){}}class Qf extends qf{static get pluginName(){return'Enter'}init(){const e=this.editor,t=e.editing.view,o=t.document;t.addObserver(Jf),e.commands.add('enter',new $f(e)),this.listenTo(o,'enter',(o,n)=>{e.execute('enter'),n.preventDefault(),t.scrollToTheSelection()},{priority:'low'})}}class Yf{constructor(e,t=20){this.model=e,this.size=0,this.limit=t,this.isLocked=!1,this._changeCallback=(e,t)=>{'transparent'!=t.type&&t!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on('change',this._changeCallback),this.model.document.selection.on('change:range',this._selectionChangeCallback),this.model.document.selection.on('change:attribute',this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=new Bg),this._batch}input(e){this.size+=e,this.size>=this.limit&&this._reset(!0)}lock(){this.isLocked=!0}unlock(){this.isLocked=!1}destroy(){this.model.document.off('change',this._changeCallback),this.model.document.selection.off('change:range',this._selectionChangeCallback),this.model.document.selection.off('change:attribute',this._selectionChangeCallback)}_reset(e){(!this.isLocked||e)&&(this._batch=null,this.size=0)}}class Xf extends Gf{constructor(e,t){super(e),this._buffer=new Yf(e.model,t)}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,o=t.document,n=e.text||'',i=n.length,r=e.range||o.selection.getFirstRange(),a=e.resultRange;t.enqueueChange(this._buffer.batch,(e)=>{const t=r.isCollapsed;this._buffer.lock(),t||e.remove(r),n&&e.insertText(n,o.selection.getAttributes(),r.start),a?e.setSelection(a):t&&e.setSelection(r.start.getShiftedBy(i)),this._buffer.unlock(),this._buffer.input(i)})}}class Zf extends qf{static get pluginName(){return'Input'}init(){const e=this.editor,t=e.editing.view,o=new Xf(e,e.config.get('typing.undoStep')||20);e.commands.add('input',o),this.listenTo(t.document,'keydown',(e,t)=>{this._handleKeydown(t,o)},{priority:'lowest'}),this.listenTo(t.document,'mutations',(e,t,o)=>{this._handleMutations(t,o)})}_handleKeydown(e,t){const o=this.editor.model,n=o.document,i=t.buffer;!t.isEnabled||fi(e)||n.selection.isCollapsed||(i.lock(),o.enqueueChange(i.batch,()=>{this.editor.model.deleteContent(n.selection)}),i.unlock())}_handleMutations(e,t){new eh(this.editor).handle(e,t)}}class eh{constructor(e){this.editor=e,this.editing=this.editor.editing}handle(e,t){if(_i(e))this._handleContainerChildrenMutations(e,t);else for(const o of e)this._handleTextMutation(o,t),this._handleTextNodeInsertion(o)}_handleContainerChildrenMutations(e,t){const o=ki(e);if(!o)return;const n=this.editor.editing.view.domConverter,i=n.mapViewToDom(o),r=new Jc,a=this.editor.data.toModel(r.domToView(i)).getChild(0),s=this.editor.editing.mapper.toModelElement(o);if(!s)return;const l=Array.from(a.getChildren()),d=Array.from(s.getChildren());if(!wi(l)||!wi(d))return;const c=l.map((e)=>e.data).join('').replace(/\u00A0/g,' '),u=d.map((e)=>e.data).join('');if(u===c)return;const m=Te(u,c),{firstChangeAt:p,insertions:g,deletions:f}=vi(m);let h=null;t&&(h=this.editing.mapper.toModelRange(t.getFirstRange()));const b=c.substr(p,g),k=Gu.createFromParentsAndOffsets(s,p,s,p+f);this.editor.execute('input',{text:b,range:k,resultRange:h})}_handleTextMutation(e,t){if('text'!=e.type)return;const o=e.newText.replace(/\u00A0/g,' '),n=e.oldText.replace(/\u00A0/g,' '),i=Te(n,o),{firstChangeAt:r,insertions:a,deletions:s}=vi(i);let l=null;t&&(l=this.editing.mapper.toModelRange(t.getFirstRange()));const d=new xc(e.node,r),c=this.editing.mapper.toModelPosition(d),u=Gu.createFromPositionAndShift(c,s),m=o.substr(r,a);this.editor.execute('input',{text:m,range:u,resultRange:l})}_handleTextNodeInsertion(e){if('children'==e.type){const t=bi(e),o=new xc(e.node,t.index),n=this.editing.mapper.toModelPosition(o),i=t.values[0].data;this.editor.execute('input',{text:i.replace(/\u00A0/g,' '),range:new Gu(n)})}}}const th=[te('arrowUp'),te('arrowRight'),te('arrowDown'),te('arrowLeft'),9,16,17,18,20,27,33,34,35,36,229];for(let n=112;135>=n;n++)th.push(n);class oh extends Gf{constructor(e,t){super(e),this.direction=t,this._buffer=new Yf(e.model,e.config.get('typing.undoStep'))}execute(e={}){const t=this.editor.model,o=t.document;t.enqueueChange(this._buffer.batch,(n)=>{this._buffer.lock();const i=new Yu(o.selection),r=i.isCollapsed;if(i.isCollapsed&&t.modifySelection(i,{direction:this.direction,unit:e.unit}),this._shouldEntireContentBeReplacedWithParagraph(e.sequence||1))return void this._replaceEntireContentWithParagraph(n);if(i.isCollapsed)return;let a=0;i.getFirstRange().getMinimalFlatRanges().forEach((e)=>{a+=Y(e.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(i,{doNotResetEntireContent:r}),this._buffer.input(a),n.setSelection(i),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(1<e)return!1;const t=this.editor.model,o=t.document,n=o.selection,i=t.schema.getLimitElement(n),r=n.isCollapsed&&n.containsEntireContent(i);if(!r)return!1;if(!t.schema.checkChild(i,'paragraph'))return!1;const a=i.getChild(0);return!(a&&'paragraph'===a.name)}_replaceEntireContentWithParagraph(e){const t=this.editor.model,o=t.document,n=o.selection,i=t.schema.getLimitElement(n),r=new Wu('paragraph');e.remove(Gu.createIn(i)),e.insert(r,i),e.setSelection(r,0)}}class nh extends Zc{constructor(e){super(e);const t=e.document;let o=0;t.on('keyup',(e,t)=>{(t.keyCode==Dc.delete||t.keyCode==Dc.backspace)&&(o=0)}),t.on('keydown',(e,n)=>{const i={};if(n.keyCode==Dc.delete)i.direction='forward',i.unit='character';else if(n.keyCode==Dc.backspace)i.direction='backward',i.unit='codePoint';else return;const r=Fc.isMac?n.altKey:n.ctrlKey;i.unit=r?'word':i.unit,i.sequence=++o;let a;t.once('delete',(e)=>a=e,{priority:'highest'}),t.fire('delete',new wu(t,n.domEvent,i)),a&&a.stop.called&&e.stop()})}observe(){}}class ih extends qf{static get pluginName(){return'Delete'}init(){const e=this.editor,t=e.editing.view,o=t.document;t.addObserver(nh),e.commands.add('forwardDelete',new oh(e,'forward')),e.commands.add('delete',new oh(e,'backward')),this.listenTo(o,'delete',(o,n)=>{e.execute('forward'==n.direction?'forwardDelete':'delete',{unit:n.unit,sequence:n.sequence}),n.preventDefault(),t.scrollToTheSelection()})}}class rh extends qf{static get requires(){return[Zf,ih]}static get pluginName(){return'Typing'}}class ah extends Gf{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh()}refresh(){this.isEnabled=0<this._stack.length}addBatch(e){const t=this.editor.model.document.selection,o={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:o}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,o){const n=this.editor.model,i=n.document,r=[];for(const n of e){const e=yi(n,o),t=e.find((e)=>e.start.root!=i.graveyard);t&&r.push(t)}r.length&&n.change((e)=>{e.setSelection(r,{backward:t})})}_undo(e,t){const o=this.editor.model,n=o.document;this._createdBatches.add(t);const i=e.deltas.slice();i.reverse();for(const r of i)if(r.operations.some((e)=>e.isDocumentOperation)){const e=r.baseVersion+r.operations.length,i=Array.from(n.history.getDeltas(e)),a=o.transformDeltas([r.getReversed()],i,!0),s=a.deltasA;for(const e of s){e.baseVersion=n.version,t.addDelta(e);for(const t of e.operations)o.applyOperation(t);n.history.setDeltaAsUndone(r,e)}}}}class sh extends ah{execute(e=null){const t=e?this._stack.findIndex((t)=>t.batch==e):this._stack.length-1,o=this._stack.splice(t,1)[0],n=new Bg;this.editor.model.enqueueChange(n,()=>{this._undo(o.batch,n);const e=this.editor.model.document.history.getDeltas(o.batch.baseVersion);this._restoreSelection(o.selection.ranges,o.selection.isBackward,e),this.fire('revert',o.batch,n)}),this.refresh()}}class lh extends ah{execute(){const e=this._stack.pop(),t=new Bg;this.editor.model.enqueueChange(t,()=>{const o=e.batch.deltas[e.batch.deltas.length-1],n=o.baseVersion+o.operations.length,i=this.editor.model.document.history.getDeltas(n);this._restoreSelection(e.selection.ranges,e.selection.isBackward,i),this._undo(e.batch,t)}),this.refresh()}}class dh extends qf{constructor(e){super(e),this._batchRegistry=new WeakSet}init(){const e=this.editor;this._undoCommand=new sh(e),this._redoCommand=new lh(e),e.commands.add('undo',this._undoCommand),e.commands.add('redo',this._redoCommand),this.listenTo(e.model,'applyOperation',(e,t)=>{const o=t[0];if(o.isDocumentOperation){const e=o.delta.batch;this._batchRegistry.has(e)||'transparent'==e.type||(this._redoCommand._createdBatches.has(e)?this._undoCommand.addBatch(e):!this._undoCommand._createdBatches.has(e)&&(this._undoCommand.addBatch(e),this._redoCommand.clearStack()),this._batchRegistry.add(e))}},{priority:'highest'}),this.listenTo(this._undoCommand,'revert',(e,t,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set('CTRL+Z','undo'),e.keystrokes.set('CTRL+Y','redo'),e.keystrokes.set('CTRL+SHIFT+Z','redo')}}var ch=o(24),uh=o.n(ch);class mh extends kf{constructor(){super();const e=this.bindTemplate;this.set('content',''),this.set('viewBox','0 0 20 20'),this.set('fillColor',''),this.setTemplate({tag:'svg',ns:'http://www.w3.org/2000/svg',attributes:{class:['ck','ck-icon'],viewBox:e.to('viewBox')}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on('change:content',()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on('change:fillColor',()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),'image/svg+xml'),t=e.querySelector('svg'),o=t.getAttribute('viewBox');for(o&&(this.viewBox=o),this.element.innerHTML='';0<t.childNodes.length;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll('.ck-icon__fill').forEach((e)=>{e.style.fill=this.fillColor})}}var ph=o(26),gh=o.n(ph);class fh extends kf{constructor(e){super(e),this.set('text',''),this.set('position','s');const t=this.bindTemplate;this.setTemplate({tag:'span',attributes:{class:['ck','ck-tooltip',t.to('position',(e)=>'ck-tooltip_'+e),t.if('text','ck-hidden',(e)=>!e.trim())]},children:[{tag:'span',attributes:{class:['ck','ck-tooltip__text']},children:[{text:t.to('text')}]}]})}}var hh=o(28),bh=o.n(hh);class kh extends kf{constructor(e){super(e);const t=this.bindTemplate;this.set('icon'),this.set('isEnabled',!0),this.set('isOn',!1),this.set('isVisible',!0),this.set('keystroke'),this.set('label'),this.set('tabindex',-1),this.set('tooltip'),this.set('tooltipPosition','s'),this.set('type','button'),this.set('withText',!1),this.children=this.createCollection(),this.tooltipView=this._createTooltipView(),this.labelView=this._createLabelView(),this.iconView=new mh,this.iconView.extendTemplate({attributes:{class:'ck-button__icon'}}),this.bind('_tooltipString').to(this,'tooltip',this,'label',this,'keystroke',this._getTooltipString.bind(this)),this.setTemplate({tag:'button',attributes:{class:['ck','ck-button',t.to('isEnabled',(e)=>e?'ck-enabled':'ck-disabled'),t.if('isVisible','ck-hidden',(e)=>!e),t.to('isOn',(e)=>e?'ck-on':'ck-off'),t.if('withText','ck-button_with-text')],type:t.to('type',(e)=>e?e:'button'),tabindex:t.to('tabindex')},children:this.children,on:{mousedown:t.to((e)=>{e.preventDefault()}),click:t.to((e)=>{this.isEnabled?this.fire('execute'):e.preventDefault()})}})}render(){super.render(),this.icon&&(this.iconView.bind('content').to(this,'icon'),this.children.add(this.iconView)),this.children.add(this.tooltipView),this.children.add(this.labelView)}focus(){this.element.focus()}_createTooltipView(){const e=new fh;return e.bind('text').to(this,'_tooltipString'),e.bind('position').to(this,'tooltipPosition'),e}_createLabelView(){const e=new kf;return e.setTemplate({tag:'span',attributes:{class:['ck','ck-button__label']},children:[{text:this.bindTemplate.to('label')}]}),e}_getTooltipString(e,t,o){return e?'string'==typeof e?e:(o&&(o=ne(o)),e instanceof Function?e(t,o):`${t}${o?` (${o})`:''}`):''}}var _h=o(30),wh=o.n(_h),vh=o(31),yh=o.n(vh);class xh extends qf{init(){const e=this.editor,o=e.t;this._addButton('undo',o('ag'),'CTRL+Z',wh.a),this._addButton('redo',o('ah'),'CTRL+Y',yh.a)}_addButton(e,t,o,n){const i=this.editor;i.ui.componentFactory.add(e,(r)=>{const a=i.commands.get(e),s=new kh(r);return s.set({label:t,icon:n,keystroke:o,tooltip:!0}),s.bind('isEnabled').to(a,'isEnabled'),this.listenTo(s,'execute',()=>i.execute(e)),s})}}class Ch extends qf{static get requires(){return[dh,xh]}static get pluginName(){return'Undo'}}class Ah extends qf{static get requires(){return[Kf,Qf,rh,Ch]}static get pluginName(){return'Essentials'}}class Th{constructor(){const e=new window.FileReader;this._reader=e,this.set('loaded',0),e.onprogress=(e)=>{this.loaded=e.loaded}}get error(){return this._reader.error}read(e){const t=this._reader;return this.total=e.size,new Promise((o,n)=>{t.onload=()=>{o(t.result)},t.onerror=()=>{n('error')},t.onabort=()=>{n('aborted')},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}f(Th,bc);class Ph extends qf{static get pluginName(){return'FileRepository'}init(){this.loaders=new Pc,this.set('uploaded',0),this.set('uploadTotal',null),this.bind('uploadedPercent').to(this,'uploaded',this,'uploadTotal',(e,t)=>t?100*(e/t):0)}getLoader(e){for(const t of this.loaders)if(t.file==e)return t;return null}createLoader(e){if(!this.createUploadAdapter)return Ru.error('filerepository-no-upload-adapter: Upload adapter is not defined.'),null;const t=new Eh(e);return t._adapter=this.createUploadAdapter(t),this.loaders.add(t),t.on('change:uploaded',()=>{let e=0;for(const t of this.loaders)e+=t.uploaded;this.uploaded=e}),t.on('change:uploadTotal',()=>{let e=0;for(const t of this.loaders)t.uploadTotal&&(e+=t.uploadTotal);this.uploadTotal=e}),t}destroyLoader(e){const t=e instanceof Eh?e:this.getLoader(e);t._destroy(),this.loaders.remove(t)}}f(Ph,bc);class Eh{constructor(e,t){this.id=i(),this.file=e,this._adapter=t,this._reader=new Th,this.set('status','idle'),this.set('uploaded',0),this.set('uploadTotal',null),this.bind('uploadedPercent').to(this,'uploaded',this,'uploadTotal',(e,t)=>t?100*(e/t):0),this.set('uploadResponse',null)}read(){if('idle'!=this.status)throw new Za('filerepository-read-wrong-status: You cannot call read if the status is different than idle.');return this.status='reading',this._reader.read(this.file).then((e)=>(this.status='idle',e)).catch((e)=>{if('aborted'===e)throw this.status='aborted','aborted';throw this.status='error',this._reader.error})}upload(){if('idle'!=this.status)throw new Za('filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.');return this.status='uploading',this._adapter.upload().then((e)=>(this.uploadResponse=e,this.status='idle',e)).catch((e)=>{if('aborted'===this.status)throw'aborted';throw this.status='error',e})}abort(){const e=this.status;this.status='aborted','reading'==e&&this._reader.abort(),'uploading'==e&&this._adapter.abort&&this._adapter.abort(),this._destroy()}_destroy(){this._reader=void 0,this._adapter=void 0,this.data=void 0,this.uploadResponse=void 0,this.file=void 0}}f(Eh,bc);const Sh='ckCsrfToken',Oh=40,Rh='abcdefghijklmnopqrstuvwxyz0123456789';class Ih extends qf{static get requires(){return[Ph]}static get pluginName(){return'CKFinderUploadAdapter'}init(){const e=this.editor.config.get('ckfinder.uploadUrl');e&&(this.editor.plugins.get(Ph).createUploadAdapter=(t)=>new Vh(t,e,this.editor.t))}}class Vh{constructor(e,o,n){this.loader=e,this.url=o,this.t=n}upload(){return new Promise((e,t)=>{this._initRequest(),this._initListeners(e,t),this._sendRequest()})}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open('POST',this.url,!0),e.responseType='json'}_initListeners(e,o){const n=this.xhr,i=this.loader,r=this.t,t=r('a')+` ${i.file.name}.`;n.addEventListener('error',()=>o(t)),n.addEventListener('abort',()=>o()),n.addEventListener('load',()=>{const i=n.response;return i&&i.uploaded?void e({default:i.url}):o(i&&i.error&&i.error.message?i.error.message:t)}),n.upload&&n.upload.addEventListener('progress',(e)=>{e.lengthComputable&&(i.uploadTotal=e.total,i.uploaded=e.loaded)})}_sendRequest(){const e=new FormData;e.append('upload',this.loader.file),e.append('ckCsrfToken',Ci()),this.xhr.send(e)}}class Fh{constructor(e,t,o){let n;if('function'==typeof o)n=o;else{n=()=>{e.execute(o)}}e.model.document.on('change',(o,i)=>{if('transparent'==i.type)return;const r=Array.from(e.model.document.differ.getChanges()),a=r[0];if(1!=r.length||'insert'!==a.type||'$text'!=a.name||1!=a.length)return;const s=a.position.textNode||a.position.nodeAfter;if(!s.parent.is('paragraph'))return;const l=t.exec(s.data);l&&e.model.enqueueChange((e)=>{const t=Gu.createFromParentsAndOffsets(s.parent,0,s.parent,l[0].length);e.remove(t),n({match:l})})})}}class Nh{constructor(e,t,o){let n,i,r,a;t instanceof RegExp?n=t:r=t,'string'==typeof o?i=o:a=o,r=r||((e)=>{let t;const o=[],i=[];for(;null!==(t=n.exec(e))&&!(t&&4>t.length);){let{index:e,1:n,2:r,3:a}=t;e+=t[0].length-(n+r+a).length;const s=[e,e+n.length],l=[e+n.length+r.length,e+n.length+r.length+a.length];o.push(s),o.push(l),i.push([e+n.length,e+n.length+r.length])}return{remove:o,format:i}}),a=a||((e,t)=>{for(const o of t)e.setAttribute(i,!0,o);e.removeSelectionAttribute(i)}),e.model.document.on('change',(t,o)=>{if('transparent'==o.type)return;const n=e.model.document.selection;if(!n.isCollapsed)return;const s=Array.from(e.model.document.differ.getChanges()),l=s[0];if(1!=s.length||'insert'!==l.type||'$text'!=l.name||1!=l.length)return;const d=n.focus.parent,c=Ei(d).slice(0,n.focus.offset),u=r(c),m=Si(d,u.format),p=Si(d,u.remove);m.length&&p.length&&e.model.enqueueChange((t)=>{const o=e.model.schema.getValidRanges(m,i);a(t,o);for(const e of p.reverse())t.remove(e)})})}}class Mh extends qf{static get pluginName(){return'Autoformat'}afterInit(){this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats()}_addListAutoformats(){const e=this.editor.commands;e.get('bulletedList')&&new Fh(this.editor,/^[*-]\s$/,'bulletedList'),e.get('numberedList')&&new Fh(this.editor,/^\d+[.|)]\s$/,'numberedList')}_addBasicStylesAutoformats(){const e=this.editor.commands;e.get('bold')&&(new Nh(this.editor,/(\*\*)([^*]+)(\*\*)$/g,'bold'),new Nh(this.editor,/(__)([^_]+)(__)$/g,'bold')),e.get('italic')&&(new Nh(this.editor,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,'italic'),new Nh(this.editor,/(?:^|[^_])(_)([^_]+)(_)$/g,'italic')),e.get('code')&&new Nh(this.editor,/(`)([^`]+)(`)$/g,'code')}_addHeadingAutoformats(){const e=this.editor.commands.get('heading');e&&e.modelElements.filter((e)=>e.match(/^heading[1-6]$/)).forEach((e)=>{const t=e[7],o=new RegExp(`^(#{${t}})\\s$`);new Fh(this.editor,o,()=>{this.editor.execute('heading',{value:e})})})}_addBlockQuoteAutoformats(){this.editor.commands.get('blockQuote')&&new Fh(this.editor,/^>\s$/,'blockQuote')}}class Dh extends Gf{constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.hasAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,o=t.document,n=o.selection,i=e.forceValue===void 0?!this.value:e.forceValue;t.change((e)=>{if(n.isCollapsed)i?e.setSelectionAttribute(this.attributeKey,!0):e.removeSelectionAttribute(this.attributeKey);else{const o=t.schema.getValidRanges(n.getRanges(),this.attributeKey);for(const t of o)i?e.setAttribute(this.attributeKey,i,t):e.removeAttribute(this.attributeKey,t)}})}}const Bh='bold';class Lh extends qf{init(){const e=this.editor;e.model.schema.extend('$text',{allowAttributes:Bh}),e.conversion.attributeToElement({model:Bh,view:'strong',upcastAlso:['b',{styles:{"font-weight":'bold'}}]}),e.commands.add(Bh,new Dh(e,Bh)),e.keystrokes.set('CTRL+B',Bh)}}var zh=o(32),jh=o.n(zh);const qh='bold';class Wh extends qf{init(){const e=this.editor,o=e.t;e.ui.componentFactory.add(qh,(t)=>{const n=e.commands.get(qh),i=new kh(t);return i.set({label:o('c'),icon:jh.a,keystroke:'CTRL+B',tooltip:!0}),i.bind('isOn','isEnabled').to(n,'value','isEnabled'),this.listenTo(i,'execute',()=>e.execute(qh)),i})}}class Uh extends qf{static get requires(){return[Lh,Wh]}static get pluginName(){return'Bold'}}const Hh='italic';class Kh extends qf{init(){const e=this.editor;e.model.schema.extend('$text',{allowAttributes:Hh}),e.conversion.attributeToElement({model:Hh,view:'i',upcastAlso:['em',{styles:{"font-style":'italic'}}]}),e.commands.add(Hh,new Dh(e,Hh)),e.keystrokes.set('CTRL+I',Hh)}}var Gh=o(33),$h=o.n(Gh);const Jh='italic';class Qh extends qf{init(){const e=this.editor,o=e.t;e.ui.componentFactory.add(Jh,(t)=>{const n=e.commands.get(Jh),i=new kh(t);return i.set({label:o('d'),icon:$h.a,keystroke:'CTRL+I',tooltip:!0}),i.bind('isOn','isEnabled').to(n,'value','isEnabled'),this.listenTo(i,'execute',()=>e.execute(Jh)),i})}}class Yh extends qf{static get requires(){return[Kh,Qh]}static get pluginName(){return'Italic'}}class Xh extends Gf{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document,o=e.schema,n=Array.from(t.selection.getSelectedBlocks());e.change((e)=>{if(this.value)this._removeQuote(e,n.filter(Ri));else{const t=n.filter((e)=>Ri(e)||Vi(o,e));this._applyQuote(e,t)}})}_getValue(){const e=Oi(this.editor.model.document.selection.getSelectedBlocks());return!!(e&&Ri(e))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,o=Oi(e.getSelectedBlocks());return!!o&&Vi(t,o)}_removeQuote(e,t){Ii(t).reverse().forEach((t)=>{if(t.start.isAtStart&&t.end.isAtEnd)return void e.unwrap(t.start.parent);if(t.start.isAtStart){const o=Ku.createBefore(t.start.parent);return void e.move(t,o)}t.end.isAtEnd||e.split(t.end);const o=Ku.createAfter(t.end.parent);e.move(t,o)})}_applyQuote(e,t){const o=[];Ii(t).reverse().forEach((t)=>{let n=Ri(t.start);n||(n=new Wu('blockQuote'),e.wrap(t,n)),o.push(n)}),o.reverse().reduce((t,o)=>t.nextSibling==o?(e.merge(Ku.createAfter(t)),t):o)}}class Zh extends qf{init(){const e=this.editor,t=e.model.schema;e.commands.add('blockQuote',new Xh(e)),t.register('blockQuote',{allowWhere:'$block',allowContentOf:'$root'}),t.addChildCheck((e,t)=>{if(e.endsWith('blockQuote')&&'blockQuote'==t.name)return!1}),e.conversion.elementToElement({model:'blockQuote',view:'blockquote'})}afterInit(){const e=this.editor,t=e.commands.get('blockQuote');this.listenTo(this.editor.editing.view.document,'enter',(e,o)=>{const n=this.editor.model.document,i=n.selection.getLastPosition().parent;n.selection.isCollapsed&&i.isEmpty&&t.value&&(this.editor.execute('blockQuote'),this.editor.editing.view.scrollToTheSelection(),o.preventDefault(),e.stop())})}}var eb=o(34),tb=o.n(eb),ob=o(35),nb=o.n(ob);class ib extends qf{init(){const e=this.editor,o=e.t;e.ui.componentFactory.add('blockQuote',(t)=>{const n=e.commands.get('blockQuote'),i=new kh(t);return i.set({label:o('b'),icon:tb.a,tooltip:!0}),i.bind('isOn','isEnabled').to(n,'value','isEnabled'),this.listenTo(i,'execute',()=>e.execute('blockQuote')),i})}}class rb extends qf{static get requires(){return[Zh,ib]}static get pluginName(){return'BlockQuote'}}const ab=/^data:(\S*?);base64,/;class sb{constructor(e,t,o){if(!e)throw new Error('File must be provided');if(!t)throw new Error('Token must be provided');if(!o)throw new Error('Api address must be provided');this.file=Ni(e)?Fi(e):e,this._token=t,this._apiAddress=o}onProgress(e){return this.on('progress',(t,o)=>e(o)),this}onError(e){return this.once('error',(t,o)=>e(o)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open('POST',this._apiAddress),e.setRequestHeader('Authorization',this._token.value),e.responseType='json',this.xhr=e}_attachXHRListeners(){function e(e){return()=>t.fire('error',e)}const t=this,o=this.xhr;o.addEventListener('error',e('Network Error')),o.addEventListener('abort',e('Abort')),o.upload&&o.upload.addEventListener('progress',(e)=>{e.lengthComputable&&this.fire('progress',{total:e.total,uploaded:e.loaded})}),o.addEventListener('load',()=>{const e=o.status,t=o.response;if(200>e||299<e)return this.fire('error',t.message||t.error)})}_sendRequest(){const e=new FormData,t=this.xhr;return e.append('file',this.file),new Promise((o,n)=>{t.addEventListener('load',()=>{const e=t.status,i=t.response;return 200>e||299<e?n(i.message||i.error):o(i)}),t.addEventListener('error',()=>n('Network Error')),t.addEventListener('abort',()=>n('Abort')),t.send(e)})}}f(sb,ss);const lb={refreshInterval:36e5,autoRefresh:!0};class db{constructor(e,t=lb){if(!e)throw new Error('`tokenUrl` must be provided');this.set('value',t.initValue),this._tokenUrl=e,this._options=Object.assign({},lb,t)}init(){return new Promise((e,t)=>(this._options.autoRefresh&&this._startRefreshing(),this.value?void e(this):void this._refreshToken().then(e).catch(t)))}_refreshToken(){return new Promise((e,t)=>{const o=new XMLHttpRequest;o.open('GET',this._tokenUrl),o.addEventListener('load',()=>{const n=o.status,i=o.response;return 200>n||299<n?t('Cannot download new token!'):(this.set('value',i),e(this))}),o.addEventListener('error',()=>t('Network Error')),o.addEventListener('abort',()=>t('Abort')),o.send()})}_startRefreshing(){this._refreshInterval=setInterval(this._refreshToken.bind(this),this._options.refreshInterval)}_stopRefreshing(){clearInterval(this._refreshInterval)}static create(e,t=lb){const o=new db(e,t);return o.init()}}f(db,bc);class cb extends qf{init(){const e=this.editor,t=e.config,o=t.get('cloudServices')||{};for(const e in o)this[e]=o[e];return this.tokenUrl?(this.token=new cb.Token(this.tokenUrl),this.token.init()):void(this.token=null)}}cb.Token=db;class ub extends qf{static get requires(){return[Ph,cb]}init(){const e=this.editor,t=e.plugins.get(cb),o=t.token,n=t.uploadUrl;o&&(this._uploadGateway=new ub._UploadGateway(o,n),e.plugins.get(Ph).createUploadAdapter=(e)=>new mb(this._uploadGateway,e))}}class mb{constructor(e,t){this.uploadGateway=e,this.loader=t}upload(){return this.fileUploader=this.uploadGateway.upload(this.loader.file),this.fileUploader.on('progress',(e,t)=>{this.loader.uploadTotal=t.total,this.loader.uploaded=t.uploaded}),this.fileUploader.send()}abort(){this.fileUploader.abort()}}ub._UploadGateway=class{constructor(e,t){if(!e)throw new Error('Token must be provided');if(!t)throw new Error('Api address must be provided');this._token=e,this._apiAddress=t}upload(e){return new sb(e,this._token,this._apiAddress)}};class pb{constructor(){this._stack=[]}add(e,t){const o=this._stack,n=o[0];this._insertDescriptor(e);const i=o[0];n===i||Li(n,i)||this.fire('change:top',{oldDescriptor:n,newDescriptor:i,writer:t})}remove(e,t){const o=this._stack,n=o[0];this._removeDescriptor(e);const i=o[0];n===i||Li(n,i)||this.fire('change:top',{oldDescriptor:n,newDescriptor:i,writer:t})}_insertDescriptor(e){const t=this._stack,o=t.findIndex((t)=>t.id===e.id);if(!Li(e,t[o])){-1<o&&t.splice(o,1);let n=0;for(;t[n]&&zi(t[n],e);)n++;t.splice(n,0,e)}}_removeDescriptor(e){const t=this._stack,o=t.findIndex((t)=>t.id===e);-1<o&&t.splice(o,1)}}f(pb,ss);const gb=Symbol('isWidget'),fb=Symbol('label'),hb='ck-widget',bb='ck-widget_selected',kb=Symbol('isImage');class _b extends qf{init(){const e=this.editor,o=e.model.schema,n=e.t,t=e.conversion;o.register('image',{isObject:!0,isBlock:!0,allowWhere:'$block',allowAttributes:['alt','src','srcset']}),t.for('dataDowncast').add(ht({model:'image',view:(e,t)=>Zi(t)})),t.for('editingDowncast').add(ht({model:'image',view:(e,t)=>Ji(Zi(t),t,n('e'))})),t.for('downcast').add(Bi('src')).add(Bi('alt')).add(Di()),t.for('upcast').add(Yt({view:{name:'img',attributes:{src:!0}},model:(e,t)=>t.createElement('image',{src:e.getAttribute('src')})})).add(Zt({view:{name:'img',key:'alt'},model:'alt'})).add(Zt({view:{name:'img',key:'srcset'},model:{key:'srcset',value:(e)=>{const t={data:e.getAttribute('srcset')};return e.hasAttribute('width')&&(t.width=e.getAttribute('width')),t}}})).add(Mi())}}class wb extends vu{constructor(e){super(e),this.domEventType='mousedown'}onDomEvent(e){this.fire(e.type,e)}}var vb=o(37),yb=o.n(vb);const xb=oe('Ctrl+A');class Cb extends qf{static get pluginName(){return'Widget'}init(){const e=this.editor.editing.view,t=e.document;this._previouslySelected=new Set,this.editor.editing.downcastDispatcher.on('selection',(e,t,o)=>{this._clearPreviouslySelectedWidgets(o.writer);const n=o.writer,i=n.document.selection,r=i.getSelectedElement();for(const a of i.getRanges())for(const e of a){const t=e.item;t.is('element')&&qi(t)&&(n.addClass(bb,t),this._previouslySelected.add(t),t==r&&n.setSelection(i.getRanges(),{fake:!0,label:Ki(r)}))}},{priority:'low'}),e.addObserver(wb),this.listenTo(t,'mousedown',(...e)=>this._onMousedown(...e)),this.listenTo(t,'keydown',(...e)=>this._onKeydown(...e),{priority:'high'}),this.listenTo(t,'delete',(e,t)=>{this._handleDelete('forward'==t.direction)&&(t.preventDefault(),e.stop())},{priority:'high'})}_onMousedown(e,t){const o=this.editor,n=o.editing.view,i=n.document;let r=t.target;if(!or(r)&&(qi(r)||(r=r.findAncestor(qi),!!r))){t.preventDefault(),i.isFocused||n.focus();const e=o.editing.mapper.toModelElement(r);this._setSelectionOverElement(e)}}_onKeydown(e,t){const o=t.keyCode,n=o==Dc.delete||o==Dc.arrowdown||o==Dc.arrowright;let i=!1;er(o)?i=this._handleArrowKeys(n):tr(t)&&(i=this._selectAllNestedEditableContent()||this._selectAllContent()),i&&(t.preventDefault(),e.stop())}_handleDelete(e){if(this.editor.isReadOnly)return;const t=this.editor.model.document,o=t.selection;if(!o.isCollapsed)return;const n=this._getObjectElementNextToSelection(e);if(n)return this.editor.model.change((e)=>{for(let t=o.anchor.parent;t.isEmpty;){const o=t;t=o.parent,e.remove(o)}this._setSelectionOverElement(n)}),!0}_handleArrowKeys(e){const t=this.editor.model,o=t.schema,n=t.document,i=n.selection,r=i.getSelectedElement();if(r&&o.isObject(r)){const n=e?i.getLastPosition():i.getFirstPosition(),r=o.getNearestSelectionRange(n,e?'forward':'backward');return r&&t.change((e)=>{e.setSelection(r)}),!0}if(i.isCollapsed){const t=this._getObjectElementNextToSelection(e);if(t instanceof Wu&&o.isObject(t))return this._setSelectionOverElement(t),!0}}_selectAllNestedEditableContent(){const e=this.editor.model,t=e.document.selection,o=e.schema.getLimitElement(t);return t.getFirstRange().root!=o&&(e.change((e)=>{e.setSelection(Gu.createIn(o))}),!0)}_selectAllContent(){const e=this.editor.model,t=this.editor.editing,o=t.view,n=o.document,i=n.selection,r=i.getSelectedElement();if(r&&qi(r)){const o=t.mapper.toModelElement(r.parent);return e.change((e)=>{e.setSelection(Gu.createIn(o))}),!0}return!1}_setSelectionOverElement(e){this.editor.model.change((t)=>{t.setSelection(Gu.createOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,o=t.schema,n=t.document.selection,i=new Yu(n);t.modifySelection(i,{direction:e?'forward':'backward'});const r=e?i.focus.nodeBefore:i.focus.nodeAfter;return r instanceof Wu&&o.isObject(r)?r:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(bb,t);this._previouslySelected.clear()}}class Ab extends Gf{refresh(){const e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Xi(e),this.value=!!(Xi(e)&&e.hasAttribute('alt'))&&e.getAttribute('alt')}execute(e){const t=this.editor.model,o=t.document.selection.getSelectedElement();t.change((t)=>{t.setAttribute('alt',e.newValue,o)})}}class Tb extends qf{init(){this.editor.commands.add('imageTextAlternative',new Ab(this.editor))}}class Pb extends kf{constructor(e,t){super(e);const o=`ck-input-${i()}`;this.set('label'),this.set('value'),this.set('isReadOnly',!1),this.labelView=this._createLabelView(o),this.inputView=this._createInputView(t,o);const n=this.bindTemplate;this.setTemplate({tag:'div',attributes:{class:['ck','ck-labeled-input',n.if('isReadOnly','ck-disabled')]},children:[this.labelView,this.inputView]})}_createLabelView(e){const t=new Cf(this.locale);return t.for=e,t.bind('text').to(this,'label'),t}_createInputView(e,t){const o=new e(this.locale);return o.id=t,o.bind('value').to(this),o.bind('isReadOnly').to(this),o}select(){this.inputView.select()}focus(){this.inputView.focus()}}var Eb=o(39),Sb=o.n(Eb);class Ob extends kf{constructor(e){super(e),this.set('value'),this.set('id'),this.set('placeholder'),this.set('isReadOnly',!1);const t=this.bindTemplate;this.setTemplate({tag:'input',attributes:{type:'text',class:['ck','ck-input','ck-input-text'],id:t.to('id'),placeholder:t.to('placeholder'),readonly:t.to('isReadOnly')}})}render(){super.render();const e=(e)=>{this.element.value=e||0===e?e:''};e(this.value),this.on('change:value',(t,o,n)=>{e(n)})}select(){this.element.select()}focus(){this.element.focus()}}var Rb=o(3),Ib=o.n(Rb),Vb=o(4),Fb=o.n(Vb),Nb=o(41),Mb=o.n(Nb);class Db extends kf{constructor(e){super(e);const o=this.locale.t;this.focusTracker=new lf,this.keystrokes=new Zg,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(o('x'),Ib.a,'ck-button-save'),this.saveButtonView.type='submit',this.cancelButtonView=this._createButton(o('y'),Fb.a,'ck-button-cancel','cancel'),this._focusables=new cf,this._focusCycler=new If({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'shift + tab',focusNext:'tab'}}),this.setTemplate({tag:'form',attributes:{class:['ck','ck-text-alternative-form'],tabindex:'-1'},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),ir({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach((e)=>{this._focusables.add(e),this.focusTracker.add(e.element)})}_createButton(e,t,o,n){const i=new kh(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:o}}),n&&i.delegate('execute').to(this,n),i}_createLabeledInputView(){const e=this.locale.t,t=new Pb(this.locale,Ob);return t.label=e('ai'),t.inputView.placeholder=e('ai'),t}}var Bb=o(43),Lb=o.n(Bb);const zb=ni('px'),jb=$c.document.body;class qb extends kf{constructor(e){super(e);const t=this.bindTemplate;this.set('top',0),this.set('left',0),this.set('position','arrow_nw'),this.set('isVisible',!1),this.set('withArrow',!0),this.set('className'),this.content=this.createCollection(),this.setTemplate({tag:'div',attributes:{class:['ck','ck-balloon-panel',t.to('position',(e)=>`ck-balloon-panel_${e}`),t.if('isVisible','ck-balloon-panel_visible'),t.if('withArrow','ck-balloon-panel_with-arrow'),t.to('className')],style:{top:t.to('top',zb),left:t.to('left',zb)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const t=qb.defaultPositions,o=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast],limiter:jb,fitInViewport:!0},e),{top:n,left:i,name:r}=ar(o);Object.assign(this,{top:n,left:i,position:r})}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,'change:isVisible',this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,'change:isVisible',this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const t=cr(e.target),o=e.limiter?cr(e.limiter):jb;this.listenTo($c.document,'scroll',(n,i)=>{const r=i.target,a=t&&r.contains(t),s=o&&r.contains(o);(a||s||!t||!o)&&this.attachTo(e)},{useCapture:!0}),this.listenTo($c.window,'resize',()=>{this.attachTo(e)})}_stopPinning(){this.stopListening($c.document,'scroll'),this.stopListening($c.window,'resize')}}qb.arrowHorizontalOffset=25,qb.arrowVerticalOffset=10,qb.defaultPositions={northArrowSouth:(e,t)=>({top:ur(e,t),left:e.left+e.width/2-t.width/2,name:'arrow_s'}),northArrowSouthEast:(e,t)=>({top:ur(e,t),left:e.left+e.width/2-t.width+qb.arrowHorizontalOffset,name:'arrow_se'}),northArrowSouthWest:(e,t)=>({top:ur(e,t),left:e.left+e.width/2-qb.arrowHorizontalOffset,name:'arrow_sw'}),northWestArrowSouth:(e,t)=>({top:ur(e,t),left:e.left-t.width/2,name:'arrow_s'}),northWestArrowSouthWest:(e,t)=>({top:ur(e,t),left:e.left-qb.arrowHorizontalOffset,name:'arrow_sw'}),northWestArrowSouthEast:(e,t)=>({top:ur(e,t),left:e.left-t.width+qb.arrowHorizontalOffset,name:'arrow_se'}),northEastArrowSouth:(e,t)=>({top:ur(e,t),left:e.right-t.width/2,name:'arrow_s'}),northEastArrowSouthEast:(e,t)=>({top:ur(e,t),left:e.right-t.width+qb.arrowHorizontalOffset,name:'arrow_se'}),northEastArrowSouthWest:(e,t)=>({top:ur(e,t),left:e.right-qb.arrowHorizontalOffset,name:'arrow_sw'}),southArrowNorth:(e,t)=>({top:mr(e,t),left:e.left+e.width/2-t.width/2,name:'arrow_n'}),southArrowNorthEast:(e,t)=>({top:mr(e,t),left:e.left+e.width/2-t.width+qb.arrowHorizontalOffset,name:'arrow_ne'}),southArrowNorthWest:(e,t)=>({top:mr(e,t),left:e.left+e.width/2-qb.arrowHorizontalOffset,name:'arrow_nw'}),southWestArrowNorth:(e,t)=>({top:mr(e,t),left:e.left-t.width/2,name:'arrow_n'}),southWestArrowNorthWest:(e,t)=>({top:mr(e,t),left:e.left-qb.arrowHorizontalOffset,name:'arrow_nw'}),southWestArrowNorthEast:(e,t)=>({top:mr(e,t),left:e.left-t.width+qb.arrowHorizontalOffset,name:'arrow_ne'}),southEastArrowNorth:(e,t)=>({top:mr(e,t),left:e.right-t.width/2,name:'arrow_n'}),southEastArrowNorthEast:(e,t)=>({top:mr(e,t),left:e.right-t.width+qb.arrowHorizontalOffset,name:'arrow_ne'}),southEastArrowNorthWest:(e,t)=>({top:mr(e,t),left:e.right-qb.arrowHorizontalOffset,name:'arrow_nw'})};class Wb extends qf{static get pluginName(){return'ContextualBalloon'}init(){this.view=new qb,this.positionLimiter=()=>{const e=this.editor.editing.view,t=e.document,o=t.selection.editableElement;return o?e.domConverter.mapViewToDom(o.root):null},this._stack=new Map,this.editor.ui.view.body.add(this.view),this.editor.ui.focusTracker.add(this.view.element)}get visibleView(){const e=this._stack.get(this.view.content.get(0));return e?e.view:null}hasView(e){return this._stack.has(e)}add(e){if(this.hasView(e.view))throw new Za('contextualballoon-add-view-exist: Cannot add configuration of the same view twice.');this.visibleView&&this.view.content.remove(this.visibleView),this._stack.set(e.view,e),this._show(e)}remove(e){if(!this.hasView(e))throw new Za('contextualballoon-remove-view-not-exist: Cannot remove configuration of not existing view.');if(this.visibleView===e){this.view.content.remove(e),this._stack.delete(e);const t=Array.from(this._stack.values()).pop();t?this._show(t):this.view.hide()}else this._stack.delete(e)}updatePosition(e){e&&(this._stack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition())}_show({view:e,balloonClassName:t=''}){this.view.className=t,this.view.content.add(e),this.view.pin(this._getBalloonPosition())}_getBalloonPosition(){let e=Oi(this._stack.values()).position;return e&&!e.limiter&&(e=Object.assign({},e,{limiter:this.positionLimiter})),e}}var Ub=o(45),Hb=o.n(Ub);class Kb extends qf{static get requires(){return[Wb]}init(){this._createButton(),this._createForm()}_createButton(){const e=this.editor,o=e.t;e.ui.componentFactory.add('imageTextAlternative',(t)=>{const n=e.commands.get('imageTextAlternative'),i=new kh(t);return i.set({label:o('s'),icon:Hb.a,tooltip:!0}),i.bind('isEnabled').to(n,'isEnabled'),this.listenTo(i,'execute',()=>this._showForm()),i})}_createForm(){const e=this.editor,t=e.editing.view,o=t.document;this._balloon=this.editor.plugins.get('ContextualBalloon'),this._form=new Db(e.locale),this._form.render(),this.listenTo(this._form,'submit',()=>{e.execute('imageTextAlternative',{newValue:this._form.labeledInput.inputView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,'cancel',()=>{this._hideForm(!0)}),this._form.keystrokes.set('Esc',(e,t)=>{this._hideForm(!0),t()}),this.listenTo(t,'render',()=>{Yi(o.selection)?this._isVisible&&pr(e):this._hideForm(!0)}),nr({emitter:this._form,activator:()=>this._isVisible,contextElements:[this._form.element],callback:()=>this._hideForm()})}_showForm(){if(!this._isVisible){const e=this.editor,t=e.commands.get('imageTextAlternative'),o=this._form.labeledInput;this._balloon.hasView(this._form)||this._balloon.add({view:this._form,position:gr(e)}),o.value=o.inputView.element.value=t.value||'',this._form.labeledInput.select()}}_hideForm(e){this._isVisible&&(this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return this._balloon.visibleView==this._form}}class Gb extends qf{static get requires(){return[Tb,Kb]}static get pluginName(){return'ImageTextAlternative'}}var $b=o(46),Jb=o.n($b);class Qb extends qf{static get requires(){return[_b,Cb,Gb]}static get pluginName(){return'Image'}}class Yb extends kf{constructor(e){super(e),this.buttonView=new kh(e),this._fileInputView=new Xb(e),this._fileInputView.bind('acceptedType').to(this),this._fileInputView.bind('allowMultipleFiles').to(this),this._fileInputView.delegate('done').to(this),this.setTemplate({tag:'span',attributes:{class:'ck-file-dialog-button'},children:[this.buttonView,this._fileInputView]}),this.buttonView.on('execute',()=>{this._fileInputView.open()})}focus(){this.buttonView.focus()}}class Xb extends kf{constructor(e){super(e),this.set('acceptedType'),this.set('allowMultipleFiles',!1);const t=this.bindTemplate;this.setTemplate({tag:'input',attributes:{class:['ck-hidden'],type:'file',tabindex:'-1',accept:t.to('acceptedType'),multiple:t.to('allowMultipleFiles')},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire('done',this.element.files),this.element.value=''})}})}open(){this.element.click()}}var Zb=o(48),ek=o.n(Zb);class tk extends qf{init(){const e=this.editor,o=e.t;e.ui.componentFactory.add('imageUpload',(t)=>{const n=new Yb(t),i=e.commands.get('imageUpload');return n.set({acceptedType:'image/*',allowMultipleFiles:!0}),n.buttonView.set({label:o('o'),icon:ek.a,tooltip:!0}),n.buttonView.bind('isEnabled').to(i),n.on('done',(t,o)=>{for(const n of Array.from(o)){const t=hr(e.model.document.selection);fr(n)&&e.execute('imageUpload',{file:n,insertAt:t})}}),n})}}var ok=o(49),nk=o.n(ok),ik=o(50),rk=o.n(ik);class ak extends qf{constructor(e){super(e),this.placeholder='data:image/svg+xml;utf8,'+encodeURIComponent(nk.a)}init(){const e=this.editor;e.editing.downcastDispatcher.on('attribute:uploadStatus:image',(...e)=>this.uploadStatusChange(...e))}uploadStatusChange(e,t,o){const n=this.editor,i=t.item,r=i.getAttribute('uploadId');if(o.consumable.consume(t.item,e.name)){const e=n.plugins.get(Ph),a=r?t.attributeNewValue:null,s=this.placeholder,l=n.editing.mapper.toViewElement(i),d=o.writer;if('reading'==a)return br(l,d),void _r(s,l,d);if('uploading'==a){const t=e.loaders.get(r);return br(l,d),void(t?(wr(l,d),vr(l,d,t,n.editing.view)):_r(s,l,d))}yr(l,d),wr(l,d),kr(l,d)}}}const sk=Symbol('progress-bar');class lk extends Gf{execute(e){const t=this.editor,o=t.model.document,n=e.file,i=t.plugins.get(Ph);t.model.change((r)=>{const a=i.createLoader(n);if(!a)return;const s=new Wu('image',{uploadId:a.id});let l;l=e.insertAt?new Yu([new Gu(e.insertAt)]):o.selection,t.model.insertContent(s,l),s.parent&&r.setSelection(Gu.createOn(s))})}}class dk extends qf{static get pluginName(){return'Notification'}init(){this.on('show:warning',(e,t)=>{window.alert(t.message)},{priority:'lowest'})}showSuccess(e,t={}){this._showNotification({message:e,type:'success',namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:'info',namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:'warning',namespace:t.namespace,title:t.title})}_showNotification(e){const t=`show:${e.type}`+(e.namespace?`:${e.namespace}`:'');this.fire(t,{message:e.message,type:e.type,title:e.title||''})}}class ck extends qf{static get requires(){return[Ph,dk]}init(){const e=this.editor,t=e.model.document,o=e.model.schema,n=e.plugins.get(Ph);o.extend('image',{allowAttributes:['uploadId','uploadStatus']}),e.commands.add('imageUpload',new lk(e)),e.editing.view.document.on('clipboardInput',(o,n)=>{if(Ar(n.dataTransfer))return;let i=new Yu(n.targetRanges.map((t)=>e.editing.mapper.toModelRange(t)));for(const r of n.dataTransfer.files){const n=hr(i);fr(r)&&(e.execute('imageUpload',{file:r,insertAt:n}),o.stop()),i=t.selection}}),e.editing.view.document.on('dragover',(e,t)=>{t.preventDefault()}),t.on('change',()=>{const e=t.differ.getChanges({includeChangesInGraveyard:!0});for(const t of e)if('insert'==t.type&&'image'==t.name){const e=t.position.nodeAfter,o='$graveyard'==t.position.root.rootName,i=e.getAttribute('uploadId');if(!i)continue;const r=n.loaders.get(i);if(!r)continue;o?r.abort():'idle'==r.status&&this._load(r,e)}})}_load(e,o){function n(){r.enqueueChange('transparent',(e)=>{e.removeAttribute('uploadId',o),e.removeAttribute('uploadStatus',o)}),t.destroyLoader(e)}const i=this.editor,r=i.model,a=i.locale.t,t=i.plugins.get(Ph),s=i.plugins.get(dk);return r.enqueueChange('transparent',(e)=>{e.setAttribute('uploadStatus','reading',o)}),e.read().then((t)=>{const n=i.editing.mapper.toViewElement(o),a=n.getChild(0),s=e.upload();return i.editing.view.change((e)=>{e.setAttribute('src',t,a)}),r.enqueueChange('transparent',(e)=>{e.setAttribute('uploadStatus','uploading',o)}),s}).then((e)=>{r.enqueueChange('transparent',(t)=>{t.setAttributes({uploadStatus:'complete',src:e.default},o);let n=0;const i=Object.keys(e).filter((e)=>{const t=parseInt(e,10);if(!isNaN(t))return n=Ba(n,t),!0}).map((t)=>`${e[t]} ${t}w`).join(', ');''!=i&&t.setAttribute('srcset',{data:i,width:n},o)}),n()}).catch((t)=>{if('error'!==e.status&&'aborted'!==e.status)throw t;'error'==e.status&&s.showWarning(t,{title:a('n'),namespace:'upload'}),n(),r.enqueueChange('transparent',(e)=>{e.remove(o)})})}}class uk extends qf{static get pluginName(){return'ImageUpload'}static get requires(){return[ck,tk,ak]}}class mk extends qf{static get requires(){return[ub,Qb,uk]}static get pluginName(){return'EasyImage'}}class pk extends Gf{refresh(){const e=this.editor.model,t=e.document,o=Oi(t.selection.getSelectedBlocks());this.value=!!o&&o.is('paragraph'),this.isEnabled=!!o&&Tr(o,e.schema)}execute(e={}){const t=this.editor.model,o=t.document;t.change((n)=>{const i=(e.selection||o.selection).getSelectedBlocks();for(const e of i)!e.is('paragraph')&&Tr(e,t.schema)&&n.rename(e,'paragraph')})}}class gk extends qf{static get pluginName(){return'Paragraph'}init(){const e=this.editor,t=e.model,o=e.data;e.commands.add('paragraph',new pk(e)),t.schema.register('paragraph',{inheritAllFrom:'$block'}),e.conversion.elementToElement({model:'paragraph',view:'p'}),o.upcastDispatcher.on('element',(e,t,o)=>{if(o.consumable.test(t.viewItem,{name:t.viewItem.name}))if(gk.paragraphLikeElements.has(t.viewItem.name)){if(t.viewItem.isEmpty)return;const e=o.writer.createElement('paragraph'),n=o.splitToAllowedParent(e,t.modelCursor);if(!n)return;o.writer.insert(e,n.position);const{modelRange:i}=o.convertChildren(t.viewItem,Ku.createAt(e));t.modelRange=new Gu(Ku.createBefore(e),i.end),t.modelCursor=t.modelRange.end}else Er(t.viewItem,t.modelCursor,o.schema)&&(t=Object.assign(t,Pr(t.viewItem,t.modelCursor,o)))},{priority:'low'}),o.upcastDispatcher.on('text',(e,t,o)=>{t.modelRange||Er(t.viewItem,t.modelCursor,o.schema)&&(t=Object.assign(t,Pr(t.viewItem,t.modelCursor,o)))},{priority:'lowest'}),t.document.registerPostFixer((e)=>this._autoparagraphEmptyRoots(e)),e.on('dataReady',()=>{t.enqueueChange('transparent',(e)=>this._autoparagraphEmptyRoots(e))},{priority:'lowest'})}_autoparagraphEmptyRoots(e){const t=this.editor.model;for(const o of t.document.getRootNames()){const n=t.document.getRoot(o);if(n.isEmpty&&'$graveyard'!=n.rootName&&t.schema.checkChild(n,'paragraph'))return e.insertElement('paragraph',n),!0}}}gk.paragraphLikeElements=new Set(['blockquote','dd','div','dt','h1','h2','h3','h4','h5','h6','li','p','td']);class fk extends Gf{constructor(e,t){super(e),this.modelElements=t}refresh(){const e=Oi(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some((t)=>Sr(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,o=t.document,n=e.value;t.change((e)=>{const i=Array.from(o.selection.getSelectedBlocks()).filter((e)=>Sr(e,n,t.schema));for(const t of i)t.is(n)||e.rename(t,n)})}}const hk='paragraph';class bk extends qf{constructor(e){super(e),e.config.define('heading',{options:[{model:'paragraph',title:'Paragraph',class:'ck-heading_paragraph'},{model:'heading1',view:'h2',title:'Heading 1',class:'ck-heading_heading1'},{model:'heading2',view:'h3',title:'Heading 2',class:'ck-heading_heading2'},{model:'heading3',view:'h4',title:'Heading 3',class:'ck-heading_heading3'}]})}static get requires(){return[gk]}init(){const e=this.editor,t=e.config.get('heading.options'),o=[];for(const n of t)n.model!==hk&&(e.model.schema.register(n.model,{inheritAllFrom:'$block'}),e.conversion.elementToElement(n),o.push(n.model));e.commands.add('heading',new fk(e,o))}afterInit(){const e=this.editor,t=e.commands.get('enter'),o=e.config.get('heading.options');t&&this.listenTo(t,'afterExecute',(t,n)=>{const i=e.model.document.selection.getFirstPosition().parent,r=o.some((e)=>i.is(e.model));r&&!i.is(hk)&&0===i.childCount&&n.writer.rename(i,hk)})}}class kk{constructor(e,t){t&&mc(this,t),e&&this.set(e)}}f(kk,bc);class _k extends kf{constructor(e){super(e);const t=this.bindTemplate;this.set('isVisible',!1),this.children=this.createCollection(),this.setTemplate({tag:'div',attributes:{class:['ck','ck-reset','ck-dropdown__panel',t.if('isVisible','ck-dropdown__panel-visible')]},children:this.children,on:{selectstart:t.to((e)=>e.preventDefault())}})}focus(){this.children.length&&this.children.first.focus()}focusLast(){if(this.children.length){const e=this.children.last;'function'==typeof e.focusLast?e.focusLast():e.focus()}}}var wk=o(52),vk=o.n(wk);class yk extends kf{constructor(e,t,o){super(e);const n=this.bindTemplate;this.buttonView=t,this.panelView=o,this.set('isOpen',!1),this.set('isEnabled',!0),this.focusTracker=new lf,this.keystrokes=new Zg,this.setTemplate({tag:'div',attributes:{class:['ck','ck-dropdown',n.to('isEnabled',(e)=>e?'':'ck-disabled')]},children:[t,o]}),t.extendTemplate({attributes:{class:['ck-dropdown__button']}})}render(){super.render(),this.listenTo(this.buttonView,'open',()=>{this.isOpen=!this.isOpen}),this.panelView.bind('isVisible').to(this,'isOpen'),this.keystrokes.listenTo(this.element),this.focusTracker.add(this.element);const e=(e,t)=>{this.isOpen&&(this.buttonView.focus(),this.isOpen=!1,t())};this.keystrokes.set('arrowdown',(e,t)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,t())}),this.keystrokes.set('arrowright',(e,t)=>{this.isOpen&&t()}),this.keystrokes.set('arrowleft',e),this.keystrokes.set('esc',e)}focus(){this.buttonView.focus()}}var xk=o(54),Ck=o.n(xk);class Ak extends kh{constructor(e){super(e),this.arrowView=this._createArrowView(),this.delegate('execute').to(this,'open')}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new mh;return e.content=Ck.a,e.extendTemplate({attributes:{class:'ck-dropdown__arrow'}}),e}}var Tk=o(55),Pk=o.n(Tk);class Ek extends kf{constructor(){super(),this.items=this.createCollection(),this.focusTracker=new lf,this.keystrokes=new Zg,this._focusCycler=new If({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'arrowup',focusNext:'arrowdown'}}),this.setTemplate({tag:'ul',attributes:{class:['ck','ck-reset','ck-list']},children:this.items})}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on('add',(e,t)=>{this.focusTracker.add(t.element)}),this.items.on('remove',(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}class Sk extends kf{constructor(){super(),this.set('tabindex',-1),this.keystrokes=new Zg;const e=this.bindTemplate;this.setTemplate({tag:'li',attributes:{class:['ck','ck-list__item',e.to('class'),e.if('isActive','ck-list__item_active')],style:e.to('style'),tabindex:e.to('tabindex')},children:[{text:e.to('label')}],on:{click:e.to('execute')}})}render(){super.render();const e=(e,t)=>{this.fire('execute'),t()};this.keystrokes.listenTo(this.element),this.keystrokes.set('Enter',e),this.keystrokes.set('Space',e)}focus(){this.element.focus()}}var Ok=o(57),Rk=o.n(Ok),Ik=o(59),Vk=o.n(Ik),Fk=o(5),Nk=o.n(Fk);class Mk extends qf{init(){const e=this.editor,o=e.t,t=Mr(e),n=o('g'),i=o('h');e.ui.componentFactory.add('heading',(o)=>{const r={},a=new Pc,s=e.commands.get('heading'),l=e.commands.get('paragraph'),d=[s];for(const e of t){const t=new kk({label:e.title,class:e.class});'paragraph'===e.model?(t.bind('isActive').to(l,'value'),t.set('commandName','paragraph'),d.push(l)):(t.bind('isActive').to(s,'value',(t)=>t===e.model),t.set({commandName:'heading',commandValue:e.model})),a.add(t),r[e.model]=e.title}const c=Or(o);return Rr(c,a),c.buttonView.set({isOn:!1,withText:!0,tooltip:i}),c.extendTemplate({attributes:{class:['ck-heading-dropdown']}}),c.bind('isEnabled').toMany(d,'isEnabled',(...e)=>e.some((e)=>e)),c.buttonView.bind('label').to(s,'value',l,'value',(e,t)=>{const o=e||t&&'paragraph';return r[o]?r[o]:n}),this.listenTo(c,'execute',(t)=>{e.execute(t.source.commandName,t.source.commandValue?{value:t.source.commandValue}:void 0),e.editing.view.focus()}),c})}}class Dk extends qf{static get requires(){return[bk,Mk]}static get pluginName(){return'Heading'}}var Bk=o(62),Lk=o.n(Bk);const zk=new WeakMap,jk=Symbol('imageCaption');class qk extends qf{init(){const e=this.editor,o=e.editing.view,n=e.model.schema,i=e.data,r=e.editing,a=e.t;n.register('caption',{allowIn:'image',allowContentOf:'$block',isLimit:!0}),e.model.document.registerPostFixer((e)=>this._insertMissingModelCaptionElement(e)),e.conversion.for('upcast').add(Yt({view:qr,model:'caption'}));i.downcastDispatcher.on('insert:caption',Wr((e)=>e.createContainerElement('figcaption'),!1));const t=zr(o,a('f'));r.downcastDispatcher.on('insert:caption',Wr(t)),r.downcastDispatcher.on('insert',this._fixCaptionVisibility((e)=>e.item),{priority:'high'}),r.downcastDispatcher.on('remove',this._fixCaptionVisibility((e)=>e.position.parent),{priority:'high'}),o.document.registerPostFixer((e)=>this._updateCaptionVisibility(e))}_updateCaptionVisibility(e){const t=this.editor.editing.mapper,o=this._lastSelectedCaption;let n;const i=this.editor.model.document.selection,r=i.getSelectedElement();if(r&&r.is('image')){const e=jr(r);n=t.toViewElement(e)}const a=i.getFirstPosition(),s=Hr(a.parent);if(s&&(n=t.toViewElement(s)),n)return o?o===n?Gr(n,e):(Kr(o,e),this._lastSelectedCaption=n,Gr(n,e)):(this._lastSelectedCaption=n,Gr(n,e));if(o){const t=Kr(o,e);return this._lastSelectedCaption=null,t}return!1}_fixCaptionVisibility(e){return(t,o,n)=>{const i=e(o),r=Hr(i),a=this.editor.editing.mapper,s=n.writer;if(r){const e=a.toViewElement(r);e&&(r.childCount?s.removeClass('ck-hidden',e):s.addClass('ck-hidden',e))}}}_insertMissingModelCaptionElement(e){const t=this.editor.model,o=t.document.differ.getChanges();for(const t of o)if('insert'==t.type&&'image'==t.name){const o=t.position.nodeAfter;if(!jr(o))return e.appendElement('caption',o),!0}}}var Wk=o(64),Uk=o.n(Wk);class Hk extends qf{static get requires(){return[qk]}static get pluginName(){return'ImageCaption'}}class Kk extends Gf{constructor(e,t){super(e),this._defaultStyle=!1,this.styles=t.reduce((e,t)=>(e[t.name]=t,t.isDefault&&(this._defaultStyle=t.name),e),{})}refresh(){const e=this.editor.model.document.selection.getSelectedElement();if(this.isEnabled=Xi(e),!e)this.value=!1;else if(e.hasAttribute('imageStyle')){const t=e.getAttribute('imageStyle');this.value=!!this.styles[t]&&t}else this.value=this._defaultStyle}execute(e){const t=e.value,o=this.editor.model,n=o.document.selection.getSelectedElement();o.change((e)=>{this.styles[t].isDefault?e.removeAttribute('imageStyle',n):e.setAttribute('imageStyle',t,n)})}}var Gk=o(66),$k=o.n(Gk),Jk=o(67),Qk=o.n(Jk),Yk=o(68),Xk=o.n(Yk),Zk=o(69),e_=o.n(Zk);const t_={full:{name:'full',title:'Full size image',icon:$k.a,isDefault:!0},side:{name:'side',title:'Side image',icon:e_.a,className:'image-style-side'},alignLeft:{name:'alignLeft',title:'Left aligned image',icon:Qk.a,className:'image-style-align-left'},alignCenter:{name:'alignCenter',title:'Centered image',icon:Xk.a,className:'image-style-align-center'},alignRight:{name:'alignRight',title:'Right aligned image',icon:e_.a,className:'image-style-align-right'}},o_={full:$k.a,left:Qk.a,right:e_.a,center:Xk.a};class n_ extends qf{static get requires(){return[_b]}static get pluginName(){return'ImageStyleEditing'}init(){const e=this.editor,t=e.model.schema,o=e.data,n=e.editing;e.config.define('image.styles',['full','side']);const i=Yr(e.config.get('image.styles'));t.extend('image',{allowAttributes:'imageStyle'});const r=$r(i);n.downcastDispatcher.on('attribute:imageStyle:image',r),o.downcastDispatcher.on('attribute:imageStyle:image',r),o.upcastDispatcher.on('element:figure',Jr(i),{priority:'low'}),e.commands.add('imageStyle',new Kk(e,i))}}var i_=o(70),r_=o.n(i_);class a_ extends qf{get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Full size image":e('i'),"Side image":e('j'),"Left aligned image":e('k'),"Centered image":e('l'),"Right aligned image":e('m')}}init(){const e=this.editor,t=e.config.get('image.styles'),o=Zr(Yr(t),this.localizedDefaultStylesTitles);for(const e of o)this._createButton(e)}_createButton(e){const t=this.editor,o=`imageStyle:${e.name}`;t.ui.componentFactory.add(o,(o)=>{const n=t.commands.get('imageStyle'),i=new kh(o);return i.set({label:e.title,icon:e.icon,tooltip:!0}),i.bind('isEnabled').to(n,'isEnabled'),i.bind('isOn').to(n,'value',(t)=>t===e.name),this.listenTo(i,'execute',()=>t.execute('imageStyle',{value:e.name})),i})}}class s_ extends qf{static get requires(){return[n_,a_]}static get pluginName(){return'ImageStyle'}}class l_ extends qf{static get requires(){return[Wb]}static get pluginName(){return'ImageToolbar'}init(){const e=this.editor,t=e.plugins.get('BalloonToolbar');t&&this.listenTo(t,'show',(t)=>{Yi(e.editing.view.document.selection)&&t.stop()},{priority:'high'})}afterInit(){const e=this.editor,t=e.config.get('image.toolbar');t&&t.length&&(this._balloon=this.editor.plugins.get('ContextualBalloon'),this._toolbar=new Mf,this._toolbar.fillFromConfig(t,e.ui.componentFactory),this.listenTo(e.editing.view,'render',()=>{this._checkIsVisible()}),this.listenTo(e.ui.focusTracker,'change:isFocused',()=>{this._checkIsVisible()},{priority:'low'}))}_checkIsVisible(){const e=this.editor;e.ui.focusTracker.isFocused?Yi(e.editing.view.document.selection)?this._showToolbar():this._hideToolbar():this._hideToolbar()}_showToolbar(){const e=this.editor;this._isVisible?pr(e):!this._balloon.hasView(this._toolbar)&&this._balloon.add({view:this._toolbar,position:gr(e),balloonClassName:'ck-toolbar-container'})}_hideToolbar(){this._isVisible&&this._balloon.remove(this._toolbar)}get _isVisible(){return this._balloon.visibleView==this._toolbar}}class d_ extends Gf{refresh(){const e=this.editor.model,t=e.document;this.value=t.selection.getAttribute('linkHref'),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,'linkHref')}execute(e){const t=this.editor.model,o=t.document.selection;t.change((n)=>{if(o.isCollapsed){const t=o.getFirstPosition();if(o.hasAttribute('linkHref')){const t=ea(o.getFirstPosition(),o.getAttribute('linkHref'));n.setAttribute('linkHref',e,t),n.setSelection(t)}else if(''!==e){const i=rt(o.getAttributes());i.set('linkHref',e);const r=n.createText(e,i);n.insert(r,t),n.setSelection(Gu.createOn(r))}}else{const i=t.schema.getValidRanges(o.getRanges(),'linkHref');for(const t of i)n.setAttribute('linkHref',e,t)}})}}class c_ extends Gf{refresh(){this.isEnabled=this.editor.model.document.selection.hasAttribute('linkHref')}execute(){const e=this.editor.model,t=e.document.selection;e.change((e)=>{const o=t.isCollapsed?[ea(t.getFirstPosition(),t.getAttribute('linkHref'))]:t.getRanges();for(const t of o)e.removeAttribute('linkHref',t)})}}const u_=Symbol('linkElement'),m_=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,p_=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;class g_{constructor(e,t,o){this.model=e,this.attribute=o,this._modelSelection=e.document.selection,this._overrideUid=null,this._isNextGravityRestorationSkipped=!1,t.listenTo(this._modelSelection,'change:range',(e,t)=>this._isNextGravityRestorationSkipped?void(this._isNextGravityRestorationSkipped=!1):void(!this._isGravityOverridden||!t.directChange&&sa(this._modelSelection.getFirstPosition(),o)||this._restoreGravity()))}handleForwardMovement(e,t){const o=this.attribute;return this._isGravityOverridden||e.isAtStart&&this._hasSelectionAttribute?void 0:ca(e,o)&&this._hasSelectionAttribute?(this._preventCaretMovement(t),this._removeSelectionAttribute(),!0):la(e,o)?(this._preventCaretMovement(t),this._overrideGravity(),!0):da(e,o)&&this._hasSelectionAttribute?(this._preventCaretMovement(t),this._overrideGravity(),!0):void 0}handleBackwardMovement(e,t){const o=this.attribute;if(this._isGravityOverridden)return ca(e,o)&&this._hasSelectionAttribute?(this._preventCaretMovement(t),this._restoreGravity(),this._removeSelectionAttribute(),!0):(this._preventCaretMovement(t),this._restoreGravity(),e.isAtStart&&this._removeSelectionAttribute(),!0);return ca(e,o)&&!this._hasSelectionAttribute?(this._preventCaretMovement(t),this._setSelectionAttributeFromTheNodeBefore(e),!0):e.isAtEnd&&da(e,o)?this._hasSelectionAttribute?void(ua(e,o)&&(this._skipNextAutomaticGravityRestoration(),this._overrideGravity())):(this._preventCaretMovement(t),this._setSelectionAttributeFromTheNodeBefore(e),!0):e.isAtStart?this._hasSelectionAttribute?(this._removeSelectionAttribute(),this._preventCaretMovement(t),!0):void 0:void(ua(e,o)&&(this._skipNextAutomaticGravityRestoration(),this._overrideGravity()))}get _isGravityOverridden(){return!!this._overrideUid}get _hasSelectionAttribute(){return this._modelSelection.hasAttribute(this.attribute)}_overrideGravity(){this._overrideUid=this.model.change((e)=>e.overrideSelectionGravity())}_restoreGravity(){this.model.change((e)=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}_preventCaretMovement(e){e.preventDefault()}_removeSelectionAttribute(){this.model.change((e)=>{e.removeSelectionAttribute(this.attribute)})}_setSelectionAttributeFromTheNodeBefore(e){const t=this.attribute;this.model.change((o)=>{o.setSelectionAttribute(this.attribute,e.nodeBefore.getAttribute(t))})}_skipNextAutomaticGravityRestoration(){this._isNextGravityRestorationSkipped=!0}}var f_=o(72),h_=o.n(f_);const b_='ck-link_selected';class k_ extends qf{init(){const e=this.editor;e.model.schema.extend('$text',{allowAttributes:'linkHref'}),e.conversion.for('dataDowncast').add(bt({model:'linkHref',view:na})),e.conversion.for('editingDowncast').add(bt({model:'linkHref',view:(e,t)=>na(ia(e),t)})),e.conversion.for('upcast').add(Xt({view:{name:'a',attributes:{href:!0}},model:{key:'linkHref',value:(e)=>e.getAttribute('href')}})),e.commands.add('link',new d_(e)),e.commands.add('unlink',new c_(e)),aa(e.editing.view,e.model,this,'linkHref'),this._setupLinkHighlight()}_setupLinkHighlight(){const e=this.editor,t=e.editing.view,o=new Set;t.document.registerPostFixer((t)=>{const n=e.model.document.selection;if(n.hasAttribute('linkHref')){const i=ea(n.getFirstPosition(),n.getAttribute('linkHref')),r=e.editing.mapper.toViewRange(i);for(const e of r.getItems())e.is('a')&&(t.addClass(b_,e),o.add(e))}}),e.conversion.for('editingDowncast').add((e)=>{function n(){t.change((e)=>{for(const t of o.values())e.removeClass(b_,t),o.delete(t)})}e.on('insert',n,{priority:'highest'}),e.on('remove',n,{priority:'highest'}),e.on('attribute',n,{priority:'highest'}),e.on('selection',n,{priority:'highest'})})}}class __ extends vu{constructor(e){super(e),this.domEventType='click'}onDomEvent(e){this.fire(e.type,e)}}var w_=o(74),v_=o.n(w_);class y_ extends kf{constructor(e){super(e);const o=e.t;this.focusTracker=new lf,this.keystrokes=new Zg,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(o('x'),Ib.a,'ck-button-save'),this.saveButtonView.type='submit',this.cancelButtonView=this._createButton(o('y'),Fb.a,'ck-button-cancel','cancel'),this._focusables=new cf,this._focusCycler=new If({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'shift + tab',focusNext:'tab'}}),this.setTemplate({tag:'form',attributes:{class:['ck','ck-link-form'],tabindex:'-1'},children:[this.urlInputView,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),ir({view:this});const e=[this.urlInputView,this.saveButtonView,this.cancelButtonView];e.forEach((e)=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,t=new Pb(this.locale,Ob);return t.label=e('z'),t.inputView.placeholder='https://example.com',t}_createButton(e,t,o,n){const i=new kh(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.extendTemplate({attributes:{class:o}}),n&&i.delegate('execute').to(this,n),i}}var x_=o(76),C_=o.n(x_),A_=o(77),T_=o.n(A_),P_=o(78),E_=o.n(P_);class S_ extends kf{constructor(e){super(e);const o=e.t;this.focusTracker=new lf,this.keystrokes=new Zg,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(o('aa'),C_.a,'unlink'),this.editButtonView=this._createButton(o('ab'),T_.a,'edit'),this.set('href'),this._focusables=new cf,this._focusCycler=new If({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:'shift + tab',focusNext:'tab'}}),this.setTemplate({tag:'div',attributes:{class:['ck','ck-link-actions'],tabindex:'-1'},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render();const e=[this.previewButtonView,this.editButtonView,this.unlinkButtonView];e.forEach((e)=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}_createButton(e,t,o){const n=new kh(this.locale);return n.set({label:e,icon:t,tooltip:!0}),n.delegate('execute').to(this,o),n}_createPreviewButton(){const e=new kh(this.locale),o=this.bindTemplate,n=this.t;return e.set({withText:!0,tooltip:n('ac')}),e.extendTemplate({attributes:{class:['ck','ck-link-actions__preview'],href:o.to('href',(e)=>e&&ia(e)),target:'_blank'}}),e.bind('label').to(this,'href',(e)=>e||n('ad')),e.bind('isEnabled').to(this,'href',(e)=>!!e),e.template.tag='a',e.template.eventListeners={},e}}var O_=o(80),R_=o.n(O_);const I_='Ctrl+K';class V_ extends qf{static get requires(){return[Wb]}init(){const e=this.editor;e.editing.view.addObserver(__),this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._balloon=e.plugins.get(Wb),this._createToolbarLinkButton(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new S_(e.locale),o=e.commands.get('link'),n=e.commands.get('unlink');return t.bind('href').to(o,'value'),t.editButtonView.bind('isEnabled').to(o),t.unlinkButtonView.bind('isEnabled').to(n),this.listenTo(t,'edit',()=>{this._addFormView()}),this.listenTo(t,'unlink',()=>{e.execute('unlink'),this._hideUI()}),t.keystrokes.set('Esc',(e,t)=>{this._hideUI(),t()}),t.keystrokes.set(I_,(e,t)=>{this._addFormView(),t()}),t}_createFormView(){const e=this.editor,t=new y_(e.locale),o=e.commands.get('link');return t.urlInputView.bind('value').to(o,'value'),t.urlInputView.bind('isReadOnly').to(o,'isEnabled',(e)=>!e),t.saveButtonView.bind('isEnabled').to(o),this.listenTo(t,'submit',()=>{e.execute('link',t.urlInputView.inputView.element.value),this._removeFormView()}),this.listenTo(t,'cancel',()=>{this._removeFormView()}),t.keystrokes.set('Esc',(e,t)=>{this._removeFormView(),t()}),t}_createToolbarLinkButton(){const e=this.editor,o=e.commands.get('link'),n=e.t;e.keystrokes.set(I_,(e,t)=>{t(),o.isEnabled&&this._showUI()}),e.ui.componentFactory.add('link',(e)=>{const t=new kh(e);return t.isEnabled=!0,t.label=n('r'),t.icon=R_.a,t.keystroke=I_,t.tooltip=!0,t.bind('isEnabled').to(o,'isEnabled'),this.listenTo(t,'execute',()=>this._showUI()),t})}_enableUserBalloonInteractions(){const e=this.editor.editing.view.document;this.listenTo(e,'click',()=>{const e=this._getSelectedLinkElement();e&&this._showUI()}),this.editor.keystrokes.set('Tab',(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:'high'}),this.editor.keystrokes.set('Esc',(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),nr({emitter:this.formView,activator:()=>this._isUIVisible,contextElements:[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this._areActionsInPanel||this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(!this._isFormInPanel){const e=this.editor,t=e.commands.get('link');this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.select(),this.formView.urlInputView.inputView.element.value=t.value||''}}_removeFormView(){this._isFormInPanel&&(this._balloon.remove(this.formView),this.editor.editing.view.focus())}_showUI(){const e=this.editor,t=e.commands.get('link');t.isEnabled&&(this._getSelectedLinkElement()?this._areActionsVisible?this._addFormView():this._addActionsView():(this._addActionsView(),this._addFormView()),this._startUpdatingUIOnViewRender())}_hideUI(){if(this._isUIInPanel){const e=this.editor.editing.view;this.stopListening(e,'render'),this._removeFormView(),this._balloon.remove(this.actionsView),e.focus()}}_startUpdatingUIOnViewRender(){function e(){return n.document.selection.focus.getAncestors().reverse().find((e)=>e.is('element'))}const t=this.editor,o=t.editing,n=o.view;let i=this._getSelectedLinkElement(),r=e();this.listenTo(n,'render',()=>{const t=this._getSelectedLinkElement(),o=e();(!i||t)&&(i||o===r)?this._balloon.updatePosition(this._getBalloonPositionData()):this._hideUI(),i=t,r=o})}get _isFormInPanel(){return this._balloon.hasView(this.formView)}get _areActionsInPanel(){return this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document,o=this._getSelectedLinkElement(),n=o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(t.selection.getFirstRange());return{target:n}}_getSelectedLinkElement(){const e=this.editor.editing.view.document.selection;if(e.isCollapsed)return ma(e.getFirstPosition());else{const t=e.getFirstRange().getTrimmed(),o=ma(t.start),n=ma(t.end);return o&&o==n?Cc.createIn(o).getTrimmed().isEqual(t)?o:null:null}}}class F_ extends qf{static get requires(){return[k_,V_]}static get pluginName(){return'Link'}}class N_ extends Gf{constructor(e,t){super(e),this.type='bulleted'==t?'bulleted':'numbered'}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document,o=Array.from(t.selection.getSelectedBlocks()).filter((t)=>ga(t,e.schema)),n=!0===this.value;e.change((e)=>{if(n){let t=o[o.length-1].nextSibling,n=Da,i=[];for(;t&&'listItem'==t.name&&0!==t.getAttribute('indent');){const e=t.getAttribute('indent');e<n&&(n=e);const o=e-n;i.push({element:t,indent:o}),t=t.nextSibling}i=i.reverse();for(const t of i)e.setAttribute('indent',t.indent,t.element)}if(!n){let e=Da;for(const t of o)t.is('listItem')&&t.getAttribute('indent')<e&&(e=t.getAttribute('indent'));e=0===e?1:e,pa(o,!0,e),pa(o,!1,e)}for(const t of o.reverse())n&&'listItem'==t.name?e.rename(t,'paragraph'):n||'listItem'==t.name?n||'listItem'!=t.name||t.getAttribute('type')==this.type||e.setAttribute('type',this.type,t):(e.setAttributes({type:this.type,indent:0},t),e.rename(t,'listItem'))})}_getValue(){const e=Oi(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is('listItem')&&e.getAttribute('type')==this.type}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,o=Oi(e.getSelectedBlocks());return!!o&&ga(o,t)}}class M_ extends Gf{constructor(e,t){super(e),this._indentBy='forward'==t?1:-1}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=e.document;let o=Array.from(t.selection.getSelectedBlocks());e.change((e)=>{const t=o[o.length-1];for(let n=t.nextSibling;n&&'listItem'==n.name&&n.getAttribute('indent')>t.getAttribute('indent');)o.push(n),n=n.nextSibling;0>this._indentBy&&(o=o.reverse());for(const t of o){const o=t.getAttribute('indent')+this._indentBy;0>o?e.rename(t,'paragraph'):e.setAttribute('indent',o,t)}})}_checkEnabled(){const e=Oi(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is('listItem'))return!1;if(0<this._indentBy){const t=e.getAttribute('indent'),o=e.getAttribute('type');for(let n=e.previousSibling;n&&n.is('listItem')&&n.getAttribute('indent')>=t;){if(n.getAttribute('indent')==t)return n.getAttribute('type')==o;n=n.previousSibling}return!1}return!0}}class D_ extends qf{static get requires(){return[gk]}init(){const e=this.editor;e.model.schema.register('listItem',{inheritAllFrom:'$block',allowAttributes:['type','indent']});const t=e.data,o=e.editing;e.model.document.registerPostFixer((t)=>Ea(e.model,t)),o.mapper.registerViewToModelLength('li',Ma),t.mapper.registerViewToModelLength('li',Ma),o.mapper.on('modelToViewPosition',Ta),o.mapper.on('viewToModelPosition',Pa),t.mapper.on('modelToViewPosition',Ta),o.downcastDispatcher.on('insert',va,{priority:'high'}),o.downcastDispatcher.on('insert:listItem',ba),t.downcastDispatcher.on('insert',va,{priority:'high'}),t.downcastDispatcher.on('insert:listItem',ba),o.downcastDispatcher.on('attribute:type:listItem',_a),t.downcastDispatcher.on('attribute:type:listItem',_a),o.downcastDispatcher.on('attribute:indent:listItem',wa),t.downcastDispatcher.on('attribute:indent:listItem',wa),o.downcastDispatcher.on('remove:listItem',ka),o.downcastDispatcher.on('remove',ya,{priority:'low'}),t.downcastDispatcher.on('remove:listItem',ka),t.downcastDispatcher.on('remove',ya,{priority:'low'}),t.upcastDispatcher.on('element:ul',Ca,{priority:'high'}),t.upcastDispatcher.on('element:ol',Ca,{priority:'high'}),t.upcastDispatcher.on('element:li',Aa,{priority:'high'}),t.upcastDispatcher.on('element:li',xa),e.model.on('insertContent',Sa,{priority:'high'}),e.commands.add('numberedList',new N_(e,'numbered')),e.commands.add('bulletedList',new N_(e,'bulleted')),e.commands.add('indentList',new M_(e,'forward')),e.commands.add('outdentList',new M_(e,'backward'));const n=this.editor.editing.view.document;this.listenTo(n,'enter',(e,t)=>{const o=this.editor.model.document,n=o.selection.getLastPosition().parent;o.selection.isCollapsed&&'listItem'==n.name&&n.isEmpty&&(this.editor.execute('outdentList'),t.preventDefault(),e.stop())}),this.listenTo(n,'delete',(e,t)=>{if('backward'===t.direction){const o=this.editor.model.document.selection;if(o.isCollapsed){const n=o.getFirstPosition();if(n.isAtStart){const o=n.parent;if('listItem'===o.name){const n=o.previousSibling&&'listItem'===o.previousSibling.name;n||(this.editor.execute('outdentList'),t.preventDefault(),e.stop())}}}}},{priority:'high'});const i=(e)=>(t,o)=>{const n=this.editor.commands.get(e);n.isEnabled&&(this.editor.execute(e),o())};this.editor.keystrokes.set('Tab',i('indentList')),this.editor.keystrokes.set('Shift+Tab',i('outdentList'))}}var B_=o(81),L_=o.n(B_),z_=o(82),j_=o.n(z_);class q_ extends qf{init(){const e=this.editor.t;this._addButton('numberedList',e('p'),L_.a),this._addButton('bulletedList',e('q'),j_.a)}_addButton(e,t,o){const n=this.editor;n.ui.componentFactory.add(e,(i)=>{const r=n.commands.get(e),a=new kh(i);return a.set({label:t,icon:o,tooltip:!0}),a.bind('isOn','isEnabled').to(r,'value','isEnabled'),this.listenTo(a,'execute',()=>n.execute(e)),a})}}class W_ extends qf{static get requires(){return[D_,q_]}static get pluginName(){return'List'}}class U_ extends jf{}t['default']=U_,U_.build={plugins:[Ah,Ih,Mh,Uh,Yh,rb,mk,Dk,Qb,Hk,s_,l_,uk,F_,W_,gk],config:{toolbar:{items:['heading','|','bold','italic','link','bulletedList','numberedList','imageUpload','blockQuote','undo','redo']},image:{toolbar:['imageStyle:full','imageStyle:side','|','imageTextAlternative']},language:'en'}}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(o){'object'==typeof window&&(t=window)}e.exports=t},function(e,t){'use strict';t.a=function(e){return e&&e.Object===Object?e:null}},function(e,t,o){'use strict';(function(e){var n=o(10),i=o(1),r={function:!0,object:!0},a=r[typeof exports]&&exports&&!exports.nodeType?exports:void 0,s=r[typeof e]&&e&&!e.nodeType?e:void 0,l=s&&s.exports===a?a:void 0,d=l?i.a.Buffer:void 0,c=d?function(e){return e instanceof d}:Object(n.a)(!1);t.a=c}).call(t,o(2)(e))},function(e,t){'use strict';t.a=function(e){return function(){return e}}},function(e,t,o){var n=o(12);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:999;--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-focus-border:#47a4f5;--ck-color-focus-shadow:#77baf8;--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-focus-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-focus-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-focus-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-item-background-hover:var(--ck-color-base-foreground);--ck-color-list-item-background-active:var(--ck-color-base-active);--ck-color-list-item-background-active-focus:var(--ck-color-base-active-focus);--ck-color-list-item-text-active:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#c2c2c2;--ck-color-upload-bar-background:#6cb5f9;--ck-color-upload-infinite-background:rgba(0,0,0,.1);--ck-color-link-default:#0000f0;--ck-color-link-selected-background:#ebf8ff;--ck-disabled-opacity:.5;--ck-focus-outer-shadow:0 0 3px var(--ck-color-focus-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit) * 1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit) * 0.8);--ck-spacing-small:calc(var(--ck-spacing-unit) * 0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit) * 0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit) * 0.16)}'},function(e){e.exports=function(e){var t='undefined'!=typeof window&&window.location;if(!t)throw new Error('fixUrls requires window.location');if(!e||'string'!=typeof e)return e;var o=t.protocol+'//'+t.host,n=o+t.pathname.replace(/\/[^\/]*$/,'/'),i=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i))return e;var r;return r=0===i.indexOf('//')?i:0===i.indexOf('/')?o+i:n+i.replace(/^\.\//,''),'url('+JSON.stringify(r)+')'});return i}},function(e,t,o){var n=o(15);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}'},function(e,t,o){var n=o(17);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}'},function(e,t,o){var n=o(19);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}'},function(e,t,o){var n=o(21);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row wrap;align-items:center}.ck.ck-toolbar.ck-toolbar_vertical{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating{flex-wrap:nowrap}.ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar__newline{display:block;width:100%}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>*{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar>:last-child{margin-right:0}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar__separator{align-self:stretch;width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck.ck-toolbar__newline{margin:0}'},function(e,t,o){var n=o(23);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}'},function(e,t,o){var n=o(25);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base) * var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon *{fill:currentColor}'},function(e,t,o){var n=o(27);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck-tooltip .ck-tooltip__text{display:inline-block}.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-color:transparent transparent var(--ck-color-tooltip-background);border-width:0 var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size)}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1 * var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-color:var(--ck-color-tooltip-background) transparent transparent;border-width:var(--ck-tooltip-arrow-size) var(--ck-tooltip-arrow-size) 0}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{border-style:solid;left:50%}.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s}'},function(e,t,o){var n=o(29);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}.ck.ck-button,a.ck.ck-button{position:relative}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button .ck-button__label,.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button .ck-button__label,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):focus,.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):focus,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-focus-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;border-color:transparent}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}.ck.ck-button.ck-button_with-text .ck-button__icon,a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1 * var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):focus,.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):focus,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-focus-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):focus,.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):focus,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-focus-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z" fill="#000" fill-rule="nonzero"/></svg>'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z" fill="#000" fill-rule="nonzero"/></svg>'},function(e){e.exports='<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z" fill="#000" fill-rule="evenodd"/></svg>\n'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z" fill="#333" fill-rule="evenodd"/></svg>'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="evenodd"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.011-.563zM11 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.011-.563z"/></g></svg>\n'},function(e,t,o){var n=o(36);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;font-style:italic;border-left:5px solid #ccc}'},function(e,t,o){var n=o(38);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports=':root{--ck-widget-outline-thickness:3px;--ck-color-widget-border-blurred:#dedede;--ck-color-widget-border-hover:#ffd15c;--ck-color-widget-editable-focused-background:var(--ck-color-base-background),}.ck .ck-widget{margin:var(--ck-spacing-standard) 0;padding:0}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck-editor__editable.ck-blurred .ck .ck-widget.ck-widget_selected{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-widget-border-blurred)}.ck .ck-widget:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-widget-border-hover)}.ck .ck-widget .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-widget .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-widget .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focused-background)}'},function(e,t,o){var n=o(40);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports=':root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition-property:box-shadow,border;transition:.2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}'},function(e,t,o){var n=o(42);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}.ck.ck-text-alternative-form>:not(:first-child){margin-left:var(--ck-spacing-standard)}'},function(e,t,o){var n=o(44);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-z-default)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-z-default)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-z-default)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent;margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012.9.093 1.676.675 2.017 1.513.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z" fill="#000" fill-rule="evenodd"/></svg>'},function(e,t,o){var n=o(47);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck-content .image{clear:both;text-align:center}.ck-content .image>img{display:block;margin:0 auto;max-width:100%}'},function(e){e.exports='<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z" fill="#000" fill-rule="nonzero"/></svg>\n'},function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><g fill="none" fill-rule="evenodd"><rect width="700" height="250" fill="#F7F7F7" rx="4"/><text fill="#5F6F77" font-family="Arial,sans-serif" font-size="24"><tspan x="247.9" y="135">Uploading image\u2026</tspan></text></g></svg>\n'},function(e,t,o){var n=o(51);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck-content .image{position:relative;overflow:hidden}.ck-content .image.ck-infinite-progress:before{content:"";position:absolute;top:0;right:0}.ck-content .image .ck-progress-bar{position:absolute;top:0;left:0}:root{--ck-image-upload-progress-line-width:30px}.ck-content .image.ck-appear{animation:a .7s}.ck-content .image.ck-infinite-progress:before{width:var(--ck-image-upload-progress-line-width);height:2px;background:var(--ck-color-upload-infinite-background);animation-name:b;animation-duration:1.5s;animation-iteration-count:infinite;transition-timing-function:linear}.ck-content .image.ck-image-upload-placeholder>img{width:100%}.ck-content .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes a{0%{opacity:0}to{opacity:1}}@keyframes b{0%{width:var(--ck-image-upload-progress-line-width);right:0}50%{width:calc(var(--ck-image-upload-progress-line-width) * 1.5)}to{right:100%}}'},function(e,t,o){var n=o(53);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default);position:absolute;top:50%;transform:translate3d(0,-50%,0)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute;left:0;transform:translate3d(0,100%,0)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block;will-change:transform}:root{--ck-dropdown-arrow-size:calc(0.5 * var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);width:var(--ck-dropdown-arrow-size)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button{padding-right:calc(2.5 * var(--ck-spacing-standard))}.ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown__panel{border-radius:0;box-shadow:var(--ck-drop-shadow),0 0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}'},function(e){e.exports='<svg width="10" height="10" viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z" fill="#000" fill-rule="evenodd"/></svg>'},function(e,t,o){var n=o(56);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.ck.ck-list .ck-list__item{display:block}.ck.ck-list .ck-list__item:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{padding:var(--ck-spacing-medium);cursor:default;min-width:12em}.ck.ck-list__item:focus,.ck.ck-list__item:hover{background:var(--ck-color-list-item-background-hover)}.ck.ck-list__item:focus{box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-list__item_active{background:var(--ck-color-list-item-background-active);color:var(--ck-color-list-item-text-active)}.ck.ck-list__item_active:focus,.ck.ck-list__item_active:hover{background:var(--ck-color-list-item-background-active-focus)}'},function(e,t,o){var n=o(58);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-toolbar-dropdown .ck-toolbar{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}'},function(e,t,o){var n=o(60);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list>.ck-list__item{line-height:calc(.8*var(--ck-line-height-base)*var(--ck-font-size-base));padding:calc(.4*var(--ck-line-height-base)*var(--ck-font-size-base))}'},function(e){e.exports='.ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}'},function(e,t,o){var n=o(63);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none;cursor:text;color:var(--ck-color-engine-placeholder-text)}'},function(e,t,o){var n=o(65);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck-content .image>figcaption{color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}'},function(e){e.exports='<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M2 4.5V3h16v1.5zM4.5 7.5V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06C3.475 13.5 3 13.093 3 12.59V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></g></svg>\n'},function(e){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z" fill-rule="nonzero"/></svg>'},function(e){e.exports='<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M2 4.5V3h16v1.5zM6.5 7.5V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></g></svg>\n'},function(e){e.exports='<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M2 4.5V3h16v1.5zM2 7.5V6h5.674v1.5zM2 10.5V9h5.674v1.5zM2 13.5V12h5.674v1.5zM10.5 7.5V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></g></svg>\n'},function(e,t,o){var n=o(71);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports=':root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center,.ck-content .image-style-align-left,.ck-content .image-style-align-right,.ck-content .image-style-side{max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}'},function(e,t,o){var n=o(73);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck .ck-link_selected{background:var(--ck-color-link-selected-background)}'},function(e,t,o){var n=o(75);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-link-form .ck-labeled-input{display:inline-block}.ck.ck-link-form .ck-label{display:none}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}.ck.ck-link-form>:not(:first-child){margin-left:var(--ck-spacing-standard)}'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="evenodd"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955c.02-.095.06-.189.12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zM16.927 17.695l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></g></svg>'},function(e){e.exports='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z" fill="#000" fill-rule="nonzero"/></svg>\n'},function(e,t,o){var n=o(79);'string'==typeof n&&(n=[[e.i,n,'']]);var i={singleton:!0,hmr:!0},r;i.transform=r,i.insertInto=void 0;o(0)(n,i);n.locals&&(e.exports=n.locals),!1},function(e){e.exports='.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-standard);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}.ck.ck-link-actions>:not(:first-child){margin-left:var(--ck-spacing-standard)}'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955c.02-.095.06-.189.12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z" fill="#000" fill-rule="evenodd"/></svg>'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z" fill="#454545" fill-rule="evenodd"/></svg>'},function(e){e.exports='<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z" fill="#454545" fill-rule="evenodd"/></svg>'}])['default']});
//# sourceMappingURL=ckeditor.js.map

/***/ }),

/***/ "./node_modules/cropper/dist/cropper.esm.js":
/*!**************************************************!*\
  !*** ./node_modules/cropper/dist/cropper.esm.js ***!
  \**************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/*!
 * Cropper v4.0.0
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2018 Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-04-01T06:27:27.267Z
 */



var IN_BROWSER = typeof window !== 'undefined';
var WINDOW = IN_BROWSER ? window : {};
var NAMESPACE = 'cropper';

// Actions
var ACTION_ALL = 'all';
var ACTION_CROP = 'crop';
var ACTION_MOVE = 'move';
var ACTION_ZOOM = 'zoom';
var ACTION_EAST = 'e';
var ACTION_WEST = 'w';
var ACTION_SOUTH = 's';
var ACTION_NORTH = 'n';
var ACTION_NORTH_EAST = 'ne';
var ACTION_NORTH_WEST = 'nw';
var ACTION_SOUTH_EAST = 'se';
var ACTION_SOUTH_WEST = 'sw';

// Classes
var CLASS_CROP = NAMESPACE + '-crop';
var CLASS_DISABLED = NAMESPACE + '-disabled';
var CLASS_HIDDEN = NAMESPACE + '-hidden';
var CLASS_HIDE = NAMESPACE + '-hide';
var CLASS_INVISIBLE = NAMESPACE + '-invisible';
var CLASS_MODAL = NAMESPACE + '-modal';
var CLASS_MOVE = NAMESPACE + '-move';

// Data keys
var DATA_ACTION = 'action';
var DATA_PREVIEW = 'preview';

// Drag modes
var DRAG_MODE_CROP = 'crop';
var DRAG_MODE_MOVE = 'move';
var DRAG_MODE_NONE = 'none';

// Events
var EVENT_CROP = 'crop';
var EVENT_CROP_END = 'cropend';
var EVENT_CROP_MOVE = 'cropmove';
var EVENT_CROP_START = 'cropstart';
var EVENT_DBLCLICK = 'dblclick';
var EVENT_LOAD = 'load';
var EVENT_POINTER_DOWN = WINDOW.PointerEvent ? 'pointerdown' : 'touchstart mousedown';
var EVENT_POINTER_MOVE = WINDOW.PointerEvent ? 'pointermove' : 'touchmove mousemove';
var EVENT_POINTER_UP = WINDOW.PointerEvent ? 'pointerup pointercancel' : 'touchend touchcancel mouseup';
var EVENT_READY = 'ready';
var EVENT_RESIZE = 'resize';
var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';
var EVENT_ZOOM = 'zoom';

// RegExps
var REGEXP_ACTIONS = /^(?:e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;
var REGEXP_DATA_URL = /^data:/;
var REGEXP_DATA_URL_JPEG = /^data:image\/jpeg;base64,/;
var REGEXP_TAG_NAME = /^(?:img|canvas)$/i;

var DEFAULTS = {
  // Define the view mode of the cropper
  viewMode: 0, // 0, 1, 2, 3

  // Define the dragging mode of the cropper
  dragMode: DRAG_MODE_CROP, // 'crop', 'move' or 'none'

  // Define the aspect ratio of the crop box
  aspectRatio: NaN,

  // An object with the previous cropping result data
  data: null,

  // A selector for adding extra containers to preview
  preview: '',

  // Re-render the cropper when resize the window
  responsive: true,

  // Restore the cropped area after resize the window
  restore: true,

  // Check if the current image is a cross-origin image
  checkCrossOrigin: true,

  // Check the current image's Exif Orientation information
  checkOrientation: true,

  // Show the black modal
  modal: true,

  // Show the dashed lines for guiding
  guides: true,

  // Show the center indicator for guiding
  center: true,

  // Show the white modal to highlight the crop box
  highlight: true,

  // Show the grid background
  background: true,

  // Enable to crop the image automatically when initialize
  autoCrop: true,

  // Define the percentage of automatic cropping area when initializes
  autoCropArea: 0.8,

  // Enable to move the image
  movable: true,

  // Enable to rotate the image
  rotatable: true,

  // Enable to scale the image
  scalable: true,

  // Enable to zoom the image
  zoomable: true,

  // Enable to zoom the image by dragging touch
  zoomOnTouch: true,

  // Enable to zoom the image by wheeling mouse
  zoomOnWheel: true,

  // Define zoom ratio when zoom the image by wheeling mouse
  wheelZoomRatio: 0.1,

  // Enable to move the crop box
  cropBoxMovable: true,

  // Enable to resize the crop box
  cropBoxResizable: true,

  // Toggle drag mode between "crop" and "move" when click twice on the cropper
  toggleDragModeOnDblclick: true,

  // Size limitation
  minCanvasWidth: 0,
  minCanvasHeight: 0,
  minCropBoxWidth: 0,
  minCropBoxHeight: 0,
  minContainerWidth: 200,
  minContainerHeight: 100,

  // Shortcuts of events
  ready: null,
  cropstart: null,
  cropmove: null,
  cropend: null,
  crop: null,
  zoom: null
};

var TEMPLATE = '<div class="cropper-container" touch-action="none">' + '<div class="cropper-wrap-box">' + '<div class="cropper-canvas"></div>' + '</div>' + '<div class="cropper-drag-box"></div>' + '<div class="cropper-crop-box">' + '<span class="cropper-view-box"></span>' + '<span class="cropper-dashed dashed-h"></span>' + '<span class="cropper-dashed dashed-v"></span>' + '<span class="cropper-center"></span>' + '<span class="cropper-face"></span>' + '<span class="cropper-line line-e" data-action="e"></span>' + '<span class="cropper-line line-n" data-action="n"></span>' + '<span class="cropper-line line-w" data-action="w"></span>' + '<span class="cropper-line line-s" data-action="s"></span>' + '<span class="cropper-point point-e" data-action="e"></span>' + '<span class="cropper-point point-n" data-action="n"></span>' + '<span class="cropper-point point-w" data-action="w"></span>' + '<span class="cropper-point point-s" data-action="s"></span>' + '<span class="cropper-point point-ne" data-action="ne"></span>' + '<span class="cropper-point point-nw" data-action="nw"></span>' + '<span class="cropper-point point-sw" data-action="sw"></span>' + '<span class="cropper-point point-se" data-action="se"></span>' + '</div>' + '</div>';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};

var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};

var createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }

  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();

var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

/**
 * Check if the given value is not a number.
 */
var isNaN = Number.isNaN || WINDOW.isNaN;

/**
 * Check if the given value is a number.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is a number, else `false`.
 */
function isNumber(value) {
  return typeof value === 'number' && !isNaN(value);
}

/**
 * Check if the given value is undefined.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is undefined, else `false`.
 */
function isUndefined(value) {
  return typeof value === 'undefined';
}

/**
 * Check if the given value is an object.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is an object, else `false`.
 */
function isObject(value) {
  return (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value !== null;
}

var hasOwnProperty = Object.prototype.hasOwnProperty;

/**
 * Check if the given value is a plain object.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.
 */

function isPlainObject(value) {
  if (!isObject(value)) {
    return false;
  }

  try {
    var _constructor = value.constructor;
    var prototype = _constructor.prototype;


    return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');
  } catch (e) {
    return false;
  }
}

/**
 * Check if the given value is a function.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is a function, else `false`.
 */
function isFunction(value) {
  return typeof value === 'function';
}

/**
 * Iterate the given data.
 * @param {*} data - The data to iterate.
 * @param {Function} callback - The process function for each element.
 * @returns {*} The original data.
 */
function forEach(data, callback) {
  if (data && isFunction(callback)) {
    if (Array.isArray(data) || isNumber(data.length) /* array-like */) {
        var length = data.length;

        var i = void 0;

        for (i = 0; i < length; i += 1) {
          if (callback.call(data, data[i], i, data) === false) {
            break;
          }
        }
      } else if (isObject(data)) {
      Object.keys(data).forEach(function (key) {
        callback.call(data, data[key], key, data);
      });
    }
  }

  return data;
}

/**
 * Extend the given object.
 * @param {*} obj - The object to be extended.
 * @param {*} args - The rest objects which will be merged to the first object.
 * @returns {Object} The extended object.
 */
var assign = Object.assign || function assign(obj) {
  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }

  if (isObject(obj) && args.length > 0) {
    args.forEach(function (arg) {
      if (isObject(arg)) {
        Object.keys(arg).forEach(function (key) {
          obj[key] = arg[key];
        });
      }
    });
  }

  return obj;
};

var REGEXP_DECIMALS = /\.\d*(?:0|9){12}\d*$/i;

/**
 * Normalize decimal number.
 * Check out {@link http://0.30000000000000004.com/}
 * @param {number} value - The value to normalize.
 * @param {number} [times=100000000000] - The times for normalizing.
 * @returns {number} Returns the normalized number.
 */
function normalizeDecimalNumber(value) {
  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;

  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;
}

var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;

/**
 * Apply styles to the given element.
 * @param {Element} element - The target element.
 * @param {Object} styles - The styles for applying.
 */
function setStyle(element, styles) {
  var style = element.style;


  forEach(styles, function (value, property) {
    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {
      value += 'px';
    }

    style[property] = value;
  });
}

/**
 * Check if the given element has a special class.
 * @param {Element} element - The element to check.
 * @param {string} value - The class to search.
 * @returns {boolean} Returns `true` if the special class was found.
 */
function hasClass(element, value) {
  return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;
}

/**
 * Add classes to the given element.
 * @param {Element} element - The target element.
 * @param {string} value - The classes to be added.
 */
function addClass(element, value) {
  if (!value) {
    return;
  }

  if (isNumber(element.length)) {
    forEach(element, function (elem) {
      addClass(elem, value);
    });
    return;
  }

  if (element.classList) {
    element.classList.add(value);
    return;
  }

  var className = element.className.trim();

  if (!className) {
    element.className = value;
  } else if (className.indexOf(value) < 0) {
    element.className = className + ' ' + value;
  }
}

/**
 * Remove classes from the given element.
 * @param {Element} element - The target element.
 * @param {string} value - The classes to be removed.
 */
function removeClass(element, value) {
  if (!value) {
    return;
  }

  if (isNumber(element.length)) {
    forEach(element, function (elem) {
      removeClass(elem, value);
    });
    return;
  }

  if (element.classList) {
    element.classList.remove(value);
    return;
  }

  if (element.className.indexOf(value) >= 0) {
    element.className = element.className.replace(value, '');
  }
}

/**
 * Add or remove classes from the given element.
 * @param {Element} element - The target element.
 * @param {string} value - The classes to be toggled.
 * @param {boolean} added - Add only.
 */
function toggleClass(element, value, added) {
  if (!value) {
    return;
  }

  if (isNumber(element.length)) {
    forEach(element, function (elem) {
      toggleClass(elem, value, added);
    });
    return;
  }

  // IE10-11 doesn't support the second parameter of `classList.toggle`
  if (added) {
    addClass(element, value);
  } else {
    removeClass(element, value);
  }
}

var REGEXP_HYPHENATE = /([a-z\d])([A-Z])/g;

/**
 * Transform the given string from camelCase to kebab-case
 * @param {string} value - The value to transform.
 * @returns {string} The transformed value.
 */
function hyphenate(value) {
  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();
}

/**
 * Get data from the given element.
 * @param {Element} element - The target element.
 * @param {string} name - The data key to get.
 * @returns {string} The data value.
 */
function getData(element, name) {
  if (isObject(element[name])) {
    return element[name];
  } else if (element.dataset) {
    return element.dataset[name];
  }

  return element.getAttribute('data-' + hyphenate(name));
}

/**
 * Set data to the given element.
 * @param {Element} element - The target element.
 * @param {string} name - The data key to set.
 * @param {string} data - The data value.
 */
function setData(element, name, data) {
  if (isObject(data)) {
    element[name] = data;
  } else if (element.dataset) {
    element.dataset[name] = data;
  } else {
    element.setAttribute('data-' + hyphenate(name), data);
  }
}

/**
 * Remove data from the given element.
 * @param {Element} element - The target element.
 * @param {string} name - The data key to remove.
 */
function removeData(element, name) {
  if (isObject(element[name])) {
    try {
      delete element[name];
    } catch (e) {
      element[name] = undefined;
    }
  } else if (element.dataset) {
    // #128 Safari not allows to delete dataset property
    try {
      delete element.dataset[name];
    } catch (e) {
      element.dataset[name] = undefined;
    }
  } else {
    element.removeAttribute('data-' + hyphenate(name));
  }
}

var REGEXP_SPACES = /\s\s*/;
var onceSupported = function () {
  var supported = false;

  if (IN_BROWSER) {
    var once = false;
    var listener = function listener() {};
    var options = Object.defineProperty({}, 'once', {
      get: function get$$1() {
        supported = true;
        return once;
      },


      /**
       * This setter can fix a `TypeError` in strict mode
       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}
       * @param {boolean} value - The value to set
       */
      set: function set$$1(value) {
        once = value;
      }
    });

    WINDOW.addEventListener('test', listener, options);
    WINDOW.removeEventListener('test', listener, options);
  }

  return supported;
}();

/**
 * Remove event listener from the target element.
 * @param {Element} element - The event target.
 * @param {string} type - The event type(s).
 * @param {Function} listener - The event listener.
 * @param {Object} options - The event options.
 */
function removeListener(element, type, listener) {
  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

  var handler = listener;

  type.trim().split(REGEXP_SPACES).forEach(function (event) {
    if (!onceSupported) {
      var listeners = element.listeners;


      if (listeners && listeners[event] && listeners[event][listener]) {
        handler = listeners[event][listener];
        delete listeners[event][listener];

        if (Object.keys(listeners[event]).length === 0) {
          delete listeners[event];
        }

        if (Object.keys(listeners).length === 0) {
          delete element.listeners;
        }
      }
    }

    element.removeEventListener(event, handler, options);
  });
}

/**
 * Add event listener to the target element.
 * @param {Element} element - The event target.
 * @param {string} type - The event type(s).
 * @param {Function} listener - The event listener.
 * @param {Object} options - The event options.
 */
function addListener(element, type, listener) {
  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

  var _handler = listener;

  type.trim().split(REGEXP_SPACES).forEach(function (event) {
    if (options.once && !onceSupported) {
      var _element$listeners = element.listeners,
          listeners = _element$listeners === undefined ? {} : _element$listeners;


      _handler = function handler() {
        for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
          args[_key2] = arguments[_key2];
        }

        delete listeners[event][listener];
        element.removeEventListener(event, _handler, options);
        listener.apply(element, args);
      };

      if (!listeners[event]) {
        listeners[event] = {};
      }

      if (listeners[event][listener]) {
        element.removeEventListener(event, listeners[event][listener], options);
      }

      listeners[event][listener] = _handler;
      element.listeners = listeners;
    }

    element.addEventListener(event, _handler, options);
  });
}

/**
 * Dispatch event on the target element.
 * @param {Element} element - The event target.
 * @param {string} type - The event type(s).
 * @param {Object} data - The additional event data.
 * @returns {boolean} Indicate if the event is default prevented or not.
 */
function dispatchEvent(element, type, data) {
  var event = void 0;

  // Event and CustomEvent on IE9-11 are global objects, not constructors
  if (isFunction(Event) && isFunction(CustomEvent)) {
    event = new CustomEvent(type, {
      detail: data,
      bubbles: true,
      cancelable: true
    });
  } else {
    event = document.createEvent('CustomEvent');
    event.initCustomEvent(type, true, true, data);
  }

  return element.dispatchEvent(event);
}

/**
 * Get the offset base on the document.
 * @param {Element} element - The target element.
 * @returns {Object} The offset data.
 */
function getOffset(element) {
  var box = element.getBoundingClientRect();

  return {
    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),
    top: box.top + (window.pageYOffset - document.documentElement.clientTop)
  };
}

var location = WINDOW.location;

var REGEXP_ORIGINS = /^(https?:)\/\/([^:/?#]+):?(\d*)/i;

/**
 * Check if the given URL is a cross origin URL.
 * @param {string} url - The target URL.
 * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.
 */
function isCrossOriginURL(url) {
  var parts = url.match(REGEXP_ORIGINS);

  return parts && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);
}

/**
 * Add timestamp to the given URL.
 * @param {string} url - The target URL.
 * @returns {string} The result URL.
 */
function addTimestamp(url) {
  var timestamp = 'timestamp=' + new Date().getTime();

  return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;
}

/**
 * Get transforms base on the given object.
 * @param {Object} obj - The target object.
 * @returns {string} A string contains transform values.
 */
function getTransforms(_ref) {
  var rotate = _ref.rotate,
      scaleX = _ref.scaleX,
      scaleY = _ref.scaleY,
      translateX = _ref.translateX,
      translateY = _ref.translateY;

  var values = [];

  if (isNumber(translateX) && translateX !== 0) {
    values.push('translateX(' + translateX + 'px)');
  }

  if (isNumber(translateY) && translateY !== 0) {
    values.push('translateY(' + translateY + 'px)');
  }

  // Rotate should come first before scale to match orientation transform
  if (isNumber(rotate) && rotate !== 0) {
    values.push('rotate(' + rotate + 'deg)');
  }

  if (isNumber(scaleX) && scaleX !== 1) {
    values.push('scaleX(' + scaleX + ')');
  }

  if (isNumber(scaleY) && scaleY !== 1) {
    values.push('scaleY(' + scaleY + ')');
  }

  var transform = values.length ? values.join(' ') : 'none';

  return {
    WebkitTransform: transform,
    msTransform: transform,
    transform: transform
  };
}

/**
 * Get the max ratio of a group of pointers.
 * @param {string} pointers - The target pointers.
 * @returns {number} The result ratio.
 */
function getMaxZoomRatio(pointers) {
  var pointers2 = assign({}, pointers);
  var ratios = [];

  forEach(pointers, function (pointer, pointerId) {
    delete pointers2[pointerId];

    forEach(pointers2, function (pointer2) {
      var x1 = Math.abs(pointer.startX - pointer2.startX);
      var y1 = Math.abs(pointer.startY - pointer2.startY);
      var x2 = Math.abs(pointer.endX - pointer2.endX);
      var y2 = Math.abs(pointer.endY - pointer2.endY);
      var z1 = Math.sqrt(x1 * x1 + y1 * y1);
      var z2 = Math.sqrt(x2 * x2 + y2 * y2);
      var ratio = (z2 - z1) / z1;

      ratios.push(ratio);
    });
  });

  ratios.sort(function (a, b) {
    return Math.abs(a) < Math.abs(b);
  });

  return ratios[0];
}

/**
 * Get a pointer from an event object.
 * @param {Object} event - The target event object.
 * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.
 * @returns {Object} The result pointer contains start and/or end point coordinates.
 */
function getPointer(_ref2, endOnly) {
  var pageX = _ref2.pageX,
      pageY = _ref2.pageY;

  var end = {
    endX: pageX,
    endY: pageY
  };

  return endOnly ? end : assign({
    startX: pageX,
    startY: pageY
  }, end);
}

/**
 * Get the center point coordinate of a group of pointers.
 * @param {Object} pointers - The target pointers.
 * @returns {Object} The center point coordinate.
 */
function getPointersCenter(pointers) {
  var pageX = 0;
  var pageY = 0;
  var count = 0;

  forEach(pointers, function (_ref3) {
    var startX = _ref3.startX,
        startY = _ref3.startY;

    pageX += startX;
    pageY += startY;
    count += 1;
  });

  pageX /= count;
  pageY /= count;

  return {
    pageX: pageX,
    pageY: pageY
  };
}

/**
 * Check if the given value is a finite number.
 */
var isFinite = Number.isFinite || WINDOW.isFinite;

/**
 * Get the max sizes in a rectangle under the given aspect ratio.
 * @param {Object} data - The original sizes.
 * @param {string} [type='contain'] - The adjust type.
 * @returns {Object} The result sizes.
 */
function getAdjustedSizes(_ref4) // or 'cover'
{
  var aspectRatio = _ref4.aspectRatio,
      height = _ref4.height,
      width = _ref4.width;
  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';

  var isValidNumber = function isValidNumber(value) {
    return isFinite(value) && value > 0;
  };

  if (isValidNumber(width) && isValidNumber(height)) {
    var adjustedWidth = height * aspectRatio;

    if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {
      height = width / aspectRatio;
    } else {
      width = height * aspectRatio;
    }
  } else if (isValidNumber(width)) {
    height = width / aspectRatio;
  } else if (isValidNumber(height)) {
    width = height * aspectRatio;
  }

  return {
    width: width,
    height: height
  };
}

/**
 * Get the new sizes of a rectangle after rotated.
 * @param {Object} data - The original sizes.
 * @returns {Object} The result sizes.
 */
function getRotatedSizes(_ref5) {
  var width = _ref5.width,
      height = _ref5.height,
      degree = _ref5.degree;

  degree = Math.abs(degree) % 180;

  if (degree === 90) {
    return {
      width: height,
      height: width
    };
  }

  var arc = degree % 90 * Math.PI / 180;
  var sinArc = Math.sin(arc);
  var cosArc = Math.cos(arc);
  var newWidth = width * cosArc + height * sinArc;
  var newHeight = width * sinArc + height * cosArc;

  return degree > 90 ? {
    width: newHeight,
    height: newWidth
  } : {
    width: newWidth,
    height: newHeight
  };
}

/**
 * Get a canvas which drew the given image.
 * @param {HTMLImageElement} image - The image for drawing.
 * @param {Object} imageData - The image data.
 * @param {Object} canvasData - The canvas data.
 * @param {Object} options - The options.
 * @returns {HTMLCanvasElement} The result canvas.
 */
function getSourceCanvas(image, _ref6, _ref7, _ref8) {
  var imageAspectRatio = _ref6.aspectRatio,
      imageNaturalWidth = _ref6.naturalWidth,
      imageNaturalHeight = _ref6.naturalHeight,
      _ref6$rotate = _ref6.rotate,
      rotate = _ref6$rotate === undefined ? 0 : _ref6$rotate,
      _ref6$scaleX = _ref6.scaleX,
      scaleX = _ref6$scaleX === undefined ? 1 : _ref6$scaleX,
      _ref6$scaleY = _ref6.scaleY,
      scaleY = _ref6$scaleY === undefined ? 1 : _ref6$scaleY;
  var aspectRatio = _ref7.aspectRatio,
      naturalWidth = _ref7.naturalWidth,
      naturalHeight = _ref7.naturalHeight;
  var _ref8$fillColor = _ref8.fillColor,
      fillColor = _ref8$fillColor === undefined ? 'transparent' : _ref8$fillColor,
      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,
      imageSmoothingEnabled = _ref8$imageSmoothingE === undefined ? true : _ref8$imageSmoothingE,
      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,
      imageSmoothingQuality = _ref8$imageSmoothingQ === undefined ? 'low' : _ref8$imageSmoothingQ,
      _ref8$maxWidth = _ref8.maxWidth,
      maxWidth = _ref8$maxWidth === undefined ? Infinity : _ref8$maxWidth,
      _ref8$maxHeight = _ref8.maxHeight,
      maxHeight = _ref8$maxHeight === undefined ? Infinity : _ref8$maxHeight,
      _ref8$minWidth = _ref8.minWidth,
      minWidth = _ref8$minWidth === undefined ? 0 : _ref8$minWidth,
      _ref8$minHeight = _ref8.minHeight,
      minHeight = _ref8$minHeight === undefined ? 0 : _ref8$minHeight;

  var canvas = document.createElement('canvas');
  var context = canvas.getContext('2d');
  var maxSizes = getAdjustedSizes({
    aspectRatio: aspectRatio,
    width: maxWidth,
    height: maxHeight
  });
  var minSizes = getAdjustedSizes({
    aspectRatio: aspectRatio,
    width: minWidth,
    height: minHeight
  }, 'cover');
  var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));
  var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));

  // Note: should always use image's natural sizes for drawing as
  // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90
  var destMaxSizes = getAdjustedSizes({
    aspectRatio: imageAspectRatio,
    width: maxWidth,
    height: maxHeight
  });
  var destMinSizes = getAdjustedSizes({
    aspectRatio: imageAspectRatio,
    width: minWidth,
    height: minHeight
  }, 'cover');
  var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));
  var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));
  var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];

  canvas.width = normalizeDecimalNumber(width);
  canvas.height = normalizeDecimalNumber(height);
  context.fillStyle = fillColor;
  context.fillRect(0, 0, width, height);
  context.save();
  context.translate(width / 2, height / 2);
  context.rotate(rotate * Math.PI / 180);
  context.scale(scaleX, scaleY);
  context.imageSmoothingEnabled = imageSmoothingEnabled;
  context.imageSmoothingQuality = imageSmoothingQuality;
  context.drawImage.apply(context, [image].concat(toConsumableArray(params.map(function (param) {
    return Math.floor(normalizeDecimalNumber(param));
  }))));
  context.restore();
  return canvas;
}

var fromCharCode = String.fromCharCode;

/**
 * Get string from char code in data view.
 * @param {DataView} dataView - The data view for read.
 * @param {number} start - The start index.
 * @param {number} length - The read length.
 * @returns {string} The read result.
 */

function getStringFromCharCode(dataView, start, length) {
  var str = '';
  var i = void 0;

  length += start;

  for (i = start; i < length; i += 1) {
    str += fromCharCode(dataView.getUint8(i));
  }

  return str;
}

var REGEXP_DATA_URL_HEAD = /^data:.*,/;

/**
 * Transform Data URL to array buffer.
 * @param {string} dataURL - The Data URL to transform.
 * @returns {ArrayBuffer} The result array buffer.
 */
function dataURLToArrayBuffer(dataURL) {
  var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');
  var binary = atob(base64);
  var arrayBuffer = new ArrayBuffer(binary.length);
  var uint8 = new Uint8Array(arrayBuffer);

  forEach(uint8, function (value, i) {
    uint8[i] = binary.charCodeAt(i);
  });

  return arrayBuffer;
}

/**
 * Transform array buffer to Data URL.
 * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.
 * @param {string} mimeType - The mime type of the Data URL.
 * @returns {string} The result Data URL.
 */
function arrayBufferToDataURL(arrayBuffer, mimeType) {
  var uint8 = new Uint8Array(arrayBuffer);
  var data = '';

  // TypedArray.prototype.forEach is not supported in some browsers.
  forEach(uint8, function (value) {
    data += fromCharCode(value);
  });

  return 'data:' + mimeType + ';base64,' + btoa(data);
}

/**
 * Get orientation value from given array buffer.
 * @param {ArrayBuffer} arrayBuffer - The array buffer to read.
 * @returns {number} The read orientation value.
 */
function getOrientation(arrayBuffer) {
  var dataView = new DataView(arrayBuffer);
  var orientation = void 0;
  var littleEndian = void 0;
  var app1Start = void 0;
  var ifdStart = void 0;

  // Only handle JPEG image (start by 0xFFD8)
  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {
    var length = dataView.byteLength;
    var offset = 2;

    while (offset < length) {
      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {
        app1Start = offset;
        break;
      }

      offset += 1;
    }
  }

  if (app1Start) {
    var exifIDCode = app1Start + 4;
    var tiffOffset = app1Start + 10;

    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {
      var endianness = dataView.getUint16(tiffOffset);

      littleEndian = endianness === 0x4949;

      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {
          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {
            var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);

            if (firstIFDOffset >= 0x00000008) {
              ifdStart = tiffOffset + firstIFDOffset;
            }
          }
        }
    }
  }

  if (ifdStart) {
    var _length = dataView.getUint16(ifdStart, littleEndian);
    var _offset = void 0;
    var i = void 0;

    for (i = 0; i < _length; i += 1) {
      _offset = ifdStart + i * 12 + 2;

      if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {
          // 8 is the offset of the current tag's value
          _offset += 8;

          // Get the original orientation value
          orientation = dataView.getUint16(_offset, littleEndian);

          // Override the orientation with its default value
          dataView.setUint16(_offset, 1, littleEndian);
          break;
        }
    }
  }

  return orientation;
}

/**
 * Parse Exif Orientation value.
 * @param {number} orientation - The orientation to parse.
 * @returns {Object} The parsed result.
 */
function parseOrientation(orientation) {
  var rotate = 0;
  var scaleX = 1;
  var scaleY = 1;

  switch (orientation) {
    // Flip horizontal
    case 2:
      scaleX = -1;
      break;

    // Rotate left 180
    case 3:
      rotate = -180;
      break;

    // Flip vertical
    case 4:
      scaleY = -1;
      break;

    // Flip vertical and rotate right 90
    case 5:
      rotate = 90;
      scaleY = -1;
      break;

    // Rotate right 90
    case 6:
      rotate = 90;
      break;

    // Flip horizontal and rotate right 90
    case 7:
      rotate = 90;
      scaleX = -1;
      break;

    // Rotate left 90
    case 8:
      rotate = -90;
      break;

    default:
  }

  return {
    rotate: rotate,
    scaleX: scaleX,
    scaleY: scaleY
  };
}

var render = {
  render: function render() {
    this.initContainer();
    this.initCanvas();
    this.initCropBox();
    this.renderCanvas();

    if (this.cropped) {
      this.renderCropBox();
    }
  },
  initContainer: function initContainer() {
    var element = this.element,
        options = this.options,
        container = this.container,
        cropper = this.cropper;


    addClass(cropper, CLASS_HIDDEN);
    removeClass(element, CLASS_HIDDEN);

    var containerData = {
      width: Math.max(container.offsetWidth, Number(options.minContainerWidth) || 200),
      height: Math.max(container.offsetHeight, Number(options.minContainerHeight) || 100)
    };

    this.containerData = containerData;

    setStyle(cropper, {
      width: containerData.width,
      height: containerData.height
    });

    addClass(element, CLASS_HIDDEN);
    removeClass(cropper, CLASS_HIDDEN);
  },


  // Canvas (image wrapper)
  initCanvas: function initCanvas() {
    var containerData = this.containerData,
        imageData = this.imageData;
    var viewMode = this.options.viewMode;

    var rotated = Math.abs(imageData.rotate) % 180 === 90;
    var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;
    var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;
    var aspectRatio = naturalWidth / naturalHeight;
    var canvasWidth = containerData.width;
    var canvasHeight = containerData.height;

    if (containerData.height * aspectRatio > containerData.width) {
      if (viewMode === 3) {
        canvasWidth = containerData.height * aspectRatio;
      } else {
        canvasHeight = containerData.width / aspectRatio;
      }
    } else if (viewMode === 3) {
      canvasHeight = containerData.width / aspectRatio;
    } else {
      canvasWidth = containerData.height * aspectRatio;
    }

    var canvasData = {
      aspectRatio: aspectRatio,
      naturalWidth: naturalWidth,
      naturalHeight: naturalHeight,
      width: canvasWidth,
      height: canvasHeight
    };

    canvasData.left = (containerData.width - canvasWidth) / 2;
    canvasData.top = (containerData.height - canvasHeight) / 2;
    canvasData.oldLeft = canvasData.left;
    canvasData.oldTop = canvasData.top;

    this.canvasData = canvasData;
    this.limited = viewMode === 1 || viewMode === 2;
    this.limitCanvas(true, true);
    this.initialImageData = assign({}, imageData);
    this.initialCanvasData = assign({}, canvasData);
  },
  limitCanvas: function limitCanvas(sizeLimited, positionLimited) {
    var options = this.options,
        containerData = this.containerData,
        canvasData = this.canvasData,
        cropBoxData = this.cropBoxData;
    var viewMode = options.viewMode;
    var aspectRatio = canvasData.aspectRatio;

    var cropped = this.cropped && cropBoxData;

    if (sizeLimited) {
      var minCanvasWidth = Number(options.minCanvasWidth) || 0;
      var minCanvasHeight = Number(options.minCanvasHeight) || 0;

      if (viewMode > 1) {
        minCanvasWidth = Math.max(minCanvasWidth, containerData.width);
        minCanvasHeight = Math.max(minCanvasHeight, containerData.height);

        if (viewMode === 3) {
          if (minCanvasHeight * aspectRatio > minCanvasWidth) {
            minCanvasWidth = minCanvasHeight * aspectRatio;
          } else {
            minCanvasHeight = minCanvasWidth / aspectRatio;
          }
        }
      } else if (viewMode > 0) {
        if (minCanvasWidth) {
          minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);
        } else if (minCanvasHeight) {
          minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);
        } else if (cropped) {
          minCanvasWidth = cropBoxData.width;
          minCanvasHeight = cropBoxData.height;

          if (minCanvasHeight * aspectRatio > minCanvasWidth) {
            minCanvasWidth = minCanvasHeight * aspectRatio;
          } else {
            minCanvasHeight = minCanvasWidth / aspectRatio;
          }
        }
      }

      var _getAdjustedSizes = getAdjustedSizes({
        aspectRatio: aspectRatio,
        width: minCanvasWidth,
        height: minCanvasHeight
      });

      minCanvasWidth = _getAdjustedSizes.width;
      minCanvasHeight = _getAdjustedSizes.height;


      canvasData.minWidth = minCanvasWidth;
      canvasData.minHeight = minCanvasHeight;
      canvasData.maxWidth = Infinity;
      canvasData.maxHeight = Infinity;
    }

    if (positionLimited) {
      if (viewMode) {
        var newCanvasLeft = containerData.width - canvasData.width;
        var newCanvasTop = containerData.height - canvasData.height;

        canvasData.minLeft = Math.min(0, newCanvasLeft);
        canvasData.minTop = Math.min(0, newCanvasTop);
        canvasData.maxLeft = Math.max(0, newCanvasLeft);
        canvasData.maxTop = Math.max(0, newCanvasTop);

        if (cropped && this.limited) {
          canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));
          canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));
          canvasData.maxLeft = cropBoxData.left;
          canvasData.maxTop = cropBoxData.top;

          if (viewMode === 2) {
            if (canvasData.width >= containerData.width) {
              canvasData.minLeft = Math.min(0, newCanvasLeft);
              canvasData.maxLeft = Math.max(0, newCanvasLeft);
            }

            if (canvasData.height >= containerData.height) {
              canvasData.minTop = Math.min(0, newCanvasTop);
              canvasData.maxTop = Math.max(0, newCanvasTop);
            }
          }
        }
      } else {
        canvasData.minLeft = -canvasData.width;
        canvasData.minTop = -canvasData.height;
        canvasData.maxLeft = containerData.width;
        canvasData.maxTop = containerData.height;
      }
    }
  },
  renderCanvas: function renderCanvas(changed, transformed) {
    var canvasData = this.canvasData,
        imageData = this.imageData;


    if (transformed) {
      var _getRotatedSizes = getRotatedSizes({
        width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),
        height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),
        degree: imageData.rotate || 0
      }),
          naturalWidth = _getRotatedSizes.width,
          naturalHeight = _getRotatedSizes.height;

      var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);
      var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);

      canvasData.left -= (width - canvasData.width) / 2;
      canvasData.top -= (height - canvasData.height) / 2;
      canvasData.width = width;
      canvasData.height = height;
      canvasData.aspectRatio = naturalWidth / naturalHeight;
      canvasData.naturalWidth = naturalWidth;
      canvasData.naturalHeight = naturalHeight;
      this.limitCanvas(true, false);
    }

    if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {
      canvasData.left = canvasData.oldLeft;
    }

    if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {
      canvasData.top = canvasData.oldTop;
    }

    canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);
    canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);

    this.limitCanvas(false, true);

    canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);
    canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);
    canvasData.oldLeft = canvasData.left;
    canvasData.oldTop = canvasData.top;

    setStyle(this.canvas, assign({
      width: canvasData.width,
      height: canvasData.height
    }, getTransforms({
      translateX: canvasData.left,
      translateY: canvasData.top
    })));

    this.renderImage(changed);

    if (this.cropped && this.limited) {
      this.limitCropBox(true, true);
    }
  },
  renderImage: function renderImage(changed) {
    var canvasData = this.canvasData,
        imageData = this.imageData;

    var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);
    var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);

    assign(imageData, {
      width: width,
      height: height,
      left: (canvasData.width - width) / 2,
      top: (canvasData.height - height) / 2
    });
    setStyle(this.image, assign({
      width: imageData.width,
      height: imageData.height
    }, getTransforms(assign({
      translateX: imageData.left,
      translateY: imageData.top
    }, imageData))));

    if (changed) {
      this.output();
    }
  },
  initCropBox: function initCropBox() {
    var options = this.options,
        canvasData = this.canvasData;
    var aspectRatio = options.aspectRatio;

    var autoCropArea = Number(options.autoCropArea) || 0.8;
    var cropBoxData = {
      width: canvasData.width,
      height: canvasData.height
    };

    if (aspectRatio) {
      if (canvasData.height * aspectRatio > canvasData.width) {
        cropBoxData.height = cropBoxData.width / aspectRatio;
      } else {
        cropBoxData.width = cropBoxData.height * aspectRatio;
      }
    }

    this.cropBoxData = cropBoxData;
    this.limitCropBox(true, true);

    // Initialize auto crop area
    cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);
    cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);

    // The width/height of auto crop area must large than "minWidth/Height"
    cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);
    cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);
    cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;
    cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;
    cropBoxData.oldLeft = cropBoxData.left;
    cropBoxData.oldTop = cropBoxData.top;

    this.initialCropBoxData = assign({}, cropBoxData);
  },
  limitCropBox: function limitCropBox(sizeLimited, positionLimited) {
    var options = this.options,
        containerData = this.containerData,
        canvasData = this.canvasData,
        cropBoxData = this.cropBoxData,
        limited = this.limited;
    var aspectRatio = options.aspectRatio;


    if (sizeLimited) {
      var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;
      var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;
      var maxCropBoxWidth = Math.min(containerData.width, limited ? canvasData.width : containerData.width);
      var maxCropBoxHeight = Math.min(containerData.height, limited ? canvasData.height : containerData.height);

      // The min/maxCropBoxWidth/Height must be less than container's width/height
      minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);
      minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);

      if (aspectRatio) {
        if (minCropBoxWidth && minCropBoxHeight) {
          if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {
            minCropBoxHeight = minCropBoxWidth / aspectRatio;
          } else {
            minCropBoxWidth = minCropBoxHeight * aspectRatio;
          }
        } else if (minCropBoxWidth) {
          minCropBoxHeight = minCropBoxWidth / aspectRatio;
        } else if (minCropBoxHeight) {
          minCropBoxWidth = minCropBoxHeight * aspectRatio;
        }

        if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {
          maxCropBoxHeight = maxCropBoxWidth / aspectRatio;
        } else {
          maxCropBoxWidth = maxCropBoxHeight * aspectRatio;
        }
      }

      // The minWidth/Height must be less than maxWidth/Height
      cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);
      cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);
      cropBoxData.maxWidth = maxCropBoxWidth;
      cropBoxData.maxHeight = maxCropBoxHeight;
    }

    if (positionLimited) {
      if (limited) {
        cropBoxData.minLeft = Math.max(0, canvasData.left);
        cropBoxData.minTop = Math.max(0, canvasData.top);
        cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;
        cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;
      } else {
        cropBoxData.minLeft = 0;
        cropBoxData.minTop = 0;
        cropBoxData.maxLeft = containerData.width - cropBoxData.width;
        cropBoxData.maxTop = containerData.height - cropBoxData.height;
      }
    }
  },
  renderCropBox: function renderCropBox() {
    var options = this.options,
        containerData = this.containerData,
        cropBoxData = this.cropBoxData;


    if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {
      cropBoxData.left = cropBoxData.oldLeft;
    }

    if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {
      cropBoxData.top = cropBoxData.oldTop;
    }

    cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);
    cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);

    this.limitCropBox(false, true);

    cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);
    cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);
    cropBoxData.oldLeft = cropBoxData.left;
    cropBoxData.oldTop = cropBoxData.top;

    if (options.movable && options.cropBoxMovable) {
      // Turn to move the canvas when the crop box is equal to the container
      setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);
    }

    setStyle(this.cropBox, assign({
      width: cropBoxData.width,
      height: cropBoxData.height
    }, getTransforms({
      translateX: cropBoxData.left,
      translateY: cropBoxData.top
    })));

    if (this.cropped && this.limited) {
      this.limitCanvas(true, true);
    }

    if (!this.disabled) {
      this.output();
    }
  },
  output: function output() {
    this.preview();
    dispatchEvent(this.element, EVENT_CROP, this.getData());
  }
};

var preview = {
  initPreview: function initPreview() {
    var crossOrigin = this.crossOrigin;
    var preview = this.options.preview;

    var url = crossOrigin ? this.crossOriginUrl : this.url;
    var image = document.createElement('img');

    if (crossOrigin) {
      image.crossOrigin = crossOrigin;
    }

    image.src = url;
    this.viewBox.appendChild(image);
    this.viewBoxImage = image;

    if (!preview) {
      return;
    }

    var previews = preview;

    if (typeof preview === 'string') {
      previews = this.element.ownerDocument.querySelectorAll(preview);
    } else if (preview.querySelector) {
      previews = [preview];
    }

    this.previews = previews;

    forEach(previews, function (el) {
      var img = document.createElement('img');

      // Save the original size for recover
      setData(el, DATA_PREVIEW, {
        width: el.offsetWidth,
        height: el.offsetHeight,
        html: el.innerHTML
      });

      if (crossOrigin) {
        img.crossOrigin = crossOrigin;
      }

      img.src = url;

      /**
       * Override img element styles
       * Add `display:block` to avoid margin top issue
       * Add `height:auto` to override `height` attribute on IE8
       * (Occur only when margin-top <= -height)
       */
      img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;"';

      el.innerHTML = '';
      el.appendChild(img);
    });
  },
  resetPreview: function resetPreview() {
    forEach(this.previews, function (element) {
      var data = getData(element, DATA_PREVIEW);

      setStyle(element, {
        width: data.width,
        height: data.height
      });

      element.innerHTML = data.html;
      removeData(element, DATA_PREVIEW);
    });
  },
  preview: function preview() {
    var imageData = this.imageData,
        canvasData = this.canvasData,
        cropBoxData = this.cropBoxData;
    var cropBoxWidth = cropBoxData.width,
        cropBoxHeight = cropBoxData.height;
    var width = imageData.width,
        height = imageData.height;

    var left = cropBoxData.left - canvasData.left - imageData.left;
    var top = cropBoxData.top - canvasData.top - imageData.top;

    if (!this.cropped || this.disabled) {
      return;
    }

    setStyle(this.viewBoxImage, assign({
      width: width,
      height: height
    }, getTransforms(assign({
      translateX: -left,
      translateY: -top
    }, imageData))));

    forEach(this.previews, function (element) {
      var data = getData(element, DATA_PREVIEW);
      var originalWidth = data.width;
      var originalHeight = data.height;
      var newWidth = originalWidth;
      var newHeight = originalHeight;
      var ratio = 1;

      if (cropBoxWidth) {
        ratio = originalWidth / cropBoxWidth;
        newHeight = cropBoxHeight * ratio;
      }

      if (cropBoxHeight && newHeight > originalHeight) {
        ratio = originalHeight / cropBoxHeight;
        newWidth = cropBoxWidth * ratio;
        newHeight = originalHeight;
      }

      setStyle(element, {
        width: newWidth,
        height: newHeight
      });

      setStyle(element.getElementsByTagName('img')[0], assign({
        width: width * ratio,
        height: height * ratio
      }, getTransforms(assign({
        translateX: -left * ratio,
        translateY: -top * ratio
      }, imageData))));
    });
  }
};

var events = {
  bind: function bind() {
    var element = this.element,
        options = this.options,
        cropper = this.cropper;


    if (isFunction(options.cropstart)) {
      addListener(element, EVENT_CROP_START, options.cropstart);
    }

    if (isFunction(options.cropmove)) {
      addListener(element, EVENT_CROP_MOVE, options.cropmove);
    }

    if (isFunction(options.cropend)) {
      addListener(element, EVENT_CROP_END, options.cropend);
    }

    if (isFunction(options.crop)) {
      addListener(element, EVENT_CROP, options.crop);
    }

    if (isFunction(options.zoom)) {
      addListener(element, EVENT_ZOOM, options.zoom);
    }

    addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));

    if (options.zoomable && options.zoomOnWheel) {
      addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this));
    }

    if (options.toggleDragModeOnDblclick) {
      addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));
    }

    addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));
    addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));

    if (options.responsive) {
      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));
    }
  },
  unbind: function unbind() {
    var element = this.element,
        options = this.options,
        cropper = this.cropper;


    if (isFunction(options.cropstart)) {
      removeListener(element, EVENT_CROP_START, options.cropstart);
    }

    if (isFunction(options.cropmove)) {
      removeListener(element, EVENT_CROP_MOVE, options.cropmove);
    }

    if (isFunction(options.cropend)) {
      removeListener(element, EVENT_CROP_END, options.cropend);
    }

    if (isFunction(options.crop)) {
      removeListener(element, EVENT_CROP, options.crop);
    }

    if (isFunction(options.zoom)) {
      removeListener(element, EVENT_ZOOM, options.zoom);
    }

    removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);

    if (options.zoomable && options.zoomOnWheel) {
      removeListener(cropper, EVENT_WHEEL, this.onWheel);
    }

    if (options.toggleDragModeOnDblclick) {
      removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);
    }

    removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);
    removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);

    if (options.responsive) {
      removeListener(window, EVENT_RESIZE, this.onResize);
    }
  }
};

var handlers = {
  resize: function resize() {
    var options = this.options,
        container = this.container,
        containerData = this.containerData;

    var minContainerWidth = Number(options.minContainerWidth) || 200;
    var minContainerHeight = Number(options.minContainerHeight) || 100;

    if (this.disabled || containerData.width <= minContainerWidth || containerData.height <= minContainerHeight) {
      return;
    }

    var ratio = container.offsetWidth / containerData.width;

    // Resize when width changed or height changed
    if (ratio !== 1 || container.offsetHeight !== containerData.height) {
      var canvasData = void 0;
      var cropBoxData = void 0;

      if (options.restore) {
        canvasData = this.getCanvasData();
        cropBoxData = this.getCropBoxData();
      }

      this.render();

      if (options.restore) {
        this.setCanvasData(forEach(canvasData, function (n, i) {
          canvasData[i] = n * ratio;
        }));
        this.setCropBoxData(forEach(cropBoxData, function (n, i) {
          cropBoxData[i] = n * ratio;
        }));
      }
    }
  },
  dblclick: function dblclick() {
    if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {
      return;
    }

    this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);
  },
  wheel: function wheel(e) {
    var _this = this;

    var ratio = Number(this.options.wheelZoomRatio) || 0.1;
    var delta = 1;

    if (this.disabled) {
      return;
    }

    e.preventDefault();

    // Limit wheel speed to prevent zoom too fast (#21)
    if (this.wheeling) {
      return;
    }

    this.wheeling = true;

    setTimeout(function () {
      _this.wheeling = false;
    }, 50);

    if (e.deltaY) {
      delta = e.deltaY > 0 ? 1 : -1;
    } else if (e.wheelDelta) {
      delta = -e.wheelDelta / 120;
    } else if (e.detail) {
      delta = e.detail > 0 ? 1 : -1;
    }

    this.zoom(-delta * ratio, e);
  },
  cropStart: function cropStart(e) {
    if (this.disabled) {
      return;
    }

    var options = this.options,
        pointers = this.pointers;

    var action = void 0;

    if (e.changedTouches) {
      // Handle touch event
      forEach(e.changedTouches, function (touch) {
        pointers[touch.identifier] = getPointer(touch);
      });
    } else {
      // Handle mouse event and pointer event
      pointers[e.pointerId || 0] = getPointer(e);
    }

    if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {
      action = ACTION_ZOOM;
    } else {
      action = getData(e.target, DATA_ACTION);
    }

    if (!REGEXP_ACTIONS.test(action)) {
      return;
    }

    if (dispatchEvent(this.element, EVENT_CROP_START, {
      originalEvent: e,
      action: action
    }) === false) {
      return;
    }

    e.preventDefault();

    this.action = action;
    this.cropping = false;

    if (action === ACTION_CROP) {
      this.cropping = true;
      addClass(this.dragBox, CLASS_MODAL);
    }
  },
  cropMove: function cropMove(e) {
    var action = this.action;


    if (this.disabled || !action) {
      return;
    }

    var pointers = this.pointers;


    e.preventDefault();

    if (dispatchEvent(this.element, EVENT_CROP_MOVE, {
      originalEvent: e,
      action: action
    }) === false) {
      return;
    }

    if (e.changedTouches) {
      forEach(e.changedTouches, function (touch) {
        assign(pointers[touch.identifier], getPointer(touch, true));
      });
    } else {
      assign(pointers[e.pointerId || 0], getPointer(e, true));
    }

    this.change(e);
  },
  cropEnd: function cropEnd(e) {
    if (this.disabled) {
      return;
    }

    var action = this.action,
        pointers = this.pointers;


    if (e.changedTouches) {
      forEach(e.changedTouches, function (touch) {
        delete pointers[touch.identifier];
      });
    } else {
      delete pointers[e.pointerId || 0];
    }

    if (!action) {
      return;
    }

    e.preventDefault();

    if (!Object.keys(pointers).length) {
      this.action = '';
    }

    if (this.cropping) {
      this.cropping = false;
      toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);
    }

    dispatchEvent(this.element, EVENT_CROP_END, {
      originalEvent: e,
      action: action
    });
  }
};

var change = {
  change: function change(e) {
    var options = this.options,
        canvasData = this.canvasData,
        containerData = this.containerData,
        cropBoxData = this.cropBoxData,
        pointers = this.pointers;
    var action = this.action;
    var aspectRatio = options.aspectRatio;
    var left = cropBoxData.left,
        top = cropBoxData.top,
        width = cropBoxData.width,
        height = cropBoxData.height;

    var right = left + width;
    var bottom = top + height;
    var minLeft = 0;
    var minTop = 0;
    var maxWidth = containerData.width;
    var maxHeight = containerData.height;
    var renderable = true;
    var offset = void 0;

    // Locking aspect ratio in "free mode" by holding shift key
    if (!aspectRatio && e.shiftKey) {
      aspectRatio = width && height ? width / height : 1;
    }

    if (this.limited) {
      minLeft = cropBoxData.minLeft;
      minTop = cropBoxData.minTop;

      maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);
      maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);
    }

    var pointer = pointers[Object.keys(pointers)[0]];
    var range = {
      x: pointer.endX - pointer.startX,
      y: pointer.endY - pointer.startY
    };
    var check = function check(side) {
      switch (side) {
        case ACTION_EAST:
          if (right + range.x > maxWidth) {
            range.x = maxWidth - right;
          }

          break;

        case ACTION_WEST:
          if (left + range.x < minLeft) {
            range.x = minLeft - left;
          }

          break;

        case ACTION_NORTH:
          if (top + range.y < minTop) {
            range.y = minTop - top;
          }

          break;

        case ACTION_SOUTH:
          if (bottom + range.y > maxHeight) {
            range.y = maxHeight - bottom;
          }

          break;

        default:
      }
    };

    switch (action) {
      // Move crop box
      case ACTION_ALL:
        left += range.x;
        top += range.y;
        break;

      // Resize crop box
      case ACTION_EAST:
        if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {
          renderable = false;
          break;
        }

        check(ACTION_EAST);
        width += range.x;

        if (aspectRatio) {
          height = width / aspectRatio;
          top -= range.x / aspectRatio / 2;
        }

        if (width < 0) {
          action = ACTION_WEST;
          width = 0;
        }

        break;

      case ACTION_NORTH:
        if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {
          renderable = false;
          break;
        }

        check(ACTION_NORTH);
        height -= range.y;
        top += range.y;

        if (aspectRatio) {
          width = height * aspectRatio;
          left += range.y * aspectRatio / 2;
        }

        if (height < 0) {
          action = ACTION_SOUTH;
          height = 0;
        }

        break;

      case ACTION_WEST:
        if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {
          renderable = false;
          break;
        }

        check(ACTION_WEST);
        width -= range.x;
        left += range.x;

        if (aspectRatio) {
          height = width / aspectRatio;
          top += range.x / aspectRatio / 2;
        }

        if (width < 0) {
          action = ACTION_EAST;
          width = 0;
        }

        break;

      case ACTION_SOUTH:
        if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {
          renderable = false;
          break;
        }

        check(ACTION_SOUTH);
        height += range.y;

        if (aspectRatio) {
          width = height * aspectRatio;
          left -= range.y * aspectRatio / 2;
        }

        if (height < 0) {
          action = ACTION_NORTH;
          height = 0;
        }

        break;

      case ACTION_NORTH_EAST:
        if (aspectRatio) {
          if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {
            renderable = false;
            break;
          }

          check(ACTION_NORTH);
          height -= range.y;
          top += range.y;
          width = height * aspectRatio;
        } else {
          check(ACTION_NORTH);
          check(ACTION_EAST);

          if (range.x >= 0) {
            if (right < maxWidth) {
              width += range.x;
            } else if (range.y <= 0 && top <= minTop) {
              renderable = false;
            }
          } else {
            width += range.x;
          }

          if (range.y <= 0) {
            if (top > minTop) {
              height -= range.y;
              top += range.y;
            }
          } else {
            height -= range.y;
            top += range.y;
          }
        }

        if (width < 0 && height < 0) {
          action = ACTION_SOUTH_WEST;
          height = 0;
          width = 0;
        } else if (width < 0) {
          action = ACTION_NORTH_WEST;
          width = 0;
        } else if (height < 0) {
          action = ACTION_SOUTH_EAST;
          height = 0;
        }

        break;

      case ACTION_NORTH_WEST:
        if (aspectRatio) {
          if (range.y <= 0 && (top <= minTop || left <= minLeft)) {
            renderable = false;
            break;
          }

          check(ACTION_NORTH);
          height -= range.y;
          top += range.y;
          width = height * aspectRatio;
          left += range.y * aspectRatio;
        } else {
          check(ACTION_NORTH);
          check(ACTION_WEST);

          if (range.x <= 0) {
            if (left > minLeft) {
              width -= range.x;
              left += range.x;
            } else if (range.y <= 0 && top <= minTop) {
              renderable = false;
            }
          } else {
            width -= range.x;
            left += range.x;
          }

          if (range.y <= 0) {
            if (top > minTop) {
              height -= range.y;
              top += range.y;
            }
          } else {
            height -= range.y;
            top += range.y;
          }
        }

        if (width < 0 && height < 0) {
          action = ACTION_SOUTH_EAST;
          height = 0;
          width = 0;
        } else if (width < 0) {
          action = ACTION_NORTH_EAST;
          width = 0;
        } else if (height < 0) {
          action = ACTION_SOUTH_WEST;
          height = 0;
        }

        break;

      case ACTION_SOUTH_WEST:
        if (aspectRatio) {
          if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {
            renderable = false;
            break;
          }

          check(ACTION_WEST);
          width -= range.x;
          left += range.x;
          height = width / aspectRatio;
        } else {
          check(ACTION_SOUTH);
          check(ACTION_WEST);

          if (range.x <= 0) {
            if (left > minLeft) {
              width -= range.x;
              left += range.x;
            } else if (range.y >= 0 && bottom >= maxHeight) {
              renderable = false;
            }
          } else {
            width -= range.x;
            left += range.x;
          }

          if (range.y >= 0) {
            if (bottom < maxHeight) {
              height += range.y;
            }
          } else {
            height += range.y;
          }
        }

        if (width < 0 && height < 0) {
          action = ACTION_NORTH_EAST;
          height = 0;
          width = 0;
        } else if (width < 0) {
          action = ACTION_SOUTH_EAST;
          width = 0;
        } else if (height < 0) {
          action = ACTION_NORTH_WEST;
          height = 0;
        }

        break;

      case ACTION_SOUTH_EAST:
        if (aspectRatio) {
          if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {
            renderable = false;
            break;
          }

          check(ACTION_EAST);
          width += range.x;
          height = width / aspectRatio;
        } else {
          check(ACTION_SOUTH);
          check(ACTION_EAST);

          if (range.x >= 0) {
            if (right < maxWidth) {
              width += range.x;
            } else if (range.y >= 0 && bottom >= maxHeight) {
              renderable = false;
            }
          } else {
            width += range.x;
          }

          if (range.y >= 0) {
            if (bottom < maxHeight) {
              height += range.y;
            }
          } else {
            height += range.y;
          }
        }

        if (width < 0 && height < 0) {
          action = ACTION_NORTH_WEST;
          height = 0;
          width = 0;
        } else if (width < 0) {
          action = ACTION_SOUTH_WEST;
          width = 0;
        } else if (height < 0) {
          action = ACTION_NORTH_EAST;
          height = 0;
        }

        break;

      // Move canvas
      case ACTION_MOVE:
        this.move(range.x, range.y);
        renderable = false;
        break;

      // Zoom canvas
      case ACTION_ZOOM:
        this.zoom(getMaxZoomRatio(pointers), e);
        renderable = false;
        break;

      // Create crop box
      case ACTION_CROP:
        if (!range.x || !range.y) {
          renderable = false;
          break;
        }

        offset = getOffset(this.cropper);
        left = pointer.startX - offset.left;
        top = pointer.startY - offset.top;
        width = cropBoxData.minWidth;
        height = cropBoxData.minHeight;

        if (range.x > 0) {
          action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;
        } else if (range.x < 0) {
          left -= width;
          action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;
        }

        if (range.y < 0) {
          top -= height;
        }

        // Show the crop box if is hidden
        if (!this.cropped) {
          removeClass(this.cropBox, CLASS_HIDDEN);
          this.cropped = true;

          if (this.limited) {
            this.limitCropBox(true, true);
          }
        }

        break;

      default:
    }

    if (renderable) {
      cropBoxData.width = width;
      cropBoxData.height = height;
      cropBoxData.left = left;
      cropBoxData.top = top;
      this.action = action;
      this.renderCropBox();
    }

    // Override
    forEach(pointers, function (p) {
      p.startX = p.endX;
      p.startY = p.endY;
    });
  }
};

var methods = {
  // Show the crop box manually
  crop: function crop() {
    if (this.ready && !this.cropped && !this.disabled) {
      this.cropped = true;
      this.limitCropBox(true, true);

      if (this.options.modal) {
        addClass(this.dragBox, CLASS_MODAL);
      }

      removeClass(this.cropBox, CLASS_HIDDEN);
      this.setCropBoxData(this.initialCropBoxData);
    }

    return this;
  },


  // Reset the image and crop box to their initial states
  reset: function reset() {
    if (this.ready && !this.disabled) {
      this.imageData = assign({}, this.initialImageData);
      this.canvasData = assign({}, this.initialCanvasData);
      this.cropBoxData = assign({}, this.initialCropBoxData);
      this.renderCanvas();

      if (this.cropped) {
        this.renderCropBox();
      }
    }

    return this;
  },


  // Clear the crop box
  clear: function clear() {
    if (this.cropped && !this.disabled) {
      assign(this.cropBoxData, {
        left: 0,
        top: 0,
        width: 0,
        height: 0
      });

      this.cropped = false;
      this.renderCropBox();
      this.limitCanvas(true, true);

      // Render canvas after crop box rendered
      this.renderCanvas();
      removeClass(this.dragBox, CLASS_MODAL);
      addClass(this.cropBox, CLASS_HIDDEN);
    }

    return this;
  },


  /**
   * Replace the image's src and rebuild the cropper
   * @param {string} url - The new URL.
   * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.
   * @returns {Cropper} this
   */
  replace: function replace(url) {
    var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    if (!this.disabled && url) {
      if (this.isImg) {
        this.element.src = url;
      }

      if (hasSameSize) {
        this.url = url;
        this.image.src = url;

        if (this.ready) {
          this.viewBoxImage.src = url;

          forEach(this.previews, function (element) {
            element.getElementsByTagName('img')[0].src = url;
          });
        }
      } else {
        if (this.isImg) {
          this.replaced = true;
        }

        this.options.data = null;
        this.uncreate();
        this.load(url);
      }
    }

    return this;
  },


  // Enable (unfreeze) the cropper
  enable: function enable() {
    if (this.ready && this.disabled) {
      this.disabled = false;
      removeClass(this.cropper, CLASS_DISABLED);
    }

    return this;
  },


  // Disable (freeze) the cropper
  disable: function disable() {
    if (this.ready && !this.disabled) {
      this.disabled = true;
      addClass(this.cropper, CLASS_DISABLED);
    }

    return this;
  },


  /**
   * Destroy the cropper and remove the instance from the image
   * @returns {Cropper} this
   */
  destroy: function destroy() {
    var element = this.element;


    if (!getData(element, NAMESPACE)) {
      return this;
    }

    if (this.isImg && this.replaced) {
      element.src = this.originalUrl;
    }

    this.uncreate();
    removeData(element, NAMESPACE);

    return this;
  },


  /**
   * Move the canvas with relative offsets
   * @param {number} offsetX - The relative offset distance on the x-axis.
   * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.
   * @returns {Cropper} this
   */
  move: function move(offsetX) {
    var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;
    var _canvasData = this.canvasData,
        left = _canvasData.left,
        top = _canvasData.top;


    return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));
  },


  /**
   * Move the canvas to an absolute point
   * @param {number} x - The x-axis coordinate.
   * @param {number} [y=x] - The y-axis coordinate.
   * @returns {Cropper} this
   */
  moveTo: function moveTo(x) {
    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;
    var canvasData = this.canvasData;

    var changed = false;

    x = Number(x);
    y = Number(y);

    if (this.ready && !this.disabled && this.options.movable) {
      if (isNumber(x)) {
        canvasData.left = x;
        changed = true;
      }

      if (isNumber(y)) {
        canvasData.top = y;
        changed = true;
      }

      if (changed) {
        this.renderCanvas(true);
      }
    }

    return this;
  },


  /**
   * Zoom the canvas with a relative ratio
   * @param {number} ratio - The target ratio.
   * @param {Event} _originalEvent - The original event if any.
   * @returns {Cropper} this
   */
  zoom: function zoom(ratio, _originalEvent) {
    var canvasData = this.canvasData;


    ratio = Number(ratio);

    if (ratio < 0) {
      ratio = 1 / (1 - ratio);
    } else {
      ratio = 1 + ratio;
    }

    return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);
  },


  /**
   * Zoom the canvas to an absolute ratio
   * @param {number} ratio - The target ratio.
   * @param {Object} pivot - The zoom pivot point coordinate.
   * @param {Event} _originalEvent - The original event if any.
   * @returns {Cropper} this
   */
  zoomTo: function zoomTo(ratio, pivot, _originalEvent) {
    var options = this.options,
        canvasData = this.canvasData;
    var width = canvasData.width,
        height = canvasData.height,
        naturalWidth = canvasData.naturalWidth,
        naturalHeight = canvasData.naturalHeight;


    ratio = Number(ratio);

    if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {
      var newWidth = naturalWidth * ratio;
      var newHeight = naturalHeight * ratio;

      if (dispatchEvent(this.element, EVENT_ZOOM, {
        originalEvent: _originalEvent,
        oldRatio: width / naturalWidth,
        ratio: newWidth / naturalWidth
      }) === false) {
        return this;
      }

      if (_originalEvent) {
        var pointers = this.pointers;

        var offset = getOffset(this.cropper);
        var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {
          pageX: _originalEvent.pageX,
          pageY: _originalEvent.pageY
        };

        // Zoom from the triggering point of the event
        canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);
        canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);
      } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {
        canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);
        canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);
      } else {
        // Zoom from the center of the canvas
        canvasData.left -= (newWidth - width) / 2;
        canvasData.top -= (newHeight - height) / 2;
      }

      canvasData.width = newWidth;
      canvasData.height = newHeight;
      this.renderCanvas(true);
    }

    return this;
  },


  /**
   * Rotate the canvas with a relative degree
   * @param {number} degree - The rotate degree.
   * @returns {Cropper} this
   */
  rotate: function rotate(degree) {
    return this.rotateTo((this.imageData.rotate || 0) + Number(degree));
  },


  /**
   * Rotate the canvas to an absolute degree
   * @param {number} degree - The rotate degree.
   * @returns {Cropper} this
   */
  rotateTo: function rotateTo(degree) {
    degree = Number(degree);

    if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {
      this.imageData.rotate = degree % 360;
      this.renderCanvas(true, true);
    }

    return this;
  },


  /**
   * Scale the image on the x-axis.
   * @param {number} scaleX - The scale ratio on the x-axis.
   * @returns {Cropper} this
   */
  scaleX: function scaleX(_scaleX) {
    var scaleY = this.imageData.scaleY;


    return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);
  },


  /**
   * Scale the image on the y-axis.
   * @param {number} scaleY - The scale ratio on the y-axis.
   * @returns {Cropper} this
   */
  scaleY: function scaleY(_scaleY) {
    var scaleX = this.imageData.scaleX;


    return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);
  },


  /**
   * Scale the image
   * @param {number} scaleX - The scale ratio on the x-axis.
   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.
   * @returns {Cropper} this
   */
  scale: function scale(scaleX) {
    var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;
    var imageData = this.imageData;

    var transformed = false;

    scaleX = Number(scaleX);
    scaleY = Number(scaleY);

    if (this.ready && !this.disabled && this.options.scalable) {
      if (isNumber(scaleX)) {
        imageData.scaleX = scaleX;
        transformed = true;
      }

      if (isNumber(scaleY)) {
        imageData.scaleY = scaleY;
        transformed = true;
      }

      if (transformed) {
        this.renderCanvas(true, true);
      }
    }

    return this;
  },


  /**
   * Get the cropped area position and size data (base on the original image)
   * @param {boolean} [rounded=false] - Indicate if round the data values or not.
   * @returns {Object} The result cropped data.
   */
  getData: function getData$$1() {
    var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var options = this.options,
        imageData = this.imageData,
        canvasData = this.canvasData,
        cropBoxData = this.cropBoxData;

    var data = void 0;

    if (this.ready && this.cropped) {
      data = {
        x: cropBoxData.left - canvasData.left,
        y: cropBoxData.top - canvasData.top,
        width: cropBoxData.width,
        height: cropBoxData.height
      };

      var ratio = imageData.width / imageData.naturalWidth;

      forEach(data, function (n, i) {
        n /= ratio;
        data[i] = rounded ? Math.round(n) : n;
      });
    } else {
      data = {
        x: 0,
        y: 0,
        width: 0,
        height: 0
      };
    }

    if (options.rotatable) {
      data.rotate = imageData.rotate || 0;
    }

    if (options.scalable) {
      data.scaleX = imageData.scaleX || 1;
      data.scaleY = imageData.scaleY || 1;
    }

    return data;
  },


  /**
   * Set the cropped area position and size with new data
   * @param {Object} data - The new data.
   * @returns {Cropper} this
   */
  setData: function setData$$1(data) {
    var options = this.options,
        imageData = this.imageData,
        canvasData = this.canvasData;

    var cropBoxData = {};

    if (this.ready && !this.disabled && isPlainObject(data)) {
      var transformed = false;

      if (options.rotatable) {
        if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {
          imageData.rotate = data.rotate;
          transformed = true;
        }
      }

      if (options.scalable) {
        if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {
          imageData.scaleX = data.scaleX;
          transformed = true;
        }

        if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {
          imageData.scaleY = data.scaleY;
          transformed = true;
        }
      }

      if (transformed) {
        this.renderCanvas(true, true);
      }

      var ratio = imageData.width / imageData.naturalWidth;

      if (isNumber(data.x)) {
        cropBoxData.left = data.x * ratio + canvasData.left;
      }

      if (isNumber(data.y)) {
        cropBoxData.top = data.y * ratio + canvasData.top;
      }

      if (isNumber(data.width)) {
        cropBoxData.width = data.width * ratio;
      }

      if (isNumber(data.height)) {
        cropBoxData.height = data.height * ratio;
      }

      this.setCropBoxData(cropBoxData);
    }

    return this;
  },


  /**
   * Get the container size data.
   * @returns {Object} The result container data.
   */
  getContainerData: function getContainerData() {
    return this.ready ? assign({}, this.containerData) : {};
  },


  /**
   * Get the image position and size data.
   * @returns {Object} The result image data.
   */
  getImageData: function getImageData() {
    return this.sized ? assign({}, this.imageData) : {};
  },


  /**
   * Get the canvas position and size data.
   * @returns {Object} The result canvas data.
   */
  getCanvasData: function getCanvasData() {
    var canvasData = this.canvasData;

    var data = {};

    if (this.ready) {
      forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {
        data[n] = canvasData[n];
      });
    }

    return data;
  },


  /**
   * Set the canvas position and size with new data.
   * @param {Object} data - The new canvas data.
   * @returns {Cropper} this
   */
  setCanvasData: function setCanvasData(data) {
    var canvasData = this.canvasData;
    var aspectRatio = canvasData.aspectRatio;


    if (this.ready && !this.disabled && isPlainObject(data)) {
      if (isNumber(data.left)) {
        canvasData.left = data.left;
      }

      if (isNumber(data.top)) {
        canvasData.top = data.top;
      }

      if (isNumber(data.width)) {
        canvasData.width = data.width;
        canvasData.height = data.width / aspectRatio;
      } else if (isNumber(data.height)) {
        canvasData.height = data.height;
        canvasData.width = data.height * aspectRatio;
      }

      this.renderCanvas(true);
    }

    return this;
  },


  /**
   * Get the crop box position and size data.
   * @returns {Object} The result crop box data.
   */
  getCropBoxData: function getCropBoxData() {
    var cropBoxData = this.cropBoxData;

    var data = void 0;

    if (this.ready && this.cropped) {
      data = {
        left: cropBoxData.left,
        top: cropBoxData.top,
        width: cropBoxData.width,
        height: cropBoxData.height
      };
    }

    return data || {};
  },


  /**
   * Set the crop box position and size with new data.
   * @param {Object} data - The new crop box data.
   * @returns {Cropper} this
   */
  setCropBoxData: function setCropBoxData(data) {
    var cropBoxData = this.cropBoxData;
    var aspectRatio = this.options.aspectRatio;

    var widthChanged = void 0;
    var heightChanged = void 0;

    if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {
      if (isNumber(data.left)) {
        cropBoxData.left = data.left;
      }

      if (isNumber(data.top)) {
        cropBoxData.top = data.top;
      }

      if (isNumber(data.width) && data.width !== cropBoxData.width) {
        widthChanged = true;
        cropBoxData.width = data.width;
      }

      if (isNumber(data.height) && data.height !== cropBoxData.height) {
        heightChanged = true;
        cropBoxData.height = data.height;
      }

      if (aspectRatio) {
        if (widthChanged) {
          cropBoxData.height = cropBoxData.width / aspectRatio;
        } else if (heightChanged) {
          cropBoxData.width = cropBoxData.height * aspectRatio;
        }
      }

      this.renderCropBox();
    }

    return this;
  },


  /**
   * Get a canvas drawn the cropped image.
   * @param {Object} [options={}] - The config options.
   * @returns {HTMLCanvasElement} - The result canvas.
   */
  getCroppedCanvas: function getCroppedCanvas() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    if (!this.ready || !window.HTMLCanvasElement) {
      return null;
    }

    var canvasData = this.canvasData;

    var source = getSourceCanvas(this.image, this.imageData, canvasData, options);

    // Returns the source canvas if it is not cropped.
    if (!this.cropped) {
      return source;
    }

    var _getData = this.getData(),
        initialX = _getData.x,
        initialY = _getData.y,
        initialWidth = _getData.width,
        initialHeight = _getData.height;

    var ratio = source.width / Math.floor(canvasData.naturalWidth);

    if (ratio !== 1) {
      initialX *= ratio;
      initialY *= ratio;
      initialWidth *= ratio;
      initialHeight *= ratio;
    }

    var aspectRatio = initialWidth / initialHeight;
    var maxSizes = getAdjustedSizes({
      aspectRatio: aspectRatio,
      width: options.maxWidth || Infinity,
      height: options.maxHeight || Infinity
    });
    var minSizes = getAdjustedSizes({
      aspectRatio: aspectRatio,
      width: options.minWidth || 0,
      height: options.minHeight || 0
    }, 'cover');

    var _getAdjustedSizes = getAdjustedSizes({
      aspectRatio: aspectRatio,
      width: options.width || (ratio !== 1 ? source.width : initialWidth),
      height: options.height || (ratio !== 1 ? source.height : initialHeight)
    }),
        width = _getAdjustedSizes.width,
        height = _getAdjustedSizes.height;

    width = Math.min(maxSizes.width, Math.max(minSizes.width, width));
    height = Math.min(maxSizes.height, Math.max(minSizes.height, height));

    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');

    canvas.width = normalizeDecimalNumber(width);
    canvas.height = normalizeDecimalNumber(height);

    context.fillStyle = options.fillColor || 'transparent';
    context.fillRect(0, 0, width, height);

    var _options$imageSmoothi = options.imageSmoothingEnabled,
        imageSmoothingEnabled = _options$imageSmoothi === undefined ? true : _options$imageSmoothi,
        imageSmoothingQuality = options.imageSmoothingQuality;


    context.imageSmoothingEnabled = imageSmoothingEnabled;

    if (imageSmoothingQuality) {
      context.imageSmoothingQuality = imageSmoothingQuality;
    }

    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage
    var sourceWidth = source.width;
    var sourceHeight = source.height;

    // Source canvas parameters
    var srcX = initialX;
    var srcY = initialY;
    var srcWidth = void 0;
    var srcHeight = void 0;

    // Destination canvas parameters
    var dstX = void 0;
    var dstY = void 0;
    var dstWidth = void 0;
    var dstHeight = void 0;

    if (srcX <= -initialWidth || srcX > sourceWidth) {
      srcX = 0;
      srcWidth = 0;
      dstX = 0;
      dstWidth = 0;
    } else if (srcX <= 0) {
      dstX = -srcX;
      srcX = 0;
      srcWidth = Math.min(sourceWidth, initialWidth + srcX);
      dstWidth = srcWidth;
    } else if (srcX <= sourceWidth) {
      dstX = 0;
      srcWidth = Math.min(initialWidth, sourceWidth - srcX);
      dstWidth = srcWidth;
    }

    if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {
      srcY = 0;
      srcHeight = 0;
      dstY = 0;
      dstHeight = 0;
    } else if (srcY <= 0) {
      dstY = -srcY;
      srcY = 0;
      srcHeight = Math.min(sourceHeight, initialHeight + srcY);
      dstHeight = srcHeight;
    } else if (srcY <= sourceHeight) {
      dstY = 0;
      srcHeight = Math.min(initialHeight, sourceHeight - srcY);
      dstHeight = srcHeight;
    }

    var params = [srcX, srcY, srcWidth, srcHeight];

    // Avoid "IndexSizeError"
    if (dstWidth > 0 && dstHeight > 0) {
      var scale = width / initialWidth;

      params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);
    }

    // All the numerical parameters should be integer for `drawImage`
    // https://github.com/fengyuanchen/cropper/issues/476
    context.drawImage.apply(context, [source].concat(toConsumableArray(params.map(function (param) {
      return Math.floor(normalizeDecimalNumber(param));
    }))));

    return canvas;
  },


  /**
   * Change the aspect ratio of the crop box.
   * @param {number} aspectRatio - The new aspect ratio.
   * @returns {Cropper} this
   */
  setAspectRatio: function setAspectRatio(aspectRatio) {
    var options = this.options;


    if (!this.disabled && !isUndefined(aspectRatio)) {
      // 0 -> NaN
      options.aspectRatio = Math.max(0, aspectRatio) || NaN;

      if (this.ready) {
        this.initCropBox();

        if (this.cropped) {
          this.renderCropBox();
        }
      }
    }

    return this;
  },


  /**
   * Change the drag mode.
   * @param {string} mode - The new drag mode.
   * @returns {Cropper} this
   */
  setDragMode: function setDragMode(mode) {
    var options = this.options,
        dragBox = this.dragBox,
        face = this.face;


    if (this.ready && !this.disabled) {
      var croppable = mode === DRAG_MODE_CROP;
      var movable = options.movable && mode === DRAG_MODE_MOVE;

      mode = croppable || movable ? mode : DRAG_MODE_NONE;

      options.dragMode = mode;
      setData(dragBox, DATA_ACTION, mode);
      toggleClass(dragBox, CLASS_CROP, croppable);
      toggleClass(dragBox, CLASS_MOVE, movable);

      if (!options.cropBoxMovable) {
        // Sync drag mode to crop box when it is not movable
        setData(face, DATA_ACTION, mode);
        toggleClass(face, CLASS_CROP, croppable);
        toggleClass(face, CLASS_MOVE, movable);
      }
    }

    return this;
  }
};

var AnotherCropper = WINDOW.Cropper;

var Cropper = function () {
  /**
   * Create a new Cropper.
   * @param {Element} element - The target element for cropping.
   * @param {Object} [options={}] - The configuration options.
   */
  function Cropper(element) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Cropper);

    if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {
      throw new Error('The first argument is required and must be an <img> or <canvas> element.');
    }

    this.element = element;
    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);
    this.cropped = false;
    this.disabled = false;
    this.pointers = {};
    this.ready = false;
    this.reloading = false;
    this.replaced = false;
    this.sized = false;
    this.sizing = false;
    this.init();
  }

  createClass(Cropper, [{
    key: 'init',
    value: function init() {
      var element = this.element;

      var tagName = element.tagName.toLowerCase();
      var url = void 0;

      if (getData(element, NAMESPACE)) {
        return;
      }

      setData(element, NAMESPACE, this);

      if (tagName === 'img') {
        this.isImg = true;

        // e.g.: "img/picture.jpg"
        url = element.getAttribute('src') || '';
        this.originalUrl = url;

        // Stop when it's a blank image
        if (!url) {
          return;
        }

        // e.g.: "http://example.com/img/picture.jpg"
        url = element.src;
      } else if (tagName === 'canvas' && window.HTMLCanvasElement) {
        url = element.toDataURL();
      }

      this.load(url);
    }
  }, {
    key: 'load',
    value: function load(url) {
      var _this = this;

      if (!url) {
        return;
      }

      this.url = url;
      this.imageData = {};

      var element = this.element,
          options = this.options;


      if (!options.checkOrientation || !window.ArrayBuffer) {
        this.clone();
        return;
      }

      // XMLHttpRequest disallows to open a Data URL in some browsers like IE11 and Safari
      if (REGEXP_DATA_URL.test(url)) {
        if (REGEXP_DATA_URL_JPEG.test(url)) {
          this.read(dataURLToArrayBuffer(url));
        } else {
          this.clone();
        }

        return;
      }

      var xhr = new XMLHttpRequest();

      this.reloading = true;
      this.xhr = xhr;

      var done = function done() {
        _this.reloading = false;
        _this.xhr = null;
      };

      xhr.ontimeout = done;
      xhr.onabort = done;
      xhr.onerror = function () {
        done();
        _this.clone();
      };

      xhr.onload = function () {
        done();
        _this.read(xhr.response);
      };

      // Bust cache when there is a "crossOrigin" property
      if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {
        url = addTimestamp(url);
      }

      xhr.open('get', url);
      xhr.responseType = 'arraybuffer';
      xhr.withCredentials = element.crossOrigin === 'use-credentials';
      xhr.send();
    }
  }, {
    key: 'read',
    value: function read(arrayBuffer) {
      var options = this.options,
          imageData = this.imageData;

      var orientation = getOrientation(arrayBuffer);
      var rotate = 0;
      var scaleX = 1;
      var scaleY = 1;

      if (orientation > 1) {
        this.url = arrayBufferToDataURL(arrayBuffer, 'image/jpeg');

        var _parseOrientation = parseOrientation(orientation);

        rotate = _parseOrientation.rotate;
        scaleX = _parseOrientation.scaleX;
        scaleY = _parseOrientation.scaleY;
      }

      if (options.rotatable) {
        imageData.rotate = rotate;
      }

      if (options.scalable) {
        imageData.scaleX = scaleX;
        imageData.scaleY = scaleY;
      }

      this.clone();
    }
  }, {
    key: 'clone',
    value: function clone() {
      var element = this.element,
          url = this.url;

      var crossOrigin = void 0;
      var crossOriginUrl = void 0;

      if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {
        crossOrigin = element.crossOrigin;


        if (crossOrigin) {
          crossOriginUrl = url;
        } else {
          crossOrigin = 'anonymous';

          // Bust cache when there is not a "crossOrigin" property
          crossOriginUrl = addTimestamp(url);
        }
      }

      this.crossOrigin = crossOrigin;
      this.crossOriginUrl = crossOriginUrl;

      var image = document.createElement('img');

      if (crossOrigin) {
        image.crossOrigin = crossOrigin;
      }

      image.src = crossOriginUrl || url;

      var start = this.start.bind(this);
      var stop = this.stop.bind(this);

      this.image = image;
      this.onStart = start;
      this.onStop = stop;

      if (this.isImg) {
        if (element.complete) {
          // start asynchronously to keep `this.cropper` is accessible in `ready` event handler.
          this.timeout = setTimeout(start, 0);
        } else {
          addListener(element, EVENT_LOAD, start, {
            once: true
          });
        }
      } else {
        image.onload = start;
        image.onerror = stop;
        addClass(image, CLASS_HIDE);
        element.parentNode.insertBefore(image, element.nextSibling);
      }
    }
  }, {
    key: 'start',
    value: function start(event) {
      var _this2 = this;

      var image = this.isImg ? this.element : this.image;

      if (event) {
        image.onload = null;
        image.onerror = null;
      }

      this.sizing = true;

      var IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);
      var done = function done(naturalWidth, naturalHeight) {
        assign(_this2.imageData, {
          naturalWidth: naturalWidth,
          naturalHeight: naturalHeight,
          aspectRatio: naturalWidth / naturalHeight
        });
        _this2.sizing = false;
        _this2.sized = true;
        _this2.build();
      };

      // Modern browsers (except Safari)
      if (image.naturalWidth && !IS_SAFARI) {
        done(image.naturalWidth, image.naturalHeight);
        return;
      }

      var sizingImage = document.createElement('img');
      var body = document.body || document.documentElement;

      this.sizingImage = sizingImage;

      sizingImage.onload = function () {
        done(sizingImage.width, sizingImage.height);

        if (!IS_SAFARI) {
          body.removeChild(sizingImage);
        }
      };

      sizingImage.src = image.src;

      // iOS Safari will convert the image automatically
      // with its orientation once append it into DOM (#279)
      if (!IS_SAFARI) {
        sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';
        body.appendChild(sizingImage);
      }
    }
  }, {
    key: 'stop',
    value: function stop() {
      var image = this.image;


      image.onload = null;
      image.onerror = null;
      image.parentNode.removeChild(image);
      this.image = null;
    }
  }, {
    key: 'build',
    value: function build() {
      if (!this.sized || this.ready) {
        return;
      }

      var element = this.element,
          options = this.options,
          image = this.image;

      // Create cropper elements

      var container = element.parentNode;
      var template = document.createElement('div');

      template.innerHTML = TEMPLATE;

      var cropper = template.querySelector('.' + NAMESPACE + '-container');
      var canvas = cropper.querySelector('.' + NAMESPACE + '-canvas');
      var dragBox = cropper.querySelector('.' + NAMESPACE + '-drag-box');
      var cropBox = cropper.querySelector('.' + NAMESPACE + '-crop-box');
      var face = cropBox.querySelector('.' + NAMESPACE + '-face');

      this.container = container;
      this.cropper = cropper;
      this.canvas = canvas;
      this.dragBox = dragBox;
      this.cropBox = cropBox;
      this.viewBox = cropper.querySelector('.' + NAMESPACE + '-view-box');
      this.face = face;

      canvas.appendChild(image);

      // Hide the original image
      addClass(element, CLASS_HIDDEN);

      // Inserts the cropper after to the current image
      container.insertBefore(cropper, element.nextSibling);

      // Show the image if is hidden
      if (!this.isImg) {
        removeClass(image, CLASS_HIDE);
      }

      this.initPreview();
      this.bind();

      options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;
      options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;

      addClass(cropBox, CLASS_HIDDEN);

      if (!options.guides) {
        addClass(cropBox.getElementsByClassName(NAMESPACE + '-dashed'), CLASS_HIDDEN);
      }

      if (!options.center) {
        addClass(cropBox.getElementsByClassName(NAMESPACE + '-center'), CLASS_HIDDEN);
      }

      if (options.background) {
        addClass(cropper, NAMESPACE + '-bg');
      }

      if (!options.highlight) {
        addClass(face, CLASS_INVISIBLE);
      }

      if (options.cropBoxMovable) {
        addClass(face, CLASS_MOVE);
        setData(face, DATA_ACTION, ACTION_ALL);
      }

      if (!options.cropBoxResizable) {
        addClass(cropBox.getElementsByClassName(NAMESPACE + '-line'), CLASS_HIDDEN);
        addClass(cropBox.getElementsByClassName(NAMESPACE + '-point'), CLASS_HIDDEN);
      }

      this.render();
      this.ready = true;
      this.setDragMode(options.dragMode);

      if (options.autoCrop) {
        this.crop();
      }

      this.setData(options.data);

      if (isFunction(options.ready)) {
        addListener(element, EVENT_READY, options.ready, {
          once: true
        });
      }

      dispatchEvent(element, EVENT_READY);
    }
  }, {
    key: 'unbuild',
    value: function unbuild() {
      if (!this.ready) {
        return;
      }

      this.ready = false;
      this.unbind();
      this.resetPreview();
      this.cropper.parentNode.removeChild(this.cropper);
      removeClass(this.element, CLASS_HIDDEN);
    }
  }, {
    key: 'uncreate',
    value: function uncreate() {
      var element = this.element;


      if (this.ready) {
        this.unbuild();
        this.ready = false;
        this.cropped = false;
      } else if (this.sizing) {
        this.sizingImage.onload = null;
        this.sizing = false;
        this.sized = false;
      } else if (this.reloading) {
        this.xhr.abort();
      } else if (this.isImg) {
        if (element.complete) {
          clearTimeout(this.timeout);
        } else {
          removeListener(element, EVENT_LOAD, this.onStart);
        }
      } else if (this.image) {
        this.stop();
      }
    }

    /**
     * Get the no conflict cropper class.
     * @returns {Cropper} The cropper class.
     */

  }], [{
    key: 'noConflict',
    value: function noConflict() {
      window.Cropper = AnotherCropper;
      return Cropper;
    }

    /**
     * Change the default options.
     * @param {Object} options - The new default options.
     */

  }, {
    key: 'setDefaults',
    value: function setDefaults(options) {
      assign(DEFAULTS, isPlainObject(options) && options);
    }
  }]);
  return Cropper;
}();

assign(Cropper.prototype, render, preview, events, handlers, change, methods);

if (jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn) {
  var AnotherCropper$1 = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.cropper;
  var NAMESPACE$1 = 'cropper';

  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.cropper = function jQueryCropper(option) {
    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    var result = void 0;

    this.each(function (i, element) {
      var $element = jquery__WEBPACK_IMPORTED_MODULE_0___default()(element);
      var isDestroy = option === 'destroy';
      var cropper = $element.data(NAMESPACE$1);

      if (!cropper) {
        if (isDestroy) {
          return;
        }

        var options = jquery__WEBPACK_IMPORTED_MODULE_0___default.a.extend({}, $element.data(), jquery__WEBPACK_IMPORTED_MODULE_0___default.a.isPlainObject(option) && option);

        cropper = new Cropper(element, options);
        $element.data(NAMESPACE$1, cropper);
      }

      if (typeof option === 'string') {
        var fn = cropper[option];

        if (jquery__WEBPACK_IMPORTED_MODULE_0___default.a.isFunction(fn)) {
          result = fn.apply(cropper, args);

          if (result === cropper) {
            result = undefined;
          }

          if (isDestroy) {
            $element.removeData(NAMESPACE$1);
          }
        }
      }
    });

    return result !== undefined ? result : this;
  };

  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.cropper.Constructor = Cropper;
  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.cropper.setDefaults = Cropper.setDefaults;
  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.cropper.noConflict = function noConflict() {
    jquery__WEBPACK_IMPORTED_MODULE_0___default.a.fn.cropper = AnotherCropper$1;
    return this;
  };
}


/***/ }),

/***/ "./node_modules/jquery/dist/jquery.js":
/*!********************************************!*\
  !*** ./node_modules/jquery/dist/jquery.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
( function( global, factory ) {

	"use strict";

	if ( typeof module === "object" && typeof module.exports === "object" ) {

		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
} )( typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
// enough that all such attempts are guarded in a try block.
"use strict";

var arr = [];

var document = window.document;

var getProto = Object.getPrototypeOf;

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var fnToString = hasOwn.toString;

var ObjectFunctionString = fnToString.call( Object );

var support = {};

var isFunction = function isFunction( obj ) {

      // Support: Chrome <=57, Firefox <=52
      // In some browsers, typeof returns "function" for HTML <object> elements
      // (i.e., `typeof document.createElement( "object" ) === "function"`).
      // We don't want to classify *any* DOM node as a function.
      return typeof obj === "function" && typeof obj.nodeType !== "number";
  };


var isWindow = function isWindow( obj ) {
		return obj != null && obj === obj.window;
	};




	var preservedScriptAttributes = {
		type: true,
		src: true,
		noModule: true
	};

	function DOMEval( code, doc, node ) {
		doc = doc || document;

		var i,
			script = doc.createElement( "script" );

		script.text = code;
		if ( node ) {
			for ( i in preservedScriptAttributes ) {
				if ( node[ i ] ) {
					script[ i ] = node[ i ];
				}
			}
		}
		doc.head.appendChild( script ).parentNode.removeChild( script );
	}


function toType( obj ) {
	if ( obj == null ) {
		return obj + "";
	}

	// Support: Android <=2.3 only (functionish RegExp)
	return typeof obj === "object" || typeof obj === "function" ?
		class2type[ toString.call( obj ) ] || "object" :
		typeof obj;
}
/* global Symbol */
// Defining this global in .eslintrc.json would create a danger of using the global
// unguarded in another place, it seems safer to define global only for this module



var
	version = "3.3.1",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android <=4.0 only
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {

		// Return all the elements in a clean array
		if ( num == null ) {
			return slice.call( this );
		}

		// Return just the one element from the set
		return num < 0 ? this[ num + this.length ] : this[ num ];
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction( target ) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = Array.isArray( copy ) ) ) ) {

					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && Array.isArray( src ) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject( src ) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isPlainObject: function( obj ) {
		var proto, Ctor;

		// Detect obvious negatives
		// Use toString instead of jQuery.type to catch host objects
		if ( !obj || toString.call( obj ) !== "[object Object]" ) {
			return false;
		}

		proto = getProto( obj );

		// Objects with no prototype (e.g., `Object.create( null )`) are plain
		if ( !proto ) {
			return true;
		}

		// Objects with prototype are plain iff they were constructed by a global Object function
		Ctor = hasOwn.call( proto, "constructor" ) && proto.constructor;
		return typeof Ctor === "function" && fnToString.call( Ctor ) === ObjectFunctionString;
	},

	isEmptyObject: function( obj ) {

		/* eslint-disable no-unused-vars */
		// See https://github.com/eslint/eslint/issues/6125
		var name;

		for ( name in obj ) {
			return false;
		}
		return true;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		DOMEval( code );
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// Support: Android <=4.0 only
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	// Support: Android <=4.0 only, PhantomJS 1 only
	// push.apply(_, arraylike) throws on ancient WebKit
	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];
}

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
function( i, name ) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
} );

function isArrayLike( obj ) {

	// Support: real iOS 8.2 only (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = toType( obj );

	if ( isFunction( obj ) || isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// https://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,

	// CSS escapes
	// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// CSS string/identifier serialization
	// https://drafts.csswg.org/cssom/#common-serializing-idioms
	rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
	fcssescape = function( ch, asCodePoint ) {
		if ( asCodePoint ) {

			// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
			if ( ch === "\0" ) {
				return "\uFFFD";
			}

			// Control characters and (dependent upon position) numbers get escaped as code points
			return ch.slice( 0, -1 ) + "\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + " ";
		}

		// Other potentially-special ASCII characters get backslash-escaped
		return "\\" + ch;
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	},

	disabledAncestor = addCombinator(
		function( elem ) {
			return elem.disabled === true && ("form" in elem || "label" in elem);
		},
		{ dir: "parentNode", next: "legend" }
	);

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {

		if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
			setDocument( context );
		}
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {

				// ID selector
				if ( (m = match[1]) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( (elem = context.getElementById( m )) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && (elem = newContext.getElementById( m )) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[2] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( (m = match[3]) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!compilerCache[ selector + " " ] &&
				(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {

				if ( nodeType !== 1 ) {
					newContext = context;
					newSelector = selector;

				// qSA looks outside Element context, which is not what we want
				// Thanks to Andrew Dupont for this workaround technique
				// Support: IE <=8
				// Exclude object elements
				} else if ( context.nodeName.toLowerCase() !== "object" ) {

					// Capture the context ID, setting it first if necessary
					if ( (nid = context.getAttribute( "id" )) ) {
						nid = nid.replace( rcssescape, fcssescape );
					} else {
						context.setAttribute( "id", (nid = expando) );
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					while ( i-- ) {
						groups[i] = "#" + nid + " " + toSelector( groups[i] );
					}
					newSelector = groups.join( "," );

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;
				}

				if ( newSelector ) {
					try {
						push.apply( results,
							newContext.querySelectorAll( newSelector )
						);
						return results;
					} catch ( qsaError ) {
					} finally {
						if ( nid === expando ) {
							context.removeAttribute( "id" );
						}
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created element and returns a boolean result
 */
function assert( fn ) {
	var el = document.createElement("fieldset");

	try {
		return !!fn( el );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( el.parentNode ) {
			el.parentNode.removeChild( el );
		}
		// release memory in IE
		el = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			a.sourceIndex - b.sourceIndex;

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for :enabled/:disabled
 * @param {Boolean} disabled true for :disabled; false for :enabled
 */
function createDisabledPseudo( disabled ) {

	// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
	return function( elem ) {

		// Only certain elements can match :enabled or :disabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
		if ( "form" in elem ) {

			// Check for inherited disabledness on relevant non-disabled elements:
			// * listed form-associated elements in a disabled fieldset
			//   https://html.spec.whatwg.org/multipage/forms.html#category-listed
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
			// * option elements in a disabled optgroup
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
			// All such elements have a "form" property.
			if ( elem.parentNode && elem.disabled === false ) {

				// Option elements defer to a parent optgroup if present
				if ( "label" in elem ) {
					if ( "label" in elem.parentNode ) {
						return elem.parentNode.disabled === disabled;
					} else {
						return elem.disabled === disabled;
					}
				}

				// Support: IE 6 - 11
				// Use the isDisabled shortcut property to check for disabled fieldset ancestors
				return elem.isDisabled === disabled ||

					// Where there is no isDisabled, check manually
					/* jshint -W018 */
					elem.isDisabled !== !disabled &&
						disabledAncestor( elem ) === disabled;
			}

			return elem.disabled === disabled;

		// Try to winnow out elements that can't be disabled before trusting the disabled property.
		// Some victims get caught in our net (label, legend, menu, track), but it shouldn't
		// even exist on them, let alone have a boolean value.
		} else if ( "label" in elem ) {
			return elem.disabled === disabled;
		}

		// Remaining elements are neither :enabled nor :disabled
		return false;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, subWindow,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9-11, Edge
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	if ( preferredDoc !== document &&
		(subWindow = document.defaultView) && subWindow.top !== subWindow ) {

		// Support: IE 11, Edge
		if ( subWindow.addEventListener ) {
			subWindow.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( subWindow.attachEvent ) {
			subWindow.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( el ) {
		el.className = "i";
		return !el.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( el ) {
		el.appendChild( document.createComment("") );
		return !el.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programmatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( el ) {
		docElem.appendChild( el ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	});

	// ID filter and find
	if ( support.getById ) {
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var elem = context.getElementById( id );
				return elem ? [ elem ] : [];
			}
		};
	} else {
		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};

		// Support: IE 6 - 7 only
		// getElementById is not reliable as a find shortcut
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var node, i, elems,
					elem = context.getElementById( id );

				if ( elem ) {

					// Verify the id attribute
					node = elem.getAttributeNode("id");
					if ( node && node.value === id ) {
						return [ elem ];
					}

					// Fall back on getElementsByName
					elems = context.getElementsByName( id );
					i = 0;
					while ( (elem = elems[i++]) ) {
						node = elem.getAttributeNode("id");
						if ( node && node.value === id ) {
							return [ elem ];
						}
					}
				}

				return [];
			}
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See https://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( document.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( el ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// https://bugs.jquery.com/ticket/12359
			docElem.appendChild( el ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( el.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !el.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !el.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !el.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibling-combinator selector` fails
			if ( !el.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( el ) {
			el.innerHTML = "<a href='' disabled='disabled'></a>" +
				"<select disabled='disabled'><option/></select>";

			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement("input");
			input.setAttribute( "type", "hidden" );
			el.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( el.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( el.querySelectorAll(":enabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: IE9-11+
			// IE's :disabled selector does not pick up the children of disabled fieldsets
			docElem.appendChild( el ).disabled = true;
			if ( el.querySelectorAll(":disabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			el.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( el ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( el, "*" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( el, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === document ? -1 :
				b === document ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		!compilerCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.escape = function( sel ) {
	return (sel + "").replace( rcssescape, fcssescape );
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || (node[ expando ] = {});

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								(outerCache[ node.uniqueID ] = {});

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {
							// Use previously-cached element index if available
							if ( useCache ) {
								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || (node[ expando ] = {});

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									(outerCache[ node.uniqueID ] = {});

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {
								// Use the same loop as above to seek `elem` from the start
								while ( (node = ++nodeIndex && node && node[ dir ] ||
									(diff = nodeIndex = 0) || start.pop()) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] || (node[ expando ] = {});

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												(outerCache[ node.uniqueID ] = {});

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": createDisabledPseudo( false ),
		"disabled": createDisabledPseudo( true ),

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		skip = combinator.next,
		key = skip || dir,
		checkNonElements = base && key === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
			return false;
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});

						if ( skip && skip === elem.nodeName.toLowerCase() ) {
							elem = elem[ dir ] || elem;
						} else if ( (oldCache = uniqueCache[ key ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ key ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
			return false;
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context === document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					if ( !context && elem.ownerDocument !== document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context || document, xml) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				context.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( el ) {
	// Should return 1, but returns 4 (following)
	return el.compareDocumentPosition( document.createElement("fieldset") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( el ) {
	el.innerHTML = "<a href='#'></a>";
	return el.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( el ) {
	el.innerHTML = "<input/>";
	el.firstChild.setAttribute( "value", "" );
	return el.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( el ) {
	return el.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;

// Deprecated
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;
jQuery.escapeSelector = Sizzle.escape;




var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;



function nodeName( elem, name ) {

  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();

};
var rsingleTag = ( /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i );



// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			return !!qualifier.call( elem, i, elem ) !== not;
		} );
	}

	// Single element
	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );
	}

	// Arraylike of elements (jQuery, arguments, Array)
	if ( typeof qualifier !== "string" ) {
		return jQuery.grep( elements, function( elem ) {
			return ( indexOf.call( qualifier, elem ) > -1 ) !== not;
		} );
	}

	// Filtered directly for both simple and complex selectors
	return jQuery.filter( qualifier, elements, not );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	if ( elems.length === 1 && elem.nodeType === 1 ) {
		return jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];
	}

	return jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
		return elem.nodeType === 1;
	} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i, ret,
			len = this.length,
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		ret = this.pushStack( [] );

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		return len > 1 ? jQuery.uniqueSort( ret ) : ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	// Shortcut simple #id case for speed
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Method init() accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[ 0 ] === "<" &&
				selector[ selector.length - 1 ] === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					if ( elem ) {

						// Inject the element directly into the jQuery object
						this[ 0 ] = elem;
						this.length = 1;
					}
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( isFunction( selector ) ) {
			return root.ready !== undefined ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter( function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			targets = typeof selectors !== "string" && jQuery( selectors );

		// Positional selectors never match, since there's no _selection_ context
		if ( !rneedsContext.test( selectors ) ) {
			for ( ; i < l; i++ ) {
				for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

					// Always skip document fragments
					if ( cur.nodeType < 11 && ( targets ?
						targets.index( cur ) > -1 :

						// Don't pass non-elements to Sizzle
						cur.nodeType === 1 &&
							jQuery.find.matchesSelector( cur, selectors ) ) ) {

						matched.push( cur );
						break;
					}
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	while ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
        if ( nodeName( elem, "iframe" ) ) {
            return elem.contentDocument;
        }

        // Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
        // Treat the template element as a regular one in browsers that
        // don't support it.
        if ( nodeName( elem, "template" ) ) {
            elem = elem.content || elem;
        }

        return jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.uniqueSort( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
} );
var rnothtmlwhite = ( /[^\x20\t\r\n\f]+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = locked || options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && toType( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = queue = [];
				if ( !memory && !firing ) {
					list = memory = "";
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


function Identity( v ) {
	return v;
}
function Thrower( ex ) {
	throw ex;
}

function adoptValue( value, resolve, reject, noValue ) {
	var method;

	try {

		// Check for promise aspect first to privilege synchronous behavior
		if ( value && isFunction( ( method = value.promise ) ) ) {
			method.call( value ).done( resolve ).fail( reject );

		// Other thenables
		} else if ( value && isFunction( ( method = value.then ) ) ) {
			method.call( value, resolve, reject );

		// Other non-thenables
		} else {

			// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
			// * false: [ value ].slice( 0 ) => resolve( value )
			// * true: [ value ].slice( 1 ) => resolve()
			resolve.apply( undefined, [ value ].slice( noValue ) );
		}

	// For Promises/A+, convert exceptions into rejections
	// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
	// Deferred#then to conditionally suppress rejection.
	} catch ( value ) {

		// Support: Android 4.0 only
		// Strict mode functions invoked without .call/.apply get global-object context
		reject.apply( undefined, [ value ] );
	}
}

jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, callbacks,
				// ... .then handlers, argument index, [final state]
				[ "notify", "progress", jQuery.Callbacks( "memory" ),
					jQuery.Callbacks( "memory" ), 2 ],
				[ "resolve", "done", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 0, "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 1, "rejected" ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				"catch": function( fn ) {
					return promise.then( null, fn );
				},

				// Keep pipe for back-compat
				pipe: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;

					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {

							// Map tuples (progress, done, fail) to arguments (done, fail, progress)
							var fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];

							// deferred.progress(function() { bind to newDefer or newDefer.notify })
							// deferred.done(function() { bind to newDefer or newDefer.resolve })
							// deferred.fail(function() { bind to newDefer or newDefer.reject })
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},
				then: function( onFulfilled, onRejected, onProgress ) {
					var maxDepth = 0;
					function resolve( depth, deferred, handler, special ) {
						return function() {
							var that = this,
								args = arguments,
								mightThrow = function() {
									var returned, then;

									// Support: Promises/A+ section 2.3.3.3.3
									// https://promisesaplus.com/#point-59
									// Ignore double-resolution attempts
									if ( depth < maxDepth ) {
										return;
									}

									returned = handler.apply( that, args );

									// Support: Promises/A+ section 2.3.1
									// https://promisesaplus.com/#point-48
									if ( returned === deferred.promise() ) {
										throw new TypeError( "Thenable self-resolution" );
									}

									// Support: Promises/A+ sections 2.3.3.1, 3.5
									// https://promisesaplus.com/#point-54
									// https://promisesaplus.com/#point-75
									// Retrieve `then` only once
									then = returned &&

										// Support: Promises/A+ section 2.3.4
										// https://promisesaplus.com/#point-64
										// Only check objects and functions for thenability
										( typeof returned === "object" ||
											typeof returned === "function" ) &&
										returned.then;

									// Handle a returned thenable
									if ( isFunction( then ) ) {

										// Special processors (notify) just wait for resolution
										if ( special ) {
											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special )
											);

										// Normal processors (resolve) also hook into progress
										} else {

											// ...and disregard older resolution values
											maxDepth++;

											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special ),
												resolve( maxDepth, deferred, Identity,
													deferred.notifyWith )
											);
										}

									// Handle all other returned values
									} else {

										// Only substitute handlers pass on context
										// and multiple values (non-spec behavior)
										if ( handler !== Identity ) {
											that = undefined;
											args = [ returned ];
										}

										// Process the value(s)
										// Default process is resolve
										( special || deferred.resolveWith )( that, args );
									}
								},

								// Only normal processors (resolve) catch and reject exceptions
								process = special ?
									mightThrow :
									function() {
										try {
											mightThrow();
										} catch ( e ) {

											if ( jQuery.Deferred.exceptionHook ) {
												jQuery.Deferred.exceptionHook( e,
													process.stackTrace );
											}

											// Support: Promises/A+ section 2.3.3.3.4.1
											// https://promisesaplus.com/#point-61
											// Ignore post-resolution exceptions
											if ( depth + 1 >= maxDepth ) {

												// Only substitute handlers pass on context
												// and multiple values (non-spec behavior)
												if ( handler !== Thrower ) {
													that = undefined;
													args = [ e ];
												}

												deferred.rejectWith( that, args );
											}
										}
									};

							// Support: Promises/A+ section 2.3.3.3.1
							// https://promisesaplus.com/#point-57
							// Re-resolve promises immediately to dodge false rejection from
							// subsequent errors
							if ( depth ) {
								process();
							} else {

								// Call an optional hook to record the stack, in case of exception
								// since it's otherwise lost when execution goes async
								if ( jQuery.Deferred.getStackHook ) {
									process.stackTrace = jQuery.Deferred.getStackHook();
								}
								window.setTimeout( process );
							}
						};
					}

					return jQuery.Deferred( function( newDefer ) {

						// progress_handlers.add( ... )
						tuples[ 0 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onProgress ) ?
									onProgress :
									Identity,
								newDefer.notifyWith
							)
						);

						// fulfilled_handlers.add( ... )
						tuples[ 1 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onFulfilled ) ?
									onFulfilled :
									Identity
							)
						);

						// rejected_handlers.add( ... )
						tuples[ 2 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onRejected ) ?
									onRejected :
									Thrower
							)
						);
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 5 ];

			// promise.progress = list.add
			// promise.done = list.add
			// promise.fail = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(
					function() {

						// state = "resolved" (i.e., fulfilled)
						// state = "rejected"
						state = stateString;
					},

					// rejected_callbacks.disable
					// fulfilled_callbacks.disable
					tuples[ 3 - i ][ 2 ].disable,

					// rejected_handlers.disable
					// fulfilled_handlers.disable
					tuples[ 3 - i ][ 3 ].disable,

					// progress_callbacks.lock
					tuples[ 0 ][ 2 ].lock,

					// progress_handlers.lock
					tuples[ 0 ][ 3 ].lock
				);
			}

			// progress_handlers.fire
			// fulfilled_handlers.fire
			// rejected_handlers.fire
			list.add( tuple[ 3 ].fire );

			// deferred.notify = function() { deferred.notifyWith(...) }
			// deferred.resolve = function() { deferred.resolveWith(...) }
			// deferred.reject = function() { deferred.rejectWith(...) }
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? undefined : this, arguments );
				return this;
			};

			// deferred.notifyWith = list.fireWith
			// deferred.resolveWith = list.fireWith
			// deferred.rejectWith = list.fireWith
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( singleValue ) {
		var

			// count of uncompleted subordinates
			remaining = arguments.length,

			// count of unprocessed arguments
			i = remaining,

			// subordinate fulfillment data
			resolveContexts = Array( i ),
			resolveValues = slice.call( arguments ),

			// the master Deferred
			master = jQuery.Deferred(),

			// subordinate callback factory
			updateFunc = function( i ) {
				return function( value ) {
					resolveContexts[ i ] = this;
					resolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( !( --remaining ) ) {
						master.resolveWith( resolveContexts, resolveValues );
					}
				};
			};

		// Single- and empty arguments are adopted like Promise.resolve
		if ( remaining <= 1 ) {
			adoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,
				!remaining );

			// Use .then() to unwrap secondary thenables (cf. gh-3000)
			if ( master.state() === "pending" ||
				isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {

				return master.then();
			}
		}

		// Multiple arguments are aggregated like Promise.all array elements
		while ( i-- ) {
			adoptValue( resolveValues[ i ], updateFunc( i ), master.reject );
		}

		return master.promise();
	}
} );


// These usually indicate a programmer mistake during development,
// warn about them ASAP rather than swallowing them by default.
var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;

jQuery.Deferred.exceptionHook = function( error, stack ) {

	// Support: IE 8 - 9 only
	// Console exists when dev tools are open, which can happen at any time
	if ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {
		window.console.warn( "jQuery.Deferred exception: " + error.message, error.stack, stack );
	}
};




jQuery.readyException = function( error ) {
	window.setTimeout( function() {
		throw error;
	} );
};




// The deferred used on DOM ready
var readyList = jQuery.Deferred();

jQuery.fn.ready = function( fn ) {

	readyList
		.then( fn )

		// Wrap jQuery.readyException in a function so that the lookup
		// happens at the time of error handling instead of callback
		// registration.
		.catch( function( error ) {
			jQuery.readyException( error );
		} );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );
	}
} );

jQuery.ready.then = readyList.then;

// The ready event handler and self cleanup method
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed );
	window.removeEventListener( "load", completed );
	jQuery.ready();
}

// Catch cases where $(document).ready() is called
// after the browser event has already occurred.
// Support: IE <=9 - 10 only
// Older IE sometimes signals "interactive" too soon
if ( document.readyState === "complete" ||
	( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

	// Handle it asynchronously to allow scripts the opportunity to delay ready
	window.setTimeout( jQuery.ready );

} else {

	// Use the handy event callback
	document.addEventListener( "DOMContentLoaded", completed );

	// A fallback to window.onload, that will always work
	window.addEventListener( "load", completed );
}




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( toType( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn(
					elems[ i ], key, raw ?
					value :
					value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	if ( chainable ) {
		return elems;
	}

	// Gets
	if ( bulk ) {
		return fn.call( elems );
	}

	return len ? fn( elems[ 0 ], key ) : emptyGet;
};


// Matches dashed string for camelizing
var rmsPrefix = /^-ms-/,
	rdashAlpha = /-([a-z])/g;

// Used by camelCase as callback to replace()
function fcamelCase( all, letter ) {
	return letter.toUpperCase();
}

// Convert dashed to camelCase; used by the css and data modules
// Support: IE <=9 - 11, Edge 12 - 15
// Microsoft forgot to hump their vendor prefix (#9572)
function camelCase( string ) {
	return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
}
var acceptData = function( owner ) {

	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};




function Data() {
	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;

Data.prototype = {

	cache: function( owner ) {

		// Check if the owner object already has a cache
		var value = owner[ this.expando ];

		// If not, create one
		if ( !value ) {
			value = {};

			// We can accept data for non-element nodes in modern browsers,
			// but we should not, see #8335.
			// Always return an empty object.
			if ( acceptData( owner ) ) {

				// If it is a node unlikely to be stringify-ed or looped over
				// use plain assignment
				if ( owner.nodeType ) {
					owner[ this.expando ] = value;

				// Otherwise secure it in a non-enumerable property
				// configurable must be true to allow the property to be
				// deleted when data is removed
				} else {
					Object.defineProperty( owner, this.expando, {
						value: value,
						configurable: true
					} );
				}
			}
		}

		return value;
	},
	set: function( owner, data, value ) {
		var prop,
			cache = this.cache( owner );

		// Handle: [ owner, key, value ] args
		// Always use camelCase key (gh-2257)
		if ( typeof data === "string" ) {
			cache[ camelCase( data ) ] = value;

		// Handle: [ owner, { properties } ] args
		} else {

			// Copy the properties one-by-one to the cache object
			for ( prop in data ) {
				cache[ camelCase( prop ) ] = data[ prop ];
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		return key === undefined ?
			this.cache( owner ) :

			// Always use camelCase key (gh-2257)
			owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];
	},
	access: function( owner, key, value ) {

		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				( ( key && typeof key === "string" ) && value === undefined ) ) {

			return this.get( owner, key );
		}

		// When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i,
			cache = owner[ this.expando ];

		if ( cache === undefined ) {
			return;
		}

		if ( key !== undefined ) {

			// Support array or space separated string of keys
			if ( Array.isArray( key ) ) {

				// If key is an array of keys...
				// We always set camelCase keys, so remove that.
				key = key.map( camelCase );
			} else {
				key = camelCase( key );

				// If a key with the spaces exists, use it.
				// Otherwise, create an array by matching non-whitespace
				key = key in cache ?
					[ key ] :
					( key.match( rnothtmlwhite ) || [] );
			}

			i = key.length;

			while ( i-- ) {
				delete cache[ key[ i ] ];
			}
		}

		// Remove the expando if there's no more data
		if ( key === undefined || jQuery.isEmptyObject( cache ) ) {

			// Support: Chrome <=35 - 45
			// Webkit & Blink performance suffers when deleting properties
			// from DOM nodes, so set to undefined instead
			// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
			if ( owner.nodeType ) {
				owner[ this.expando ] = undefined;
			} else {
				delete owner[ this.expando ];
			}
		}
	},
	hasData: function( owner ) {
		var cache = owner[ this.expando ];
		return cache !== undefined && !jQuery.isEmptyObject( cache );
	}
};
var dataPriv = new Data();

var dataUser = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /[A-Z]/g;

function getData( data ) {
	if ( data === "true" ) {
		return true;
	}

	if ( data === "false" ) {
		return false;
	}

	if ( data === "null" ) {
		return null;
	}

	// Only convert to a number if it doesn't change the string
	if ( data === +data + "" ) {
		return +data;
	}

	if ( rbrace.test( data ) ) {
		return JSON.parse( data );
	}

	return data;
}

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$&" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = getData( data );
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			dataUser.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend( {
	hasData: function( elem ) {
		return dataUser.hasData( elem ) || dataPriv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return dataUser.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		dataUser.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to dataPriv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return dataPriv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		dataPriv.remove( elem, name );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = dataUser.get( elem );

				if ( elem.nodeType === 1 && !dataPriv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE 11 only
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					dataPriv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				dataUser.set( this, key );
			} );
		}

		return access( this, function( value ) {
			var data;

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {

				// Attempt to get data from the cache
				// The key will always be camelCased in Data
				data = dataUser.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each( function() {

				// We always store the camelCased key
				dataUser.set( this, key, value );
			} );
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each( function() {
			dataUser.remove( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = dataPriv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || Array.isArray( data ) ) {
					queue = dataPriv.access( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return dataPriv.get( elem, key ) || dataPriv.access( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				dataPriv.remove( elem, [ type + "queue", key ] );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = dataPriv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHiddenWithinTree = function( elem, el ) {

		// isHiddenWithinTree might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;

		// Inline style trumps all
		return elem.style.display === "none" ||
			elem.style.display === "" &&

			// Otherwise, check computed style
			// Support: Firefox <=43 - 45
			// Disconnected elements can have computed display: none, so first confirm that elem is
			// in the document.
			jQuery.contains( elem.ownerDocument, elem ) &&

			jQuery.css( elem, "display" ) === "none";
	};

var swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};




function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted, scale,
		maxIterations = 20,
		currentValue = tween ?
			function() {
				return tween.cur();
			} :
			function() {
				return jQuery.css( elem, prop, "" );
			},
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = ( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Support: Firefox <=54
		// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
		initial = initial / 2;

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		while ( maxIterations-- ) {

			// Evaluate and update our best guess (doubling guesses that zero out).
			// Finish if the scale equals or crosses 1 (making the old*new product non-positive).
			jQuery.style( elem, prop, initialInUnit + unit );
			if ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {
				maxIterations = 0;
			}
			initialInUnit = initialInUnit / scale;

		}

		initialInUnit = initialInUnit * 2;
		jQuery.style( elem, prop, initialInUnit + unit );

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


var defaultDisplayMap = {};

function getDefaultDisplay( elem ) {
	var temp,
		doc = elem.ownerDocument,
		nodeName = elem.nodeName,
		display = defaultDisplayMap[ nodeName ];

	if ( display ) {
		return display;
	}

	temp = doc.body.appendChild( doc.createElement( nodeName ) );
	display = jQuery.css( temp, "display" );

	temp.parentNode.removeChild( temp );

	if ( display === "none" ) {
		display = "block";
	}
	defaultDisplayMap[ nodeName ] = display;

	return display;
}

function showHide( elements, show ) {
	var display, elem,
		values = [],
		index = 0,
		length = elements.length;

	// Determine new display value for elements that need to change
	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		display = elem.style.display;
		if ( show ) {

			// Since we force visibility upon cascade-hidden elements, an immediate (and slow)
			// check is required in this first loop unless we have a nonempty display value (either
			// inline or about-to-be-restored)
			if ( display === "none" ) {
				values[ index ] = dataPriv.get( elem, "display" ) || null;
				if ( !values[ index ] ) {
					elem.style.display = "";
				}
			}
			if ( elem.style.display === "" && isHiddenWithinTree( elem ) ) {
				values[ index ] = getDefaultDisplay( elem );
			}
		} else {
			if ( display !== "none" ) {
				values[ index ] = "none";

				// Remember what we're overwriting
				dataPriv.set( elem, "display", display );
			}
		}
	}

	// Set the display of the elements in a second loop to avoid constant reflow
	for ( index = 0; index < length; index++ ) {
		if ( values[ index ] != null ) {
			elements[ index ].style.display = values[ index ];
		}
	}

	return elements;
}

jQuery.fn.extend( {
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHiddenWithinTree( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([a-z][^\/\0>\x20\t\r\n\f]+)/i );

var rscriptType = ( /^$|^module$|\/(?:java|ecma)script/i );



// We have to close these tags to support XHTML (#13200)
var wrapMap = {

	// Support: IE <=9 only
	option: [ 1, "<select multiple='multiple'>", "</select>" ],

	// XHTML parsers do not magically insert elements in the
	// same way that tag soup parsers do. So we cannot shorten
	// this by omitting <tbody> or other required elements.
	thead: [ 1, "<table>", "</table>" ],
	col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	_default: [ 0, "", "" ]
};

// Support: IE <=9 only
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;


function getAll( context, tag ) {

	// Support: IE <=9 - 11 only
	// Use typeof to avoid zero-argument method invocation on host objects (#15151)
	var ret;

	if ( typeof context.getElementsByTagName !== "undefined" ) {
		ret = context.getElementsByTagName( tag || "*" );

	} else if ( typeof context.querySelectorAll !== "undefined" ) {
		ret = context.querySelectorAll( tag || "*" );

	} else {
		ret = [];
	}

	if ( tag === undefined || tag && nodeName( context, tag ) ) {
		return jQuery.merge( [ context ], ret );
	}

	return ret;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		dataPriv.set(
			elems[ i ],
			"globalEval",
			!refElements || dataPriv.get( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/;

function buildFragment( elems, context, scripts, selection, ignored ) {
	var elem, tmp, tag, wrap, contains, j,
		fragment = context.createDocumentFragment(),
		nodes = [],
		i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( toType( elem ) === "object" ) {

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || fragment.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;
				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, tmp.childNodes );

				// Remember the top-level container
				tmp = fragment.firstChild;

				// Ensure the created nodes are orphaned (#12392)
				tmp.textContent = "";
			}
		}
	}

	// Remove wrapper from fragment
	fragment.textContent = "";

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}
			continue;
		}

		contains = jQuery.contains( elem.ownerDocument, elem );

		// Append to fragment
		tmp = getAll( fragment.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( contains ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	return fragment;
}


( function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Android 4.0 - 4.3 only
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Android <=4.1 only
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE <=11 only
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
} )();
var documentElement = document.documentElement;



var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE <=9 only
// See #13393 for more info
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Ensure that invalid selectors throw exceptions at attach time
		// Evaluate against documentElement in case elem is a non-element node (e.g., document)
		if ( selector ) {
			jQuery.find.matchesSelector( documentElement, selector );
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = {};
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.hasData( elem ) && dataPriv.get( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove data and the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			dataPriv.remove( elem, "handle events" );
		}
	},

	dispatch: function( nativeEvent ) {

		// Make a writable jQuery.Event from the native event object
		var event = jQuery.event.fix( nativeEvent );

		var i, j, ret, matched, handleObj, handlerQueue,
			args = new Array( arguments.length ),
			handlers = ( dataPriv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;

		for ( i = 1; i < arguments.length; i++ ) {
			args[ i ] = arguments[ i ];
		}

		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, handleObj, sel, matchedHandlers, matchedSelectors,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		if ( delegateCount &&

			// Support: IE <=9
			// Black-hole SVG <use> instance trees (trac-13180)
			cur.nodeType &&

			// Support: Firefox <=42
			// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
			// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
			// Support: IE 11 only
			// ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
			!( event.type === "click" && event.button >= 1 ) ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && !( event.type === "click" && cur.disabled === true ) ) {
					matchedHandlers = [];
					matchedSelectors = {};
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matchedSelectors[ sel ] === undefined ) {
							matchedSelectors[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matchedSelectors[ sel ] ) {
							matchedHandlers.push( handleObj );
						}
					}
					if ( matchedHandlers.length ) {
						handlerQueue.push( { elem: cur, handlers: matchedHandlers } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		cur = this;
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	addProp: function( name, hook ) {
		Object.defineProperty( jQuery.Event.prototype, name, {
			enumerable: true,
			configurable: true,

			get: isFunction( hook ) ?
				function() {
					if ( this.originalEvent ) {
							return hook( this.originalEvent );
					}
				} :
				function() {
					if ( this.originalEvent ) {
							return this.originalEvent[ name ];
					}
				},

			set: function( value ) {
				Object.defineProperty( this, name, {
					enumerable: true,
					configurable: true,
					writable: true,
					value: value
				} );
			}
		} );
	},

	fix: function( originalEvent ) {
		return originalEvent[ jQuery.expando ] ?
			originalEvent :
			new jQuery.Event( originalEvent );
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {

			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {

			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {

	// This "if" is needed for plain objects
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle );
	}
};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: Android <=2.3 only
				src.returnValue === false ?
			returnTrue :
			returnFalse;

		// Create target properties
		// Support: Safari <=6 - 7 only
		// Target should not be a text node (#504, #13143)
		this.target = ( src.target && src.target.nodeType === 3 ) ?
			src.target.parentNode :
			src.target;

		this.currentTarget = src.currentTarget;
		this.relatedTarget = src.relatedTarget;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || Date.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,
	isSimulated: false,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && !this.isSimulated ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Includes all common event props including KeyEvent and MouseEvent specific props
jQuery.each( {
	altKey: true,
	bubbles: true,
	cancelable: true,
	changedTouches: true,
	ctrlKey: true,
	detail: true,
	eventPhase: true,
	metaKey: true,
	pageX: true,
	pageY: true,
	shiftKey: true,
	view: true,
	"char": true,
	charCode: true,
	key: true,
	keyCode: true,
	button: true,
	buttons: true,
	clientX: true,
	clientY: true,
	offsetX: true,
	offsetY: true,
	pointerId: true,
	pointerType: true,
	screenX: true,
	screenY: true,
	targetTouches: true,
	toElement: true,
	touches: true,

	which: function( event ) {
		var button = event.button;

		// Add which for key events
		if ( event.which == null && rkeyEvent.test( event.type ) ) {
			return event.charCode != null ? event.charCode : event.keyCode;
		}

		// Add which for click: 1 === left; 2 === middle; 3 === right
		if ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {
			if ( button & 1 ) {
				return 1;
			}

			if ( button & 2 ) {
				return 3;
			}

			if ( button & 4 ) {
				return 2;
			}

			return 0;
		}

		return event.which;
	}
}, jQuery.event.addProp );

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://bugs.chromium.org/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	}
} );


var

	/* eslint-disable max-len */

	// See https://github.com/eslint/eslint/issues/3229
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,

	/* eslint-enable */

	// Support: IE <=10 - 11, Edge 12 - 13 only
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

// Prefer a tbody over its parent table for containing new rows
function manipulationTarget( elem, content ) {
	if ( nodeName( elem, "table" ) &&
		nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ) {

		return jQuery( elem ).children( "tbody" )[ 0 ] || elem;
	}

	return elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( elem.getAttribute( "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	if ( ( elem.type || "" ).slice( 0, 5 ) === "true/" ) {
		elem.type = elem.type.slice( 5 );
	} else {
		elem.removeAttribute( "type" );
	}

	return elem;
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( dataPriv.hasData( src ) ) {
		pdataOld = dataPriv.access( src );
		pdataCur = dataPriv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( dataUser.hasData( src ) ) {
		udataOld = dataUser.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		dataUser.set( dest, udataCur );
	}
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = concat.apply( [], args );

	var fragment, first, scripts, hasScripts, node, doc,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		valueIsFunction = isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( valueIsFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( valueIsFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android <=4.0 only, PhantomJS 1 only
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!dataPriv.access( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src && ( node.type || "" ).toLowerCase()  !== "module" ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl ) {
								jQuery._evalUrl( node.src );
							}
						} else {
							DOMEval( node.textContent.replace( rcleanScript, "" ), doc, node );
						}
					}
				}
			}
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		nodes = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = nodes[ i ] ) != null; i++ ) {
		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && jQuery.contains( node.ownerDocument, node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html.replace( rxhtmlTag, "<$1></$2>" );
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems ) {
		var data, elem, type,
			special = jQuery.event.special,
			i = 0;

		for ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {
			if ( acceptData( elem ) ) {
				if ( ( data = elem[ dataPriv.expando ] ) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataPriv.expando ] = undefined;
				}
				if ( elem[ dataUser.expando ] ) {

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataUser.expando ] = undefined;
				}
			}
		}
	}
} );

jQuery.fn.extend( {
	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each( function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				} );
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: Android <=4.0 only, PhantomJS 1 only
			// .get() because push.apply(_, arraylike) throws on ancient WebKit
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );
var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {

		// Support: IE <=11 only, Firefox <=30 (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

var rboxStyle = new RegExp( cssExpand.join( "|" ), "i" );



( function() {

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computeStyleTests() {

		// This is a singleton, we need to execute it only once
		if ( !div ) {
			return;
		}

		container.style.cssText = "position:absolute;left:-11111px;width:60px;" +
			"margin-top:1px;padding:0;border:0";
		div.style.cssText =
			"position:relative;display:block;box-sizing:border-box;overflow:scroll;" +
			"margin:auto;border:1px;padding:1px;" +
			"width:60%;top:1%";
		documentElement.appendChild( container ).appendChild( div );

		var divStyle = window.getComputedStyle( div );
		pixelPositionVal = divStyle.top !== "1%";

		// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
		reliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;

		// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
		// Some styles come back with percentage values, even though they shouldn't
		div.style.right = "60%";
		pixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;

		// Support: IE 9 - 11 only
		// Detect misreporting of content dimensions for box-sizing:border-box elements
		boxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;

		// Support: IE 9 only
		// Detect overflow:scroll screwiness (gh-3699)
		div.style.position = "absolute";
		scrollboxSizeVal = div.offsetWidth === 36 || "absolute";

		documentElement.removeChild( container );

		// Nullify the div so it wouldn't be stored in the memory and
		// it will also be a sign that checks already performed
		div = null;
	}

	function roundPixelMeasures( measure ) {
		return Math.round( parseFloat( measure ) );
	}

	var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,
		reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	// Support: IE <=9 - 11 only
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	jQuery.extend( support, {
		boxSizingReliable: function() {
			computeStyleTests();
			return boxSizingReliableVal;
		},
		pixelBoxStyles: function() {
			computeStyleTests();
			return pixelBoxStylesVal;
		},
		pixelPosition: function() {
			computeStyleTests();
			return pixelPositionVal;
		},
		reliableMarginLeft: function() {
			computeStyleTests();
			return reliableMarginLeftVal;
		},
		scrollboxSize: function() {
			computeStyleTests();
			return scrollboxSizeVal;
		}
	} );
} )();


function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,

		// Support: Firefox 51+
		// Retrieving style before computed somehow
		// fixes an issue with getting wrong values
		// on detached elements
		style = elem.style;

	computed = computed || getStyles( elem );

	// getPropertyValue is needed for:
	//   .css('filter') (IE 9 only, #12537)
	//   .css('--customProperty) (#3144)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// A tribute to the "awesome hack by Dean Edwards"
		// Android Browser returns percentage for some values,
		// but width seems to be reliably pixels.
		// This is against the CSSOM draft spec:
		// https://drafts.csswg.org/cssom/#resolved-values
		if ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?

		// Support: IE <=9 - 11 only
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var

	// Swappable if display is none or starts with table
	// except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rcustomProp = /^--/,
	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style;

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in emptyStyle ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[ 0 ].toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

// Return a property mapped along what jQuery.cssProps suggests or to
// a vendor prefixed property.
function finalPropName( name ) {
	var ret = jQuery.cssProps[ name ];
	if ( !ret ) {
		ret = jQuery.cssProps[ name ] = vendorPropName( name ) || name;
	}
	return ret;
}

function setPositiveNumber( elem, value, subtract ) {

	// Any relative (+/-) values have already been
	// normalized at this point
	var matches = rcssNum.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || "px" ) :
		value;
}

function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {
	var i = dimension === "width" ? 1 : 0,
		extra = 0,
		delta = 0;

	// Adjustment may not be necessary
	if ( box === ( isBorderBox ? "border" : "content" ) ) {
		return 0;
	}

	for ( ; i < 4; i += 2 ) {

		// Both box models exclude margin
		if ( box === "margin" ) {
			delta += jQuery.css( elem, box + cssExpand[ i ], true, styles );
		}

		// If we get here with a content-box, we're seeking "padding" or "border" or "margin"
		if ( !isBorderBox ) {

			// Add padding
			delta += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// For "border" or "margin", add border
			if ( box !== "padding" ) {
				delta += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );

			// But still keep track of it otherwise
			} else {
				extra += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}

		// If we get here with a border-box (content + padding + border), we're seeking "content" or
		// "padding" or "margin"
		} else {

			// For "content", subtract padding
			if ( box === "content" ) {
				delta -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// For "content" or "padding", subtract border
			if ( box !== "margin" ) {
				delta -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	// Account for positive content-box scroll gutter when requested by providing computedVal
	if ( !isBorderBox && computedVal >= 0 ) {

		// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
		// Assuming integer scroll gutter, subtract the rest and round down
		delta += Math.max( 0, Math.ceil(
			elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
			computedVal -
			delta -
			extra -
			0.5
		) );
	}

	return delta;
}

function getWidthOrHeight( elem, dimension, extra ) {

	// Start with computed style
	var styles = getStyles( elem ),
		val = curCSS( elem, dimension, styles ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
		valueIsBorderBox = isBorderBox;

	// Support: Firefox <=54
	// Return a confounding non-pixel value or feign ignorance, as appropriate.
	if ( rnumnonpx.test( val ) ) {
		if ( !extra ) {
			return val;
		}
		val = "auto";
	}

	// Check for style in case a browser which returns unreliable values
	// for getComputedStyle silently falls back to the reliable elem.style
	valueIsBorderBox = valueIsBorderBox &&
		( support.boxSizingReliable() || val === elem.style[ dimension ] );

	// Fall back to offsetWidth/offsetHeight when value is "auto"
	// This happens for inline elements with no explicit setting (gh-3571)
	// Support: Android <=4.1 - 4.3 only
	// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
	if ( val === "auto" ||
		!parseFloat( val ) && jQuery.css( elem, "display", false, styles ) === "inline" ) {

		val = elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ];

		// offsetWidth/offsetHeight provide border-box values
		valueIsBorderBox = true;
	}

	// Normalize "" and auto
	val = parseFloat( val ) || 0;

	// Adjust for the element's box model
	return ( val +
		boxModelAdjustment(
			elem,
			dimension,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles,

			// Provide the current computed size to request scroll gutter calculation (gh-3589)
			val
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name ),
			style = elem.style;

		// Make sure that we're working with the right name. We don't
		// want to query the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			if ( type === "number" ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				if ( isCustomProp ) {
					style.setProperty( name, value );
				} else {
					style[ name ] = value;
				}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name );

		// Make sure that we're working with the right name. We don't
		// want to modify the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}

		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( i, dimension ) {
	jQuery.cssHooks[ dimension ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&

					// Support: Safari 8+
					// Table columns in Safari have non-zero offsetWidth & zero
					// getBoundingClientRect().width unless display is changed.
					// Support: IE <=11 only
					// Running getBoundingClientRect on a disconnected node
					// in IE throws an error.
					( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?
						swap( elem, cssShow, function() {
							return getWidthOrHeight( elem, dimension, extra );
						} ) :
						getWidthOrHeight( elem, dimension, extra );
			}
		},

		set: function( elem, value, extra ) {
			var matches,
				styles = getStyles( elem ),
				isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
				subtract = extra && boxModelAdjustment(
					elem,
					dimension,
					extra,
					isBorderBox,
					styles
				);

			// Account for unreliable border-box dimensions by comparing offset* to computed and
			// faking a content-box to get border and padding (gh-3699)
			if ( isBorderBox && support.scrollboxSize() === styles.position ) {
				subtract -= Math.ceil(
					elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
					parseFloat( styles[ dimension ] ) -
					boxModelAdjustment( elem, dimension, "border", false, styles ) -
					0.5
				);
			}

			// Convert to pixels if value adjustment is needed
			if ( subtract && ( matches = rcssNum.exec( value ) ) &&
				( matches[ 3 ] || "px" ) !== "px" ) {

				elem.style[ dimension ] = value;
				value = jQuery.css( elem, dimension );
			}

			return setPositiveNumber( elem, value, subtract );
		}
	};
} );

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return ( parseFloat( curCSS( elem, "marginLeft" ) ) ||
				elem.getBoundingClientRect().left -
					swap( elem, { marginLeft: 0 }, function() {
						return elem.getBoundingClientRect().left;
					} )
				) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( prefix !== "margin" ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( Array.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 &&
				( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||
					jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9 only
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, inProgress,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

function schedule() {
	if ( inProgress ) {
		if ( document.hidden === false && window.requestAnimationFrame ) {
			window.requestAnimationFrame( schedule );
		} else {
			window.setTimeout( schedule, jQuery.fx.interval );
		}

		jQuery.fx.tick();
	}
}

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = Date.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,
		isBox = "width" in props || "height" in props,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHiddenWithinTree( elem ),
		dataShow = dataPriv.get( elem, "fxshow" );

	// Queue-skipping animations hijack the fx hooks
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// Ensure the complete handler is called before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// Detect show/hide animations
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.test( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// Pretend to be hidden if this is a "show" and
				// there is still data from a stopped show/hide
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;

				// Ignore all other no-op show/hide data
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	// Bail out if this is a no-op like .hide().hide()
	propTween = !jQuery.isEmptyObject( props );
	if ( !propTween && jQuery.isEmptyObject( orig ) ) {
		return;
	}

	// Restrict "overflow" and "display" styles during box animations
	if ( isBox && elem.nodeType === 1 ) {

		// Support: IE <=9 - 11, Edge 12 - 15
		// Record all 3 overflow attributes because IE does not infer the shorthand
		// from identically-valued overflowX and overflowY and Edge just mirrors
		// the overflowX value there.
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Identify a display type, preferring old show/hide data over the CSS cascade
		restoreDisplay = dataShow && dataShow.display;
		if ( restoreDisplay == null ) {
			restoreDisplay = dataPriv.get( elem, "display" );
		}
		display = jQuery.css( elem, "display" );
		if ( display === "none" ) {
			if ( restoreDisplay ) {
				display = restoreDisplay;
			} else {

				// Get nonempty value(s) by temporarily forcing visibility
				showHide( [ elem ], true );
				restoreDisplay = elem.style.display || restoreDisplay;
				display = jQuery.css( elem, "display" );
				showHide( [ elem ] );
			}
		}

		// Animate inline elements as inline-block
		if ( display === "inline" || display === "inline-block" && restoreDisplay != null ) {
			if ( jQuery.css( elem, "float" ) === "none" ) {

				// Restore the original display value at the end of pure show/hide animations
				if ( !propTween ) {
					anim.done( function() {
						style.display = restoreDisplay;
					} );
					if ( restoreDisplay == null ) {
						display = style.display;
						restoreDisplay = display === "none" ? "" : display;
					}
				}
				style.display = "inline-block";
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always( function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		} );
	}

	// Implement show/hide animations
	propTween = false;
	for ( prop in orig ) {

		// General show/hide setup for this element animation
		if ( !propTween ) {
			if ( dataShow ) {
				if ( "hidden" in dataShow ) {
					hidden = dataShow.hidden;
				}
			} else {
				dataShow = dataPriv.access( elem, "fxshow", { display: restoreDisplay } );
			}

			// Store hidden/visible for toggle so `.stop().toggle()` "reverses"
			if ( toggle ) {
				dataShow.hidden = !hidden;
			}

			// Show elements before animating them
			if ( hidden ) {
				showHide( [ elem ], true );
			}

			/* eslint-disable no-loop-func */

			anim.done( function() {

			/* eslint-enable no-loop-func */

				// The final step of a "hide" animation is actually hiding the element
				if ( !hidden ) {
					showHide( [ elem ] );
				}
				dataPriv.remove( elem, "fxshow" );
				for ( prop in orig ) {
					jQuery.style( elem, prop, orig[ prop ] );
				}
			} );
		}

		// Per-property setup
		propTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
		if ( !( prop in dataShow ) ) {
			dataShow[ prop ] = propTween.start;
			if ( hidden ) {
				propTween.end = propTween.start;
				propTween.start = 0;
			}
		}
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( Array.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// Don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3 only
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			// If there's more to do, yield
			if ( percent < 1 && length ) {
				return remaining;
			}

			// If this was an empty animation, synthesize a final progress notification
			if ( !length ) {
				deferred.notifyWith( elem, [ animation, 1, 0 ] );
			}

			// Resolve the animation and report its conclusion
			deferred.resolveWith( elem, [ animation ] );
			return false;
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					result.stop.bind( result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	// Attach callbacks from options
	animation
		.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	return animation;
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnothtmlwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !isFunction( easing ) && easing
	};

	// Go to the end state if fx are off
	if ( jQuery.fx.off ) {
		opt.duration = 0;

	} else {
		if ( typeof opt.duration !== "number" ) {
			if ( opt.duration in jQuery.fx.speeds ) {
				opt.duration = jQuery.fx.speeds[ opt.duration ];

			} else {
				opt.duration = jQuery.fx.speeds._default;
			}
		}
	}

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHiddenWithinTree ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || dataPriv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = dataPriv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = dataPriv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = Date.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Run the timer and safely remove it when done (allowing for external removal)
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	jQuery.fx.start();
};

jQuery.fx.interval = 13;
jQuery.fx.start = function() {
	if ( inProgress ) {
		return;
	}

	inProgress = true;
	schedule();
};

jQuery.fx.stop = function() {
	inProgress = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: Android <=4.3 only
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE <=11 only
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: IE <=11 only
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
} )();


var boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// Attribute hooks are determined by the lowercase version
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			hooks = jQuery.attrHooks[ name.toLowerCase() ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name,
			i = 0,

			// Attribute names can contain non-HTML whitespace characters
			// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
			attrNames = value && value.match( rnothtmlwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				elem.removeAttribute( name );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle,
			lowercaseName = name.toLowerCase();

		if ( !isXML ) {

			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ lowercaseName ];
			attrHandle[ lowercaseName ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				lowercaseName :
				null;
			attrHandle[ lowercaseName ] = handle;
		}
		return ret;
	};
} );




var rfocusable = /^(?:input|select|textarea|button)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each( function() {
			delete this[ jQuery.propFix[ name ] || name ];
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// Support: IE <=9 - 11 only
				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				if ( tabindex ) {
					return parseInt( tabindex, 10 );
				}

				if (
					rfocusable.test( elem.nodeName ) ||
					rclickable.test( elem.nodeName ) &&
					elem.href
				) {
					return 0;
				}

				return -1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Support: IE <=11 only
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
// eslint rule "no-unused-expressions" is disabled for this code
// since it considers such accessions noop
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		},
		set: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );




	// Strip and collapse whitespace according to HTML spec
	// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
	function stripAndCollapse( value ) {
		var tokens = value.match( rnothtmlwhite ) || [];
		return tokens.join( " " );
	}


function getClass( elem ) {
	return elem.getAttribute && elem.getAttribute( "class" ) || "";
}

function classesToArray( value ) {
	if ( Array.isArray( value ) ) {
		return value;
	}
	if ( typeof value === "string" ) {
		return value.match( rnothtmlwhite ) || [];
	}
	return [];
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isValidValue = type === "string" || Array.isArray( value );

		if ( typeof stateVal === "boolean" && isValidValue ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( isValidValue ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = classesToArray( value );

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// Store className if set
					dataPriv.set( this, "__className__", className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				if ( this.setAttribute ) {
					this.setAttribute( "class",
						className || value === false ?
						"" :
						dataPriv.get( this, "__className__" ) || ""
					);
				}
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + stripAndCollapse( getClass( elem ) ) + " " ).indexOf( className ) > -1 ) {
					return true;
			}
		}

		return false;
	}
} );




var rreturn = /\r/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, valueIsFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				// Handle most common string cases
				if ( typeof ret === "string" ) {
					return ret.replace( rreturn, "" );
				}

				// Handle cases where value is null/undef or number
				return ret == null ? "" : ret;
			}

			return;
		}

		valueIsFunction = isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( valueIsFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( Array.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {

				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE <=10 - 11 only
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					stripAndCollapse( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option, i,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one",
					values = one ? null : [],
					max = one ? index + 1 : options.length;

				if ( index < 0 ) {
					i = max;

				} else {
					i = one ? index : 0;
				}

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// Support: IE <=9 only
					// IE8-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							!option.disabled &&
							( !option.parentNode.disabled ||
								!nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					/* eslint-disable no-cond-assign */

					if ( option.selected =
						jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1
					) {
						optionSet = true;
					}

					/* eslint-enable no-cond-assign */
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( Array.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




// Return jQuery for attributes-only inclusion


support.focusin = "onfocusin" in window;


var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	stopPropagationCallback = function( e ) {
		e.stopPropagation();
	};

jQuery.extend( jQuery.event, {

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = lastElement = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {
			lastElement = cur;
			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( dataPriv.get( cur, "events" ) || {} )[ event.type ] &&
				dataPriv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( ( !special._default ||
				special._default.apply( eventPath.pop(), data ) === false ) &&
				acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;

					if ( event.isPropagationStopped() ) {
						lastElement.addEventListener( type, stopPropagationCallback );
					}

					elem[ type ]();

					if ( event.isPropagationStopped() ) {
						lastElement.removeEventListener( type, stopPropagationCallback );
					}

					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	// Piggyback on a donor event to simulate a different one
	// Used only for `focus(in | out)` events
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true
			}
		);

		jQuery.event.trigger( e, null, elem );
	}

} );

jQuery.fn.extend( {

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


// Support: Firefox <=44
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				dataPriv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					dataPriv.remove( doc, fix );

				} else {
					dataPriv.access( doc, fix, attaches );
				}
			}
		};
	} );
}
var location = window.location;

var nonce = Date.now();

var rquery = ( /\?/ );



// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE 9 - 11 only
	// IE throws on parseFromString with invalid input.
	try {
		xml = ( new window.DOMParser() ).parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( Array.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && toType( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, valueOrFunction ) {

			// If value is a function, invoke it and use its return value
			var value = isFunction( valueOrFunction ) ?
				valueOrFunction() :
				valueOrFunction;

			s[ s.length ] = encodeURIComponent( key ) + "=" +
				encodeURIComponent( value == null ? "" : value );
		};

	// If an array was passed in, assume that it is an array of form elements.
	if ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} )
		.filter( function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} )
		.map( function( i, elem ) {
			var val = jQuery( this ).val();

			if ( val == null ) {
				return null;
			}

			if ( Array.isArray( val ) ) {
				return jQuery.map( val, function( val ) {
					return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
				} );
			}

			return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


var
	r20 = /%20/g,
	rhash = /#.*$/,
	rantiCache = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Anchor tag for parsing the document origin
	originAnchor = document.createElement( "a" );
	originAnchor.href = location.href;

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];

		if ( isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType[ 0 ] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s.throws ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: location.href,
		type: "GET",
		isLocal: rlocalProtocol.test( location.protocol ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",

		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": JSON.parse,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,

			// URL without anti-cache param
			cacheURL,

			// Response headers
			responseHeadersString,
			responseHeaders,

			// timeout handle
			timeoutTimer,

			// Url cleanup var
			urlAnchor,

			// Request state (becomes false upon send and true upon completion)
			completed,

			// To know if global events are to be dispatched
			fireGlobals,

			// Loop variable
			i,

			// uncached part of the url
			uncached,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
					jQuery( callbackContext ) :
					jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( completed ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return completed ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					if ( completed == null ) {
						name = requestHeadersNames[ name.toLowerCase() ] =
							requestHeadersNames[ name.toLowerCase() ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( completed == null ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( completed ) {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						} else {

							// Lazy-add the new callbacks in a way that preserves old ones
							for ( code in map ) {
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR );

		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || location.href ) + "" )
			.replace( rprotocol, location.protocol + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = ( s.dataType || "*" ).toLowerCase().match( rnothtmlwhite ) || [ "" ];

		// A cross-domain request is in order when the origin doesn't match the current origin.
		if ( s.crossDomain == null ) {
			urlAnchor = document.createElement( "a" );

			// Support: IE <=8 - 11, Edge 12 - 15
			// IE throws exception on accessing the href property if url is malformed,
			// e.g. http://example.com:80x/
			try {
				urlAnchor.href = s.url;

				// Support: IE <=8 - 11 only
				// Anchor's host property isn't correctly set when s.url is relative
				urlAnchor.href = urlAnchor.href;
				s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !==
					urlAnchor.protocol + "//" + urlAnchor.host;
			} catch ( e ) {

				// If there is an error parsing the URL, assume it is crossDomain,
				// it can be rejected by the transport if it is invalid
				s.crossDomain = true;
			}
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( completed ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		// Remove hash to simplify url manipulation
		cacheURL = s.url.replace( rhash, "" );

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// Remember the hash so we can put it back
			uncached = s.url.slice( cacheURL.length );

			// If data is available and should be processed, append data to url
			if ( s.data && ( s.processData || typeof s.data === "string" ) ) {
				cacheURL += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data;

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add or update anti-cache param if needed
			if ( s.cache === false ) {
				cacheURL = cacheURL.replace( rantiCache, "$1" );
				uncached = ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ( nonce++ ) + uncached;
			}

			// Put hash and anti-cache on the URL that will be requested (gh-1732)
			s.url = cacheURL + uncached;

		// Change '%20' to '+' if this is encoded form body content (gh-2658)
		} else if ( s.data && s.processData &&
			( s.contentType || "" ).indexOf( "application/x-www-form-urlencoded" ) === 0 ) {
			s.data = s.data.replace( r20, "+" );
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		completeDeferred.add( s.complete );
		jqXHR.done( s.success );
		jqXHR.fail( s.error );

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( completed ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				completed = false;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Rethrow post-completion exceptions
				if ( completed ) {
					throw e;
				}

				// Propagate others as results
				done( -1, e );
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Ignore repeat invocations
			if ( completed ) {
				return;
			}

			completed = true;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// Shift arguments if data argument was omitted
		if ( isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );


jQuery._evalUrl = function( url ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,
		"throws": true
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		var wrap;

		if ( this[ 0 ] ) {
			if ( isFunction( html ) ) {
				html = html.call( this[ 0 ] );
			}

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var htmlIsFunction = isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function( selector ) {
		this.parent( selector ).not( "body" ).each( function() {
			jQuery( this ).replaceWith( this.childNodes );
		} );
		return this;
	}
} );


jQuery.expr.pseudos.hidden = function( elem ) {
	return !jQuery.expr.pseudos.visible( elem );
};
jQuery.expr.pseudos.visible = function( elem ) {
	return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );
};




jQuery.ajaxSettings.xhr = function() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
};

var xhrSuccessStatus = {

		// File protocol always yields status code 0, assume 200
		0: 200,

		// Support: IE <=9 only
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport( function( options ) {
	var callback, errorCallback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr();

				xhr.open(
					options.type,
					options.url,
					options.async,
					options.username,
					options.password
				);

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
					headers[ "X-Requested-With" ] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							callback = errorCallback = xhr.onload =
								xhr.onerror = xhr.onabort = xhr.ontimeout =
									xhr.onreadystatechange = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {

								// Support: IE <=9 only
								// On a manual native abort, IE9 throws
								// errors on any property access that is not readyState
								if ( typeof xhr.status !== "number" ) {
									complete( 0, "error" );
								} else {
									complete(

										// File: protocol always yields status 0; see #8605, #14207
										xhr.status,
										xhr.statusText
									);
								}
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,

									// Support: IE <=9 only
									// IE9 has no XHR2 but throws on binary (trac-11426)
									// For XHR2 non-text, let the caller handle it (gh-2498)
									( xhr.responseType || "text" ) !== "text"  ||
									typeof xhr.responseText !== "string" ?
										{ binary: xhr.response } :
										{ text: xhr.responseText },
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				errorCallback = xhr.onerror = xhr.ontimeout = callback( "error" );

				// Support: IE 9 only
				// Use onreadystatechange to replace onabort
				// to handle uncaught aborts
				if ( xhr.onabort !== undefined ) {
					xhr.onabort = errorCallback;
				} else {
					xhr.onreadystatechange = function() {

						// Check readyState before timeout as it changes
						if ( xhr.readyState === 4 ) {

							// Allow onerror to be called first,
							// but that will not handle a native abort
							// Also, save errorCallback to a variable
							// as xhr.onerror cannot be accessed
							window.setTimeout( function() {
								if ( callback ) {
									errorCallback();
								}
							} );
						}
					};
				}

				// Create the abort callback
				callback = callback( "abort" );

				try {

					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {

					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
jQuery.ajaxPrefilter( function( s ) {
	if ( s.crossDomain ) {
		s.contents.script = false;
	}
} );

// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery( "<script>" ).prop( {
					charset: s.scriptCharset,
					src: s.url
				} ).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);

				// Use native DOM manipulation to avoid our domManip AJAX trickery
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// Force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// Make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// Save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// Support: Safari 8 only
// In Safari 8 documents created via document.implementation.createHTMLDocument
// collapse sibling forms: the second one becomes a child of the first one.
// Because of that, this security measure has to be disabled in Safari 8.
// https://bugs.webkit.org/show_bug.cgi?id=137337
support.createHTMLDocument = ( function() {
	var body = document.implementation.createHTMLDocument( "" ).body;
	body.innerHTML = "<form></form><form></form>";
	return body.childNodes.length === 2;
} )();


// Argument "data" should be string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( typeof data !== "string" ) {
		return [];
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}

	var base, parsed, scripts;

	if ( !context ) {

		// Stop scripts or inline event handlers from being executed immediately
		// by using document.implementation
		if ( support.createHTMLDocument ) {
			context = document.implementation.createHTMLDocument( "" );

			// Set the base href for the created document
			// so any parsed elements with URLs
			// are based on the document's URL (gh-2965)
			base = context.createElement( "base" );
			base.href = document.location.href;
			context.head.appendChild( base );
		} else {
			context = document;
		}
	}

	parsed = rsingleTag.exec( data );
	scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = stripAndCollapse( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.expr.pseudos.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};




jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf( "auto" ) > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {

	// offset() relates an element's border box to the document origin
	offset: function( options ) {

		// Preserve chaining for setter
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var rect, win,
			elem = this[ 0 ];

		if ( !elem ) {
			return;
		}

		// Return zeros for disconnected and hidden (display: none) elements (gh-2310)
		// Support: IE <=11 only
		// Running getBoundingClientRect on a
		// disconnected node in IE throws an error
		if ( !elem.getClientRects().length ) {
			return { top: 0, left: 0 };
		}

		// Get document-relative position by adding viewport scroll to viewport-relative gBCR
		rect = elem.getBoundingClientRect();
		win = elem.ownerDocument.defaultView;
		return {
			top: rect.top + win.pageYOffset,
			left: rect.left + win.pageXOffset
		};
	},

	// position() relates an element's margin box to its offset parent's padding box
	// This corresponds to the behavior of CSS absolute positioning
	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset, doc,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// position:fixed elements are offset from the viewport, which itself always has zero offset
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// Assume position:fixed implies availability of getBoundingClientRect
			offset = elem.getBoundingClientRect();

		} else {
			offset = this.offset();

			// Account for the *real* offset parent, which can be the document or its root element
			// when a statically positioned element is identified
			doc = elem.ownerDocument;
			offsetParent = elem.offsetParent || doc.documentElement;
			while ( offsetParent &&
				( offsetParent === doc.body || offsetParent === doc.documentElement ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) {

				offsetParent = offsetParent.parentNode;
			}
			if ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {

				// Incorporate borders into its offset, since they are outside its content origin
				parentOffset = jQuery( offsetParent ).offset();
				parentOffset.top += jQuery.css( offsetParent, "borderTopWidth", true );
				parentOffset.left += jQuery.css( offsetParent, "borderLeftWidth", true );
			}
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	// This method will return documentElement in the following cases:
	// 1) For the element inside the iframe without offsetParent, this method will return
	//    documentElement of the parent window
	// 2) For the hidden or detached element
	// 3) For body or html element, i.e. in case of the html node - it will return itself
	//
	// but those exceptions were never presented as a real life use-cases
	// and might be considered as more preferable results.
	//
	// This logic, however, is not guaranteed and can change at any point in the future
	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && jQuery.css( offsetParent, "position" ) === "static" ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {

			// Coalesce documents and windows
			var win;
			if ( isWindow( elem ) ) {
				win = elem;
			} else if ( elem.nodeType === 9 ) {
				win = elem.defaultView;
			}

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : win.pageXOffset,
					top ? val : win.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length );
	};
} );

// Support: Safari <=7 - 9.1, Chrome <=37 - 49
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name },
		function( defaultExtra, funcName ) {

		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( isWindow( elem ) ) {

					// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
					return funcName.indexOf( "outer" ) === 0 ?
						elem[ "inner" + name ] :
						elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable );
		};
	} );
} );


jQuery.each( ( "blur focus focusin focusout resize scroll click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup contextmenu" ).split( " " ),
	function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
} );

jQuery.fn.extend( {
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );




jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	}
} );

// Bind a function to a context, optionally partially applying any
// arguments.
// jQuery.proxy is deprecated to promote standards (specifically Function#bind)
// However, it is not slated for removal any time soon
jQuery.proxy = function( fn, context ) {
	var tmp, args, proxy;

	if ( typeof context === "string" ) {
		tmp = fn[ context ];
		context = fn;
		fn = tmp;
	}

	// Quick check to determine if target is callable, in the spec
	// this throws a TypeError, but we will just return undefined.
	if ( !isFunction( fn ) ) {
		return undefined;
	}

	// Simulated bind
	args = slice.call( arguments, 2 );
	proxy = function() {
		return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
	};

	// Set the guid of unique handler to the same of original handler, so it can be removed
	proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	return proxy;
};

jQuery.holdReady = function( hold ) {
	if ( hold ) {
		jQuery.readyWait++;
	} else {
		jQuery.ready( true );
	}
};
jQuery.isArray = Array.isArray;
jQuery.parseJSON = JSON.parse;
jQuery.nodeName = nodeName;
jQuery.isFunction = isFunction;
jQuery.isWindow = isWindow;
jQuery.camelCase = camelCase;
jQuery.type = toType;

jQuery.now = Date.now;

jQuery.isNumeric = function( obj ) {

	// As of jQuery 3.0, isNumeric is limited to
	// strings and numbers (primitives or objects)
	// that can be coerced to finite numbers (gh-2662)
	var type = jQuery.type( obj );
	return ( type === "number" || type === "string" ) &&

		// parseFloat NaNs numeric-cast false positives ("")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		!isNaN( obj - parseFloat( obj ) );
};




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( true ) {
	!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
		return jQuery;
	}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
}




var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( !noGlobal ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;
} );


/***/ }),

/***/ "./node_modules/magnific-popup/dist/jquery.magnific-popup.js":
/*!*******************************************************************!*\
  !*** ./node_modules/magnific-popup/dist/jquery.magnific-popup.js ***!
  \*******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! Magnific Popup - v1.1.0 - 2016-02-20
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2016 Dmitry Semenov; */
;(function (factory) { 
if (true) { 
 // AMD. Register as an anonymous module. 
 !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); 
 } else {} 
 }(function($) { 

/*>>core*/
/**
 * 
 * Magnific Popup Core JS file
 * 
 */


/**
 * Private static constants
 */
var CLOSE_EVENT = 'Close',
	BEFORE_CLOSE_EVENT = 'BeforeClose',
	AFTER_CLOSE_EVENT = 'AfterClose',
	BEFORE_APPEND_EVENT = 'BeforeAppend',
	MARKUP_PARSE_EVENT = 'MarkupParse',
	OPEN_EVENT = 'Open',
	CHANGE_EVENT = 'Change',
	NS = 'mfp',
	EVENT_NS = '.' + NS,
	READY_CLASS = 'mfp-ready',
	REMOVING_CLASS = 'mfp-removing',
	PREVENT_CLOSE_CLASS = 'mfp-prevent-close';


/**
 * Private vars 
 */
/*jshint -W079 */
var mfp, // As we have only one instance of MagnificPopup object, we define it locally to not to use 'this'
	MagnificPopup = function(){},
	_isJQ = !!(window.jQuery),
	_prevStatus,
	_window = $(window),
	_document,
	_prevContentType,
	_wrapClasses,
	_currPopupType;


/**
 * Private functions
 */
var _mfpOn = function(name, f) {
		mfp.ev.on(NS + name + EVENT_NS, f);
	},
	_getEl = function(className, appendTo, html, raw) {
		var el = document.createElement('div');
		el.className = 'mfp-'+className;
		if(html) {
			el.innerHTML = html;
		}
		if(!raw) {
			el = $(el);
			if(appendTo) {
				el.appendTo(appendTo);
			}
		} else if(appendTo) {
			appendTo.appendChild(el);
		}
		return el;
	},
	_mfpTrigger = function(e, data) {
		mfp.ev.triggerHandler(NS + e, data);

		if(mfp.st.callbacks) {
			// converts "mfpEventName" to "eventName" callback and triggers it if it's present
			e = e.charAt(0).toLowerCase() + e.slice(1);
			if(mfp.st.callbacks[e]) {
				mfp.st.callbacks[e].apply(mfp, $.isArray(data) ? data : [data]);
			}
		}
	},
	_getCloseBtn = function(type) {
		if(type !== _currPopupType || !mfp.currTemplate.closeBtn) {
			mfp.currTemplate.closeBtn = $( mfp.st.closeMarkup.replace('%title%', mfp.st.tClose ) );
			_currPopupType = type;
		}
		return mfp.currTemplate.closeBtn;
	},
	// Initialize Magnific Popup only when called at least once
	_checkInstance = function() {
		if(!$.magnificPopup.instance) {
			/*jshint -W020 */
			mfp = new MagnificPopup();
			mfp.init();
			$.magnificPopup.instance = mfp;
		}
	},
	// CSS transition detection, http://stackoverflow.com/questions/7264899/detect-css-transitions-using-javascript-and-without-modernizr
	supportsTransitions = function() {
		var s = document.createElement('p').style, // 's' for style. better to create an element if body yet to exist
			v = ['ms','O','Moz','Webkit']; // 'v' for vendor

		if( s['transition'] !== undefined ) {
			return true; 
		}
			
		while( v.length ) {
			if( v.pop() + 'Transition' in s ) {
				return true;
			}
		}
				
		return false;
	};



/**
 * Public functions
 */
MagnificPopup.prototype = {

	constructor: MagnificPopup,

	/**
	 * Initializes Magnific Popup plugin. 
	 * This function is triggered only once when $.fn.magnificPopup or $.magnificPopup is executed
	 */
	init: function() {
		var appVersion = navigator.appVersion;
		mfp.isLowIE = mfp.isIE8 = document.all && !document.addEventListener;
		mfp.isAndroid = (/android/gi).test(appVersion);
		mfp.isIOS = (/iphone|ipad|ipod/gi).test(appVersion);
		mfp.supportsTransition = supportsTransitions();

		// We disable fixed positioned lightbox on devices that don't handle it nicely.
		// If you know a better way of detecting this - let me know.
		mfp.probablyMobile = (mfp.isAndroid || mfp.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent) );
		_document = $(document);

		mfp.popupsCache = {};
	},

	/**
	 * Opens popup
	 * @param  data [description]
	 */
	open: function(data) {

		var i;

		if(data.isObj === false) { 
			// convert jQuery collection to array to avoid conflicts later
			mfp.items = data.items.toArray();

			mfp.index = 0;
			var items = data.items,
				item;
			for(i = 0; i < items.length; i++) {
				item = items[i];
				if(item.parsed) {
					item = item.el[0];
				}
				if(item === data.el[0]) {
					mfp.index = i;
					break;
				}
			}
		} else {
			mfp.items = $.isArray(data.items) ? data.items : [data.items];
			mfp.index = data.index || 0;
		}

		// if popup is already opened - we just update the content
		if(mfp.isOpen) {
			mfp.updateItemHTML();
			return;
		}
		
		mfp.types = []; 
		_wrapClasses = '';
		if(data.mainEl && data.mainEl.length) {
			mfp.ev = data.mainEl.eq(0);
		} else {
			mfp.ev = _document;
		}

		if(data.key) {
			if(!mfp.popupsCache[data.key]) {
				mfp.popupsCache[data.key] = {};
			}
			mfp.currTemplate = mfp.popupsCache[data.key];
		} else {
			mfp.currTemplate = {};
		}



		mfp.st = $.extend(true, {}, $.magnificPopup.defaults, data ); 
		mfp.fixedContentPos = mfp.st.fixedContentPos === 'auto' ? !mfp.probablyMobile : mfp.st.fixedContentPos;

		if(mfp.st.modal) {
			mfp.st.closeOnContentClick = false;
			mfp.st.closeOnBgClick = false;
			mfp.st.showCloseBtn = false;
			mfp.st.enableEscapeKey = false;
		}
		

		// Building markup
		// main containers are created only once
		if(!mfp.bgOverlay) {

			// Dark overlay
			mfp.bgOverlay = _getEl('bg').on('click'+EVENT_NS, function() {
				mfp.close();
			});

			mfp.wrap = _getEl('wrap').attr('tabindex', -1).on('click'+EVENT_NS, function(e) {
				if(mfp._checkIfClose(e.target)) {
					mfp.close();
				}
			});

			mfp.container = _getEl('container', mfp.wrap);
		}

		mfp.contentContainer = _getEl('content');
		if(mfp.st.preloader) {
			mfp.preloader = _getEl('preloader', mfp.container, mfp.st.tLoading);
		}


		// Initializing modules
		var modules = $.magnificPopup.modules;
		for(i = 0; i < modules.length; i++) {
			var n = modules[i];
			n = n.charAt(0).toUpperCase() + n.slice(1);
			mfp['init'+n].call(mfp);
		}
		_mfpTrigger('BeforeOpen');


		if(mfp.st.showCloseBtn) {
			// Close button
			if(!mfp.st.closeBtnInside) {
				mfp.wrap.append( _getCloseBtn() );
			} else {
				_mfpOn(MARKUP_PARSE_EVENT, function(e, template, values, item) {
					values.close_replaceWith = _getCloseBtn(item.type);
				});
				_wrapClasses += ' mfp-close-btn-in';
			}
		}

		if(mfp.st.alignTop) {
			_wrapClasses += ' mfp-align-top';
		}

	

		if(mfp.fixedContentPos) {
			mfp.wrap.css({
				overflow: mfp.st.overflowY,
				overflowX: 'hidden',
				overflowY: mfp.st.overflowY
			});
		} else {
			mfp.wrap.css({ 
				top: _window.scrollTop(),
				position: 'absolute'
			});
		}
		if( mfp.st.fixedBgPos === false || (mfp.st.fixedBgPos === 'auto' && !mfp.fixedContentPos) ) {
			mfp.bgOverlay.css({
				height: _document.height(),
				position: 'absolute'
			});
		}

		

		if(mfp.st.enableEscapeKey) {
			// Close on ESC key
			_document.on('keyup' + EVENT_NS, function(e) {
				if(e.keyCode === 27) {
					mfp.close();
				}
			});
		}

		_window.on('resize' + EVENT_NS, function() {
			mfp.updateSize();
		});


		if(!mfp.st.closeOnContentClick) {
			_wrapClasses += ' mfp-auto-cursor';
		}
		
		if(_wrapClasses)
			mfp.wrap.addClass(_wrapClasses);


		// this triggers recalculation of layout, so we get it once to not to trigger twice
		var windowHeight = mfp.wH = _window.height();

		
		var windowStyles = {};

		if( mfp.fixedContentPos ) {
            if(mfp._hasScrollBar(windowHeight)){
                var s = mfp._getScrollbarSize();
                if(s) {
                    windowStyles.marginRight = s;
                }
            }
        }

		if(mfp.fixedContentPos) {
			if(!mfp.isIE7) {
				windowStyles.overflow = 'hidden';
			} else {
				// ie7 double-scroll bug
				$('body, html').css('overflow', 'hidden');
			}
		}

		
		
		var classesToadd = mfp.st.mainClass;
		if(mfp.isIE7) {
			classesToadd += ' mfp-ie7';
		}
		if(classesToadd) {
			mfp._addClassToMFP( classesToadd );
		}

		// add content
		mfp.updateItemHTML();

		_mfpTrigger('BuildControls');

		// remove scrollbar, add margin e.t.c
		$('html').css(windowStyles);
		
		// add everything to DOM
		mfp.bgOverlay.add(mfp.wrap).prependTo( mfp.st.prependTo || $(document.body) );

		// Save last focused element
		mfp._lastFocusedEl = document.activeElement;
		
		// Wait for next cycle to allow CSS transition
		setTimeout(function() {
			
			if(mfp.content) {
				mfp._addClassToMFP(READY_CLASS);
				mfp._setFocus();
			} else {
				// if content is not defined (not loaded e.t.c) we add class only for BG
				mfp.bgOverlay.addClass(READY_CLASS);
			}
			
			// Trap the focus in popup
			_document.on('focusin' + EVENT_NS, mfp._onFocusIn);

		}, 16);

		mfp.isOpen = true;
		mfp.updateSize(windowHeight);
		_mfpTrigger(OPEN_EVENT);

		return data;
	},

	/**
	 * Closes the popup
	 */
	close: function() {
		if(!mfp.isOpen) return;
		_mfpTrigger(BEFORE_CLOSE_EVENT);

		mfp.isOpen = false;
		// for CSS3 animation
		if(mfp.st.removalDelay && !mfp.isLowIE && mfp.supportsTransition )  {
			mfp._addClassToMFP(REMOVING_CLASS);
			setTimeout(function() {
				mfp._close();
			}, mfp.st.removalDelay);
		} else {
			mfp._close();
		}
	},

	/**
	 * Helper for close() function
	 */
	_close: function() {
		_mfpTrigger(CLOSE_EVENT);

		var classesToRemove = REMOVING_CLASS + ' ' + READY_CLASS + ' ';

		mfp.bgOverlay.detach();
		mfp.wrap.detach();
		mfp.container.empty();

		if(mfp.st.mainClass) {
			classesToRemove += mfp.st.mainClass + ' ';
		}

		mfp._removeClassFromMFP(classesToRemove);

		if(mfp.fixedContentPos) {
			var windowStyles = {marginRight: ''};
			if(mfp.isIE7) {
				$('body, html').css('overflow', '');
			} else {
				windowStyles.overflow = '';
			}
			$('html').css(windowStyles);
		}
		
		_document.off('keyup' + EVENT_NS + ' focusin' + EVENT_NS);
		mfp.ev.off(EVENT_NS);

		// clean up DOM elements that aren't removed
		mfp.wrap.attr('class', 'mfp-wrap').removeAttr('style');
		mfp.bgOverlay.attr('class', 'mfp-bg');
		mfp.container.attr('class', 'mfp-container');

		// remove close button from target element
		if(mfp.st.showCloseBtn &&
		(!mfp.st.closeBtnInside || mfp.currTemplate[mfp.currItem.type] === true)) {
			if(mfp.currTemplate.closeBtn)
				mfp.currTemplate.closeBtn.detach();
		}


		if(mfp.st.autoFocusLast && mfp._lastFocusedEl) {
			$(mfp._lastFocusedEl).focus(); // put tab focus back
		}
		mfp.currItem = null;	
		mfp.content = null;
		mfp.currTemplate = null;
		mfp.prevHeight = 0;

		_mfpTrigger(AFTER_CLOSE_EVENT);
	},
	
	updateSize: function(winHeight) {

		if(mfp.isIOS) {
			// fixes iOS nav bars https://github.com/dimsemenov/Magnific-Popup/issues/2
			var zoomLevel = document.documentElement.clientWidth / window.innerWidth;
			var height = window.innerHeight * zoomLevel;
			mfp.wrap.css('height', height);
			mfp.wH = height;
		} else {
			mfp.wH = winHeight || _window.height();
		}
		// Fixes #84: popup incorrectly positioned with position:relative on body
		if(!mfp.fixedContentPos) {
			mfp.wrap.css('height', mfp.wH);
		}

		_mfpTrigger('Resize');

	},

	/**
	 * Set content of popup based on current index
	 */
	updateItemHTML: function() {
		var item = mfp.items[mfp.index];

		// Detach and perform modifications
		mfp.contentContainer.detach();

		if(mfp.content)
			mfp.content.detach();

		if(!item.parsed) {
			item = mfp.parseEl( mfp.index );
		}

		var type = item.type;

		_mfpTrigger('BeforeChange', [mfp.currItem ? mfp.currItem.type : '', type]);
		// BeforeChange event works like so:
		// _mfpOn('BeforeChange', function(e, prevType, newType) { });

		mfp.currItem = item;

		if(!mfp.currTemplate[type]) {
			var markup = mfp.st[type] ? mfp.st[type].markup : false;

			// allows to modify markup
			_mfpTrigger('FirstMarkupParse', markup);

			if(markup) {
				mfp.currTemplate[type] = $(markup);
			} else {
				// if there is no markup found we just define that template is parsed
				mfp.currTemplate[type] = true;
			}
		}

		if(_prevContentType && _prevContentType !== item.type) {
			mfp.container.removeClass('mfp-'+_prevContentType+'-holder');
		}

		var newContent = mfp['get' + type.charAt(0).toUpperCase() + type.slice(1)](item, mfp.currTemplate[type]);
		mfp.appendContent(newContent, type);

		item.preloaded = true;

		_mfpTrigger(CHANGE_EVENT, item);
		_prevContentType = item.type;

		// Append container back after its content changed
		mfp.container.prepend(mfp.contentContainer);

		_mfpTrigger('AfterChange');
	},


	/**
	 * Set HTML content of popup
	 */
	appendContent: function(newContent, type) {
		mfp.content = newContent;

		if(newContent) {
			if(mfp.st.showCloseBtn && mfp.st.closeBtnInside &&
				mfp.currTemplate[type] === true) {
				// if there is no markup, we just append close button element inside
				if(!mfp.content.find('.mfp-close').length) {
					mfp.content.append(_getCloseBtn());
				}
			} else {
				mfp.content = newContent;
			}
		} else {
			mfp.content = '';
		}

		_mfpTrigger(BEFORE_APPEND_EVENT);
		mfp.container.addClass('mfp-'+type+'-holder');

		mfp.contentContainer.append(mfp.content);
	},


	/**
	 * Creates Magnific Popup data object based on given data
	 * @param  {int} index Index of item to parse
	 */
	parseEl: function(index) {
		var item = mfp.items[index],
			type;

		if(item.tagName) {
			item = { el: $(item) };
		} else {
			type = item.type;
			item = { data: item, src: item.src };
		}

		if(item.el) {
			var types = mfp.types;

			// check for 'mfp-TYPE' class
			for(var i = 0; i < types.length; i++) {
				if( item.el.hasClass('mfp-'+types[i]) ) {
					type = types[i];
					break;
				}
			}

			item.src = item.el.attr('data-mfp-src');
			if(!item.src) {
				item.src = item.el.attr('href');
			}
		}

		item.type = type || mfp.st.type || 'inline';
		item.index = index;
		item.parsed = true;
		mfp.items[index] = item;
		_mfpTrigger('ElementParse', item);

		return mfp.items[index];
	},


	/**
	 * Initializes single popup or a group of popups
	 */
	addGroup: function(el, options) {
		var eHandler = function(e) {
			e.mfpEl = this;
			mfp._openClick(e, el, options);
		};

		if(!options) {
			options = {};
		}

		var eName = 'click.magnificPopup';
		options.mainEl = el;

		if(options.items) {
			options.isObj = true;
			el.off(eName).on(eName, eHandler);
		} else {
			options.isObj = false;
			if(options.delegate) {
				el.off(eName).on(eName, options.delegate , eHandler);
			} else {
				options.items = el;
				el.off(eName).on(eName, eHandler);
			}
		}
	},
	_openClick: function(e, el, options) {
		var midClick = options.midClick !== undefined ? options.midClick : $.magnificPopup.defaults.midClick;


		if(!midClick && ( e.which === 2 || e.ctrlKey || e.metaKey || e.altKey || e.shiftKey ) ) {
			return;
		}

		var disableOn = options.disableOn !== undefined ? options.disableOn : $.magnificPopup.defaults.disableOn;

		if(disableOn) {
			if($.isFunction(disableOn)) {
				if( !disableOn.call(mfp) ) {
					return true;
				}
			} else { // else it's number
				if( _window.width() < disableOn ) {
					return true;
				}
			}
		}

		if(e.type) {
			e.preventDefault();

			// This will prevent popup from closing if element is inside and popup is already opened
			if(mfp.isOpen) {
				e.stopPropagation();
			}
		}

		options.el = $(e.mfpEl);
		if(options.delegate) {
			options.items = el.find(options.delegate);
		}
		mfp.open(options);
	},


	/**
	 * Updates text on preloader
	 */
	updateStatus: function(status, text) {

		if(mfp.preloader) {
			if(_prevStatus !== status) {
				mfp.container.removeClass('mfp-s-'+_prevStatus);
			}

			if(!text && status === 'loading') {
				text = mfp.st.tLoading;
			}

			var data = {
				status: status,
				text: text
			};
			// allows to modify status
			_mfpTrigger('UpdateStatus', data);

			status = data.status;
			text = data.text;

			mfp.preloader.html(text);

			mfp.preloader.find('a').on('click', function(e) {
				e.stopImmediatePropagation();
			});

			mfp.container.addClass('mfp-s-'+status);
			_prevStatus = status;
		}
	},


	/*
		"Private" helpers that aren't private at all
	 */
	// Check to close popup or not
	// "target" is an element that was clicked
	_checkIfClose: function(target) {

		if($(target).hasClass(PREVENT_CLOSE_CLASS)) {
			return;
		}

		var closeOnContent = mfp.st.closeOnContentClick;
		var closeOnBg = mfp.st.closeOnBgClick;

		if(closeOnContent && closeOnBg) {
			return true;
		} else {

			// We close the popup if click is on close button or on preloader. Or if there is no content.
			if(!mfp.content || $(target).hasClass('mfp-close') || (mfp.preloader && target === mfp.preloader[0]) ) {
				return true;
			}

			// if click is outside the content
			if(  (target !== mfp.content[0] && !$.contains(mfp.content[0], target))  ) {
				if(closeOnBg) {
					// last check, if the clicked element is in DOM, (in case it's removed onclick)
					if( $.contains(document, target) ) {
						return true;
					}
				}
			} else if(closeOnContent) {
				return true;
			}

		}
		return false;
	},
	_addClassToMFP: function(cName) {
		mfp.bgOverlay.addClass(cName);
		mfp.wrap.addClass(cName);
	},
	_removeClassFromMFP: function(cName) {
		this.bgOverlay.removeClass(cName);
		mfp.wrap.removeClass(cName);
	},
	_hasScrollBar: function(winHeight) {
		return (  (mfp.isIE7 ? _document.height() : document.body.scrollHeight) > (winHeight || _window.height()) );
	},
	_setFocus: function() {
		(mfp.st.focus ? mfp.content.find(mfp.st.focus).eq(0) : mfp.wrap).focus();
	},
	_onFocusIn: function(e) {
		if( e.target !== mfp.wrap[0] && !$.contains(mfp.wrap[0], e.target) ) {
			mfp._setFocus();
			return false;
		}
	},
	_parseMarkup: function(template, values, item) {
		var arr;
		if(item.data) {
			values = $.extend(item.data, values);
		}
		_mfpTrigger(MARKUP_PARSE_EVENT, [template, values, item] );

		$.each(values, function(key, value) {
			if(value === undefined || value === false) {
				return true;
			}
			arr = key.split('_');
			if(arr.length > 1) {
				var el = template.find(EVENT_NS + '-'+arr[0]);

				if(el.length > 0) {
					var attr = arr[1];
					if(attr === 'replaceWith') {
						if(el[0] !== value[0]) {
							el.replaceWith(value);
						}
					} else if(attr === 'img') {
						if(el.is('img')) {
							el.attr('src', value);
						} else {
							el.replaceWith( $('<img>').attr('src', value).attr('class', el.attr('class')) );
						}
					} else {
						el.attr(arr[1], value);
					}
				}

			} else {
				template.find(EVENT_NS + '-'+key).html(value);
			}
		});
	},

	_getScrollbarSize: function() {
		// thx David
		if(mfp.scrollbarSize === undefined) {
			var scrollDiv = document.createElement("div");
			scrollDiv.style.cssText = 'width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';
			document.body.appendChild(scrollDiv);
			mfp.scrollbarSize = scrollDiv.offsetWidth - scrollDiv.clientWidth;
			document.body.removeChild(scrollDiv);
		}
		return mfp.scrollbarSize;
	}

}; /* MagnificPopup core prototype end */




/**
 * Public static functions
 */
$.magnificPopup = {
	instance: null,
	proto: MagnificPopup.prototype,
	modules: [],

	open: function(options, index) {
		_checkInstance();

		if(!options) {
			options = {};
		} else {
			options = $.extend(true, {}, options);
		}

		options.isObj = true;
		options.index = index || 0;
		return this.instance.open(options);
	},

	close: function() {
		return $.magnificPopup.instance && $.magnificPopup.instance.close();
	},

	registerModule: function(name, module) {
		if(module.options) {
			$.magnificPopup.defaults[name] = module.options;
		}
		$.extend(this.proto, module.proto);
		this.modules.push(name);
	},

	defaults: {

		// Info about options is in docs:
		// http://dimsemenov.com/plugins/magnific-popup/documentation.html#options

		disableOn: 0,

		key: null,

		midClick: false,

		mainClass: '',

		preloader: true,

		focus: '', // CSS selector of input to focus after popup is opened

		closeOnContentClick: false,

		closeOnBgClick: true,

		closeBtnInside: true,

		showCloseBtn: true,

		enableEscapeKey: true,

		modal: false,

		alignTop: false,

		removalDelay: 0,

		prependTo: null,

		fixedContentPos: 'auto',

		fixedBgPos: 'auto',

		overflowY: 'auto',

		closeMarkup: '<button title="%title%" type="button" class="mfp-close">&#215;</button>',

		tClose: 'Close (Esc)',

		tLoading: 'Loading...',

		autoFocusLast: true

	}
};



$.fn.magnificPopup = function(options) {
	_checkInstance();

	var jqEl = $(this);

	// We call some API method of first param is a string
	if (typeof options === "string" ) {

		if(options === 'open') {
			var items,
				itemOpts = _isJQ ? jqEl.data('magnificPopup') : jqEl[0].magnificPopup,
				index = parseInt(arguments[1], 10) || 0;

			if(itemOpts.items) {
				items = itemOpts.items[index];
			} else {
				items = jqEl;
				if(itemOpts.delegate) {
					items = items.find(itemOpts.delegate);
				}
				items = items.eq( index );
			}
			mfp._openClick({mfpEl:items}, jqEl, itemOpts);
		} else {
			if(mfp.isOpen)
				mfp[options].apply(mfp, Array.prototype.slice.call(arguments, 1));
		}

	} else {
		// clone options obj
		options = $.extend(true, {}, options);

		/*
		 * As Zepto doesn't support .data() method for objects
		 * and it works only in normal browsers
		 * we assign "options" object directly to the DOM element. FTW!
		 */
		if(_isJQ) {
			jqEl.data('magnificPopup', options);
		} else {
			jqEl[0].magnificPopup = options;
		}

		mfp.addGroup(jqEl, options);

	}
	return jqEl;
};

/*>>core*/

/*>>inline*/

var INLINE_NS = 'inline',
	_hiddenClass,
	_inlinePlaceholder,
	_lastInlineElement,
	_putInlineElementsBack = function() {
		if(_lastInlineElement) {
			_inlinePlaceholder.after( _lastInlineElement.addClass(_hiddenClass) ).detach();
			_lastInlineElement = null;
		}
	};

$.magnificPopup.registerModule(INLINE_NS, {
	options: {
		hiddenClass: 'hide', // will be appended with `mfp-` prefix
		markup: '',
		tNotFound: 'Content not found'
	},
	proto: {

		initInline: function() {
			mfp.types.push(INLINE_NS);

			_mfpOn(CLOSE_EVENT+'.'+INLINE_NS, function() {
				_putInlineElementsBack();
			});
		},

		getInline: function(item, template) {

			_putInlineElementsBack();

			if(item.src) {
				var inlineSt = mfp.st.inline,
					el = $(item.src);

				if(el.length) {

					// If target element has parent - we replace it with placeholder and put it back after popup is closed
					var parent = el[0].parentNode;
					if(parent && parent.tagName) {
						if(!_inlinePlaceholder) {
							_hiddenClass = inlineSt.hiddenClass;
							_inlinePlaceholder = _getEl(_hiddenClass);
							_hiddenClass = 'mfp-'+_hiddenClass;
						}
						// replace target inline element with placeholder
						_lastInlineElement = el.after(_inlinePlaceholder).detach().removeClass(_hiddenClass);
					}

					mfp.updateStatus('ready');
				} else {
					mfp.updateStatus('error', inlineSt.tNotFound);
					el = $('<div>');
				}

				item.inlineElement = el;
				return el;
			}

			mfp.updateStatus('ready');
			mfp._parseMarkup(template, {}, item);
			return template;
		}
	}
});

/*>>inline*/

/*>>ajax*/
var AJAX_NS = 'ajax',
	_ajaxCur,
	_removeAjaxCursor = function() {
		if(_ajaxCur) {
			$(document.body).removeClass(_ajaxCur);
		}
	},
	_destroyAjaxRequest = function() {
		_removeAjaxCursor();
		if(mfp.req) {
			mfp.req.abort();
		}
	};

$.magnificPopup.registerModule(AJAX_NS, {

	options: {
		settings: null,
		cursor: 'mfp-ajax-cur',
		tError: '<a href="%url%">The content</a> could not be loaded.'
	},

	proto: {
		initAjax: function() {
			mfp.types.push(AJAX_NS);
			_ajaxCur = mfp.st.ajax.cursor;

			_mfpOn(CLOSE_EVENT+'.'+AJAX_NS, _destroyAjaxRequest);
			_mfpOn('BeforeChange.' + AJAX_NS, _destroyAjaxRequest);
		},
		getAjax: function(item) {

			if(_ajaxCur) {
				$(document.body).addClass(_ajaxCur);
			}

			mfp.updateStatus('loading');

			var opts = $.extend({
				url: item.src,
				success: function(data, textStatus, jqXHR) {
					var temp = {
						data:data,
						xhr:jqXHR
					};

					_mfpTrigger('ParseAjax', temp);

					mfp.appendContent( $(temp.data), AJAX_NS );

					item.finished = true;

					_removeAjaxCursor();

					mfp._setFocus();

					setTimeout(function() {
						mfp.wrap.addClass(READY_CLASS);
					}, 16);

					mfp.updateStatus('ready');

					_mfpTrigger('AjaxContentAdded');
				},
				error: function() {
					_removeAjaxCursor();
					item.finished = item.loadError = true;
					mfp.updateStatus('error', mfp.st.ajax.tError.replace('%url%', item.src));
				}
			}, mfp.st.ajax.settings);

			mfp.req = $.ajax(opts);

			return '';
		}
	}
});

/*>>ajax*/

/*>>image*/
var _imgInterval,
	_getTitle = function(item) {
		if(item.data && item.data.title !== undefined)
			return item.data.title;

		var src = mfp.st.image.titleSrc;

		if(src) {
			if($.isFunction(src)) {
				return src.call(mfp, item);
			} else if(item.el) {
				return item.el.attr(src) || '';
			}
		}
		return '';
	};

$.magnificPopup.registerModule('image', {

	options: {
		markup: '<div class="mfp-figure">'+
					'<div class="mfp-close"></div>'+
					'<figure>'+
						'<div class="mfp-img"></div>'+
						'<figcaption>'+
							'<div class="mfp-bottom-bar">'+
								'<div class="mfp-title"></div>'+
								'<div class="mfp-counter"></div>'+
							'</div>'+
						'</figcaption>'+
					'</figure>'+
				'</div>',
		cursor: 'mfp-zoom-out-cur',
		titleSrc: 'title',
		verticalFit: true,
		tError: '<a href="%url%">The image</a> could not be loaded.'
	},

	proto: {
		initImage: function() {
			var imgSt = mfp.st.image,
				ns = '.image';

			mfp.types.push('image');

			_mfpOn(OPEN_EVENT+ns, function() {
				if(mfp.currItem.type === 'image' && imgSt.cursor) {
					$(document.body).addClass(imgSt.cursor);
				}
			});

			_mfpOn(CLOSE_EVENT+ns, function() {
				if(imgSt.cursor) {
					$(document.body).removeClass(imgSt.cursor);
				}
				_window.off('resize' + EVENT_NS);
			});

			_mfpOn('Resize'+ns, mfp.resizeImage);
			if(mfp.isLowIE) {
				_mfpOn('AfterChange', mfp.resizeImage);
			}
		},
		resizeImage: function() {
			var item = mfp.currItem;
			if(!item || !item.img) return;

			if(mfp.st.image.verticalFit) {
				var decr = 0;
				// fix box-sizing in ie7/8
				if(mfp.isLowIE) {
					decr = parseInt(item.img.css('padding-top'), 10) + parseInt(item.img.css('padding-bottom'),10);
				}
				item.img.css('max-height', mfp.wH-decr);
			}
		},
		_onImageHasSize: function(item) {
			if(item.img) {

				item.hasSize = true;

				if(_imgInterval) {
					clearInterval(_imgInterval);
				}

				item.isCheckingImgSize = false;

				_mfpTrigger('ImageHasSize', item);

				if(item.imgHidden) {
					if(mfp.content)
						mfp.content.removeClass('mfp-loading');

					item.imgHidden = false;
				}

			}
		},

		/**
		 * Function that loops until the image has size to display elements that rely on it asap
		 */
		findImageSize: function(item) {

			var counter = 0,
				img = item.img[0],
				mfpSetInterval = function(delay) {

					if(_imgInterval) {
						clearInterval(_imgInterval);
					}
					// decelerating interval that checks for size of an image
					_imgInterval = setInterval(function() {
						if(img.naturalWidth > 0) {
							mfp._onImageHasSize(item);
							return;
						}

						if(counter > 200) {
							clearInterval(_imgInterval);
						}

						counter++;
						if(counter === 3) {
							mfpSetInterval(10);
						} else if(counter === 40) {
							mfpSetInterval(50);
						} else if(counter === 100) {
							mfpSetInterval(500);
						}
					}, delay);
				};

			mfpSetInterval(1);
		},

		getImage: function(item, template) {

			var guard = 0,

				// image load complete handler
				onLoadComplete = function() {
					if(item) {
						if (item.img[0].complete) {
							item.img.off('.mfploader');

							if(item === mfp.currItem){
								mfp._onImageHasSize(item);

								mfp.updateStatus('ready');
							}

							item.hasSize = true;
							item.loaded = true;

							_mfpTrigger('ImageLoadComplete');

						}
						else {
							// if image complete check fails 200 times (20 sec), we assume that there was an error.
							guard++;
							if(guard < 200) {
								setTimeout(onLoadComplete,100);
							} else {
								onLoadError();
							}
						}
					}
				},

				// image error handler
				onLoadError = function() {
					if(item) {
						item.img.off('.mfploader');
						if(item === mfp.currItem){
							mfp._onImageHasSize(item);
							mfp.updateStatus('error', imgSt.tError.replace('%url%', item.src) );
						}

						item.hasSize = true;
						item.loaded = true;
						item.loadError = true;
					}
				},
				imgSt = mfp.st.image;


			var el = template.find('.mfp-img');
			if(el.length) {
				var img = document.createElement('img');
				img.className = 'mfp-img';
				if(item.el && item.el.find('img').length) {
					img.alt = item.el.find('img').attr('alt');
				}
				item.img = $(img).on('load.mfploader', onLoadComplete).on('error.mfploader', onLoadError);
				img.src = item.src;

				// without clone() "error" event is not firing when IMG is replaced by new IMG
				// TODO: find a way to avoid such cloning
				if(el.is('img')) {
					item.img = item.img.clone();
				}

				img = item.img[0];
				if(img.naturalWidth > 0) {
					item.hasSize = true;
				} else if(!img.width) {
					item.hasSize = false;
				}
			}

			mfp._parseMarkup(template, {
				title: _getTitle(item),
				img_replaceWith: item.img
			}, item);

			mfp.resizeImage();

			if(item.hasSize) {
				if(_imgInterval) clearInterval(_imgInterval);

				if(item.loadError) {
					template.addClass('mfp-loading');
					mfp.updateStatus('error', imgSt.tError.replace('%url%', item.src) );
				} else {
					template.removeClass('mfp-loading');
					mfp.updateStatus('ready');
				}
				return template;
			}

			mfp.updateStatus('loading');
			item.loading = true;

			if(!item.hasSize) {
				item.imgHidden = true;
				template.addClass('mfp-loading');
				mfp.findImageSize(item);
			}

			return template;
		}
	}
});

/*>>image*/

/*>>zoom*/
var hasMozTransform,
	getHasMozTransform = function() {
		if(hasMozTransform === undefined) {
			hasMozTransform = document.createElement('p').style.MozTransform !== undefined;
		}
		return hasMozTransform;
	};

$.magnificPopup.registerModule('zoom', {

	options: {
		enabled: false,
		easing: 'ease-in-out',
		duration: 300,
		opener: function(element) {
			return element.is('img') ? element : element.find('img');
		}
	},

	proto: {

		initZoom: function() {
			var zoomSt = mfp.st.zoom,
				ns = '.zoom',
				image;

			if(!zoomSt.enabled || !mfp.supportsTransition) {
				return;
			}

			var duration = zoomSt.duration,
				getElToAnimate = function(image) {
					var newImg = image.clone().removeAttr('style').removeAttr('class').addClass('mfp-animated-image'),
						transition = 'all '+(zoomSt.duration/1000)+'s ' + zoomSt.easing,
						cssObj = {
							position: 'fixed',
							zIndex: 9999,
							left: 0,
							top: 0,
							'-webkit-backface-visibility': 'hidden'
						},
						t = 'transition';

					cssObj['-webkit-'+t] = cssObj['-moz-'+t] = cssObj['-o-'+t] = cssObj[t] = transition;

					newImg.css(cssObj);
					return newImg;
				},
				showMainContent = function() {
					mfp.content.css('visibility', 'visible');
				},
				openTimeout,
				animatedImg;

			_mfpOn('BuildControls'+ns, function() {
				if(mfp._allowZoom()) {

					clearTimeout(openTimeout);
					mfp.content.css('visibility', 'hidden');

					// Basically, all code below does is clones existing image, puts in on top of the current one and animated it

					image = mfp._getItemToZoom();

					if(!image) {
						showMainContent();
						return;
					}

					animatedImg = getElToAnimate(image);

					animatedImg.css( mfp._getOffset() );

					mfp.wrap.append(animatedImg);

					openTimeout = setTimeout(function() {
						animatedImg.css( mfp._getOffset( true ) );
						openTimeout = setTimeout(function() {

							showMainContent();

							setTimeout(function() {
								animatedImg.remove();
								image = animatedImg = null;
								_mfpTrigger('ZoomAnimationEnded');
							}, 16); // avoid blink when switching images

						}, duration); // this timeout equals animation duration

					}, 16); // by adding this timeout we avoid short glitch at the beginning of animation


					// Lots of timeouts...
				}
			});
			_mfpOn(BEFORE_CLOSE_EVENT+ns, function() {
				if(mfp._allowZoom()) {

					clearTimeout(openTimeout);

					mfp.st.removalDelay = duration;

					if(!image) {
						image = mfp._getItemToZoom();
						if(!image) {
							return;
						}
						animatedImg = getElToAnimate(image);
					}

					animatedImg.css( mfp._getOffset(true) );
					mfp.wrap.append(animatedImg);
					mfp.content.css('visibility', 'hidden');

					setTimeout(function() {
						animatedImg.css( mfp._getOffset() );
					}, 16);
				}

			});

			_mfpOn(CLOSE_EVENT+ns, function() {
				if(mfp._allowZoom()) {
					showMainContent();
					if(animatedImg) {
						animatedImg.remove();
					}
					image = null;
				}
			});
		},

		_allowZoom: function() {
			return mfp.currItem.type === 'image';
		},

		_getItemToZoom: function() {
			if(mfp.currItem.hasSize) {
				return mfp.currItem.img;
			} else {
				return false;
			}
		},

		// Get element postion relative to viewport
		_getOffset: function(isLarge) {
			var el;
			if(isLarge) {
				el = mfp.currItem.img;
			} else {
				el = mfp.st.zoom.opener(mfp.currItem.el || mfp.currItem);
			}

			var offset = el.offset();
			var paddingTop = parseInt(el.css('padding-top'),10);
			var paddingBottom = parseInt(el.css('padding-bottom'),10);
			offset.top -= ( $(window).scrollTop() - paddingTop );


			/*

			Animating left + top + width/height looks glitchy in Firefox, but perfect in Chrome. And vice-versa.

			 */
			var obj = {
				width: el.width(),
				// fix Zepto height+padding issue
				height: (_isJQ ? el.innerHeight() : el[0].offsetHeight) - paddingBottom - paddingTop
			};

			// I hate to do this, but there is no another option
			if( getHasMozTransform() ) {
				obj['-moz-transform'] = obj['transform'] = 'translate(' + offset.left + 'px,' + offset.top + 'px)';
			} else {
				obj.left = offset.left;
				obj.top = offset.top;
			}
			return obj;
		}

	}
});



/*>>zoom*/

/*>>iframe*/

var IFRAME_NS = 'iframe',
	_emptyPage = '//about:blank',

	_fixIframeBugs = function(isShowing) {
		if(mfp.currTemplate[IFRAME_NS]) {
			var el = mfp.currTemplate[IFRAME_NS].find('iframe');
			if(el.length) {
				// reset src after the popup is closed to avoid "video keeps playing after popup is closed" bug
				if(!isShowing) {
					el[0].src = _emptyPage;
				}

				// IE8 black screen bug fix
				if(mfp.isIE8) {
					el.css('display', isShowing ? 'block' : 'none');
				}
			}
		}
	};

$.magnificPopup.registerModule(IFRAME_NS, {

	options: {
		markup: '<div class="mfp-iframe-scaler">'+
					'<div class="mfp-close"></div>'+
					'<iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'+
				'</div>',

		srcAction: 'iframe_src',

		// we don't care and support only one default type of URL by default
		patterns: {
			youtube: {
				index: 'youtube.com',
				id: 'v=',
				src: '//www.youtube.com/embed/%id%?autoplay=1'
			},
			vimeo: {
				index: 'vimeo.com/',
				id: '/',
				src: '//player.vimeo.com/video/%id%?autoplay=1'
			},
			gmaps: {
				index: '//maps.google.',
				src: '%id%&output=embed'
			}
		}
	},

	proto: {
		initIframe: function() {
			mfp.types.push(IFRAME_NS);

			_mfpOn('BeforeChange', function(e, prevType, newType) {
				if(prevType !== newType) {
					if(prevType === IFRAME_NS) {
						_fixIframeBugs(); // iframe if removed
					} else if(newType === IFRAME_NS) {
						_fixIframeBugs(true); // iframe is showing
					}
				}// else {
					// iframe source is switched, don't do anything
				//}
			});

			_mfpOn(CLOSE_EVENT + '.' + IFRAME_NS, function() {
				_fixIframeBugs();
			});
		},

		getIframe: function(item, template) {
			var embedSrc = item.src;
			var iframeSt = mfp.st.iframe;

			$.each(iframeSt.patterns, function() {
				if(embedSrc.indexOf( this.index ) > -1) {
					if(this.id) {
						if(typeof this.id === 'string') {
							embedSrc = embedSrc.substr(embedSrc.lastIndexOf(this.id)+this.id.length, embedSrc.length);
						} else {
							embedSrc = this.id.call( this, embedSrc );
						}
					}
					embedSrc = this.src.replace('%id%', embedSrc );
					return false; // break;
				}
			});

			var dataObj = {};
			if(iframeSt.srcAction) {
				dataObj[iframeSt.srcAction] = embedSrc;
			}
			mfp._parseMarkup(template, dataObj, item);

			mfp.updateStatus('ready');

			return template;
		}
	}
});



/*>>iframe*/

/*>>gallery*/
/**
 * Get looped index depending on number of slides
 */
var _getLoopedId = function(index) {
		var numSlides = mfp.items.length;
		if(index > numSlides - 1) {
			return index - numSlides;
		} else  if(index < 0) {
			return numSlides + index;
		}
		return index;
	},
	_replaceCurrTotal = function(text, curr, total) {
		return text.replace(/%curr%/gi, curr + 1).replace(/%total%/gi, total);
	};

$.magnificPopup.registerModule('gallery', {

	options: {
		enabled: false,
		arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
		preload: [0,2],
		navigateByImgClick: true,
		arrows: true,

		tPrev: 'Previous (Left arrow key)',
		tNext: 'Next (Right arrow key)',
		tCounter: '%curr% of %total%'
	},

	proto: {
		initGallery: function() {

			var gSt = mfp.st.gallery,
				ns = '.mfp-gallery';

			mfp.direction = true; // true - next, false - prev

			if(!gSt || !gSt.enabled ) return false;

			_wrapClasses += ' mfp-gallery';

			_mfpOn(OPEN_EVENT+ns, function() {

				if(gSt.navigateByImgClick) {
					mfp.wrap.on('click'+ns, '.mfp-img', function() {
						if(mfp.items.length > 1) {
							mfp.next();
							return false;
						}
					});
				}

				_document.on('keydown'+ns, function(e) {
					if (e.keyCode === 37) {
						mfp.prev();
					} else if (e.keyCode === 39) {
						mfp.next();
					}
				});
			});

			_mfpOn('UpdateStatus'+ns, function(e, data) {
				if(data.text) {
					data.text = _replaceCurrTotal(data.text, mfp.currItem.index, mfp.items.length);
				}
			});

			_mfpOn(MARKUP_PARSE_EVENT+ns, function(e, element, values, item) {
				var l = mfp.items.length;
				values.counter = l > 1 ? _replaceCurrTotal(gSt.tCounter, item.index, l) : '';
			});

			_mfpOn('BuildControls' + ns, function() {
				if(mfp.items.length > 1 && gSt.arrows && !mfp.arrowLeft) {
					var markup = gSt.arrowMarkup,
						arrowLeft = mfp.arrowLeft = $( markup.replace(/%title%/gi, gSt.tPrev).replace(/%dir%/gi, 'left') ).addClass(PREVENT_CLOSE_CLASS),
						arrowRight = mfp.arrowRight = $( markup.replace(/%title%/gi, gSt.tNext).replace(/%dir%/gi, 'right') ).addClass(PREVENT_CLOSE_CLASS);

					arrowLeft.click(function() {
						mfp.prev();
					});
					arrowRight.click(function() {
						mfp.next();
					});

					mfp.container.append(arrowLeft.add(arrowRight));
				}
			});

			_mfpOn(CHANGE_EVENT+ns, function() {
				if(mfp._preloadTimeout) clearTimeout(mfp._preloadTimeout);

				mfp._preloadTimeout = setTimeout(function() {
					mfp.preloadNearbyImages();
					mfp._preloadTimeout = null;
				}, 16);
			});


			_mfpOn(CLOSE_EVENT+ns, function() {
				_document.off(ns);
				mfp.wrap.off('click'+ns);
				mfp.arrowRight = mfp.arrowLeft = null;
			});

		},
		next: function() {
			mfp.direction = true;
			mfp.index = _getLoopedId(mfp.index + 1);
			mfp.updateItemHTML();
		},
		prev: function() {
			mfp.direction = false;
			mfp.index = _getLoopedId(mfp.index - 1);
			mfp.updateItemHTML();
		},
		goTo: function(newIndex) {
			mfp.direction = (newIndex >= mfp.index);
			mfp.index = newIndex;
			mfp.updateItemHTML();
		},
		preloadNearbyImages: function() {
			var p = mfp.st.gallery.preload,
				preloadBefore = Math.min(p[0], mfp.items.length),
				preloadAfter = Math.min(p[1], mfp.items.length),
				i;

			for(i = 1; i <= (mfp.direction ? preloadAfter : preloadBefore); i++) {
				mfp._preloadItem(mfp.index+i);
			}
			for(i = 1; i <= (mfp.direction ? preloadBefore : preloadAfter); i++) {
				mfp._preloadItem(mfp.index-i);
			}
		},
		_preloadItem: function(index) {
			index = _getLoopedId(index);

			if(mfp.items[index].preloaded) {
				return;
			}

			var item = mfp.items[index];
			if(!item.parsed) {
				item = mfp.parseEl( index );
			}

			_mfpTrigger('LazyLoad', item);

			if(item.type === 'image') {
				item.img = $('<img class="mfp-img" />').on('load.mfploader', function() {
					item.hasSize = true;
				}).on('error.mfploader', function() {
					item.hasSize = true;
					item.loadError = true;
					_mfpTrigger('LazyLoadError', item);
				}).attr('src', item.src);
			}


			item.preloaded = true;
		}
	}
});

/*>>gallery*/

/*>>retina*/

var RETINA_NS = 'retina';

$.magnificPopup.registerModule(RETINA_NS, {
	options: {
		replaceSrc: function(item) {
			return item.src.replace(/\.\w+$/, function(m) { return '@2x' + m; });
		},
		ratio: 1 // Function or number.  Set to 1 to disable.
	},
	proto: {
		initRetina: function() {
			if(window.devicePixelRatio > 1) {

				var st = mfp.st.retina,
					ratio = st.ratio;

				ratio = !isNaN(ratio) ? ratio : ratio();

				if(ratio > 1) {
					_mfpOn('ImageHasSize' + '.' + RETINA_NS, function(e, item) {
						item.img.css({
							'max-width': item.img[0].naturalWidth / ratio,
							'width': '100%'
						});
					});
					_mfpOn('ElementParse' + '.' + RETINA_NS, function(e, item) {
						item.src = st.replaceSrc(item, ratio);
					});
				}
			}

		}
	}
});

/*>>retina*/
 _checkInstance(); }));

/***/ }),

/***/ "./public/js/common.js":
/*!*****************************!*\
  !*** ./public/js/common.js ***!
  \*****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_imageCropper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/imageCropper */ "./public/js/components/imageCropper.js");
/* harmony import */ var _components_ckeditor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/ckeditor */ "./public/js/components/ckeditor.js");
/* harmony import */ var _methods_publish__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./methods/publish */ "./public/js/methods/publish.js");





Object(_components_ckeditor__WEBPACK_IMPORTED_MODULE_2__["default"])();

__webpack_require__(/*! ./components/floatContent */ "./public/js/components/floatContent.js");

jquery__WEBPACK_IMPORTED_MODULE_0___default()(".confirm").click(function(e) {
  if (!confirm(" ?")) e.preventDefault();
});

jquery__WEBPACK_IMPORTED_MODULE_0___default()(".image_pick").change(function() {
  Object(_components_imageCropper__WEBPACK_IMPORTED_MODULE_1__["imageCropper"])(this);
});

jquery__WEBPACK_IMPORTED_MODULE_0___default()(document).on('change', '.image_pick_multiple', function() { 
  Object(_components_imageCropper__WEBPACK_IMPORTED_MODULE_1__["multipleInit"])(this);
});

jquery__WEBPACK_IMPORTED_MODULE_0___default()(".publish_checkbox").click(function() {
  let { model, id } = this.dataset;
  let value = this.checked;
  Object(_methods_publish__WEBPACK_IMPORTED_MODULE_3__["default"])({ model, id, value });
});


/***/ }),

/***/ "./public/js/components/ckeditor.js":
/*!******************************************!*\
  !*** ./public/js/components/ckeditor.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return initCkeditors; });
/* harmony import */ var _ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ckeditor/ckeditor5-build-classic */ "./node_modules/@ckeditor/ckeditor5-build-classic/build/ckeditor.js");
/* harmony import */ var _ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0__);


function initCkeditors() {
  var cke = document.getElementsByClassName("ckeditor_item");
  [].forEach.call(cke, function(el) {
    _ckeditor_ckeditor5_build_classic__WEBPACK_IMPORTED_MODULE_0___default.a.create(el, {
		removePlugins: ["Heading", "italic"],
		toolbar: ['bold', 'link', 'bulletedList', 'numberedList', 'blockQuote' ],
    });
  });
}


/***/ }),

/***/ "./public/js/components/floatContent.js":
/*!**********************************************!*\
  !*** ./public/js/components/floatContent.js ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);


const constrBody = ".constructor_body";

jquery__WEBPACK_IMPORTED_MODULE_0___default()(".add_item").click(function() {
  const index = jquery__WEBPACK_IMPORTED_MODULE_0___default()(".constructor_item").length;
  const type = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).attr("data-type");
  jquery__WEBPACK_IMPORTED_MODULE_0___default()(constrBody).append(`<div class="constructor_item">
		<input type="hidden" name="floatContent[${index}][contentType]" value="${type}" />
		${galleryTemplate(index)}
	</div>`);
});

let galleryTemplate = (index) => {
  return `<div class="form-group form-group-image-pick">
	<label>Gallery_image</label>
	<input class="image_pick_multiple" data-id="${index}" type="file" accept="image/" multiple>
	<div class="images_box"></div>
	</div>`;
};


/***/ }),

/***/ "./public/js/components/imageCropper.js":
/*!**********************************************!*\
  !*** ./public/js/components/imageCropper.js ***!
  \**********************************************/
/*! exports provided: imageCropper, multipleInit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "imageCropper", function() { return imageCropper; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multipleInit", function() { return multipleInit; });
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loader */ "./public/js/components/loader.js");



__webpack_require__(/*! magnific-popup */ "./node_modules/magnific-popup/dist/jquery.magnific-popup.js");
__webpack_require__(/*! cropper */ "./node_modules/cropper/dist/cropper.esm.js");

const popupId = "cropperPopup";
const imgId = "cropperImage";
let $img;
let currentPicker;

/* When user is updating images the old images need to be deleted from server.
Array of images which will be deleted */
let previousImages = [];
let previousImage = null;

let galleryUpdating = false,
  galleryImageIndex,
  galleryInput,
  galleryBox;

const imageCropper = input => {
  galleryUpdating = false;

  if (input.files && input.files[0]) {
    let reader = new FileReader();

    _loader__WEBPACK_IMPORTED_MODULE_1__["default"].show();

    reader.onload = e => {
      initCropperPopup(e.target.result);
    };

    reader.readAsDataURL(input.files[0]);

    currentPicker = input;
  }
};

const initCropperPopup = imageSrc => {
  let imageTemplate = `<img id="${imgId}" src="${imageSrc}" />`;
  if (!document.getElementById(`${popupId}`)) {
    let popupTemplate = `<div id="${popupId}" class="mfp-hide">${imageTemplate}<button class="save_cropped"></button></div>`;
    let $popup = jquery__WEBPACK_IMPORTED_MODULE_0___default()(popupTemplate);
    $popup.appendTo("body");
  } else {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${popupId}`).prepend(imageTemplate);
  }

  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.magnificPopup.open({
    items: {
      src: `#${popupId}`
    },
    callbacks: {
      open: () => {
        _loader__WEBPACK_IMPORTED_MODULE_1__["default"].hide();
        $img = jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${imgId}`);
        initCropper();
      },
      close: () => {
        destroyCropper();
      }
    }
  });
};

const initCropper = () => {
  $img.cropper({
    aspectRatio: 16 / 9,
    viewMode: 2
  });
};

jquery__WEBPACK_IMPORTED_MODULE_0___default()("body").on("click", ".save_cropped", () => {
  if (previousImage && previousImage.indexOf("/temp/") !== -1) {
    previousImages.push(previousImage);
  } else if (previousImage) {
    deleteImage(previousImage);
  }
  previousImage = null;
  getImage();
});

jquery__WEBPACK_IMPORTED_MODULE_0___default()(".update_form").submit(function(e) {
  previousImages.forEach(el => {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).append(
      `<input type="hidden" name="fileForDelete[]" value="${el}" />`
    );
  });
  return true;
});

const getImage = () => {
  $img.cropper("getCroppedCanvas").toBlob(function(blob) {
    if (!galleryUpdating) {
      let formData = new FormData();
      formData.append("croppedImage", blob);
      _loader__WEBPACK_IMPORTED_MODULE_1__["default"].hide();
      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.magnificPopup.close();
      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax("/api/upload/cropped-image", {
        method: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function(data) {
          insertCroppedImage(data.fileName);
        },
        error: function(error) {
          console.log("Upload error");
        }
      });
    } else {
      uploadImage(blob, galleryImageIndex, galleryInput);
      jquery__WEBPACK_IMPORTED_MODULE_0___default.a.magnificPopup.close();
    }
  });
};

const destroyCropper = () => {
  $img.cropper("destroy");
  jquery__WEBPACK_IMPORTED_MODULE_0___default()(`#${imgId}`).remove();
  jquery__WEBPACK_IMPORTED_MODULE_0___default()(".image_pick").val("");
};

const insertCroppedImage = path => {
  let $input = jquery__WEBPACK_IMPORTED_MODULE_0___default()(currentPicker);
  let img = $input.siblings("img");

  $input.closest(".image_pick_area").addClass("active");
  $input.siblings(".delete_image").attr("data-url", path);
  $input.siblings(".hidden_image_url").val(path);
  $input.siblings(".upload_new_image").attr("data-del-url", path);
  if (!img.length) {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()(`<img src="/uploads${path}">`).insertAfter(currentPicker);
  } else {
    img.attr("src", `/uploads${path}`);
  }
};

jquery__WEBPACK_IMPORTED_MODULE_0___default()("body").on("click", ".delete_image", function(e) {
  e.preventDefault();
  let $this = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);
  
  let url =
    $this.attr("data-url") || $this.closest(".gallery_image").attr("data-url");

  let index = $this.closest(".gallery_image").attr("data-id");

  if (index !== undefined) {
    $this
      .closest(".gallery_image")
      .nextAll()
      .each(function() {
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).attr("data-id", +jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).attr("data-id") - 1);
      });
    }

  if (
    $this.closest("form").hasClass("update_form") &&
    url.indexOf("/temp/") === -1
  ) {
    previousImages.push(url);
  } else {
    deleteImage(url);
  }

  $this.closest(".image_pick_area").removeClass("active");
  $this.siblings(".hidden_image_url").val("");
  $this.siblings("img").remove();
  $this.parent(".gallery_image").remove();
  
});

jquery__WEBPACK_IMPORTED_MODULE_0___default()(".upload_new_image").click(function(e) {
  e.preventDefault();
  previousImage = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).attr("data-del-url");
  jquery__WEBPACK_IMPORTED_MODULE_0___default()(this)
    .siblings(".image_pick")
    .click();
});

/*   */
const deleteImage = url => {
  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax("/api/file/delete/", {
    method: "POST",
    data: {
      url
    },
    success: data => {
      console.log(data);
    },
    error: error => {
      console.log(error);
    }
  });
};

let asyncUploadImageCounter = 0;

const multipleInit = input => {
  galleryUpdating = false;

  asyncUploadImageCounter = 0;

  let imagesBox = jquery__WEBPACK_IMPORTED_MODULE_0___default()(input).siblings(".images_box");
  let galeryImagesLength = imagesBox.find(".gallery_image").length;

  [].forEach.call(input.files, (el, index) => {
    uploadImage(el, index + galeryImagesLength, input);
  });
};

const uploadImage = (imageData, index, input) => {
  let fd = new FormData();
  let imagesBox;
  let globalIndex = jquery__WEBPACK_IMPORTED_MODULE_0___default()(input).attr('data-id');
  if (!galleryUpdating) {
    imagesBox = jquery__WEBPACK_IMPORTED_MODULE_0___default()(input).siblings(".images_box");
  } else {
    imagesBox = galleryBox;
    fd.append(
      "url",
      imagesBox.find(`.gallery_image[data-id="${index}"]`).attr("data-url")
    );
  }

  fd.append("image", imageData);
  fd.append("index", index);

  if (!galleryUpdating) {
    imagesBox.append(`<div class="gallery_image" data-id="${index}" data-url="">
      <div class="image loading" style="background-image: url(/img/loader.svg)"></div>
      <input type="hidden" class="hidden_image_url" value="" name="floatContent[${globalIndex}][gallery][]" />
      <a class="update_image" data-url="" href="#">update_image</a>
      <a class="delete_image" data-url="" href="#">delete_image</a>
    </div>`);
  }

  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax({
    url: "/api/upload/constructor_image",
    data: fd,
    processData: false,
    contentType: false,
    type: "POST",
    success: function(data) {
      let currentImage = imagesBox.find(
        `.gallery_image[data-id="${data.index}"]`
      );
      const url = data.fileName;
      currentImage
        .find(`.image`)
        .removeClass("loading")
        .css("background-image", `url(/uploads${url})`);
      currentImage.attr("data-url", url);
      currentImage.find(".hidden_image_url").val(url);

      if (!galleryUpdating && input.files.length === ++asyncUploadImageCounter)
        jquery__WEBPACK_IMPORTED_MODULE_0___default()(input).val("");
    }
  });
};

jquery__WEBPACK_IMPORTED_MODULE_0___default()("body").on("click", ".update_image", function() {
  galleryUpdating = true;

  console.log(jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).closest(".gallery_image"));

  const imageBlock = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).closest(".gallery_image");

  let url = imageBlock.attr("data-url"),
    index = imageBlock.attr("data-id");

  console.log(url);

  galleryBox = jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).closest(".images_box");
  galleryInput = galleryBox.siblings("input");
  galleryImageIndex = index;
  initCropperPopup(`/uploads${url}`);
});




/***/ }),

/***/ "./public/js/components/loader.js":
/*!****************************************!*\
  !*** ./public/js/components/loader.js ***!
  \****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);


const loader = {
  show: () => {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()("body").append(`<div id="fixed_preloader" class="fixed-preloader">
		<img src="/img/loader.svg" />
	 </div>`);
  },
  hide: () => {
    jquery__WEBPACK_IMPORTED_MODULE_0___default()("#fixed_preloader").remove();
  }
};

/* harmony default export */ __webpack_exports__["default"] = (loader);


/***/ }),

/***/ "./public/js/methods/publish.js":
/*!**************************************!*\
  !*** ./public/js/methods/publish.js ***!
  \**************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);


const publish = ({ model, id, value }) => {
  let url = "/api/publish/";
  jquery__WEBPACK_IMPORTED_MODULE_0___default.a.ajax({
    type: "POST",
    url,
    data: {
      model,
      id,
      value
    },
    success: () => console.log("ok"),
    error: error => console.log(value)
  });
};

/* harmony default export */ __webpack_exports__["default"] = (publish);


/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0Bja2VkaXRvci9ja2VkaXRvcjUtYnVpbGQtY2xhc3NpYy9idWlsZC9ja2VkaXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3JvcHBlci9kaXN0L2Nyb3BwZXIuZXNtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9qcXVlcnkvZGlzdC9qcXVlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21hZ25pZmljLXBvcHVwL2Rpc3QvanF1ZXJ5Lm1hZ25pZmljLXBvcHVwLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL2NvbXBvbmVudHMvY2tlZGl0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL2NvbXBvbmVudHMvZmxvYXRDb250ZW50LmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9jb21wb25lbnRzL2ltYWdlQ3JvcHBlci5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvY29tcG9uZW50cy9sb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL21ldGhvZHMvcHVibGlzaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBMEMsZ0NBQWdDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0VBQXdELGtCQUFrQjtBQUMxRTtBQUNBLHlEQUFpRCxjQUFjO0FBQy9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUc7O0FBRUgsZ0NBQWdDO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLGFBQWE7QUFDNUI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsR0FBRzs7O0FBR0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsc0NBQXNDO0FBQ3RDLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1Q0FBdUM7QUFDdkMsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxnQkFBZ0IsaUJBQWlCLDJCQUEyQiw0QkFBNEIsOEJBQThCLCtCQUErQixzQ0FBc0M7O0FBRXBPO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOzs7QUFHSDtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOzs7QUFHSDtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLE9BQU8sWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxZQUFZOztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUYsb0JBQW9COztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxZQUFZO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLFNBQVM7QUFDbEI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTLFlBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFlBQVk7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsU0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBLGdCQUFnQixJQUFJOztBQUVwQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSx3Q0FBd0MsSUFBSTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLHlCQUF5QjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQixXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFFBQVE7QUFDbkIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxRQUFRLDZCQUE2QjtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCLGFBQWEsdUJBQXVCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQixhQUFhLFFBQVE7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsVUFBVTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsY0FBYztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0NBQWdDLE1BQU07QUFDdEM7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsZUFBZTs7QUFFZixTQUFTOztBQUVUO0FBQ0EsUUFBUSxpQ0FBaUM7QUFDekMsUUFBUSxvQkFBb0I7QUFDNUIsUUFBUSxzQ0FBc0M7QUFDOUMsUUFBUTtBQUNSLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhLEVBQUU7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLDREQUE0RDs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0EseUNBQXlDOztBQUV6QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQzs7QUFFMUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnRUFBZ0U7O0FBRWhFO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qzs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsUUFBUSxTQUFTO0FBQ2pCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxpREFBaUQ7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQsVUFBVSx3Q0FBd0M7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxNQUFNO0FBQ2pCLFdBQVcsTUFBTTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTs7QUFFQSxDQUFDOzs7O0FBSUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUEsUUFBUSxHQUFHO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7Ozs7QUFJQTs7QUFFQTs7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUEsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0Q7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakIsMEJBQTBCLHdCQUF3Qjs7QUFFbEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsMENBQTBDO0FBQzFDLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjs7QUFFbkI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsd0NBQXdDLHNDQUFzQztBQUM5RSxvQ0FBb0MsdUNBQXVDO0FBQzNFLG9DQUFvQyxzQ0FBc0M7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixPQUFPO0FBQ1A7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9DQUFvQztBQUNwQyxxQ0FBcUM7QUFDckMsb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7Ozs7O0FBS0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBVSxTQUFTO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsYUFBYTtBQUNwQyxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixTQUFTO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOztBQUVBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUSxnQkFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQztBQUNEOztBQUVBOztBQUVBOzs7O0FBSUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxFQUFFO0FBQ0Y7O0FBRUEsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFFBQVEsT0FBTztBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSxzQkFBc0I7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLE9BQU87QUFDZjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxnQkFBZ0I7QUFDbEI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVc7O0FBRVg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtB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LEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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R0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7OztBQUdEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0RBQStEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxPQUFPOztBQUVmO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBOztBQUVBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFdBQVcsU0FBUztBQUNwQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBLFFBQVEsT0FBTztBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnQkFBZ0I7QUFDeEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGlEQUFpRCwwQkFBMEI7QUFDM0U7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxV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OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUEsaUNBQWlDO0FBQ2pDO0FBQ0E7O0FBRUEsSUFBSTtBQUNKOztBQUVBLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLFdBQVcsU0FBUztBQUNwQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDs7O0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7O0FBRUE7O0FBRUEseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxLQUFLO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxxQ0FBcUM7O0FBRXBEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsS0FBSztBQUNMOztBQUVBLFdBQVc7QUFDWCxHQUFHO0FBQ0g7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjs7QUFFaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjs7QUFFaEIsZ0RBQWdEO0FBQ2hEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsbUJBQW1CO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNUOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakIsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkI7O0FBRTNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0M7O0FBRWxDO0FBQ0Esc0JBQXNCO0FBQ3RCLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTs7QUFFUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsdUJBQXVCO0FBQ2xDLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDs7QUFFQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscURBQXFEO0FBQ3JEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQjs7QUFFbkI7QUFDQTs7QUFFQTtBQUNBOztBQUVBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQSxjQUFjLHNEQUFzRDtBQUNwRTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBLGNBQWMsbUNBQW1DO0FBQ2pELGVBQWUsNkRBQTZEO0FBQzVFOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7O0FBRUE7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQUE7QUFDRjs7Ozs7QUFLQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7O0FDM25VRDtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDLENBQUMscUI7QUFDRCxXO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQSxxRztBQUNBLEVBQUUsUTtBQU9GLEVBQUUsYzs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQzs7QUFFakM7QUFDQSxlO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsNEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsa0JBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7OztBQUlBLDRCQUE0QixtQztBQUM1Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsaUI7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLEdBQUc7OztBQUdIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBLHNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSw0REFBNEQsRUFBRTs7QUFFOUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQSxhQUFhLElBQUk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1gsR0FBRztBQUNIO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxPQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOzs7QUFHRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxjQUFjLGtCQUFrQixvQkFBb0IsY0FBYztBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7Ozs7QUFLRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsOEJBQThCO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLDhFQUE4RTs7QUFFOUU7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixZQUFZO0FBQy9CLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGO0FBQ0EsNkJBQTZCOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxNQUFNOztBQUVOOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsTUFBTTtBQUNOOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLE1BQU07O0FBRWQsT0FBTyxZQUFZOztBQUVuQixNQUFNLE1BQU07OztBQUdaO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOzs7O0FBSUQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7Ozs7O0FDYkE7O0FBRUEsa0JBQWtCLG1CQUFtQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9wdWJsaWMvanMvY29tbW9uLmpzXCIpO1xuIiwiLyoqXG4gKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDMtMjAxOCwgQ0tTb3VyY2UgLSBGcmVkZXJpY28gS25hYmJlbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEZvciBsaWNlbnNpbmcsIHNlZSBMSUNFTlNFLm1kLlxuICovXG4oZnVuY3Rpb24oZSl7ZS5lbj1PYmplY3QuYXNzaWduKGUuZW58fHt9LHthOidDYW5ub3QgdXBsb2FkIGZpbGU6JyxiOidCbG9jayBxdW90ZScsYzonQm9sZCcsZDonSXRhbGljJyxlOidpbWFnZSB3aWRnZXQnLGY6J0VudGVyIGltYWdlIGNhcHRpb24nLGc6J0Nob29zZSBoZWFkaW5nJyxoOidIZWFkaW5nJyxpOidGdWxsIHNpemUgaW1hZ2UnLGo6J1NpZGUgaW1hZ2UnLGs6J0xlZnQgYWxpZ25lZCBpbWFnZScsbDonQ2VudGVyZWQgaW1hZ2UnLG06J1JpZ2h0IGFsaWduZWQgaW1hZ2UnLG46J1VwbG9hZCBmYWlsZWQnLG86J0luc2VydCBpbWFnZScscDonTnVtYmVyZWQgTGlzdCcscTonQnVsbGV0ZWQgTGlzdCcscjonTGluaycsczonQ2hhbmdlIGltYWdlIHRleHQgYWx0ZXJuYXRpdmUnLHQ6J1BhcmFncmFwaCcsdTonSGVhZGluZyAxJyx2OidIZWFkaW5nIDInLHc6J0hlYWRpbmcgMycseDonU2F2ZScseTonQ2FuY2VsJyx6OidMaW5rIFVSTCcsYWE6J1VubGluaycsYWI6J0VkaXQgbGluaycsYWM6J09wZW4gbGluayBpbiBuZXcgdGFiJyxhZDonVGhpcyBsaW5rIGhhcyBubyBVUkwnLGFlOidSaWNoIFRleHQgRWRpdG9yLCAlMCcsYWY6J1JpY2ggVGV4dCBFZGl0b3InLGFnOidVbmRvJyxhaDonUmVkbycsYWk6J1RleHQgYWx0ZXJuYXRpdmUnfSl9KSh3aW5kb3cuQ0tFRElUT1JfVFJBTlNMQVRJT05TfHwod2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OUz17fSkpLGZ1bmN0aW9uKGUsdCl7J29iamVjdCc9PXR5cGVvZiBleHBvcnRzJiYnb2JqZWN0Jz09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6J2Z1bmN0aW9uJz09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6J29iamVjdCc9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuQ2xhc3NpY0VkaXRvcj10KCk6ZS5DbGFzc2ljRWRpdG9yPXQoKX0oJ3VuZGVmaW5lZCc9PXR5cGVvZiBzZWxmP3RoaXM6c2VsZixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiB0KG4pe2lmKG9bbl0pcmV0dXJuIG9bbl0uZXhwb3J0czt2YXIgaT1vW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtuXS5jYWxsKGkuZXhwb3J0cyxpLGkuZXhwb3J0cyx0KSxpLmw9ITAsaS5leHBvcnRzfXZhciBvPXt9O3JldHVybiB0Lm09ZSx0LmM9byx0LmQ9ZnVuY3Rpb24oZSxvLG4pe3QubyhlLG8pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxvLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6bn0pfSx0Lm49ZnVuY3Rpb24oZSl7dmFyIG89ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGVbJ2RlZmF1bHQnXX06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHQuZChvLCdhJyxvKSxvfSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD0nJyx0KHQucz02KX0oW2Z1bmN0aW9uKGUsdCxvKXtmdW5jdGlvbiBuKGUsdCl7Zm9yKHZhciBvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciBuPWVbb10saT1nW24uaWRdO2lmKGkpe2kucmVmcysrO2Zvcih2YXIgcj0wO3I8aS5wYXJ0cy5sZW5ndGg7cisrKWkucGFydHNbcl0obi5wYXJ0c1tyXSk7Zm9yKDtyPG4ucGFydHMubGVuZ3RoO3IrKylpLnBhcnRzLnB1c2goYyhuLnBhcnRzW3JdLHQpKX1lbHNle2Zvcih2YXIgYT1bXSxyPTA7cjxuLnBhcnRzLmxlbmd0aDtyKyspYS5wdXNoKGMobi5wYXJ0c1tyXSx0KSk7Z1tuLmlkXT17aWQ6bi5pZCxyZWZzOjEscGFydHM6YX19fX1mdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBvPVtdLG49e30scj0wO3I8ZS5sZW5ndGg7cisrKXt2YXIgaT1lW3JdLGE9dC5iYXNlP2lbMF0rdC5iYXNlOmlbMF0scz1pWzFdLGw9aVsyXSxkPWlbM10sYz17Y3NzOnMsbWVkaWE6bCxzb3VyY2VNYXA6ZH07blthXT9uW2FdLnBhcnRzLnB1c2goYyk6by5wdXNoKG5bYV09e2lkOmEscGFydHM6W2NdfSl9cmV0dXJuIG99ZnVuY3Rpb24gcihlLHQpe3ZhciBvPWIoZS5pbnNlcnRJbnRvKTtpZighbyl0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkblxcJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlIFxcJ2luc2VydEludG9cXCcgcGFyYW1ldGVyIGlzIGludmFsaWQuJyk7dmFyIG49d1t3Lmxlbmd0aC0xXTtpZigndG9wJz09PWUuaW5zZXJ0QXQpbj9uLm5leHRTaWJsaW5nP28uaW5zZXJ0QmVmb3JlKHQsbi5uZXh0U2libGluZyk6by5hcHBlbmRDaGlsZCh0KTpvLmluc2VydEJlZm9yZSh0LG8uZmlyc3RDaGlsZCksdy5wdXNoKHQpO2Vsc2UgaWYoJ2JvdHRvbSc9PT1lLmluc2VydEF0KW8uYXBwZW5kQ2hpbGQodCk7ZWxzZSBpZignb2JqZWN0Jz09dHlwZW9mIGUuaW5zZXJ0QXQmJmUuaW5zZXJ0QXQuYmVmb3JlKXt2YXIgaT1iKGUuaW5zZXJ0SW50bysnICcrZS5pbnNlcnRBdC5iZWZvcmUpO28uaW5zZXJ0QmVmb3JlKHQsaSl9ZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1tTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciBcXCdpbnNlcnRBdFxcJyAoXFwnb3B0aW9ucy5pbnNlcnRBdFxcJykgZm91bmQuXFxuIE11c3QgYmUgXFwndG9wXFwnLCBcXCdib3R0b21cXCcsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcbicpfWZ1bmN0aW9uIGEoZSl7aWYobnVsbD09PWUucGFyZW50Tm9kZSlyZXR1cm4hMTtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSk7dmFyIHQ9dy5pbmRleE9mKGUpOzA8PXQmJncuc3BsaWNlKHQsMSl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO3JldHVybiBlLmF0dHJzLnR5cGU9J3RleHQvY3NzJyxkKHQsZS5hdHRycykscihlLHQpLHR9ZnVuY3Rpb24gbChlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7cmV0dXJuIGUuYXR0cnMudHlwZT0ndGV4dC9jc3MnLGUuYXR0cnMucmVsPSdzdHlsZXNoZWV0JyxkKHQsZS5hdHRycykscihlLHQpLHR9ZnVuY3Rpb24gZChlLHQpe09iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obyl7ZS5zZXRBdHRyaWJ1dGUobyx0W29dKX0pfWZ1bmN0aW9uIGMoZSx0KXt2YXIgbyxuLGkscjtpZih0LnRyYW5zZm9ybSYmZS5jc3MpaWYocj10LnRyYW5zZm9ybShlLmNzcykscillLmNzcz1yO2Vsc2UgcmV0dXJuIGZ1bmN0aW9uKCl7fTtpZih0LnNpbmdsZXRvbil7dmFyIGQ9XysrO289a3x8KGs9cyh0KSksbj11LmJpbmQobnVsbCxvLGQsITEpLGk9dS5iaW5kKG51bGwsbyxkLCEwKX1lbHNlIGUuc291cmNlTWFwJiYnZnVuY3Rpb24nPT10eXBlb2YgVVJMJiYnZnVuY3Rpb24nPT10eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCYmJ2Z1bmN0aW9uJz09dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwmJidmdW5jdGlvbic9PXR5cGVvZiBCbG9iJiYnZnVuY3Rpb24nPT10eXBlb2YgYnRvYT8obz1sKHQpLG49cC5iaW5kKG51bGwsbyx0KSxpPWZ1bmN0aW9uKCl7YShvKSxvLmhyZWYmJlVSTC5yZXZva2VPYmplY3RVUkwoby5ocmVmKX0pOihvPXModCksbj1tLmJpbmQobnVsbCxvKSxpPWZ1bmN0aW9uKCl7YShvKX0pO3JldHVybiBuKGUpLGZ1bmN0aW9uKHQpe2lmKHQpe2lmKHQuY3NzPT09ZS5jc3MmJnQubWVkaWE9PT1lLm1lZGlhJiZ0LnNvdXJjZU1hcD09PWUuc291cmNlTWFwKXJldHVybjtuKGU9dCl9ZWxzZSBpKCl9fWZ1bmN0aW9uIHUoZSx0LG8sbil7dmFyIGk9bz8nJzpuLmNzcztpZihlLnN0eWxlU2hlZXQpZS5zdHlsZVNoZWV0LmNzc1RleHQ9eSh0LGkpO2Vsc2V7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaSksYT1lLmNoaWxkTm9kZXM7YVt0XSYmZS5yZW1vdmVDaGlsZChhW3RdKSxhLmxlbmd0aD9lLmluc2VydEJlZm9yZShyLGFbdF0pOmUuYXBwZW5kQ2hpbGQocil9fWZ1bmN0aW9uIG0oZSx0KXt2YXIgbz10LmNzcyxuPXQubWVkaWE7aWYobiYmZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJyxuKSxlLnN0eWxlU2hlZXQpZS5zdHlsZVNoZWV0LmNzc1RleHQ9bztlbHNle2Zvcig7ZS5maXJzdENoaWxkOyllLnJlbW92ZUNoaWxkKGUuZmlyc3RDaGlsZCk7ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvKSl9fWZ1bmN0aW9uIHAoZSx0LG8pe3ZhciBuPW8uY3NzLGk9by5zb3VyY2VNYXAscj10LmNvbnZlcnRUb0Fic29sdXRlVXJscz09PXZvaWQgMCYmaTsodC5jb252ZXJ0VG9BYnNvbHV0ZVVybHN8fHIpJiYobj12KG4pKSxpJiYobis9J1xcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsJytidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShpKSkpKSsnICovJyk7dmFyIGE9bmV3IEJsb2IoW25dLHt0eXBlOid0ZXh0L2Nzcyd9KSxzPWUuaHJlZjtlLmhyZWY9VVJMLmNyZWF0ZU9iamVjdFVSTChhKSxzJiZVUkwucmV2b2tlT2JqZWN0VVJMKHMpfXZhciBnPXt9LGY9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuJ3VuZGVmaW5lZCc9PXR5cGVvZiB0JiYodD1lLmFwcGx5KHRoaXMsYXJndW1lbnRzKSksdH19KGZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdyYmZG9jdW1lbnQmJmRvY3VtZW50LmFsbCYmIXdpbmRvdy5hdG9ifSksaD1mdW5jdGlvbihlKXtyZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKX0sYj1mdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBmdW5jdGlvbih0KXtpZignZnVuY3Rpb24nPT10eXBlb2YgdClyZXR1cm4gdCgpO2lmKCd1bmRlZmluZWQnPT10eXBlb2YgZVt0XSl7dmFyIG89aC5jYWxsKHRoaXMsdCk7aWYod2luZG93LkhUTUxJRnJhbWVFbGVtZW50JiZvIGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KXRyeXtvPW8uY29udGVudERvY3VtZW50LmhlYWR9Y2F0Y2godCl7bz1udWxsfWVbdF09b31yZXR1cm4gZVt0XX19KCksaz1udWxsLF89MCx3PVtdLHY9bygxMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7aWYoJ3VuZGVmaW5lZCchPXR5cGVvZiBERUJVRyYmREVCVUcmJidvYmplY3QnIT10eXBlb2YgZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKCdUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnQnKTt0PXR8fHt9LHQuYXR0cnM9J29iamVjdCc9PXR5cGVvZiB0LmF0dHJzP3QuYXR0cnM6e30sdC5zaW5nbGV0b258fCdib29sZWFuJz09dHlwZW9mIHQuc2luZ2xldG9ufHwodC5zaW5nbGV0b249ZigpKSx0Lmluc2VydEludG98fCh0Lmluc2VydEludG89J2hlYWQnKSx0Lmluc2VydEF0fHwodC5pbnNlcnRBdD0nYm90dG9tJyk7dmFyIG89aShlLHQpO3JldHVybiBuKG8sdCksZnVuY3Rpb24oZSl7Zm9yKHZhciByPVtdLGE9MDthPG8ubGVuZ3RoO2ErKyl7dmFyIHM9b1thXSxsPWdbcy5pZF07bC5yZWZzLS0sci5wdXNoKGwpfWlmKGUpe3ZhciBkPWkoZSx0KTtuKGQsdCl9Zm9yKHZhciBhPTAsbDthPHIubGVuZ3RoO2ErKylpZihsPXJbYV0sMD09PWwucmVmcyl7Zm9yKHZhciBjPTA7YzxsLnBhcnRzLmxlbmd0aDtjKyspbC5wYXJ0c1tjXSgpO2RlbGV0ZSBnW2wuaWRdfX19O3ZhciB5PWZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIGZ1bmN0aW9uKHQsbyl7cmV0dXJuIGVbdF09byxlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKX19KCl9LGZ1bmN0aW9uKGUsdCxvKXsndXNlIHN0cmljdCc7KGZ1bmN0aW9uKGUsbil7dmFyIGk9byg4KSxyPXtmdW5jdGlvbjohMCxvYmplY3Q6ITB9LGE9clt0eXBlb2YgZXhwb3J0c10mJmV4cG9ydHMmJiFleHBvcnRzLm5vZGVUeXBlP2V4cG9ydHM6dm9pZCAwLHM9clt0eXBlb2YgZV0mJmUmJiFlLm5vZGVUeXBlP2U6dm9pZCAwLGw9T2JqZWN0KGkuYSkoYSYmcyYmJ29iamVjdCc9PXR5cGVvZiBuJiZuKSxkPU9iamVjdChpLmEpKHJbdHlwZW9mIHNlbGZdJiZzZWxmKSxjPU9iamVjdChpLmEpKHJbdHlwZW9mIHdpbmRvd10mJndpbmRvdyksdT1PYmplY3QoaS5hKShyW3R5cGVvZiB0aGlzXSYmdGhpcyksbT1sfHxjIT09KHUmJnUud2luZG93KSYmY3x8ZHx8dXx8RnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTt0LmE9bX0pLmNhbGwodCxvKDIpKGUpLG8oNykpfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoIWUud2VicGFja1BvbHlmaWxsKXt2YXIgdD1PYmplY3QuY3JlYXRlKGUpO3QuY2hpbGRyZW58fCh0LmNoaWxkcmVuPVtdKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwnbG9hZGVkJyx7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5sfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCdpZCcse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHQuaX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwnZXhwb3J0cycse2VudW1lcmFibGU6ITB9KSx0LndlYnBhY2tQb2x5ZmlsbD0xfXJldHVybiB0fX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk02Ljk3MiAxNi42MTVhLjk5Ny45OTcgMCAwIDEtLjc0NC0uMjkybC00LjU5Ni00LjU5NmExIDEgMCAxIDEgMS40MTQtMS40MTRsMy45MjYgMy45MjYgOS45MzctOS45MzdhMSAxIDAgMCAxIDEuNDE0IDEuNDE1TDcuNzE3IDE2LjMyM2EuOTk3Ljk5NyAwIDAgMS0uNzQ1LjI5MnpcIiBmaWxsPVwiIzAwMFwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+J30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMS41OTEgMTAuMTc3bDQuMjQzIDQuMjQyYTEgMSAwIDAgMS0xLjQxNSAxLjQxNWwtNC4yNDItNC4yNDMtNC4yNDMgNC4yNDNhMSAxIDAgMCAxLTEuNDE0LTEuNDE1bDQuMjQzLTQuMjQyTDQuNTIgNS45MzRBMSAxIDAgMCAxIDUuOTM0IDQuNTJsNC4yNDMgNC4yNDMgNC4yNDItNC4yNDNhMSAxIDAgMSAxIDEuNDE1IDEuNDE0bC00LjI0MyA0LjI0M3pcIiBmaWxsPVwiIzAwMFwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oNjEpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSx0LG8peyd1c2Ugc3RyaWN0JztmdW5jdGlvbiBuKGUpe2NvbnN0IHQ9ZS5tYXRjaCgvXihbXjpdKyk6Lyk7cmV0dXJuIHQ/ZStgIFJlYWQgbW9yZTogJHtYYX0jZXJyb3ItJHt0WzFdfVxcbmA6ZX1mdW5jdGlvbiBpKCl7bGV0IGU9J2UnO2ZvcihsZXQgdD0wOzg+dDt0KyspZSs9emEoNjU1MzYqKDErTWF0aC5yYW5kb20oKSkpLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7cmV0dXJuIGV9ZnVuY3Rpb24gcihlLHQpe3JldHVybiBlW2lzXSYmZVtpc11bdF0/ZVtpc11bdF0uZW1pdHRlcjpudWxsfWZ1bmN0aW9uIGEoZSx0KXtlW3JzXXx8KGVbcnNdPXR8fGkoKSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZVtyc119ZnVuY3Rpb24gbChlKXtyZXR1cm4gZS5fZXZlbnRzfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwnX2V2ZW50cycse3ZhbHVlOnt9fSksZS5fZXZlbnRzfWZ1bmN0aW9uIGQoKXtyZXR1cm57Y2FsbGJhY2tzOltdLGNoaWxkRXZlbnRzOltdfX1mdW5jdGlvbiBjKGUsdCl7Y29uc3Qgbz1sKGUpO2lmKG9bdF0pcmV0dXJuO2xldCBuPXQsaT1udWxsO2NvbnN0IHI9W107Zm9yKDsnJyE9PW4mJiFvW25dOylvW25dPWQoKSxyLnB1c2gob1tuXSksaSYmb1tuXS5jaGlsZEV2ZW50cy5wdXNoKGkpLGk9bixuPW4uc3Vic3RyKDAsbi5sYXN0SW5kZXhPZignOicpKTtpZignJyE9PW4pe2Zvcihjb25zdCBlIG9mIHIpZS5jYWxsYmFja3M9b1tuXS5jYWxsYmFja3Muc2xpY2UoKTtvW25dLmNoaWxkRXZlbnRzLnB1c2goaSl9fWZ1bmN0aW9uIHUoZSx0KXtjb25zdCBvPWwoZSlbdF07aWYoIW8pcmV0dXJuW107bGV0IG49W28uY2FsbGJhY2tzXTtmb3IobGV0IHI9MDtyPG8uY2hpbGRFdmVudHMubGVuZ3RoO3IrKyl7Y29uc3QgdD11KGUsby5jaGlsZEV2ZW50c1tyXSk7bj1uLmNvbmNhdCh0KX1yZXR1cm4gbn1mdW5jdGlvbiBtKGUsdCl7bGV0IG87cmV0dXJuIGUuX2V2ZW50cyYmKG89ZS5fZXZlbnRzW3RdKSYmby5jYWxsYmFja3MubGVuZ3RoP28uY2FsbGJhY2tzOi0xPHQuaW5kZXhPZignOicpP20oZSx0LnN1YnN0cigwLHQubGFzdEluZGV4T2YoJzonKSkpOm51bGx9ZnVuY3Rpb24gcChlLHQsbyl7Zm9yKGxldFtuLGldb2YgZSl7aT8nZnVuY3Rpb24nPT10eXBlb2YgaSYmKGk9aSh0Lm5hbWUpKTppPXQubmFtZTtjb25zdCBlPW5ldyB0cyh0LnNvdXJjZSxpKTtlLnBhdGg9Wy4uLnQucGF0aF0sbi5maXJlKGUsLi4ubyl9fWZ1bmN0aW9uIGcoZSx0LG8pe2NvbnN0IG49dShlLHQpO2Zvcihjb25zdCByIG9mIG4pZm9yKGxldCBlPTA7ZTxyLmxlbmd0aDtlKyspcltlXS5jYWxsYmFjaz09byYmKHIuc3BsaWNlKGUsMSksZS0tKX1mdW5jdGlvbiBmKGUsLi4udCl7dC5mb3JFYWNoKCh0KT0+e09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKS5mb3JFYWNoKChvKT0+e2lmKCEobyBpbiBlLnByb3RvdHlwZSkpe2NvbnN0IG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG8pO24uZW51bWVyYWJsZT0hMSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsbyxuKX19KX0pfWZ1bmN0aW9uIGgoZSl7dmFyIHQ9LTEsbz1lP2UubGVuZ3RoOjA7Zm9yKHRoaXMuY2xlYXIoKTsrK3Q8bzspe3ZhciBuPWVbdF07dGhpcy5zZXQoblswXSxuWzFdKX19ZnVuY3Rpb24gYihlKXt2YXIgdD0tMSxvPWU/ZS5sZW5ndGg6MDtmb3IodGhpcy5jbGVhcigpOysrdDxvOyl7dmFyIG49ZVt0XTt0aGlzLnNldChuWzBdLG5bMV0pfX1mdW5jdGlvbiBrKGUpe3ZhciB0PS0xLG89ZT9lLmxlbmd0aDowO2Zvcih0aGlzLmNsZWFyKCk7Kyt0PG87KXt2YXIgbj1lW3RdO3RoaXMuc2V0KG5bMF0sblsxXSl9fWZ1bmN0aW9uIF8oZSl7dGhpcy5fX2RhdGFfXz1uZXcgbXMoZSl9ZnVuY3Rpb24gdyhlLHQsbyl7dmFyIG49ZVt0XTtXcy5jYWxsKGUsdCkmJmxzKG4sbykmJihvIT09dm9pZCAwfHx0IGluIGUpfHwoZVt0XT1vKX1mdW5jdGlvbiB2KGUsdCl7cmV0dXJuIEdzLmNhbGwoZSx0KXx8J29iamVjdCc9PXR5cGVvZiBlJiZ0IGluIGUmJm51bGw9PT1xYShlKX1mdW5jdGlvbiB5KGUpe3JldHVybiB5bChPYmplY3QoZSkpfWZ1bmN0aW9uIHgoZSl7cmV0dXJuIHFsLmNhbGwoZSl9ZnVuY3Rpb24gQyhlLHQsbyxuLGkscixhKXt2YXIgcztpZihuJiYocz1yP24oZSxpLHIsYSk6bihlKSksdm9pZCAwIT09cylyZXR1cm4gcztpZighcHMoZSkpcmV0dXJuIGU7dmFyIGw9ZGwoZSk7aWYoIWwpe3ZhciBkPSRsKGUpLGM9ZD09eGR8fGQ9PUNkO2lmKE9iamVjdCh2ZC5hKShlKSlyZXR1cm4gd2woZSx0KTtpZihkPT1BZHx8ZD09eWR8fGMmJiFyKXtpZihXYShlKSlyZXR1cm4gcj9lOnt9O2lmKHM9d2QoYz97fTplKSwhdClyZXR1cm4gQ2woZSxfbChzLGUpKX1lbHNle2lmKCFUZFtkXSlyZXR1cm4gcj9lOnt9O3M9YmQoZSxkLEMsdCl9fWVsc2UgaWYocz1ZbChlKSwhdClyZXR1cm4gdmwoZSxzKTthfHwoYT1uZXcgenMpO3ZhciB1PWEuZ2V0KGUpO2lmKHUpcmV0dXJuIHU7aWYoYS5zZXQoZSxzKSwhbCl2YXIgbT1vP1BsKGUpOmtsKGUpO3JldHVybiBqcyhtfHxlLGZ1bmN0aW9uKGkscil7bSYmKHI9aSxpPWVbcl0pLFVzKHMscixDKGksdCxvLG4scixlLGEpKX0pLHN9ZnVuY3Rpb24gQShlLHQpe2NvbnN0IG89TGEoZS5sZW5ndGgsdC5sZW5ndGgpO2ZvcihsZXQgbj0wO248bztuKyspaWYoZVtuXSE9dFtuXSlyZXR1cm4gbjtyZXR1cm4gZS5sZW5ndGg9PXQubGVuZ3RoPydzYW1lJzplLmxlbmd0aDx0Lmxlbmd0aD8ncHJlZml4JzonZXh0ZW5zaW9uJ31mdW5jdGlvbiBUKGUpe2NvbnN0IHQ9bmV3IE1hcDtmb3IoY29uc3QgbyBpbiBlKXQuc2V0KG8sZVtvXSk7cmV0dXJuIHR9ZnVuY3Rpb24gUChlKXtyZXR1cm4hIShlJiZlW1N5bWJvbC5pdGVyYXRvcl0pfWZ1bmN0aW9uIEUoZSx0KXtpZignZnVuY3Rpb24nPT10eXBlb2YgdClyZXR1cm4gdChlKTtjb25zdCBvPXt9O3JldHVybiB0Lm5hbWUmJihvLm5hbWU9Uyh0Lm5hbWUsZS5uYW1lKSwhby5uYW1lKT9udWxsOnQuYXR0cmlidXRlcyYmKG8uYXR0cmlidXRlcz1PKHQuYXR0cmlidXRlcyxlKSwhby5hdHRyaWJ1dGVzKT9udWxsOiEodC5jbGFzc2VzJiYoby5jbGFzc2VzPVIodC5jbGFzc2VzLGUpLCFvLmNsYXNzZXMpKSYmISh0LnN0eWxlcyYmKG8uc3R5bGVzPUkodC5zdHlsZXMsZSksIW8uc3R5bGVzKSkmJm99ZnVuY3Rpb24gUyhlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgUmVnRXhwP2UudGVzdCh0KTplPT09dH1mdW5jdGlvbiBPKGUsdCl7Y29uc3Qgbz1bXTtmb3IoY29uc3QgbiBpbiBlKXtjb25zdCBpPWVbbl07aWYodC5oYXNBdHRyaWJ1dGUobikpe2NvbnN0IGU9dC5nZXRBdHRyaWJ1dGUobik7aWYoITA9PT1pKW8ucHVzaChuKTtlbHNlIGlmKGkgaW5zdGFuY2VvZiBSZWdFeHApe2lmKGkudGVzdChlKSlvLnB1c2gobik7ZWxzZSByZXR1cm4gbnVsbDt9ZWxzZSBpZihlPT09aSlvLnB1c2gobik7ZWxzZSByZXR1cm4gbnVsbH1lbHNlIHJldHVybiBudWxsfXJldHVybiBvfWZ1bmN0aW9uIFIoZSx0KXtjb25zdCBvPVtdO2Zvcihjb25zdCBuIG9mIGUpaWYobiBpbnN0YW5jZW9mIFJlZ0V4cCl7Y29uc3QgZT10LmdldENsYXNzTmFtZXMoKTtmb3IoY29uc3QgdCBvZiBlKW4udGVzdCh0KSYmby5wdXNoKHQpO2lmKDA9PT1vLmxlbmd0aClyZXR1cm4gbnVsbH1lbHNlIGlmKHQuaGFzQ2xhc3Mobikpby5wdXNoKG4pO2Vsc2UgcmV0dXJuIG51bGw7cmV0dXJuIG99ZnVuY3Rpb24gSShlLHQpe2NvbnN0IG89W107Zm9yKGNvbnN0IG4gaW4gZSl7Y29uc3QgaT1lW25dO2lmKHQuaGFzU3R5bGUobikpe2NvbnN0IGU9dC5nZXRTdHlsZShuKTtpZihpIGluc3RhbmNlb2YgUmVnRXhwKXtpZihpLnRlc3QoZSkpby5wdXNoKG4pO2Vsc2UgcmV0dXJuIG51bGw7fWVsc2UgaWYoZT09PWkpby5wdXNoKG4pO2Vsc2UgcmV0dXJuIG51bGx9ZWxzZSByZXR1cm4gbnVsbH1yZXR1cm4gb31mdW5jdGlvbiBWKGUpe2U9UWEoZSk/VChlKTpuZXcgTWFwKGUpO2Zvcihjb25zdFt0LG9db2YgZSludWxsPT09bz9lLmRlbGV0ZSh0KTonc3RyaW5nJyE9dHlwZW9mIG8mJmUuc2V0KHQsbysnJyk7cmV0dXJuIGV9ZnVuY3Rpb24gRihlLHQpe2xldCBvPW51bGwsbj0wLHI9MCxhPW51bGw7aWYoZS5jbGVhcigpLCcnIT09dCl7JzsnIT10LmNoYXJBdCh0Lmxlbmd0aC0xKSYmKHQrPSc7Jyk7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspe2NvbnN0IGk9dC5jaGFyQXQocyk7aWYobnVsbD09PW8pc3dpdGNoKGkpe2Nhc2UnOic6YXx8KGE9dC5zdWJzdHIobixzLW4pLHI9cysxKTticmVhaztjYXNlJ1wiJzpjYXNlJ1xcJyc6bz1pO2JyZWFrO2Nhc2UnOyc6Y29uc3QgbD10LnN1YnN0cihyLHMtcik7YSYmZS5zZXQoYS50cmltKCksbC50cmltKCkpLGE9bnVsbCxuPXMrMTt9ZWxzZSBpPT09byYmKG89bnVsbCl9fX1mdW5jdGlvbiBOKGUsdCl7Y29uc3Qgbz10LnNwbGl0KC9cXHMrLyk7ZS5jbGVhcigpLG8uZm9yRWFjaCgodCk9PmUuYWRkKHQpKX1mdW5jdGlvbiBNKGUpe3JldHVybidzdHJpbmcnPT10eXBlb2YgZT9bbmV3IE9kKGUpXTooUChlKXx8KGU9W2VdKSxBcnJheS5mcm9tKGUpLm1hcCgoZSk9PidzdHJpbmcnPT10eXBlb2YgZT9uZXcgT2QoZSk6ZSBpbnN0YW5jZW9mIFJkP25ldyBPZChlLmRhdGEpOmUpKX1mdW5jdGlvbiBEKCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5nZXRDaGlsZHJlbigpKWlmKCFlLmlzKCd1aUVsZW1lbnQnKSlyZXR1cm4gbnVsbDtyZXR1cm4gdGhpcy5jaGlsZENvdW50fWZ1bmN0aW9uIEIoZSx0LG8pe2lmKCFwcyhvKSlyZXR1cm4hMTt2YXIgbj10eXBlb2YgdDtyZXR1cm4hKCdudW1iZXInPT1uPyEodGwobykmJmZsKHQsby5sZW5ndGgpKTohKCdzdHJpbmcnPT1uJiZ0IGluIG8pKSYmbHMob1t0XSxlKX1mdW5jdGlvbiBMKGUpe2U9bnVsbD09ZT9lOk9iamVjdChlKTt2YXIgdD1bXTtmb3IodmFyIG8gaW4gZSl0LnB1c2gobyk7cmV0dXJuIHR9ZnVuY3Rpb24geihlKXtwYyBpbiBlfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscGMse3ZhbHVlOm5ldyBNYXB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxnYyx7dmFsdWU6bmV3IE1hcH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGZjLHt2YWx1ZTpuZXcgTWFwfSkpfWZ1bmN0aW9uIGooLi4uZSl7Y29uc3QgdD1IKC4uLmUpLG89QXJyYXkuZnJvbSh0aGlzLl9iaW5kaW5ncy5rZXlzKCkpLG49by5sZW5ndGg7aWYoIXQuY2FsbGJhY2smJjE8dC50by5sZW5ndGgpdGhyb3cgbmV3IFphKCdvYnNlcnZhYmxlLWJpbmQtdG8tbm8tY2FsbGJhY2s6IEJpbmRpbmcgbXVsdGlwbGUgb2JzZXJ2YWJsZXMgb25seSBwb3NzaWJsZSB3aXRoIGNhbGxiYWNrLicpO2lmKDE8biYmdC5jYWxsYmFjayl0aHJvdyBuZXcgWmEoJ29ic2VydmFibGUtYmluZC10by1leHRyYS1jYWxsYmFjazogQ2Fubm90IGJpbmQgbXVsdGlwbGUgcHJvcGVydGllcyBhbmQgdXNlIGEgY2FsbGJhY2sgaW4gb25lIGJpbmRpbmcuJyk7dC50by5mb3JFYWNoKChlKT0+e2lmKGUucHJvcGVydGllcy5sZW5ndGgmJmUucHJvcGVydGllcy5sZW5ndGghPT1uKXRocm93IG5ldyBaYSgnb2JzZXJ2YWJsZS1iaW5kLXRvLXByb3BlcnRpZXMtbGVuZ3RoOiBUaGUgbnVtYmVyIG9mIHByb3BlcnRpZXMgbXVzdCBtYXRjaC4nKTtlLnByb3BlcnRpZXMubGVuZ3RofHwoZS5wcm9wZXJ0aWVzPXRoaXMuX2JpbmRQcm9wZXJ0aWVzKX0pLHRoaXMuX3RvPXQudG8sdC5jYWxsYmFjayYmKHRoaXMuX2JpbmRpbmdzLmdldChvWzBdKS5jYWxsYmFjaz10LmNhbGxiYWNrKSxKKHRoaXMuX29ic2VydmFibGUsdGhpcy5fdG8pLEcodGhpcyksdGhpcy5fYmluZFByb3BlcnRpZXMuZm9yRWFjaCgoZSk9PnskKHRoaXMuX29ic2VydmFibGUsZSl9KX1mdW5jdGlvbiBxKGUsdCxvKXtpZigxPHRoaXMuX2JpbmRpbmdzLnNpemUpdGhyb3cgbmV3IFphKCdvYnNlcnZhYmxlLWJpbmQtdG8tbWFueS1ub3Qtb25lLWJpbmRpbmc6IENhbm5vdCBiaW5kIG11bHRpcGxlIHByb3BlcnRpZXMgd2l0aCB0b01hbnkoKS4nKTt0aGlzLnRvKC4uLlcoZSx0KSxvKX1mdW5jdGlvbiBXKGUsdCl7Y29uc3Qgbz1lLm1hcCgoZSk9PltlLHRdKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSxvKX1mdW5jdGlvbiBVKGUpe3JldHVybiBlLmV2ZXJ5KChlKT0+J3N0cmluZyc9PXR5cGVvZiBlKX1mdW5jdGlvbiBIKC4uLmUpe2lmKCFlLmxlbmd0aCl0aHJvdyBuZXcgWmEoJ29ic2VydmFibGUtYmluZC10by1wYXJzZS1lcnJvcjogSW52YWxpZCBhcmd1bWVudCBzeW50YXggaW4gYHRvKClgLicpO2NvbnN0IHQ9e3RvOltdfTtsZXQgbztyZXR1cm4nZnVuY3Rpb24nPT10eXBlb2YgZVtlLmxlbmd0aC0xXSYmKHQuY2FsbGJhY2s9ZS5wb3AoKSksZS5mb3JFYWNoKChlKT0+e2lmKCdzdHJpbmcnPT10eXBlb2YgZSlvLnByb3BlcnRpZXMucHVzaChlKTtlbHNlIGlmKCdvYmplY3QnPT10eXBlb2YgZSlvPXtvYnNlcnZhYmxlOmUscHJvcGVydGllczpbXX0sdC50by5wdXNoKG8pO2Vsc2UgdGhyb3cgbmV3IFphKCdvYnNlcnZhYmxlLWJpbmQtdG8tcGFyc2UtZXJyb3I6IEludmFsaWQgYXJndW1lbnQgc3ludGF4IGluIGB0bygpYC4nKX0pLHR9ZnVuY3Rpb24gSyhlLHQsbyxuKXtjb25zdCBpPWVbZ2NdLHI9aS5nZXQobyksYT1yfHx7fTthW25dfHwoYVtuXT1uZXcgU2V0KSxhW25dLmFkZCh0KSxyfHxpLnNldChvLGEpfWZ1bmN0aW9uIEcoZSl7bGV0IHQ7ZS5fYmluZGluZ3MuZm9yRWFjaCgobyxuKT0+e2UuX3RvLmZvckVhY2goKGkpPT57dD1pLnByb3BlcnRpZXNbby5jYWxsYmFjaz8wOmUuX2JpbmRQcm9wZXJ0aWVzLmluZGV4T2YobildLG8udG8ucHVzaChbaS5vYnNlcnZhYmxlLHRdKSxLKGUuX29ic2VydmFibGUsbyxpLm9ic2VydmFibGUsdCl9KX0pfWZ1bmN0aW9uICQoZSx0KXtjb25zdCBvPWVbZmNdLG49by5nZXQodCk7bGV0IGk7bi5jYWxsYmFjaz9pPW4uY2FsbGJhY2suYXBwbHkoZSxuLnRvLm1hcCgoZSk9PmVbMF1bZVsxXV0pKTooaT1uLnRvWzBdLGk9aVswXVtpWzFdXSksZS5oYXNPd25Qcm9wZXJ0eSh0KT9lW3RdPWk6ZS5zZXQodCxpKX1mdW5jdGlvbiBKKGUsdCl7dC5mb3JFYWNoKCh0KT0+e2NvbnN0IG89ZVtnY107bGV0IG47by5nZXQodC5vYnNlcnZhYmxlKXx8ZS5saXN0ZW5Ubyh0Lm9ic2VydmFibGUsJ2NoYW5nZScsKGkscik9PntuPW8uZ2V0KHQub2JzZXJ2YWJsZSlbcl0sbiYmbi5mb3JFYWNoKCh0KT0+eyQoZSx0LnByb3BlcnR5KX0pfSl9KX1mdW5jdGlvbiBRKGUpe3JldHVybiEhKGUuaXRlbS5pcygnYXR0cmlidXRlRWxlbWVudCcpfHxlLml0ZW0uaXMoJ3VpRWxlbWVudCcpKX1mdW5jdGlvbiBZKGUpe2xldCB0PTA7Zm9yKGNvbnN0IG8gb2YgZSl0Kys7cmV0dXJuIHR9ZnVuY3Rpb24gWCgpe2lmKFoodGhpcykpcmV0dXJuIG51bGw7bGV0IGU9dGhpcy5wYXJlbnQ7Zm9yKDtlJiZlLmlzKCdhdHRyaWJ1dGVFbGVtZW50Jyk7KXtpZigxPFooZSkpcmV0dXJuIG51bGw7ZT1lLnBhcmVudH1yZXR1cm4hZXx8MTxaKGUpP251bGw6dGhpcy5jaGlsZENvdW50fWZ1bmN0aW9uIFooZSl7cmV0dXJuIEFycmF5LmZyb20oZS5nZXRDaGlsZHJlbigpKS5maWx0ZXIoKGUpPT4hZS5pcygndWlFbGVtZW50JykpLmxlbmd0aH1mdW5jdGlvbiBlZSgpe3JldHVybiBudWxsfWZ1bmN0aW9uIHRlKGUpe2xldCB0O2lmKCdzdHJpbmcnIT10eXBlb2YgZSl0PWUua2V5Q29kZSsoZS5hbHRLZXk/RGMuYWx0OjApKyhlLmN0cmxLZXk/RGMuY3RybDowKSsoZS5zaGlmdEtleT9EYy5zaGlmdDowKTtlbHNlIGlmKHQ9RGNbZS50b0xvd2VyQ2FzZSgpXSwhdCl0aHJvdyBuZXcgWmEoJ2tleWJvYXJkLXVua25vd24ta2V5OiBVbmtub3duIGtleSBuYW1lLicse2tleTplfSk7cmV0dXJuIHR9ZnVuY3Rpb24gb2UoZSl7cmV0dXJuJ3N0cmluZyc9PXR5cGVvZiBlJiYoZT1pZShlKSksZS5tYXAoKGUpPT4nc3RyaW5nJz09dHlwZW9mIGU/dGUoZSk6ZSkucmVkdWNlKChlLHQpPT50K2UsMCl9ZnVuY3Rpb24gbmUoZSl7cmV0dXJuIEZjLmlzTWFjP2llKGUpLm1hcCgoZSk9Pk1jW2UudG9Mb3dlckNhc2UoKV18fGUpLnJlZHVjZSgoZSx0KT0+ZS5zbGljZSgtMSlpbiBOYz9lK3Q6ZSsnKycrdCk6ZX1mdW5jdGlvbiBpZShlKXtyZXR1cm4gZS5zcGxpdCgvXFxzKlxcK1xccyovKX1mdW5jdGlvbiByZShlKXtlLmRvY3VtZW50Lm9uKCdrZXlkb3duJywodCxvKT0+c2UodCxvLGUuZG9tQ29udmVydGVyKSl9ZnVuY3Rpb24gYWUoKXtyZXR1cm4gbnVsbH1mdW5jdGlvbiBzZShlLHQsbyl7aWYodC5rZXlDb2RlPT1EYy5hcnJvd3JpZ2h0KXtjb25zdCBlPXQuZG9tVGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCksbj0xPT1lLnJhbmdlQ291bnQmJmUuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQ7aWYobnx8dC5zaGlmdEtleSl7Y29uc3QgdD1lLmZvY3VzTm9kZSxpPWUuZm9jdXNPZmZzZXQscj1vLmRvbVBvc2l0aW9uVG9WaWV3KHQsaSk7aWYobnVsbD09PXIpcmV0dXJuO2xldCBhPSExO2NvbnN0IHM9ci5nZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbigoZSk9PihlLml0ZW0uaXMoJ3VpRWxlbWVudCcpJiYoYT0hMCksISEoZS5pdGVtLmlzKCd1aUVsZW1lbnQnKXx8ZS5pdGVtLmlzKCdhdHRyaWJ1dGVFbGVtZW50JykpKSk7aWYoYSl7Y29uc3QgdD1vLnZpZXdQb3NpdGlvblRvRG9tKHMpO24/ZS5jb2xsYXBzZSh0LnBhcmVudCx0Lm9mZnNldCk6ZS5leHRlbmQodC5wYXJlbnQsdC5vZmZzZXQpfX19fWZ1bmN0aW9uIGxlKGUpe3JldHVybidzdHJpbmcnPT10eXBlb2YgZT9bbmV3IE9kKGUpXTooUChlKXx8KGU9W2VdKSxBcnJheS5mcm9tKGUpLm1hcCgoZSk9PidzdHJpbmcnPT10eXBlb2YgZT9uZXcgT2QoZSk6ZSBpbnN0YW5jZW9mIFJkP25ldyBPZChlLmRhdGEpOmUpKX1mdW5jdGlvbiBkZShlKXtyZXR1cm4gQXJyYXkuZnJvbShlLmdldENoaWxkcmVuKCkpLnNvbWUoKGUpPT4hZS5pcygndWlFbGVtZW50JykpfWZ1bmN0aW9uIGNlKGUpe2xldCB0PWUucGFyZW50O2Zvcig7IWJlKHQpOyl7aWYoIXQpcmV0dXJuO3Q9dC5wYXJlbnR9cmV0dXJuIHR9ZnVuY3Rpb24gdWUoZSx0KXtpZihlLnByaW9yaXR5PHQucHJpb3JpdHkpcmV0dXJuITA7cmV0dXJuIShlLnByaW9yaXR5PnQucHJpb3JpdHkpJiZlLmdldElkZW50aXR5KCk8dC5nZXRJZGVudGl0eSgpfWZ1bmN0aW9uIG1lKGUpe2NvbnN0IHQ9ZS5ub2RlQmVmb3JlO2lmKHQmJnQuaXMoJ3RleHQnKSlyZXR1cm4gbmV3IHhjKHQsdC5kYXRhLmxlbmd0aCk7Y29uc3Qgbz1lLm5vZGVBZnRlcjtyZXR1cm4gbyYmby5pcygndGV4dCcpP25ldyB4YyhvLDApOmV9ZnVuY3Rpb24gcGUoZSl7aWYoZS5vZmZzZXQ9PWUucGFyZW50LmRhdGEubGVuZ3RoKXJldHVybiBuZXcgeGMoZS5wYXJlbnQucGFyZW50LGUucGFyZW50LmluZGV4KzEpO2lmKDA9PT1lLm9mZnNldClyZXR1cm4gbmV3IHhjKGUucGFyZW50LnBhcmVudCxlLnBhcmVudC5pbmRleCk7Y29uc3QgdD1lLnBhcmVudC5kYXRhLnNsaWNlKGUub2Zmc2V0KTtyZXR1cm4gZS5wYXJlbnQuX2RhdGE9ZS5wYXJlbnQuZGF0YS5zbGljZSgwLGUub2Zmc2V0KSxlLnBhcmVudC5wYXJlbnQuX2luc2VydENoaWxkKGUucGFyZW50LmluZGV4KzEsbmV3IE9kKHQpKSxuZXcgeGMoZS5wYXJlbnQucGFyZW50LGUucGFyZW50LmluZGV4KzEpfWZ1bmN0aW9uIGdlKGUsdCl7Y29uc3Qgbz1lLmRhdGEubGVuZ3RoO3JldHVybiBlLl9kYXRhKz10LmRhdGEsdC5fcmVtb3ZlKCksbmV3IHhjKGUsbyl9ZnVuY3Rpb24gZmUoZSl7cmV0dXJuIGUuc3RhcnQucGFyZW50PT1lLmVuZC5wYXJlbnQmJmUuc3RhcnQucGFyZW50LmlzKCdhdHRyaWJ1dGVFbGVtZW50JykmJjA9PT1lLnN0YXJ0Lm9mZnNldCYmZS5lbmQub2Zmc2V0PT09ZS5zdGFydC5wYXJlbnQuY2hpbGRDb3VudH1mdW5jdGlvbiBoZShlKXtmb3IoY29uc3QgdCBvZiBlKXtpZighamMuc29tZSgoZSk9PnQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgWmEoJ3ZpZXctd3JpdGVyLWluc2VydC1pbnZhbGlkLW5vZGUnKTt0LmlzKCd0ZXh0Jyl8fGhlKHQuZ2V0Q2hpbGRyZW4oKSl9fWZ1bmN0aW9uIGJlKGUpe3JldHVybiBlJiYoZS5pcygnY29udGFpbmVyRWxlbWVudCcpfHxlLmlzKCdkb2N1bWVudEZyYWdtZW50JykpfWZ1bmN0aW9uIGtlKGUpe2NvbnN0IHQ9Y2UoZS5zdGFydCksbz1jZShlLmVuZCk7aWYoIXR8fCFvfHx0IT09byl0aHJvdyBuZXcgWmEoJ3ZpZXctd3JpdGVyLWludmFsaWQtcmFuZ2UtY29udGFpbmVyJyl9ZnVuY3Rpb24gX2UoZSx0KXtyZXR1cm4gbnVsbD09PWUuaWQmJm51bGw9PT10LmlkfWZ1bmN0aW9uIHdlKGUpe3JldHVybiBlIGluc3RhbmNlb2YgVGV4dCYmZS5kYXRhLnN1YnN0cigwLFVjKT09PUhjfWZ1bmN0aW9uIHZlKGUpe3JldHVybiBlLmRhdGEubGVuZ3RoPT1VYyYmd2UoZSl9ZnVuY3Rpb24geWUoZSl7cmV0dXJuIHdlKGUpP2UuZGF0YS5zbGljZShVYyk6ZS5kYXRhfWZ1bmN0aW9uIHhlKGUsdCl7bGV0IG89S2MuZ2V0KHQpO3JldHVybiBvfHwobz10KHdpbmRvdy5kb2N1bWVudCksS2Muc2V0KHQsbykpLGUuaXNFcXVhbE5vZGUobyl9ZnVuY3Rpb24gQ2UoZSl7ZS5kb2N1bWVudC5vbigna2V5ZG93bicsQWUpfWZ1bmN0aW9uIEFlKGUsdCl7aWYodC5rZXlDb2RlPT1EYy5hcnJvd2xlZnQpe2NvbnN0IGU9dC5kb21UYXJnZXQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKTtpZigxPT1lLnJhbmdlQ291bnQmJmUuZ2V0UmFuZ2VBdCgwKS5jb2xsYXBzZWQpe2NvbnN0IHQ9ZS5nZXRSYW5nZUF0KDApLnN0YXJ0Q29udGFpbmVyLG89ZS5nZXRSYW5nZUF0KDApLnN0YXJ0T2Zmc2V0O3dlKHQpJiZvPD1VYyYmZS5jb2xsYXBzZSh0LDApfX19ZnVuY3Rpb24gVGUoZSx0LG8pe2Z1bmN0aW9uIGkobil7Y29uc3QgaT0oY1tuLTFdPT09dm9pZCAwPy0xOmNbbi0xXSkrMSx1PWNbbisxXT09PXZvaWQgMD8tMTpjW24rMV0sbT1pPnU/LTE6MTtkW24rbV0mJihkW25dPWRbbittXS5zbGljZSgwKSksZFtuXXx8KGRbbl09W10pLGRbbl0ucHVzaChpPnU/cjphKTtsZXQgcD1CYShpLHUpLGc9cC1uO2Zvcig7ZzxzJiZwPGwmJm8oZVtnXSx0W3BdKTspZysrLHArKyxkW25dLnB1c2goJ2VxdWFsJyk7cmV0dXJuIHB9bz1vfHxmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dH07bGV0IHIsYTtpZih0Lmxlbmd0aDxlLmxlbmd0aCl7Y29uc3Qgbz1lO2U9dCx0PW8scj0nZGVsZXRlJyxhPSdpbnNlcnQnfWVsc2Ugcj0naW5zZXJ0JyxhPSdkZWxldGUnO2NvbnN0IHM9ZS5sZW5ndGgsbD10Lmxlbmd0aCxuPWwtcyxkPXt9LGM9e307bGV0IHU9MCxtO2Rve2ZvcihtPS11O208bjttKyspY1ttXT1pKG0pO2ZvcihtPW4rdTttPm47bS0tKWNbbV09aShtKTtjW25dPWkobiksdSsrfXdoaWxlKGNbbl0hPT1sKTtyZXR1cm4gZFtuXS5zbGljZSgxKX1mdW5jdGlvbiBQZShlLHQsbyl7ZS5pbnNlcnRCZWZvcmUobyxlLmNoaWxkTm9kZXNbdF18fG51bGwpfWZ1bmN0aW9uIEVlKGUpe2NvbnN0IHQ9ZS5wYXJlbnROb2RlO3QmJnQucmVtb3ZlQ2hpbGQoZSl9ZnVuY3Rpb24gU2UoZSl7cmV0dXJuJ1tvYmplY3QgVGV4dF0nPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gT2UoZSl7aWYoJ2ZhbHNlJz09ZS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpKXJldHVybiExO2NvbnN0IHQ9ZS5maW5kQW5jZXN0b3IoKGUpPT5lLmhhc0F0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJykpO3JldHVybiF0fHwndHJ1ZSc9PXQuZ2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnKX1mdW5jdGlvbiBSZShlKXtsZXQgdD0wO2Zvcig7ZS5wcmV2aW91c1NpYmxpbmc7KWU9ZS5wcmV2aW91c1NpYmxpbmcsdCsrO3JldHVybiB0fWZ1bmN0aW9uIEllKGUpe2NvbnN0IHQ9W107Zm9yKDtlJiZlLm5vZGVUeXBlIT1Ob2RlLkRPQ1VNRU5UX05PREU7KXQudW5zaGlmdChlKSxlPWUucGFyZW50Tm9kZTtyZXR1cm4gdH1mdW5jdGlvbiBWZShlLHQpe2NvbnN0IG89SWUoZSksbj1JZSh0KTtsZXQgcj0wO2Zvcig7b1tyXT09bltyXSYmb1tyXTspcisrO3JldHVybiAwPT1yP251bGw6b1tyLTFdfWZ1bmN0aW9uIEZlKGUsdCxvKXtsZXQgbj1JZShlKTtyZXR1cm4gbyYmKG49bi5zbGljZShuLmluZGV4T2YobykrMSkpLG4uc29tZSgoZSk9PmUudGFnTmFtZSYmdC5pbmNsdWRlcyhlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpfWZ1bmN0aW9uIE5lKGUsdCl7Zm9yKDtlJiZlIT0kYy5kb2N1bWVudDspdChlKSxlPWUucGFyZW50Tm9kZX1mdW5jdGlvbiBNZShlKXtpZihlKXtpZihlLmRlZmF1bHRWaWV3KXJldHVybiBlIGluc3RhbmNlb2YgZS5kZWZhdWx0Vmlldy5Eb2N1bWVudDtpZihlLm93bmVyRG9jdW1lbnQmJmUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldylyZXR1cm4gZSBpbnN0YW5jZW9mIGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5Ob2RlfXJldHVybiExfWZ1bmN0aW9uIERlKGUpe3JldHVybidbb2JqZWN0IFdpbmRvd10nPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KGUpfWZ1bmN0aW9uIEJlKGUpe3JldHVybiBlWydkYXRhLWNrLWV4cGFuZG8nXXx8KGVbJ2RhdGEtY2stZXhwYW5kbyddPWkoKSl9ZnVuY3Rpb24gTGUoZSl7dmFyIHQ9LTEsbz1lP2UubGVuZ3RoOjA7Zm9yKHRoaXMuX19kYXRhX189bmV3IExzOysrdDxvOyl0aGlzLmFkZChlW3RdKX1mdW5jdGlvbiB6ZShlLHQsbyxuLGkscil7dmFyIGE9aSZhdSxzPWtsKGUpLGw9cy5sZW5ndGgsZD1rbCh0KSxjPWQubGVuZ3RoO2lmKGwhPWMmJiFhKXJldHVybiExO2Zvcih2YXIgdT1sLG07dS0tOylpZihtPXNbdV0sYT8hKG0gaW4gdCk6ISRzKHQsbSkpcmV0dXJuITE7dmFyIHA9ci5nZXQoZSk7aWYocClyZXR1cm4gcD09dDt2YXIgZz0hMDtyLnNldChlLHQpO2Zvcih2YXIgZj1hOysrdTxsOyl7bT1zW3VdO3ZhciBoPWVbbV0sYj10W21dO2lmKG4pdmFyIGs9YT9uKGIsaCxtLHQsZSxyKTpuKGgsYixtLGUsdCxyKTtpZih2b2lkIDA9PT1rPyEoaD09PWJ8fG8oaCxiLG4saSxyKSk6IWspe2c9ITE7YnJlYWt9Znx8KGY9J2NvbnN0cnVjdG9yJz09bSl9aWYoZyYmIWYpe3ZhciBfPWUuY29uc3RydWN0b3Isdz10LmNvbnN0cnVjdG9yO18hPXcmJidjb25zdHJ1Y3RvcidpbiBlJiYnY29uc3RydWN0b3InaW4gdCYmISgnZnVuY3Rpb24nPT10eXBlb2YgXyYmXyBpbnN0YW5jZW9mIF8mJidmdW5jdGlvbic9PXR5cGVvZiB3JiZ3IGluc3RhbmNlb2YgdykmJihnPSExKX1yZXR1cm4gclsnZGVsZXRlJ10oZSksZ31mdW5jdGlvbiBqZShlLHQsbyxuLGkpe3JldHVybiEoZSE9PXQpfHwobnVsbCE9ZSYmbnVsbCE9dCYmKHBzKGUpfHxVYSh0KSk/aHUoZSx0LGplLG8sbixpKTplIT09ZSYmdCE9PXQpfWZ1bmN0aW9uIHFlKGUsdCxvKXtmdW5jdGlvbiBuKHQpe3ZhciBvPWIsbj1rO3JldHVybiBiPWs9dm9pZCAwLHA9dCx3PWUuYXBwbHkobixvKSx3fWZ1bmN0aW9uIGkoZSl7cmV0dXJuIHA9ZSx2PXNldFRpbWVvdXQocyx0KSxnP24oZSk6d31mdW5jdGlvbiByKGUpe3ZhciBvPWUtbSxuPWUtcCxpPXQtbztyZXR1cm4gZj9QdShpLF8tbik6aX1mdW5jdGlvbiBhKGUpe3ZhciBvPWUtbSxuPWUtcDtyZXR1cm4hbXx8bz49dHx8MD5vfHxmJiZuPj1ffWZ1bmN0aW9uIHMoKXt2YXIgZT1DdSgpO3JldHVybiBhKGUpP2woZSk6dm9pZCh2PXNldFRpbWVvdXQocyxyKGUpKSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4oY2xlYXJUaW1lb3V0KHYpLHY9dm9pZCAwLGgmJmIpP24oZSk6KGI9az12b2lkIDAsdyl9ZnVuY3Rpb24gZCgpe3ZvaWQgMCE9PXYmJmNsZWFyVGltZW91dCh2KSxtPXA9MCxiPWs9dj12b2lkIDB9ZnVuY3Rpb24gYygpe3JldHVybiB2b2lkIDA9PT12P3c6bChDdSgpKX1mdW5jdGlvbiB1KCl7dmFyIGU9Q3UoKSxvPWEoZSk7aWYoYj1hcmd1bWVudHMsaz10aGlzLG09ZSxvKXtpZih2b2lkIDA9PT12KXJldHVybiBpKG0pO2lmKGYpcmV0dXJuIGNsZWFyVGltZW91dCh2KSx2PXNldFRpbWVvdXQocyx0KSxuKG0pfXJldHVybiB2b2lkIDA9PT12JiYodj1zZXRUaW1lb3V0KHMsdCkpLHd9dmFyIG09MCxwPTAsZz0hMSxmPSExLGg9ITAsYixrLF8sdyx2O2lmKCdmdW5jdGlvbichPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoQXUpO3JldHVybiB0PUtkKHQpfHwwLHBzKG8pJiYoZz0hIW8ubGVhZGluZyxmPSdtYXhXYWl0J2luIG8sXz1mP1R1KEtkKG8ubWF4V2FpdCl8fDAsdCk6XyxoPSd0cmFpbGluZydpbiBvPyEhby50cmFpbGluZzpoKSx1LmNhbmNlbD1kLHUuZmx1c2g9Yyx1fWZ1bmN0aW9uIFdlKGUpe3JldHVybiBlPT1EYy5hcnJvd3JpZ2h0fHxlPT1EYy5hcnJvd2xlZnR8fGU9PURjLmFycm93dXB8fGU9PURjLmFycm93ZG93bn1mdW5jdGlvbiBVZShlKXtyZXR1cm4nW29iamVjdCBSYW5nZV0nPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KGUpfWZ1bmN0aW9uIEhlKGUpe2NvbnN0IHQ9ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZSk7cmV0dXJue3RvcDpwYXJzZUludCh0LmJvcmRlclRvcFdpZHRoLDEwKSxyaWdodDpwYXJzZUludCh0LmJvcmRlclJpZ2h0V2lkdGgsMTApLGJvdHRvbTpwYXJzZUludCh0LmJvcmRlckJvdHRvbVdpZHRoLDEwKSxsZWZ0OnBhcnNlSW50KHQuYm9yZGVyTGVmdFdpZHRoLDEwKX19ZnVuY3Rpb24gS2UoZSx0KXtmb3IoY29uc3QgbyBvZiBEdSllW29dPXRbb119ZnVuY3Rpb24gR2UoZSl7cmV0dXJuISFOdShlKSYmZT09PWUub3duZXJEb2N1bWVudC5ib2R5fWZ1bmN0aW9uICRlKHt0YXJnZXQ6ZSx2aWV3cG9ydE9mZnNldDp0PTB9KXtjb25zdCBvPXR0KGUpO2ZvcihsZXQgbj1vLGk9bnVsbDtuOyl7bGV0IHI7cj1uPT1vP250KGUpOm50KGkpLFFlKHIsKCk9Pml0KGUsbikpO2NvbnN0IGE9aXQoZSxuKTtKZShuLGEsdCksbi5wYXJlbnQ9PW4/bj1udWxsOihpPW4uZnJhbWVFbGVtZW50LG49bi5wYXJlbnQpfX1mdW5jdGlvbiBKZShlLHQsbyl7Y29uc3Qgbj10LmNsb25lKCkubW92ZUJ5KDAsbyksaT10LmNsb25lKCkubW92ZUJ5KDAsLW8pLHI9bmV3IE11KGUpLmV4Y2x1ZGVTY3JvbGxiYXJzQW5kQm9yZGVycygpO2lmKCFbaSxuXS5ldmVyeSgoZSk9PnIuY29udGFpbnMoZSkpKXtsZXR7c2Nyb2xsWDphLHNjcm9sbFk6c309ZTtYZShpLHIpP3MtPXIudG9wLXQudG9wK286WWUobixyKSYmKHMrPXQuYm90dG9tLXIuYm90dG9tK28pLFplKHQscik/YS09ci5sZWZ0LXQubGVmdCtvOmV0KHQscikmJihhKz10LnJpZ2h0LXIucmlnaHQrbyksZS5zY3JvbGxUbyhhLHMpfX1mdW5jdGlvbiBRZShlLHQpe2NvbnN0IG89dHQoZSk7Zm9yKGxldCBuLGk7ZSE9by5kb2N1bWVudC5ib2R5OylpPXQoKSxuPW5ldyBNdShlKS5leGNsdWRlU2Nyb2xsYmFyc0FuZEJvcmRlcnMoKSxuLmNvbnRhaW5zKGkpfHwoWGUoaSxuKT9lLnNjcm9sbFRvcC09bi50b3AtaS50b3A6WWUoaSxuKSYmKGUuc2Nyb2xsVG9wKz1pLmJvdHRvbS1uLmJvdHRvbSksWmUoaSxuKT9lLnNjcm9sbExlZnQtPW4ubGVmdC1pLmxlZnQ6ZXQoaSxuKSYmKGUuc2Nyb2xsTGVmdCs9aS5yaWdodC1uLnJpZ2h0KSksZT1lLnBhcmVudE5vZGV9ZnVuY3Rpb24gWWUoZSx0KXtyZXR1cm4gZS5ib3R0b20+dC5ib3R0b219ZnVuY3Rpb24gWGUoZSx0KXtyZXR1cm4gZS50b3A8dC50b3B9ZnVuY3Rpb24gWmUoZSx0KXtyZXR1cm4gZS5sZWZ0PHQubGVmdH1mdW5jdGlvbiBldChlLHQpe3JldHVybiBlLnJpZ2h0PnQucmlnaHR9ZnVuY3Rpb24gdHQoZSl7cmV0dXJuIFVlKGUpP2Uuc3RhcnRDb250YWluZXIub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzplLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXd9ZnVuY3Rpb24gbnQoZSl7aWYoVWUoZSkpe2xldCB0PWUuY29tbW9uQW5jZXN0b3JDb250YWluZXI7cmV0dXJuIFNlKHQpJiYodD10LnBhcmVudE5vZGUpLHR9cmV0dXJuIGUucGFyZW50Tm9kZX1mdW5jdGlvbiBpdChlLHQpe2NvbnN0IG89dHQoZSksbj1uZXcgTXUoZSk7aWYobz09PXQpcmV0dXJuIG47Zm9yKGxldCBpPW87aSE9dDspe2NvbnN0IGU9aS5mcmFtZUVsZW1lbnQsdD1uZXcgTXUoZSkuZXhjbHVkZVNjcm9sbGJhcnNBbmRCb3JkZXJzKCk7bi5tb3ZlQnkodC5sZWZ0LHQudG9wKSxpPWkucGFyZW50fXJldHVybiBufWZ1bmN0aW9uIHJ0KGUpe3JldHVybiBRYShlKT9UKGUpOm5ldyBNYXAoZSl9ZnVuY3Rpb24gYXQoZSl7cmV0dXJuJ3N0cmluZyc9PXR5cGVvZiBlP1tuZXcgenUoZSldOihQKGUpfHwoZT1bZV0pLEFycmF5LmZyb20oZSkubWFwKChlKT0+J3N0cmluZyc9PXR5cGVvZiBlP25ldyB6dShlKTplIGluc3RhbmNlb2YganU/bmV3IHp1KGUuZGF0YSxlLmdldEF0dHJpYnV0ZXMoKSk6ZSkpfWZ1bmN0aW9uIHN0KGUsdCxvLG4saSl7cmV0dXJue2RvbmU6ITEsdmFsdWU6e3R5cGU6ZSxpdGVtOnQscHJldmlvdXNQb3NpdGlvbjpvLG5leHRQb3NpdGlvbjpuLGxlbmd0aDppfX19ZnVuY3Rpb24gbHQoZSl7Y29uc3QgdD1lLnNwbGl0KCc6Jyk7cmV0dXJuIDE8dC5sZW5ndGg/dFswXSsnOicrdFsxXTp0WzBdfWZ1bmN0aW9uIGR0KGUsdCxvKXtjb25zdCBuPXQuZ2V0UmFuZ2UoKSxpPUFycmF5LmZyb20oZS5nZXRBbmNlc3RvcnMoKSk7aS5zaGlmdCgpLGkucmV2ZXJzZSgpO2NvbnN0IHI9aS5zb21lKChlKT0+e2lmKG4uY29udGFpbnNJdGVtKGUpKXtjb25zdCB0PW8udG9WaWV3RWxlbWVudChlKTtyZXR1cm4hIXQuZ2V0Q3VzdG9tUHJvcGVydHkoJ2FkZEhpZ2hsaWdodCcpfX0pO3JldHVybiFyfWZ1bmN0aW9uIGN0KGUsdCl7cmV0dXJuIXQuaGFzKGUpJiYodC5hZGQoZSksZS5kb2N1bWVudC5tb2RlbC5zY2hlbWEuaXNCbG9jayhlKSYmZS5wYXJlbnQpfWZ1bmN0aW9uIHV0KGUsdCl7Y29uc3Qgbz1lLnBhcmVudC5nZXRBbmNlc3RvcnMoe3BhcmVudEZpcnN0OiEwLGluY2x1ZGVTZWxmOiEwfSksbj1vLmZpbmQoKGUpPT5jdChlLHQpKTtyZXR1cm4gby5mb3JFYWNoKChlKT0+dC5hZGQoZSkpLG59ZnVuY3Rpb24gbXQoKXtjb25zdCBlPW5ldyBTZXQoWydpbnNlcnQnLCdtb3ZlJywncmVtb3ZlJywncmVpbnNlcnQnXSk7dGhpcy5saXN0ZW5Ubyh0aGlzLnJvb3QuZG9jdW1lbnQubW9kZWwsJ2FwcGx5T3BlcmF0aW9uJywodCxvKT0+e2NvbnN0IG49b1swXTshbi5pc0RvY3VtZW50T3BlcmF0aW9ufHxlLmhhcyhuLnR5cGUpJiZwdC5jYWxsKHRoaXMsbil9LHtwcmlvcml0eTonbG93J30pfWZ1bmN0aW9uIHB0KGUpe2NvbnN0IHQ9ZS50eXBlLG89ZS5kZWx0YS5iYXRjaDtsZXQgbixpOydpbnNlcnQnPT10P249R3UuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZS5wb3NpdGlvbixlLm5vZGVzLm1heE9mZnNldCk6KG49R3UuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZS5nZXRNb3ZlZFJhbmdlU3RhcnQoKSxlLmhvd01hbnkpLGk9ZS5zb3VyY2VQb3NpdGlvbik7Y29uc3Qgcj1uLmVuZC5vZmZzZXQtbi5zdGFydC5vZmZzZXQ7bGV0IGE9bi5zdGFydDsoJ21vdmUnPT10fHwncmVtb3ZlJz09dHx8J3JlaW5zZXJ0Jz09dCkmJihhPWEuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24oaSxyKSk7Y29uc3Qgcz10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5RG9jdW1lbnRDaGFuZ2UodCxlLmRlbHRhLnR5cGUsYSxyLGkpOygnbW92ZSc9PXR8fCdyZW1vdmUnPT10fHwncmVpbnNlcnQnPT10KSYmMz09cy5sZW5ndGgmJihzWzJdPW4pO2NvbnN0IGw9R3UuY3JlYXRlRnJvbVJhbmdlcyhzKSxkPSFsLmlzRXF1YWwodGhpcyksYz10aGlzLmNvbnRhaW5zUG9zaXRpb24oYSksdT1pJiYodGhpcy5jb250YWluc1Bvc2l0aW9uKGkpfHx0aGlzLnN0YXJ0LmlzRXF1YWwoaSkpO2lmKGQpe2NvbnN0IGU9R3UuY3JlYXRlRnJvbVJhbmdlKHRoaXMpO3RoaXMuc3RhcnQ9bC5zdGFydCx0aGlzLmVuZD1sLmVuZCx0aGlzLmZpcmUoJ2NoYW5nZTpyYW5nZScsZSx7dHlwZTp0LGJhdGNoOm8scmFuZ2U6bixzb3VyY2VQb3NpdGlvbjppfSl9ZWxzZShjfHx1KSYmdGhpcy5maXJlKCdjaGFuZ2U6Y29udGVudCcsR3UuY3JlYXRlRnJvbVJhbmdlKHRoaXMpLHt0eXBlOnQsYmF0Y2g6byxyYW5nZTpuLHNvdXJjZVBvc2l0aW9uOml9KX1mdW5jdGlvbiBndChlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGp1fHxlIGluc3RhbmNlb2YgenU/ZS5nZXRBdHRyaWJ1dGVzKCk6bnVsbH1mdW5jdGlvbiBmdChlLHQpe2NvbnN0IG89ZS5kb2N1bWVudC5kaWZmZXI7Zm9yKGNvbnN0IG4gb2Ygby5nZXRDaGFuZ2VzKCkpe2lmKCdpbnNlcnQnIT1uLnR5cGUpY29udGludWU7Y29uc3Qgbz1uLnBvc2l0aW9uLnBhcmVudCxpPW4ubGVuZ3RoPT09by5tYXhPZmZzZXQ7aSYmZS5lbnF1ZXVlQ2hhbmdlKHQsKGUpPT57Y29uc3QgdD1BcnJheS5mcm9tKG8uZ2V0QXR0cmlidXRlS2V5cygpKS5maWx0ZXIoKGUpPT5lLnN0YXJ0c1dpdGgoWnUpKTtmb3IoY29uc3QgbiBvZiB0KWUucmVtb3ZlQXR0cmlidXRlKG4sbyl9KX19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuIGU9b20oZSksZS52aWV3PV90KGUudmlldywnY29udGFpbmVyJyksKHQpPT57dC5vbignaW5zZXJ0OicrZS5tb2RlbCx4dChlLnZpZXcpLHtwcmlvcml0eTplLnByaW9yaXR5fHwnbm9ybWFsJ30pfX1mdW5jdGlvbiBidChlKXtlPW9tKGUpO2NvbnN0IHQ9ZS5tb2RlbC5rZXk/ZS5tb2RlbC5rZXk6ZS5tb2RlbDtsZXQgbz0nYXR0cmlidXRlOicrdDtpZihlLm1vZGVsLm5hbWUmJihvKz0nOicrZS5tb2RlbC5uYW1lKSxlLm1vZGVsLnZhbHVlcylmb3IoY29uc3QgdCBvZiBlLm1vZGVsLnZhbHVlcyllLnZpZXdbdF09X3QoZS52aWV3W3RdLCdhdHRyaWJ1dGUnKTtlbHNlIGUudmlldz1fdChlLnZpZXcsJ2F0dHJpYnV0ZScpO2NvbnN0IG49dnQoZSk7cmV0dXJuKHQpPT57dC5vbihvLFB0KG4pLHtwcmlvcml0eTplLnByaW9yaXR5fHwnbm9ybWFsJ30pfX1mdW5jdGlvbiBrdChlKXtlPW9tKGUpO2NvbnN0IHQ9ZS5tb2RlbC5rZXk/ZS5tb2RlbC5rZXk6ZS5tb2RlbDtsZXQgbz0nYXR0cmlidXRlOicrdDtpZihlLm1vZGVsLm5hbWUmJihvKz0nOicrZS5tb2RlbC5uYW1lKSxlLm1vZGVsLnZhbHVlcylmb3IoY29uc3QgdCBvZiBlLm1vZGVsLnZhbHVlcyllLnZpZXdbdF09eXQoZS52aWV3W3RdKTtlbHNlIGUudmlldz15dChlLnZpZXcpO2NvbnN0IG49dnQoZSk7cmV0dXJuKHQpPT57dC5vbihvLFR0KG4pLHtwcmlvcml0eTplLnByaW9yaXR5fHwnbm9ybWFsJ30pfX1mdW5jdGlvbiBfdChlLHQpe3JldHVybidmdW5jdGlvbic9PXR5cGVvZiBlP2U6KG8sbik9Pnd0KGUsbix0KX1mdW5jdGlvbiB3dChlLHQsbyl7J3N0cmluZyc9PXR5cGVvZiBlJiYoZT17bmFtZTplfSk7bGV0IG47aWYobj0nY29udGFpbmVyJz09bz90LmNyZWF0ZUNvbnRhaW5lckVsZW1lbnQoZS5uYW1lLE9iamVjdC5hc3NpZ24oe30sZS5hdHRyaWJ1dGVzKSk6J2F0dHJpYnV0ZSc9PW8/dC5jcmVhdGVBdHRyaWJ1dGVFbGVtZW50KGUubmFtZSxPYmplY3QuYXNzaWduKHt9LGUuYXR0cmlidXRlcykpOnQuY3JlYXRlVUlFbGVtZW50KGUubmFtZSxPYmplY3QuYXNzaWduKHt9LGUuYXR0cmlidXRlcykpLGUuc3R5bGVzKXtjb25zdCBvPU9iamVjdC5rZXlzKGUuc3R5bGVzKTtmb3IoY29uc3QgaSBvZiBvKXQuc2V0U3R5bGUoaSxlLnN0eWxlc1tpXSxuKX1pZihlLmNsYXNzZXMpe2NvbnN0IG89ZS5jbGFzc2VzO2lmKCdzdHJpbmcnPT10eXBlb2Ygbyl0LmFkZENsYXNzKG8sbik7ZWxzZSBmb3IoY29uc3QgZSBvZiBvKXQuYWRkQ2xhc3MoZSxuKX1yZXR1cm4gbn1mdW5jdGlvbiB2dChlKXtyZXR1cm4gZS5tb2RlbC52YWx1ZXM/KHQsbyk9Pntjb25zdCBuPWUudmlld1t0XTtyZXR1cm4gbj9uKHQsbyk6bnVsbH06ZS52aWV3fWZ1bmN0aW9uIHl0KGUpe3JldHVybidzdHJpbmcnPT10eXBlb2YgZT8odCk9Pih7a2V5OmUsdmFsdWU6dH0pOidvYmplY3QnPT10eXBlb2YgZT9lLnZhbHVlPygpPT5lOih0KT0+KHtrZXk6ZS5rZXksdmFsdWU6dH0pOmV9ZnVuY3Rpb24geHQoZSl7cmV0dXJuKHQsbyxuKT0+e2NvbnN0IGk9ZShvLml0ZW0sbi53cml0ZXIpO2lmKGkmJm4uY29uc3VtYWJsZS5jb25zdW1lKG8uaXRlbSwnaW5zZXJ0Jykpe2NvbnN0IGU9bi5tYXBwZXIudG9WaWV3UG9zaXRpb24oby5yYW5nZS5zdGFydCk7bi5tYXBwZXIuYmluZEVsZW1lbnRzKG8uaXRlbSxpKSxuLndyaXRlci5pbnNlcnQoZSxpKX19fWZ1bmN0aW9uIEN0KCl7cmV0dXJuKGUsdCxvKT0+e2lmKG8uY29uc3VtYWJsZS5jb25zdW1lKHQuaXRlbSwnaW5zZXJ0Jykpe2NvbnN0IGU9by53cml0ZXIsbj1vLm1hcHBlci50b1ZpZXdQb3NpdGlvbih0LnJhbmdlLnN0YXJ0KSxpPWUuY3JlYXRlVGV4dCh0Lml0ZW0uZGF0YSk7ZS5pbnNlcnQobixpKX19fWZ1bmN0aW9uIEF0KCl7cmV0dXJuKGUsdCxvKT0+e2NvbnN0IG49by5tYXBwZXIudG9WaWV3UG9zaXRpb24odC5wb3NpdGlvbiksaT10LnBvc2l0aW9uLmdldFNoaWZ0ZWRCeSh0Lmxlbmd0aCkscj1vLm1hcHBlci50b1ZpZXdQb3NpdGlvbihpLHtpc1BoYW50b206ITB9KSxhPW5ldyBDYyhuLHIpLHM9by53cml0ZXIucmVtb3ZlKGEuZ2V0VHJpbW1lZCgpKTtmb3IoY29uc3QgbiBvZiBDYy5jcmVhdGVJbihzKS5nZXRJdGVtcygpKW8ubWFwcGVyLnVuYmluZFZpZXdFbGVtZW50KG4pfX1mdW5jdGlvbiBUdChlKXtyZXR1cm4gZT1lfHwoKGUsdCk9Pih7dmFsdWU6ZSxrZXk6dC5hdHRyaWJ1dGVLZXl9KSksKHQsbyxuKT0+e2NvbnN0IGk9ZShvLmF0dHJpYnV0ZU9sZFZhbHVlLG8pLHI9ZShvLmF0dHJpYnV0ZU5ld1ZhbHVlLG8pO2lmKChpfHxyKSYmbi5jb25zdW1hYmxlLmNvbnN1bWUoby5pdGVtLHQubmFtZSkpe2NvbnN0IGU9bi5tYXBwZXIudG9WaWV3RWxlbWVudChvLml0ZW0pLHQ9bi53cml0ZXI7aWYobnVsbCE9PW8uYXR0cmlidXRlT2xkVmFsdWUmJmkpaWYoJ2NsYXNzJz09aS5rZXkpe2NvbnN0IG89QXJyYXkuaXNBcnJheShpLnZhbHVlKT9pLnZhbHVlOltpLnZhbHVlXTtmb3IoY29uc3QgbiBvZiBvKXQucmVtb3ZlQ2xhc3MobixlKX1lbHNlIGlmKCdzdHlsZSc9PWkua2V5KXtjb25zdCBvPU9iamVjdC5rZXlzKGkudmFsdWUpO2Zvcihjb25zdCBuIG9mIG8pdC5yZW1vdmVTdHlsZShuLGUpfWVsc2UgdC5yZW1vdmVBdHRyaWJ1dGUoaS5rZXksZSk7aWYobnVsbCE9PW8uYXR0cmlidXRlTmV3VmFsdWUmJnIpaWYoJ2NsYXNzJz09ci5rZXkpe2NvbnN0IG89QXJyYXkuaXNBcnJheShyLnZhbHVlKT9yLnZhbHVlOltyLnZhbHVlXTtmb3IoY29uc3QgbiBvZiBvKXQuYWRkQ2xhc3MobixlKX1lbHNlIGlmKCdzdHlsZSc9PXIua2V5KXtjb25zdCBvPU9iamVjdC5rZXlzKHIudmFsdWUpO2Zvcihjb25zdCBuIG9mIG8pdC5zZXRTdHlsZShuLHIudmFsdWVbbl0sZSl9ZWxzZSB0LnNldEF0dHJpYnV0ZShyLmtleSxyLnZhbHVlLGUpfX19ZnVuY3Rpb24gUHQoZSl7cmV0dXJuKHQsbyxuKT0+e2NvbnN0IGk9ZShvLmF0dHJpYnV0ZU9sZFZhbHVlLG4ud3JpdGVyKSxyPWUoby5hdHRyaWJ1dGVOZXdWYWx1ZSxuLndyaXRlcik7aWYoKGl8fHIpJiZuLmNvbnN1bWFibGUuY29uc3VtZShvLml0ZW0sdC5uYW1lKSl7Y29uc3QgZT1uLndyaXRlcix0PWUuZG9jdW1lbnQuc2VsZWN0aW9uO2lmKG8uaXRlbSBpbnN0YW5jZW9mIFl1fHxvLml0ZW0gaW5zdGFuY2VvZiBlbSllLndyYXAodC5nZXRGaXJzdFJhbmdlKCkscik7ZWxzZXtsZXQgdD1uLm1hcHBlci50b1ZpZXdSYW5nZShvLnJhbmdlKTtudWxsIT09by5hdHRyaWJ1dGVPbGRWYWx1ZSYmaSYmKHQ9ZS51bndyYXAodCxpKSksbnVsbCE9PW8uYXR0cmlidXRlTmV3VmFsdWUmJnImJmUud3JhcCh0LHIpfX19fWZ1bmN0aW9uIEV0KGUsdCl7cmV0dXJuKG8sbik9Pntjb25zdCBpPW4ubmV3U2VsZWN0aW9uLHI9bmV3IFl1LGE9W107Zm9yKGNvbnN0IGUgb2YgaS5nZXRSYW5nZXMoKSlhLnB1c2godC50b01vZGVsUmFuZ2UoZSkpO3Iuc2V0VG8oYSx7YmFja3dhcmQ6aS5pc0JhY2t3YXJkfSksci5pc0VxdWFsKGUuZG9jdW1lbnQuc2VsZWN0aW9uKXx8ZS5jaGFuZ2UoKGUpPT57ZS5zZXRTZWxlY3Rpb24ocil9KX19ZnVuY3Rpb24gU3QoKXtyZXR1cm4oZSx0LG8pPT57Y29uc3Qgbj10LnNlbGVjdGlvbjtpZighbi5pc0NvbGxhcHNlZCYmby5jb25zdW1hYmxlLmNvbnN1bWUobiwnc2VsZWN0aW9uJykpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2Ygbi5nZXRSYW5nZXMoKSl7Y29uc3Qgbj1vLm1hcHBlci50b1ZpZXdSYW5nZSh0KTtlLnB1c2gobil9by53cml0ZXIuc2V0U2VsZWN0aW9uKGUse2JhY2t3YXJkOm4uaXNCYWNrd2FyZH0pfX19ZnVuY3Rpb24gT3QoKXtyZXR1cm4oZSx0LG8pPT57Y29uc3Qgbj10LnNlbGVjdGlvbjtpZihuLmlzQ29sbGFwc2VkJiZvLmNvbnN1bWFibGUuY29uc3VtZShuLCdzZWxlY3Rpb24nKSl7Y29uc3QgZT1vLndyaXRlcix0PW4uZ2V0Rmlyc3RQb3NpdGlvbigpLGk9by5tYXBwZXIudG9WaWV3UG9zaXRpb24odCkscj1lLmJyZWFrQXR0cmlidXRlcyhpKTtlLnNldFNlbGVjdGlvbihyKX19fWZ1bmN0aW9uIFJ0KCl7cmV0dXJuKGUsdCxvKT0+e2NvbnN0IG49by53cml0ZXIsaT1uLmRvY3VtZW50LnNlbGVjdGlvbjtmb3IoY29uc3QgbiBvZiBpLmdldFJhbmdlcygpKW4uaXNDb2xsYXBzZWQmJm4uZW5kLnBhcmVudC5kb2N1bWVudCYmby53cml0ZXIubWVyZ2VBdHRyaWJ1dGVzKG4uc3RhcnQpO24uc2V0U2VsZWN0aW9uKG51bGwpfX1mdW5jdGlvbiBJdChlLHQpe2NvbnN0IG89RnQoKTtpZigxPT09byYmKGU9T2JqZWN0LmtleXMod2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OUylbMF0pLDA9PT1vfHwhVnQoZSx0KSlyZXR1cm4gdC5yZXBsYWNlKC8gXFxbY29udGV4dDogW15cXF1dK1xcXSQvLCcnKTtjb25zdCBuPXdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlNbZV07cmV0dXJuIG5bdF0ucmVwbGFjZSgvIFxcW2NvbnRleHQ6IFteXFxdXStcXF0kLywnJyl9ZnVuY3Rpb24gVnQoZSx0KXtyZXR1cm4gZSBpbiB3aW5kb3cuQ0tFRElUT1JfVFJBTlNMQVRJT05TJiZ0IGluIHdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlNbZV19ZnVuY3Rpb24gRnQoKXtyZXR1cm4gT2JqZWN0LmtleXMod2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OUykubGVuZ3RofWZ1bmN0aW9uIE50KGUsdCl7Y29uc3Qgbz17bmFtZTp0LGFsbG93SW46W10sYWxsb3dDb250ZW50T2Y6W10sYWxsb3dXaGVyZTpbXSxhbGxvd0F0dHJpYnV0ZXM6W10sYWxsb3dBdHRyaWJ1dGVzT2Y6W10saW5oZXJpdFR5cGVzRnJvbTpbXX07cmV0dXJuIHF0KGUsbyksV3QoZSxvLCdhbGxvd0luJyksV3QoZSxvLCdhbGxvd0NvbnRlbnRPZicpLFd0KGUsbywnYWxsb3dXaGVyZScpLFd0KGUsbywnYWxsb3dBdHRyaWJ1dGVzJyksV3QoZSxvLCdhbGxvd0F0dHJpYnV0ZXNPZicpLFd0KGUsbywnaW5oZXJpdFR5cGVzRnJvbScpLFV0KGUsbyksb31mdW5jdGlvbiBNdChlLHQpe2Zvcihjb25zdCBvIG9mIGVbdF0uYWxsb3dDb250ZW50T2YpaWYoZVtvXSl7Y29uc3Qgbj1IdChlLG8pO24uZm9yRWFjaCgoZSk9PntlLmFsbG93SW4ucHVzaCh0KX0pfWRlbGV0ZSBlW3RdLmFsbG93Q29udGVudE9mfWZ1bmN0aW9uIER0KGUsdCl7Zm9yKGNvbnN0IG8gb2YgZVt0XS5hbGxvd1doZXJlKXtjb25zdCBuPWVbb107aWYobil7Y29uc3Qgbz1uLmFsbG93SW47ZVt0XS5hbGxvd0luLnB1c2goLi4ubyl9fWRlbGV0ZSBlW3RdLmFsbG93V2hlcmV9ZnVuY3Rpb24gQnQoZSx0KXtmb3IoY29uc3QgbyBvZiBlW3RdLmFsbG93QXR0cmlidXRlc09mKXtjb25zdCBuPWVbb107aWYobil7Y29uc3Qgbz1uLmFsbG93QXR0cmlidXRlcztlW3RdLmFsbG93QXR0cmlidXRlcy5wdXNoKC4uLm8pfX1kZWxldGUgZVt0XS5hbGxvd0F0dHJpYnV0ZXNPZn1mdW5jdGlvbiBMdChlLHQpe2NvbnN0IG89ZVt0XTtmb3IoY29uc3QgbiBvZiBvLmluaGVyaXRUeXBlc0Zyb20pe2NvbnN0IHQ9ZVtuXTtpZih0KXtjb25zdCBlPU9iamVjdC5rZXlzKHQpLmZpbHRlcigoZSk9PmUuc3RhcnRzV2l0aCgnaXMnKSk7Zm9yKGNvbnN0IG4gb2YgZSluIGluIG98fChvW25dPXRbbl0pfX1kZWxldGUgby5pbmhlcml0VHlwZXNGcm9tfWZ1bmN0aW9uIHp0KGUsdCl7Y29uc3Qgbz1lW3RdLG49by5hbGxvd0luLmZpbHRlcigodCk9PmVbdF0pO28uYWxsb3dJbj1BcnJheS5mcm9tKG5ldyBTZXQobikpfWZ1bmN0aW9uIGp0KGUsdCl7Y29uc3Qgbz1lW3RdO28uYWxsb3dBdHRyaWJ1dGVzPUFycmF5LmZyb20obmV3IFNldChvLmFsbG93QXR0cmlidXRlcykpfWZ1bmN0aW9uIHF0KGUsdCl7Zm9yKGNvbnN0IG8gb2YgZSl7Y29uc3QgZT1PYmplY3Qua2V5cyhvKS5maWx0ZXIoKGUpPT5lLnN0YXJ0c1dpdGgoJ2lzJykpO2Zvcihjb25zdCBuIG9mIGUpdFtuXT1vW25dfX1mdW5jdGlvbiBXdChlLHQsbyl7Zm9yKGNvbnN0IG4gb2YgZSknc3RyaW5nJz09dHlwZW9mIG5bb10/dFtvXS5wdXNoKG5bb10pOkFycmF5LmlzQXJyYXkobltvXSkmJnRbb10ucHVzaCguLi5uW29dKX1mdW5jdGlvbiBVdChlLHQpe2Zvcihjb25zdCBvIG9mIGUpe2NvbnN0IGU9by5pbmhlcml0QWxsRnJvbTtlJiYodC5hbGxvd0NvbnRlbnRPZi5wdXNoKGUpLHQuYWxsb3dXaGVyZS5wdXNoKGUpLHQuYWxsb3dBdHRyaWJ1dGVzT2YucHVzaChlKSx0LmluaGVyaXRUeXBlc0Zyb20ucHVzaChlKSl9fWZ1bmN0aW9uIEh0KGUsdCl7Y29uc3Qgbz1lW3RdO3JldHVybiBLdChlKS5maWx0ZXIoKGUpPT5lLmFsbG93SW4uaW5jbHVkZXMoby5uYW1lKSl9ZnVuY3Rpb24gS3QoZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLm1hcCgodCk9PmVbdF0pfWZ1bmN0aW9uIEd0KGUpe3JldHVybidzdHJpbmcnPT10eXBlb2YgZT97bmFtZTplLCpnZXRBdHRyaWJ1dGVLZXlzKCl7fSxnZXRBdHRyaWJ1dGUoKXt9fTp7bmFtZTplLmlzKCdlbGVtZW50Jyk/ZS5uYW1lOickdGV4dCcsKmdldEF0dHJpYnV0ZUtleXMoKXt5aWVsZCplLmdldEF0dHJpYnV0ZUtleXMoKX0sZ2V0QXR0cmlidXRlKHQpe3JldHVybiBlLmdldEF0dHJpYnV0ZSh0KX19fWZ1bmN0aW9uKiR0KGUsdCl7Zm9yKGxldCBvPSExOyFvOyl7aWYobz0hMCxlKXtjb25zdCB0PWUubmV4dCgpO3QuZG9uZXx8KG89ITEseWllbGR7d2Fsa2VyOmUsdmFsdWU6dC52YWx1ZX0pfWlmKHQpe2NvbnN0IGU9dC5uZXh0KCk7ZS5kb25lfHwobz0hMSx5aWVsZHt3YWxrZXI6dCx2YWx1ZTplLnZhbHVlfSl9fX1mdW5jdGlvbiBKdChlLHQpe2NvbnN0IG89bmV3IFNldCxuPW5ldyBNYXAsaT1HdS5jcmVhdGVJbihlKS5nZXRJdGVtcygpO2Zvcihjb25zdCBuIG9mIGkpJyRtYXJrZXInPT1uLm5hbWUmJm8uYWRkKG4pO2Zvcihjb25zdCBpIG9mIG8pe2NvbnN0IGU9aS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpLG89S3UuY3JlYXRlQmVmb3JlKGkpO24uaGFzKGUpP24uZ2V0KGUpLmVuZD1LdS5jcmVhdGVGcm9tUG9zaXRpb24obyk6bi5zZXQoZSxuZXcgR3UoS3UuY3JlYXRlRnJvbVBvc2l0aW9uKG8pKSksdC5yZW1vdmUoaSl9cmV0dXJuIG59ZnVuY3Rpb24gUXQoZSx0KXtsZXQgbztmb3IoY29uc3QgbiBvZiBuZXcgY20oZSkpe2NvbnN0IGU9e307Zm9yKGNvbnN0IHQgb2Ygbi5nZXRBdHRyaWJ1dGVLZXlzKCkpZVt0XT1uLmdldEF0dHJpYnV0ZSh0KTtjb25zdCBpPXQuY3JlYXRlRWxlbWVudChuLm5hbWUsZSk7byYmdC5hcHBlbmQoaSxvKSxvPUt1LmNyZWF0ZUF0KGkpfXJldHVybiBvfWZ1bmN0aW9uIFl0KGUpe2U9b20oZSk7Y29uc3QgdD10byhlKSxvPWVvKGUpLG49bz8nZWxlbWVudDonK286J2VsZW1lbnQnO3JldHVybihvKT0+e28ub24obix0LHtwcmlvcml0eTplLnByaW9yaXR5fHwnbm9ybWFsJ30pfX1mdW5jdGlvbiBYdChlKXtlPW9tKGUpLGlvKGUpO2NvbnN0IHQ9cm8oZSksbz1lbyhlKSxuPW8/J2VsZW1lbnQ6JytvOidlbGVtZW50JztyZXR1cm4obyk9PntvLm9uKG4sdCx7cHJpb3JpdHk6ZS5wcmlvcml0eXx8J25vcm1hbCd9KX19ZnVuY3Rpb24gWnQoZSl7ZT1vbShlKTtsZXQgdD1udWxsOygnc3RyaW5nJz09dHlwZW9mIGUudmlld3x8ZS52aWV3LmtleSkmJih0PW5vKGUpKSxpbyhlLHQpO2NvbnN0IG89cm8oZSk7cmV0dXJuKHQpPT57dC5vbignZWxlbWVudCcsbyx7cHJpb3JpdHk6ZS5wcmlvcml0eXx8J2xvdyd9KX19ZnVuY3Rpb24gZW8oZSl7cmV0dXJuJ3N0cmluZyc9PXR5cGVvZiBlLnZpZXc/ZS52aWV3OidvYmplY3QnPT10eXBlb2YgZS52aWV3JiYnc3RyaW5nJz09dHlwZW9mIGUudmlldy5uYW1lP2Uudmlldy5uYW1lOm51bGx9ZnVuY3Rpb24gdG8oZSl7Y29uc3QgdD1uZXcgSWQoZS52aWV3KTtyZXR1cm4obyxuLGkpPT57Y29uc3Qgcj10Lm1hdGNoKG4udmlld0l0ZW0pO2lmKHIpe3IubWF0Y2gubmFtZT0hMDtjb25zdCB0PW9vKGUubW9kZWwsbi52aWV3SXRlbSxpLndyaXRlcik7aWYodCYmaS5jb25zdW1hYmxlLnRlc3Qobi52aWV3SXRlbSxyLm1hdGNoKSl7Y29uc3QgZT1pLnNwbGl0VG9BbGxvd2VkUGFyZW50KHQsbi5tb2RlbEN1cnNvcik7aWYoZSl7aS53cml0ZXIuaW5zZXJ0KHQsZS5wb3NpdGlvbik7Y29uc3Qgbz1pLmNvbnZlcnRDaGlsZHJlbihuLnZpZXdJdGVtLEt1LmNyZWF0ZUF0KHQpKTtpLmNvbnN1bWFibGUuY29uc3VtZShuLnZpZXdJdGVtLHIubWF0Y2gpLG4ubW9kZWxSYW5nZT1uZXcgR3UoS3UuY3JlYXRlQmVmb3JlKHQpLEt1LmNyZWF0ZUFmdGVyKG8ubW9kZWxDdXJzb3IucGFyZW50KSksbi5tb2RlbEN1cnNvcj1lLmN1cnNvclBhcmVudD9LdS5jcmVhdGVBdChlLmN1cnNvclBhcmVudCk6bi5tb2RlbFJhbmdlLmVuZH19fX19ZnVuY3Rpb24gb28oZSx0LG8pe3JldHVybiBlIGluc3RhbmNlb2YgRnVuY3Rpb24/ZSh0LG8pOm8uY3JlYXRlRWxlbWVudChlKX1mdW5jdGlvbiBubyhlKXsnc3RyaW5nJz09dHlwZW9mIGUudmlldyYmKGUudmlldz17a2V5OmUudmlld30pO2NvbnN0IHQ9ZS52aWV3LmtleTtsZXQgbztpZignY2xhc3MnPT10fHwnc3R5bGUnPT10KXtjb25zdCBuPSdjbGFzcyc9PXQ/J2NsYXNzZXMnOidzdHlsZXMnO289e1tuXTplLnZpZXcudmFsdWV9fWVsc2V7Y29uc3Qgbj0ndW5kZWZpbmVkJz09dHlwZW9mIGUudmlldy52YWx1ZT8vW1xcc1xcU10qLzplLnZpZXcudmFsdWU7bz17YXR0cmlidXRlczp7W3RdOm59fX1yZXR1cm4gZS52aWV3Lm5hbWUmJihvLm5hbWU9ZS52aWV3Lm5hbWUpLGUudmlldz1vLHR9ZnVuY3Rpb24gaW8oZSx0PW51bGwpe2NvbnN0IG89J29iamVjdCc9PXR5cGVvZiBlLm1vZGVsP2UubW9kZWwua2V5OmUubW9kZWwsbj0nb2JqZWN0JyE9dHlwZW9mIGUubW9kZWx8fCd1bmRlZmluZWQnPT10eXBlb2YgZS5tb2RlbC52YWx1ZT8hKG51bGwhPT10KXx8KChlKT0+ZS5nZXRBdHRyaWJ1dGUodCkpOmUubW9kZWwudmFsdWU7ZS5tb2RlbD17a2V5Om8sdmFsdWU6bn19ZnVuY3Rpb24gcm8oZSl7Y29uc3QgdD1uZXcgSWQoZS52aWV3KTtyZXR1cm4obyxuLGkpPT57Y29uc3Qgcj10Lm1hdGNoKG4udmlld0l0ZW0pO2lmKHIpe2NvbnN0IHQ9ZS5tb2RlbC5rZXksbz0nZnVuY3Rpb24nPT10eXBlb2YgZS5tb2RlbC52YWx1ZT9lLm1vZGVsLnZhbHVlKG4udmlld0l0ZW0pOmUubW9kZWwudmFsdWU7aWYobnVsbCE9PW8mJihhbyhlKT9yLm1hdGNoLm5hbWU9ITA6ZGVsZXRlIHIubWF0Y2gubmFtZSwhIWkuY29uc3VtYWJsZS50ZXN0KG4udmlld0l0ZW0sci5tYXRjaCkpKXtuLm1vZGVsUmFuZ2V8fChuPU9iamVjdC5hc3NpZ24obixpLmNvbnZlcnRDaGlsZHJlbihuLnZpZXdJdGVtLG4ubW9kZWxDdXJzb3IpKSk7Y29uc3QgZT1zbyhuLm1vZGVsUmFuZ2Use2tleTp0LHZhbHVlOm99LGkpO2UmJmkuY29uc3VtYWJsZS5jb25zdW1lKG4udmlld0l0ZW0sci5tYXRjaCl9fX19ZnVuY3Rpb24gYW8oZSl7cmV0dXJuISEoJ29iamVjdCchPXR5cGVvZiBlLnZpZXd8fGVvKGUpKSYmIWUudmlldy5jbGFzc2VzJiYhZS52aWV3LmF0dHJpYnV0ZXMmJiFlLnZpZXcuc3R5bGVzfWZ1bmN0aW9uIHNvKGUsdCxvKXtsZXQgbj0hMTtmb3IoY29uc3QgaSBvZiBBcnJheS5mcm9tKGUuZ2V0SXRlbXMoKSkpby5zY2hlbWEuY2hlY2tBdHRyaWJ1dGUoaSx0LmtleSkmJihvLndyaXRlci5zZXRBdHRyaWJ1dGUodC5rZXksdC52YWx1ZSxpKSxuPSEwKTtyZXR1cm4gbn1mdW5jdGlvbiBsbygpe3JldHVybihlLHQsbyk9PntpZighdC5tb2RlbFJhbmdlJiZvLmNvbnN1bWFibGUuY29uc3VtZSh0LnZpZXdJdGVtLHtuYW1lOiEwfSkpe2NvbnN0e21vZGVsUmFuZ2U6ZSxtb2RlbEN1cnNvcjpufT1vLmNvbnZlcnRDaGlsZHJlbih0LnZpZXdJdGVtLHQubW9kZWxDdXJzb3IpO3QubW9kZWxSYW5nZT1lLHQubW9kZWxDdXJzb3I9bn19fWZ1bmN0aW9uIGNvKCl7cmV0dXJuKGUsdCxvKT0+e2lmKG8uc2NoZW1hLmNoZWNrQ2hpbGQodC5tb2RlbEN1cnNvciwnJHRleHQnKSYmby5jb25zdW1hYmxlLmNvbnN1bWUodC52aWV3SXRlbSkpe2NvbnN0IGU9by53cml0ZXIuY3JlYXRlVGV4dCh0LnZpZXdJdGVtLmRhdGEpO28ud3JpdGVyLmluc2VydChlLHQubW9kZWxDdXJzb3IpLHQubW9kZWxSYW5nZT1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0Lm1vZGVsQ3Vyc29yLGUub2Zmc2V0U2l6ZSksdC5tb2RlbEN1cnNvcj10Lm1vZGVsUmFuZ2UuZW5kfX19ZnVuY3Rpb24gdW8oZSl7Y29uc3QgdD1bXSxvPWUucm9vdC5kb2N1bWVudDtpZighbylyZXR1cm5bXTtjb25zdCBuPUd1LmNyZWF0ZUluKGUpO2Zvcihjb25zdCBpIG9mIG8ubW9kZWwubWFya2Vycyl7Y29uc3QgZT1uLmdldEludGVyc2VjdGlvbihpLmdldFJhbmdlKCkpO2UmJnQucHVzaChbaS5uYW1lLGVdKX1yZXR1cm4gdH1mdW5jdGlvbiBtbyhlLHQpe2Zvcihjb25zdCBvIG9mIGUpdChvKX1mdW5jdGlvbipwbyhlKXtpZihlLm1vZGVsLnZhbHVlcylmb3IoY29uc3QgdCBvZiBlLm1vZGVsLnZhbHVlcyl7Y29uc3Qgbz17a2V5OmUubW9kZWwua2V5LHZhbHVlOnR9LG49ZS52aWV3W3RdLGk9ZS51cGNhc3RBbHNvP2UudXBjYXN0QWxzb1t0XTp2b2lkIDA7eWllbGQqZ28obyxuLGkpfWVsc2UgeWllbGQqZ28oZS5tb2RlbCxlLnZpZXcsZS51cGNhc3RBbHNvKX1mdW5jdGlvbipnbyhlLHQsbyl7aWYoeWllbGR7bW9kZWw6ZSx2aWV3OnR9LG8pe289QXJyYXkuaXNBcnJheShvKT9vOltvXTtmb3IoY29uc3QgdCBvZiBvKXlpZWxke21vZGVsOmUsdmlldzp0fX19ZnVuY3Rpb24gZm8oZSl7cmV0dXJuJ3N0cmluZyc9PXR5cGVvZiBlP1tuZXcgenUoZSldOihQKGUpfHwoZT1bZV0pLEFycmF5LmZyb20oZSkubWFwKChlKT0+J3N0cmluZyc9PXR5cGVvZiBlP25ldyB6dShlKTplIGluc3RhbmNlb2YganU/bmV3IHp1KGUuZGF0YSxlLmdldEF0dHJpYnV0ZXMoKSk6ZSkpfWZ1bmN0aW9uIGhvKGUsdCl7dD13byh0KTtjb25zdCBvPXQucmVkdWNlKChlLHQpPT5lK3Qub2Zmc2V0U2l6ZSwwKSxuPWUucGFyZW50O3lvKGUpO2NvbnN0IGk9ZS5pbmRleDtyZXR1cm4gbi5faW5zZXJ0Q2hpbGQoaSx0KSx2byhuLGkrdC5sZW5ndGgpLHZvKG4saSksbmV3IEd1KGUsZS5nZXRTaGlmdGVkQnkobykpfWZ1bmN0aW9uIGJvKGUpe2lmKCFlLmlzRmxhdCl0aHJvdyBuZXcgWmEoJ29wZXJhdGlvbi11dGlscy1yZW1vdmUtcmFuZ2Utbm90LWZsYXQ6IFRyeWluZyB0byByZW1vdmUgYSByYW5nZSB3aGljaCBzdGFydHMgYW5kIGVuZHMgaW4gZGlmZmVyZW50IGVsZW1lbnQuJyk7Y29uc3QgdD1lLnN0YXJ0LnBhcmVudDt5byhlLnN0YXJ0KSx5byhlLmVuZCk7Y29uc3Qgbz10Ll9yZW1vdmVDaGlsZHJlbihlLnN0YXJ0LmluZGV4LGUuZW5kLmluZGV4LWUuc3RhcnQuaW5kZXgpO3JldHVybiB2byh0LGUuc3RhcnQuaW5kZXgpLG99ZnVuY3Rpb24ga28oZSx0KXtpZighZS5pc0ZsYXQpdGhyb3cgbmV3IFphKCdvcGVyYXRpb24tdXRpbHMtbW92ZS1yYW5nZS1ub3QtZmxhdDogVHJ5aW5nIHRvIG1vdmUgYSByYW5nZSB3aGljaCBzdGFydHMgYW5kIGVuZHMgaW4gZGlmZmVyZW50IGVsZW1lbnQuJyk7Y29uc3Qgbz1ibyhlKTtyZXR1cm4gdD10Ll9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24oZS5zdGFydCxlLmVuZC5vZmZzZXQtZS5zdGFydC5vZmZzZXQpLGhvKHQsbyl9ZnVuY3Rpb24gX28oZSx0LG8pe3lvKGUuc3RhcnQpLHlvKGUuZW5kKTtmb3IoY29uc3QgbiBvZiBlLmdldEl0ZW1zKCkpe2NvbnN0IGU9bi5pcygndGV4dFByb3h5Jyk/bi50ZXh0Tm9kZTpuO251bGw9PT1vP2UuX3JlbW92ZUF0dHJpYnV0ZSh0KTplLl9zZXRBdHRyaWJ1dGUodCxvKSx2byhlLnBhcmVudCxlLmluZGV4KX12byhlLmVuZC5wYXJlbnQsZS5lbmQuaW5kZXgpfWZ1bmN0aW9uIHdvKGUpe2NvbnN0IHQ9W107ZSBpbnN0YW5jZW9mIEFycmF5fHwoZT1bZV0pO2ZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKWlmKCdzdHJpbmcnPT10eXBlb2YgZVtvXSl0LnB1c2gobmV3IHp1KGVbb10pKTtlbHNlIGlmKGVbb11pbnN0YW5jZW9mIGp1KXQucHVzaChuZXcgenUoZVtvXS5kYXRhLGVbb10uZ2V0QXR0cmlidXRlcygpKSk7ZWxzZSBpZihlW29daW5zdGFuY2VvZiBmbXx8ZVtvXWluc3RhbmNlb2YgcXUpZm9yKGNvbnN0IG4gb2YgZVtvXSl0LnB1c2gobik7ZWxzZSBlW29daW5zdGFuY2VvZiBMdSYmdC5wdXNoKGVbb10pO2ZvcihsZXQgbz0xO288dC5sZW5ndGg7bysrKXtjb25zdCBlPXRbb10sbj10W28tMV07ZSBpbnN0YW5jZW9mIHp1JiZuIGluc3RhbmNlb2YgenUmJnhvKGUsbikmJih0LnNwbGljZShvLTEsMixuZXcgenUobi5kYXRhK2UuZGF0YSxuLmdldEF0dHJpYnV0ZXMoKSkpLG8tLSl9cmV0dXJuIHR9ZnVuY3Rpb24gdm8oZSx0KXtjb25zdCBvPWUuZ2V0Q2hpbGQodC0xKSxuPWUuZ2V0Q2hpbGQodCk7aWYobyYmbiYmby5pcygndGV4dCcpJiZuLmlzKCd0ZXh0JykmJnhvKG8sbikpe2NvbnN0IGk9bmV3IHp1KG8uZGF0YStuLmRhdGEsby5nZXRBdHRyaWJ1dGVzKCkpO2UuX3JlbW92ZUNoaWxkcmVuKHQtMSwyKSxlLl9pbnNlcnRDaGlsZCh0LTEsaSl9fWZ1bmN0aW9uIHlvKGUpe2NvbnN0IHQ9ZS50ZXh0Tm9kZSxvPWUucGFyZW50O2lmKHQpe2NvbnN0IG49ZS5vZmZzZXQtdC5zdGFydE9mZnNldCxpPXQuaW5kZXg7by5fcmVtb3ZlQ2hpbGRyZW4oaSwxKTtjb25zdCByPW5ldyB6dSh0LmRhdGEuc3Vic3RyKDAsbiksdC5nZXRBdHRyaWJ1dGVzKCkpLGE9bmV3IHp1KHQuZGF0YS5zdWJzdHIobiksdC5nZXRBdHRyaWJ1dGVzKCkpO28uX2luc2VydENoaWxkKGksW3IsYV0pfX1mdW5jdGlvbiB4byhlLHQpe2NvbnN0IG89ZS5nZXRBdHRyaWJ1dGVzKCksbj10LmdldEF0dHJpYnV0ZXMoKTtmb3IoY29uc3QgaSBvZiBvKXtpZihpWzFdIT09dC5nZXRBdHRyaWJ1dGUoaVswXSkpcmV0dXJuITE7bi5uZXh0KCl9cmV0dXJuIG4ubmV4dCgpLmRvbmV9ZnVuY3Rpb24gQ28oZSl7cmV0dXJuW2UuY2xvbmUoKV19ZnVuY3Rpb24gQW8oZSx0KXtmb3IobGV0IG89MDtvPHQubGVuZ3RoO28rKyl0W29dLmJhc2VWZXJzaW9uPWUrbysxO3JldHVybiB0fWZ1bmN0aW9uIFRvKGUsdCl7cmV0dXJuIG51bGw9PT1lLnRhcmdldFBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnkpfWZ1bmN0aW9uIFBvKGUpe3JldHVybiAwPT09ZS5sZW5ndGg/bnVsbDoxPT1lLmxlbmd0aD9lWzBdOihlWzBdLmVuZD1lW2UubGVuZ3RoLTFdLmVuZCxlWzBdKX1mdW5jdGlvbiBFbyhlLHQsbyl7Y29uc3Qgbj1bXTtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKyl7Y29uc3QgaT1TbyhlW3JdLHQsby5pc1N0aWNreSk7bi5wdXNoKGkpO2ZvcihsZXQgdD1yKzE7dDxlLmxlbmd0aDt0KyspZVt0XT1lW3RdLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShpLnNvdXJjZVBvc2l0aW9uLGkudGFyZ2V0UG9zaXRpb24saS5ob3dNYW55KVswXTt0PXQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKGkuc291cmNlUG9zaXRpb24saS50YXJnZXRQb3NpdGlvbixpLmhvd01hbnksITAsITEpfXJldHVybiBufWZ1bmN0aW9uIFNvKGUsdCxvKXtsZXQgbj0nJGdyYXZleWFyZCc9PXQucm9vdC5yb290TmFtZT93bTonJGdyYXZleWFyZCc9PWUuc3RhcnQucm9vdC5yb290TmFtZT9fbTprbTtjb25zdCBpPW5ldyBuKGUuc3RhcnQsZS5lbmQub2Zmc2V0LWUuc3RhcnQub2Zmc2V0LHQsMCk7cmV0dXJuIGkuaXNTdGlja3k9byxpfWZ1bmN0aW9uIE9vKGUsdCxvLG4saSl7dmFyIHI9LTEsYT1lLmxlbmd0aDtmb3Iob3x8KG89VW0pLGl8fChpPVtdKTsrK3I8YTspe3ZhciBzPWVbcl07MDx0JiZvKHMpPzE8dD9PbyhzLHQtMSxvLG4saSk6QWwoaSxzKTohbiYmKGlbaS5sZW5ndGhdPXMpfXJldHVybiBpfWZ1bmN0aW9uIFJvKGUsdCxvLG4pe3ZhciBpPW8ubGVuZ3RoLHI9aSxhPSFuO2lmKG51bGw9PWUpcmV0dXJuIXI7Zm9yKGU9T2JqZWN0KGUpO2ktLTspe3ZhciBzPW9baV07aWYoYSYmc1syXT9zWzFdIT09ZVtzWzBdXTohKHNbMF1pbiBlKSlyZXR1cm4hMX1mb3IoOysraTxyOyl7cz1vW2ldO3ZhciBsPXNbMF0sZD1lW2xdLGM9c1sxXTtpZighKGEmJnNbMl0pKXt2YXIgdT1uZXcgenM7aWYobil2YXIgbT1uKGQsYyxsLGUsdCx1KTtpZih2b2lkIDA9PT1tPyFidShjLGQsbix0cHxvcCx1KTohbSlyZXR1cm4hMX1lbHNlIGlmKHZvaWQgMD09PWQmJiEobCBpbiBlKSlyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBJbyhlLHQpe2lmKCdmdW5jdGlvbichPXR5cGVvZiBlfHx0JiYnZnVuY3Rpb24nIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKGNwKTt2YXIgbz1mdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxpPXQ/dC5hcHBseSh0aGlzLG4pOm5bMF0scj1vLmNhY2hlO2lmKHIuaGFzKGkpKXJldHVybiByLmdldChpKTt2YXIgYT1lLmFwcGx5KHRoaXMsbik7cmV0dXJuIG8uY2FjaGU9ci5zZXQoaSxhKSxhfTtyZXR1cm4gby5jYWNoZT1uZXcoSW8uQ2FjaGV8fExzKSxvfWZ1bmN0aW9uIFZvKGUsdCl7aWYoZGwoZSkpcmV0dXJuITE7dmFyIG89dHlwZW9mIGU7cmV0dXJuISEoJ251bWJlcic9PW98fCdzeW1ib2wnPT1vfHwnYm9vbGVhbic9PW98fG51bGw9PWV8fExkKGUpKXx8d3AudGVzdChlKXx8IV9wLnRlc3QoZSl8fG51bGwhPXQmJmUgaW4gT2JqZWN0KHQpfWZ1bmN0aW9uIEZvKGUsdCl7cmV0dXJuIHQgaW4gT2JqZWN0KGUpfWZ1bmN0aW9uIE5vKGUsdCl7Zm9yKGNvbnN0IG8gb2YgdClmb3IoY29uc3QgdCBvZiBvLm9wZXJhdGlvbnMpdC5iYXNlVmVyc2lvbj0rK2U7cmV0dXJuIHR9ZnVuY3Rpb24gTW8oZSl7cmV0dXJuIGUucmVkdWNlKChlLHQpPT5lK3Qub3BlcmF0aW9ucy5sZW5ndGgsMCl9ZnVuY3Rpb24gRG8oZSx0KXtjb25zdCBvPWVbZS5sZW5ndGgtMV07bGV0IG49by5vcGVyYXRpb25zLmxlbmd0aCtvLmJhc2VWZXJzaW9uO2NvbnN0IHI9bmV3IE9tO2ZvcihsZXQgbz0wO288dDtvKyspci5hZGRPcGVyYXRpb24obmV3IHhtKG4rKykpO2UucHVzaChyKX1mdW5jdGlvbiBCbyhlLHQsbyl7cW8oZSx0LG8pLExvKGUsdCxvKSxqbyh0LG8pLHpvKHQsbyl9ZnVuY3Rpb24gTG8oZSx0LG8pe2NvbnN0IG49by5vcmlnaW5hbERlbHRhLmdldCh0KTtpZihvLmRvY3VtZW50Lmhpc3RvcnkuaXNVbmRvaW5nRGVsdGEobikpe2NvbnN0IHQ9by5kb2N1bWVudC5oaXN0b3J5LmdldFVuZG9uZURlbHRhKG4pLGk9by53YXNBZmZlY3RlZC5nZXQoZSkscj1pLmdldCh0KTtyIT09dm9pZCAwJiYoby5pbnNlcnRCZWZvcmU9cil9fWZ1bmN0aW9uIHpvKGUsdCl7Y29uc3Qgbz10Lm9yaWdpbmFsRGVsdGEuZ2V0KGUpLG49dC5kb2N1bWVudC5oaXN0b3J5O3QuZm9yY2VOb3RTdGlja3k9bi5pc1VuZG9uZURlbHRhKG8pfHxuLmlzVW5kb2luZ0RlbHRhKG8pfWZ1bmN0aW9uIGpvKGUsdCl7Y29uc3Qgbz10LmRvY3VtZW50Lmhpc3Rvcnksbj10Lm9yaWdpbmFsRGVsdGEuZ2V0KGUpO3QuZm9yY2VXZWFrUmVtb3ZlPW8uaXNVbmRvbmVEZWx0YShuKX1mdW5jdGlvbiBxbyhlLHQsbyl7by53YXNBZmZlY3RlZC5nZXQoZSl8fG8ud2FzQWZmZWN0ZWQuc2V0KGUsbmV3IE1hcCk7Y29uc3Qgbj1vLm9yaWdpbmFsRGVsdGEuZ2V0KHQpO2xldCBpPSEhby53YXNBZmZlY3RlZC5nZXQoZSkuZ2V0KG4pO2Zvcihjb25zdCBuIG9mIGUub3BlcmF0aW9ucyl7Zm9yKGNvbnN0IGUgb2YgdC5vcGVyYXRpb25zKWlmKG4gaW5zdGFuY2VvZiBrbSYmZSBpbnN0YW5jZW9mIGttJiZXbyhuLGUpKXtpPSEwO2JyZWFrfWlmKGkpYnJlYWt9by53YXNBZmZlY3RlZC5nZXQoZSkuc2V0KG4saSl9ZnVuY3Rpb24gV28oZSx0KXtjb25zdCBvPWUudGFyZ2V0UG9zaXRpb24sbj10LnNvdXJjZVBvc2l0aW9uLGk9QShuLmdldFBhcmVudFBhdGgoKSxvLmdldFBhcmVudFBhdGgoKSk7cmV0dXJuIShvLnJvb3QhPW4ucm9vdCkmJidzYW1lJz09aSYmbi5vZmZzZXQ8by5vZmZzZXR9ZnVuY3Rpb24gVW8oZSx0LG8pe2RlbGV0ZSBvLmluc2VydEJlZm9yZSxkZWxldGUgby5mb3JjZU5vdFN0aWNreSxkZWxldGUgby5mb3JjZVdlYWtSZW1vdmU7Y29uc3Qgbj1vLndhc0FmZmVjdGVkLmdldChlKTtvLndhc0FmZmVjdGVkLmRlbGV0ZShlKTtmb3IoY29uc3QgaSBvZiB0KW8ud2FzQWZmZWN0ZWQuc2V0KGksbmV3IE1hcChuKSl9ZnVuY3Rpb24gSG8oZSx0KXtsZXQgbj1bXSxpPW51bGwsbztzd2l0Y2goZSl7Y2FzZSBGbTpjYXNlIE5tOmZvcihjb25zdCBlIG9mIHQpaT1lIGluc3RhbmNlb2YgeG0/bmV3IE9tOmUgaW5zdGFuY2VvZiB3bT9uZXcgTm06bmV3IEZtLGkuYWRkT3BlcmF0aW9uKGUpLG4ucHVzaChpKTtyZXR1cm4gbjtjYXNlIEltOmNhc2UgRG06cmV0dXJuIGk9bmV3IGUsaS5hZGRPcGVyYXRpb24odFswXSksaS5hZGRPcGVyYXRpb24odFsxXSksbj1IbyhGbSx0LnNsaWNlKDIpKSxbaV0uY29uY2F0KG4pO2Nhc2UgVm06Y2FzZSBCbTpyZXR1cm4gbj1IbyhGbSx0LnNsaWNlKDAsLTIpKSxpPW5ldyBlLGkuYWRkT3BlcmF0aW9uKHRbdC5sZW5ndGgtMl0pLGkuYWRkT3BlcmF0aW9uKHRbdC5sZW5ndGgtMV0pLG4uY29uY2F0KGkpO2Nhc2UgTW06cmV0dXJuIGk9dFswXWluc3RhbmNlb2YgeG0/bmV3IE9tOm5ldyBNbSxpLmFkZE9wZXJhdGlvbih0WzBdKSxbaV07Y2FzZSBSbTpmb3Iobz0wO288dC5sZW5ndGgmJiEhKHRbb11pbnN0YW5jZW9mIHhtKTtvKyspO289PXQubGVuZ3RoP2k9bmV3IE9tOihpPW5ldyBSbSwwIT1vJiZ0LnVuc2hpZnQodC5zcGxpY2UobywxKVswXSkpO2Zvcihjb25zdCBlIG9mIHQpaS5hZGRPcGVyYXRpb24oZSk7cmV0dXJuW2ldO2RlZmF1bHQ6aT1uZXcgZTtmb3IoY29uc3QgZSBvZiB0KWkuYWRkT3BlcmF0aW9uKGUpO3JldHVybltpXTt9fWZ1bmN0aW9uIEtvKGUsdCl7Y29uc3Qgbz1lLmNsb25lKCksbj1vLm9wZXJhdGlvbnNbMF07cmV0dXJuIG4ub2xkUmFuZ2UmJihuLm9sZFJhbmdlPW4ub2xkUmFuZ2UuZ2V0VHJhbnNmb3JtZWRCeURlbHRhKHQpWzBdKSxuLm5ld1JhbmdlJiYobi5uZXdSYW5nZT1uLm5ld1JhbmdlLmdldFRyYW5zZm9ybWVkQnlEZWx0YSh0KVswXSksW29dfWZ1bmN0aW9uIEdvKGUsdCl7ZnVuY3Rpb24gbygpe2NvbnN0IG89bmV3IEd1KGUucG9zaXRpb24uZ2V0U2hpZnRlZEJ5KHMpLGUucG9zaXRpb24uZ2V0U2hpZnRlZEJ5KGwpKSxpPW5ldyBibShvLHQua2V5LGEsdC52YWx1ZSwwKTtuLmFkZE9wZXJhdGlvbihpKX1jb25zdCBuPW5ldyBSbSxyPWUubm9kZXM7bGV0IGE9ci5nZXROb2RlKDApLmdldEF0dHJpYnV0ZSh0LmtleSkscz0wLGw9ci5nZXROb2RlKDApLm9mZnNldFNpemU7Zm9yKGxldCBuPTE7bjxyLmxlbmd0aDtuKyspe2NvbnN0IGU9ci5nZXROb2RlKG4pLGk9ZS5nZXRBdHRyaWJ1dGUodC5rZXkpO2khPWEmJihhIT10LnZhbHVlJiZvKCksYT1pLHM9bCksbCs9ZS5vZmZzZXRTaXplfXJldHVybiBvKCksbn1mdW5jdGlvbiAkbygpe2NvbnN0IGU9bmV3IE9tO3JldHVybiBlLmFkZE9wZXJhdGlvbihuZXcgeG0oMCkpLGV9ZnVuY3Rpb24gSm8oZSx0LG8sbil7ZnVuY3Rpb24gaSgpezA9PT1yLm9wZXJhdGlvbnMubGVuZ3RoJiZlLmJhdGNoLmFkZERlbHRhKHIpO2NvbnN0IG49bmV3IEd1KGwsZCksaT1uLnJvb3QuZG9jdW1lbnQ/cy52ZXJzaW9uOm51bGwsdT1uZXcgYm0obix0LGMsbyxpKTtyLmFkZE9wZXJhdGlvbih1KSxhLmFwcGx5T3BlcmF0aW9uKHUpfWNvbnN0IHI9bmV3IFJtLGE9ZS5tb2RlbCxzPWEuZG9jdW1lbnQ7bGV0IGw9bi5zdGFydCxkLGMsdTtmb3IoY29uc3QgciBvZiBuKXU9ci5pdGVtLmdldEF0dHJpYnV0ZSh0KSxkJiZjIT11JiYoYyE9byYmaSgpLGw9ZCksZD1yLm5leHRQb3NpdGlvbixjPXU7ZCBpbnN0YW5jZW9mIEt1JiZkIT1sJiZjIT1vJiZpKCl9ZnVuY3Rpb24gUW8oZSx0LG8sbil7Y29uc3QgaT1lLm1vZGVsLHI9aS5kb2N1bWVudCxhPW4uZ2V0QXR0cmlidXRlKHQpO2xldCBzLGw7aWYoYSE9byl7Y29uc3QgZD1uLnJvb3Q9PT1uLGM9ZD9uZXcgTGc6bmV3IFJtO2lmKGUuYmF0Y2guYWRkRGVsdGEoYyksZCl7Y29uc3QgZT1uLmRvY3VtZW50P3IudmVyc2lvbjpudWxsO2w9bmV3IEFtKG4sdCxhLG8sZSl9ZWxzZXtzPW4uaXMoJ2VsZW1lbnQnKT9uZXcgR3UoS3UuY3JlYXRlQmVmb3JlKG4pLEt1LmNyZWF0ZUZyb21QYXJlbnRBbmRPZmZzZXQobiwwKSk6bmV3IEd1KEt1LmNyZWF0ZUJlZm9yZShuKSxLdS5jcmVhdGVBZnRlcihuKSk7Y29uc3QgZT1zLnJvb3QuZG9jdW1lbnQ/ci52ZXJzaW9uOm51bGw7bD1uZXcgYm0ocyx0LGEsbyxlKX1jLmFkZE9wZXJhdGlvbihsKSxpLmFwcGx5T3BlcmF0aW9uKGwpfX1mdW5jdGlvbiBZbyhlLHQsbyxuKXtjb25zdCBpPWUubW9kZWwscj1pLmRvY3VtZW50LGE9bmV3IE5nLHM9bmV3IHltKHQsbyxuLGkubWFya2VycyxyLnZlcnNpb24pO2UuYmF0Y2guYWRkRGVsdGEoYSksYS5hZGRPcGVyYXRpb24ocyksaS5hcHBseU9wZXJhdGlvbihzKX1mdW5jdGlvbiBYbyhlLHQsbyxuKXtsZXQgaTtpZihlLnJvb3QuZG9jdW1lbnQpe2NvbnN0IG89bi5kb2N1bWVudCxyPW5ldyBLdShvLmdyYXZleWFyZCxbMF0pO2k9bmV3IHdtKGUsdCxyLG8udmVyc2lvbil9ZWxzZSBpPW5ldyB6ZyhlLHQpO28uYWRkT3BlcmF0aW9uKGkpLG4uYXBwbHlPcGVyYXRpb24oaSl9ZnVuY3Rpb24gWm8oZSx0KXtyZXR1cm4hKGUhPT10KXx8ISEoZSBpbnN0YW5jZW9mIGpnJiZ0IGluc3RhbmNlb2YgamcpfWZ1bmN0aW9uIGVuKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IG8gb2YgZSlpZihvLmlzKCd0ZXh0JykpZm9yKGxldCBlPTA7ZTxvLmRhdGEubGVuZ3RoO2UrKyl0LnB1c2goe25hbWU6JyR0ZXh0JyxhdHRyaWJ1dGVzOm5ldyBNYXAoby5nZXRBdHRyaWJ1dGVzKCkpfSk7ZWxzZSB0LnB1c2goe25hbWU6by5uYW1lLGF0dHJpYnV0ZXM6bmV3IE1hcChvLmdldEF0dHJpYnV0ZXMoKSl9KTtyZXR1cm4gdH1mdW5jdGlvbiB0bihlLHQpe2NvbnN0IG89W107bGV0IG49MCxpPTA7Zm9yKGNvbnN0IHIgb2YgdClyLm9mZnNldD5uJiYoby5wdXNoKC4uLidlJy5yZXBlYXQoci5vZmZzZXQtbikuc3BsaXQoJycpKSxpKz1yLm9mZnNldC1uKSwnaW5zZXJ0Jz09ci50eXBlPyhvLnB1c2goLi4uJ2knLnJlcGVhdChyLmhvd01hbnkpLnNwbGl0KCcnKSksbj1yLm9mZnNldCtyLmhvd01hbnkpOidyZW1vdmUnPT1yLnR5cGU/KG8ucHVzaCguLi4ncicucmVwZWF0KHIuaG93TWFueSkuc3BsaXQoJycpKSxuPXIub2Zmc2V0LGkrPXIuaG93TWFueSk6KG8ucHVzaCguLi4nYScucmVwZWF0KHIuaG93TWFueSkuc3BsaXQoJycpKSxuPXIub2Zmc2V0K3IuaG93TWFueSxpKz1yLmhvd01hbnkpO3JldHVybiBpPGUmJm8ucHVzaCguLi4nZScucmVwZWF0KGUtaSkuc3BsaXQoJycpKSxvfWZ1bmN0aW9uIG9uKGUpe2NvbnN0IHQ9ZS5wb3NpdGlvbiYmJyRncmF2ZXlhcmQnPT1lLnBvc2l0aW9uLnJvb3Qucm9vdE5hbWUsbz1lLnJhbmdlJiYnJGdyYXZleWFyZCc9PWUucmFuZ2Uucm9vdC5yb290TmFtZTtyZXR1cm4hdCYmIW99ZnVuY3Rpb24gbm4oZSl7cmV0dXJuISFlJiYxPT1lLmxlbmd0aCYmL1tcXHUwMzAwLVxcdTAzNmZcXHUxYWIwLVxcdTFhZmZcXHUxZGMwLVxcdTFkZmZcXHUyMGQwLVxcdTIwZmZcXHVmZTIwLVxcdWZlMmZdLy50ZXN0KGUpfWZ1bmN0aW9uIHJuKGUpe3JldHVybiEhZSYmMT09ZS5sZW5ndGgmJi9bXFx1ZDgwMC1cXHVkYmZmXS8udGVzdChlKX1mdW5jdGlvbiBhbihlKXtyZXR1cm4hIWUmJjE9PWUubGVuZ3RoJiYvW1xcdWRjMDAtXFx1ZGZmZl0vLnRlc3QoZSl9ZnVuY3Rpb24gc24oZSx0KXtyZXR1cm4gcm4oZS5jaGFyQXQodC0xKSkmJmFuKGUuY2hhckF0KHQpKX1mdW5jdGlvbiBsbihlLHQpe3JldHVybiBubihlLmNoYXJBdCh0KSl9ZnVuY3Rpb24gZG4oZSl7Y29uc3QgdD1lLnRleHROb2RlO2lmKHQpe2NvbnN0IG89dC5kYXRhLG49ZS5vZmZzZXQtdC5zdGFydE9mZnNldDtyZXR1cm4hc24obyxuKSYmIWxuKG8sbil9cmV0dXJuITB9ZnVuY3Rpb24gY24oKXtjb25zdCBlPW5ldyBTZXQoWydpbnNlcnQnLCdtb3ZlJywncmVtb3ZlJywncmVpbnNlcnQnXSk7dGhpcy5saXN0ZW5Ubyh0aGlzLnJvb3QuZG9jdW1lbnQubW9kZWwsJ2FwcGx5T3BlcmF0aW9uJywodCxvKT0+e2NvbnN0IG49b1swXTshbi5pc0RvY3VtZW50T3BlcmF0aW9ufHxlLmhhcyhuLnR5cGUpJiZ1bi5jYWxsKHRoaXMsbil9LHtwcmlvcml0eTonbG93J30pfWZ1bmN0aW9uIHVuKGUpe2xldCB0LG87J2luc2VydCc9PWUudHlwZT90PUd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUucG9zaXRpb24sZS5ub2Rlcy5tYXhPZmZzZXQpOih0PUd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUuZ2V0TW92ZWRSYW5nZVN0YXJ0KCksZS5ob3dNYW55KSxvPWUuc291cmNlUG9zaXRpb24pO2NvbnN0IG49dC5lbmQub2Zmc2V0LXQuc3RhcnQub2Zmc2V0O2xldCBpO3N3aXRjaChlLnR5cGUpe2Nhc2UnaW5zZXJ0Jzpjb25zdCByPSdzdGlja3NUb05leHQnPT10aGlzLnN0aWNraW5lc3M7aT10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHQuc3RhcnQsbixyKTticmVhaztjYXNlJ21vdmUnOmNhc2UncmVtb3ZlJzpjYXNlJ3JlaW5zZXJ0Jzpjb25zdCBhPUd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KG8sbikscz1hLmNvbnRhaW5zUG9zaXRpb24odGhpcyl8fGEuc3RhcnQuaXNFcXVhbCh0aGlzKSYmJ3N0aWNrc1RvTmV4dCc9PXRoaXMuc3RpY2tpbmVzc3x8YS5lbmQuaXNFcXVhbCh0aGlzKSYmJ3N0aWNrc1RvUHJldmlvdXMnPT10aGlzLnN0aWNraW5lc3M7aWYocylpPXRoaXMuX2dldENvbWJpbmVkKG8sdC5zdGFydCk7ZWxzZXtjb25zdCBlPSdzdGlja3NUb05leHQnPT10aGlzLnN0aWNraW5lc3Mscj10LnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKG8sbik7aT10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShvLHIsbixlKX19aWYoIXRoaXMuaXNFcXVhbChpKSl7Y29uc3QgZT1LdS5jcmVhdGVGcm9tUG9zaXRpb24odGhpcyk7dGhpcy5wYXRoPWkucGF0aCx0aGlzLnJvb3Q9aS5yb290LHRoaXMuZmlyZSgnY2hhbmdlJyxlKX19ZnVuY3Rpb24gbW4oZSx0LG8pe2UuY2hhbmdlKChuKT0+e28uaXNDb2xsYXBzZWR8fGUuZGVsZXRlQ29udGVudChvKTtjb25zdCBpPW5ldyBRZyhlLG4sby5hbmNob3IpO2xldCByO3I9dC5pcygnZG9jdW1lbnRGcmFnbWVudCcpP3QuZ2V0Q2hpbGRyZW4oKTpbdF0saS5oYW5kbGVOb2RlcyhyLHtpc0ZpcnN0OiEwLGlzTGFzdDohMH0pO2NvbnN0IGE9aS5nZXRTZWxlY3Rpb25SYW5nZSgpO2E/byBpbnN0YW5jZW9mIGVtP24uc2V0U2VsZWN0aW9uKGEpOm8uc2V0VG8oYSk6UnUud2FybignaW5zZXJ0Y29udGVudC1uby1yYW5nZTogQ2Fubm90IGRldGVybWluZSBhIHByb3BlciBzZWxlY3Rpb24gcmFuZ2UgYWZ0ZXIgaW5zZXJ0aW9uLicpfSl9ZnVuY3Rpb24gcG4oZSx0LG89e30pe2lmKHQuaXNDb2xsYXBzZWQpcmV0dXJuO2NvbnN0IG49ZS5zY2hlbWE7ZS5jaGFuZ2UoKGUpPT57aWYoIW8uZG9Ob3RSZXNldEVudGlyZUNvbnRlbnQmJl9uKG4sdCkpcmV0dXJuIHZvaWQga24oZSx0LG4pO2NvbnN0IGk9dC5nZXRGaXJzdFJhbmdlKCkscj1pLnN0YXJ0LGE9SmcuY3JlYXRlRnJvbVBvc2l0aW9uKGkuZW5kKTtpLnN0YXJ0LmlzVG91Y2hpbmcoaS5lbmQpfHxlLnJlbW92ZShpKSxvLmxlYXZlVW5tZXJnZWR8fChnbihlLHIsYSksbi5yZW1vdmVEaXNhbGxvd2VkQXR0cmlidXRlcyhyLnBhcmVudC5nZXRDaGlsZHJlbigpLGUpKSx0IGluc3RhbmNlb2YgZW0/ZS5zZXRTZWxlY3Rpb24ocik6dC5zZXRUbyhyKSxmbihuLHIpJiZibihlLHIsdCksYS5kZXRhY2goKX0pfWZ1bmN0aW9uIGduKGUsdCxvKXtjb25zdCBuPXQucGFyZW50LGk9by5wYXJlbnQ7aWYobiE9aSYmbi5wYXJlbnQmJmkucGFyZW50JiZobih0LG8sZS5tb2RlbC5zY2hlbWEpKXtmb3IodD1LdS5jcmVhdGVBZnRlcihuKSxvPUt1LmNyZWF0ZUJlZm9yZShpKSxvLmlzRXF1YWwodCl8fGUuaW5zZXJ0KGksdCksZS5tZXJnZSh0KTtvLnBhcmVudC5pc0VtcHR5Oyl7Y29uc3QgdD1vLnBhcmVudDtvPUt1LmNyZWF0ZUJlZm9yZSh0KSxlLnJlbW92ZSh0KX1nbihlLHQsbyl9fWZ1bmN0aW9uIGZuKGUsdCl7Y29uc3Qgbz1lLmNoZWNrQ2hpbGQodCwnJHRleHQnKSxuPWUuY2hlY2tDaGlsZCh0LCdwYXJhZ3JhcGgnKTtyZXR1cm4hbyYmbn1mdW5jdGlvbiBobihlLHQsbyl7Y29uc3Qgbj1uZXcgR3UoZSx0KTtmb3IoY29uc3QgaSBvZiBuLmdldFdhbGtlcigpKWlmKG8uaXNPYmplY3QoaS5pdGVtKXx8by5pc0xpbWl0KGkuaXRlbSkpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gYm4oZSx0LG8pe2NvbnN0IG49ZS5jcmVhdGVFbGVtZW50KCdwYXJhZ3JhcGgnKTtlLmluc2VydChuLHQpLG8gaW5zdGFuY2VvZiBlbT9lLnNldFNlbGVjdGlvbihuLDApOm8uc2V0VG8obiwwKX1mdW5jdGlvbiBrbihlLHQpe2NvbnN0IG89ZS5tb2RlbC5zY2hlbWEuZ2V0TGltaXRFbGVtZW50KHQpO2UucmVtb3ZlKEd1LmNyZWF0ZUluKG8pKSxibihlLEt1LmNyZWF0ZUF0KG8pLHQpfWZ1bmN0aW9uIF9uKGUsdCl7Y29uc3Qgbz1lLmdldExpbWl0RWxlbWVudCh0KTtpZighdC5jb250YWluc0VudGlyZUNvbnRlbnQobykpcmV0dXJuITE7Y29uc3Qgbj10LmdldEZpcnN0UmFuZ2UoKTtyZXR1cm4gbi5zdGFydC5wYXJlbnQhPW4uZW5kLnBhcmVudCYmZS5jaGVja0NoaWxkKG8sJ3BhcmFncmFwaCcpfWZ1bmN0aW9uIHduKGUsdCxvPXt9KXtjb25zdCBuPWUuc2NoZW1hLGk9J2JhY2t3YXJkJyE9by5kaXJlY3Rpb24scj1vLnVuaXQ/by51bml0OidjaGFyYWN0ZXInLGE9dC5mb2N1cyxzPW5ldyBVdSh7Ym91bmRhcmllczpDbihhLGkpLHNpbmdsZUNoYXJhY3RlcnM6ITAsZGlyZWN0aW9uOmk/J2ZvcndhcmQnOidiYWNrd2FyZCd9KSxsPXt3YWxrZXI6cyxzY2hlbWE6bixpc0ZvcndhcmQ6aSx1bml0OnJ9O2ZvcihsZXQgbjtuPXMubmV4dCgpOyl7aWYobi5kb25lKXJldHVybjtjb25zdCBvPXZuKGwsbi52YWx1ZSk7aWYobylyZXR1cm4gdm9pZCh0IGluc3RhbmNlb2YgZW0/ZS5jaGFuZ2UoKGUpPT57ZS5zZXRTZWxlY3Rpb25Gb2N1cyhvKX0pOnQuc2V0Rm9jdXMobykpfX1mdW5jdGlvbiB2bihlLHQpe2lmKCd0ZXh0Jz09dC50eXBlKXJldHVybid3b3JkJz09PWUudW5pdD94bihlLndhbGtlcixlLmlzRm9yd2FyZCk6eW4oZS53YWxrZXIsZS51bml0LGUuaXNGb3J3YXJkKTtpZih0LnR5cGU9PShlLmlzRm9yd2FyZD8nZWxlbWVudFN0YXJ0JzonZWxlbWVudEVuZCcpKXtpZihlLnNjaGVtYS5pc09iamVjdCh0Lml0ZW0pKXJldHVybiBLdS5jcmVhdGVBdCh0Lml0ZW0sZS5pc0ZvcndhcmQ/J2FmdGVyJzonYmVmb3JlJyk7aWYoZS5zY2hlbWEuY2hlY2tDaGlsZCh0Lm5leHRQb3NpdGlvbiwnJHRleHQnKSlyZXR1cm4gdC5uZXh0UG9zaXRpb259ZWxzZXtpZihlLnNjaGVtYS5pc0xpbWl0KHQuaXRlbSkpcmV0dXJuIHZvaWQgZS53YWxrZXIuc2tpcCgoKT0+ITApO2lmKGUuc2NoZW1hLmNoZWNrQ2hpbGQodC5uZXh0UG9zaXRpb24sJyR0ZXh0JykpcmV0dXJuIHQubmV4dFBvc2l0aW9ufX1mdW5jdGlvbiB5bihlLHQpe2NvbnN0IG89ZS5wb3NpdGlvbi50ZXh0Tm9kZTtpZihvKXtjb25zdCBuPW8uZGF0YTtmb3IobGV0IGk9ZS5wb3NpdGlvbi5vZmZzZXQtby5zdGFydE9mZnNldDtzbihuLGkpfHwnY2hhcmFjdGVyJz09dCYmbG4obixpKTspZS5uZXh0KCksaT1lLnBvc2l0aW9uLm9mZnNldC1vLnN0YXJ0T2Zmc2V0fXJldHVybiBlLnBvc2l0aW9ufWZ1bmN0aW9uIHhuKGUsdCl7bGV0IG89ZS5wb3NpdGlvbi50ZXh0Tm9kZTtpZihvKWZvcihsZXQgbj1lLnBvc2l0aW9uLm9mZnNldC1vLnN0YXJ0T2Zmc2V0OyFBbihvLmRhdGEsbix0KSYmIVRuKG8sbix0KTspe2UubmV4dCgpO2NvbnN0IGk9dD9lLnBvc2l0aW9uLm5vZGVBZnRlcjplLnBvc2l0aW9uLm5vZGVCZWZvcmU7aWYoaSl7Y29uc3Qgbj1pLmRhdGEuY2hhckF0KHQ/MDppLmRhdGEubGVuZ3RoLTEpO1lnLmluY2x1ZGVzKG4pfHwoZS5uZXh0KCksbz1lLnBvc2l0aW9uLnRleHROb2RlKX1uPWUucG9zaXRpb24ub2Zmc2V0LW8uc3RhcnRPZmZzZXR9cmV0dXJuIGUucG9zaXRpb259ZnVuY3Rpb24gQ24oZSx0KXtjb25zdCBvPWUucm9vdCxuPUt1LmNyZWF0ZUF0KG8sdD8nZW5kJzowKTtyZXR1cm4gdD9uZXcgR3UoZSxuKTpuZXcgR3UobixlKX1mdW5jdGlvbiBBbihlLHQsbyl7Y29uc3Qgbj10KyhvPzA6LTEpO3JldHVybiBZZy5pbmNsdWRlcyhlLmNoYXJBdChuKSl9ZnVuY3Rpb24gVG4oZSx0LG8pe3JldHVybiB0PT09KG8/ZS5lbmRPZmZzZXQ6MCl9ZnVuY3Rpb24gUG4oZSx0KXtyZXR1cm4gZS5jaGFuZ2UoKGUpPT57Y29uc3Qgbz1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxuPXQuZ2V0Rmlyc3RSYW5nZSgpO2lmKCFufHxuLmlzQ29sbGFwc2VkKXJldHVybiBvO2NvbnN0IGk9bi5zdGFydC5yb290LHI9bi5zdGFydC5nZXRDb21tb25QYXRoKG4uZW5kKSxhPWkuZ2V0Tm9kZUJ5UGF0aChyKTtsZXQgcz1uLnN0YXJ0LnBhcmVudD09bi5lbmQucGFyZW50P246R3UuY3JlYXRlRnJvbVBhcmVudHNBbmRPZmZzZXRzKGEsbi5zdGFydC5wYXRoW3IubGVuZ3RoXSxhLG4uZW5kLnBhdGhbci5sZW5ndGhdKzEpO2NvbnN0IGw9cy5lbmQub2Zmc2V0LXMuc3RhcnQub2Zmc2V0O2Zvcihjb25zdCB0IG9mIHMuZ2V0SXRlbXMoe3NoYWxsb3c6ITB9KSl0LmlzKCd0ZXh0UHJveHknKT9lLmFwcGVuZFRleHQodC5kYXRhLHQuZ2V0QXR0cmlidXRlcygpLG8pOmUuYXBwZW5kKHQuX2Nsb25lKCEwKSxvKTtpZihzIT1uKXtjb25zdCB0PW4uX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHMuc3RhcnQsS3UuY3JlYXRlQXQobywwKSxsKVswXSxpPW5ldyBHdShLdS5jcmVhdGVBdChvKSx0LnN0YXJ0KSxyPW5ldyBHdSh0LmVuZCxLdS5jcmVhdGVBdChvLCdlbmQnKSk7RW4ocixlKSxFbihpLGUpfXJldHVybiBvfSl9ZnVuY3Rpb24gRW4oZSx0KXtjb25zdCBvPVtdO0FycmF5LmZyb20oZS5nZXRJdGVtcyh7ZGlyZWN0aW9uOidiYWNrd2FyZCd9KSkubWFwKChlKT0+R3UuY3JlYXRlT24oZSkpLmZpbHRlcigodCk9Pntjb25zdCBvPSh0LnN0YXJ0LmlzQWZ0ZXIoZS5zdGFydCl8fHQuc3RhcnQuaXNFcXVhbChlLnN0YXJ0KSkmJih0LmVuZC5pc0JlZm9yZShlLmVuZCl8fHQuZW5kLmlzRXF1YWwoZS5lbmQpKTtyZXR1cm4gb30pLmZvckVhY2goKGUpPT57by5wdXNoKGUuc3RhcnQucGFyZW50KSx0LnJlbW92ZShlKX0pLG8uZm9yRWFjaCgoZSk9Pntmb3IobGV0IG89ZTtvLnBhcmVudCYmby5pc0VtcHR5Oyl7Y29uc3QgZT1HdS5jcmVhdGVPbihvKTtvPW8ucGFyZW50LHQucmVtb3ZlKGUpfX0pfWZ1bmN0aW9uIFNuKGUsdCl7ZSBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQmJihlLnZhbHVlPXQpLGUuaW5uZXJIVE1MPXR9ZnVuY3Rpb24gT24oZSl7aWYoIWhzKGUudXBkYXRlRWxlbWVudCkpdGhyb3cgbmV3IFphKCdhdHRhY2h0b2Zvcm0tbWlzc2luZy1lbGVtZW50YXBpLWludGVyZmFjZTogRWxlbWVudEFwaSBpbnRlcmZhY2UgaXMgcmVxdWlyZWQuJyk7Y29uc3QgdD1lLmVsZW1lbnQ7aWYodCYmJ3RleHRhcmVhJz09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZ0LmZvcm0pe2xldCBvO2NvbnN0IG49dC5mb3JtLGk9KCk9PmUudXBkYXRlRWxlbWVudCgpO2hzKG4uc3VibWl0KSYmKG89bi5zdWJtaXQsbi5zdWJtaXQ9KCk9PntpKCksby5hcHBseShuKX0pLG4uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JyxpKSxlLm9uKCdkZXN0cm95JywoKT0+e24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JyxpKSxvJiYobi5zdWJtaXQ9byl9KX19ZnVuY3Rpb24gUm4oZSl7cmV0dXJuKGUrJycpLnRvTG93ZXJDYXNlKCl9ZnVuY3Rpb24gSW4oe29yaWdpbjplLG9yaWdpbktleXN0cm9rZUhhbmRsZXI6dCxvcmlnaW5Gb2N1c1RyYWNrZXI6byx0b29sYmFyOm4sYmVmb3JlRm9jdXM6aSxhZnRlckJsdXI6cn0pe28uYWRkKG4uZWxlbWVudCksdC5zZXQoJ0FsdCtGMTAnLChlLHQpPT57by5pc0ZvY3VzZWQmJiFuLmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQmJihpJiZpKCksbi5mb2N1cygpLHQoKSl9KSxuLmtleXN0cm9rZXMuc2V0KCdFc2MnLCh0LG8pPT57bi5mb2N1c1RyYWNrZXIuaXNGb2N1c2VkJiYoZS5mb2N1cygpLHImJnIoKSxvKCkpfSl9ZnVuY3Rpb24gVm4oZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/e2l0ZW1zOmV9OmU/T2JqZWN0LmFzc2lnbih7aXRlbXM6W119LGUpOntpdGVtczpbXX19ZnVuY3Rpb24gRm4oZSl7cmV0dXJuIGUuZXZlcnkoKGUpPT4nc3RyaW5nJz09dHlwZW9mIGUpfWZ1bmN0aW9uIE5uKGUpe3JldHVybiEhZSYmKChlLnZhbHVlJiYoZT1lLnZhbHVlKSxBcnJheS5pc0FycmF5KGUpKT9lLnNvbWUoTm4pOiEhKGUgaW5zdGFuY2VvZiBwZikpfWZ1bmN0aW9uIE1uKGUsdCl7cmV0dXJuIGUubWFwKChlKT0+ZSBpbnN0YW5jZW9mIHBmP2UuZ2V0VmFsdWUodCk6ZSl9ZnVuY3Rpb24gRG4oZSx0LHtub2RlOm99KXtsZXQgbj1NbihlLG8pO249MT09ZS5sZW5ndGgmJmVbMF1pbnN0YW5jZW9mIGZmP25bMF06bi5yZWR1Y2UoJG4sJycpLFluKG4pP3QucmVtb3ZlKCk6dC5zZXQobil9ZnVuY3Rpb24gQm4oZSl7cmV0dXJue3NldCh0KXtlLnRleHRDb250ZW50PXR9LHJlbW92ZSgpe2UudGV4dENvbnRlbnQ9Jyd9fX1mdW5jdGlvbiBMbihlLHQsbyl7cmV0dXJue3NldChuKXtlLnNldEF0dHJpYnV0ZU5TKG8sdCxuKX0scmVtb3ZlKCl7ZS5yZW1vdmVBdHRyaWJ1dGVOUyhvLHQpfX19ZnVuY3Rpb24gem4oZSx0KXtyZXR1cm57c2V0KG8pe2Uuc3R5bGVbdF09b30scmVtb3ZlKCl7ZS5zdHlsZVt0XT1udWxsfX19ZnVuY3Rpb24gam4oZSl7Y29uc3QgdD11ZihlLChlKT0+e2lmKGUmJihlIGluc3RhbmNlb2YgcGZ8fFpuKGUpfHxYbihlKXx8ZWkoZSkpKXJldHVybiBlfSk7cmV0dXJuIHR9ZnVuY3Rpb24gcW4oZSl7aWYoJ3N0cmluZyc9PXR5cGVvZiBlP2U9SG4oZSk6ZS50ZXh0JiZLbihlKSxlLm9uJiYoZS5ldmVudExpc3RlbmVycz1VbihlLm9uKSxkZWxldGUgZS5vbiksIWUudGV4dCl7ZS5hdHRyaWJ1dGVzJiZXbihlLmF0dHJpYnV0ZXMpO2NvbnN0IHQ9W107aWYoZS5jaGlsZHJlbilpZihlaShlLmNoaWxkcmVuKSl0LnB1c2goZS5jaGlsZHJlbik7ZWxzZSBmb3IoY29uc3QgbyBvZiBlLmNoaWxkcmVuKVpuKG8pfHxYbihvKXx8TWUobyk/dC5wdXNoKG8pOnQucHVzaChuZXcgbWYobykpO2UuY2hpbGRyZW49dH1yZXR1cm4gZX1mdW5jdGlvbiBXbihlKXtmb3IoY29uc3QgdCBpbiBlKWVbdF0udmFsdWUmJihlW3RdLnZhbHVlPVtdLmNvbmNhdChlW3RdLnZhbHVlKSksR24oZSx0KX1mdW5jdGlvbiBVbihlKXtmb3IoY29uc3QgdCBpbiBlKUduKGUsdCk7cmV0dXJuIGV9ZnVuY3Rpb24gSG4oZSl7cmV0dXJue3RleHQ6W2VdfX1mdW5jdGlvbiBLbihlKXtBcnJheS5pc0FycmF5KGUudGV4dCl8fChlLnRleHQ9W2UudGV4dF0pfWZ1bmN0aW9uIEduKGUsdCl7QXJyYXkuaXNBcnJheShlW3RdKXx8KGVbdF09W2VbdF1dKX1mdW5jdGlvbiAkbihlLHQpe3JldHVybiBZbih0KT9lOlluKGUpP3Q6YCR7ZX0gJHt0fWB9ZnVuY3Rpb24gSm4oZSx0KXtmb3IoY29uc3QgbyBpbiB0KWVbb10/ZVtvXS5wdXNoKC4uLnRbb10pOmVbb109dFtvXX1mdW5jdGlvbiBRbihlLHQpe2lmKHQuYXR0cmlidXRlcyYmKCFlLmF0dHJpYnV0ZXMmJihlLmF0dHJpYnV0ZXM9e30pLEpuKGUuYXR0cmlidXRlcyx0LmF0dHJpYnV0ZXMpKSx0LmV2ZW50TGlzdGVuZXJzJiYoIWUuZXZlbnRMaXN0ZW5lcnMmJihlLmV2ZW50TGlzdGVuZXJzPXt9KSxKbihlLmV2ZW50TGlzdGVuZXJzLHQuZXZlbnRMaXN0ZW5lcnMpKSx0LnRleHQmJmUudGV4dC5wdXNoKC4uLnQudGV4dCksdC5jaGlsZHJlbiYmdC5jaGlsZHJlbi5sZW5ndGgpe2lmKGUuY2hpbGRyZW4ubGVuZ3RoIT10LmNoaWxkcmVuLmxlbmd0aCl0aHJvdyBuZXcgWmEoJ3VpLXRlbXBsYXRlLWV4dGVuZC1jaGlsZHJlbi1taXNtYXRjaDogVGhlIG51bWJlciBvZiBjaGlsZHJlbiBpbiBleHRlbmRlZCBkZWZpbml0aW9uIGRvZXMgbm90IG1hdGNoLicpO2xldCBvPTA7Zm9yKGNvbnN0IG4gb2YgdC5jaGlsZHJlbilRbihlLmNoaWxkcmVuW28rK10sbil9fWZ1bmN0aW9uIFluKGUpe3JldHVybiFlJiYwIT09ZX1mdW5jdGlvbiBYbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIGtmfWZ1bmN0aW9uIFpuKGUpe3JldHVybiBlIGluc3RhbmNlb2YgbWZ9ZnVuY3Rpb24gZWkoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBjZn1mdW5jdGlvbiB0aSgpe3JldHVybntjaGlsZHJlbjpbXSxiaW5kaW5nczpbXSxhdHRyaWJ1dGVzOnt9fX1mdW5jdGlvbiBvaShlKXtyZXR1cm4nY2xhc3MnPT1lfHwnc3R5bGUnPT1lfWZ1bmN0aW9uIG5pKGUpe3JldHVybih0KT0+dCtlfWZ1bmN0aW9uIGlpKGUpe3JldHVybiEhKGUuZm9jdXMmJidub25lJyE9JGMud2luZG93LmdldENvbXB1dGVkU3R5bGUoZS5lbGVtZW50KS5kaXNwbGF5KX1mdW5jdGlvbiByaShlKXtyZXR1cm4gZS5iaW5kVGVtcGxhdGUudG8oKHQpPT57dC50YXJnZXQ9PT1lLmVsZW1lbnQmJnQucHJldmVudERlZmF1bHQoKX0pfWZ1bmN0aW9uIGFpKGUpe3JldHVybiBlIGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudD9lLnZhbHVlOmUuaW5uZXJIVE1MfWZ1bmN0aW9uIHNpKGUpe2NvbnN0IHQ9ZS5maWxlcz9BcnJheS5mcm9tKGUuZmlsZXMpOltdLG89ZS5pdGVtcz9BcnJheS5mcm9tKGUuaXRlbXMpOltdO3JldHVybiB0Lmxlbmd0aD90Om8uZmlsdGVyKChlKT0+J2ZpbGUnPT09ZS5raW5kKS5tYXAoKGUpPT5lLmdldEFzRmlsZSgpKX1mdW5jdGlvbiBsaShlLHQpe2NvbnN0IG89dC50YXJnZXQub3duZXJEb2N1bWVudCxuPXQuY2xpZW50WCxpPXQuY2xpZW50WTtsZXQgcjtyZXR1cm4gby5jYXJldFJhbmdlRnJvbVBvaW50JiZvLmNhcmV0UmFuZ2VGcm9tUG9pbnQobixpKT9yPW8uY2FyZXRSYW5nZUZyb21Qb2ludChuLGkpOnQucmFuZ2VQYXJlbnQmJihyPW8uY3JlYXRlUmFuZ2UoKSxyLnNldFN0YXJ0KHQucmFuZ2VQYXJlbnQsdC5yYW5nZU9mZnNldCksci5jb2xsYXBzZSghMCkpLHI/ZS5kb21Db252ZXJ0ZXIuZG9tUmFuZ2VUb1ZpZXcocik6ZS5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0Rmlyc3RSYW5nZSgpfWZ1bmN0aW9uIGRpKGUpe3JldHVybiBlPWUucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7JykucmVwbGFjZSgvXFxuXFxuL2csJzwvcD48cD4nKS5yZXBsYWNlKC9cXG4vZywnICcpLnJlcGxhY2UoL15cXHMvLCcmbmJzcDsnKS5yZXBsYWNlKC9cXHMkLywnJm5ic3A7JykucmVwbGFjZSgvXFxzXFxzL2csJyAmbmJzcDsnKSwtMTxlLmluZGV4T2YoJzwvcD48cD4nKSYmKGU9YDxwPiR7ZX08L3A+YCksZX1mdW5jdGlvbiBjaShlKXtyZXR1cm4gZS5yZXBsYWNlKC88c3Bhbig/OiBjbGFzcz1cIkFwcGxlLWNvbnZlcnRlZC1zcGFjZVwifCk+KFxccyspPFxcL3NwYW4+L2csKGUsdCk9PjE9PXQubGVuZ3RoPycgJzp0KX1mdW5jdGlvbiB1aShlKXtsZXQgdD0nJztpZihlLmlzKCd0ZXh0Jyl8fGUuaXMoJ3RleHRQcm94eScpKXQ9ZS5kYXRhO2Vsc2UgaWYoZS5pcygnaW1nJykmJmUuaGFzQXR0cmlidXRlKCdhbHQnKSl0PWUuZ2V0QXR0cmlidXRlKCdhbHQnKTtlbHNle2xldCBvPW51bGw7Zm9yKGNvbnN0IG4gb2YgZS5nZXRDaGlsZHJlbigpKXtjb25zdCBlPXVpKG4pO28mJihvLmlzKCdjb250YWluZXJFbGVtZW50Jyl8fG4uaXMoJ2NvbnRhaW5lckVsZW1lbnQnKSkmJihIZi5pbmNsdWRlcyhvLm5hbWUpfHxIZi5pbmNsdWRlcyhuLm5hbWUpP3QrPSdcXG4nOnQrPSdcXG5cXG4nKSx0Kz1lLG89bn19cmV0dXJuIHR9ZnVuY3Rpb24gbWkoZSx0LG8sbil7Y29uc3QgaT1vLmlzQ29sbGFwc2VkLHI9by5nZXRGaXJzdFJhbmdlKCksYT1yLnN0YXJ0LnBhcmVudCxzPXIuZW5kLnBhcmVudDtpZihuLmlzTGltaXQoYSl8fG4uaXNMaW1pdChzKSlyZXR1cm4gdm9pZChpfHxhIT1zfHxlLmRlbGV0ZUNvbnRlbnQobykpO2lmKGkpcGkodCxvLHIuc3RhcnQpO2Vsc2V7Y29uc3Qgbj0hKHIuc3RhcnQuaXNBdFN0YXJ0JiZyLmVuZC5pc0F0RW5kKTtlLmRlbGV0ZUNvbnRlbnQobyx7bGVhdmVVbm1lcmdlZDpufSksbiYmKGE9PXM/cGkodCxvLG8uZm9jdXMpOnQuc2V0U2VsZWN0aW9uKHMsMCkpfX1mdW5jdGlvbiBwaShlLHQsbyl7Y29uc3Qgbj1vLnBhcmVudCxpPW5ldyBuLmNvbnN0cnVjdG9yKG4ubmFtZSxuLmdldEF0dHJpYnV0ZXMoKSk7by5pc0F0RW5kP2UuaW5zZXJ0KGksby5wYXJlbnQsJ2FmdGVyJyk6by5pc0F0U3RhcnQ/ZS5pbnNlcnQoaSxvLnBhcmVudCwnYmVmb3JlJyk6ZS5zcGxpdChvKSxlLnNldFNlbGVjdGlvbihvLnBhcmVudC5uZXh0U2libGluZywwKX1mdW5jdGlvbiBnaShlLHQpe2Z1bmN0aW9uIG8oKXthJiYoaS5wdXNoKGEpLGE9bnVsbCl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gYSYmYS50eXBlPT1lfWNvbnN0IGk9W107bGV0IHI9MCxhO3JldHVybiBlLmZvckVhY2goKGUpPT57J2VxdWFsJz09ZT8obygpLHIrKyk6J2luc2VydCc9PWU/KG4oJ2luc2VydCcpP2EudmFsdWVzLnB1c2godFtyXSk6KG8oKSxhPXt0eXBlOidpbnNlcnQnLGluZGV4OnIsdmFsdWVzOlt0W3JdXX0pLHIrKyk6bignZGVsZXRlJyk/YS5ob3dNYW55Kys6KG8oKSxhPXt0eXBlOidkZWxldGUnLGluZGV4OnIsaG93TWFueToxfSl9KSxvKCksaX1mdW5jdGlvbiBmaShlKXtyZXR1cm4hIWUuY3RybEtleXx8dGguaW5jbHVkZXMoZS5rZXlDb2RlKX1mdW5jdGlvbiBoaShlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgT2QmJnQgaW5zdGFuY2VvZiBPZD9lLmRhdGE9PT10LmRhdGE6ZT09PXR9ZnVuY3Rpb24gYmkoZSl7aWYoMT09ZS5uZXdDaGlsZHJlbi5sZW5ndGgtZS5vbGRDaGlsZHJlbi5sZW5ndGgpe2NvbnN0IHQ9VGUoZS5vbGRDaGlsZHJlbixlLm5ld0NoaWxkcmVuLGhpKSxvPWdpKHQsZS5uZXdDaGlsZHJlbik7aWYoISgxPG8ubGVuZ3RoKSl7Y29uc3QgZT1vWzBdO3JldHVybiBlLnZhbHVlc1swXWluc3RhbmNlb2YgT2Q/ZTp2b2lkIDB9fX1mdW5jdGlvbiBraShlKXtjb25zdCB0PWUubWFwKChlKT0+ZS5ub2RlKS5yZWR1Y2UoKGUsdCk9PmUuZ2V0Q29tbW9uQW5jZXN0b3IodCx7aW5jbHVkZVNlbGY6ITB9KSk7cmV0dXJuIHQ/dC5nZXRBbmNlc3RvcnMoe2luY2x1ZGVTZWxmOiEwLHBhcmVudEZpcnN0OiEwfSkuZmluZCgoZSk9PmUuaXMoJ2NvbnRhaW5lckVsZW1lbnQnKXx8ZS5pcygncm9vdEVsZW1lbnQnKSk6dm9pZCAwfWZ1bmN0aW9uIF9pKGUpe2lmKDA9PWUubGVuZ3RoKXJldHVybiExO2Zvcihjb25zdCB0IG9mIGUpaWYoJ2NoaWxkcmVuJz09PXQudHlwZSYmIWJpKHQpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHdpKGUpe3JldHVybiBlLmV2ZXJ5KChlKT0+ZS5pcygndGV4dCcpKX1mdW5jdGlvbiB2aShlKXtsZXQgdD1udWxsLG89bnVsbDtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKyl7Y29uc3QgaT1lW25dOydlcXVhbCchPWkmJih0PW51bGw9PT10P246dCxvPW4pfWxldCBuPTAscj0wO2ZvcihsZXQgYT10O2E8PW87YSsrKSdpbnNlcnQnIT1lW2FdJiZuKyssJ2RlbGV0ZSchPWVbYV0mJnIrKztyZXR1cm57aW5zZXJ0aW9uczpyLGRlbGV0aW9uczpuLGZpcnN0Q2hhbmdlQXQ6dH19ZnVuY3Rpb24geWkoZSx0KXtjb25zdCBvPXhpKFtlXSx0KTtvLnNvcnQoKGUsdCk9PmUuc3RhcnQuaXNCZWZvcmUodC5zdGFydCk/LTE6MSk7Zm9yKGxldCBuPTE7bjxvLmxlbmd0aDtuKyspe2NvbnN0IGU9b1tuLTFdLHQ9b1tuXTtlLmVuZC5pc1RvdWNoaW5nKHQuc3RhcnQpJiYoZS5lbmQ9dC5lbmQsby5zcGxpY2UobiwxKSxuLS0pfXJldHVybiBvfWZ1bmN0aW9uIHhpKGUsdCl7Zm9yKGNvbnN0IG8gb2YgdClmb3IoY29uc3QgdCBvZiBvLm9wZXJhdGlvbnMpZm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspe2xldCBuO3N3aXRjaCh0LnR5cGUpe2Nhc2UnaW5zZXJ0JzpuPWVbb10uX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24odC5wb3NpdGlvbix0Lm5vZGVzLm1heE9mZnNldCwhMCk7YnJlYWs7Y2FzZSdtb3ZlJzpjYXNlJ3JlbW92ZSc6Y2FzZSdyZWluc2VydCc6bj1lW29dLl9nZXRUcmFuc2Zvcm1lZEJ5TW92ZSh0LnNvdXJjZVBvc2l0aW9uLHQudGFyZ2V0UG9zaXRpb24sdC5ob3dNYW55LCEwKTt9biYmKGUuc3BsaWNlKG8sMSwuLi5uKSxvPW8rbi5sZW5ndGgtMSl9cmV0dXJuIGV9ZnVuY3Rpb24gQ2koKXtsZXQgZT1BaShTaCk7cmV0dXJuIGUmJmUubGVuZ3RoPT1PaHx8KGU9UGkoT2gpLFRpKFNoLGUpKSxlfWZ1bmN0aW9uIEFpKGUpe2U9ZS50b0xvd2VyQ2FzZSgpO2NvbnN0IHQ9ZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7Zm9yKGNvbnN0IG8gb2YgdCl7Y29uc3QgdD1vLnNwbGl0KCc9Jyksbj1kZWNvZGVVUklDb21wb25lbnQodFswXS50cmltKCkudG9Mb3dlckNhc2UoKSk7aWYobj09PWUpcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCh0WzFdKX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBUaShlLHQpe2RvY3VtZW50LmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQoZSkrJz0nK2VuY29kZVVSSUNvbXBvbmVudCh0KSsnO3BhdGg9Lyd9ZnVuY3Rpb24gUGkoZSl7bGV0IHQ9Jyc7Y29uc3Qgbz1uZXcgVWludDhBcnJheShlKTt3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhvKTtmb3IobGV0IG49MDtuPG8ubGVuZ3RoO24rKyl7Y29uc3QgZT1SaC5jaGFyQXQob1tuXSVSaC5sZW5ndGgpO3QrPS41PE1hdGgucmFuZG9tKCk/ZS50b1VwcGVyQ2FzZSgpOmV9cmV0dXJuIHR9ZnVuY3Rpb24gRWkoZSl7cmV0dXJuIEFycmF5LmZyb20oZS5nZXRDaGlsZHJlbigpKS5yZWR1Y2UoKGUsdCk9PmUrdC5kYXRhLCcnKX1mdW5jdGlvbiBTaShlLHQpe3JldHVybiB0LmZpbHRlcigoZSk9PmVbMF0hPT12b2lkIDAmJmVbMV0hPT12b2lkIDApLm1hcCgodCk9Pkd1LmNyZWF0ZUZyb21QYXJlbnRzQW5kT2Zmc2V0cyhlLHRbMF0sZSx0WzFdKSl9ZnVuY3Rpb24gT2koZSl7Y29uc3QgdD1lLm5leHQoKTtyZXR1cm4gdC5kb25lP251bGw6dC52YWx1ZX1mdW5jdGlvbiBSaShlKXtyZXR1cm4nYmxvY2tRdW90ZSc9PWUucGFyZW50Lm5hbWU/ZS5wYXJlbnQ6bnVsbH1mdW5jdGlvbiBJaShlKXtsZXQgdD0wLG87Y29uc3Qgbj1bXTtmb3IoO3Q8ZS5sZW5ndGg7KXtjb25zdCBpPWVbdF0scj1lW3QrMV07b3x8KG89S3UuY3JlYXRlQmVmb3JlKGkpKSxyJiZpLm5leHRTaWJsaW5nPT1yfHwobi5wdXNoKG5ldyBHdShvLEt1LmNyZWF0ZUFmdGVyKGkpKSksbz1udWxsKSx0Kyt9cmV0dXJuIG59ZnVuY3Rpb24gVmkoZSx0KXtjb25zdCBvPWUuY2hlY2tDaGlsZCh0LnBhcmVudCwnYmxvY2tRdW90ZScpLG49ZS5jaGVja0NoaWxkKFsnJHJvb3QnLCdibG9ja1F1b3RlJ10sdCk7cmV0dXJuIG8mJm59ZnVuY3Rpb24gRmkoZSx0PTUxMil7dHJ5e2NvbnN0IG89ZS5tYXRjaChhYilbMV0sbj1hdG9iKGUucmVwbGFjZShhYiwnJykpLGk9W107Zm9yKGxldCBlPTA7ZTxuLmxlbmd0aDtlKz10KXtjb25zdCBvPW4uc2xpY2UoZSxlK3QpLHI9QXJyYXkoby5sZW5ndGgpO2ZvcihsZXQgZT0wO2U8by5sZW5ndGg7ZSsrKXJbZV09by5jaGFyQ29kZUF0KGUpO2kucHVzaChuZXcgVWludDhBcnJheShyKSl9cmV0dXJuIG5ldyBCbG9iKGkse3R5cGU6b30pfWNhdGNoKGUpe3Rocm93IG5ldyBFcnJvcignUHJvYmxlbSB3aXRoIGRlY29kaW5nIEJhc2U2NCBpbWFnZSBkYXRhLicpfX1mdW5jdGlvbiBOaShlKXtpZignc3RyaW5nJyE9dHlwZW9mIGUpcmV0dXJuITE7Y29uc3QgdD1lLm1hdGNoKGFiKTtyZXR1cm4hISh0JiZ0Lmxlbmd0aCl9ZnVuY3Rpb24gTWkoKXtmdW5jdGlvbiBlKGUsdCxvKXtpZihvLmNvbnN1bWFibGUudGVzdCh0LnZpZXdJdGVtLHtuYW1lOiEwLGNsYXNzZXM6J2ltYWdlJ30pKXtjb25zdCBlPUFycmF5LmZyb20odC52aWV3SXRlbS5nZXRDaGlsZHJlbigpKS5maW5kKChlKT0+ZS5pcygnaW1nJykpO2lmKGUmJmUuaGFzQXR0cmlidXRlKCdzcmMnKSYmby5jb25zdW1hYmxlLnRlc3QoZSx7bmFtZTohMH0pKXtjb25zdCBuPW8uY29udmVydEl0ZW0oZSx0Lm1vZGVsQ3Vyc29yKSxpPU9pKG4ubW9kZWxSYW5nZS5nZXRJdGVtcygpKTtpJiYoby5jb252ZXJ0Q2hpbGRyZW4odC52aWV3SXRlbSxLdS5jcmVhdGVBdChpKSksdC5tb2RlbFJhbmdlPW4ubW9kZWxSYW5nZSx0Lm1vZGVsQ3Vyc29yPW4ubW9kZWxDdXJzb3IpfX19cmV0dXJuKHQpPT57dC5vbignZWxlbWVudDpmaWd1cmUnLGUpfX1mdW5jdGlvbiBEaSgpe2Z1bmN0aW9uIGUoZSx0LG8pe2lmKG8uY29uc3VtYWJsZS5jb25zdW1lKHQuaXRlbSxlLm5hbWUpKXtjb25zdCBlPW8ud3JpdGVyLG49by5tYXBwZXIudG9WaWV3RWxlbWVudCh0Lml0ZW0pLGk9bi5nZXRDaGlsZCgwKTtpZihudWxsPT09dC5hdHRyaWJ1dGVOZXdWYWx1ZSl7Y29uc3Qgbz10LmF0dHJpYnV0ZU9sZFZhbHVlO28uZGF0YSYmKGUucmVtb3ZlQXR0cmlidXRlKCdzcmNzZXQnLGkpLGUucmVtb3ZlQXR0cmlidXRlKCdzaXplcycsaSksby53aWR0aCYmZS5yZW1vdmVBdHRyaWJ1dGUoJ3dpZHRoJyxpKSl9ZWxzZXtjb25zdCBvPXQuYXR0cmlidXRlTmV3VmFsdWU7by5kYXRhJiYoZS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsby5kYXRhLGkpLGUuc2V0QXR0cmlidXRlKCdzaXplcycsJzEwMHZ3JyxpKSxvLndpZHRoJiZlLnNldEF0dHJpYnV0ZSgnd2lkdGgnLG8ud2lkdGgsaSkpfX19cmV0dXJuKHQpPT57dC5vbignYXR0cmlidXRlOnNyY3NldDppbWFnZScsZSl9fWZ1bmN0aW9uIEJpKGUpe2Z1bmN0aW9uIHQoZSx0LG8pe2lmKG8uY29uc3VtYWJsZS5jb25zdW1lKHQuaXRlbSxlLm5hbWUpKXtjb25zdCBlPW8ud3JpdGVyLG49by5tYXBwZXIudG9WaWV3RWxlbWVudCh0Lml0ZW0pLGk9bi5nZXRDaGlsZCgwKTtudWxsPT09dC5hdHRyaWJ1dGVOZXdWYWx1ZT9lLnJlbW92ZUF0dHJpYnV0ZSh0LmF0dHJpYnV0ZUtleSxpKTplLnNldEF0dHJpYnV0ZSh0LmF0dHJpYnV0ZUtleSx0LmF0dHJpYnV0ZU5ld1ZhbHVlLGkpfX1yZXR1cm4obyk9PntvLm9uKGBhdHRyaWJ1dGU6JHtlfTppbWFnZWAsdCl9fWZ1bmN0aW9uIExpKGUsdCl7cmV0dXJuIGUmJnQmJmUucHJpb3JpdHk9PXQucHJpb3JpdHkmJmppKGUuY2xhc3Nlcyk9PWppKHQuY2xhc3Nlcyl9ZnVuY3Rpb24gemkoZSx0KXtpZihlLnByaW9yaXR5PnQucHJpb3JpdHkpcmV0dXJuITA7cmV0dXJuIShlLnByaW9yaXR5PHQucHJpb3JpdHkpJiZqaShlLmNsYXNzZXMpPmppKHQuY2xhc3Nlcyl9ZnVuY3Rpb24gamkoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSk/ZS5zb3J0KCkuam9pbignLCcpOmV9ZnVuY3Rpb24gcWkoZSl7cmV0dXJuISFlLmdldEN1c3RvbVByb3BlcnR5KGdiKX1mdW5jdGlvbiBXaShlLHQsbz17fSl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lOltlXX1yZXR1cm4gdC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsJ2ZhbHNlJyxlKSx0LmFkZENsYXNzKGhiLGUpLHQuc2V0Q3VzdG9tUHJvcGVydHkoZ2IsITAsZSksZS5nZXRGaWxsZXJPZmZzZXQ9JGksby5sYWJlbCYmSGkoZSxvLmxhYmVsLHQpLFVpKGUsdCwoZSx0LG8pPT5vLmFkZENsYXNzKG4odC5jbGFzc2VzKSxlKSwoZSx0LG8pPT5vLnJlbW92ZUNsYXNzKG4odC5jbGFzc2VzKSxlKSksZX1mdW5jdGlvbiBVaShlLHQsbyxuKXtjb25zdCBpPW5ldyBwYjtpLm9uKCdjaGFuZ2U6dG9wJywodCxpKT0+e2kub2xkRGVzY3JpcHRvciYmbihlLGkub2xkRGVzY3JpcHRvcixpLndyaXRlciksaS5uZXdEZXNjcmlwdG9yJiZvKGUsaS5uZXdEZXNjcmlwdG9yLGkud3JpdGVyKX0pLHQuc2V0Q3VzdG9tUHJvcGVydHkoJ2FkZEhpZ2hsaWdodCcsKGUsdCxvKT0+aS5hZGQodCxvKSxlKSx0LnNldEN1c3RvbVByb3BlcnR5KCdyZW1vdmVIaWdobGlnaHQnLChlLHQsbyk9PmkucmVtb3ZlKHQsbyksZSl9ZnVuY3Rpb24gSGkoZSx0LG8pe28uc2V0Q3VzdG9tUHJvcGVydHkoZmIsdCxlKX1mdW5jdGlvbiBLaShlKXtjb25zdCB0PWUuZ2V0Q3VzdG9tUHJvcGVydHkoZmIpO3JldHVybiB0PydmdW5jdGlvbic9PXR5cGVvZiB0P3QoKTp0OicnfWZ1bmN0aW9uIEdpKGUsdCl7cmV0dXJuIHQuYWRkQ2xhc3MoWydjay1lZGl0b3JfX2VkaXRhYmxlJywnY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGUnXSxlKSx0LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJyxlLmlzUmVhZE9ubHk/J2ZhbHNlJzondHJ1ZScsZSksZS5vbignY2hhbmdlOmlzUmVhZE9ubHknLChvLG4saSk9Pnt0LnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJyxpPydmYWxzZSc6J3RydWUnLGUpfSksZS5vbignY2hhbmdlOmlzRm9jdXNlZCcsKG8sbixpKT0+e2k/dC5hZGRDbGFzcygnY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGVfZm9jdXNlZCcsZSk6dC5yZW1vdmVDbGFzcygnY2stZWRpdG9yX19uZXN0ZWQtZWRpdGFibGVfZm9jdXNlZCcsZSl9KSxlfWZ1bmN0aW9uICRpKCl7cmV0dXJuIG51bGx9ZnVuY3Rpb24gSmkoZSx0LG8pe3JldHVybiB0LnNldEN1c3RvbVByb3BlcnR5KGtiLCEwLGUpLFdpKGUsdCx7bGFiZWw6ZnVuY3Rpb24oKXtjb25zdCB0PWUuZ2V0Q2hpbGQoMCksbj10LmdldEF0dHJpYnV0ZSgnYWx0Jyk7cmV0dXJuIG4/YCR7bn0gJHtvfWA6b319KX1mdW5jdGlvbiBRaShlKXtyZXR1cm4hIWUuZ2V0Q3VzdG9tUHJvcGVydHkoa2IpJiZxaShlKX1mdW5jdGlvbiBZaShlKXtjb25zdCB0PWUuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7cmV0dXJuISEodCYmUWkodCkpfWZ1bmN0aW9uIFhpKGUpe3JldHVybiBlIGluc3RhbmNlb2YgV3UmJidpbWFnZSc9PWUubmFtZX1mdW5jdGlvbiBaaShlKXtjb25zdCB0PWUuY3JlYXRlRW1wdHlFbGVtZW50KCdpbWcnKSxvPWUuY3JlYXRlQ29udGFpbmVyRWxlbWVudCgnZmlndXJlJyx7Y2xhc3M6J2ltYWdlJ30pO3JldHVybiBlLmluc2VydCh4Yy5jcmVhdGVBdChvKSx0KSxvfWZ1bmN0aW9uIGVyKGUpe3JldHVybiBlPT1EYy5hcnJvd3JpZ2h0fHxlPT1EYy5hcnJvd2xlZnR8fGU9PURjLmFycm93dXB8fGU9PURjLmFycm93ZG93bn1mdW5jdGlvbiB0cihlKXtyZXR1cm4gdGUoZSk9PXhifWZ1bmN0aW9uIG9yKGUpe2Zvcig7ZTspe2lmKGUgaW5zdGFuY2VvZiBfYyYmIShlIGluc3RhbmNlb2YgdmMpKXJldHVybiEwO2U9ZS5wYXJlbnR9cmV0dXJuITF9ZnVuY3Rpb24gbnIoe2VtaXR0ZXI6ZSxhY3RpdmF0b3I6dCxjYWxsYmFjazpvLGNvbnRleHRFbGVtZW50czpufSl7ZS5saXN0ZW5Ubyhkb2N1bWVudCwnbW91c2Vkb3duJywoZSx7dGFyZ2V0Oml9KT0+e2lmKHQoKSl7Zm9yKGNvbnN0IGUgb2YgbilpZihlLmNvbnRhaW5zKGkpKXJldHVybjtvKCl9fSl9ZnVuY3Rpb24gaXIoe3ZpZXc6ZX0pe2UubGlzdGVuVG8oZS5lbGVtZW50LCdzdWJtaXQnLCh0LG8pPT57by5wcmV2ZW50RGVmYXVsdCgpLGUuZmlyZSgnc3VibWl0Jyl9LHt1c2VDYXB0dXJlOiEwfSl9ZnVuY3Rpb24gcnIoZSl7Zm9yKDtlJiYnaHRtbCchPWUudGFnTmFtZS50b0xvd2VyQ2FzZSgpOyl7aWYoJ3N0YXRpYychPSRjLndpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUpLnBvc2l0aW9uKXJldHVybiBlO2U9ZS5wYXJlbnRFbGVtZW50fXJldHVybiBudWxsfWZ1bmN0aW9uIGFyKHtlbGVtZW50OmUsdGFyZ2V0OnQscG9zaXRpb25zOm8sbGltaXRlcjpuLGZpdEluVmlld3BvcnQ6aX0pe2hzKHQpJiYodD10KCkpLGhzKG4pJiYobj1uKCkpO2NvbnN0IHI9cnIoZS5wYXJlbnRFbGVtZW50KSxhPW5ldyBNdShlKSxzPW5ldyBNdSh0KTtsZXQgbCxkO2lmKCFuJiYhaSlbZCxsXT1zcihvWzBdLHMsYSk7ZWxzZXtjb25zdCBlPW4mJm5ldyBNdShuKS5nZXRWaXNpYmxlKCksdD1pJiZuZXcgTXUoJGMud2luZG93KTtbZCxsXT1scihvLHMsYSxlLHQpfHxzcihvWzBdLHMsYSl9bGV0e2xlZnQ6Yyx0b3A6dX09ZHIobCk7aWYocil7Y29uc3QgZT1kcihuZXcgTXUocikpLHQ9SGUocik7Yy09ZS5sZWZ0LHUtPWUudG9wLGMrPXIuc2Nyb2xsTGVmdCx1Kz1yLnNjcm9sbFRvcCxjLT10LmxlZnQsdS09dC50b3B9cmV0dXJue2xlZnQ6Yyx0b3A6dSxuYW1lOmR9fWZ1bmN0aW9uIHNyKGUsdCxvKXtjb25zdHtsZWZ0Om4sdG9wOmksbmFtZTpyfT1lKHQsbyk7cmV0dXJuW3Isby5jbG9uZSgpLm1vdmVUbyhuLGkpXX1mdW5jdGlvbiBscihlLHQsbyxuLGkpe2xldCByPTAsYT0wLHMsbDtjb25zdCBkPW8uZ2V0QXJlYSgpO3JldHVybiBlLnNvbWUoKGUpPT57ZnVuY3Rpb24gYygpe2E9ZyxyPXAscz1tLGw9dX1jb25zdFt1LG1dPXNyKGUsdCxvKTtsZXQgcCxnO2lmKG4paWYoaSl7Y29uc3QgZT1uLmdldEludGVyc2VjdGlvbihpKTtwPWU/ZS5nZXRJbnRlcnNlY3Rpb25BcmVhKG0pOjB9ZWxzZSBwPW4uZ2V0SW50ZXJzZWN0aW9uQXJlYShtKTtyZXR1cm4gaSYmKGc9aS5nZXRJbnRlcnNlY3Rpb25BcmVhKG0pKSxpJiYhbj9nPmEmJmMoKTohaSYmbj9wPnImJmMoKTpnPmEmJnA+PXI/YygpOmc+PWEmJnA+ciYmYygpLHA9PT1kfSkscz9bbCxzXTpudWxsfWZ1bmN0aW9uIGRyKHtsZWZ0OmUsdG9wOnR9KXtjb25zdHtzY3JvbGxYOm8sc2Nyb2xsWTpufT0kYy53aW5kb3c7cmV0dXJue2xlZnQ6ZStvLHRvcDp0K259fWZ1bmN0aW9uIGNyKGUpe3JldHVybiBOdShlKT9lOlVlKGUpP2UuY29tbW9uQW5jZXN0b3JDb250YWluZXI6J2Z1bmN0aW9uJz09dHlwZW9mIGU/Y3IoZSgpKTpudWxsfWZ1bmN0aW9uIHVyKGUsdCl7cmV0dXJuIGUudG9wLXQuaGVpZ2h0LXFiLmFycm93VmVydGljYWxPZmZzZXR9ZnVuY3Rpb24gbXIoZSl7cmV0dXJuIGUuYm90dG9tK3FiLmFycm93VmVydGljYWxPZmZzZXR9ZnVuY3Rpb24gcHIoZSl7Y29uc3QgdD1lLnBsdWdpbnMuZ2V0KCdDb250ZXh0dWFsQmFsbG9vbicpO2lmKFlpKGUuZWRpdGluZy52aWV3LmRvY3VtZW50LnNlbGVjdGlvbikpe2NvbnN0IG89Z3IoZSk7dC51cGRhdGVQb3NpdGlvbihvKX19ZnVuY3Rpb24gZ3IoZSl7Y29uc3QgdD1lLmVkaXRpbmcudmlldyxvPXFiLmRlZmF1bHRQb3NpdGlvbnM7cmV0dXJue3RhcmdldDp0LmRvbUNvbnZlcnRlci52aWV3VG9Eb20odC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCkpLHBvc2l0aW9uczpbby5ub3J0aEFycm93U291dGgsby5ub3J0aEFycm93U291dGhXZXN0LG8ubm9ydGhBcnJvd1NvdXRoRWFzdCxvLnNvdXRoQXJyb3dOb3J0aCxvLnNvdXRoQXJyb3dOb3J0aFdlc3Qsby5zb3V0aEFycm93Tm9ydGhFYXN0XX19ZnVuY3Rpb24gZnIoZSl7Y29uc3QgdD0vXmltYWdlXFwvKGpwZWd8cG5nfGdpZnxibXApJC87cmV0dXJuIHQudGVzdChlLnR5cGUpfWZ1bmN0aW9uIGhyKGUpe2NvbnN0IHQ9ZS5nZXRTZWxlY3RlZEVsZW1lbnQoKTtpZih0KXJldHVybiBLdS5jcmVhdGVBZnRlcih0KTtjb25zdCBvPWUuZ2V0U2VsZWN0ZWRCbG9ja3MoKS5uZXh0KCkudmFsdWU7aWYobyl7aWYoby5pc0VtcHR5KXJldHVybiBLdS5jcmVhdGVBdChvKTtjb25zdCB0PUt1LmNyZWF0ZUFmdGVyKG8pO3JldHVybiBlLmZvY3VzLmlzVG91Y2hpbmcodCk/dDpLdS5jcmVhdGVCZWZvcmUobyl9cmV0dXJuIGUuZm9jdXN9ZnVuY3Rpb24gYnIoZSx0KXtlLmhhc0NsYXNzKCdjay1hcHBlYXInKXx8dC5hZGRDbGFzcygnY2stYXBwZWFyJyxlKX1mdW5jdGlvbiBrcihlLHQpe3QucmVtb3ZlQ2xhc3MoJ2NrLWFwcGVhcicsZSl9ZnVuY3Rpb24gX3IoZSx0LG8pe3QuaGFzQ2xhc3MoJ2NrLWltYWdlLXVwbG9hZC1wbGFjZWhvbGRlcicpfHxvLmFkZENsYXNzKCdjay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXInLHQpLHQuaGFzQ2xhc3MoJ2NrLWluZmluaXRlLXByb2dyZXNzJyl8fG8uYWRkQ2xhc3MoJ2NrLWluZmluaXRlLXByb2dyZXNzJyx0KTtjb25zdCBuPXQuZ2V0Q2hpbGQoMCk7bi5nZXRBdHRyaWJ1dGUoJ3NyYycpIT09ZSYmby5zZXRBdHRyaWJ1dGUoJ3NyYycsZSxuKX1mdW5jdGlvbiB3cihlLHQpe2UuaGFzQ2xhc3MoJ2NrLWltYWdlLXVwbG9hZC1wbGFjZWhvbGRlcicpJiZ0LnJlbW92ZUNsYXNzKCdjay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXInLGUpLGUuaGFzQ2xhc3MoJ2NrLWluZmluaXRlLXByb2dyZXNzJykmJnQucmVtb3ZlQ2xhc3MoJ2NrLWluZmluaXRlLXByb2dyZXNzJyxlKX1mdW5jdGlvbiB2cihlLHQsbyxuKXtjb25zdCBpPXhyKHQpO3QuaW5zZXJ0KHhjLmNyZWF0ZUF0KGUsJ2VuZCcpLGkpLG8ub24oJ2NoYW5nZTp1cGxvYWRlZFBlcmNlbnQnLChlLHQsbyk9PntuLmNoYW5nZSgoZSk9PntlLnNldFN0eWxlKCd3aWR0aCcsbysnJScsaSl9KX0pfWZ1bmN0aW9uIHlyKGUsdCl7Y29uc3Qgbz1DcihlKTtvJiZ0LnJlbW92ZShDYy5jcmVhdGVPbihvKSl9ZnVuY3Rpb24geHIoZSl7Y29uc3QgdD1lLmNyZWF0ZVVJRWxlbWVudCgnZGl2Jyx7Y2xhc3M6J2NrLXByb2dyZXNzLWJhcid9KTtyZXR1cm4gZS5zZXRDdXN0b21Qcm9wZXJ0eShzaywhMCx0KSx0fWZ1bmN0aW9uIENyKGUpe2Zvcihjb25zdCB0IG9mIGUuZ2V0Q2hpbGRyZW4oKSlpZih0LmdldEN1c3RvbVByb3BlcnR5KHNrKSlyZXR1cm4gdH1mdW5jdGlvbiBBcihlKXtyZXR1cm4gQXJyYXkuZnJvbShlLnR5cGVzKS5pbmNsdWRlcygndGV4dC9odG1sJykmJicnIT09ZS5nZXREYXRhKCd0ZXh0L2h0bWwnKX1mdW5jdGlvbiBUcihlLHQpe3JldHVybiB0LmNoZWNrQ2hpbGQoZS5wYXJlbnQsJ3BhcmFncmFwaCcpJiYhdC5pc09iamVjdChlKX1mdW5jdGlvbiBQcihlLHQsbyl7Y29uc3Qgbj1vLndyaXRlci5jcmVhdGVFbGVtZW50KCdwYXJhZ3JhcGgnKTtyZXR1cm4gby53cml0ZXIuaW5zZXJ0KG4sdCksby5jb252ZXJ0SXRlbShlLEt1LmNyZWF0ZUF0KG4pKX1mdW5jdGlvbiBFcihlLHQsbyl7Y29uc3Qgbj1uZXcgY20odCk7cmV0dXJuISFvLmNoZWNrQ2hpbGQobiwncGFyYWdyYXBoJykmJiEhby5jaGVja0NoaWxkKG4ucHVzaCgncGFyYWdyYXBoJyksZSl9ZnVuY3Rpb24gU3IoZSx0LG8pe3JldHVybiBvLmNoZWNrQ2hpbGQoZS5wYXJlbnQsdCkmJiFvLmlzT2JqZWN0KGUpfWZ1bmN0aW9uIE9yKGUsdD1Bayl7Y29uc3Qgbz1uZXcgdChlKSxuPW5ldyBfayhlKSxpPW5ldyB5ayhlLG8sbik7cmV0dXJuIG8uYmluZCgnaXNFbmFibGVkJykudG8oaSksbyBpbnN0YW5jZW9mIEFrP28uYmluZCgnaXNPbicpLnRvKGksJ2lzT3BlbicpOm8uYXJyb3dWaWV3LmJpbmQoJ2lzT24nKS50byhpLCdpc09wZW4nKSxJcihpKSxpfWZ1bmN0aW9uIFJyKGUsdCl7Y29uc3Qgbz1lLmxvY2FsZSxuPWUubGlzdFZpZXc9bmV3IEVrKG8pO24uaXRlbXMuYmluZFRvKHQpLnVzaW5nKChlKT0+e2NvbnN0IHQ9bmV3IFNrKG8pO3JldHVybiB0LmJpbmQoLi4uT2JqZWN0LmtleXMoZSkpLnRvKGUpLHR9KSxlLnBhbmVsVmlldy5jaGlsZHJlbi5hZGQobiksbi5pdGVtcy5kZWxlZ2F0ZSgnZXhlY3V0ZScpLnRvKGUpfWZ1bmN0aW9uIElyKGUpe1ZyKGUpLEZyKGUpLE5yKGUpfWZ1bmN0aW9uIFZyKGUpe2Uub24oJ3JlbmRlcicsKCk9Pntucih7ZW1pdHRlcjplLGFjdGl2YXRvcjooKT0+ZS5pc09wZW4sY2FsbGJhY2s6KCk9PntlLmlzT3Blbj0hMX0sY29udGV4dEVsZW1lbnRzOltlLmVsZW1lbnRdfSl9KX1mdW5jdGlvbiBGcihlKXtlLm9uKCdleGVjdXRlJywoKT0+e2UuaXNPcGVuPSExfSl9ZnVuY3Rpb24gTnIoZSl7ZS5rZXlzdHJva2VzLnNldCgnYXJyb3dkb3duJywodCxvKT0+e2UuaXNPcGVuJiYoZS5wYW5lbFZpZXcuZm9jdXMoKSxvKCkpfSksZS5rZXlzdHJva2VzLnNldCgnYXJyb3d1cCcsKHQsbyk9PntlLmlzT3BlbiYmKGUucGFuZWxWaWV3LmZvY3VzTGFzdCgpLG8oKSl9KX1mdW5jdGlvbiBNcihlKXtjb25zdCBvPWUudCx0PXtQYXJhZ3JhcGg6bygndCcpLFwiSGVhZGluZyAxXCI6bygndScpLFwiSGVhZGluZyAyXCI6bygndicpLFwiSGVhZGluZyAzXCI6bygndycpfTtyZXR1cm4gZS5jb25maWcuZ2V0KCdoZWFkaW5nLm9wdGlvbnMnKS5tYXAoKGUpPT57Y29uc3Qgbz10W2UudGl0bGVdO3JldHVybiBvJiZvIT1lLnRpdGxlJiYoZT1PYmplY3QuYXNzaWduKHt9LGUse3RpdGxlOm99KSksZX0pfWZ1bmN0aW9uIERyKGUsdCxvLG4pe2NvbnN0IGk9ZS5kb2N1bWVudDt6ay5oYXMoaSl8fCh6ay5zZXQoaSxuZXcgTWFwKSxpLnJlZ2lzdGVyUG9zdEZpeGVyKChlKT0+QnIoaSxlKSkpLHprLmdldChpKS5zZXQodCx7cGxhY2Vob2xkZXJUZXh0Om8sY2hlY2tGdW5jdGlvbjpufSksZS5yZW5kZXIoKX1mdW5jdGlvbiBCcihlLHQpe2NvbnN0IG89emsuZ2V0KGUpO2xldCBuPSExO2Zvcihjb25zdFtpLHJdb2YgbylMcih0LGkscikmJihuPSEwKTtyZXR1cm4gbn1mdW5jdGlvbiBMcihlLHQsbyl7Y29uc3Qgbj10LmRvY3VtZW50LGk9by5wbGFjZWhvbGRlclRleHQ7bGV0IHI9ITE7aWYoIW4pcmV0dXJuITE7dC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGxhY2Vob2xkZXInKSE9PWkmJihlLnNldEF0dHJpYnV0ZSgnZGF0YS1wbGFjZWhvbGRlcicsaSx0KSxyPSEwKTtjb25zdCBhPW4uc2VsZWN0aW9uLHM9YS5hbmNob3IsbD1vLmNoZWNrRnVuY3Rpb247aWYobCYmIWwoKSlyZXR1cm4gdC5oYXNDbGFzcygnY2stcGxhY2Vob2xkZXInKSYmKGUucmVtb3ZlQ2xhc3MoJ2NrLXBsYWNlaG9sZGVyJyx0KSxyPSEwKSxyO2NvbnN0IGQ9IUFycmF5LmZyb20odC5nZXRDaGlsZHJlbigpKS5zb21lKChlKT0+IWUuaXMoJ3VpRWxlbWVudCcpKTtyZXR1cm4hbi5pc0ZvY3VzZWQmJmQ/KHQuaGFzQ2xhc3MoJ2NrLXBsYWNlaG9sZGVyJyl8fChlLmFkZENsYXNzKCdjay1wbGFjZWhvbGRlcicsdCkscj0hMCkscik6KGQmJnMmJnMucGFyZW50IT09dD8hdC5oYXNDbGFzcygnY2stcGxhY2Vob2xkZXInKSYmKGUuYWRkQ2xhc3MoJ2NrLXBsYWNlaG9sZGVyJyx0KSxyPSEwKTp0Lmhhc0NsYXNzKCdjay1wbGFjZWhvbGRlcicpJiYoZS5yZW1vdmVDbGFzcygnY2stcGxhY2Vob2xkZXInLHQpLHI9ITApLHIpfWZ1bmN0aW9uIHpyKGUsdCl7cmV0dXJuKG8pPT57Y29uc3Qgbj1vLmNyZWF0ZUVkaXRhYmxlRWxlbWVudCgnZmlnY2FwdGlvbicpO3JldHVybiBvLnNldEN1c3RvbVByb3BlcnR5KGprLCEwLG4pLERyKGUsbix0KSxHaShuLG8pfX1mdW5jdGlvbiBqcihlKXtmb3IoY29uc3QgdCBvZiBlLmdldENoaWxkcmVuKCkpaWYodCBpbnN0YW5jZW9mIFd1JiYnY2FwdGlvbic9PXQubmFtZSlyZXR1cm4gdDtyZXR1cm4gbnVsbH1mdW5jdGlvbiBxcihlKXtjb25zdCB0PWUucGFyZW50O3JldHVybidmaWdjYXB0aW9uJz09ZS5uYW1lJiZ0JiYnZmlndXJlJz09dC5uYW1lJiZ0Lmhhc0NsYXNzKCdpbWFnZScpP3tuYW1lOiEwfTpudWxsfWZ1bmN0aW9uIFdyKGUsdD0hMCl7cmV0dXJuKG8sbixpKT0+e2NvbnN0IHI9bi5pdGVtO2lmKChyLmNoaWxkQ291bnR8fHQpJiZYaShyLnBhcmVudCkpe2lmKCFpLmNvbnN1bWFibGUuY29uc3VtZShuLml0ZW0sJ2luc2VydCcpKXJldHVybjtjb25zdCB0PWkubWFwcGVyLnRvVmlld0VsZW1lbnQobi5yYW5nZS5zdGFydC5wYXJlbnQpLG89ZShpLndyaXRlciksYT1pLndyaXRlcjtyLmNoaWxkQ291bnR8fGEuYWRkQ2xhc3MoJ2NrLWhpZGRlbicsbyksVXIobyxuLml0ZW0sdCxpKX19fWZ1bmN0aW9uIFVyKGUsdCxvLG4pe2NvbnN0IGk9eGMuY3JlYXRlQXQobywnZW5kJyk7bi53cml0ZXIuaW5zZXJ0KGksZSksbi5tYXBwZXIuYmluZEVsZW1lbnRzKHQsZSl9ZnVuY3Rpb24gSHIoZSl7Y29uc3QgdD1lLmdldEFuY2VzdG9ycyh7aW5jbHVkZVNlbGY6ITB9KSxvPXQuZmluZCgoZSk9PidjYXB0aW9uJz09ZS5uYW1lKTtyZXR1cm4gbyYmby5wYXJlbnQmJidpbWFnZSc9PW8ucGFyZW50Lm5hbWU/bzpudWxsfWZ1bmN0aW9uIEtyKGUsdCl7cmV0dXJuIShlLmNoaWxkQ291bnR8fGUuaGFzQ2xhc3MoJ2NrLWhpZGRlbicpKSYmKHQuYWRkQ2xhc3MoJ2NrLWhpZGRlbicsZSksITApfWZ1bmN0aW9uIEdyKGUsdCl7cmV0dXJuISFlLmhhc0NsYXNzKCdjay1oaWRkZW4nKSYmKHQucmVtb3ZlQ2xhc3MoJ2NrLWhpZGRlbicsZSksITApfWZ1bmN0aW9uICRyKGUpe3JldHVybih0LG8sbik9PntpZihuLmNvbnN1bWFibGUuY29uc3VtZShvLml0ZW0sdC5uYW1lKSl7Y29uc3QgdD1RcihvLmF0dHJpYnV0ZU5ld1ZhbHVlLGUpLGk9UXIoby5hdHRyaWJ1dGVPbGRWYWx1ZSxlKSxyPW4ubWFwcGVyLnRvVmlld0VsZW1lbnQoby5pdGVtKSxhPW4ud3JpdGVyO2kmJmEucmVtb3ZlQ2xhc3MoaS5jbGFzc05hbWUsciksdCYmYS5hZGRDbGFzcyh0LmNsYXNzTmFtZSxyKX19fWZ1bmN0aW9uIEpyKGUpe2NvbnN0IHQ9ZS5maWx0ZXIoKGUpPT4hZS5pc0RlZmF1bHQpO3JldHVybihlLG8sbik9PntpZihvLm1vZGVsUmFuZ2Upe2NvbnN0IGU9by52aWV3SXRlbSxpPU9pKG8ubW9kZWxSYW5nZS5nZXRJdGVtcygpKTtpZihuLnNjaGVtYS5jaGVja0F0dHJpYnV0ZShpLCdpbWFnZVN0eWxlJykpZm9yKGNvbnN0IG8gb2YgdCluLmNvbnN1bWFibGUuY29uc3VtZShlLHtjbGFzc2VzOm8uY2xhc3NOYW1lfSkmJm4ud3JpdGVyLnNldEF0dHJpYnV0ZSgnaW1hZ2VTdHlsZScsby5uYW1lLGkpfX19ZnVuY3Rpb24gUXIoZSx0KXtmb3IoY29uc3QgbyBvZiB0KWlmKG8ubmFtZT09PWUpcmV0dXJuIG99ZnVuY3Rpb24gWXIoZT1bXSl7cmV0dXJuIGUubWFwKFhyKS5tYXAoKGUpPT5PYmplY3QuYXNzaWduKHt9LGUpKX1mdW5jdGlvbiBYcihlKXtpZignc3RyaW5nJz09dHlwZW9mIGUpe2NvbnN0IHQ9ZTt0X1t0XT9lPU9iamVjdC5hc3NpZ24oe30sdF9bdF0pOihSdS53YXJuKCdpbWFnZS1zdHlsZS1ub3QtZm91bmQ6IFRoZXJlIGlzIG5vIHN1Y2ggaW1hZ2Ugc3R5bGUgb2YgZ2l2ZW4gbmFtZS4nLHtuYW1lOnR9KSxlPXtuYW1lOnR9KX1lbHNlIGlmKHRfW2UubmFtZV0pe2NvbnN0IHQ9dF9bZS5uYW1lXSxvPU9iamVjdC5hc3NpZ24oe30sZSk7Zm9yKGNvbnN0IG4gaW4gdCllLmhhc093blByb3BlcnR5KG4pfHwob1tuXT10W25dKTtlPW99cmV0dXJuJ3N0cmluZyc9PXR5cGVvZiBlLmljb24mJm9fW2UuaWNvbl0mJihlLmljb249b19bZS5pY29uXSksZX1mdW5jdGlvbiBacihlLHQpe2Zvcihjb25zdCBvIG9mIGUpdFtvLnRpdGxlXSYmKG8udGl0bGU9dFtvLnRpdGxlXSk7cmV0dXJuIGV9ZnVuY3Rpb24gZWEoZSx0KXtyZXR1cm4gbmV3IEd1KHRhKGUsdCwhMCksdGEoZSx0LCExKSl9ZnVuY3Rpb24gdGEoZSx0LG8pe2xldCBuPWUudGV4dE5vZGV8fChvP2Uubm9kZUJlZm9yZTplLm5vZGVBZnRlciksaT1udWxsO2Zvcig7biYmbi5nZXRBdHRyaWJ1dGUoJ2xpbmtIcmVmJyk9PXQ7KWk9bixuPW8/bi5wcmV2aW91c1NpYmxpbmc6bi5uZXh0U2libGluZztyZXR1cm4gaT9LdS5jcmVhdGVBdChpLG8/J2JlZm9yZSc6J2FmdGVyJyk6ZX1mdW5jdGlvbiBvYShlKXtyZXR1cm4gZS5pcygnYXR0cmlidXRlRWxlbWVudCcpJiYhIWUuZ2V0Q3VzdG9tUHJvcGVydHkodV8pfWZ1bmN0aW9uIG5hKGUsdCl7Y29uc3Qgbz10LmNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQoJ2EnLHtocmVmOmV9LHtwcmlvcml0eTo1fSk7cmV0dXJuIHQuc2V0Q3VzdG9tUHJvcGVydHkodV8sITAsbyksb31mdW5jdGlvbiBpYShlKXtyZXR1cm4gZSs9JycscmEoZSk/ZTonIyd9ZnVuY3Rpb24gcmEoZSl7Y29uc3QgdD1lLnJlcGxhY2UobV8sJycpO3JldHVybiB0Lm1hdGNoKHBfKX1mdW5jdGlvbiBhYShlLHQsbyxuKXtjb25zdCBpPW5ldyBnXyh0LG8sbikscj10LmRvY3VtZW50LnNlbGVjdGlvbjtvLmxpc3RlblRvKGUuZG9jdW1lbnQsJ2tleWRvd24nLChlLHQpPT57aWYoIXIuaXNDb2xsYXBzZWQpcmV0dXJuO2lmKHQuc2hpZnRLZXl8fHQuYWx0S2V5fHx0LmN0cmxLZXkpcmV0dXJuO2NvbnN0IG89dC5rZXlDb2RlPT1EYy5hcnJvd3JpZ2h0LG49dC5rZXlDb2RlPT1EYy5hcnJvd2xlZnQ7aWYoIW8mJiFuKXJldHVybjtjb25zdCBhPXIuZ2V0Rmlyc3RQb3NpdGlvbigpO2xldCBzO3M9bz9pLmhhbmRsZUZvcndhcmRNb3ZlbWVudChhLHQpOmkuaGFuZGxlQmFja3dhcmRNb3ZlbWVudChhLHQpLHMmJmUuc3RvcCgpfSx7cHJpb3JpdHk6bnMuZ2V0KCdoaWdoJykrMX0pfWZ1bmN0aW9uIHNhKGUsdCl7cmV0dXJuIGxhKGUsdCl8fGRhKGUsdCl9ZnVuY3Rpb24gbGEoZSx0KXtjb25zdHtub2RlQmVmb3JlOm8sbm9kZUFmdGVyOm59PWUsaT0hIW8mJm8uaGFzQXR0cmlidXRlKHQpLHI9ISFuJiZuLmhhc0F0dHJpYnV0ZSh0KTtyZXR1cm4gciYmKCFpfHxvLmdldEF0dHJpYnV0ZSh0KSE9PW4uZ2V0QXR0cmlidXRlKHQpKX1mdW5jdGlvbiBkYShlLHQpe2NvbnN0e25vZGVCZWZvcmU6byxub2RlQWZ0ZXI6bn09ZSxpPSEhbyYmby5oYXNBdHRyaWJ1dGUodCkscj0hIW4mJm4uaGFzQXR0cmlidXRlKHQpO3JldHVybiBpJiYoIXJ8fG8uZ2V0QXR0cmlidXRlKHQpIT09bi5nZXRBdHRyaWJ1dGUodCkpfWZ1bmN0aW9uIGNhKGUsdCl7Y29uc3R7bm9kZUJlZm9yZTpvLG5vZGVBZnRlcjpufT1lLGk9ISFvJiZvLmhhc0F0dHJpYnV0ZSh0KSxyPSEhbiYmbi5oYXNBdHRyaWJ1dGUodCk7cmV0dXJuIHImJmk/bi5nZXRBdHRyaWJ1dGUodCkhPT1vLmdldEF0dHJpYnV0ZSh0KTp2b2lkIDB9ZnVuY3Rpb24gdWEoZSx0KXtyZXR1cm4gc2EoZS5nZXRTaGlmdGVkQnkoLTEpLHQpfWZ1bmN0aW9uIG1hKGUpe3JldHVybiBlLmdldEFuY2VzdG9ycygpLmZpbmQoKGUpPT5vYShlKSl9ZnVuY3Rpb24gcGEoZSx0LG8pe2NvbnN0IG49dD9lWzBdOmVbZS5sZW5ndGgtMV07aWYobi5pcygnbGlzdEl0ZW0nKSlmb3IobGV0IGk9blt0PydwcmV2aW91c1NpYmxpbmcnOiduZXh0U2libGluZyddLHI9bi5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpO2kmJmkuaXMoJ2xpc3RJdGVtJykmJmkuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKT49bzspcj5pLmdldEF0dHJpYnV0ZSgnaW5kZW50JykmJihyPWkuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKSksaS5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpPT1yJiZlW3Q/J3Vuc2hpZnQnOidwdXNoJ10oaSksaT1pW3Q/J3ByZXZpb3VzU2libGluZyc6J25leHRTaWJsaW5nJ119ZnVuY3Rpb24gZ2EoZSx0KXtyZXR1cm4gdC5jaGVja0NoaWxkKGUucGFyZW50LCdsaXN0SXRlbScpJiYhdC5pc09iamVjdChlKX1mdW5jdGlvbiBmYShlKXtjb25zdCB0PWUuY3JlYXRlQ29udGFpbmVyRWxlbWVudCgnbGknKTtyZXR1cm4gdC5nZXRGaWxsZXJPZmZzZXQ9aGEsdH1mdW5jdGlvbiBoYSgpe2NvbnN0IGU9IXRoaXMuaXNFbXB0eSYmKCd1bCc9PXRoaXMuZ2V0Q2hpbGQoMCkubmFtZXx8J29sJz09dGhpcy5nZXRDaGlsZCgwKS5uYW1lKTtyZXR1cm4gdGhpcy5pc0VtcHR5fHxlPzA6bnVsbH1mdW5jdGlvbiBiYShlLHQsbyl7Y29uc3Qgbj1vLmNvbnN1bWFibGU7aWYobi50ZXN0KHQuaXRlbSwnaW5zZXJ0JykmJm4udGVzdCh0Lml0ZW0sJ2F0dHJpYnV0ZTp0eXBlJykmJm4udGVzdCh0Lml0ZW0sJ2F0dHJpYnV0ZTppbmRlbnQnKSl7bi5jb25zdW1lKHQuaXRlbSwnaW5zZXJ0Jyksbi5jb25zdW1lKHQuaXRlbSwnYXR0cmlidXRlOnR5cGUnKSxuLmNvbnN1bWUodC5pdGVtLCdhdHRyaWJ1dGU6aW5kZW50Jyk7Y29uc3QgZT10Lml0ZW0saT1PYShlLG8pO1ZhKGUsaSxvKX19ZnVuY3Rpb24ga2EoZSx0LG8pe2NvbnN0IG49by5tYXBwZXIudG9WaWV3UG9zaXRpb24odC5wb3NpdGlvbikuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oKGUpPT4hZS5pdGVtLmlzKCdsaScpKSxpPW4ubm9kZUFmdGVyLHI9by53cml0ZXI7ci5icmVha0NvbnRhaW5lcih4Yy5jcmVhdGVCZWZvcmUoaSkpLHIuYnJlYWtDb250YWluZXIoeGMuY3JlYXRlQWZ0ZXIoaSkpO2NvbnN0IGE9aS5wYXJlbnQscz1hLnByZXZpb3VzU2libGluZyxsPUNjLmNyZWF0ZU9uKGEpLGQ9ci5yZW1vdmUobCk7cyYmcy5uZXh0U2libGluZyYmSWEocixzLHMubmV4dFNpYmxpbmcpO2NvbnN0IGM9by5tYXBwZXIudG9Nb2RlbEVsZW1lbnQoaSk7RmEoYy5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpKzEsdC5wb3NpdGlvbixsLnN0YXJ0LGksbyk7Zm9yKGNvbnN0IG4gb2YgQ2MuY3JlYXRlSW4oZCkuZ2V0SXRlbXMoKSlvLm1hcHBlci51bmJpbmRWaWV3RWxlbWVudChuKTtlLnN0b3AoKX1mdW5jdGlvbiBfYShlLHQsbyl7aWYoIW8uY29uc3VtYWJsZS5jb25zdW1lKHQuaXRlbSwnYXR0cmlidXRlOnR5cGUnKSlyZXR1cm47Y29uc3Qgbj1vLm1hcHBlci50b1ZpZXdFbGVtZW50KHQuaXRlbSksaT1vLndyaXRlcjtpLmJyZWFrQ29udGFpbmVyKHhjLmNyZWF0ZUJlZm9yZShuKSksaS5icmVha0NvbnRhaW5lcih4Yy5jcmVhdGVBZnRlcihuKSk7bGV0IHI9bi5wYXJlbnQ7Y29uc3QgYT0nbnVtYmVyZWQnPT10LmF0dHJpYnV0ZU5ld1ZhbHVlPydvbCc6J3VsJztyPWkucmVuYW1lKHIsYSksSWEoaSxyLHIubmV4dFNpYmxpbmcpLElhKGksci5wcmV2aW91c1NpYmxpbmcscik7Zm9yKGNvbnN0IG4gb2YgdC5pdGVtLmdldENoaWxkcmVuKCkpby5jb25zdW1hYmxlLmNvbnN1bWUobiwnaW5zZXJ0Jyl9ZnVuY3Rpb24gd2EoZSx0LG8pe2lmKG8uY29uc3VtYWJsZS5jb25zdW1lKHQuaXRlbSwnYXR0cmlidXRlOmluZGVudCcpKXtjb25zdCBlPW8ubWFwcGVyLnRvVmlld0VsZW1lbnQodC5pdGVtKSxuPW8ud3JpdGVyO24uYnJlYWtDb250YWluZXIoeGMuY3JlYXRlQmVmb3JlKGUpKSxuLmJyZWFrQ29udGFpbmVyKHhjLmNyZWF0ZUFmdGVyKGUpKTtjb25zdCBpPWUucGFyZW50LHI9aS5wcmV2aW91c1NpYmxpbmcsYT1DYy5jcmVhdGVPbihpKTtuLnJlbW92ZShhKSxyJiZyLm5leHRTaWJsaW5nJiZJYShuLHIsci5uZXh0U2libGluZyksRmEodC5hdHRyaWJ1dGVPbGRWYWx1ZSsxLHQucmFuZ2Uuc3RhcnQsYS5zdGFydCxlLG8pLFZhKHQuaXRlbSxlLG8pO2Zvcihjb25zdCBlIG9mIHQuaXRlbS5nZXRDaGlsZHJlbigpKW8uY29uc3VtYWJsZS5jb25zdW1lKGUsJ2luc2VydCcpfX1mdW5jdGlvbiB2YShlLHQsbyl7aWYoJ2xpc3RJdGVtJyE9dC5pdGVtLm5hbWUpe2xldCBlPW8ubWFwcGVyLnRvVmlld1Bvc2l0aW9uKHQucmFuZ2Uuc3RhcnQpO2NvbnN0IG49by53cml0ZXIscj1bXTtmb3IoOygndWwnPT1lLnBhcmVudC5uYW1lfHwnb2wnPT1lLnBhcmVudC5uYW1lKSYmKGU9bi5icmVha0NvbnRhaW5lcihlKSwnbGknPT1lLnBhcmVudC5uYW1lKTspe2NvbnN0IHQ9ZSxvPXhjLmNyZWF0ZUF0KGUucGFyZW50LCdlbmQnKTtpZighdC5pc0VxdWFsKG8pKXtjb25zdCBlPW4ucmVtb3ZlKG5ldyBDYyh0LG8pKTtyLnB1c2goZSl9ZT14Yy5jcmVhdGVBZnRlcihlLnBhcmVudCl9aWYoMDxyLmxlbmd0aCl7Zm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IG89ZS5ub2RlQmVmb3JlLGk9bi5pbnNlcnQoZSxyW3RdKTtpZihlPWkuZW5kLDA8dCl7Y29uc3QgdD1JYShuLG8sby5uZXh0U2libGluZyk7dCYmdC5wYXJlbnQ9PW8mJmUub2Zmc2V0LS19fUlhKG4sZS5ub2RlQmVmb3JlLGUubm9kZUFmdGVyKX19fWZ1bmN0aW9uIHlhKGUsdCxvKXtjb25zdCBuPW8ubWFwcGVyLnRvVmlld1Bvc2l0aW9uKHQucG9zaXRpb24pLGk9bi5ub2RlQmVmb3JlLHI9bi5ub2RlQWZ0ZXI7SWEoby53cml0ZXIsaSxyKX1mdW5jdGlvbiB4YShlLHQsbyl7aWYoby5jb25zdW1hYmxlLmNvbnN1bWUodC52aWV3SXRlbSx7bmFtZTohMH0pKXtjb25zdCBlPW8ud3JpdGVyLG49dGhpcy5jb252ZXJzaW9uQXBpLnN0b3JlLGk9ZS5jcmVhdGVFbGVtZW50KCdsaXN0SXRlbScpO24uaW5kZW50PW4uaW5kZW50fHwwLGUuc2V0QXR0cmlidXRlKCdpbmRlbnQnLG4uaW5kZW50LGkpO2NvbnN0IHI9dC52aWV3SXRlbS5wYXJlbnQmJidvbCc9PXQudmlld0l0ZW0ucGFyZW50Lm5hbWU/J251bWJlcmVkJzonYnVsbGV0ZWQnO2Uuc2V0QXR0cmlidXRlKCd0eXBlJyxyLGkpLG4uaW5kZW50Kys7Y29uc3QgYT1vLnNwbGl0VG9BbGxvd2VkUGFyZW50KGksdC5tb2RlbEN1cnNvcik7aWYoIWEpcmV0dXJuO2UuaW5zZXJ0KGksYS5wb3NpdGlvbik7bGV0IHM9S3UuY3JlYXRlQWZ0ZXIoaSk7Zm9yKGNvbnN0IGUgb2YgdC52aWV3SXRlbS5nZXRDaGlsZHJlbigpKSd1bCc9PWUubmFtZXx8J29sJz09ZS5uYW1lP3M9by5jb252ZXJ0SXRlbShlLHMpLm1vZGVsQ3Vyc29yOm8uY29udmVydEl0ZW0oZSxLdS5jcmVhdGVBdChpLCdlbmQnKSk7bi5pbmRlbnQtLSx0Lm1vZGVsUmFuZ2U9bmV3IEd1KHQubW9kZWxDdXJzb3IscyksdC5tb2RlbEN1cnNvcj1hLmN1cnNvclBhcmVudD9LdS5jcmVhdGVBdChhLmN1cnNvclBhcmVudCk6dC5tb2RlbFJhbmdlLmVuZH19ZnVuY3Rpb24gQ2EoZSx0LG8pe2lmKG8uY29uc3VtYWJsZS50ZXN0KHQudmlld0l0ZW0se25hbWU6ITB9KSl7Y29uc3QgZT1BcnJheS5mcm9tKHQudmlld0l0ZW0uZ2V0Q2hpbGRyZW4oKSk7Zm9yKGNvbnN0IHQgb2YgZSl0LmlzKCdsaScpfHx0Ll9yZW1vdmUoKX19ZnVuY3Rpb24gQWEoZSx0LG8pe2lmKG8uY29uc3VtYWJsZS50ZXN0KHQudmlld0l0ZW0se25hbWU6ITB9KSl7aWYoMD09PXQudmlld0l0ZW0uY2hpbGRDb3VudClyZXR1cm47Y29uc3QgZT1bLi4udC52aWV3SXRlbS5nZXRDaGlsZHJlbigpXTtsZXQgbz0hMSxuPSEwO2Zvcihjb25zdCB0IG9mIGUpIW98fHQuaXMoJ3VsJyl8fHQuaXMoJ29sJyl8fHQuX3JlbW92ZSgpLHQuaXMoJ3RleHQnKT8obiYmKHQuX2RhdGE9dC5kYXRhLnJlcGxhY2UoL15cXHMrLywnJykpLCghdC5uZXh0U2libGluZ3x8dC5uZXh0U2libGluZy5pcygndWwnKXx8dC5uZXh0U2libGluZy5pcygnb2wnKSkmJih0Ll9kYXRhPXQuZGF0YS5yZXBsYWNlKC9cXHMrJC8sJycpKSk6KHQuaXMoJ3VsJyl8fHQuaXMoJ29sJykpJiYobz0hMCksbj0hMX19ZnVuY3Rpb24gVGEoZSx0KXtpZighdC5pc1BoYW50b20pe2NvbnN0IGU9dC5tb2RlbFBvc2l0aW9uLm5vZGVCZWZvcmU7aWYoZSYmZS5pcygnbGlzdEl0ZW0nKSl7Y29uc3Qgbz10Lm1hcHBlci50b1ZpZXdFbGVtZW50KGUpLG49by5nZXRBbmNlc3RvcnMoKS5maW5kKChlKT0+ZS5pcygndWwnKXx8ZS5pcygnb2wnKSksaT1uZXcgeWMoe3N0YXJ0UG9zaXRpb246eGMuY3JlYXRlQXQobywwKX0pO2Zvcihjb25zdCBlIG9mIGkpaWYoJ2VsZW1lbnRTdGFydCc9PWUudHlwZSYmZS5pdGVtLmlzKCdsaScpKXt0LnZpZXdQb3NpdGlvbj1lLnByZXZpb3VzUG9zaXRpb247YnJlYWt9ZWxzZSBpZignZWxlbWVudEVuZCc9PWUudHlwZSYmZS5pdGVtPT1uKXt0LnZpZXdQb3NpdGlvbj1lLm5leHRQb3NpdGlvbjticmVha319fX1mdW5jdGlvbiBQYShlLHQpe2NvbnN0IG89dC52aWV3UG9zaXRpb24sbj1vLnBhcmVudCxpPXQubWFwcGVyO2lmKCd1bCc9PW4ubmFtZXx8J29sJz09bi5uYW1lKXtpZighby5pc0F0RW5kKXtjb25zdCBlPWkudG9Nb2RlbEVsZW1lbnQoby5ub2RlQWZ0ZXIpO3QubW9kZWxQb3NpdGlvbj1LdS5jcmVhdGVCZWZvcmUoZSl9ZWxzZXtjb25zdCBlPWkudG9Nb2RlbEVsZW1lbnQoby5ub2RlQmVmb3JlKSxuPWkuZ2V0TW9kZWxMZW5ndGgoby5ub2RlQmVmb3JlKTt0Lm1vZGVsUG9zaXRpb249S3UuY3JlYXRlQmVmb3JlKGUpLmdldFNoaWZ0ZWRCeShuKX1lLnN0b3AoKX1lbHNlIGlmKCdsaSc9PW4ubmFtZSYmby5ub2RlQmVmb3JlJiYoJ3VsJz09by5ub2RlQmVmb3JlLm5hbWV8fCdvbCc9PW8ubm9kZUJlZm9yZS5uYW1lKSl7Y29uc3Qgcj1pLnRvTW9kZWxFbGVtZW50KG4pO2xldCBhPTEscz1vLm5vZGVCZWZvcmU7Zm9yKDtzJiYocy5pcygndWwnKXx8cy5pcygnb2wnKSk7KWErPWkuZ2V0TW9kZWxMZW5ndGgocykscz1zLnByZXZpb3VzU2libGluZzt0Lm1vZGVsUG9zaXRpb249S3UuY3JlYXRlQmVmb3JlKHIpLmdldFNoaWZ0ZWRCeShhKSxlLnN0b3AoKX19ZnVuY3Rpb24gRWEoZSx0KXtmdW5jdGlvbiBvKGUpe2NvbnN0IHQ9ZS5ub2RlQmVmb3JlO2lmKCF0fHwhdC5pcygnbGlzdEl0ZW0nKSl7Y29uc3QgdD1lLm5vZGVBZnRlcjt0JiZ0LmlzKCdsaXN0SXRlbScpJiZhLnNldCh0LHQpfWVsc2V7bGV0IG89dDtpZihhLmhhcyhvKSlyZXR1cm47Zm9yKDtvLnByZXZpb3VzU2libGluZyYmby5wcmV2aW91c1NpYmxpbmcuaXMoJ2xpc3RJdGVtJyk7KWlmKG89by5wcmV2aW91c1NpYmxpbmcsYS5oYXMobykpcmV0dXJuO2Euc2V0KGUubm9kZUJlZm9yZSxvKX19ZnVuY3Rpb24gbihlKXtmb3IobGV0IG89MCxuPW51bGw7ZSYmZS5pcygnbGlzdEl0ZW0nKTspe2NvbnN0IGk9ZS5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpO2lmKGk+byl7bGV0IHI7bnVsbD09PW4/KG49aS1vLHI9byk6KG4+aSYmKG49aSkscj1pLW4pLHQuc2V0QXR0cmlidXRlKCdpbmRlbnQnLHIsZSkscz0hMH1lbHNlIG49bnVsbCxvPWUuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKSsxO2U9ZS5uZXh0U2libGluZ319ZnVuY3Rpb24gaShlKXtmb3IobGV0IG89W10sbj1udWxsO2UmJmUuaXMoJ2xpc3RJdGVtJyk7KXtjb25zdCBpPWUuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKTtpZihuJiZuLmdldEF0dHJpYnV0ZSgnaW5kZW50Jyk+aSYmKG89by5zbGljZSgwLGkrMSkpLDAhPWkpaWYob1tpXSl7Y29uc3Qgbj1vW2ldO2UuZ2V0QXR0cmlidXRlKCd0eXBlJykhPW4mJih0LnNldEF0dHJpYnV0ZSgndHlwZScsbixlKSxzPSEwKX1lbHNlIG9baV09ZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtuPWUsZT1lLm5leHRTaWJsaW5nfX1jb25zdCByPWUuZG9jdW1lbnQuZGlmZmVyLmdldENoYW5nZXMoKSxhPW5ldyBNYXA7bGV0IHM9ITE7Zm9yKGNvbnN0IG4gb2YgcilpZignaW5zZXJ0Jz09bi50eXBlJiYnbGlzdEl0ZW0nPT1uLm5hbWUpbyhuLnBvc2l0aW9uKTtlbHNlIGlmKCdpbnNlcnQnPT1uLnR5cGUmJidsaXN0SXRlbSchPW4ubmFtZSl7aWYoJyR0ZXh0JyE9bi5uYW1lKXtjb25zdCBlPW4ucG9zaXRpb24ubm9kZUFmdGVyO2UuaGFzQXR0cmlidXRlKCdpbmRlbnQnKSYmKHQucmVtb3ZlQXR0cmlidXRlKCdpbmRlbnQnLGUpLHM9ITApLGUuaGFzQXR0cmlidXRlKCd0eXBlJykmJih0LnJlbW92ZUF0dHJpYnV0ZSgndHlwZScsZSkscz0hMCl9Y29uc3QgZT1uLnBvc2l0aW9uLmdldFNoaWZ0ZWRCeShuLmxlbmd0aCk7byhlKX1lbHNlJ3JlbW92ZSc9PW4udHlwZSYmJ2xpc3RJdGVtJz09bi5uYW1lP28obi5wb3NpdGlvbik6J2F0dHJpYnV0ZSc9PW4udHlwZSYmJ2luZGVudCc9PW4uYXR0cmlidXRlS2V5P28obi5yYW5nZS5zdGFydCk6J2F0dHJpYnV0ZSc9PW4udHlwZSYmJ3R5cGUnPT1uLmF0dHJpYnV0ZUtleSYmbyhuLnJhbmdlLnN0YXJ0KTtmb3IoY29uc3QgbyBvZiBhLnZhbHVlcygpKW4obyksaShvKTtyZXR1cm4gc31mdW5jdGlvbiBTYShlLFt0LG9dKXtsZXQgbj10LmlzKCdkb2N1bWVudEZyYWdtZW50Jyk/dC5nZXRDaGlsZCgwKTp0O2lmKG4mJm4uaXMoJ2xpc3RJdGVtJykpe2NvbnN0IGU9by5nZXRGaXJzdFBvc2l0aW9uKCk7bGV0IHQ9bnVsbDtpZihlLnBhcmVudC5pcygnbGlzdEl0ZW0nKT90PWUucGFyZW50OmUubm9kZUJlZm9yZSYmZS5ub2RlQmVmb3JlLmlzKCdsaXN0SXRlbScpJiYodD1lLm5vZGVCZWZvcmUpLHQpe2NvbnN0IGU9dC5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpO2lmKDA8ZSlmb3IoO24mJm4uaXMoJ2xpc3RJdGVtJyk7KW4uX3NldEF0dHJpYnV0ZSgnaW5kZW50JyxuLmdldEF0dHJpYnV0ZSgnaW5kZW50JykrZSksbj1uLm5leHRTaWJsaW5nfX19ZnVuY3Rpb24gT2EoZSx0KXtjb25zdCBvPXQubWFwcGVyLG49dC53cml0ZXIsaT0nbnVtYmVyZWQnPT1lLmdldEF0dHJpYnV0ZSgndHlwZScpPydvbCc6J3VsJyxyPWZhKG4pLGE9bi5jcmVhdGVDb250YWluZXJFbGVtZW50KGksbnVsbCk7cmV0dXJuIG4uaW5zZXJ0KHhjLmNyZWF0ZUF0KGEpLHIpLG8uYmluZEVsZW1lbnRzKGUscikscn1mdW5jdGlvbiBSYShlLHQpe2NvbnN0IG89ISF0LnNhbWVJbmRlbnQsbj0hIXQuc21hbGxlckluZGVudCxpPWUgaW5zdGFuY2VvZiBXdT9lLmdldEF0dHJpYnV0ZSgnaW5kZW50Jyk6dC5pbmRlbnQ7Zm9yKGxldCByPWUgaW5zdGFuY2VvZiBXdT9lLnByZXZpb3VzU2libGluZzplLm5vZGVCZWZvcmU7ciYmJ2xpc3RJdGVtJz09ci5uYW1lOyl7Y29uc3QgZT1yLmdldEF0dHJpYnV0ZSgnaW5kZW50Jyk7aWYobyYmaT09ZXx8biYmaT5lKXJldHVybiByO3I9ci5wcmV2aW91c1NpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSWEoZSx0LG8pe3JldHVybiB0JiZvJiYoJ3VsJz09dC5uYW1lfHwnb2wnPT10Lm5hbWUpJiZ0Lm5hbWU9PW8ubmFtZT9lLm1lcmdlQ29udGFpbmVycyh4Yy5jcmVhdGVBZnRlcih0KSk6bnVsbH1mdW5jdGlvbiBWYShlLHQsbyl7Y29uc3Qgbj10LnBhcmVudCxpPW8ubWFwcGVyLHI9by53cml0ZXI7bGV0IGE9aS50b1ZpZXdQb3NpdGlvbihLdS5jcmVhdGVCZWZvcmUoZSkpO2NvbnN0IHM9UmEoZSx7c2FtZUluZGVudDohMCxzbWFsbGVySW5kZW50OiEwfSksbD1lLnByZXZpb3VzU2libGluZztpZihzJiZzLmdldEF0dHJpYnV0ZSgnaW5kZW50Jyk9PWUuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKSl7Y29uc3QgZT1pLnRvVmlld0VsZW1lbnQocyk7YT1yLmJyZWFrQ29udGFpbmVyKHhjLmNyZWF0ZUFmdGVyKGUpKX1lbHNlIGE9bCYmJ2xpc3RJdGVtJz09bC5uYW1lP2kudG9WaWV3UG9zaXRpb24oS3UuY3JlYXRlQXQobCwnZW5kJykpOmkudG9WaWV3UG9zaXRpb24oS3UuY3JlYXRlQmVmb3JlKGUpKTtpZihhPU5hKGEpLHIuaW5zZXJ0KGEsbiksbCYmJ2xpc3RJdGVtJz09bC5uYW1lKXtjb25zdCBlPWkudG9WaWV3RWxlbWVudChsKSxvPW5ldyB5Yyh7Ym91bmRhcmllczpuZXcgQ2MoeGMuY3JlYXRlQXQoZSwwKSxhKSxpZ25vcmVFbGVtZW50RW5kOiEwfSk7Zm9yKGNvbnN0IGUgb2YgbylpZihlLml0ZW0uaXMoJ2xpJykpe2NvbnN0IG49ci5icmVha0NvbnRhaW5lcih4Yy5jcmVhdGVCZWZvcmUoZS5pdGVtKSksaT1lLml0ZW0ucGFyZW50LGE9eGMuY3JlYXRlQXQodCwnZW5kJyk7SWEocixhLm5vZGVCZWZvcmUsYS5ub2RlQWZ0ZXIpLHIubW92ZShDYy5jcmVhdGVPbihpKSxhKSxvLnBvc2l0aW9uPW59fWVsc2V7Y29uc3Qgbz1uLm5leHRTaWJsaW5nO2lmKG8mJihvLmlzKCd1bCcpfHxvLmlzKCdvbCcpKSl7bGV0IG49bnVsbDtmb3IoY29uc3QgdCBvZiBvLmdldENoaWxkcmVuKCkpe2NvbnN0IG89aS50b01vZGVsRWxlbWVudCh0KTtpZihvJiZvLmdldEF0dHJpYnV0ZSgnaW5kZW50Jyk+ZS5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpKW49dDtlbHNlIGJyZWFrfW4mJihyLmJyZWFrQ29udGFpbmVyKHhjLmNyZWF0ZUFmdGVyKG4pKSxyLm1vdmUoQ2MuY3JlYXRlT24obi5wYXJlbnQpLHhjLmNyZWF0ZUF0KHQsJ2VuZCcpKSl9fUlhKHIsbixuLm5leHRTaWJsaW5nKSxJYShyLG4ucHJldmlvdXNTaWJsaW5nLG4pfWZ1bmN0aW9uIEZhKGUsdCxvLG4saSl7Y29uc3Qgcj1SYSh0LHtzYW1lSW5kZW50OiEwLHNtYWxsZXJJbmRlbnQ6ITAsaW5kZW50OmV9KSxhPWkubWFwcGVyLHM9aS53cml0ZXIsbD1yP3IuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKTpudWxsO2xldCBkO2lmKCFyKWQ9bztlbHNlIGlmKGw9PWUpe2NvbnN0IGU9YS50b1ZpZXdFbGVtZW50KHIpLnBhcmVudDtkPXhjLmNyZWF0ZUFmdGVyKGUpfWVsc2V7Y29uc3QgZT1LdS5jcmVhdGVBdChyLCdlbmQnKTtkPWEudG9WaWV3UG9zaXRpb24oZSl9ZD1OYShkKTtmb3IoY29uc3QgciBvZlsuLi5uLmdldENoaWxkcmVuKCldKShyLmlzKCd1bCcpfHxyLmlzKCdvbCcpKSYmKGQ9cy5tb3ZlKENjLmNyZWF0ZU9uKHIpLGQpLmVuZCxJYShzLHIsci5uZXh0U2libGluZyksSWEocyxyLnByZXZpb3VzU2libGluZyxyKSl9ZnVuY3Rpb24gTmEoZSl7cmV0dXJuIGUuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oKGUpPT5lLml0ZW0uaXMoJ3VpRWxlbWVudCcpKX1mdW5jdGlvbiBNYShlKXtsZXQgdD0xO2Zvcihjb25zdCBvIG9mIGUuZ2V0Q2hpbGRyZW4oKSlpZigndWwnPT1vLm5hbWV8fCdvbCc9PW8ubmFtZSlmb3IoY29uc3QgZSBvZiBvLmdldENoaWxkcmVuKCkpdCs9TWEoZSk7cmV0dXJuIHR9dmFyIERhPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxCYT1NYXRoLm1heCxMYT1NYXRoLm1pbix6YT1NYXRoLmZsb29yO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCdfX2VzTW9kdWxlJyx7dmFsdWU6ITB9KTt2YXIgamE9T2JqZWN0LmdldFByb3RvdHlwZU9mLHFhPWZ1bmN0aW9uKGUpe3JldHVybiBqYShPYmplY3QoZSkpfSxXYT1mdW5jdGlvbihlKXt2YXIgdD0hMTtpZihudWxsIT1lJiYnZnVuY3Rpb24nIT10eXBlb2YgZS50b1N0cmluZyl0cnl7dD0hIShlKycnKX1jYXRjaCh0KXt9cmV0dXJuIHR9LFVhPWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmJ29iamVjdCc9PXR5cGVvZiBlfSxIYT1PYmplY3QucHJvdG90eXBlLEthPUZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZyxHYT1IYS5oYXNPd25Qcm9wZXJ0eSwkYT1LYS5jYWxsKE9iamVjdCksSmE9SGEudG9TdHJpbmcsUWE9ZnVuY3Rpb24oZSl7aWYoIVVhKGUpfHxKYS5jYWxsKGUpIT0nW29iamVjdCBPYmplY3RdJ3x8V2EoZSkpcmV0dXJuITE7dmFyIHQ9cWEoZSk7aWYobnVsbD09PXQpcmV0dXJuITA7dmFyIG89R2EuY2FsbCh0LCdjb25zdHJ1Y3RvcicpJiZ0LmNvbnN0cnVjdG9yO3JldHVybidmdW5jdGlvbic9PXR5cGVvZiBvJiZvIGluc3RhbmNlb2YgbyYmS2EuY2FsbChvKT09JGF9O2NsYXNzIFlhe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fY29uZmlnPXt9LHQmJnRoaXMuZGVmaW5lKHQpLGUmJnRoaXMuX3NldE9iamVjdFRvVGFyZ2V0KHRoaXMuX2NvbmZpZyxlKX1zZXQoZSx0KXt0aGlzLl9zZXRUb1RhcmdldCh0aGlzLl9jb25maWcsZSx0KX1kZWZpbmUoZSx0KXt0aGlzLl9zZXRUb1RhcmdldCh0aGlzLl9jb25maWcsZSx0LCEwKX1nZXQoZSl7cmV0dXJuIHRoaXMuX2dldEZyb21Tb3VyY2UodGhpcy5fY29uZmlnLGUpfV9zZXRUb1RhcmdldChlLHQsbyxuPSExKXtpZihRYSh0KSlyZXR1cm4gdm9pZCB0aGlzLl9zZXRPYmplY3RUb1RhcmdldChlLHQsbik7Y29uc3QgaT10LnNwbGl0KCcuJyk7dD1pLnBvcCgpO2Zvcihjb25zdCByIG9mIGkpUWEoZVtyXSl8fChlW3JdPXt9KSxlPWVbcl07cmV0dXJuIFFhKG8pPyhRYShlW3RdKXx8KGVbdF09e30pLGU9ZVt0XSx2b2lkIHRoaXMuX3NldE9iamVjdFRvVGFyZ2V0KGUsbyxuKSk6dm9pZChuJiYndW5kZWZpbmVkJyE9dHlwZW9mIGVbdF18fChlW3RdPW8pKX1fZ2V0RnJvbVNvdXJjZShlLHQpe2NvbnN0IG89dC5zcGxpdCgnLicpO3Q9by5wb3AoKTtmb3IoY29uc3QgbiBvZiBvKXtpZighUWEoZVtuXSkpe2U9bnVsbDticmVha31lPWVbbl19cmV0dXJuIGU/ZVt0XTp2b2lkIDB9X3NldE9iamVjdFRvVGFyZ2V0KGUsdCxvKXtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChuKT0+e3RoaXMuX3NldFRvVGFyZ2V0KGUsbix0W25dLG8pfSl9fWNvbnN0IFhhPSdodHRwczovL2RvY3MuY2tlZGl0b3IuY29tL2NrZWRpdG9yNS9sYXRlc3QvZnJhbWV3b3JrL2d1aWRlcy9zdXBwb3J0L2Vycm9yLWNvZGVzLmh0bWwnO2NsYXNzIFphIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSx0KXtlPW4oZSksdCYmKGUrPScgJytKU09OLnN0cmluZ2lmeSh0KSksc3VwZXIoZSksdGhpcy5uYW1lPSdDS0VkaXRvckVycm9yJyx0aGlzLmRhdGE9dH1zdGF0aWMgaXNDS0VkaXRvckVycm9yKGUpe3JldHVybiBlIGluc3RhbmNlb2YgWmF9fXZhciBlcz1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKCl7ZS5jYWxsZWQ9ITB9fTtjbGFzcyB0c3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuc291cmNlPWUsdGhpcy5uYW1lPXQsdGhpcy5wYXRoPVtdLHRoaXMuc3RvcD1lcygpLHRoaXMub2ZmPWVzKCl9fWNvbnN0IG9zPXtnZXQoZSl7cmV0dXJuJ251bWJlcic9PXR5cGVvZiBlP2U6dGhpc1tlXXx8dGhpcy5ub3JtYWx9LGhpZ2hlc3Q6MWU1LGhpZ2g6MWUzLG5vcm1hbDowLGxvdzotMWUzLGxvd2VzdDotMWU1fTt2YXIgbnM9b3M7Y29uc3QgaXM9U3ltYm9sKCdsaXN0ZW5pbmdUbycpLHJzPVN5bWJvbCgnZW1pdHRlcklkJyksYXM9e29uKGUsdCxvPXt9KXt0aGlzLmxpc3RlblRvKHRoaXMsZSx0LG8pfSxvbmNlKGUsdCxvKXt0aGlzLmxpc3RlblRvKHRoaXMsZSxmdW5jdGlvbihlLC4uLm8pe2Uub2ZmKCksdC5jYWxsKHRoaXMsZSwuLi5vKX0sbyl9LG9mZihlLHQpe3RoaXMuc3RvcExpc3RlbmluZyh0aGlzLGUsdCl9LGxpc3RlblRvKGUsdCxvLG49e30pe2xldCBpLHI7dGhpc1tpc118fCh0aGlzW2lzXT17fSk7Y29uc3QgbD10aGlzW2lzXTtzKGUpfHxhKGUpO2NvbnN0IGQ9cyhlKTsoaT1sW2RdKXx8KGk9bFtkXT17ZW1pdHRlcjplLGNhbGxiYWNrczp7fX0pLChyPWkuY2FsbGJhY2tzW3RdKXx8KHI9aS5jYWxsYmFja3NbdF09W10pLHIucHVzaChvKSxjKGUsdCk7Y29uc3QgbT11KGUsdCkscD1ucy5nZXQobi5wcmlvcml0eSksZz17Y2FsbGJhY2s6byxwcmlvcml0eTpwfTtmb3IoY29uc3QgciBvZiBtKXtsZXQgZT0hMTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKylpZihyW3RdLnByaW9yaXR5PHApe3Iuc3BsaWNlKHQsMCxnKSxlPSEwO2JyZWFrfWV8fHIucHVzaChnKX19LHN0b3BMaXN0ZW5pbmcoZSx0LG8pe2NvbnN0IG49dGhpc1tpc107bGV0IGk9ZSYmcyhlKTtjb25zdCByPW4mJmkmJm5baV0sYT1yJiZ0JiZyLmNhbGxiYWNrc1t0XTtpZihuJiYoIWV8fHIpJiYoIXR8fGEpKWlmKG8pZyhlLHQsbyk7ZWxzZSBpZihhKXtmb3IoO289YS5wb3AoKTspZyhlLHQsbyk7ZGVsZXRlIHIuY2FsbGJhY2tzW3RdfWVsc2UgaWYocil7Zm9yKHQgaW4gci5jYWxsYmFja3MpdGhpcy5zdG9wTGlzdGVuaW5nKGUsdCk7ZGVsZXRlIG5baV19ZWxzZXtmb3IoaSBpbiBuKXRoaXMuc3RvcExpc3RlbmluZyhuW2ldLmVtaXR0ZXIpO2RlbGV0ZSB0aGlzW2lzXX19LGZpcmUoZSwuLi50KXtjb25zdCBvPWUgaW5zdGFuY2VvZiB0cz9lOm5ldyB0cyh0aGlzLGUpLG49by5uYW1lO2xldCByPW0odGhpcyxuKTtpZihvLnBhdGgucHVzaCh0aGlzKSxyKXtjb25zdCBlPVtvLC4uLnRdO3I9QXJyYXkuZnJvbShyKTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoJiYoclt0XS5jYWxsYmFjay5hcHBseSh0aGlzLGUpLG8ub2ZmLmNhbGxlZCYmKGRlbGV0ZSBvLm9mZi5jYWxsZWQsZyh0aGlzLG4sclt0XS5jYWxsYmFjaykpLCFvLnN0b3AuY2FsbGVkKTt0KyspO31pZih0aGlzLl9kZWxlZ2F0aW9ucyl7Y29uc3QgZT10aGlzLl9kZWxlZ2F0aW9ucy5nZXQobiksaT10aGlzLl9kZWxlZ2F0aW9ucy5nZXQoJyonKTtlJiZwKGUsbyx0KSxpJiZwKGksbyx0KX1yZXR1cm4gby5yZXR1cm59LGRlbGVnYXRlKC4uLmUpe3JldHVybnt0bzoodCxvKT0+e3RoaXMuX2RlbGVnYXRpb25zfHwodGhpcy5fZGVsZWdhdGlvbnM9bmV3IE1hcCk7Zm9yKGNvbnN0IG4gb2YgZSl7Y29uc3QgZT10aGlzLl9kZWxlZ2F0aW9ucy5nZXQobik7ZT9lLnNldCh0LG8pOnRoaXMuX2RlbGVnYXRpb25zLnNldChuLG5ldyBNYXAoW1t0LG9dXSkpfX19fSxzdG9wRGVsZWdhdGluZyhlLHQpe2lmKHRoaXMuX2RlbGVnYXRpb25zKWlmKCFlKXRoaXMuX2RlbGVnYXRpb25zLmNsZWFyKCk7ZWxzZSBpZighdCl0aGlzLl9kZWxlZ2F0aW9ucy5kZWxldGUoZSk7ZWxzZXtjb25zdCBvPXRoaXMuX2RlbGVnYXRpb25zLmdldChlKTtvJiZvLmRlbGV0ZSh0KX19fTt2YXIgc3M9YXMsbHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR8fGUhPT1lJiZ0IT09dH0sZHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG89ZS5sZW5ndGg7by0tOylpZihscyhlW29dWzBdLHQpKXJldHVybiBvO3JldHVybi0xfSxjcz1BcnJheS5wcm90b3R5cGUsdXM9Y3Muc3BsaWNlO2gucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1bXX0saC5wcm90b3R5cGVbJ2RlbGV0ZSddPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX19kYXRhX18sbz1kcyh0LGUpO2lmKDA+bylyZXR1cm4hMTt2YXIgbj10Lmxlbmd0aC0xO3JldHVybiBvPT1uP3QucG9wKCk6dXMuY2FsbCh0LG8sMSksITB9LGgucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fZGF0YV9fLG89ZHModCxlKTtyZXR1cm4gMD5vP3ZvaWQgMDp0W29dWzFdfSxoLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuLTE8ZHModGhpcy5fX2RhdGFfXyxlKX0saC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpcy5fX2RhdGFfXyxuPWRzKG8sZSk7cmV0dXJuIDA+bj9vLnB1c2goW2UsdF0pOm9bbl1bMV09dCx0aGlzfTt2YXIgbXM9aCxwcz1mdW5jdGlvbihlKXt2YXIgdD10eXBlb2YgZTtyZXR1cm4hIWUmJignb2JqZWN0Jz09dHx8J2Z1bmN0aW9uJz09dCl9LGdzPU9iamVjdC5wcm90b3R5cGUsZnM9Z3MudG9TdHJpbmcsaHM9ZnVuY3Rpb24oZSl7dmFyIHQ9cHMoZSk/ZnMuY2FsbChlKTonJztyZXR1cm4gdD09J1tvYmplY3QgRnVuY3Rpb25dJ3x8dD09J1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJ30sYnM9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLGtzPWZ1bmN0aW9uKGUpe2lmKG51bGwhPWUpe3RyeXtyZXR1cm4gYnMuY2FsbChlKX1jYXRjaCh0KXt9dHJ5e3JldHVybiBlKycnfWNhdGNoKHQpe319cmV0dXJuJyd9LF9zPS9bXFxcXF4kLiorPygpW1xcXXt9fF0vZyx3cz0vXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvLHZzPU9iamVjdC5wcm90b3R5cGUseXM9RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLHhzPXZzLmhhc093blByb3BlcnR5LENzPVJlZ0V4cCgnXicreXMuY2FsbCh4cykucmVwbGFjZShfcywnXFxcXCQmJykucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywnJDEuKj8nKSsnJCcpLEFzPWZ1bmN0aW9uKGUpe2lmKCFwcyhlKSlyZXR1cm4hMTt2YXIgdD1ocyhlKXx8V2EoZSk/Q3M6d3M7cmV0dXJuIHQudGVzdChrcyhlKSl9LFRzPWZ1bmN0aW9uKGUsdCl7dmFyIG89ZVt0XTtyZXR1cm4gQXMobyk/bzp2b2lkIDB9LFBzPVRzKE9iamVjdCwnY3JlYXRlJyksRXM9UHMsU3M9T2JqZWN0LnByb3RvdHlwZSxPcz1Tcy5oYXNPd25Qcm9wZXJ0eSxScz1PYmplY3QucHJvdG90eXBlLElzPVJzLmhhc093blByb3BlcnR5O2IucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1Fcz9FcyhudWxsKTp7fX0sYi5wcm90b3R5cGVbJ2RlbGV0ZSddPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhcyhlKSYmZGVsZXRlIHRoaXMuX19kYXRhX19bZV19LGIucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fZGF0YV9fO2lmKEVzKXt2YXIgbz10W2VdO3JldHVybiBvPT09J19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nP3ZvaWQgMDpvfXJldHVybiBPcy5jYWxsKHQsZSk/dFtlXTp2b2lkIDB9LGIucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9fZGF0YV9fO3JldHVybiBFcz90W2VdIT09dm9pZCAwOklzLmNhbGwodCxlKX0sYi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpcy5fX2RhdGFfXztyZXR1cm4gb1tlXT1FcyYmdm9pZCAwPT09dD8nX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc6dCx0aGlzfTt2YXIgVnM9YixGcz1vKDEpLE5zPVRzKEZzLmEsJ01hcCcpLE1zPU5zLERzPWZ1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVybidzdHJpbmcnPT10fHwnbnVtYmVyJz09dHx8J3N5bWJvbCc9PXR8fCdib29sZWFuJz09dD8nX19wcm90b19fJyE9PWU6bnVsbD09PWV9LEJzPWZ1bmN0aW9uKGUsdCl7dmFyIG89ZS5fX2RhdGFfXztyZXR1cm4gRHModCk/b1snc3RyaW5nJz09dHlwZW9mIHQ/J3N0cmluZyc6J2hhc2gnXTpvLm1hcH07ay5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9fZGF0YV9fPXtoYXNoOm5ldyBWcyxtYXA6bmV3KE1zfHxtcyksc3RyaW5nOm5ldyBWc319LGsucHJvdG90eXBlWydkZWxldGUnXT1mdW5jdGlvbihlKXtyZXR1cm4gQnModGhpcyxlKVsnZGVsZXRlJ10oZSl9LGsucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gQnModGhpcyxlKS5nZXQoZSl9LGsucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gQnModGhpcyxlKS5oYXMoZSl9LGsucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3JldHVybiBCcyh0aGlzLGUpLnNldChlLHQpLHRoaXN9O3ZhciBMcz1rO18ucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fX2RhdGFfXz1uZXcgbXN9LF8ucHJvdG90eXBlWydkZWxldGUnXT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2RhdGFfX1snZGVsZXRlJ10oZSl9LF8ucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQoZSl9LF8ucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXMoZSl9LF8ucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciBvPXRoaXMuX19kYXRhX187cmV0dXJuIG8gaW5zdGFuY2VvZiBtcyYmby5fX2RhdGFfXy5sZW5ndGg9PTIwMCYmKG89dGhpcy5fX2RhdGFfXz1uZXcgTHMoby5fX2RhdGFfXykpLG8uc2V0KGUsdCksdGhpc307dmFyIHpzPV8sanM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG89LTEsbj1lLmxlbmd0aDsrK288biYmISghMT09PXQoZVtvXSxvLGUpKTspO3JldHVybiBlfSxxcz1PYmplY3QucHJvdG90eXBlLFdzPXFzLmhhc093blByb3BlcnR5LFVzPXcsSHM9ZnVuY3Rpb24oZSx0LG8sbil7b3x8KG89e30pO2Zvcih2YXIgaT0tMSxyPXQubGVuZ3RoOysraTxyOyl7dmFyIGE9dFtpXSxzPW4/bihvW2FdLGVbYV0sYSxvLGUpOmVbYV07VXMobyxhLHMpfXJldHVybiBvfSxLcz1PYmplY3QucHJvdG90eXBlLEdzPUtzLmhhc093blByb3BlcnR5LCRzPXYsSnM9T2JqZWN0LmtleXMsUXM9ZnVuY3Rpb24oZSl7cmV0dXJuIEpzKE9iamVjdChlKSl9LFlzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvPS0xLG49QXJyYXkoZSk7KytvPGU7KW5bb109dChvKTtyZXR1cm4gbn0sWHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10P3ZvaWQgMDp0W2VdfX0sWnM9WHMoJ2xlbmd0aCcpLGVsPWZ1bmN0aW9uKGUpe3JldHVybidudW1iZXInPT10eXBlb2YgZSYmLTE8ZSYmMD09ZSUxJiZlPD05MDA3MTk5MjU0NzQwOTkxfSx0bD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZWwoWnMoZSkpJiYhaHMoZSl9LG9sPWZ1bmN0aW9uKGUpe3JldHVybiBVYShlKSYmdGwoZSl9LG5sPU9iamVjdC5wcm90b3R5cGUsaWw9bmwuaGFzT3duUHJvcGVydHkscmw9bmwudG9TdHJpbmcsYWw9bmwucHJvcGVydHlJc0VudW1lcmFibGUsc2w9ZnVuY3Rpb24oZSl7cmV0dXJuIG9sKGUpJiZpbC5jYWxsKGUsJ2NhbGxlZScpJiYoIWFsLmNhbGwoZSwnY2FsbGVlJyl8fHJsLmNhbGwoZSk9PSdbb2JqZWN0IEFyZ3VtZW50c10nKX0sbGw9QXJyYXkuaXNBcnJheSxkbD1sbCxjbD1PYmplY3QucHJvdG90eXBlLHVsPWNsLnRvU3RyaW5nLG1sPWZ1bmN0aW9uKGUpe3JldHVybidzdHJpbmcnPT10eXBlb2YgZXx8IWRsKGUpJiZVYShlKSYmdWwuY2FsbChlKT09J1tvYmplY3QgU3RyaW5nXSd9LHBsPWZ1bmN0aW9uKGUpe3ZhciB0PWU/ZS5sZW5ndGg6dm9pZCAwO3JldHVybiBlbCh0KSYmKGRsKGUpfHxtbChlKXx8c2woZSkpP1lzKHQsU3RyaW5nKTpudWxsfSxnbD0vXig/OjB8WzEtOV1cXGQqKSQvLGZsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9bnVsbD09dD85MDA3MTk5MjU0NzQwOTkxOnQsISF0JiYoJ251bWJlcic9PXR5cGVvZiBlfHxnbC50ZXN0KGUpKSYmLTE8ZSYmMD09ZSUxJiZlPHR9LGhsPU9iamVjdC5wcm90b3R5cGUsYmw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5jb25zdHJ1Y3RvcixvPSdmdW5jdGlvbic9PXR5cGVvZiB0JiZ0LnByb3RvdHlwZXx8aGw7cmV0dXJuIGU9PT1vfSxrbD1mdW5jdGlvbihlKXt2YXIgdD1ibChlKTtpZighKHR8fHRsKGUpKSlyZXR1cm4gUXMoZSk7dmFyIG89cGwoZSksbj1vfHxbXSxpPW4ubGVuZ3RoO2Zvcih2YXIgciBpbiBlKSEkcyhlLHIpfHwhIW8mJignbGVuZ3RoJz09cnx8ZmwocixpKSl8fHQmJidjb25zdHJ1Y3Rvcic9PXJ8fG4ucHVzaChyKTtyZXR1cm4gbn0sX2w9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmSHModCxrbCh0KSxlKX0sd2w9ZnVuY3Rpb24oZSx0KXtpZih0KXJldHVybiBlLnNsaWNlKCk7dmFyIG89bmV3IGUuY29uc3RydWN0b3IoZS5sZW5ndGgpO3JldHVybiBlLmNvcHkobyksb30sdmw9ZnVuY3Rpb24oZSx0KXt2YXIgbz0tMSxuPWUubGVuZ3RoO2Zvcih0fHwodD1BcnJheShuKSk7KytvPG47KXRbb109ZVtvXTtyZXR1cm4gdH0seWw9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9sczt5bHx8KHk9ZnVuY3Rpb24oKXtyZXR1cm5bXX0pO3ZhciB4bD15LENsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEhzKGUseGwoZSksdCl9LEFsPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvPS0xLG49dC5sZW5ndGgsaT1lLmxlbmd0aDsrK288bjspZVtpK29dPXRbb107cmV0dXJuIGV9LFRsPWZ1bmN0aW9uKGUsdCxvKXt2YXIgbj10KGUpO3JldHVybiBkbChlKT9uOkFsKG4sbyhlKSl9LFBsPWZ1bmN0aW9uKGUpe3JldHVybiBUbChlLGtsLHhsKX0sRWw9VHMoRnMuYSwnRGF0YVZpZXcnKSxTbD1FbCxPbD1UcyhGcy5hLCdQcm9taXNlJyksUmw9T2wsSWw9VHMoRnMuYSwnU2V0JyksVmw9SWwsRmw9VHMoRnMuYSwnV2Vha01hcCcpLE5sPUZsLE1sPSdbb2JqZWN0IE1hcF0nLERsPSdbb2JqZWN0IFByb21pc2VdJyxCbD0nW29iamVjdCBTZXRdJyxMbD0nW29iamVjdCBXZWFrTWFwXScsemw9J1tvYmplY3QgRGF0YVZpZXddJyxqbD1PYmplY3QucHJvdG90eXBlLHFsPWpsLnRvU3RyaW5nLFdsPWtzKFNsKSxVbD1rcyhNcyksSGw9a3MoUmwpLEtsPWtzKFZsKSxHbD1rcyhObCk7KFNsJiZ4KG5ldyBTbChuZXcgQXJyYXlCdWZmZXIoMSkpKSE9emx8fE1zJiZ4KG5ldyBNcykhPU1sfHxSbCYmeChSbC5yZXNvbHZlKCkpIT1EbHx8VmwmJngobmV3IFZsKSE9Qmx8fE5sJiZ4KG5ldyBObCkhPUxsKSYmKHg9ZnVuY3Rpb24oZSl7dmFyIHQ9cWwuY2FsbChlKSxvPXQ9PSdbb2JqZWN0IE9iamVjdF0nP2UuY29uc3RydWN0b3I6dm9pZCAwLG49bz9rcyhvKTp2b2lkIDA7aWYobilzd2l0Y2gobil7Y2FzZSBXbDpyZXR1cm4gemw7Y2FzZSBVbDpyZXR1cm4gTWw7Y2FzZSBIbDpyZXR1cm4gRGw7Y2FzZSBLbDpyZXR1cm4gQmw7Y2FzZSBHbDpyZXR1cm4gTGw7fXJldHVybiB0fSk7dmFyICRsPXgsSmw9T2JqZWN0LnByb3RvdHlwZSxRbD1KbC5oYXNPd25Qcm9wZXJ0eSxZbD1mdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxvPWUuY29uc3RydWN0b3IodCk7cmV0dXJuIHQmJidzdHJpbmcnPT10eXBlb2YgZVswXSYmUWwuY2FsbChlLCdpbmRleCcpJiYoby5pbmRleD1lLmluZGV4LG8uaW5wdXQ9ZS5pbnB1dCksb30sWGw9RnMuYS5VaW50OEFycmF5LFpsPVhsLGVkPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBlLmNvbnN0cnVjdG9yKGUuYnl0ZUxlbmd0aCk7cmV0dXJuIG5ldyBabCh0KS5zZXQobmV3IFpsKGUpKSx0fSx0ZD1mdW5jdGlvbihlLHQpe3ZhciBvPXQ/ZWQoZS5idWZmZXIpOmUuYnVmZmVyO3JldHVybiBuZXcgZS5jb25zdHJ1Y3RvcihvLGUuYnl0ZU9mZnNldCxlLmJ5dGVMZW5ndGgpfSxvZD1mdW5jdGlvbihlLHQpe3JldHVybiBlLnNldCh0WzBdLHRbMV0pLGV9LG5kPWZ1bmN0aW9uKGUsdCxvLG4pe3ZhciBpPS0xLHI9ZS5sZW5ndGg7Zm9yKG4mJnImJihvPWVbKytpXSk7KytpPHI7KW89dChvLGVbaV0saSxlKTtyZXR1cm4gb30saWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9LTEsbz1BcnJheShlLnNpemUpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSxuKXtvWysrdF09W24sZV19KSxvfSxyZD1mdW5jdGlvbihlLHQsbyl7dmFyIG49dD9vKGlkKGUpLCEwKTppZChlKTtyZXR1cm4gbmQobixvZCxuZXcgZS5jb25zdHJ1Y3Rvcil9LGFkPS9cXHcqJC8sc2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGUuY29uc3RydWN0b3IoZS5zb3VyY2UsYWQuZXhlYyhlKSk7cmV0dXJuIHQubGFzdEluZGV4PWUubGFzdEluZGV4LHR9LGxkPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYWRkKHQpLGV9LGRkPWZ1bmN0aW9uKGUpe3ZhciB0PS0xLG89QXJyYXkoZS5zaXplKTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe29bKyt0XT1lfSksb30sY2Q9ZnVuY3Rpb24oZSx0LG8pe3ZhciBuPXQ/byhkZChlKSwhMCk6ZGQoZSk7cmV0dXJuIG5kKG4sbGQsbmV3IGUuY29uc3RydWN0b3IpfSx1ZD1Gcy5hLlN5bWJvbCxtZD11ZCxwZD1tZD9tZC5wcm90b3R5cGU6dm9pZCAwLGdkPXBkP3BkLnZhbHVlT2Y6dm9pZCAwLGZkPWZ1bmN0aW9uKGUpe3JldHVybiBnZD9PYmplY3QoZ2QuY2FsbChlKSk6e319LGhkPWZ1bmN0aW9uKGUsdCl7dmFyIG89dD9lZChlLmJ1ZmZlcik6ZS5idWZmZXI7cmV0dXJuIG5ldyBlLmNvbnN0cnVjdG9yKG8sZS5ieXRlT2Zmc2V0LGUubGVuZ3RoKX0sYmQ9ZnVuY3Rpb24oZSx0LG8sbil7dmFyIGk9ZS5jb25zdHJ1Y3RvcjtyZXR1cm4gdD09PSdbb2JqZWN0IEFycmF5QnVmZmVyXSc/ZWQoZSk6dD09PSdbb2JqZWN0IEJvb2xlYW5dJ3x8dD09PSdbb2JqZWN0IERhdGVdJz9uZXcgaSgrZSk6dD09PSdbb2JqZWN0IERhdGFWaWV3XSc/dGQoZSxuKTp0PT09J1tvYmplY3QgRmxvYXQzMkFycmF5XSd8fHQ9PT0nW29iamVjdCBGbG9hdDY0QXJyYXldJ3x8dD09PSdbb2JqZWN0IEludDhBcnJheV0nfHx0PT09J1tvYmplY3QgSW50MTZBcnJheV0nfHx0PT09J1tvYmplY3QgSW50MzJBcnJheV0nfHx0PT09J1tvYmplY3QgVWludDhBcnJheV0nfHx0PT09J1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJ3x8dD09PSdbb2JqZWN0IFVpbnQxNkFycmF5XSd8fHQ9PT0nW29iamVjdCBVaW50MzJBcnJheV0nP2hkKGUsbik6dD09PSdbb2JqZWN0IE1hcF0nP3JkKGUsbixvKTp0PT09J1tvYmplY3QgTnVtYmVyXSd8fHQ9PT0nW29iamVjdCBTdHJpbmddJz9uZXcgaShlKTp0PT09J1tvYmplY3QgUmVnRXhwXSc/c2QoZSk6dD09PSdbb2JqZWN0IFNldF0nP2NkKGUsbixvKTp0PT09J1tvYmplY3QgU3ltYm9sXSc/ZmQoZSk6dm9pZCAwfSxrZD1PYmplY3QuY3JlYXRlLF9kPWZ1bmN0aW9uKGUpe3JldHVybiBwcyhlKT9rZChlKTp7fX0sd2Q9ZnVuY3Rpb24oZSl7cmV0dXJuJ2Z1bmN0aW9uJyE9dHlwZW9mIGUuY29uc3RydWN0b3J8fGJsKGUpP3t9Ol9kKHFhKGUpKX0sdmQ9byg5KSx5ZD0nW29iamVjdCBBcmd1bWVudHNdJyx4ZD0nW29iamVjdCBGdW5jdGlvbl0nLENkPSdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsQWQ9J1tvYmplY3QgT2JqZWN0XScsVGQ9e307VGRbeWRdPVRkWydbb2JqZWN0IEFycmF5XSddPVRkWydbb2JqZWN0IEFycmF5QnVmZmVyXSddPVRkWydbb2JqZWN0IERhdGFWaWV3XSddPVRkWydbb2JqZWN0IEJvb2xlYW5dJ109VGRbJ1tvYmplY3QgRGF0ZV0nXT1UZFsnW29iamVjdCBGbG9hdDMyQXJyYXldJ109VGRbJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSddPVRkWydbb2JqZWN0IEludDhBcnJheV0nXT1UZFsnW29iamVjdCBJbnQxNkFycmF5XSddPVRkWydbb2JqZWN0IEludDMyQXJyYXldJ109VGRbJ1tvYmplY3QgTWFwXSddPVRkWydbb2JqZWN0IE51bWJlcl0nXT1UZFtBZF09VGRbJ1tvYmplY3QgUmVnRXhwXSddPVRkWydbb2JqZWN0IFNldF0nXT1UZFsnW29iamVjdCBTdHJpbmddJ109VGRbJ1tvYmplY3QgU3ltYm9sXSddPVRkWydbb2JqZWN0IFVpbnQ4QXJyYXldJ109VGRbJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJ109VGRbJ1tvYmplY3QgVWludDE2QXJyYXldJ109VGRbJ1tvYmplY3QgVWludDMyQXJyYXldJ109ITAsVGRbJ1tvYmplY3QgRXJyb3JdJ109VGRbeGRdPVRkWydbb2JqZWN0IFdlYWtNYXBdJ109ITE7dmFyIFBkPUMsRWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIFBkKGUsITEsITApfTtjbGFzcyBTZHtjb25zdHJ1Y3Rvcigpe3RoaXMucGFyZW50PW51bGx9Z2V0IGluZGV4KCl7bGV0IGU7aWYoIXRoaXMucGFyZW50KXJldHVybiBudWxsO2lmKC0xPT0oZT10aGlzLnBhcmVudC5nZXRDaGlsZEluZGV4KHRoaXMpKSl0aHJvdyBuZXcgWmEoJ3ZpZXctbm9kZS1ub3QtZm91bmQtaW4tcGFyZW50OiBUaGUgbm9kZVxcJ3MgcGFyZW50IGRvZXMgbm90IGNvbnRhaW4gdGhpcyBub2RlLicpO3JldHVybiBlfWdldCBuZXh0U2libGluZygpe2NvbnN0IGU9dGhpcy5pbmRleDtyZXR1cm4gbnVsbCE9PWUmJnRoaXMucGFyZW50LmdldENoaWxkKGUrMSl8fG51bGx9Z2V0IHByZXZpb3VzU2libGluZygpe2NvbnN0IGU9dGhpcy5pbmRleDtyZXR1cm4gbnVsbCE9PWUmJnRoaXMucGFyZW50LmdldENoaWxkKGUtMSl8fG51bGx9Z2V0IHJvb3QoKXtsZXQgZT10aGlzO2Zvcig7ZS5wYXJlbnQ7KWU9ZS5wYXJlbnQ7cmV0dXJuIGV9Z2V0IGRvY3VtZW50KCl7cmV0dXJuIHRoaXMucGFyZW50IGluc3RhbmNlb2YgU2Q/dGhpcy5wYXJlbnQuZG9jdW1lbnQ6bnVsbH1nZXRQYXRoKCl7Y29uc3QgZT1bXTtmb3IobGV0IHQ9dGhpczt0LnBhcmVudDspZS51bnNoaWZ0KHQuaW5kZXgpLHQ9dC5wYXJlbnQ7cmV0dXJuIGV9Z2V0QW5jZXN0b3JzKGU9e2luY2x1ZGVTZWxmOiExLHBhcmVudEZpcnN0OiExfSl7Y29uc3QgdD1bXTtmb3IobGV0IG89ZS5pbmNsdWRlU2VsZj90aGlzOnRoaXMucGFyZW50O287KXRbZS5wYXJlbnRGaXJzdD8ncHVzaCc6J3Vuc2hpZnQnXShvKSxvPW8ucGFyZW50O3JldHVybiB0fWdldENvbW1vbkFuY2VzdG9yKGUsdD17fSl7Y29uc3Qgbz10aGlzLmdldEFuY2VzdG9ycyh0KSxuPWUuZ2V0QW5jZXN0b3JzKHQpO2xldCByPTA7Zm9yKDtvW3JdPT1uW3JdJiZvW3JdOylyKys7cmV0dXJuIDA9PXI/bnVsbDpvW3ItMV19aXNCZWZvcmUoZSl7aWYodGhpcz09ZSlyZXR1cm4hMTtpZih0aGlzLnJvb3QhPT1lLnJvb3QpcmV0dXJuITE7Y29uc3QgdD10aGlzLmdldFBhdGgoKSxvPWUuZ2V0UGF0aCgpLG49QSh0LG8pO3JldHVybiEoJ3ByZWZpeCchPT1uKXx8J2V4dGVuc2lvbichPT1uJiZ0W25dPG9bbl19aXNBZnRlcihlKXtyZXR1cm4gdGhpcyE9ZSYmISh0aGlzLnJvb3QhPT1lLnJvb3QpJiYhdGhpcy5pc0JlZm9yZShlKX1fcmVtb3ZlKCl7dGhpcy5wYXJlbnQuX3JlbW92ZUNoaWxkcmVuKHRoaXMuaW5kZXgpfV9maXJlQ2hhbmdlKGUsdCl7dGhpcy5maXJlKCdjaGFuZ2U6JytlLHQpLHRoaXMucGFyZW50JiZ0aGlzLnBhcmVudC5fZmlyZUNoYW5nZShlLHQpfXRvSlNPTigpe2NvbnN0IGU9RWQodGhpcyk7cmV0dXJuIGRlbGV0ZSBlLnBhcmVudCxlfWlzKGUpe3JldHVybidub2RlJz09ZX19ZihTZCxzcyk7Y2xhc3MgT2QgZXh0ZW5kcyBTZHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuX3RleHREYXRhPWV9aXMoZSl7cmV0dXJuJ3RleHQnPT1lfHxzdXBlci5pcyhlKX1nZXQgZGF0YSgpe3JldHVybiB0aGlzLl90ZXh0RGF0YX1nZXQgX2RhdGEoKXtyZXR1cm4gdGhpcy5kYXRhfXNldCBfZGF0YShlKXt0aGlzLl9maXJlQ2hhbmdlKCd0ZXh0Jyx0aGlzKSx0aGlzLl90ZXh0RGF0YT1lfWlzU2ltaWxhcihlKXtyZXR1cm4hIShlIGluc3RhbmNlb2YgT2QpJiYodGhpcz09PWV8fHRoaXMuZGF0YT09PWUuZGF0YSl9X2Nsb25lKCl7cmV0dXJuIG5ldyBPZCh0aGlzLmRhdGEpfX1jbGFzcyBSZHtjb25zdHJ1Y3RvcihlLHQsbyl7aWYodGhpcy50ZXh0Tm9kZT1lLDA+dHx8dD5lLmRhdGEubGVuZ3RoKXRocm93IG5ldyBaYSgndmlldy10ZXh0cHJveHktd3Jvbmctb2Zmc2V0aW50ZXh0OiBHaXZlbiBvZmZzZXRJblRleHQgdmFsdWUgaXMgaW5jb3JyZWN0LicpO2lmKDA+b3x8dCtvPmUuZGF0YS5sZW5ndGgpdGhyb3cgbmV3IFphKCd2aWV3LXRleHRwcm94eS13cm9uZy1sZW5ndGg6IEdpdmVuIGxlbmd0aCB2YWx1ZSBpcyBpbmNvcnJlY3QuJyk7dGhpcy5kYXRhPWUuZGF0YS5zdWJzdHJpbmcodCx0K28pLHRoaXMub2Zmc2V0SW5UZXh0PXR9Z2V0IG9mZnNldFNpemUoKXtyZXR1cm4gdGhpcy5kYXRhLmxlbmd0aH1nZXQgaXNQYXJ0aWFsKCl7cmV0dXJuIHRoaXMuZGF0YS5sZW5ndGghPT10aGlzLnRleHROb2RlLmRhdGEubGVuZ3RofWdldCBwYXJlbnQoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5wYXJlbnR9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5yb290fWdldCBkb2N1bWVudCgpe3JldHVybiB0aGlzLnRleHROb2RlLmRvY3VtZW50fWlzKGUpe3JldHVybid0ZXh0UHJveHknPT1lfWdldEFuY2VzdG9ycyhlPXtpbmNsdWRlU2VsZjohMSxwYXJlbnRGaXJzdDohMX0pe2NvbnN0IHQ9W107Zm9yKGxldCBvPWUuaW5jbHVkZVNlbGY/dGhpcy50ZXh0Tm9kZTp0aGlzLnBhcmVudDtudWxsIT09bzspdFtlLnBhcmVudEZpcnN0PydwdXNoJzondW5zaGlmdCddKG8pLG89by5wYXJlbnQ7cmV0dXJuIHR9fWNsYXNzIElke2NvbnN0cnVjdG9yKC4uLmUpe3RoaXMuX3BhdHRlcm5zPVtdLHRoaXMuYWRkKC4uLmUpfWFkZCguLi5lKXtmb3IobGV0IHQgb2YgZSkoJ3N0cmluZyc9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgUmVnRXhwKSYmKHQ9e25hbWU6dH0pLHQuY2xhc3NlcyYmKCdzdHJpbmcnPT10eXBlb2YgdC5jbGFzc2VzfHx0LmNsYXNzZXMgaW5zdGFuY2VvZiBSZWdFeHApJiYodC5jbGFzc2VzPVt0LmNsYXNzZXNdKSx0aGlzLl9wYXR0ZXJucy5wdXNoKHQpfW1hdGNoKC4uLmUpe2Zvcihjb25zdCB0IG9mIGUpZm9yKGNvbnN0IGUgb2YgdGhpcy5fcGF0dGVybnMpe2NvbnN0IG89RSh0LGUpO2lmKG8pcmV0dXJue2VsZW1lbnQ6dCxwYXR0ZXJuOmUsbWF0Y2g6b319cmV0dXJuIG51bGx9bWF0Y2hBbGwoLi4uZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgbyBvZiBlKWZvcihjb25zdCBlIG9mIHRoaXMuX3BhdHRlcm5zKXtjb25zdCBuPUUobyxlKTtuJiZ0LnB1c2goe2VsZW1lbnQ6byxwYXR0ZXJuOmUsbWF0Y2g6bn0pfXJldHVybiAwPHQubGVuZ3RoP3Q6bnVsbH1nZXRFbGVtZW50TmFtZSgpe2lmKDEhPT10aGlzLl9wYXR0ZXJucy5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLl9wYXR0ZXJuc1swXSx0PWUubmFtZTtyZXR1cm4nZnVuY3Rpb24nIT10eXBlb2YgZSYmdCYmISh0IGluc3RhbmNlb2YgUmVnRXhwKT90Om51bGx9fWNsYXNzIFZkIGV4dGVuZHMgU2R7Y29uc3RydWN0b3IoZSx0LG8pe2lmKHN1cGVyKCksdGhpcy5uYW1lPWUsdGhpcy5fYXR0cnM9Vih0KSx0aGlzLl9jaGlsZHJlbj1bXSxvJiZ0aGlzLl9pbnNlcnRDaGlsZCgwLG8pLHRoaXMuX2NsYXNzZXM9bmV3IFNldCx0aGlzLl9hdHRycy5oYXMoJ2NsYXNzJykpe2NvbnN0IGU9dGhpcy5fYXR0cnMuZ2V0KCdjbGFzcycpO04odGhpcy5fY2xhc3NlcyxlKSx0aGlzLl9hdHRycy5kZWxldGUoJ2NsYXNzJyl9dGhpcy5fc3R5bGVzPW5ldyBNYXAsdGhpcy5fYXR0cnMuaGFzKCdzdHlsZScpJiYoRih0aGlzLl9zdHlsZXMsdGhpcy5fYXR0cnMuZ2V0KCdzdHlsZScpKSx0aGlzLl9hdHRycy5kZWxldGUoJ3N0eWxlJykpLHRoaXMuX2N1c3RvbVByb3BlcnRpZXM9bmV3IE1hcH1nZXQgY2hpbGRDb3VudCgpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5sZW5ndGh9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMuX2NoaWxkcmVuLmxlbmd0aH1pcyhlLHQ9bnVsbCl7cmV0dXJuIHQ/J2VsZW1lbnQnPT1lJiZ0PT10aGlzLm5hbWU6J2VsZW1lbnQnPT1lfHxlPT10aGlzLm5hbWV8fHN1cGVyLmlzKGUpfWdldENoaWxkKGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbltlXX1nZXRDaGlsZEluZGV4KGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5pbmRleE9mKGUpfWdldENoaWxkcmVuKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKX0qZ2V0QXR0cmlidXRlS2V5cygpezA8dGhpcy5fY2xhc3Nlcy5zaXplJiYoeWllbGQnY2xhc3MnKSwwPHRoaXMuX3N0eWxlcy5zaXplJiYoeWllbGQnc3R5bGUnKTtmb3IoY29uc3QgZSBvZiB0aGlzLl9hdHRycy5rZXlzKCkpeWllbGQgZX0qZ2V0QXR0cmlidXRlcygpe3lpZWxkKnRoaXMuX2F0dHJzLmVudHJpZXMoKSwwPHRoaXMuX2NsYXNzZXMuc2l6ZSYmKHlpZWxkWydjbGFzcycsdGhpcy5nZXRBdHRyaWJ1dGUoJ2NsYXNzJyldKSwwPHRoaXMuX3N0eWxlcy5zaXplJiYoeWllbGRbJ3N0eWxlJyx0aGlzLmdldEF0dHJpYnV0ZSgnc3R5bGUnKV0pfWdldEF0dHJpYnV0ZShlKXtpZignY2xhc3MnPT1lKXJldHVybiAwPHRoaXMuX2NsYXNzZXMuc2l6ZT9bLi4udGhpcy5fY2xhc3Nlc10uam9pbignICcpOnZvaWQgMDtpZignc3R5bGUnPT1lKXtpZigwPHRoaXMuX3N0eWxlcy5zaXplKXtsZXQgZT0nJztmb3IoY29uc3RbdCxvXW9mIHRoaXMuX3N0eWxlcyllKz1gJHt0fToke299O2A7cmV0dXJuIGV9cmV0dXJufXJldHVybiB0aGlzLl9hdHRycy5nZXQoZSl9aGFzQXR0cmlidXRlKGUpe3JldHVybidjbGFzcyc9PWU/MDx0aGlzLl9jbGFzc2VzLnNpemU6J3N0eWxlJz09ZT8wPHRoaXMuX3N0eWxlcy5zaXplOnRoaXMuX2F0dHJzLmhhcyhlKX1pc1NpbWlsYXIoZSl7aWYoIShlIGluc3RhbmNlb2YgVmQpKXJldHVybiExO2lmKHRoaXM9PT1lKXJldHVybiEwO2lmKHRoaXMubmFtZSE9ZS5uYW1lKXJldHVybiExO2lmKHRoaXMuX2F0dHJzLnNpemUhPT1lLl9hdHRycy5zaXplfHx0aGlzLl9jbGFzc2VzLnNpemUhPT1lLl9jbGFzc2VzLnNpemV8fHRoaXMuX3N0eWxlcy5zaXplIT09ZS5fc3R5bGVzLnNpemUpcmV0dXJuITE7Zm9yKGNvbnN0W3Qsb11vZiB0aGlzLl9hdHRycylpZighZS5fYXR0cnMuaGFzKHQpfHxlLl9hdHRycy5nZXQodCkhPT1vKXJldHVybiExO2Zvcihjb25zdCB0IG9mIHRoaXMuX2NsYXNzZXMpaWYoIWUuX2NsYXNzZXMuaGFzKHQpKXJldHVybiExO2Zvcihjb25zdFt0LG9db2YgdGhpcy5fc3R5bGVzKWlmKCFlLl9zdHlsZXMuaGFzKHQpfHxlLl9zdHlsZXMuZ2V0KHQpIT09bylyZXR1cm4hMTtyZXR1cm4hMH1oYXNDbGFzcyguLi5lKXtmb3IoY29uc3QgdCBvZiBlKWlmKCF0aGlzLl9jbGFzc2VzLmhhcyh0KSlyZXR1cm4hMTtyZXR1cm4hMH1nZXRDbGFzc05hbWVzKCl7cmV0dXJuIHRoaXMuX2NsYXNzZXMua2V5cygpfWdldFN0eWxlKGUpe3JldHVybiB0aGlzLl9zdHlsZXMuZ2V0KGUpfWdldFN0eWxlTmFtZXMoKXtyZXR1cm4gdGhpcy5fc3R5bGVzLmtleXMoKX1oYXNTdHlsZSguLi5lKXtmb3IoY29uc3QgdCBvZiBlKWlmKCF0aGlzLl9zdHlsZXMuaGFzKHQpKXJldHVybiExO3JldHVybiEwfWZpbmRBbmNlc3RvciguLi5lKXtjb25zdCB0PW5ldyBJZCguLi5lKTtmb3IobGV0IG89dGhpcy5wYXJlbnQ7bzspe2lmKHQubWF0Y2gobykpcmV0dXJuIG87bz1vLnBhcmVudH1yZXR1cm4gbnVsbH1nZXRDdXN0b21Qcm9wZXJ0eShlKXtyZXR1cm4gdGhpcy5fY3VzdG9tUHJvcGVydGllcy5nZXQoZSl9KmdldEN1c3RvbVByb3BlcnRpZXMoKXt5aWVsZCp0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzLmVudHJpZXMoKX1nZXRJZGVudGl0eSgpe2NvbnN0IGU9QXJyYXkuZnJvbSh0aGlzLl9jbGFzc2VzKS5zb3J0KCkuam9pbignLCcpLHQ9QXJyYXkuZnJvbSh0aGlzLl9zdHlsZXMpLm1hcCgoZSk9PmAke2VbMF19OiR7ZVsxXX1gKS5zb3J0KCkuam9pbignOycpLG89QXJyYXkuZnJvbSh0aGlzLl9hdHRycykubWFwKChlKT0+YCR7ZVswXX09XCIke2VbMV19XCJgKS5zb3J0KCkuam9pbignICcpO3JldHVybiB0aGlzLm5hbWUrKCcnPT1lPycnOmAgY2xhc3M9XCIke2V9XCJgKSsoJyc9PXQ/Jyc6YCBzdHlsZT1cIiR7dH1cImApKygnJz09bz8nJzpgICR7b31gKX1fY2xvbmUoZT0hMSl7Y29uc3QgdD1bXTtpZihlKWZvcihjb25zdCBvIG9mIHRoaXMuZ2V0Q2hpbGRyZW4oKSl0LnB1c2goby5fY2xvbmUoZSkpO2NvbnN0IG89bmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5uYW1lLHRoaXMuX2F0dHJzLHQpO3JldHVybiBvLl9jbGFzc2VzPW5ldyBTZXQodGhpcy5fY2xhc3Nlcyksby5fc3R5bGVzPW5ldyBNYXAodGhpcy5fc3R5bGVzKSxvLl9jdXN0b21Qcm9wZXJ0aWVzPW5ldyBNYXAodGhpcy5fY3VzdG9tUHJvcGVydGllcyksby5nZXRGaWxsZXJPZmZzZXQ9dGhpcy5nZXRGaWxsZXJPZmZzZXQsb31fYXBwZW5kQ2hpbGQoZSl7cmV0dXJuIHRoaXMuX2luc2VydENoaWxkKHRoaXMuY2hpbGRDb3VudCxlKX1faW5zZXJ0Q2hpbGQoZSx0KXt0aGlzLl9maXJlQ2hhbmdlKCdjaGlsZHJlbicsdGhpcyk7bGV0IG89MDtjb25zdCBuPU0odCk7Zm9yKGNvbnN0IGkgb2YgbiludWxsIT09aS5wYXJlbnQmJmkuX3JlbW92ZSgpLGkucGFyZW50PXRoaXMsdGhpcy5fY2hpbGRyZW4uc3BsaWNlKGUsMCxpKSxlKyssbysrO3JldHVybiBvfV9yZW1vdmVDaGlsZHJlbihlLHQ9MSl7dGhpcy5fZmlyZUNoYW5nZSgnY2hpbGRyZW4nLHRoaXMpO2ZvcihsZXQgbz1lO288ZSt0O28rKyl0aGlzLl9jaGlsZHJlbltvXS5wYXJlbnQ9bnVsbDtyZXR1cm4gdGhpcy5fY2hpbGRyZW4uc3BsaWNlKGUsdCl9X3NldEF0dHJpYnV0ZShlLHQpe3Q9dCsnJyx0aGlzLl9maXJlQ2hhbmdlKCdhdHRyaWJ1dGVzJyx0aGlzKSwnY2xhc3MnPT1lP04odGhpcy5fY2xhc3Nlcyx0KTonc3R5bGUnPT1lP0YodGhpcy5fc3R5bGVzLHQpOnRoaXMuX2F0dHJzLnNldChlLHQpfV9yZW1vdmVBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMuX2ZpcmVDaGFuZ2UoJ2F0dHJpYnV0ZXMnLHRoaXMpLCdjbGFzcyc9PWU/ISEoMDx0aGlzLl9jbGFzc2VzLnNpemUpJiYodGhpcy5fY2xhc3Nlcy5jbGVhcigpLCEwKTonc3R5bGUnPT1lPyEhKDA8dGhpcy5fc3R5bGVzLnNpemUpJiYodGhpcy5fc3R5bGVzLmNsZWFyKCksITApOnRoaXMuX2F0dHJzLmRlbGV0ZShlKX1fYWRkQ2xhc3MoZSl7dGhpcy5fZmlyZUNoYW5nZSgnYXR0cmlidXRlcycsdGhpcyksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdLGUuZm9yRWFjaCgoZSk9PnRoaXMuX2NsYXNzZXMuYWRkKGUpKX1fcmVtb3ZlQ2xhc3MoZSl7dGhpcy5fZmlyZUNoYW5nZSgnYXR0cmlidXRlcycsdGhpcyksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdLGUuZm9yRWFjaCgoZSk9PnRoaXMuX2NsYXNzZXMuZGVsZXRlKGUpKX1fc2V0U3R5bGUoZSx0KXtpZih0aGlzLl9maXJlQ2hhbmdlKCdhdHRyaWJ1dGVzJyx0aGlzKSxRYShlKSl7Y29uc3QgdD1PYmplY3Qua2V5cyhlKTtmb3IoY29uc3QgbyBvZiB0KXRoaXMuX3N0eWxlcy5zZXQobyxlW29dKX1lbHNlIHRoaXMuX3N0eWxlcy5zZXQoZSx0KX1fcmVtb3ZlU3R5bGUoZSl7dGhpcy5fZmlyZUNoYW5nZSgnYXR0cmlidXRlcycsdGhpcyksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdLGUuZm9yRWFjaCgoZSk9PnRoaXMuX3N0eWxlcy5kZWxldGUoZSkpfV9zZXRDdXN0b21Qcm9wZXJ0eShlLHQpe3RoaXMuX2N1c3RvbVByb3BlcnRpZXMuc2V0KGUsdCl9X3JlbW92ZUN1c3RvbVByb3BlcnR5KGUpe3JldHVybiB0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzLmRlbGV0ZShlKX19Y2xhc3MgRmQgZXh0ZW5kcyBWZHtjb25zdHJ1Y3RvcihlLHQsbyl7c3VwZXIoZSx0LG8pLHRoaXMuZ2V0RmlsbGVyT2Zmc2V0PUR9aXMoZSx0PW51bGwpe3JldHVybiB0Pydjb250YWluZXJFbGVtZW50Jz09ZSYmdD09dGhpcy5uYW1lfHxzdXBlci5pcyhlLHQpOidjb250YWluZXJFbGVtZW50Jz09ZXx8c3VwZXIuaXMoZSl9fXZhciBOZD1CLE1kPWZ1bmN0aW9uKGUsdCxvKXt2YXIgbj1vLmxlbmd0aDtyZXR1cm4gMD09PW4/ZS5jYWxsKHQpOjE9PT1uP2UuY2FsbCh0LG9bMF0pOjI9PT1uP2UuY2FsbCh0LG9bMF0sb1sxXSk6Mz09PW4/ZS5jYWxsKHQsb1swXSxvWzFdLG9bMl0pOmUuYXBwbHkodCxvKX0sRGQ9T2JqZWN0LnByb3RvdHlwZSxCZD1EZC50b1N0cmluZyxMZD1mdW5jdGlvbihlKXtyZXR1cm4nc3ltYm9sJz09dHlwZW9mIGV8fFVhKGUpJiZCZC5jYWxsKGUpPT0nW29iamVjdCBTeW1ib2xdJ30semQ9MC8wLGpkPS9eXFxzK3xcXHMrJC9nLHFkPS9eWy0rXTB4WzAtOWEtZl0rJC9pLFdkPS9eMGJbMDFdKyQvaSxVZD0vXjBvWzAtN10rJC9pLEhkPXBhcnNlSW50LEtkPWZ1bmN0aW9uKGUpe2lmKCdudW1iZXInPT10eXBlb2YgZSlyZXR1cm4gZTtpZihMZChlKSlyZXR1cm4gemQ7aWYocHMoZSkpe3ZhciB0PWhzKGUudmFsdWVPZik/ZS52YWx1ZU9mKCk6ZTtlPXBzKHQpP3QrJyc6dH1pZignc3RyaW5nJyE9dHlwZW9mIGUpcmV0dXJuIDA9PT1lP2U6K2U7ZT1lLnJlcGxhY2UoamQsJycpO3ZhciBvPVdkLnRlc3QoZSk7cmV0dXJuIG98fFVkLnRlc3QoZSk/SGQoZS5zbGljZSgyKSxvPzI6OCk6cWQudGVzdChlKT96ZDorZX0sR2Q9MS8wLCRkPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiAwPT09ZT9lOjA7aWYoZT1LZChlKSxlPT09R2R8fGU9PT0tR2Qpe3ZhciB0PTA+ZT8tMToxO3JldHVybiB0KjE3OTc2OTMxMzQ4NjIzMTU3ZTI5Mn1yZXR1cm4gZT09PWU/ZTowfSxKZD1mdW5jdGlvbihlKXt2YXIgdD0kZChlKSxvPXQlMTtyZXR1cm4gdD09PXQ/bz90LW86dDowfSxRZD1CYSxZZD1mdW5jdGlvbihlLHQpe2lmKCdmdW5jdGlvbichPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgZnVuY3Rpb24nKTtyZXR1cm4gdD1RZCh2b2lkIDA9PT10P2UubGVuZ3RoLTE6SmQodCksMCksZnVuY3Rpb24oKXtmb3IodmFyIG89YXJndW1lbnRzLG49LTEsaT1RZChvLmxlbmd0aC10LDApLHI9QXJyYXkoaSk7KytuPGk7KXJbbl09b1t0K25dO3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuIGUuY2FsbCh0aGlzLHIpO2Nhc2UgMTpyZXR1cm4gZS5jYWxsKHRoaXMsb1swXSxyKTtjYXNlIDI6cmV0dXJuIGUuY2FsbCh0aGlzLG9bMF0sb1sxXSxyKTt9dmFyIGE9QXJyYXkodCsxKTtmb3Iobj0tMTsrK248dDspYVtuXT1vW25dO3JldHVybiBhW3RdPXIsTWQoZSx0aGlzLGEpfX0sWGQ9RnMuYS5SZWZsZWN0LFpkPVhkLGVjPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxvOyEobz1lLm5leHQoKSkuZG9uZTspdC5wdXNoKG8udmFsdWUpO3JldHVybiB0fSx0Yz1PYmplY3QucHJvdG90eXBlLG9jPVpkP1pkLmVudW1lcmF0ZTp2b2lkIDAsbmM9dGMucHJvcGVydHlJc0VudW1lcmFibGU7b2MmJiFuYy5jYWxsKHt2YWx1ZU9mOjF9LCd2YWx1ZU9mJykmJihMPWZ1bmN0aW9uKGUpe3JldHVybiBlYyhvYyhlKSl9KTt2YXIgaWM9TCxyYz1PYmplY3QucHJvdG90eXBlLGFjPXJjLmhhc093blByb3BlcnR5LHNjPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0tMSxvPWJsKGUpLG49aWMoZSksaT1uLmxlbmd0aCxyPXBsKGUpLGE9cnx8W10scz1hLmxlbmd0aDsrK3Q8aTspe3ZhciBsPW5bdF07ISFyJiYoJ2xlbmd0aCc9PWx8fGZsKGwscykpfHwnY29uc3RydWN0b3InPT1sJiYob3x8IWFjLmNhbGwoZSxsKSl8fGEucHVzaChsKX1yZXR1cm4gYX0sbGM9T2JqZWN0LnByb3RvdHlwZSxkYz1sYy5wcm9wZXJ0eUlzRW51bWVyYWJsZSxjYz0hZGMuY2FsbCh7dmFsdWVPZjoxfSwndmFsdWVPZicpLHVjPWZ1bmN0aW9uKGUpe3JldHVybiBZZChmdW5jdGlvbih0LG8pe3ZhciBuPS0xLGk9by5sZW5ndGgscj0xPGk/b1tpLTFdOnZvaWQgMCxhPTI8aT9vWzJdOnZvaWQgMDtmb3Iocj0zPGUubGVuZ3RoJiYnZnVuY3Rpb24nPT10eXBlb2Ygcj8oaS0tLHIpOnZvaWQgMCxhJiZOZChvWzBdLG9bMV0sYSkmJihyPTM+aT92b2lkIDA6cixpPTEpLHQ9T2JqZWN0KHQpOysrbjxpOyl7dmFyIHM9b1tuXTtzJiZlKHQscyxuLHIpfXJldHVybiB0fSl9KGZ1bmN0aW9uKGUsdCl7aWYoY2N8fGJsKHQpfHx0bCh0KSlyZXR1cm4gdm9pZCBIcyh0LHNjKHQpLGUpO2Zvcih2YXIgbyBpbiB0KVVzKGUsbyx0W29dKX0pLG1jPXVjO2NvbnN0IHBjPVN5bWJvbCgnb2JzZXJ2YWJsZVByb3BlcnRpZXMnKSxnYz1TeW1ib2woJ2JvdW5kT2JzZXJ2YWJsZXMnKSxmYz1TeW1ib2woJ2JvdW5kUHJvcGVydGllcycpLGhjPXtzZXQoZSx0KXtpZihwcyhlKSlyZXR1cm4gdm9pZCBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKCh0KT0+e3RoaXMuc2V0KHQsZVt0XSl9LHRoaXMpO3oodGhpcyk7Y29uc3Qgbz10aGlzW3BjXTtpZihlIGluIHRoaXMmJiFvLmhhcyhlKSl0aHJvdyBuZXcgWmEoJ29ic2VydmFibGUtc2V0LWNhbm5vdC1vdmVycmlkZTogQ2Fubm90IG92ZXJyaWRlIGFuIGV4aXN0aW5nIHByb3BlcnR5LicpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldCgpe3JldHVybiBvLmdldChlKX0sc2V0KHQpe2NvbnN0IG49by5nZXQoZSk7bj09PXQmJm8uaGFzKGUpfHwoby5zZXQoZSx0KSx0aGlzLmZpcmUoJ2NoYW5nZTonK2UsZSx0LG4pKX19KSx0aGlzW2VdPXR9LGJpbmQoLi4uZSl7aWYoIWUubGVuZ3RofHwhVShlKSl0aHJvdyBuZXcgWmEoJ29ic2VydmFibGUtYmluZC13cm9uZy1wcm9wZXJ0aWVzOiBBbGwgcHJvcGVydGllcyBtdXN0IGJlIHN0cmluZ3MuJyk7aWYobmV3IFNldChlKS5zaXplIT09ZS5sZW5ndGgpdGhyb3cgbmV3IFphKCdvYnNlcnZhYmxlLWJpbmQtZHVwbGljYXRlLXByb3BlcnRpZXM6IFByb3BlcnRpZXMgbXVzdCBiZSB1bmlxdWUuJyk7eih0aGlzKTtjb25zdCB0PXRoaXNbZmNdO2UuZm9yRWFjaCgoZSk9PntpZih0LmhhcyhlKSl0aHJvdyBuZXcgWmEoJ29ic2VydmFibGUtYmluZC1yZWJpbmQ6IENhbm5vdCBiaW5kIHRoZSBzYW1lIHByb3BlcnR5IG1vcmUgdGhhdCBvbmNlLicpfSk7Y29uc3Qgbz1uZXcgTWFwO3JldHVybiBlLmZvckVhY2goKGUpPT57Y29uc3Qgbj17cHJvcGVydHk6ZSx0bzpbXX07dC5zZXQoZSxuKSxvLnNldChlLG4pfSkse3RvOmosdG9NYW55OnEsX29ic2VydmFibGU6dGhpcyxfYmluZFByb3BlcnRpZXM6ZSxfdG86W10sX2JpbmRpbmdzOm99fSx1bmJpbmQoLi4uZSl7aWYoIShwYyBpbiB0aGlzKSlyZXR1cm47Y29uc3QgdD10aGlzW2ZjXSxvPXRoaXNbZ2NdO2lmKGUubGVuZ3RoKXtpZighVShlKSl0aHJvdyBuZXcgWmEoJ29ic2VydmFibGUtdW5iaW5kLXdyb25nLXByb3BlcnRpZXM6IFByb3BlcnRpZXMgbXVzdCBiZSBzdHJpbmdzLicpO2UuZm9yRWFjaCgoZSk9Pntjb25zdCBuPXQuZ2V0KGUpO2lmKCFuKXJldHVybjtsZXQgaSxyLGEscztuLnRvLmZvckVhY2goKGUpPT57aT1lWzBdLHI9ZVsxXSxhPW8uZ2V0KGkpLHM9YVtyXSxzLmRlbGV0ZShuKSxzLnNpemV8fGRlbGV0ZSBhW3JdLE9iamVjdC5rZXlzKGEpLmxlbmd0aHx8KG8uZGVsZXRlKGkpLHRoaXMuc3RvcExpc3RlbmluZyhpLCdjaGFuZ2UnKSl9KSx0LmRlbGV0ZShlKX0pfWVsc2Ugby5mb3JFYWNoKChlLHQpPT57dGhpcy5zdG9wTGlzdGVuaW5nKHQsJ2NoYW5nZScpfSksby5jbGVhcigpLHQuY2xlYXIoKX0sZGVjb3JhdGUoZSl7Y29uc3QgdD10aGlzW2VdO2lmKCF0KXRocm93IG5ldyBaYSgnb2JzZXJ2YWJsZW1peGluLWNhbm5vdC1kZWNvcmF0ZS11bmRlZmluZWQ6IENhbm5vdCBkZWNvcmF0ZSBhbiB1bmRlZmluZWQgbWV0aG9kLicse29iamVjdDp0aGlzLG1ldGhvZE5hbWU6ZX0pO3RoaXMub24oZSwoZSxvKT0+e2UucmV0dXJuPXQuYXBwbHkodGhpcyxvKX0pLHRoaXNbZV09ZnVuY3Rpb24oLi4udCl7cmV0dXJuIHRoaXMuZmlyZShlLHQpfX19O21jKGhjLHNzKTt2YXIgYmM9aGM7Y29uc3Qga2M9U3ltYm9sKCdkb2N1bWVudCcpO2NsYXNzIF9jIGV4dGVuZHMgRmR7Y29uc3RydWN0b3IoZSx0LG8pe3N1cGVyKGUsdCxvKSx0aGlzLnNldCgnaXNSZWFkT25seScsITEpLHRoaXMuc2V0KCdpc0ZvY3VzZWQnLCExKX1nZXQgZG9jdW1lbnQoKXtyZXR1cm4gdGhpcy5nZXRDdXN0b21Qcm9wZXJ0eShrYyl9c2V0IF9kb2N1bWVudChlKXtpZih0aGlzLmdldEN1c3RvbVByb3BlcnR5KGtjKSl0aHJvdyBuZXcgWmEoJ3ZpZXctZWRpdGFibGVlbGVtZW50LWRvY3VtZW50LWFscmVhZHktc2V0OiBWaWV3IGRvY3VtZW50IGlzIGFscmVhZHkgc2V0LicpO3RoaXMuX3NldEN1c3RvbVByb3BlcnR5KGtjLGUpLHRoaXMuYmluZCgnaXNSZWFkT25seScpLnRvKGUpLHRoaXMuYmluZCgnaXNGb2N1c2VkJykudG8oZSwnaXNGb2N1c2VkJywodCk9PnQmJmUuc2VsZWN0aW9uLmVkaXRhYmxlRWxlbWVudD09dGhpcyksdGhpcy5saXN0ZW5UbyhlLnNlbGVjdGlvbiwnY2hhbmdlJywoKT0+e3RoaXMuaXNGb2N1c2VkPWUuaXNGb2N1c2VkJiZlLnNlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnQ9PXRoaXN9KX19ZihfYyxiYyk7Y29uc3Qgd2M9U3ltYm9sKCdyb290TmFtZScpO2NsYXNzIHZjIGV4dGVuZHMgX2N7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5yb290TmFtZT0nbWFpbid9aXMoZSx0PW51bGwpe3JldHVybiB0Pydyb290RWxlbWVudCc9PWUmJnQ9PXRoaXMubmFtZXx8c3VwZXIuaXMoZSx0KToncm9vdEVsZW1lbnQnPT1lfHxzdXBlci5pcyhlKX1nZXQgcm9vdE5hbWUoKXtyZXR1cm4gdGhpcy5nZXRDdXN0b21Qcm9wZXJ0eSh3Yyl9c2V0IHJvb3ROYW1lKGUpe3RoaXMuX3NldEN1c3RvbVByb3BlcnR5KHdjLGUpfXNldCBfbmFtZShlKXt0aGlzLm5hbWU9ZX19Y2xhc3MgeWN7Y29uc3RydWN0b3IoZT17fSl7aWYoIWUuYm91bmRhcmllcyYmIWUuc3RhcnRQb3NpdGlvbil0aHJvdyBuZXcgWmEoJ3ZpZXctdHJlZS13YWxrZXItbm8tc3RhcnQtcG9zaXRpb246IE5laXRoZXIgYm91bmRhcmllcyBub3Igc3RhcnRpbmcgcG9zaXRpb24gaGF2ZSBiZWVuIGRlZmluZWQuJyk7aWYoZS5kaXJlY3Rpb24mJidmb3J3YXJkJyE9ZS5kaXJlY3Rpb24mJidiYWNrd2FyZCchPWUuZGlyZWN0aW9uKXRocm93IG5ldyBaYSgndmlldy10cmVlLXdhbGtlci11bmtub3duLWRpcmVjdGlvbjogT25seSBgYmFja3dhcmRgIGFuZCBgZm9yd2FyZGAgZGlyZWN0aW9uIGFsbG93ZWQuJyx7ZGlyZWN0aW9uOmUuZGlyZWN0aW9ufSk7dGhpcy5ib3VuZGFyaWVzPWUuYm91bmRhcmllc3x8bnVsbCx0aGlzLnBvc2l0aW9uPWUuc3RhcnRQb3NpdGlvbj94Yy5jcmVhdGVGcm9tUG9zaXRpb24oZS5zdGFydFBvc2l0aW9uKTp4Yy5jcmVhdGVGcm9tUG9zaXRpb24oZS5ib3VuZGFyaWVzWydiYWNrd2FyZCc9PWUuZGlyZWN0aW9uPydlbmQnOidzdGFydCddKSx0aGlzLmRpcmVjdGlvbj1lLmRpcmVjdGlvbnx8J2ZvcndhcmQnLHRoaXMuc2luZ2xlQ2hhcmFjdGVycz0hIWUuc2luZ2xlQ2hhcmFjdGVycyx0aGlzLnNoYWxsb3c9ISFlLnNoYWxsb3csdGhpcy5pZ25vcmVFbGVtZW50RW5kPSEhZS5pZ25vcmVFbGVtZW50RW5kLHRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQ9dGhpcy5ib3VuZGFyaWVzP3RoaXMuYm91bmRhcmllcy5zdGFydC5wYXJlbnQ6bnVsbCx0aGlzLl9ib3VuZGFyeUVuZFBhcmVudD10aGlzLmJvdW5kYXJpZXM/dGhpcy5ib3VuZGFyaWVzLmVuZC5wYXJlbnQ6bnVsbH1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzfXNraXAoZSl7bGV0IHQsbyxuO2RvIG49dGhpcy5wb3NpdGlvbiwoe2RvbmU6dCx2YWx1ZTpvfT10aGlzLm5leHQoKSk7d2hpbGUoIXQmJmUobykpO3R8fCh0aGlzLnBvc2l0aW9uPW4pfW5leHQoKXtyZXR1cm4nZm9yd2FyZCc9PXRoaXMuZGlyZWN0aW9uP3RoaXMuX25leHQoKTp0aGlzLl9wcmV2aW91cygpfV9uZXh0KCl7bGV0IGU9eGMuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMucG9zaXRpb24pO2NvbnN0IHQ9dGhpcy5wb3NpdGlvbixvPWUucGFyZW50O2lmKG51bGw9PT1vLnBhcmVudCYmZS5vZmZzZXQ9PT1vLmNoaWxkQ291bnQpcmV0dXJue2RvbmU6ITB9O2lmKG89PT10aGlzLl9ib3VuZGFyeUVuZFBhcmVudCYmZS5vZmZzZXQ9PXRoaXMuYm91bmRhcmllcy5lbmQub2Zmc2V0KXJldHVybntkb25lOiEwfTtsZXQgbjtpZihvIGluc3RhbmNlb2YgT2Qpe2lmKGUuaXNBdEVuZClyZXR1cm4gdGhpcy5wb3NpdGlvbj14Yy5jcmVhdGVBZnRlcihvKSx0aGlzLl9uZXh0KCk7bj1vLmRhdGFbZS5vZmZzZXRdfWVsc2Ugbj1vLmdldENoaWxkKGUub2Zmc2V0KTtpZihuIGluc3RhbmNlb2YgVmQpcmV0dXJuIHRoaXMuc2hhbGxvdz9lLm9mZnNldCsrOmU9bmV3IHhjKG4sMCksdGhpcy5wb3NpdGlvbj1lLHRoaXMuX2Zvcm1hdFJldHVyblZhbHVlKCdlbGVtZW50U3RhcnQnLG4sdCxlLDEpO2lmKCEobiBpbnN0YW5jZW9mIE9kKSl7aWYoJ3N0cmluZyc9PXR5cGVvZiBuKXtsZXQgbjtpZih0aGlzLnNpbmdsZUNoYXJhY3RlcnMpbj0xO2Vsc2V7Y29uc3QgdD1vPT09dGhpcy5fYm91bmRhcnlFbmRQYXJlbnQ/dGhpcy5ib3VuZGFyaWVzLmVuZC5vZmZzZXQ6by5kYXRhLmxlbmd0aDtuPXQtZS5vZmZzZXR9Y29uc3QgaT1uZXcgUmQobyxlLm9mZnNldCxuKTtyZXR1cm4gZS5vZmZzZXQrPW4sdGhpcy5wb3NpdGlvbj1lLHRoaXMuX2Zvcm1hdFJldHVyblZhbHVlKCd0ZXh0JyxpLHQsZSxuKX1yZXR1cm4gZT14Yy5jcmVhdGVBZnRlcihvKSx0aGlzLnBvc2l0aW9uPWUsdGhpcy5pZ25vcmVFbGVtZW50RW5kP3RoaXMuX25leHQoKTp0aGlzLl9mb3JtYXRSZXR1cm5WYWx1ZSgnZWxlbWVudEVuZCcsbyx0LGUpfWlmKHRoaXMuc2luZ2xlQ2hhcmFjdGVycylyZXR1cm4gZT1uZXcgeGMobiwwKSx0aGlzLnBvc2l0aW9uPWUsdGhpcy5fbmV4dCgpO2Vsc2V7bGV0IG89bi5kYXRhLmxlbmd0aCxpO3JldHVybiBuPT10aGlzLl9ib3VuZGFyeUVuZFBhcmVudD8obz10aGlzLmJvdW5kYXJpZXMuZW5kLm9mZnNldCxpPW5ldyBSZChuLDAsbyksZT14Yy5jcmVhdGVBZnRlcihpKSk6KGk9bmV3IFJkKG4sMCxuLmRhdGEubGVuZ3RoKSxlLm9mZnNldCsrKSx0aGlzLnBvc2l0aW9uPWUsdGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoJ3RleHQnLGksdCxlLG8pfX1fcHJldmlvdXMoKXtsZXQgZT14Yy5jcmVhdGVGcm9tUG9zaXRpb24odGhpcy5wb3NpdGlvbik7Y29uc3QgdD10aGlzLnBvc2l0aW9uLG89ZS5wYXJlbnQ7aWYobnVsbD09PW8ucGFyZW50JiYwPT09ZS5vZmZzZXQpcmV0dXJue2RvbmU6ITB9O2lmKG89PXRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQmJmUub2Zmc2V0PT10aGlzLmJvdW5kYXJpZXMuc3RhcnQub2Zmc2V0KXJldHVybntkb25lOiEwfTtsZXQgbjtpZihvIGluc3RhbmNlb2YgT2Qpe2lmKGUuaXNBdFN0YXJ0KXJldHVybiB0aGlzLnBvc2l0aW9uPXhjLmNyZWF0ZUJlZm9yZShvKSx0aGlzLl9wcmV2aW91cygpO249by5kYXRhW2Uub2Zmc2V0LTFdfWVsc2Ugbj1vLmdldENoaWxkKGUub2Zmc2V0LTEpO2lmKG4gaW5zdGFuY2VvZiBWZClyZXR1cm4gdGhpcy5zaGFsbG93PyhlLm9mZnNldC0tLHRoaXMucG9zaXRpb249ZSx0aGlzLl9mb3JtYXRSZXR1cm5WYWx1ZSgnZWxlbWVudFN0YXJ0JyxuLHQsZSwxKSk6KGU9bmV3IHhjKG4sbi5jaGlsZENvdW50KSx0aGlzLnBvc2l0aW9uPWUsdGhpcy5pZ25vcmVFbGVtZW50RW5kP3RoaXMuX3ByZXZpb3VzKCk6dGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoJ2VsZW1lbnRFbmQnLG4sdCxlKSk7aWYoIShuIGluc3RhbmNlb2YgT2QpKXtpZignc3RyaW5nJz09dHlwZW9mIG4pe2xldCBuO2lmKCF0aGlzLnNpbmdsZUNoYXJhY3RlcnMpe2NvbnN0IHQ9bz09PXRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQ/dGhpcy5ib3VuZGFyaWVzLnN0YXJ0Lm9mZnNldDowO249ZS5vZmZzZXQtdH1lbHNlIG49MTtlLm9mZnNldC09bjtjb25zdCBpPW5ldyBSZChvLGUub2Zmc2V0LG4pO3JldHVybiB0aGlzLnBvc2l0aW9uPWUsdGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoJ3RleHQnLGksdCxlLG4pfXJldHVybiBlPXhjLmNyZWF0ZUJlZm9yZShvKSx0aGlzLnBvc2l0aW9uPWUsdGhpcy5fZm9ybWF0UmV0dXJuVmFsdWUoJ2VsZW1lbnRTdGFydCcsbyx0LGUsMSl9aWYodGhpcy5zaW5nbGVDaGFyYWN0ZXJzKXJldHVybiBlPW5ldyB4YyhuLG4uZGF0YS5sZW5ndGgpLHRoaXMucG9zaXRpb249ZSx0aGlzLl9wcmV2aW91cygpO2Vsc2V7bGV0IG89bi5kYXRhLmxlbmd0aCxpO2lmKG49PXRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQpe2NvbnN0IHQ9dGhpcy5ib3VuZGFyaWVzLnN0YXJ0Lm9mZnNldDtpPW5ldyBSZChuLHQsbi5kYXRhLmxlbmd0aC10KSxvPWkuZGF0YS5sZW5ndGgsZT14Yy5jcmVhdGVCZWZvcmUoaSl9ZWxzZSBpPW5ldyBSZChuLDAsbi5kYXRhLmxlbmd0aCksZS5vZmZzZXQtLTtyZXR1cm4gdGhpcy5wb3NpdGlvbj1lLHRoaXMuX2Zvcm1hdFJldHVyblZhbHVlKCd0ZXh0JyxpLHQsZSxvKX19X2Zvcm1hdFJldHVyblZhbHVlKGUsdCxvLG4saSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBSZCYmKHQub2Zmc2V0SW5UZXh0K3QuZGF0YS5sZW5ndGg9PXQudGV4dE5vZGUuZGF0YS5sZW5ndGgmJignZm9yd2FyZCchPXRoaXMuZGlyZWN0aW9ufHx0aGlzLmJvdW5kYXJpZXMmJnRoaXMuYm91bmRhcmllcy5lbmQuaXNFcXVhbCh0aGlzLnBvc2l0aW9uKT9vPXhjLmNyZWF0ZUFmdGVyKHQudGV4dE5vZGUpOihuPXhjLmNyZWF0ZUFmdGVyKHQudGV4dE5vZGUpLHRoaXMucG9zaXRpb249bikpLDA9PT10Lm9mZnNldEluVGV4dCYmKCdiYWNrd2FyZCchPXRoaXMuZGlyZWN0aW9ufHx0aGlzLmJvdW5kYXJpZXMmJnRoaXMuYm91bmRhcmllcy5zdGFydC5pc0VxdWFsKHRoaXMucG9zaXRpb24pP289eGMuY3JlYXRlQmVmb3JlKHQudGV4dE5vZGUpOihuPXhjLmNyZWF0ZUJlZm9yZSh0LnRleHROb2RlKSx0aGlzLnBvc2l0aW9uPW4pKSkse2RvbmU6ITEsdmFsdWU6e3R5cGU6ZSxpdGVtOnQscHJldmlvdXNQb3NpdGlvbjpvLG5leHRQb3NpdGlvbjpuLGxlbmd0aDppfX19fWNsYXNzIHhje2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wYXJlbnQ9ZSx0aGlzLm9mZnNldD10fWdldCBub2RlQWZ0ZXIoKXtyZXR1cm4gdGhpcy5wYXJlbnQuaXMoJ3RleHQnKT9udWxsOnRoaXMucGFyZW50LmdldENoaWxkKHRoaXMub2Zmc2V0KXx8bnVsbH1nZXQgbm9kZUJlZm9yZSgpe3JldHVybiB0aGlzLnBhcmVudC5pcygndGV4dCcpP251bGw6dGhpcy5wYXJlbnQuZ2V0Q2hpbGQodGhpcy5vZmZzZXQtMSl8fG51bGx9Z2V0IGlzQXRTdGFydCgpe3JldHVybiAwPT09dGhpcy5vZmZzZXR9Z2V0IGlzQXRFbmQoKXtjb25zdCBlPXRoaXMucGFyZW50LmlzKCd0ZXh0Jyk/dGhpcy5wYXJlbnQuZGF0YS5sZW5ndGg6dGhpcy5wYXJlbnQuY2hpbGRDb3VudDtyZXR1cm4gdGhpcy5vZmZzZXQ9PT1lfWdldCByb290KCl7cmV0dXJuIHRoaXMucGFyZW50LnJvb3R9Z2V0IGVkaXRhYmxlRWxlbWVudCgpe2xldCBlPXRoaXMucGFyZW50O2Zvcig7IShlIGluc3RhbmNlb2YgX2MpOylpZihlLnBhcmVudCllPWUucGFyZW50O2Vsc2UgcmV0dXJuIG51bGw7cmV0dXJuIGV9Z2V0U2hpZnRlZEJ5KGUpe2NvbnN0IHQ9eGMuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMpLG89dC5vZmZzZXQrZTtyZXR1cm4gdC5vZmZzZXQ9MD5vPzA6byx0fWdldExhc3RNYXRjaGluZ1Bvc2l0aW9uKGUsdD17fSl7dC5zdGFydFBvc2l0aW9uPXRoaXM7Y29uc3Qgbz1uZXcgeWModCk7cmV0dXJuIG8uc2tpcChlKSxvLnBvc2l0aW9ufWdldEFuY2VzdG9ycygpe3JldHVybiB0aGlzLnBhcmVudC5pcygnZG9jdW1lbnRGcmFnbWVudCcpP1t0aGlzLnBhcmVudF06dGhpcy5wYXJlbnQuZ2V0QW5jZXN0b3JzKHtpbmNsdWRlU2VsZjohMH0pfWdldENvbW1vbkFuY2VzdG9yKGUpe2NvbnN0IHQ9dGhpcy5nZXRBbmNlc3RvcnMoKSxvPWUuZ2V0QW5jZXN0b3JzKCk7bGV0IG49MDtmb3IoO3Rbbl09PW9bbl0mJnRbbl07KW4rKztyZXR1cm4gMD09bj9udWxsOnRbbi0xXX1pc0VxdWFsKGUpe3JldHVybiB0aGlzLnBhcmVudD09ZS5wYXJlbnQmJnRoaXMub2Zmc2V0PT1lLm9mZnNldH1pc0JlZm9yZShlKXtyZXR1cm4nYmVmb3JlJz09dGhpcy5jb21wYXJlV2l0aChlKX1pc0FmdGVyKGUpe3JldHVybidhZnRlcic9PXRoaXMuY29tcGFyZVdpdGgoZSl9Y29tcGFyZVdpdGgoZSl7aWYodGhpcy5yb290IT09ZS5yb290KXJldHVybidkaWZmZXJlbnQnO2lmKHRoaXMuaXNFcXVhbChlKSlyZXR1cm4nc2FtZSc7Y29uc3QgdD10aGlzLnBhcmVudC5pcygnbm9kZScpP3RoaXMucGFyZW50LmdldFBhdGgoKTpbXSxvPWUucGFyZW50LmlzKCdub2RlJyk/ZS5wYXJlbnQuZ2V0UGF0aCgpOltdO3QucHVzaCh0aGlzLm9mZnNldCksby5wdXNoKGUub2Zmc2V0KTtjb25zdCBuPUEodCxvKTtyZXR1cm4ncHJlZml4Jz09PW4/J2JlZm9yZSc6J2V4dGVuc2lvbic9PT1uPydhZnRlcic6dFtuXTxvW25dPydiZWZvcmUnOidhZnRlcid9c3RhdGljIGNyZWF0ZUF0KGUsdCl7aWYoZSBpbnN0YW5jZW9mIHhjKXJldHVybiB0aGlzLmNyZWF0ZUZyb21Qb3NpdGlvbihlKTtlbHNle2NvbnN0IG89ZTtpZignZW5kJz09dCl0PW8uaXMoJ3RleHQnKT9vLmRhdGEubGVuZ3RoOm8uY2hpbGRDb3VudDtlbHNle2lmKCdiZWZvcmUnPT10KXJldHVybiB0aGlzLmNyZWF0ZUJlZm9yZShvKTtpZignYWZ0ZXInPT10KXJldHVybiB0aGlzLmNyZWF0ZUFmdGVyKG8pO3R8fCh0PTApfXJldHVybiBuZXcgeGMobyx0KX19c3RhdGljIGNyZWF0ZUFmdGVyKGUpe2lmKGUuaXMoJ3RleHRQcm94eScpKXJldHVybiBuZXcgeGMoZS50ZXh0Tm9kZSxlLm9mZnNldEluVGV4dCtlLmRhdGEubGVuZ3RoKTtpZighZS5wYXJlbnQpdGhyb3cgbmV3IFphKCd2aWV3LXBvc2l0aW9uLWFmdGVyLXJvb3Q6IFlvdSBjYW4gbm90IG1ha2UgcG9zaXRpb24gYWZ0ZXIgcm9vdC4nLHtyb290OmV9KTtyZXR1cm4gbmV3IHhjKGUucGFyZW50LGUuaW5kZXgrMSl9c3RhdGljIGNyZWF0ZUJlZm9yZShlKXtpZihlLmlzKCd0ZXh0UHJveHknKSlyZXR1cm4gbmV3IHhjKGUudGV4dE5vZGUsZS5vZmZzZXRJblRleHQpO2lmKCFlLnBhcmVudCl0aHJvdyBuZXcgWmEoJ3ZpZXctcG9zaXRpb24tYmVmb3JlLXJvb3Q6IFlvdSBjYW4gbm90IG1ha2UgcG9zaXRpb24gYmVmb3JlIHJvb3QuJyx7cm9vdDplfSk7cmV0dXJuIG5ldyB4YyhlLnBhcmVudCxlLmluZGV4KX1zdGF0aWMgY3JlYXRlRnJvbVBvc2l0aW9uKGUpe3JldHVybiBuZXcgdGhpcyhlLnBhcmVudCxlLm9mZnNldCl9fWNsYXNzIENje2NvbnN0cnVjdG9yKGUsdD1udWxsKXt0aGlzLnN0YXJ0PXhjLmNyZWF0ZUZyb21Qb3NpdGlvbihlKSx0aGlzLmVuZD10P3hjLmNyZWF0ZUZyb21Qb3NpdGlvbih0KTp4Yy5jcmVhdGVGcm9tUG9zaXRpb24oZSl9KltTeW1ib2wuaXRlcmF0b3JdKCl7eWllbGQqbmV3IHljKHtib3VuZGFyaWVzOnRoaXMsaWdub3JlRWxlbWVudEVuZDohMH0pfWdldCBpc0NvbGxhcHNlZCgpe3JldHVybiB0aGlzLnN0YXJ0LmlzRXF1YWwodGhpcy5lbmQpfWdldCBpc0ZsYXQoKXtyZXR1cm4gdGhpcy5zdGFydC5wYXJlbnQ9PT10aGlzLmVuZC5wYXJlbnR9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpcy5zdGFydC5yb290fWdldEVubGFyZ2VkKCl7bGV0IGU9dGhpcy5zdGFydC5nZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbihRLHtkaXJlY3Rpb246J2JhY2t3YXJkJ30pLHQ9dGhpcy5lbmQuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oUSk7cmV0dXJuIGUucGFyZW50LmlzKCd0ZXh0JykmJmUuaXNBdFN0YXJ0JiYoZT14Yy5jcmVhdGVCZWZvcmUoZS5wYXJlbnQpKSx0LnBhcmVudC5pcygndGV4dCcpJiZ0LmlzQXRFbmQmJih0PXhjLmNyZWF0ZUFmdGVyKHQucGFyZW50KSksbmV3IENjKGUsdCl9Z2V0VHJpbW1lZCgpe2xldCBlPXRoaXMuc3RhcnQuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oUSk7aWYoZS5pc0FmdGVyKHRoaXMuZW5kKXx8ZS5pc0VxdWFsKHRoaXMuZW5kKSlyZXR1cm4gbmV3IENjKGUsZSk7bGV0IHQ9dGhpcy5lbmQuZ2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oUSx7ZGlyZWN0aW9uOidiYWNrd2FyZCd9KTtjb25zdCBvPWUubm9kZUFmdGVyLG49dC5ub2RlQmVmb3JlO3JldHVybiBvJiZvLmlzKCd0ZXh0JykmJihlPW5ldyB4YyhvLDApKSxuJiZuLmlzKCd0ZXh0JykmJih0PW5ldyB4YyhuLG4uZGF0YS5sZW5ndGgpKSxuZXcgQ2MoZSx0KX1pc0VxdWFsKGUpe3JldHVybiB0aGlzPT1lfHx0aGlzLnN0YXJ0LmlzRXF1YWwoZS5zdGFydCkmJnRoaXMuZW5kLmlzRXF1YWwoZS5lbmQpfWNvbnRhaW5zUG9zaXRpb24oZSl7cmV0dXJuIGUuaXNBZnRlcih0aGlzLnN0YXJ0KSYmZS5pc0JlZm9yZSh0aGlzLmVuZCl9Y29udGFpbnNSYW5nZShlLHQ9ITEpe2UuaXNDb2xsYXBzZWQmJih0PSExKTtjb25zdCBvPXRoaXMuY29udGFpbnNQb3NpdGlvbihlLnN0YXJ0KXx8dCYmdGhpcy5zdGFydC5pc0VxdWFsKGUuc3RhcnQpLG49dGhpcy5jb250YWluc1Bvc2l0aW9uKGUuZW5kKXx8dCYmdGhpcy5lbmQuaXNFcXVhbChlLmVuZCk7cmV0dXJuIG8mJm59Z2V0RGlmZmVyZW5jZShlKXtjb25zdCB0PVtdO3JldHVybiB0aGlzLmlzSW50ZXJzZWN0aW5nKGUpPyh0aGlzLmNvbnRhaW5zUG9zaXRpb24oZS5zdGFydCkmJnQucHVzaChuZXcgQ2ModGhpcy5zdGFydCxlLnN0YXJ0KSksdGhpcy5jb250YWluc1Bvc2l0aW9uKGUuZW5kKSYmdC5wdXNoKG5ldyBDYyhlLmVuZCx0aGlzLmVuZCkpKTp0LnB1c2goQ2MuY3JlYXRlRnJvbVJhbmdlKHRoaXMpKSx0fWdldEludGVyc2VjdGlvbihlKXtpZih0aGlzLmlzSW50ZXJzZWN0aW5nKGUpKXtsZXQgdD10aGlzLnN0YXJ0LG89dGhpcy5lbmQ7cmV0dXJuIHRoaXMuY29udGFpbnNQb3NpdGlvbihlLnN0YXJ0KSYmKHQ9ZS5zdGFydCksdGhpcy5jb250YWluc1Bvc2l0aW9uKGUuZW5kKSYmKG89ZS5lbmQpLG5ldyBDYyh0LG8pfXJldHVybiBudWxsfWdldFdhbGtlcihlPXt9KXtyZXR1cm4gZS5ib3VuZGFyaWVzPXRoaXMsbmV3IHljKGUpfWdldENvbW1vbkFuY2VzdG9yKCl7cmV0dXJuIHRoaXMuc3RhcnQuZ2V0Q29tbW9uQW5jZXN0b3IodGhpcy5lbmQpfSpnZXRJdGVtcyhlPXt9KXtlLmJvdW5kYXJpZXM9dGhpcyxlLmlnbm9yZUVsZW1lbnRFbmQ9ITA7Y29uc3QgdD1uZXcgeWMoZSk7Zm9yKGNvbnN0IG8gb2YgdCl5aWVsZCBvLml0ZW19KmdldFBvc2l0aW9ucyhlPXt9KXtlLmJvdW5kYXJpZXM9dGhpcztjb25zdCB0PW5ldyB5YyhlKTt5aWVsZCB0LnBvc2l0aW9uO2Zvcihjb25zdCBvIG9mIHQpeWllbGQgby5uZXh0UG9zaXRpb259aXNJbnRlcnNlY3RpbmcoZSl7cmV0dXJuIHRoaXMuc3RhcnQuaXNCZWZvcmUoZS5lbmQpJiZ0aGlzLmVuZC5pc0FmdGVyKGUuc3RhcnQpfXN0YXRpYyBjcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHMoZSx0LG8sbil7cmV0dXJuIG5ldyB0aGlzKG5ldyB4YyhlLHQpLG5ldyB4YyhvLG4pKX1zdGF0aWMgY3JlYXRlRnJvbVJhbmdlKGUpe3JldHVybiBuZXcgdGhpcyhlLnN0YXJ0LGUuZW5kKX1zdGF0aWMgY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZSx0KXtjb25zdCBvPWUsbj1lLmdldFNoaWZ0ZWRCeSh0KTtyZXR1cm4gMDx0P25ldyB0aGlzKG8sbik6bmV3IHRoaXMobixvKX1zdGF0aWMgY3JlYXRlSW4oZSl7cmV0dXJuIHRoaXMuY3JlYXRlRnJvbVBhcmVudHNBbmRPZmZzZXRzKGUsMCxlLGUuY2hpbGRDb3VudCl9c3RhdGljIGNyZWF0ZU9uKGUpe2NvbnN0IHQ9ZS5pcygndGV4dFByb3h5Jyk/ZS5vZmZzZXRTaXplOjE7cmV0dXJuIHRoaXMuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoeGMuY3JlYXRlQmVmb3JlKGUpLHQpfXN0YXRpYyBjcmVhdGVDb2xsYXBzZWRBdChlLHQpe2NvbnN0IG89eGMuY3JlYXRlQXQoZSx0KSxuPXhjLmNyZWF0ZUZyb21Qb3NpdGlvbihvKTtyZXR1cm4gbmV3IENjKG8sbil9fWNsYXNzIEFje2NvbnN0cnVjdG9yKGU9bnVsbCx0LG8pe3RoaXMuX3Jhbmdlcz1bXSx0aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD0hMSx0aGlzLl9pc0Zha2U9ITEsdGhpcy5fZmFrZVNlbGVjdGlvbkxhYmVsPScnLHRoaXMuc2V0VG8oZSx0LG8pfWdldCBpc0Zha2UoKXtyZXR1cm4gdGhpcy5faXNGYWtlfWdldCBmYWtlU2VsZWN0aW9uTGFiZWwoKXtyZXR1cm4gdGhpcy5fZmFrZVNlbGVjdGlvbkxhYmVsfWdldCBhbmNob3IoKXtpZighdGhpcy5fcmFuZ2VzLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBlPXRoaXMuX3Jhbmdlc1t0aGlzLl9yYW5nZXMubGVuZ3RoLTFdLHQ9dGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ/ZS5lbmQ6ZS5zdGFydDtyZXR1cm4geGMuY3JlYXRlRnJvbVBvc2l0aW9uKHQpfWdldCBmb2N1cygpe2lmKCF0aGlzLl9yYW5nZXMubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IGU9dGhpcy5fcmFuZ2VzW3RoaXMuX3Jhbmdlcy5sZW5ndGgtMV0sdD10aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD9lLnN0YXJ0OmUuZW5kO3JldHVybiB4Yy5jcmVhdGVGcm9tUG9zaXRpb24odCl9Z2V0IGlzQ29sbGFwc2VkKCl7cmV0dXJuIDE9PT10aGlzLnJhbmdlQ291bnQmJnRoaXMuX3Jhbmdlc1swXS5pc0NvbGxhcHNlZH1nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9yYW5nZXMubGVuZ3RofWdldCBpc0JhY2t3YXJkKCl7cmV0dXJuIXRoaXMuaXNDb2xsYXBzZWQmJnRoaXMuX2xhc3RSYW5nZUJhY2t3YXJkfWdldCBlZGl0YWJsZUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5hbmNob3I/dGhpcy5hbmNob3IuZWRpdGFibGVFbGVtZW50Om51bGx9KmdldFJhbmdlcygpe2Zvcihjb25zdCBlIG9mIHRoaXMuX3Jhbmdlcyl5aWVsZCBDYy5jcmVhdGVGcm9tUmFuZ2UoZSl9Z2V0Rmlyc3RSYW5nZSgpe2xldCBlPW51bGw7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmFuZ2VzKSghZXx8dC5zdGFydC5pc0JlZm9yZShlLnN0YXJ0KSkmJihlPXQpO3JldHVybiBlP0NjLmNyZWF0ZUZyb21SYW5nZShlKTpudWxsfWdldExhc3RSYW5nZSgpe2xldCBlPW51bGw7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmFuZ2VzKSghZXx8dC5lbmQuaXNBZnRlcihlLmVuZCkpJiYoZT10KTtyZXR1cm4gZT9DYy5jcmVhdGVGcm9tUmFuZ2UoZSk6bnVsbH1nZXRGaXJzdFBvc2l0aW9uKCl7Y29uc3QgZT10aGlzLmdldEZpcnN0UmFuZ2UoKTtyZXR1cm4gZT94Yy5jcmVhdGVGcm9tUG9zaXRpb24oZS5zdGFydCk6bnVsbH1nZXRMYXN0UG9zaXRpb24oKXtjb25zdCBlPXRoaXMuZ2V0TGFzdFJhbmdlKCk7cmV0dXJuIGU/eGMuY3JlYXRlRnJvbVBvc2l0aW9uKGUuZW5kKTpudWxsfWlzRXF1YWwoZSl7aWYodGhpcy5pc0Zha2UhPWUuaXNGYWtlKXJldHVybiExO2lmKHRoaXMuaXNGYWtlJiZ0aGlzLmZha2VTZWxlY3Rpb25MYWJlbCE9ZS5mYWtlU2VsZWN0aW9uTGFiZWwpcmV0dXJuITE7aWYodGhpcy5yYW5nZUNvdW50IT1lLnJhbmdlQ291bnQpcmV0dXJuITE7aWYoMD09PXRoaXMucmFuZ2VDb3VudClyZXR1cm4hMDtpZighdGhpcy5hbmNob3IuaXNFcXVhbChlLmFuY2hvcil8fCF0aGlzLmZvY3VzLmlzRXF1YWwoZS5mb2N1cykpcmV0dXJuITE7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmFuZ2VzKXtsZXQgbz0hMTtmb3IoY29uc3QgbiBvZiBlLl9yYW5nZXMpaWYodC5pc0VxdWFsKG4pKXtvPSEwO2JyZWFrfWlmKCFvKXJldHVybiExfXJldHVybiEwfWlzU2ltaWxhcihlKXtpZih0aGlzLmlzQmFja3dhcmQhPWUuaXNCYWNrd2FyZClyZXR1cm4hMTtjb25zdCB0PVkodGhpcy5nZXRSYW5nZXMoKSksbz1ZKGUuZ2V0UmFuZ2VzKCkpO2lmKHQhPW8pcmV0dXJuITE7aWYoMD09dClyZXR1cm4hMDtmb3IobGV0IHQgb2YgdGhpcy5nZXRSYW5nZXMoKSl7dD10LmdldFRyaW1tZWQoKTtsZXQgbz0hMTtmb3IobGV0IG4gb2YgZS5nZXRSYW5nZXMoKSlpZihuPW4uZ2V0VHJpbW1lZCgpLHQuc3RhcnQuaXNFcXVhbChuLnN0YXJ0KSYmdC5lbmQuaXNFcXVhbChuLmVuZCkpe289ITA7YnJlYWt9aWYoIW8pcmV0dXJuITF9cmV0dXJuITB9Z2V0U2VsZWN0ZWRFbGVtZW50KCl7aWYoMSE9PXRoaXMucmFuZ2VDb3VudClyZXR1cm4gbnVsbDtjb25zdCBlPXRoaXMuZ2V0Rmlyc3RSYW5nZSgpLHQ9ZS5zdGFydC5ub2RlQWZ0ZXIsbz1lLmVuZC5ub2RlQmVmb3JlO3JldHVybiB0IGluc3RhbmNlb2YgVmQmJnQ9PW8/dDpudWxsfXNldFRvKGUsdCxvKXtpZihudWxsPT09ZSl0aGlzLl9zZXRSYW5nZXMoW10pLHRoaXMuX3NldEZha2VPcHRpb25zKHQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEFjfHxlIGluc3RhbmNlb2YgVGMpdGhpcy5fc2V0UmFuZ2VzKGUuZ2V0UmFuZ2VzKCksZS5pc0JhY2t3YXJkKSx0aGlzLl9zZXRGYWtlT3B0aW9ucyh7ZmFrZTplLmlzRmFrZSxsYWJlbDplLmZha2VTZWxlY3Rpb25MYWJlbH0pO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIENjKXRoaXMuX3NldFJhbmdlcyhbZV0sdCYmdC5iYWNrd2FyZCksdGhpcy5fc2V0RmFrZU9wdGlvbnModCk7ZWxzZSBpZihlIGluc3RhbmNlb2YgeGMpdGhpcy5fc2V0UmFuZ2VzKFtuZXcgQ2MoZSldKSx0aGlzLl9zZXRGYWtlT3B0aW9ucyh0KTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBTZCl7Y29uc3Qgbj0hIW8mJiEhby5iYWNrd2FyZDtsZXQgaTtpZih0PT09dm9pZCAwKXRocm93IG5ldyBaYSgndmlldy1zZWxlY3Rpb24tc2V0VG8tcmVxdWlyZWQtc2Vjb25kLXBhcmFtZXRlcjogc2VsZWN0aW9uLnNldFRvIHJlcXVpcmVzIHRoZSBzZWNvbmQgcGFyYW1ldGVyIHdoZW4gdGhlIGZpcnN0IHBhcmFtZXRlciBpcyBhIG5vZGUuJyk7ZWxzZSBpPSdpbic9PXQ/Q2MuY3JlYXRlSW4oZSk6J29uJz09dD9DYy5jcmVhdGVPbihlKTpDYy5jcmVhdGVDb2xsYXBzZWRBdChlLHQpO3RoaXMuX3NldFJhbmdlcyhbaV0sbiksdGhpcy5fc2V0RmFrZU9wdGlvbnMobyl9ZWxzZSBpZihQKGUpKXRoaXMuX3NldFJhbmdlcyhlLHQmJnQuYmFja3dhcmQpLHRoaXMuX3NldEZha2VPcHRpb25zKHQpO2Vsc2UgdGhyb3cgbmV3IFphKCd2aWV3LXNlbGVjdGlvbi1zZXRUby1ub3Qtc2VsZWN0YWJsZTogQ2Fubm90IHNldCBzZWxlY3Rpb24gdG8gZ2l2ZW4gcGxhY2UuJyk7dGhpcy5maXJlKCdjaGFuZ2UnKX1zZXRGb2N1cyhlLHQpe2lmKG51bGw9PT10aGlzLmFuY2hvcil0aHJvdyBuZXcgWmEoJ3ZpZXctc2VsZWN0aW9uLXNldEZvY3VzLW5vLXJhbmdlczogQ2Fubm90IHNldCBzZWxlY3Rpb24gZm9jdXMgaWYgdGhlcmUgYXJlIG5vIHJhbmdlcyBpbiBzZWxlY3Rpb24uJyk7Y29uc3Qgbz14Yy5jcmVhdGVBdChlLHQpO2lmKCdzYW1lJyE9by5jb21wYXJlV2l0aCh0aGlzLmZvY3VzKSl7Y29uc3QgZT10aGlzLmFuY2hvcjt0aGlzLl9yYW5nZXMucG9wKCksJ2JlZm9yZSc9PW8uY29tcGFyZVdpdGgoZSk/dGhpcy5fYWRkUmFuZ2UobmV3IENjKG8sZSksITApOnRoaXMuX2FkZFJhbmdlKG5ldyBDYyhlLG8pKSx0aGlzLmZpcmUoJ2NoYW5nZScpfX1fc2V0UmFuZ2VzKGUsdD0hMSl7ZT1BcnJheS5mcm9tKGUpLHRoaXMuX3Jhbmdlcz1bXTtmb3IoY29uc3QgbyBvZiBlKXRoaXMuX2FkZFJhbmdlKG8pO3RoaXMuX2xhc3RSYW5nZUJhY2t3YXJkPSEhdH1fc2V0RmFrZU9wdGlvbnMoZT17fSl7dGhpcy5faXNGYWtlPSEhZS5mYWtlLHRoaXMuX2Zha2VTZWxlY3Rpb25MYWJlbD1lLmZha2U/ZS5sYWJlbHx8Jyc6Jyd9X2FkZFJhbmdlKGUsdD0hMSl7aWYoIShlIGluc3RhbmNlb2YgQ2MpKXRocm93IG5ldyBaYSgndmlldy1zZWxlY3Rpb24taW52YWxpZC1yYW5nZTogSW52YWxpZCBSYW5nZS4nKTt0aGlzLl9wdXNoUmFuZ2UoZSksdGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ9ISF0fV9wdXNoUmFuZ2UoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmFuZ2VzKWlmKGUuaXNJbnRlcnNlY3RpbmcodCkpdGhyb3cgbmV3IFphKCd2aWV3LXNlbGVjdGlvbi1yYW5nZS1pbnRlcnNlY3RzOiBUcnlpbmcgdG8gYWRkIGEgcmFuZ2UgdGhhdCBpbnRlcnNlY3RzIHdpdGggYW5vdGhlciByYW5nZSBmcm9tIHNlbGVjdGlvbi4nLHthZGRlZFJhbmdlOmUsaW50ZXJzZWN0aW5nUmFuZ2U6dH0pO3RoaXMuX3Jhbmdlcy5wdXNoKENjLmNyZWF0ZUZyb21SYW5nZShlKSl9fWYoQWMsc3MpO2NsYXNzIFRje2NvbnN0cnVjdG9yKGU9bnVsbCx0LG8pe3RoaXMuX3NlbGVjdGlvbj1uZXcgQWMsdGhpcy5fc2VsZWN0aW9uLmRlbGVnYXRlKCdjaGFuZ2UnKS50byh0aGlzKSx0aGlzLl9zZWxlY3Rpb24uc2V0VG8oZSx0LG8pfWdldCBpc0Zha2UoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmlzRmFrZX1nZXQgZmFrZVNlbGVjdGlvbkxhYmVsKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5mYWtlU2VsZWN0aW9uTGFiZWx9Z2V0IGFuY2hvcigpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uYW5jaG9yfWdldCBmb2N1cygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZm9jdXN9Z2V0IGlzQ29sbGFwc2VkKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0NvbGxhcHNlZH1nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24ucmFuZ2VDb3VudH1nZXQgaXNCYWNrd2FyZCgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uaXNCYWNrd2FyZH1nZXQgZWRpdGFibGVFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnR9Z2V0IF9yYW5nZXMoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLl9yYW5nZXN9KmdldFJhbmdlcygpe3lpZWxkKnRoaXMuX3NlbGVjdGlvbi5nZXRSYW5nZXMoKX1nZXRGaXJzdFJhbmdlKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRGaXJzdFJhbmdlKCl9Z2V0TGFzdFJhbmdlKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRMYXN0UmFuZ2UoKX1nZXRGaXJzdFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCl9Z2V0TGFzdFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRMYXN0UG9zaXRpb24oKX1nZXRTZWxlY3RlZEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpfWlzRXF1YWwoZSl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0VxdWFsKGUpfWlzU2ltaWxhcihlKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmlzU2ltaWxhcihlKX1fc2V0VG8oZSx0LG8pe3RoaXMuX3NlbGVjdGlvbi5zZXRUbyhlLHQsbyl9X3NldEZvY3VzKGUsdCl7dGhpcy5fc2VsZWN0aW9uLnNldEZvY3VzKGUsdCl9fWYoVGMsc3MpO2NsYXNzIFBje2NvbnN0cnVjdG9yKGU9e30pe3RoaXMuX2l0ZW1zPVtdLHRoaXMuX2l0ZW1NYXA9bmV3IE1hcCx0aGlzLl9pZFByb3BlcnR5PWUuaWRQcm9wZXJ0eXx8J2lkJyx0aGlzLl9iaW5kVG9FeHRlcm5hbFRvSW50ZXJuYWxNYXA9bmV3IFdlYWtNYXAsdGhpcy5fYmluZFRvSW50ZXJuYWxUb0V4dGVybmFsTWFwPW5ldyBXZWFrTWFwLHRoaXMuX3NraXBwZWRJbmRleGVzRnJvbUV4dGVybmFsPVtdfWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5faXRlbXMubGVuZ3RofWdldCBmaXJzdCgpe3JldHVybiB0aGlzLl9pdGVtc1swXXx8bnVsbH1nZXQgbGFzdCgpe3JldHVybiB0aGlzLl9pdGVtc1t0aGlzLmxlbmd0aC0xXXx8bnVsbH1hZGQoZSx0KXtsZXQgbztjb25zdCBuPXRoaXMuX2lkUHJvcGVydHk7aWYobiBpbiBlKXtpZihvPWVbbl0sJ3N0cmluZychPXR5cGVvZiBvKXRocm93IG5ldyBaYSgnY29sbGVjdGlvbi1hZGQtaW52YWxpZC1pZCcpO2lmKHRoaXMuZ2V0KG8pKXRocm93IG5ldyBaYSgnY29sbGVjdGlvbi1hZGQtaXRlbS1hbHJlYWR5LWV4aXN0cycpfWVsc2UgZVtuXT1vPWkoKTtpZih2b2lkIDA9PT10KXQ9dGhpcy5faXRlbXMubGVuZ3RoO2Vsc2UgaWYodD50aGlzLl9pdGVtcy5sZW5ndGh8fDA+dCl0aHJvdyBuZXcgWmEoJ2NvbGxlY3Rpb24tYWRkLWl0ZW0taW52YWxpZC1pbmRleCcpO3JldHVybiB0aGlzLl9pdGVtcy5zcGxpY2UodCwwLGUpLHRoaXMuX2l0ZW1NYXAuc2V0KG8sZSksdGhpcy5maXJlKCdhZGQnLGUsdCksdGhpc31nZXQoZSl7bGV0IHQ7aWYoJ3N0cmluZyc9PXR5cGVvZiBlKXQ9dGhpcy5faXRlbU1hcC5nZXQoZSk7ZWxzZSBpZignbnVtYmVyJz09dHlwZW9mIGUpdD10aGlzLl9pdGVtc1tlXTtlbHNlIHRocm93IG5ldyBaYSgnY29sbGVjdGlvbi1nZXQtaW52YWxpZC1hcmc6IEluZGV4IG9yIGlkIG11c3QgYmUgZ2l2ZW4uJyk7cmV0dXJuIHR8fG51bGx9Z2V0SW5kZXgoZSl7bGV0IHQ7cmV0dXJuIHQ9J3N0cmluZyc9PXR5cGVvZiBlP3RoaXMuX2l0ZW1NYXAuZ2V0KGUpOmUsdGhpcy5faXRlbXMuaW5kZXhPZih0KX1yZW1vdmUoZSl7bGV0IHQ9ITEsbyxuLGk7Y29uc3Qgcj10aGlzLl9pZFByb3BlcnR5O2lmKCdzdHJpbmcnPT10eXBlb2YgZT8obj1lLGk9dGhpcy5faXRlbU1hcC5nZXQobiksdD0haSxpJiYobz10aGlzLl9pdGVtcy5pbmRleE9mKGkpKSk6J251bWJlcic9PXR5cGVvZiBlPyhvPWUsaT10aGlzLl9pdGVtc1tvXSx0PSFpLGkmJihuPWlbcl0pKTooaT1lLG49aVtyXSxvPXRoaXMuX2l0ZW1zLmluZGV4T2YoaSksdD0tMT09b3x8IXRoaXMuX2l0ZW1NYXAuZ2V0KG4pKSx0KXRocm93IG5ldyBaYSgnY29sbGVjdGlvbi1yZW1vdmUtNDA0OiBJdGVtIG5vdCBmb3VuZC4nKTt0aGlzLl9pdGVtcy5zcGxpY2UobywxKSx0aGlzLl9pdGVtTWFwLmRlbGV0ZShuKTtjb25zdCBhPXRoaXMuX2JpbmRUb0ludGVybmFsVG9FeHRlcm5hbE1hcC5nZXQoaSk7cmV0dXJuIHRoaXMuX2JpbmRUb0ludGVybmFsVG9FeHRlcm5hbE1hcC5kZWxldGUoaSksdGhpcy5fYmluZFRvRXh0ZXJuYWxUb0ludGVybmFsTWFwLmRlbGV0ZShhKSx0aGlzLmZpcmUoJ3JlbW92ZScsaSxvKSxpfW1hcChlLHQpe3JldHVybiB0aGlzLl9pdGVtcy5tYXAoZSx0KX1maW5kKGUsdCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmZpbmQoZSx0KX1maWx0ZXIoZSx0KXtyZXR1cm4gdGhpcy5faXRlbXMuZmlsdGVyKGUsdCl9Y2xlYXIoKXtmb3IodGhpcy5fYmluZFRvQ29sbGVjdGlvbiYmKHRoaXMuc3RvcExpc3RlbmluZyh0aGlzLl9iaW5kVG9Db2xsZWN0aW9uKSx0aGlzLl9iaW5kVG9Db2xsZWN0aW9uPW51bGwpO3RoaXMubGVuZ3RoOyl0aGlzLnJlbW92ZSgwKX1iaW5kVG8oZSl7aWYodGhpcy5fYmluZFRvQ29sbGVjdGlvbil0aHJvdyBuZXcgWmEoJ2NvbGxlY3Rpb24tYmluZC10by1yZWJpbmQ6IFRoZSBjb2xsZWN0aW9uIGNhbm5vdCBiZSBib3VuZCBtb3JlIHRoYW4gb25jZS4nKTtyZXR1cm4gdGhpcy5fYmluZFRvQ29sbGVjdGlvbj1lLHthczooZSk9Pnt0aGlzLl9zZXRVcEJpbmRUb0JpbmRpbmcoKHQpPT5uZXcgZSh0KSl9LHVzaW5nOihlKT0+eydmdW5jdGlvbic9PXR5cGVvZiBlP3RoaXMuX3NldFVwQmluZFRvQmluZGluZygodCk9PmUodCkpOnRoaXMuX3NldFVwQmluZFRvQmluZGluZygodCk9PnRbZV0pfX19X3NldFVwQmluZFRvQmluZGluZyhlKXtjb25zdCB0PXRoaXMuX2JpbmRUb0NvbGxlY3Rpb24sbz0obyxuLGkpPT57Y29uc3Qgcj10Ll9iaW5kVG9Db2xsZWN0aW9uPT10aGlzLGE9dC5fYmluZFRvSW50ZXJuYWxUb0V4dGVybmFsTWFwLmdldChuKTtpZihyJiZhKXRoaXMuX2JpbmRUb0V4dGVybmFsVG9JbnRlcm5hbE1hcC5zZXQobixhKSx0aGlzLl9iaW5kVG9JbnRlcm5hbFRvRXh0ZXJuYWxNYXAuc2V0KGEsbik7ZWxzZXtjb25zdCBvPWUobik7aWYoIW8pcmV0dXJuIHZvaWQgdGhpcy5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWwucHVzaChpKTtsZXQgcj1pO2Zvcihjb25zdCBlIG9mIHRoaXMuX3NraXBwZWRJbmRleGVzRnJvbUV4dGVybmFsKWk+ZSYmci0tO2Zvcihjb25zdCBlIG9mIHQuX3NraXBwZWRJbmRleGVzRnJvbUV4dGVybmFsKXI+PWUmJnIrKzt0aGlzLl9iaW5kVG9FeHRlcm5hbFRvSW50ZXJuYWxNYXAuc2V0KG4sbyksdGhpcy5fYmluZFRvSW50ZXJuYWxUb0V4dGVybmFsTWFwLnNldChvLG4pLHRoaXMuYWRkKG8scik7Zm9yKGxldCBlPTA7ZTx0Ll9za2lwcGVkSW5kZXhlc0Zyb21FeHRlcm5hbC5sZW5ndGg7ZSsrKXI8PXQuX3NraXBwZWRJbmRleGVzRnJvbUV4dGVybmFsW2VdJiZ0Ll9za2lwcGVkSW5kZXhlc0Zyb21FeHRlcm5hbFtlXSsrfX07Zm9yKGNvbnN0IG4gb2YgdClvKG51bGwsbix0LmdldEluZGV4KG4pKTt0aGlzLmxpc3RlblRvKHQsJ2FkZCcsbyksdGhpcy5saXN0ZW5Ubyh0LCdyZW1vdmUnLChlLHQsbyk9Pntjb25zdCBuPXRoaXMuX2JpbmRUb0V4dGVybmFsVG9JbnRlcm5hbE1hcC5nZXQodCk7biYmdGhpcy5yZW1vdmUobiksdGhpcy5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWw9dGhpcy5fc2tpcHBlZEluZGV4ZXNGcm9tRXh0ZXJuYWwucmVkdWNlKChlLHQpPT4obzx0JiZlLnB1c2godC0xKSxvPnQmJmUucHVzaCh0KSxlKSxbXSl9KX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLl9pdGVtc1tTeW1ib2wuaXRlcmF0b3JdKCl9fWYoUGMsc3MpO2NsYXNzIEVje2NvbnN0cnVjdG9yKCl7dGhpcy5zZWxlY3Rpb249bmV3IFRjLHRoaXMucm9vdHM9bmV3IFBjKHtpZFByb3BlcnR5Oidyb290TmFtZSd9KSx0aGlzLnNldCgnaXNSZWFkT25seScsITEpLHRoaXMuc2V0KCdpc0ZvY3VzZWQnLCExKSx0aGlzLnNldCgnaXNDb21wb3NpbmcnLCExKSx0aGlzLl9wb3N0Rml4ZXJzPW5ldyBTZXR9Z2V0Um9vdChlPSdtYWluJyl7cmV0dXJuIHRoaXMucm9vdHMuZ2V0KGUpfXJlZ2lzdGVyUG9zdEZpeGVyKGUpe3RoaXMuX3Bvc3RGaXhlcnMuYWRkKGUpfV9jYWxsUG9zdEZpeGVycyhlKXtsZXQgdD0hMTtkbyBmb3IoY29uc3QgbyBvZiB0aGlzLl9wb3N0Rml4ZXJzKWlmKHQ9byhlKSx0KWJyZWFrO3doaWxlKHQpfX1mKEVjLGJjKTtjb25zdCBTYz0xMDtjbGFzcyBPYyBleHRlbmRzIFZke2NvbnN0cnVjdG9yKGUsdCxvKXtzdXBlcihlLHQsbyksdGhpcy5nZXRGaWxsZXJPZmZzZXQ9WCx0aGlzLl9wcmlvcml0eT1TYyx0aGlzLl9pZD1udWxsLHRoaXMuX2Nsb25lc0dyb3VwPW51bGx9Z2V0IHByaW9yaXR5KCl7cmV0dXJuIHRoaXMuX3ByaW9yaXR5fWdldCBpZCgpe3JldHVybiB0aGlzLl9pZH1nZXRFbGVtZW50c1dpdGhTYW1lSWQoKXtpZihudWxsPT09dGhpcy5pZCl0aHJvdyBuZXcgWmEoJ2F0dHJpYnV0ZS1lbGVtZW50LWdldC1lbGVtZW50cy13aXRoLXNhbWUtaWQtbm8taWQ6IENhbm5vdCBnZXQgZWxlbWVudHMgd2l0aCB0aGUgc2FtZSBpZCBmb3IgYW4gYXR0cmlidXRlIGVsZW1lbnQgd2l0aG91dCBpZC4nKTtyZXR1cm4gbmV3IFNldCh0aGlzLl9jbG9uZXNHcm91cCl9aXMoZSx0PW51bGwpe3JldHVybiB0PydhdHRyaWJ1dGVFbGVtZW50Jz09ZSYmdD09dGhpcy5uYW1lfHxzdXBlci5pcyhlLHQpOidhdHRyaWJ1dGVFbGVtZW50Jz09ZXx8c3VwZXIuaXMoZSl9aXNTaW1pbGFyKGUpe3JldHVybiBudWxsIT09dGhpcy5pZHx8bnVsbCE9PWUuaWQ/dGhpcy5pZD09PWUuaWQ6c3VwZXIuaXNTaW1pbGFyKGUpJiZ0aGlzLnByaW9yaXR5PT1lLnByaW9yaXR5fV9jbG9uZShlKXtjb25zdCB0PXN1cGVyLl9jbG9uZShlKTtyZXR1cm4gdC5fcHJpb3JpdHk9dGhpcy5fcHJpb3JpdHksdC5faWQ9dGhpcy5faWQsdH19T2MuREVGQVVMVF9QUklPUklUWT1TYztjbGFzcyBSYyBleHRlbmRzIFZke2NvbnN0cnVjdG9yKGUsdCxvKXtzdXBlcihlLHQsbyksdGhpcy5nZXRGaWxsZXJPZmZzZXQ9ZWV9aXMoZSx0PW51bGwpe3JldHVybiB0PydlbXB0eUVsZW1lbnQnPT1lJiZ0PT10aGlzLm5hbWV8fHN1cGVyLmlzKGUsdCk6J2VtcHR5RWxlbWVudCc9PWV8fHN1cGVyLmlzKGUpfV9pbnNlcnRDaGlsZChlLHQpe2lmKHQmJih0IGluc3RhbmNlb2YgU2R8fDA8QXJyYXkuZnJvbSh0KS5sZW5ndGgpKXRocm93IG5ldyBaYSgndmlldy1lbXB0eWVsZW1lbnQtY2Fubm90LWFkZDogQ2Fubm90IGFkZCBjaGlsZCBub2RlcyB0byBFbXB0eUVsZW1lbnQgaW5zdGFuY2UuJyl9fWNvbnN0IEljPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxWYz17aXNNYWM6ZnVuY3Rpb24oZSl7cmV0dXJuLTE8ZS5pbmRleE9mKCdtYWNpbnRvc2gnKX0oSWMpfTt2YXIgRmM9VmM7Y29uc3QgTmM9e1wi4oyYXCI6J2N0cmwnLFwi4oenXCI6J3NoaWZ0JyxcIuKMpVwiOidhbHQnfSxNYz17Y3RybDonXFx1MjMxOCcsc2hpZnQ6J1xcdTIxRTcnLGFsdDonXFx1MjMyNSd9LERjPWZ1bmN0aW9uKCl7Y29uc3QgZT17YXJyb3dsZWZ0OjM3LGFycm93dXA6MzgsYXJyb3dyaWdodDozOSxhcnJvd2Rvd246NDAsYmFja3NwYWNlOjgsZGVsZXRlOjQ2LGVudGVyOjEzLHNwYWNlOjMyLGVzYzoyNyx0YWI6OSxjdHJsOjExMTQxMTIsY21kOjExMTQxMTIsc2hpZnQ6MjIyODIyNCxhbHQ6NDQ1NjQ0OH07Zm9yKGxldCB0PTY1OzkwPj10O3QrKyl7Y29uc3Qgbz1TdHJpbmcuZnJvbUNoYXJDb2RlKHQpO2Vbby50b0xvd2VyQ2FzZSgpXT10fWZvcihsZXQgdD00ODs1Nz49dDt0KyspZVt0LTQ4XT10O2ZvcihsZXQgdD0xMTI7MTIzPj10O3QrKyllWydmJysodC0xMTEpXT10O3JldHVybiBlfSgpO2NsYXNzIEJjIGV4dGVuZHMgVmR7Y29uc3RydWN0b3IoZSx0LG8pe3N1cGVyKGUsdCxvKSx0aGlzLmdldEZpbGxlck9mZnNldD1hZX1pcyhlLHQ9bnVsbCl7cmV0dXJuIHQ/J3VpRWxlbWVudCc9PWUmJnQ9PXRoaXMubmFtZXx8c3VwZXIuaXMoZSx0KTondWlFbGVtZW50Jz09ZXx8c3VwZXIuaXMoZSl9X2luc2VydENoaWxkKGUsdCl7aWYodCYmKHQgaW5zdGFuY2VvZiBTZHx8MDxBcnJheS5mcm9tKHQpLmxlbmd0aCkpdGhyb3cgbmV3IFphKCd2aWV3LXVpZWxlbWVudC1jYW5ub3QtYWRkOiBDYW5ub3QgYWRkIGNoaWxkIG5vZGVzIHRvIFVJRWxlbWVudCBpbnN0YW5jZS4nKX1yZW5kZXIoZSl7cmV0dXJuIHRoaXMudG9Eb21FbGVtZW50KGUpfXRvRG9tRWxlbWVudChlKXtjb25zdCB0PWUuY3JlYXRlRWxlbWVudCh0aGlzLm5hbWUpO2Zvcihjb25zdCBvIG9mIHRoaXMuZ2V0QXR0cmlidXRlS2V5cygpKXQuc2V0QXR0cmlidXRlKG8sdGhpcy5nZXRBdHRyaWJ1dGUobykpO3JldHVybiB0fX1jbGFzcyBMY3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9jaGlsZHJlbj1bXSxlJiZ0aGlzLl9pbnNlcnRDaGlsZCgwLGUpfVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKX1nZXQgY2hpbGRDb3VudCgpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5sZW5ndGh9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMuY2hpbGRDb3VudH1nZXQgcm9vdCgpe3JldHVybiB0aGlzfWdldCBwYXJlbnQoKXtyZXR1cm4gbnVsbH1pcyhlKXtyZXR1cm4nZG9jdW1lbnRGcmFnbWVudCc9PWV9X2FwcGVuZENoaWxkKGUpe3JldHVybiB0aGlzLl9pbnNlcnRDaGlsZCh0aGlzLmNoaWxkQ291bnQsZSl9Z2V0Q2hpbGQoZSl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW2VdfWdldENoaWxkSW5kZXgoZSl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLmluZGV4T2YoZSl9Z2V0Q2hpbGRyZW4oKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW5bU3ltYm9sLml0ZXJhdG9yXSgpfV9pbnNlcnRDaGlsZChlLHQpe3RoaXMuX2ZpcmVDaGFuZ2UoJ2NoaWxkcmVuJyx0aGlzKTtsZXQgbz0wO2NvbnN0IG49bGUodCk7Zm9yKGNvbnN0IGkgb2YgbiludWxsIT09aS5wYXJlbnQmJmkuX3JlbW92ZSgpLGkucGFyZW50PXRoaXMsdGhpcy5fY2hpbGRyZW4uc3BsaWNlKGUsMCxpKSxlKyssbysrO3JldHVybiBvfV9yZW1vdmVDaGlsZHJlbihlLHQ9MSl7dGhpcy5fZmlyZUNoYW5nZSgnY2hpbGRyZW4nLHRoaXMpO2ZvcihsZXQgbz1lO288ZSt0O28rKyl0aGlzLl9jaGlsZHJlbltvXS5wYXJlbnQ9bnVsbDtyZXR1cm4gdGhpcy5fY2hpbGRyZW4uc3BsaWNlKGUsdCl9X2ZpcmVDaGFuZ2UoZSx0KXt0aGlzLmZpcmUoJ2NoYW5nZTonK2UsdCl9fWYoTGMsc3MpO2NsYXNzIHpje2NvbnN0cnVjdG9yKGUpe3RoaXMuZG9jdW1lbnQ9ZSx0aGlzLl9jbG9uZUdyb3Vwcz1uZXcgTWFwfXNldFNlbGVjdGlvbihlLHQsbyl7dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24uX3NldFRvKGUsdCxvKX1zZXRTZWxlY3Rpb25Gb2N1cyhlLHQpe3RoaXMuZG9jdW1lbnQuc2VsZWN0aW9uLl9zZXRGb2N1cyhlLHQpfWNyZWF0ZVRleHQoZSl7cmV0dXJuIG5ldyBPZChlKX1jcmVhdGVBdHRyaWJ1dGVFbGVtZW50KGUsdCxvPXt9KXtjb25zdCBuPW5ldyBPYyhlLHQpO3JldHVybiBvLnByaW9yaXR5JiYobi5fcHJpb3JpdHk9by5wcmlvcml0eSksby5pZCYmKG4uX2lkPW8uaWQpLG59Y3JlYXRlQ29udGFpbmVyRWxlbWVudChlLHQpe3JldHVybiBuZXcgRmQoZSx0KX1jcmVhdGVFZGl0YWJsZUVsZW1lbnQoZSx0KXtjb25zdCBvPW5ldyBfYyhlLHQpO3JldHVybiBvLl9kb2N1bWVudD10aGlzLmRvY3VtZW50LG99Y3JlYXRlRW1wdHlFbGVtZW50KGUsdCl7cmV0dXJuIG5ldyBSYyhlLHQpfWNyZWF0ZVVJRWxlbWVudChlLHQsbyl7Y29uc3Qgbj1uZXcgQmMoZSx0KTtyZXR1cm4gbyYmKG4ucmVuZGVyPW8pLG59c2V0QXR0cmlidXRlKGUsdCxvKXtvLl9zZXRBdHRyaWJ1dGUoZSx0KX1yZW1vdmVBdHRyaWJ1dGUoZSx0KXt0Ll9yZW1vdmVBdHRyaWJ1dGUoZSl9YWRkQ2xhc3MoZSx0KXt0Ll9hZGRDbGFzcyhlKX1yZW1vdmVDbGFzcyhlLHQpe3QuX3JlbW92ZUNsYXNzKGUpfXNldFN0eWxlKGUsdCxvKXtRYShlKSYmbz09PXZvaWQgMCYmKG89dCksby5fc2V0U3R5bGUoZSx0KX1yZW1vdmVTdHlsZShlLHQpe3QuX3JlbW92ZVN0eWxlKGUpfXNldEN1c3RvbVByb3BlcnR5KGUsdCxvKXtvLl9zZXRDdXN0b21Qcm9wZXJ0eShlLHQpfXJlbW92ZUN1c3RvbVByb3BlcnR5KGUsdCl7cmV0dXJuIHQuX3JlbW92ZUN1c3RvbVByb3BlcnR5KGUpfWJyZWFrQXR0cmlidXRlcyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHhjP3RoaXMuX2JyZWFrQXR0cmlidXRlcyhlKTp0aGlzLl9icmVha0F0dHJpYnV0ZXNSYW5nZShlKX1icmVha0NvbnRhaW5lcihlKXtjb25zdCB0PWUucGFyZW50O2lmKCF0LmlzKCdjb250YWluZXJFbGVtZW50JykpdGhyb3cgbmV3IFphKCd2aWV3LXdyaXRlci1icmVhay1ub24tY29udGFpbmVyLWVsZW1lbnQ6IFRyeWluZyB0byBicmVhayBhbiBlbGVtZW50IHdoaWNoIGlzIG5vdCBhIGNvbnRhaW5lciBlbGVtZW50LicpO2lmKCF0LnBhcmVudCl0aHJvdyBuZXcgWmEoJ3ZpZXctd3JpdGVyLWJyZWFrLXJvb3Q6IFRyeWluZyB0byBicmVhayByb290IGVsZW1lbnQuJyk7aWYoZS5pc0F0U3RhcnQpcmV0dXJuIHhjLmNyZWF0ZUJlZm9yZSh0KTtpZighZS5pc0F0RW5kKXtjb25zdCBvPXQuX2Nsb25lKCExKTt0aGlzLmluc2VydCh4Yy5jcmVhdGVBZnRlcih0KSxvKTtjb25zdCBuPW5ldyBDYyhlLHhjLmNyZWF0ZUF0KHQsJ2VuZCcpKSxpPW5ldyB4YyhvLDApO3RoaXMubW92ZShuLGkpfXJldHVybiB4Yy5jcmVhdGVBZnRlcih0KX1tZXJnZUF0dHJpYnV0ZXMoZSl7Y29uc3QgdD1lLm9mZnNldCxvPWUucGFyZW50O2lmKG8uaXMoJ3RleHQnKSlyZXR1cm4gZTtpZihvLmlzKCdhdHRyaWJ1dGVFbGVtZW50JykmJjA9PT1vLmNoaWxkQ291bnQpe2NvbnN0IGU9by5wYXJlbnQsdD1vLmluZGV4O3JldHVybiBvLl9yZW1vdmUoKSx0aGlzLl9yZW1vdmVGcm9tQ2xvbmVkRWxlbWVudHNHcm91cChvKSx0aGlzLm1lcmdlQXR0cmlidXRlcyhuZXcgeGMoZSx0KSl9Y29uc3Qgbj1vLmdldENoaWxkKHQtMSksaT1vLmdldENoaWxkKHQpO2lmKCFufHwhaSlyZXR1cm4gZTtpZihuLmlzKCd0ZXh0JykmJmkuaXMoJ3RleHQnKSlyZXR1cm4gZ2UobixpKTtpZihuLmlzKCdhdHRyaWJ1dGVFbGVtZW50JykmJmkuaXMoJ2F0dHJpYnV0ZUVsZW1lbnQnKSYmbi5pc1NpbWlsYXIoaSkpe2NvbnN0IGU9bi5jaGlsZENvdW50O3JldHVybiBuLl9hcHBlbmRDaGlsZChpLmdldENoaWxkcmVuKCkpLGkuX3JlbW92ZSgpLHRoaXMuX3JlbW92ZUZyb21DbG9uZWRFbGVtZW50c0dyb3VwKGkpLHRoaXMubWVyZ2VBdHRyaWJ1dGVzKG5ldyB4YyhuLGUpKX1yZXR1cm4gZX1tZXJnZUNvbnRhaW5lcnMoZSl7Y29uc3QgdD1lLm5vZGVCZWZvcmUsbz1lLm5vZGVBZnRlcjtpZighdHx8IW98fCF0LmlzKCdjb250YWluZXJFbGVtZW50Jyl8fCFvLmlzKCdjb250YWluZXJFbGVtZW50JykpdGhyb3cgbmV3IFphKCd2aWV3LXdyaXRlci1tZXJnZS1jb250YWluZXJzLWludmFsaWQtcG9zaXRpb246IEVsZW1lbnQgYmVmb3JlIGFuZCBhZnRlciBnaXZlbiBwb3NpdGlvbiBjYW5ub3QgYmUgbWVyZ2VkLicpO2NvbnN0IG49dC5nZXRDaGlsZCh0LmNoaWxkQ291bnQtMSksaT1uIGluc3RhbmNlb2YgT2Q/eGMuY3JlYXRlQXQobiwnZW5kJyk6eGMuY3JlYXRlQXQodCwnZW5kJyk7cmV0dXJuIHRoaXMubW92ZShDYy5jcmVhdGVJbihvKSx4Yy5jcmVhdGVBdCh0LCdlbmQnKSksdGhpcy5yZW1vdmUoQ2MuY3JlYXRlT24obykpLGl9aW5zZXJ0KGUsdCl7dD1QKHQpP1suLi50XTpbdF0saGUodCk7Y29uc3Qgbz1jZShlKTtpZighbyl0aHJvdyBuZXcgWmEoJ3ZpZXctd3JpdGVyLWludmFsaWQtcG9zaXRpb24tY29udGFpbmVyJyk7Y29uc3Qgbj10aGlzLl9icmVha0F0dHJpYnV0ZXMoZSwhMCksaT1vLl9pbnNlcnRDaGlsZChuLm9mZnNldCx0KTtmb3IoY29uc3QgbyBvZiB0KXRoaXMuX2FkZFRvQ2xvbmVkRWxlbWVudHNHcm91cChvKTtjb25zdCByPW4uZ2V0U2hpZnRlZEJ5KGkpLGE9dGhpcy5tZXJnZUF0dHJpYnV0ZXMobik7aWYoMD09PWkpcmV0dXJuIG5ldyBDYyhhLGEpO2Vsc2V7YS5pc0VxdWFsKG4pfHxyLm9mZnNldC0tO2NvbnN0IGU9dGhpcy5tZXJnZUF0dHJpYnV0ZXMocik7cmV0dXJuIG5ldyBDYyhhLGUpfX1yZW1vdmUoZSl7aWYoa2UoZSksZS5pc0NvbGxhcHNlZClyZXR1cm4gbmV3IExjO2NvbnN0e3N0YXJ0OnQsZW5kOm99PXRoaXMuX2JyZWFrQXR0cmlidXRlc1JhbmdlKGUsITApLG49dC5wYXJlbnQsaT1vLm9mZnNldC10Lm9mZnNldCxyPW4uX3JlbW92ZUNoaWxkcmVuKHQub2Zmc2V0LGkpO2Zvcihjb25zdCB0IG9mIHIpdGhpcy5fcmVtb3ZlRnJvbUNsb25lZEVsZW1lbnRzR3JvdXAodCk7Y29uc3QgYT10aGlzLm1lcmdlQXR0cmlidXRlcyh0KTtyZXR1cm4gZS5zdGFydD1hLGUuZW5kPXhjLmNyZWF0ZUZyb21Qb3NpdGlvbihhKSxuZXcgTGMocil9Y2xlYXIoZSx0KXtrZShlKTtjb25zdCBvPWUuZ2V0V2Fsa2VyKHtkaXJlY3Rpb246J2JhY2t3YXJkJyxpZ25vcmVFbGVtZW50RW5kOiEwfSk7Zm9yKGNvbnN0IG4gb2Ygbyl7Y29uc3Qgbz1uLml0ZW07bGV0IGk7aWYoby5pcygnZWxlbWVudCcpJiZ0LmlzU2ltaWxhcihvKSlpPUNjLmNyZWF0ZU9uKG8pO2Vsc2UgaWYoIW4ubmV4dFBvc2l0aW9uLmlzQWZ0ZXIoZS5zdGFydCkmJm8uaXMoJ3RleHRQcm94eScpKXtjb25zdCBlPW8uZ2V0QW5jZXN0b3JzKCkuZmluZCgoZSk9PmUuaXMoJ2VsZW1lbnQnKSYmdC5pc1NpbWlsYXIoZSkpO2UmJihpPUNjLmNyZWF0ZUluKGUpKX1pJiYoaS5lbmQuaXNBZnRlcihlLmVuZCkmJihpLmVuZD1lLmVuZCksaS5zdGFydC5pc0JlZm9yZShlLnN0YXJ0KSYmKGkuc3RhcnQ9ZS5zdGFydCksdGhpcy5yZW1vdmUoaSkpfX1tb3ZlKGUsdCl7bGV0IG87aWYodC5pc0FmdGVyKGUuZW5kKSl7dD10aGlzLl9icmVha0F0dHJpYnV0ZXModCwhMCk7Y29uc3Qgbj10LnBhcmVudCxpPW4uY2hpbGRDb3VudDtlPXRoaXMuX2JyZWFrQXR0cmlidXRlc1JhbmdlKGUsITApLG89dGhpcy5yZW1vdmUoZSksdC5vZmZzZXQrPW4uY2hpbGRDb3VudC1pfWVsc2Ugbz10aGlzLnJlbW92ZShlKTtyZXR1cm4gdGhpcy5pbnNlcnQodCxvKX13cmFwKGUsdCl7aWYoISh0IGluc3RhbmNlb2YgT2MpKXRocm93IG5ldyBaYSgndmlldy13cml0ZXItd3JhcC1pbnZhbGlkLWF0dHJpYnV0ZScpO2lmKGtlKGUpLCFlLmlzQ29sbGFwc2VkKXJldHVybiB0aGlzLl93cmFwUmFuZ2UoZSx0KTtlbHNle2xldCBvPWUuc3RhcnQ7by5wYXJlbnQuaXMoJ2VsZW1lbnQnKSYmIWRlKG8ucGFyZW50KSYmKG89by5nZXRMYXN0TWF0Y2hpbmdQb3NpdGlvbigoZSk9PmUuaXRlbS5pcygndWlFbGVtZW50JykpKSxvPXRoaXMuX3dyYXBQb3NpdGlvbihvLHQpO2NvbnN0IG49dGhpcy5kb2N1bWVudC5zZWxlY3Rpb247cmV0dXJuIG4uaXNDb2xsYXBzZWQmJm4uZ2V0Rmlyc3RQb3NpdGlvbigpLmlzRXF1YWwoZS5zdGFydCkmJnRoaXMuc2V0U2VsZWN0aW9uKG8pLG5ldyBDYyhvKX19dW53cmFwKGUsdCl7aWYoISh0IGluc3RhbmNlb2YgT2MpKXRocm93IG5ldyBaYSgndmlldy13cml0ZXItdW53cmFwLWludmFsaWQtYXR0cmlidXRlJyk7aWYoa2UoZSksZS5pc0NvbGxhcHNlZClyZXR1cm4gZTtjb25zdHtzdGFydDpvLGVuZDpufT10aGlzLl9icmVha0F0dHJpYnV0ZXNSYW5nZShlLCEwKTtpZihuLmlzRXF1YWwoby5nZXRTaGlmdGVkQnkoMSkpKXtjb25zdCBlPW8ubm9kZUFmdGVyO2lmKCF0LmlzU2ltaWxhcihlKSYmZSBpbnN0YW5jZW9mIE9jJiZ0aGlzLl91bndyYXBBdHRyaWJ1dGVFbGVtZW50KHQsZSkpe2NvbnN0IGU9dGhpcy5tZXJnZUF0dHJpYnV0ZXMobyk7ZS5pc0VxdWFsKG8pfHxuLm9mZnNldC0tO2NvbnN0IHQ9dGhpcy5tZXJnZUF0dHJpYnV0ZXMobik7cmV0dXJuIG5ldyBDYyhlLHQpfX1jb25zdCBpPW8ucGFyZW50LHI9dGhpcy5fdW53cmFwQ2hpbGRyZW4oaSxvLm9mZnNldCxuLm9mZnNldCx0KSxhPXRoaXMubWVyZ2VBdHRyaWJ1dGVzKHIuc3RhcnQpO2EuaXNFcXVhbChyLnN0YXJ0KXx8ci5lbmQub2Zmc2V0LS07Y29uc3Qgcz10aGlzLm1lcmdlQXR0cmlidXRlcyhyLmVuZCk7cmV0dXJuIG5ldyBDYyhhLHMpfXJlbmFtZShlLHQpe2NvbnN0IG89bmV3IEZkKHQsZS5nZXRBdHRyaWJ1dGVzKCkpO3JldHVybiB0aGlzLmluc2VydCh4Yy5jcmVhdGVBZnRlcihlKSxvKSx0aGlzLm1vdmUoQ2MuY3JlYXRlSW4oZSkseGMuY3JlYXRlQXQobykpLHRoaXMucmVtb3ZlKENjLmNyZWF0ZU9uKGUpKSxvfV93cmFwQ2hpbGRyZW4oZSx0LG8sbil7bGV0IHI9dDtjb25zdCBpPVtdO2Zvcig7cjxvOyl7Y29uc3QgdD1lLmdldENoaWxkKHIpLG89dC5pcygndGV4dCcpLGE9dC5pcygnYXR0cmlidXRlRWxlbWVudCcpLHM9dC5pcygnZW1wdHlFbGVtZW50JyksbD10LmlzKCd1aUVsZW1lbnQnKTtpZihvfHxzfHxsfHxhJiZ1ZShuLHQpKXtjb25zdCBvPW4uX2Nsb25lKCk7dC5fcmVtb3ZlKCksby5fYXBwZW5kQ2hpbGQodCksZS5faW5zZXJ0Q2hpbGQocixvKSx0aGlzLl9hZGRUb0Nsb25lZEVsZW1lbnRzR3JvdXAobyksaS5wdXNoKG5ldyB4YyhlLHIpKX1lbHNlIGEmJnRoaXMuX3dyYXBDaGlsZHJlbih0LDAsdC5jaGlsZENvdW50LG4pO3IrK31sZXQgYT0wO2Zvcihjb25zdCByIG9mIGkpe2lmKHIub2Zmc2V0LT1hLHIub2Zmc2V0PT10KWNvbnRpbnVlO2NvbnN0IGU9dGhpcy5tZXJnZUF0dHJpYnV0ZXMocik7ZS5pc0VxdWFsKHIpfHwoYSsrLG8tLSl9cmV0dXJuIENjLmNyZWF0ZUZyb21QYXJlbnRzQW5kT2Zmc2V0cyhlLHQsZSxvKX1fdW53cmFwQ2hpbGRyZW4oZSx0LG8sbil7bGV0IHI9dDtjb25zdCBpPVtdO2Zvcig7cjxvOyl7Y29uc3QgdD1lLmdldENoaWxkKHIpO2lmKHQuaXNTaW1pbGFyKG4pKXtjb25zdCBuPXQuZ2V0Q2hpbGRyZW4oKSxhPXQuY2hpbGRDb3VudDt0Ll9yZW1vdmUoKSxlLl9pbnNlcnRDaGlsZChyLG4pLHRoaXMuX3JlbW92ZUZyb21DbG9uZWRFbGVtZW50c0dyb3VwKHQpLGkucHVzaChuZXcgeGMoZSxyKSxuZXcgeGMoZSxyK2EpKSxyKz1hLG8rPWEtMX1lbHNlIHQuaXMoJ2F0dHJpYnV0ZUVsZW1lbnQnKSYmdGhpcy5fdW53cmFwQ2hpbGRyZW4odCwwLHQuY2hpbGRDb3VudCxuKSxyKyt9bGV0IGE9MDtmb3IoY29uc3QgciBvZiBpKXtpZihyLm9mZnNldC09YSxyLm9mZnNldD09dHx8ci5vZmZzZXQ9PW8pY29udGludWU7Y29uc3QgZT10aGlzLm1lcmdlQXR0cmlidXRlcyhyKTtlLmlzRXF1YWwocil8fChhKyssby0tKX1yZXR1cm4gQ2MuY3JlYXRlRnJvbVBhcmVudHNBbmRPZmZzZXRzKGUsdCxlLG8pfV93cmFwUmFuZ2UoZSx0KXtpZihmZShlKSYmdGhpcy5fd3JhcEF0dHJpYnV0ZUVsZW1lbnQodCxlLnN0YXJ0LnBhcmVudCkpe2NvbnN0IHQ9ZS5zdGFydC5wYXJlbnQsbz10aGlzLm1lcmdlQXR0cmlidXRlcyh4Yy5jcmVhdGVBZnRlcih0KSksbj10aGlzLm1lcmdlQXR0cmlidXRlcyh4Yy5jcmVhdGVCZWZvcmUodCkpO3JldHVybiBuZXcgQ2MobixvKX1jb25zdHtzdGFydDpvLGVuZDpufT10aGlzLl9icmVha0F0dHJpYnV0ZXNSYW5nZShlLCEwKTtpZihuLmlzRXF1YWwoby5nZXRTaGlmdGVkQnkoMSkpKXtjb25zdCBlPW8ubm9kZUFmdGVyO2lmKGUgaW5zdGFuY2VvZiBPYyYmdGhpcy5fd3JhcEF0dHJpYnV0ZUVsZW1lbnQodCxlKSl7Y29uc3QgZT10aGlzLm1lcmdlQXR0cmlidXRlcyhvKTtlLmlzRXF1YWwobyl8fG4ub2Zmc2V0LS07Y29uc3QgdD10aGlzLm1lcmdlQXR0cmlidXRlcyhuKTtyZXR1cm4gbmV3IENjKGUsdCl9fWNvbnN0IGk9by5wYXJlbnQscj10aGlzLl91bndyYXBDaGlsZHJlbihpLG8ub2Zmc2V0LG4ub2Zmc2V0LHQpLGE9dGhpcy5fd3JhcENoaWxkcmVuKGksci5zdGFydC5vZmZzZXQsci5lbmQub2Zmc2V0LHQpLHM9dGhpcy5tZXJnZUF0dHJpYnV0ZXMoYS5zdGFydCk7cy5pc0VxdWFsKGEuc3RhcnQpfHxhLmVuZC5vZmZzZXQtLTtjb25zdCBsPXRoaXMubWVyZ2VBdHRyaWJ1dGVzKGEuZW5kKTtyZXR1cm4gbmV3IENjKHMsbCl9X3dyYXBQb3NpdGlvbihlLHQpe2lmKHQuaXNTaW1pbGFyKGUucGFyZW50KSlyZXR1cm4gbWUoeGMuY3JlYXRlRnJvbVBvc2l0aW9uKGUpKTtlLnBhcmVudC5pcygndGV4dCcpJiYoZT1wZShlKSk7Y29uc3Qgbz10aGlzLmNyZWF0ZUF0dHJpYnV0ZUVsZW1lbnQoKTtvLl9wcmlvcml0eT1EYSxvLmlzU2ltaWxhcj0oKT0+ITEsZS5wYXJlbnQuX2luc2VydENoaWxkKGUub2Zmc2V0LG8pO2NvbnN0IG49bmV3IENjKGUsZS5nZXRTaGlmdGVkQnkoMSkpO3RoaXMud3JhcChuLHQpO2NvbnN0IGk9bmV3IHhjKG8ucGFyZW50LG8uaW5kZXgpO28uX3JlbW92ZSgpO2NvbnN0IHI9aS5ub2RlQmVmb3JlLGE9aS5ub2RlQWZ0ZXI7cmV0dXJuIHIgaW5zdGFuY2VvZiBPZCYmYSBpbnN0YW5jZW9mIE9kP2dlKHIsYSk6bWUoaSl9X3dyYXBBdHRyaWJ1dGVFbGVtZW50KGUsdCl7aWYoIV9lKGUsdCkpcmV0dXJuITE7aWYoZS5uYW1lIT09dC5uYW1lfHxlLnByaW9yaXR5IT09dC5wcmlvcml0eSlyZXR1cm4hMTtmb3IoY29uc3QgbyBvZiBlLmdldEF0dHJpYnV0ZUtleXMoKSlpZignY2xhc3MnIT09byYmJ3N0eWxlJyE9PW8mJnQuaGFzQXR0cmlidXRlKG8pJiZ0LmdldEF0dHJpYnV0ZShvKSE9PWUuZ2V0QXR0cmlidXRlKG8pKXJldHVybiExO2Zvcihjb25zdCBvIG9mIGUuZ2V0U3R5bGVOYW1lcygpKWlmKHQuaGFzU3R5bGUobykmJnQuZ2V0U3R5bGUobykhPT1lLmdldFN0eWxlKG8pKXJldHVybiExO2Zvcihjb25zdCBvIG9mIGUuZ2V0QXR0cmlidXRlS2V5cygpKSdjbGFzcychPT1vJiYnc3R5bGUnIT09byYmKHQuaGFzQXR0cmlidXRlKG8pfHx0aGlzLnNldEF0dHJpYnV0ZShvLGUuZ2V0QXR0cmlidXRlKG8pLHQpKTtmb3IoY29uc3QgbyBvZiBlLmdldFN0eWxlTmFtZXMoKSl0Lmhhc1N0eWxlKG8pfHx0aGlzLnNldFN0eWxlKG8sZS5nZXRTdHlsZShvKSx0KTtmb3IoY29uc3QgbyBvZiBlLmdldENsYXNzTmFtZXMoKSl0Lmhhc0NsYXNzKG8pfHx0aGlzLmFkZENsYXNzKG8sdCk7cmV0dXJuITB9X3Vud3JhcEF0dHJpYnV0ZUVsZW1lbnQoZSx0KXtpZighX2UoZSx0KSlyZXR1cm4hMTtpZihlLm5hbWUhPT10Lm5hbWV8fGUucHJpb3JpdHkhPT10LnByaW9yaXR5KXJldHVybiExO2Zvcihjb25zdCBvIG9mIGUuZ2V0QXR0cmlidXRlS2V5cygpKWlmKCdjbGFzcychPT1vJiYnc3R5bGUnIT09byYmKCF0Lmhhc0F0dHJpYnV0ZShvKXx8dC5nZXRBdHRyaWJ1dGUobykhPT1lLmdldEF0dHJpYnV0ZShvKSkpcmV0dXJuITE7aWYoIXQuaGFzQ2xhc3MoLi4uZS5nZXRDbGFzc05hbWVzKCkpKXJldHVybiExO2Zvcihjb25zdCBvIG9mIGUuZ2V0U3R5bGVOYW1lcygpKWlmKCF0Lmhhc1N0eWxlKG8pfHx0LmdldFN0eWxlKG8pIT09ZS5nZXRTdHlsZShvKSlyZXR1cm4hMTtmb3IoY29uc3QgbyBvZiBlLmdldEF0dHJpYnV0ZUtleXMoKSknY2xhc3MnIT09byYmJ3N0eWxlJyE9PW8mJnRoaXMucmVtb3ZlQXR0cmlidXRlKG8sdCk7cmV0dXJuIHRoaXMucmVtb3ZlQ2xhc3MoQXJyYXkuZnJvbShlLmdldENsYXNzTmFtZXMoKSksdCksdGhpcy5yZW1vdmVTdHlsZShBcnJheS5mcm9tKGUuZ2V0U3R5bGVOYW1lcygpKSx0KSwhMH1fYnJlYWtBdHRyaWJ1dGVzUmFuZ2UoZSx0PSExKXtjb25zdCBvPWUuc3RhcnQsbj1lLmVuZDtpZihrZShlKSxlLmlzQ29sbGFwc2VkKXtjb25zdCBvPXRoaXMuX2JyZWFrQXR0cmlidXRlcyhlLnN0YXJ0LHQpO3JldHVybiBuZXcgQ2MobyxvKX1jb25zdCBpPXRoaXMuX2JyZWFrQXR0cmlidXRlcyhuLHQpLHI9aS5wYXJlbnQuY2hpbGRDb3VudCxhPXRoaXMuX2JyZWFrQXR0cmlidXRlcyhvLHQpO3JldHVybiBpLm9mZnNldCs9aS5wYXJlbnQuY2hpbGRDb3VudC1yLG5ldyBDYyhhLGkpfV9icmVha0F0dHJpYnV0ZXMoZSx0PSExKXtjb25zdCBvPWUub2Zmc2V0LG49ZS5wYXJlbnQ7aWYoZS5wYXJlbnQuaXMoJ2VtcHR5RWxlbWVudCcpKXRocm93IG5ldyBaYSgndmlldy13cml0ZXItY2Fubm90LWJyZWFrLWVtcHR5LWVsZW1lbnQnKTtpZihlLnBhcmVudC5pcygndWlFbGVtZW50JykpdGhyb3cgbmV3IFphKCd2aWV3LXdyaXRlci1jYW5ub3QtYnJlYWstdWktZWxlbWVudCcpO2lmKCF0JiZuLmlzKCd0ZXh0JykmJmJlKG4ucGFyZW50KSlyZXR1cm4geGMuY3JlYXRlRnJvbVBvc2l0aW9uKGUpO2lmKGJlKG4pKXJldHVybiB4Yy5jcmVhdGVGcm9tUG9zaXRpb24oZSk7aWYobi5pcygndGV4dCcpKXJldHVybiB0aGlzLl9icmVha0F0dHJpYnV0ZXMocGUoZSksdCk7Y29uc3QgaT1uLmNoaWxkQ291bnQ7aWYobz09aSl7Y29uc3QgZT1uZXcgeGMobi5wYXJlbnQsbi5pbmRleCsxKTtyZXR1cm4gdGhpcy5fYnJlYWtBdHRyaWJ1dGVzKGUsdCl9aWYoMD09PW8pe2NvbnN0IGU9bmV3IHhjKG4ucGFyZW50LG4uaW5kZXgpO3JldHVybiB0aGlzLl9icmVha0F0dHJpYnV0ZXMoZSx0KX1lbHNle2NvbnN0IGU9bi5pbmRleCsxLGk9bi5fY2xvbmUoKTtuLnBhcmVudC5faW5zZXJ0Q2hpbGQoZSxpKSx0aGlzLl9hZGRUb0Nsb25lZEVsZW1lbnRzR3JvdXAoaSk7Y29uc3Qgcj1uLmNoaWxkQ291bnQtbyxhPW4uX3JlbW92ZUNoaWxkcmVuKG8scik7aS5fYXBwZW5kQ2hpbGQoYSk7Y29uc3Qgcz1uZXcgeGMobi5wYXJlbnQsZSk7cmV0dXJuIHRoaXMuX2JyZWFrQXR0cmlidXRlcyhzLHQpfX1fYWRkVG9DbG9uZWRFbGVtZW50c0dyb3VwKGUpe2lmKCFlLnJvb3QuaXMoJ3Jvb3RFbGVtZW50JykpcmV0dXJuO2lmKGUuaXMoJ2VsZW1lbnQnKSlmb3IoY29uc3QgdCBvZiBlLmdldENoaWxkcmVuKCkpdGhpcy5fYWRkVG9DbG9uZWRFbGVtZW50c0dyb3VwKHQpO2NvbnN0IHQ9ZS5pZDtpZighdClyZXR1cm47bGV0IG89dGhpcy5fY2xvbmVHcm91cHMuZ2V0KHQpO298fChvPW5ldyBTZXQsdGhpcy5fY2xvbmVHcm91cHMuc2V0KHQsbykpLG8uYWRkKGUpLGUuX2Nsb25lc0dyb3VwPW99X3JlbW92ZUZyb21DbG9uZWRFbGVtZW50c0dyb3VwKGUpe2lmKGUuaXMoJ2VsZW1lbnQnKSlmb3IoY29uc3QgdCBvZiBlLmdldENoaWxkcmVuKCkpdGhpcy5fcmVtb3ZlRnJvbUNsb25lZEVsZW1lbnRzR3JvdXAodCk7Y29uc3QgdD1lLmlkO2lmKHQpe2NvbnN0IG89dGhpcy5fY2xvbmVHcm91cHMuZ2V0KHQpO28mJihvLmRlbGV0ZShlKSwwPT09by5zaXplJiZ0aGlzLl9jbG9uZUdyb3Vwcy5kZWxldGUodCkpfX19Y29uc3QgamM9W09kLE9jLEZkLFJjLEJjXSxxYz0oZSk9Pntjb25zdCB0PWUuY3JlYXRlRWxlbWVudCgnYnInKTtyZXR1cm4gdC5kYXRhc2V0LmNrZUZpbGxlcj0hMCx0fSxXYz0oZSk9PmUuY3JlYXRlVGV4dE5vZGUoJ1xceEEwJyksVWM9NztsZXQgSGM9Jyc7Zm9yKGxldCBuPTA7bjxVYztuKyspSGMrPSdcXHUyMDBCJztjb25zdCBLYz1uZXcgV2Vha01hcDtjbGFzcyBHY3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMuZG9tRG9jdW1lbnRzPW5ldyBTZXQsdGhpcy5kb21Db252ZXJ0ZXI9ZSx0aGlzLm1hcmtlZEF0dHJpYnV0ZXM9bmV3IFNldCx0aGlzLm1hcmtlZENoaWxkcmVuPW5ldyBTZXQsdGhpcy5tYXJrZWRUZXh0cz1uZXcgU2V0LHRoaXMuc2VsZWN0aW9uPXQsdGhpcy5faW5saW5lRmlsbGVyPW51bGwsdGhpcy5pc0ZvY3VzZWQ9ITEsdGhpcy5fZmFrZVNlbGVjdGlvbkNvbnRhaW5lcj1udWxsfW1hcmtUb1N5bmMoZSx0KXtpZigndGV4dCc9PT1lKXRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbSh0LnBhcmVudCkmJnRoaXMubWFya2VkVGV4dHMuYWRkKHQpO2Vsc2V7aWYoIXRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbSh0KSlyZXR1cm47aWYoJ2F0dHJpYnV0ZXMnPT09ZSl0aGlzLm1hcmtlZEF0dHJpYnV0ZXMuYWRkKHQpO2Vsc2UgaWYoJ2NoaWxkcmVuJz09PWUpdGhpcy5tYXJrZWRDaGlsZHJlbi5hZGQodCk7ZWxzZSB0aHJvdyBuZXcgWmEoJ3ZpZXctcmVuZGVyZXItdW5rbm93bi10eXBlOiBVbmtub3duIHR5cGUgcGFzc2VkIHRvIFJlbmRlcmVyLm1hcmtUb1N5bmMuJyl9fXJlbmRlcigpe2xldCBlO3RoaXMuX2lubGluZUZpbGxlciYmIXRoaXMuX2lzU2VsZWN0aW9uSW5JbmxpbmVGaWxsZXIoKSYmdGhpcy5fcmVtb3ZlSW5saW5lRmlsbGVyKCksdGhpcy5faW5saW5lRmlsbGVyP2U9dGhpcy5fZ2V0SW5saW5lRmlsbGVyUG9zaXRpb24oKTp0aGlzLl9uZWVkc0lubGluZUZpbGxlckF0U2VsZWN0aW9uKCkmJihlPXRoaXMuc2VsZWN0aW9uLmdldEZpcnN0UG9zaXRpb24oKSx0aGlzLm1hcmtlZENoaWxkcmVuLmFkZChlLnBhcmVudCkpO2Zvcihjb25zdCBlIG9mIHRoaXMubWFya2VkQXR0cmlidXRlcyl0aGlzLl91cGRhdGVBdHRycyhlKTtmb3IoY29uc3QgdCBvZiB0aGlzLm1hcmtlZENoaWxkcmVuKXRoaXMuX3VwZGF0ZUNoaWxkcmVuKHQse2lubGluZUZpbGxlclBvc2l0aW9uOmV9KTtmb3IoY29uc3QgdCBvZiB0aGlzLm1hcmtlZFRleHRzKSF0aGlzLm1hcmtlZENoaWxkcmVuLmhhcyh0LnBhcmVudCkmJnRoaXMuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbSh0LnBhcmVudCkmJnRoaXMuX3VwZGF0ZVRleHQodCx7aW5saW5lRmlsbGVyUG9zaXRpb246ZX0pO2lmKGUpe2NvbnN0IHQ9dGhpcy5kb21Db252ZXJ0ZXIudmlld1Bvc2l0aW9uVG9Eb20oZSksbz10LnBhcmVudC5vd25lckRvY3VtZW50O3RoaXMuX2lubGluZUZpbGxlcj13ZSh0LnBhcmVudCk/dC5wYXJlbnQ6dGhpcy5fYWRkSW5saW5lRmlsbGVyKG8sdC5wYXJlbnQsdC5vZmZzZXQpfWVsc2UgdGhpcy5faW5saW5lRmlsbGVyPW51bGw7dGhpcy5fdXBkYXRlU2VsZWN0aW9uKCksdGhpcy5fdXBkYXRlRm9jdXMoKSx0aGlzLm1hcmtlZFRleHRzLmNsZWFyKCksdGhpcy5tYXJrZWRBdHRyaWJ1dGVzLmNsZWFyKCksdGhpcy5tYXJrZWRDaGlsZHJlbi5jbGVhcigpfV9hZGRJbmxpbmVGaWxsZXIoZSx0LG8pe2NvbnN0IG49dCBpbnN0YW5jZW9mIEFycmF5P3Q6dC5jaGlsZE5vZGVzLGk9bltvXTtpZihTZShpKSlyZXR1cm4gaS5kYXRhPUhjK2kuZGF0YSxpO2Vsc2V7Y29uc3QgaT1lLmNyZWF0ZVRleHROb2RlKEhjKTtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT9uLnNwbGljZShvLDAsaSk6UGUodCxvLGkpLGl9fV9nZXRJbmxpbmVGaWxsZXJQb3NpdGlvbigpe2NvbnN0IGU9dGhpcy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpO3JldHVybiBlLnBhcmVudC5pcygndGV4dCcpP3hjLmNyZWF0ZUJlZm9yZSh0aGlzLnNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCkucGFyZW50KTplfV9pc1NlbGVjdGlvbkluSW5saW5lRmlsbGVyKCl7aWYoMSE9dGhpcy5zZWxlY3Rpb24ucmFuZ2VDb3VudHx8IXRoaXMuc2VsZWN0aW9uLmlzQ29sbGFwc2VkKXJldHVybiExO2NvbnN0IGU9dGhpcy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpLHQ9dGhpcy5kb21Db252ZXJ0ZXIudmlld1Bvc2l0aW9uVG9Eb20oZSk7cmV0dXJuISEodCYmU2UodC5wYXJlbnQpJiZ3ZSh0LnBhcmVudCkpfV9yZW1vdmVJbmxpbmVGaWxsZXIoKXtjb25zdCBlPXRoaXMuX2lubGluZUZpbGxlcjtpZighd2UoZSkpdGhyb3cgbmV3IFphKCd2aWV3LXJlbmRlcmVyLWZpbGxlci13YXMtbG9zdDogVGhlIGlubGluZSBmaWxsZXIgbm9kZSB3YXMgbG9zdC4nKTt2ZShlKT9lLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSk6ZS5kYXRhPWUuZGF0YS5zdWJzdHIoVWMpLHRoaXMuX2lubGluZUZpbGxlcj1udWxsfV9uZWVkc0lubGluZUZpbGxlckF0U2VsZWN0aW9uKCl7aWYoMSE9dGhpcy5zZWxlY3Rpb24ucmFuZ2VDb3VudHx8IXRoaXMuc2VsZWN0aW9uLmlzQ29sbGFwc2VkKXJldHVybiExO2NvbnN0IGU9dGhpcy5zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpLHQ9ZS5wYXJlbnQsbz1lLm9mZnNldDtpZighdGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKHQucm9vdCkpcmV0dXJuITE7aWYoIXQuaXMoJ2VsZW1lbnQnKSlyZXR1cm4hMTtpZighT2UodCkpcmV0dXJuITE7aWYobz09PXQuZ2V0RmlsbGVyT2Zmc2V0KCkpcmV0dXJuITE7Y29uc3Qgbj1lLm5vZGVCZWZvcmUsaT1lLm5vZGVBZnRlcjtyZXR1cm4hKG4gaW5zdGFuY2VvZiBPZHx8aSBpbnN0YW5jZW9mIE9kKX1fdXBkYXRlVGV4dChlLHQpe2NvbnN0IG89dGhpcy5kb21Db252ZXJ0ZXIuZmluZENvcnJlc3BvbmRpbmdEb21UZXh0KGUpLG49dGhpcy5kb21Db252ZXJ0ZXIudmlld1RvRG9tKGUsby5vd25lckRvY3VtZW50KSxpPW8uZGF0YTtsZXQgcj1uLmRhdGE7Y29uc3QgYT10LmlubGluZUZpbGxlclBvc2l0aW9uO2EmJmEucGFyZW50PT1lLnBhcmVudCYmYS5vZmZzZXQ9PWUuaW5kZXgmJihyPUhjK3IpLGkhPXImJihvLmRhdGE9cil9X3VwZGF0ZUF0dHJzKGUpe2NvbnN0IHQ9dGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKGUpLG89QXJyYXkuZnJvbSh0LmF0dHJpYnV0ZXMpLm1hcCgoZSk9PmUubmFtZSksbj1lLmdldEF0dHJpYnV0ZUtleXMoKTtmb3IoY29uc3QgbyBvZiBuKXQuc2V0QXR0cmlidXRlKG8sZS5nZXRBdHRyaWJ1dGUobykpO2Zvcihjb25zdCBuIG9mIG8pZS5oYXNBdHRyaWJ1dGUobil8fHQucmVtb3ZlQXR0cmlidXRlKG4pfV91cGRhdGVDaGlsZHJlbihlLHQpe2Z1bmN0aW9uIG8oZSx0KXtpZihlPT09dClyZXR1cm4hMDtyZXR1cm4gU2UoZSkmJlNlKHQpP2UuZGF0YT09PXQuZGF0YTohISh4ZShlLG4uYmxvY2tGaWxsZXIpJiZ4ZSh0LG4uYmxvY2tGaWxsZXIpKX1jb25zdCBuPXRoaXMuZG9tQ29udmVydGVyLHI9bi5tYXBWaWV3VG9Eb20oZSk7aWYocil7Y29uc3QgYT1yLm93bmVyRG9jdW1lbnQscz10LmlubGluZUZpbGxlclBvc2l0aW9uLGw9ci5jaGlsZE5vZGVzLGQ9QXJyYXkuZnJvbShuLnZpZXdDaGlsZHJlblRvRG9tKGUsYSx7YmluZDohMH0pKTtzJiZzLnBhcmVudD09ZSYmdGhpcy5fYWRkSW5saW5lRmlsbGVyKGEsZCxzLm9mZnNldCk7Y29uc3QgYz1UZShsLGQsbyk7bGV0IHU9MDtjb25zdCBpPW5ldyBTZXQ7Zm9yKGNvbnN0IGUgb2YgYyknaW5zZXJ0Jz09PWU/KFBlKHIsdSxkW3VdKSx1KyspOidkZWxldGUnPT09ZT8oaS5hZGQobFt1XSksRWUobFt1XSkpOih0aGlzLl9tYXJrRGVzY2VuZGFudFRleHRUb1N5bmMobi5kb21Ub1ZpZXcoZFt1XSkpLHUrKyk7Zm9yKGNvbnN0IGUgb2YgaSllLnBhcmVudE5vZGV8fHRoaXMuZG9tQ29udmVydGVyLnVuYmluZERvbUVsZW1lbnQoZSl9fV9tYXJrRGVzY2VuZGFudFRleHRUb1N5bmMoZSl7aWYoZSlpZihlLmlzKCd0ZXh0JykpdGhpcy5tYXJrZWRUZXh0cy5hZGQoZSk7ZWxzZSBpZihlLmlzKCdlbGVtZW50JykpZm9yKGNvbnN0IHQgb2YgZS5nZXRDaGlsZHJlbigpKXRoaXMuX21hcmtEZXNjZW5kYW50VGV4dFRvU3luYyh0KX1fdXBkYXRlU2VsZWN0aW9uKCl7aWYoMD09PXRoaXMuc2VsZWN0aW9uLnJhbmdlQ291bnQpcmV0dXJuIHRoaXMuX3JlbW92ZURvbVNlbGVjdGlvbigpLHZvaWQgdGhpcy5fcmVtb3ZlRmFrZVNlbGVjdGlvbigpO2NvbnN0IGU9dGhpcy5kb21Db252ZXJ0ZXIubWFwVmlld1RvRG9tKHRoaXMuc2VsZWN0aW9uLmVkaXRhYmxlRWxlbWVudCk7dGhpcy5pc0ZvY3VzZWQmJmUmJih0aGlzLnNlbGVjdGlvbi5pc0Zha2U/dGhpcy5fdXBkYXRlRmFrZVNlbGVjdGlvbihlKToodGhpcy5fcmVtb3ZlRmFrZVNlbGVjdGlvbigpLHRoaXMuX3VwZGF0ZURvbVNlbGVjdGlvbihlKSkpfV91cGRhdGVGYWtlU2VsZWN0aW9uKGUpe2NvbnN0IHQ9ZS5vd25lckRvY3VtZW50O2xldCBvPXRoaXMuX2Zha2VTZWxlY3Rpb25Db250YWluZXI7b3x8KHRoaXMuX2Zha2VTZWxlY3Rpb25Db250YWluZXI9bz10LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLE9iamVjdC5hc3NpZ24oby5zdHlsZSx7cG9zaXRpb246J2ZpeGVkJyx0b3A6MCxsZWZ0OictOTk5OXB4Jyx3aWR0aDonNDJweCd9KSxvLmFwcGVuZENoaWxkKHQuY3JlYXRlVGV4dE5vZGUoJ1xceEEwJykpKSxvLnBhcmVudEVsZW1lbnR8fGUuYXBwZW5kQ2hpbGQobyksby5maXJzdENoaWxkLmRhdGE9dGhpcy5zZWxlY3Rpb24uZmFrZVNlbGVjdGlvbkxhYmVsfHwnXFx4QTAnO2NvbnN0IG49dC5nZXRTZWxlY3Rpb24oKSxpPXQuY3JlYXRlUmFuZ2UoKTtuLnJlbW92ZUFsbFJhbmdlcygpLGkuc2VsZWN0Tm9kZUNvbnRlbnRzKG8pLG4uYWRkUmFuZ2UoaSksdGhpcy5kb21Db252ZXJ0ZXIuYmluZEZha2VTZWxlY3Rpb24obyx0aGlzLnNlbGVjdGlvbil9X3VwZGF0ZURvbVNlbGVjdGlvbihlKXtjb25zdCB0PWUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKTtpZih0aGlzLl9kb21TZWxlY3Rpb25OZWVkc1VwZGF0ZSh0KSl7Y29uc3Qgbz10aGlzLmRvbUNvbnZlcnRlci52aWV3UG9zaXRpb25Ub0RvbSh0aGlzLnNlbGVjdGlvbi5hbmNob3IpLG49dGhpcy5kb21Db252ZXJ0ZXIudmlld1Bvc2l0aW9uVG9Eb20odGhpcy5zZWxlY3Rpb24uZm9jdXMpO2UuZm9jdXMoKSx0LmNvbGxhcHNlKG8ucGFyZW50LG8ub2Zmc2V0KSx0LmV4dGVuZChuLnBhcmVudCxuLm9mZnNldCl9fV9kb21TZWxlY3Rpb25OZWVkc1VwZGF0ZShlKXtpZighdGhpcy5kb21Db252ZXJ0ZXIuaXNEb21TZWxlY3Rpb25Db3JyZWN0KGUpKXJldHVybiEwO2NvbnN0IHQ9ZSYmdGhpcy5kb21Db252ZXJ0ZXIuZG9tU2VsZWN0aW9uVG9WaWV3KGUpO3JldHVybiEodCYmdGhpcy5zZWxlY3Rpb24uaXNFcXVhbCh0KSkmJih0aGlzLnNlbGVjdGlvbi5pc0NvbGxhcHNlZHx8IXRoaXMuc2VsZWN0aW9uLmlzU2ltaWxhcih0KSl9X3JlbW92ZURvbVNlbGVjdGlvbigpe2Zvcihjb25zdCBlIG9mIHRoaXMuZG9tRG9jdW1lbnRzKXtjb25zdCB0PWUuZ2V0U2VsZWN0aW9uKCk7aWYodC5yYW5nZUNvdW50KXtjb25zdCB0PWUuYWN0aXZlRWxlbWVudCxvPXRoaXMuZG9tQ29udmVydGVyLm1hcERvbVRvVmlldyh0KTt0JiZvJiZlLmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpfX19X3JlbW92ZUZha2VTZWxlY3Rpb24oKXtjb25zdCBlPXRoaXMuX2Zha2VTZWxlY3Rpb25Db250YWluZXI7ZSYmZS5yZW1vdmUoKX1fdXBkYXRlRm9jdXMoKXtpZih0aGlzLmlzRm9jdXNlZCl7Y29uc3QgZT10aGlzLnNlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnQ7ZSYmdGhpcy5kb21Db252ZXJ0ZXIuZm9jdXMoZSl9fX1mKEdjLGJjKTt2YXIgJGM9e3dpbmRvdyxkb2N1bWVudH07Y2xhc3MgSmN7Y29uc3RydWN0b3IoZT17fSl7dGhpcy5ibG9ja0ZpbGxlcj1lLmJsb2NrRmlsbGVyfHxxYyx0aGlzLnByZUVsZW1lbnRzPVsncHJlJ10sdGhpcy5ibG9ja0VsZW1lbnRzPVsncCcsJ2RpdicsJ2gxJywnaDInLCdoMycsJ2g0JywnaDUnLCdoNiddLHRoaXMuX2RvbVRvVmlld01hcHBpbmc9bmV3IFdlYWtNYXAsdGhpcy5fdmlld1RvRG9tTWFwcGluZz1uZXcgV2Vha01hcCx0aGlzLl9mYWtlU2VsZWN0aW9uTWFwcGluZz1uZXcgV2Vha01hcH1iaW5kRmFrZVNlbGVjdGlvbihlLHQpe3RoaXMuX2Zha2VTZWxlY3Rpb25NYXBwaW5nLnNldChlLG5ldyBBYyh0KSl9ZmFrZVNlbGVjdGlvblRvVmlldyhlKXtyZXR1cm4gdGhpcy5fZmFrZVNlbGVjdGlvbk1hcHBpbmcuZ2V0KGUpfWJpbmRFbGVtZW50cyhlLHQpe3RoaXMuX2RvbVRvVmlld01hcHBpbmcuc2V0KGUsdCksdGhpcy5fdmlld1RvRG9tTWFwcGluZy5zZXQodCxlKX11bmJpbmREb21FbGVtZW50KGUpe2NvbnN0IHQ9dGhpcy5fZG9tVG9WaWV3TWFwcGluZy5nZXQoZSk7aWYodCl7dGhpcy5fZG9tVG9WaWV3TWFwcGluZy5kZWxldGUoZSksdGhpcy5fdmlld1RvRG9tTWFwcGluZy5kZWxldGUodCk7Zm9yKGNvbnN0IHQgb2YgQXJyYXkuZnJvbShlLmNoaWxkTm9kZXMpKXRoaXMudW5iaW5kRG9tRWxlbWVudCh0KX19YmluZERvY3VtZW50RnJhZ21lbnRzKGUsdCl7dGhpcy5fZG9tVG9WaWV3TWFwcGluZy5zZXQoZSx0KSx0aGlzLl92aWV3VG9Eb21NYXBwaW5nLnNldCh0LGUpfXZpZXdUb0RvbShlLHQsbz17fSl7aWYoZS5pcygndGV4dCcpKXtjb25zdCBvPXRoaXMuX3Byb2Nlc3NEYXRhRnJvbVZpZXdUZXh0KGUpO3JldHVybiB0LmNyZWF0ZVRleHROb2RlKG8pfWVsc2V7aWYodGhpcy5tYXBWaWV3VG9Eb20oZSkpcmV0dXJuIHRoaXMubWFwVmlld1RvRG9tKGUpO2xldCBuO2lmKGUuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKSluPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG8uYmluZCYmdGhpcy5iaW5kRG9jdW1lbnRGcmFnbWVudHMobixlKTtlbHNle2lmKGUuaXMoJ3VpRWxlbWVudCcpKXJldHVybiBuPWUucmVuZGVyKHQpLG8uYmluZCYmdGhpcy5iaW5kRWxlbWVudHMobixlKSxuO249dC5jcmVhdGVFbGVtZW50KGUubmFtZSksby5iaW5kJiZ0aGlzLmJpbmRFbGVtZW50cyhuLGUpO2Zvcihjb25zdCB0IG9mIGUuZ2V0QXR0cmlidXRlS2V5cygpKW4uc2V0QXR0cmlidXRlKHQsZS5nZXRBdHRyaWJ1dGUodCkpfWlmKG8ud2l0aENoaWxkcmVufHx2b2lkIDA9PT1vLndpdGhDaGlsZHJlbilmb3IoY29uc3QgaSBvZiB0aGlzLnZpZXdDaGlsZHJlblRvRG9tKGUsdCxvKSluLmFwcGVuZENoaWxkKGkpO3JldHVybiBufX0qdmlld0NoaWxkcmVuVG9Eb20oZSx0LG89e30pe2NvbnN0IG49ZS5nZXRGaWxsZXJPZmZzZXQmJmUuZ2V0RmlsbGVyT2Zmc2V0KCk7bGV0IGk9MDtmb3IoY29uc3QgciBvZiBlLmdldENoaWxkcmVuKCkpbj09PWkmJih5aWVsZCB0aGlzLmJsb2NrRmlsbGVyKHQpKSx5aWVsZCB0aGlzLnZpZXdUb0RvbShyLHQsbyksaSsrO249PT1pJiYoeWllbGQgdGhpcy5ibG9ja0ZpbGxlcih0KSl9dmlld1JhbmdlVG9Eb20oZSl7Y29uc3QgdD10aGlzLnZpZXdQb3NpdGlvblRvRG9tKGUuc3RhcnQpLG89dGhpcy52aWV3UG9zaXRpb25Ub0RvbShlLmVuZCksbj1kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JldHVybiBuLnNldFN0YXJ0KHQucGFyZW50LHQub2Zmc2V0KSxuLnNldEVuZChvLnBhcmVudCxvLm9mZnNldCksbn12aWV3UG9zaXRpb25Ub0RvbShlKXtjb25zdCB0PWUucGFyZW50O2lmKHQuaXMoJ3RleHQnKSl7Y29uc3Qgbz10aGlzLmZpbmRDb3JyZXNwb25kaW5nRG9tVGV4dCh0KTtpZighbylyZXR1cm4gbnVsbDtsZXQgbj1lLm9mZnNldDtyZXR1cm4gd2UobykmJihuKz1VYykse3BhcmVudDpvLG9mZnNldDpufX1lbHNle2xldCBvLG4saTtpZigwPT09ZS5vZmZzZXQpe2lmKG89dGhpcy5tYXBWaWV3VG9Eb20odCksIW8pcmV0dXJuIG51bGw7aT1vLmNoaWxkTm9kZXNbMF19ZWxzZXtjb25zdCB0PWUubm9kZUJlZm9yZTtpZihuPXQuaXMoJ3RleHQnKT90aGlzLmZpbmRDb3JyZXNwb25kaW5nRG9tVGV4dCh0KTp0aGlzLm1hcFZpZXdUb0RvbShlLm5vZGVCZWZvcmUpLCFuKXJldHVybiBudWxsO289bi5wYXJlbnROb2RlLGk9bi5uZXh0U2libGluZ31pZihTZShpKSYmd2UoaSkpcmV0dXJue3BhcmVudDppLG9mZnNldDpVY307Y29uc3Qgcj1uP1JlKG4pKzE6MDtyZXR1cm57cGFyZW50Om8sb2Zmc2V0OnJ9fX1kb21Ub1ZpZXcoZSx0PXt9KXtpZih4ZShlLHRoaXMuYmxvY2tGaWxsZXIpKXJldHVybiBudWxsO2NvbnN0IG89dGhpcy5nZXRQYXJlbnRVSUVsZW1lbnQoZSx0aGlzLl9kb21Ub1ZpZXdNYXBwaW5nKTtpZihvKXJldHVybiBvO2lmKFNlKGUpKXtpZih2ZShlKSlyZXR1cm4gbnVsbDtlbHNle2NvbnN0IHQ9dGhpcy5fcHJvY2Vzc0RhdGFGcm9tRG9tVGV4dChlKTtyZXR1cm4nJz09PXQ/bnVsbDpuZXcgT2QodCl9fWVsc2UgaWYodGhpcy5pc0NvbW1lbnQoZSkpcmV0dXJuIG51bGw7ZWxzZXtpZih0aGlzLm1hcERvbVRvVmlldyhlKSlyZXR1cm4gdGhpcy5tYXBEb21Ub1ZpZXcoZSk7bGV0IG87aWYodGhpcy5pc0RvY3VtZW50RnJhZ21lbnQoZSkpbz1uZXcgTGMsdC5iaW5kJiZ0aGlzLmJpbmREb2N1bWVudEZyYWdtZW50cyhlLG8pO2Vsc2V7Y29uc3Qgbj10LmtlZXBPcmlnaW5hbENhc2U/ZS50YWdOYW1lOmUudGFnTmFtZS50b0xvd2VyQ2FzZSgpO289bmV3IFZkKG4pLHQuYmluZCYmdGhpcy5iaW5kRWxlbWVudHMoZSxvKTtjb25zdCByPWUuYXR0cmlidXRlcztmb3IobGV0IGU9ci5sZW5ndGgtMTswPD1lO2UtLSlvLl9zZXRBdHRyaWJ1dGUocltlXS5uYW1lLHJbZV0udmFsdWUpfWlmKHQud2l0aENoaWxkcmVufHx2b2lkIDA9PT10LndpdGhDaGlsZHJlbilmb3IoY29uc3QgbiBvZiB0aGlzLmRvbUNoaWxkcmVuVG9WaWV3KGUsdCkpby5fYXBwZW5kQ2hpbGQobik7cmV0dXJuIG99fSpkb21DaGlsZHJlblRvVmlldyhlLHQ9e30pe2ZvcihsZXQgbz0wO288ZS5jaGlsZE5vZGVzLmxlbmd0aDtvKyspe2NvbnN0IG49ZS5jaGlsZE5vZGVzW29dLGk9dGhpcy5kb21Ub1ZpZXcobix0KTtudWxsIT09aSYmKHlpZWxkIGkpfX1kb21TZWxlY3Rpb25Ub1ZpZXcoZSl7aWYoMT09PWUucmFuZ2VDb3VudCl7bGV0IHQ9ZS5nZXRSYW5nZUF0KDApLnN0YXJ0Q29udGFpbmVyO1NlKHQpJiYodD10LnBhcmVudE5vZGUpO2NvbnN0IG89dGhpcy5mYWtlU2VsZWN0aW9uVG9WaWV3KHQpO2lmKG8pcmV0dXJuIG99Y29uc3QgdD10aGlzLmlzRG9tU2VsZWN0aW9uQmFja3dhcmQoZSksbz1bXTtmb3IobGV0IHQ9MDt0PGUucmFuZ2VDb3VudDt0Kyspe2NvbnN0IG49ZS5nZXRSYW5nZUF0KHQpLGk9dGhpcy5kb21SYW5nZVRvVmlldyhuKTtpJiZvLnB1c2goaSl9cmV0dXJuIG5ldyBBYyhvLHtiYWNrd2FyZDp0fSl9ZG9tUmFuZ2VUb1ZpZXcoZSl7Y29uc3QgdD10aGlzLmRvbVBvc2l0aW9uVG9WaWV3KGUuc3RhcnRDb250YWluZXIsZS5zdGFydE9mZnNldCksbz10aGlzLmRvbVBvc2l0aW9uVG9WaWV3KGUuZW5kQ29udGFpbmVyLGUuZW5kT2Zmc2V0KTtyZXR1cm4gdCYmbz9uZXcgQ2ModCxvKTpudWxsfWRvbVBvc2l0aW9uVG9WaWV3KGUsdCl7aWYoeGUoZSx0aGlzLmJsb2NrRmlsbGVyKSlyZXR1cm4gdGhpcy5kb21Qb3NpdGlvblRvVmlldyhlLnBhcmVudE5vZGUsUmUoZSkpO2NvbnN0IG89dGhpcy5tYXBEb21Ub1ZpZXcoZSk7aWYobyYmby5pcygndWlFbGVtZW50JykpcmV0dXJuIHhjLmNyZWF0ZUJlZm9yZShvKTtpZihTZShlKSl7aWYodmUoZSkpcmV0dXJuIHRoaXMuZG9tUG9zaXRpb25Ub1ZpZXcoZS5wYXJlbnROb2RlLFJlKGUpKTtjb25zdCBvPXRoaXMuZmluZENvcnJlc3BvbmRpbmdWaWV3VGV4dChlKTtsZXQgbj10O3JldHVybiBvPyh3ZShlKSYmKG4tPVVjLG49MD5uPzA6biksbmV3IHhjKG8sbikpOm51bGx9aWYoMD09PXQpe2NvbnN0IHQ9dGhpcy5tYXBEb21Ub1ZpZXcoZSk7aWYodClyZXR1cm4gbmV3IHhjKHQsMCl9ZWxzZXtjb25zdCBvPWUuY2hpbGROb2Rlc1t0LTFdLG49U2Uobyk/dGhpcy5maW5kQ29ycmVzcG9uZGluZ1ZpZXdUZXh0KG8pOnRoaXMubWFwRG9tVG9WaWV3KG8pO2lmKG4mJm4ucGFyZW50KXJldHVybiBuZXcgeGMobi5wYXJlbnQsbi5pbmRleCsxKX1yZXR1cm4gbnVsbH1tYXBEb21Ub1ZpZXcoZSl7cmV0dXJuIHRoaXMuZ2V0UGFyZW50VUlFbGVtZW50KGUpfHx0aGlzLl9kb21Ub1ZpZXdNYXBwaW5nLmdldChlKX1maW5kQ29ycmVzcG9uZGluZ1ZpZXdUZXh0KGUpe2lmKHZlKGUpKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5nZXRQYXJlbnRVSUVsZW1lbnQoZSk7aWYodClyZXR1cm4gdDtjb25zdCBvPWUucHJldmlvdXNTaWJsaW5nO2lmKG8pe2lmKCF0aGlzLmlzRWxlbWVudChvKSlyZXR1cm4gbnVsbDtjb25zdCBlPXRoaXMubWFwRG9tVG9WaWV3KG8pO2lmKGUpe2NvbnN0IHQ9ZS5uZXh0U2libGluZztyZXR1cm4gdCBpbnN0YW5jZW9mIE9kP2UubmV4dFNpYmxpbmc6bnVsbH19ZWxzZXtjb25zdCB0PXRoaXMubWFwRG9tVG9WaWV3KGUucGFyZW50Tm9kZSk7aWYodCl7Y29uc3QgZT10LmdldENoaWxkKDApO3JldHVybiBlIGluc3RhbmNlb2YgT2Q/ZTpudWxsfX1yZXR1cm4gbnVsbH1tYXBWaWV3VG9Eb20oZSl7cmV0dXJuIHRoaXMuX3ZpZXdUb0RvbU1hcHBpbmcuZ2V0KGUpfWZpbmRDb3JyZXNwb25kaW5nRG9tVGV4dChlKXtjb25zdCB0PWUucHJldmlvdXNTaWJsaW5nO3JldHVybiB0JiZ0aGlzLm1hcFZpZXdUb0RvbSh0KT90aGlzLm1hcFZpZXdUb0RvbSh0KS5uZXh0U2libGluZzohdCYmZS5wYXJlbnQmJnRoaXMubWFwVmlld1RvRG9tKGUucGFyZW50KT90aGlzLm1hcFZpZXdUb0RvbShlLnBhcmVudCkuY2hpbGROb2Rlc1swXTpudWxsfWZvY3VzKGUpe2NvbnN0IHQ9dGhpcy5tYXBWaWV3VG9Eb20oZSk7aWYodCYmdC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT10KXtjb25zdHtzY3JvbGxYOmUsc2Nyb2xsWTpvfT0kYy53aW5kb3csbj1bXTtOZSh0LChlKT0+e2NvbnN0e3Njcm9sbExlZnQ6dCxzY3JvbGxUb3A6b309ZTtuLnB1c2goW3Qsb10pfSksdC5mb2N1cygpLE5lKHQsKGUpPT57Y29uc3RbdCxvXT1uLnNoaWZ0KCk7ZS5zY3JvbGxMZWZ0PXQsZS5zY3JvbGxUb3A9b30pLCRjLndpbmRvdy5zY3JvbGxUbyhlLG8pfX1pc0VsZW1lbnQoZSl7cmV0dXJuIGUmJmUubm9kZVR5cGU9PU5vZGUuRUxFTUVOVF9OT0RFfWlzRG9jdW1lbnRGcmFnbWVudChlKXtyZXR1cm4gZSYmZS5ub2RlVHlwZT09Tm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFfWlzQ29tbWVudChlKXtyZXR1cm4gZSYmZS5ub2RlVHlwZT09Tm9kZS5DT01NRU5UX05PREV9aXNEb21TZWxlY3Rpb25CYWNrd2FyZChlKXtpZihlLmlzQ29sbGFwc2VkKXJldHVybiExO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTt0LnNldFN0YXJ0KGUuYW5jaG9yTm9kZSxlLmFuY2hvck9mZnNldCksdC5zZXRFbmQoZS5mb2N1c05vZGUsZS5mb2N1c09mZnNldCk7Y29uc3Qgbz10LmNvbGxhcHNlZDtyZXR1cm4gdC5kZXRhY2goKSxvfWdldFBhcmVudFVJRWxlbWVudChlKXtjb25zdCB0PUllKGUpO2Zvcih0LnBvcCgpO3QubGVuZ3RoOyl7Y29uc3QgZT10LnBvcCgpLG89dGhpcy5fZG9tVG9WaWV3TWFwcGluZy5nZXQoZSk7aWYobyYmby5pcygndWlFbGVtZW50JykpcmV0dXJuIG99cmV0dXJuIG51bGx9aXNEb21TZWxlY3Rpb25Db3JyZWN0KGUpe3JldHVybiB0aGlzLl9pc0RvbVNlbGVjdGlvblBvc2l0aW9uQ29ycmVjdChlLmFuY2hvck5vZGUsZS5hbmNob3JPZmZzZXQpJiZ0aGlzLl9pc0RvbVNlbGVjdGlvblBvc2l0aW9uQ29ycmVjdChlLmZvY3VzTm9kZSxlLmZvY3VzT2Zmc2V0KX1faXNEb21TZWxlY3Rpb25Qb3NpdGlvbkNvcnJlY3QoZSx0KXtpZihTZShlKSYmd2UoZSkmJnQ8VWMpcmV0dXJuITE7aWYodGhpcy5pc0VsZW1lbnQoZSkmJndlKGUuY2hpbGROb2Rlc1t0XSkpcmV0dXJuITE7Y29uc3Qgbz10aGlzLm1hcERvbVRvVmlldyhlKTtyZXR1cm4hKG8mJm8uaXMoJ3VpRWxlbWVudCcpKX1fcHJvY2Vzc0RhdGFGcm9tVmlld1RleHQoZSl7bGV0IHQ9ZS5kYXRhO2lmKGUuZ2V0QW5jZXN0b3JzKCkuc29tZSgoZSk9PnRoaXMucHJlRWxlbWVudHMuaW5jbHVkZXMoZS5uYW1lKSkpcmV0dXJuIHQ7aWYoJyAnPT10LmNoYXJBdCgwKSl7Y29uc3Qgbz10aGlzLl9nZXRUb3VjaGluZ1ZpZXdUZXh0Tm9kZShlLCExKSxuPW8mJnRoaXMuX25vZGVFbmRzV2l0aFNwYWNlKG8pOyhufHwhbykmJih0PSdcXHhBMCcrdC5zdWJzdHIoMSkpfWlmKCcgJz09dC5jaGFyQXQodC5sZW5ndGgtMSkpe2NvbnN0IG89dGhpcy5fZ2V0VG91Y2hpbmdWaWV3VGV4dE5vZGUoZSwhMCk7b3x8KHQ9dC5zdWJzdHIoMCx0Lmxlbmd0aC0xKSsnXFx4QTAnKX1yZXR1cm4gdC5yZXBsYWNlKC8gezJ9L2csJyBcXHhBMCcpfV9ub2RlRW5kc1dpdGhTcGFjZShlKXtpZihlLmdldEFuY2VzdG9ycygpLnNvbWUoKGUpPT50aGlzLnByZUVsZW1lbnRzLmluY2x1ZGVzKGUubmFtZSkpKXJldHVybiExO2NvbnN0IHQ9dGhpcy5fcHJvY2Vzc0RhdGFGcm9tVmlld1RleHQoZSk7cmV0dXJuJyAnPT10LmNoYXJBdCh0Lmxlbmd0aC0xKX1fcHJvY2Vzc0RhdGFGcm9tRG9tVGV4dChlKXtsZXQgdD1lLmRhdGE7aWYoRmUoZSx0aGlzLnByZUVsZW1lbnRzKSlyZXR1cm4geWUoZSk7dD10LnJlcGxhY2UoL1sgXFxuXFx0XFxyXXsxLH0vZywnICcpO2NvbnN0IG89dGhpcy5fZ2V0VG91Y2hpbmdEb21UZXh0Tm9kZShlLCExKSxuPXRoaXMuX2dldFRvdWNoaW5nRG9tVGV4dE5vZGUoZSwhMCk7cmV0dXJuKCFvfHwvW15cXFNcXHUwMEEwXS8udGVzdChvLmRhdGEuY2hhckF0KG8uZGF0YS5sZW5ndGgtMSkpKSYmKHQ9dC5yZXBsYWNlKC9eIC8sJycpKSxufHx3ZShlKXx8KHQ9dC5yZXBsYWNlKC8gJC8sJycpKSx0PXllKG5ldyBUZXh0KHQpKSx0PXQucmVwbGFjZSgvIFxcdTAwQTAvZywnICAnKSwoIW98fC9bXlxcU1xcdTAwQTBdLy50ZXN0KG8uZGF0YS5jaGFyQXQoby5kYXRhLmxlbmd0aC0xKSkpJiYodD10LnJlcGxhY2UoL15cXHUwMEEwLywnICcpKSxuJiYnXFx4QTAnIT1uLmRhdGEuY2hhckF0KDApfHwodD10LnJlcGxhY2UoL1xcdTAwQTAoICopJC8sJyAkMScpKSx0fV9nZXRUb3VjaGluZ1ZpZXdUZXh0Tm9kZShlLHQpe2NvbnN0IG89bmV3IHljKHtzdGFydFBvc2l0aW9uOnQ/eGMuY3JlYXRlQWZ0ZXIoZSk6eGMuY3JlYXRlQmVmb3JlKGUpLGRpcmVjdGlvbjp0Pydmb3J3YXJkJzonYmFja3dhcmQnfSk7Zm9yKGNvbnN0IG4gb2Ygbyl7aWYobi5pdGVtLmlzKCdjb250YWluZXJFbGVtZW50JykpcmV0dXJuIG51bGw7aWYobi5pdGVtLmlzKCd0ZXh0UHJveHknKSlyZXR1cm4gbi5pdGVtfXJldHVybiBudWxsfV9nZXRUb3VjaGluZ0RvbVRleHROb2RlKGUsdCl7aWYoIWUucGFyZW50Tm9kZSlyZXR1cm4gbnVsbDtjb25zdCBvPXQ/J25leHROb2RlJzoncHJldmlvdXNOb2RlJyxuPWUub3duZXJEb2N1bWVudCxpPUllKGUpWzBdLHI9bi5jcmVhdGVUcmVlV2Fsa2VyKGksTm9kZUZpbHRlci5TSE9XX1RFWFQpO3IuY3VycmVudE5vZGU9ZTtjb25zdCBhPXJbb10oKTtpZihudWxsIT09YSl7Y29uc3QgdD1WZShlLGEpO2lmKHQmJiFGZShlLHRoaXMuYmxvY2tFbGVtZW50cyx0KSYmIUZlKGEsdGhpcy5ibG9ja0VsZW1lbnRzLHQpKXJldHVybiBhfXJldHVybiBudWxsfX1jb25zdCBRYz1tYyh7fSxzcyx7bGlzdGVuVG8oZSwuLi50KXtpZihNZShlKXx8RGUoZSkpe2NvbnN0IG89dGhpcy5fZ2V0UHJveHlFbWl0dGVyKGUpfHxuZXcgWGMoZSk7by5hdHRhY2goLi4udCksZT1vfXNzLmxpc3RlblRvLmNhbGwodGhpcyxlLC4uLnQpfSxzdG9wTGlzdGVuaW5nKGUsdCxvKXtpZihNZShlKXx8RGUoZSkpe2NvbnN0IHQ9dGhpcy5fZ2V0UHJveHlFbWl0dGVyKGUpO2lmKCF0KXJldHVybjtlPXR9c3Muc3RvcExpc3RlbmluZy5jYWxsKHRoaXMsZSx0LG8pLGUgaW5zdGFuY2VvZiBYYyYmZS5kZXRhY2godCl9LF9nZXRQcm94eUVtaXR0ZXIoZSl7cmV0dXJuIHIodGhpcyxCZShlKSl9fSk7dmFyIFljPVFjO2NsYXNzIFhje2NvbnN0cnVjdG9yKGUpe2EodGhpcyxCZShlKSksdGhpcy5fZG9tTm9kZT1lfX1tYyhYYy5wcm90b3R5cGUsc3Mse2F0dGFjaChlLHQsbz17fSl7aWYoISh0aGlzLl9kb21MaXN0ZW5lcnMmJnRoaXMuX2RvbUxpc3RlbmVyc1tlXSkpe2NvbnN0IHQ9dGhpcy5fY3JlYXRlRG9tTGlzdGVuZXIoZSwhIW8udXNlQ2FwdHVyZSk7dGhpcy5fZG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKGUsdCwhIW8udXNlQ2FwdHVyZSksdGhpcy5fZG9tTGlzdGVuZXJzfHwodGhpcy5fZG9tTGlzdGVuZXJzPXt9KSx0aGlzLl9kb21MaXN0ZW5lcnNbZV09dH19LGRldGFjaChlKXtsZXQgdDshdGhpcy5fZG9tTGlzdGVuZXJzW2VdfHwodD10aGlzLl9ldmVudHNbZV0pJiZ0LmNhbGxiYWNrcy5sZW5ndGh8fHRoaXMuX2RvbUxpc3RlbmVyc1tlXS5yZW1vdmVMaXN0ZW5lcigpfSxfY3JlYXRlRG9tTGlzdGVuZXIoZSx0KXtjb25zdCBvPSh0KT0+e3RoaXMuZmlyZShlLHQpfTtyZXR1cm4gby5yZW1vdmVMaXN0ZW5lcj0oKT0+e3RoaXMuX2RvbU5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG8sdCksZGVsZXRlIHRoaXMuX2RvbUxpc3RlbmVyc1tlXX0sb319KTtjbGFzcyBaY3tjb25zdHJ1Y3RvcihlKXt0aGlzLnZpZXc9ZSx0aGlzLmRvY3VtZW50PWUuZG9jdW1lbnQsdGhpcy5pc0VuYWJsZWQ9ITF9ZW5hYmxlKCl7dGhpcy5pc0VuYWJsZWQ9ITB9ZGlzYWJsZSgpe3RoaXMuaXNFbmFibGVkPSExfWRlc3Ryb3koKXt0aGlzLmRpc2FibGUoKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKX19ZihaYyxZYyk7TGUucHJvdG90eXBlLmFkZD1MZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fX2RhdGFfXy5zZXQoZSwnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXycpLHRoaXN9LExlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGUpfTt2YXIgZXU9TGUsdHU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG89LTEsbj1lLmxlbmd0aDsrK288bjspaWYodChlW29dLG8sZSkpcmV0dXJuITA7cmV0dXJuITF9LG91PWZ1bmN0aW9uKGUsdCxvLG4saSxyKXt2YXIgYT1pJjIscz1lLmxlbmd0aCxsPXQubGVuZ3RoO2lmKHMhPWwmJiEoYSYmbD5zKSlyZXR1cm4hMTt2YXIgZD1yLmdldChlKTtpZihkKXJldHVybiBkPT10O3ZhciBjPS0xLHU9ITAsbT1pJjE/bmV3IGV1OnZvaWQgMDtmb3Ioci5zZXQoZSx0KTsrK2M8czspe3ZhciBwPWVbY10sZz10W2NdO2lmKG4pdmFyIGY9YT9uKGcscCxjLHQsZSxyKTpuKHAsZyxjLGUsdCxyKTtpZih2b2lkIDAhPT1mKXtpZihmKWNvbnRpbnVlO3U9ITE7YnJlYWt9aWYobSl7aWYoIXR1KHQsZnVuY3Rpb24oZSx0KXtpZighbS5oYXModCkmJihwPT09ZXx8byhwLGUsbixpLHIpKSlyZXR1cm4gbS5hZGQodCl9KSl7dT0hMTticmVha319ZWxzZSBpZighKHA9PT1nfHxvKHAsZyxuLGkscikpKXt1PSExO2JyZWFrfX1yZXR1cm4gclsnZGVsZXRlJ10oZSksdX0sbnU9bWQ/bWQucHJvdG90eXBlOnZvaWQgMCxpdT1udT9udS52YWx1ZU9mOnZvaWQgMCxydT1mdW5jdGlvbihlLHQsbyxuLGkscixhKXtzd2l0Y2gobyl7Y2FzZSdbb2JqZWN0IERhdGFWaWV3XSc6aWYoZS5ieXRlTGVuZ3RoIT10LmJ5dGVMZW5ndGh8fGUuYnl0ZU9mZnNldCE9dC5ieXRlT2Zmc2V0KXJldHVybiExO2U9ZS5idWZmZXIsdD10LmJ1ZmZlcjtjYXNlJ1tvYmplY3QgQXJyYXlCdWZmZXJdJzpyZXR1cm4hIShlLmJ5dGVMZW5ndGg9PXQuYnl0ZUxlbmd0aCYmbihuZXcgWmwoZSksbmV3IFpsKHQpKSk7Y2FzZSdbb2JqZWN0IEJvb2xlYW5dJzpjYXNlJ1tvYmplY3QgRGF0ZV0nOnJldHVybitlPT0rdDtjYXNlJ1tvYmplY3QgRXJyb3JdJzpyZXR1cm4gZS5uYW1lPT10Lm5hbWUmJmUubWVzc2FnZT09dC5tZXNzYWdlO2Nhc2UnW29iamVjdCBOdW1iZXJdJzpyZXR1cm4gZT09K2U/ZT09K3Q6dCE9K3Q7Y2FzZSdbb2JqZWN0IFJlZ0V4cF0nOmNhc2UnW29iamVjdCBTdHJpbmddJzpyZXR1cm4gZT09dCsnJztjYXNlJ1tvYmplY3QgTWFwXSc6dmFyIHM9aWQ7Y2FzZSdbb2JqZWN0IFNldF0nOnZhciBsPXImMjtpZihzfHwocz1kZCksZS5zaXplIT10LnNpemUmJiFsKXJldHVybiExO3ZhciBkPWEuZ2V0KGUpO3JldHVybiBkP2Q9PXQ6KHJ8PTEsYS5zZXQoZSx0KSxvdShzKGUpLHModCksbixpLHIsYSkpO2Nhc2UnW29iamVjdCBTeW1ib2xdJzppZihpdSlyZXR1cm4gaXUuY2FsbChlKT09aXUuY2FsbCh0KTt9cmV0dXJuITF9LGF1PTIsc3U9e307c3VbJ1tvYmplY3QgRmxvYXQzMkFycmF5XSddPXN1Wydbb2JqZWN0IEZsb2F0NjRBcnJheV0nXT1zdVsnW29iamVjdCBJbnQ4QXJyYXldJ109c3VbJ1tvYmplY3QgSW50MTZBcnJheV0nXT1zdVsnW29iamVjdCBJbnQzMkFycmF5XSddPXN1Wydbb2JqZWN0IFVpbnQ4QXJyYXldJ109c3VbJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJ109c3VbJ1tvYmplY3QgVWludDE2QXJyYXldJ109c3VbJ1tvYmplY3QgVWludDMyQXJyYXldJ109ITAsc3VbJ1tvYmplY3QgQXJndW1lbnRzXSddPXN1Wydbb2JqZWN0IEFycmF5XSddPXN1Wydbb2JqZWN0IEFycmF5QnVmZmVyXSddPXN1Wydbb2JqZWN0IEJvb2xlYW5dJ109c3VbJ1tvYmplY3QgRGF0YVZpZXddJ109c3VbJ1tvYmplY3QgRGF0ZV0nXT1zdVsnW29iamVjdCBFcnJvcl0nXT1zdVsnW29iamVjdCBGdW5jdGlvbl0nXT1zdVsnW29iamVjdCBNYXBdJ109c3VbJ1tvYmplY3QgTnVtYmVyXSddPXN1Wydbb2JqZWN0IE9iamVjdF0nXT1zdVsnW29iamVjdCBSZWdFeHBdJ109c3VbJ1tvYmplY3QgU2V0XSddPXN1Wydbb2JqZWN0IFN0cmluZ10nXT1zdVsnW29iamVjdCBXZWFrTWFwXSddPSExO3ZhciBsdT1PYmplY3QucHJvdG90eXBlLGR1PWx1LnRvU3RyaW5nLGN1PWZ1bmN0aW9uKGUpe3JldHVybiBVYShlKSYmZWwoZS5sZW5ndGgpJiYhIXN1W2R1LmNhbGwoZSldfSx1dT0nW29iamVjdCBBcmd1bWVudHNdJyxtdT0nW29iamVjdCBBcnJheV0nLHB1PSdbb2JqZWN0IE9iamVjdF0nLGd1PU9iamVjdC5wcm90b3R5cGUsZnU9Z3UuaGFzT3duUHJvcGVydHksaHU9ZnVuY3Rpb24oZSx0LG8sbixpLHIpe3ZhciBhPWRsKGUpLHM9ZGwodCksbD1tdSxkPW11O2F8fChsPSRsKGUpLGw9bD09dXU/cHU6bCksc3x8KGQ9JGwodCksZD1kPT11dT9wdTpkKTt2YXIgYz1sPT1wdSYmIVdhKGUpLHU9ZD09cHUmJiFXYSh0KSxtPWw9PWQ7aWYobSYmIWMpcmV0dXJuIHJ8fChyPW5ldyB6cyksYXx8Y3UoZSk/b3UoZSx0LG8sbixpLHIpOnJ1KGUsdCxsLG8sbixpLHIpO2lmKCEoaSYyKSl7dmFyIHA9YyYmZnUuY2FsbChlLCdfX3dyYXBwZWRfXycpLGc9dSYmZnUuY2FsbCh0LCdfX3dyYXBwZWRfXycpO2lmKHB8fGcpe3ZhciBmPXA/ZS52YWx1ZSgpOmUsaD1nP3QudmFsdWUoKTp0O3JldHVybiByfHwocj1uZXcgenMpLG8oZixoLG4saSxyKX19cmV0dXJuISFtJiYocnx8KHI9bmV3IHpzKSx6ZShlLHQsbyxuLGkscikpfSxidT1qZSxrdT1mdW5jdGlvbihlLHQsbyl7bz0nZnVuY3Rpb24nPT10eXBlb2Ygbz9vOnZvaWQgMDt2YXIgbj1vP28oZSx0KTp2b2lkIDA7cmV0dXJuIG49PT12b2lkIDA/YnUoZSx0LG8pOiEhbn07Y2xhc3MgX3UgZXh0ZW5kcyBaY3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9jb25maWc9e2NoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwLGNoYXJhY3RlckRhdGFPbGRWYWx1ZTohMCxzdWJ0cmVlOiEwfSx0aGlzLmRvbUNvbnZlcnRlcj1lLmRvbUNvbnZlcnRlcix0aGlzLnJlbmRlcmVyPWUuX3JlbmRlcmVyLHRoaXMuX2RvbUVsZW1lbnRzPVtdLHRoaXMuX211dGF0aW9uT2JzZXJ2ZXI9bmV3IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyKHRoaXMuX29uTXV0YXRpb25zLmJpbmQodGhpcykpfWZsdXNoKCl7dGhpcy5fb25NdXRhdGlvbnModGhpcy5fbXV0YXRpb25PYnNlcnZlci50YWtlUmVjb3JkcygpKX1vYnNlcnZlKGUpe3RoaXMuX2RvbUVsZW1lbnRzLnB1c2goZSksdGhpcy5pc0VuYWJsZWQmJnRoaXMuX211dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShlLHRoaXMuX2NvbmZpZyl9ZW5hYmxlKCl7c3VwZXIuZW5hYmxlKCk7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fZG9tRWxlbWVudHMpdGhpcy5fbXV0YXRpb25PYnNlcnZlci5vYnNlcnZlKGUsdGhpcy5fY29uZmlnKX1kaXNhYmxlKCl7c3VwZXIuZGlzYWJsZSgpLHRoaXMuX211dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5fbXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCl9X29uTXV0YXRpb25zKGUpe2Z1bmN0aW9uIHQoZSx0KXtpZighQXJyYXkuaXNBcnJheShlKSlyZXR1cm4gZT09PXR8fCEhKGUuaXMoJ3RleHQnKSYmdC5pcygndGV4dCcpKSYmZS5kYXRhPT09dC5kYXRhfWlmKDA9PT1lLmxlbmd0aClyZXR1cm47Y29uc3Qgbz10aGlzLmRvbUNvbnZlcnRlcixuPW5ldyBNYXAsaT1uZXcgU2V0O2Zvcihjb25zdCB0IG9mIGUpaWYoJ2NoaWxkTGlzdCc9PT10LnR5cGUpe2NvbnN0IGU9by5tYXBEb21Ub1ZpZXcodC50YXJnZXQpO2lmKGUmJmUuaXMoJ3VpRWxlbWVudCcpKWNvbnRpbnVlO2UmJiF0aGlzLl9pc0JvZ3VzQnJNdXRhdGlvbih0KSYmaS5hZGQoZSl9Zm9yKGNvbnN0IHQgb2YgZSl7Y29uc3QgZT1vLm1hcERvbVRvVmlldyh0LnRhcmdldCk7aWYoIShlJiZlLmlzKCd1aUVsZW1lbnQnKSkmJidjaGFyYWN0ZXJEYXRhJz09PXQudHlwZSl7Y29uc3QgZT1vLmZpbmRDb3JyZXNwb25kaW5nVmlld1RleHQodC50YXJnZXQpO2UmJiFpLmhhcyhlLnBhcmVudCk/bi5zZXQoZSx7dHlwZTondGV4dCcsb2xkVGV4dDplLmRhdGEsbmV3VGV4dDp5ZSh0LnRhcmdldCksbm9kZTplfSk6IWUmJndlKHQudGFyZ2V0KSYmaS5hZGQoby5tYXBEb21Ub1ZpZXcodC50YXJnZXQucGFyZW50Tm9kZSkpfX1jb25zdCByPVtdO2Zvcihjb25zdCB0IG9mIG4udmFsdWVzKCkpdGhpcy5yZW5kZXJlci5tYXJrVG9TeW5jKCd0ZXh0Jyx0Lm5vZGUpLHIucHVzaCh0KTtmb3IoY29uc3QgbiBvZiBpKXtjb25zdCBlPW8ubWFwVmlld1RvRG9tKG4pLGk9QXJyYXkuZnJvbShuLmdldENoaWxkcmVuKCkpLGE9QXJyYXkuZnJvbShvLmRvbUNoaWxkcmVuVG9WaWV3KGUse3dpdGhDaGlsZHJlbjohMX0pKTtrdShpLGEsdCl8fCh0aGlzLnJlbmRlcmVyLm1hcmtUb1N5bmMoJ2NoaWxkcmVuJyxuKSxyLnB1c2goe3R5cGU6J2NoaWxkcmVuJyxvbGRDaGlsZHJlbjppLG5ld0NoaWxkcmVuOmEsbm9kZTpufSkpfWNvbnN0IGE9ZVswXS50YXJnZXQub3duZXJEb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtsZXQgcz1udWxsO2lmKGEmJmEuYW5jaG9yTm9kZSl7Y29uc3QgZT1vLmRvbVBvc2l0aW9uVG9WaWV3KGEuYW5jaG9yTm9kZSxhLmFuY2hvck9mZnNldCksdD1vLmRvbVBvc2l0aW9uVG9WaWV3KGEuZm9jdXNOb2RlLGEuZm9jdXNPZmZzZXQpO2UmJnQmJihzPW5ldyBBYyhlKSxzLnNldEZvY3VzKHQpKX10aGlzLmRvY3VtZW50LmZpcmUoJ211dGF0aW9ucycscixzKSx0aGlzLnZpZXcucmVuZGVyKCl9X2lzQm9ndXNCck11dGF0aW9uKGUpe2xldCB0PW51bGw7cmV0dXJuIG51bGw9PT1lLm5leHRTaWJsaW5nJiYwPT09ZS5yZW1vdmVkTm9kZXMubGVuZ3RoJiYxPT1lLmFkZGVkTm9kZXMubGVuZ3RoJiYodD10aGlzLmRvbUNvbnZlcnRlci5kb21Ub1ZpZXcoZS5hZGRlZE5vZGVzWzBdLHt3aXRoQ2hpbGRyZW46ITF9KSksdCYmdC5pcygnZWxlbWVudCcsJ2JyJyl9fWNsYXNzIHd1e2NvbnN0cnVjdG9yKGUsdCxvKXt0aGlzLnZpZXc9ZSx0aGlzLmRvY3VtZW50PWUuZG9jdW1lbnQsdGhpcy5kb21FdmVudD10LHRoaXMuZG9tVGFyZ2V0PXQudGFyZ2V0LG1jKHRoaXMsbyl9Z2V0IHRhcmdldCgpe3JldHVybiB0aGlzLnZpZXcuZG9tQ29udmVydGVyLm1hcERvbVRvVmlldyh0aGlzLmRvbVRhcmdldCl9cHJldmVudERlZmF1bHQoKXt0aGlzLmRvbUV2ZW50LnByZXZlbnREZWZhdWx0KCl9c3RvcFByb3BhZ2F0aW9uKCl7dGhpcy5kb21FdmVudC5zdG9wUHJvcGFnYXRpb24oKX19Y2xhc3MgdnUgZXh0ZW5kcyBaY3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnVzZUNhcHR1cmU9ITF9b2JzZXJ2ZShlKXtjb25zdCB0PSdzdHJpbmcnPT10eXBlb2YgdGhpcy5kb21FdmVudFR5cGU/W3RoaXMuZG9tRXZlbnRUeXBlXTp0aGlzLmRvbUV2ZW50VHlwZTt0LmZvckVhY2goKHQpPT57dGhpcy5saXN0ZW5UbyhlLHQsKGUsdCk9Pnt0aGlzLmlzRW5hYmxlZCYmdGhpcy5vbkRvbUV2ZW50KHQpfSx7dXNlQ2FwdHVyZTp0aGlzLnVzZUNhcHR1cmV9KX0pfWZpcmUoZSx0LG8pe3RoaXMuaXNFbmFibGVkJiZ0aGlzLmRvY3VtZW50LmZpcmUoZSxuZXcgd3UodGhpcy52aWV3LHQsbykpfX1jbGFzcyB5dSBleHRlbmRzIHZ1e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZG9tRXZlbnRUeXBlPVsna2V5ZG93bicsJ2tleXVwJ119b25Eb21FdmVudChlKXt0aGlzLmZpcmUoZS50eXBlLGUse2tleUNvZGU6ZS5rZXlDb2RlLGFsdEtleTplLmFsdEtleSxjdHJsS2V5OmUuY3RybEtleXx8ZS5tZXRhS2V5LHNoaWZ0S2V5OmUuc2hpZnRLZXksZ2V0IGtleXN0cm9rZSgpe3JldHVybiB0ZSh0aGlzKX19KX19dmFyIHh1PURhdGUubm93LEN1PXh1LEF1PSdFeHBlY3RlZCBhIGZ1bmN0aW9uJyxUdT1CYSxQdT1MYSxFdT1xZTtjbGFzcyBTdSBleHRlbmRzIFpje2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEb25lRGVib3VuY2VkPUV1KChlKT0+dGhpcy5kb2N1bWVudC5maXJlKCdzZWxlY3Rpb25DaGFuZ2VEb25lJyxlKSwyMDApfW9ic2VydmUoKXtjb25zdCBlPXRoaXMuZG9jdW1lbnQ7ZS5vbigna2V5ZG93bicsKHQsbyk9Pntjb25zdCBuPWUuc2VsZWN0aW9uO24uaXNGYWtlJiZXZShvLmtleUNvZGUpJiZ0aGlzLmlzRW5hYmxlZCYmKG8ucHJldmVudERlZmF1bHQoKSx0aGlzLl9oYW5kbGVTZWxlY3Rpb25Nb3ZlKG8ua2V5Q29kZSkpfSx7cHJpb3JpdHk6J2xvd2VzdCd9KX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEb25lRGVib3VuY2VkLmNhbmNlbCgpfV9oYW5kbGVTZWxlY3Rpb25Nb3ZlKGUpe2NvbnN0IHQ9dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24sbz1uZXcgQWModC5nZXRSYW5nZXMoKSx7YmFja3dhcmQ6dC5pc0JhY2t3YXJkLGZha2U6ITF9KTsoZT09RGMuYXJyb3dsZWZ0fHxlPT1EYy5hcnJvd3VwKSYmby5zZXRUbyhvLmdldEZpcnN0UG9zaXRpb24oKSksKGU9PURjLmFycm93cmlnaHR8fGU9PURjLmFycm93ZG93bikmJm8uc2V0VG8oby5nZXRMYXN0UG9zaXRpb24oKSk7Y29uc3Qgbj17b2xkU2VsZWN0aW9uOnQsbmV3U2VsZWN0aW9uOm8sZG9tU2VsZWN0aW9uOm51bGx9O3RoaXMuZG9jdW1lbnQuZmlyZSgnc2VsZWN0aW9uQ2hhbmdlJyxuKSx0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlRG9uZURlYm91bmNlZChuKX19Y29uc3QgT3U9e2Vycm9yKGUsdCl7Y29uc29sZS5lcnJvcihuKGUpLHQpfSx3YXJuKGUsdCl7Y29uc29sZS53YXJuKG4oZSksdCl9fTt2YXIgUnU9T3U7Y2xhc3MgSXUgZXh0ZW5kcyBaY3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLm11dGF0aW9uT2JzZXJ2ZXI9ZS5nZXRPYnNlcnZlcihfdSksdGhpcy5zZWxlY3Rpb249dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24sdGhpcy5kb21Db252ZXJ0ZXI9ZS5kb21Db252ZXJ0ZXIsdGhpcy5fZG9jdW1lbnRzPW5ldyBXZWFrU2V0LHRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VEb25lRGVib3VuY2VkPUV1KChlKT0+dGhpcy5kb2N1bWVudC5maXJlKCdzZWxlY3Rpb25DaGFuZ2VEb25lJyxlKSwyMDApLHRoaXMuX2NsZWFySW5maW5pdGVMb29wSW50ZXJ2YWw9c2V0SW50ZXJ2YWwoKCk9PnRoaXMuX2NsZWFySW5maW5pdGVMb29wKCksMWUzKSx0aGlzLl9sb29wYmFja0NvdW50ZXI9MH1vYnNlcnZlKGUpe2NvbnN0IHQ9ZS5vd25lckRvY3VtZW50O3RoaXMuX2RvY3VtZW50cy5oYXModCl8fCh0aGlzLmxpc3RlblRvKHQsJ3NlbGVjdGlvbmNoYW5nZScsKCk9Pnt0aGlzLl9oYW5kbGVTZWxlY3Rpb25DaGFuZ2UodCl9KSx0aGlzLl9kb2N1bWVudHMuYWRkKHQpKX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLGNsZWFySW50ZXJ2YWwodGhpcy5fY2xlYXJJbmZpbml0ZUxvb3BJbnRlcnZhbCksdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQuY2FuY2VsKCl9X2hhbmRsZVNlbGVjdGlvbkNoYW5nZShlKXtpZih0aGlzLmlzRW5hYmxlZCYmKHRoaXMuZG9jdW1lbnQuaXNGb2N1c2VkfHx0aGlzLmRvY3VtZW50LmlzUmVhZE9ubHkpKXt0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZmx1c2goKTtjb25zdCB0PWUuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCksbz10aGlzLmRvbUNvbnZlcnRlci5kb21TZWxlY3Rpb25Ub1ZpZXcodCk7aWYoISh0aGlzLnNlbGVjdGlvbi5pc0VxdWFsKG8pJiZ0aGlzLmRvbUNvbnZlcnRlci5pc0RvbVNlbGVjdGlvbkNvcnJlY3QodCkpKXtpZig2MDwrK3RoaXMuX2xvb3BiYWNrQ291bnRlcilyZXR1cm4gdm9pZCBSdS53YXJuKCdzZWxlY3Rpb25jaGFuZ2UtaW5maW5pdGUtbG9vcDogU2VsZWN0aW9uIGNoYW5nZSBvYnNlcnZlciBkZXRlY3RlZCBhbiBpbmZpbml0ZSByZW5kZXJpbmcgbG9vcC4nKTtpZih0aGlzLnNlbGVjdGlvbi5pc1NpbWlsYXIobykpdGhpcy52aWV3LnJlbmRlcigpO2Vsc2V7Y29uc3QgZT17b2xkU2VsZWN0aW9uOnRoaXMuc2VsZWN0aW9uLG5ld1NlbGVjdGlvbjpvLGRvbVNlbGVjdGlvbjp0fTt0aGlzLmRvY3VtZW50LmZpcmUoJ3NlbGVjdGlvbkNoYW5nZScsZSksdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZURvbmVEZWJvdW5jZWQoZSl9fX19X2NsZWFySW5maW5pdGVMb29wKCl7dGhpcy5fbG9vcGJhY2tDb3VudGVyPTB9fWNsYXNzIFZ1IGV4dGVuZHMgdnV7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5kb21FdmVudFR5cGU9Wydmb2N1cycsJ2JsdXInXSx0aGlzLnVzZUNhcHR1cmU9ITA7Y29uc3QgdD10aGlzLmRvY3VtZW50O3Qub24oJ2ZvY3VzJywoKT0+e3QuaXNGb2N1c2VkPSEwLHRoaXMuX3JlbmRlclRpbWVvdXRJZD1zZXRUaW1lb3V0KCgpPT5lLnJlbmRlcigpLDUwKX0pLHQub24oJ2JsdXInLChvLG4pPT57Y29uc3QgaT10LnNlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnQ7KG51bGw9PT1pfHxpPT09bi50YXJnZXQpJiYodC5pc0ZvY3VzZWQ9ITEsZS5yZW5kZXIoKSl9KX1vbkRvbUV2ZW50KGUpe3RoaXMuZmlyZShlLnR5cGUsZSl9ZGVzdHJveSgpe3RoaXMuX3JlbmRlclRpbWVvdXRJZCYmY2xlYXJUaW1lb3V0KHRoaXMuX3JlbmRlclRpbWVvdXRJZCksc3VwZXIuZGVzdHJveSgpfX1jbGFzcyBGdSBleHRlbmRzIHZ1e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZG9tRXZlbnRUeXBlPVsnY29tcG9zaXRpb25zdGFydCcsJ2NvbXBvc2l0aW9udXBkYXRlJywnY29tcG9zaXRpb25lbmQnXTtjb25zdCB0PXRoaXMuZG9jdW1lbnQ7dC5vbignY29tcG9zaXRpb25zdGFydCcsKCk9Pnt0LmlzQ29tcG9zaW5nPSEwfSksdC5vbignY29tcG9zaXRpb25lbmQnLCgpPT57dC5pc0NvbXBvc2luZz0hMX0pfW9uRG9tRXZlbnQoZSl7dGhpcy5maXJlKGUudHlwZSxlKX19dmFyIE51PWZ1bmN0aW9uKGUpe3JldHVybiEhZSYmMT09PWUubm9kZVR5cGUmJlVhKGUpJiYhUWEoZSl9O2NsYXNzIE11e2NvbnN0cnVjdG9yKGUpe2NvbnN0IHQ9VWUoZSk7aWYoT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsJ19zb3VyY2UnLHt2YWx1ZTplLl9zb3VyY2V8fGUsd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMX0pLE51KGUpfHx0KXtjb25zdCBvPXQ/ZS5zdGFydENvbnRhaW5lcjplO28ub3duZXJEb2N1bWVudCYmby5vd25lckRvY3VtZW50LmJvZHkuY29udGFpbnMobyl8fFJ1Lndhcm4oJ3JlY3Qtc291cmNlLW5vdC1pbi1kb206IFRoZSBzb3VyY2Ugb2YgdGhpcyByZWN0IGRvZXMgbm90IGJlbG9uZyB0byBhbnkgcmVuZGVyZWQgRE9NIHRyZWUuJyx7c291cmNlOmV9KSx0P0tlKHRoaXMsTXUuZ2V0RG9tUmFuZ2VSZWN0cyhlKVswXSk6S2UodGhpcyxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKX1lbHNlIGlmKERlKGUpKXtjb25zdHtpbm5lcldpZHRoOnQsaW5uZXJIZWlnaHQ6b309ZTtLZSh0aGlzLHt0b3A6MCxyaWdodDp0LGJvdHRvbTpvLGxlZnQ6MCx3aWR0aDp0LGhlaWdodDpvfSl9ZWxzZSBLZSh0aGlzLGUpfWNsb25lKCl7cmV0dXJuIG5ldyBNdSh0aGlzKX1tb3ZlVG8oZSx0KXtyZXR1cm4gdGhpcy50b3A9dCx0aGlzLnJpZ2h0PWUrdGhpcy53aWR0aCx0aGlzLmJvdHRvbT10K3RoaXMuaGVpZ2h0LHRoaXMubGVmdD1lLHRoaXN9bW92ZUJ5KGUsdCl7cmV0dXJuIHRoaXMudG9wKz10LHRoaXMucmlnaHQrPWUsdGhpcy5sZWZ0Kz1lLHRoaXMuYm90dG9tKz10LHRoaXN9Z2V0SW50ZXJzZWN0aW9uKGUpe2NvbnN0IHQ9e3RvcDpCYSh0aGlzLnRvcCxlLnRvcCkscmlnaHQ6TGEodGhpcy5yaWdodCxlLnJpZ2h0KSxib3R0b206TGEodGhpcy5ib3R0b20sZS5ib3R0b20pLGxlZnQ6QmEodGhpcy5sZWZ0LGUubGVmdCl9O3JldHVybiB0LndpZHRoPXQucmlnaHQtdC5sZWZ0LHQuaGVpZ2h0PXQuYm90dG9tLXQudG9wLDA+dC53aWR0aHx8MD50LmhlaWdodD9udWxsOm5ldyBNdSh0KX1nZXRJbnRlcnNlY3Rpb25BcmVhKGUpe2NvbnN0IHQ9dGhpcy5nZXRJbnRlcnNlY3Rpb24oZSk7cmV0dXJuIHQ/dC5nZXRBcmVhKCk6MH1nZXRBcmVhKCl7cmV0dXJuIHRoaXMud2lkdGgqdGhpcy5oZWlnaHR9Z2V0VmlzaWJsZSgpe2NvbnN0IGU9dGhpcy5fc291cmNlO2xldCB0PXRoaXMuY2xvbmUoKTtpZighR2UoZSkpZm9yKGxldCBvPWUucGFyZW50Tm9kZXx8ZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcjtvJiYhR2Uobyk7KXtjb25zdCBlPW5ldyBNdShvKSxuPXQuZ2V0SW50ZXJzZWN0aW9uKGUpO2lmKG4pbi5nZXRBcmVhKCk8dC5nZXRBcmVhKCkmJih0PW4pO2Vsc2UgcmV0dXJuIG51bGw7bz1vLnBhcmVudE5vZGV9cmV0dXJuIHR9aXNFcXVhbChlKXtmb3IoY29uc3QgdCBvZiBEdSlpZih0aGlzW3RdIT09ZVt0XSlyZXR1cm4hMTtyZXR1cm4hMH1jb250YWlucyhlKXtjb25zdCB0PXRoaXMuZ2V0SW50ZXJzZWN0aW9uKGUpO3JldHVybiEhKHQmJnQuaXNFcXVhbChlKSl9ZXhjbHVkZVNjcm9sbGJhcnNBbmRCb3JkZXJzKCl7Y29uc3QgZT10aGlzLl9zb3VyY2U7bGV0IHQsbztpZihEZShlKSl0PWUuaW5uZXJXaWR0aC1lLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxvPWUuaW5uZXJIZWlnaHQtZS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O2Vsc2V7Y29uc3Qgbj1IZSh0aGlzLl9zb3VyY2UpO3Q9ZS5vZmZzZXRXaWR0aC1lLmNsaWVudFdpZHRoLG89ZS5vZmZzZXRIZWlnaHQtZS5jbGllbnRIZWlnaHQsdGhpcy5tb3ZlQnkobi5sZWZ0LG4udG9wKX1yZXR1cm4gdGhpcy53aWR0aC09dCx0aGlzLnJpZ2h0LT10LHRoaXMuaGVpZ2h0LT1vLHRoaXMuYm90dG9tLT1vLHRoaXN9c3RhdGljIGdldERvbVJhbmdlUmVjdHMoZSl7Y29uc3QgdD1bXSxvPUFycmF5LmZyb20oZS5nZXRDbGllbnRSZWN0cygpKTtpZihvLmxlbmd0aClmb3IoY29uc3QgZSBvZiBvKXQucHVzaChuZXcgTXUoZSkpO2Vsc2V7bGV0IG89ZS5zdGFydENvbnRhaW5lcjtTZShvKSYmKG89by5wYXJlbnROb2RlKTtjb25zdCBuPW5ldyBNdShvLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKTtuLnJpZ2h0PW4ubGVmdCxuLndpZHRoPTAsdC5wdXNoKG4pfXJldHVybiB0fX1jb25zdCBEdT1bJ3RvcCcsJ3JpZ2h0JywnYm90dG9tJywnbGVmdCcsJ3dpZHRoJywnaGVpZ2h0J107T2JqZWN0LmFzc2lnbih7fSx7c2Nyb2xsVmlld3BvcnRUb1Nob3dUYXJnZXQ6JGUsc2Nyb2xsQW5jZXN0b3JzVG9TaG93VGFyZ2V0OmZ1bmN0aW9uKGUpe2NvbnN0IHQ9bnQoZSk7UWUodCwoKT0+bmV3IE11KGUpKX19KTtjbGFzcyBCdXtjb25zdHJ1Y3Rvcigpe3RoaXMuZG9jdW1lbnQ9bmV3IEVjLHRoaXMuZG9tQ29udmVydGVyPW5ldyBKYyx0aGlzLl9yZW5kZXJlcj1uZXcgR2ModGhpcy5kb21Db252ZXJ0ZXIsdGhpcy5kb2N1bWVudC5zZWxlY3Rpb24pLHRoaXMuX3JlbmRlcmVyLmJpbmQoJ2lzRm9jdXNlZCcpLnRvKHRoaXMuZG9jdW1lbnQpLHRoaXMuZG9tUm9vdHM9bmV3IE1hcCx0aGlzLl9vYnNlcnZlcnM9bmV3IE1hcCx0aGlzLl9vbmdvaW5nQ2hhbmdlPSExLHRoaXMuX3JlbmRlcmluZ0luUHJvZ3Jlc3M9ITEsdGhpcy5fcG9zdEZpeGVyc0luUHJvZ3Jlc3M9ITEsdGhpcy5fd3JpdGVyPW5ldyB6Yyh0aGlzLmRvY3VtZW50KSx0aGlzLmFkZE9ic2VydmVyKF91KSx0aGlzLmFkZE9ic2VydmVyKEl1KSx0aGlzLmFkZE9ic2VydmVyKFZ1KSx0aGlzLmFkZE9ic2VydmVyKHl1KSx0aGlzLmFkZE9ic2VydmVyKFN1KSx0aGlzLmFkZE9ic2VydmVyKEZ1KSxDZSh0aGlzKSxyZSh0aGlzKSx0aGlzLm9uKCdyZW5kZXInLCgpPT57dGhpcy5fcmVuZGVyKCl9KX1hdHRhY2hEb21Sb290KGUsdD0nbWFpbicpe2NvbnN0IG89dGhpcy5kb2N1bWVudC5nZXRSb290KHQpO28uX25hbWU9ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCksdGhpcy5kb21Sb290cy5zZXQodCxlKSx0aGlzLmRvbUNvbnZlcnRlci5iaW5kRWxlbWVudHMoZSxvKSx0aGlzLl9yZW5kZXJlci5tYXJrVG9TeW5jKCdjaGlsZHJlbicsbyksdGhpcy5fcmVuZGVyZXIuZG9tRG9jdW1lbnRzLmFkZChlLm93bmVyRG9jdW1lbnQpLG8ub24oJ2NoYW5nZTpjaGlsZHJlbicsKGUsdCk9PnRoaXMuX3JlbmRlcmVyLm1hcmtUb1N5bmMoJ2NoaWxkcmVuJyx0KSksby5vbignY2hhbmdlOmF0dHJpYnV0ZXMnLChlLHQpPT50aGlzLl9yZW5kZXJlci5tYXJrVG9TeW5jKCdhdHRyaWJ1dGVzJyx0KSksby5vbignY2hhbmdlOnRleHQnLChlLHQpPT50aGlzLl9yZW5kZXJlci5tYXJrVG9TeW5jKCd0ZXh0Jyx0KSk7Zm9yKGNvbnN0IG8gb2YgdGhpcy5fb2JzZXJ2ZXJzLnZhbHVlcygpKW8ub2JzZXJ2ZShlLHQpfWdldERvbVJvb3QoZT0nbWFpbicpe3JldHVybiB0aGlzLmRvbVJvb3RzLmdldChlKX1hZGRPYnNlcnZlcihlKXtsZXQgdD10aGlzLl9vYnNlcnZlcnMuZ2V0KGUpO2lmKHQpcmV0dXJuIHQ7dD1uZXcgZSh0aGlzKSx0aGlzLl9vYnNlcnZlcnMuc2V0KGUsdCk7Zm9yKGNvbnN0W28sbl1vZiB0aGlzLmRvbVJvb3RzKXQub2JzZXJ2ZShuLG8pO3JldHVybiB0LmVuYWJsZSgpLHR9Z2V0T2JzZXJ2ZXIoZSl7cmV0dXJuIHRoaXMuX29ic2VydmVycy5nZXQoZSl9ZGlzYWJsZU9ic2VydmVycygpe2Zvcihjb25zdCBlIG9mIHRoaXMuX29ic2VydmVycy52YWx1ZXMoKSllLmRpc2FibGUoKX1lbmFibGVPYnNlcnZlcnMoKXtmb3IoY29uc3QgZSBvZiB0aGlzLl9vYnNlcnZlcnMudmFsdWVzKCkpZS5lbmFibGUoKX1zY3JvbGxUb1RoZVNlbGVjdGlvbigpe2NvbnN0IGU9dGhpcy5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0Rmlyc3RSYW5nZSgpO2UmJiRlKHt0YXJnZXQ6dGhpcy5kb21Db252ZXJ0ZXIudmlld1JhbmdlVG9Eb20oZSksdmlld3BvcnRPZmZzZXQ6MjB9KX1mb2N1cygpe2lmKCF0aGlzLmRvY3VtZW50LmlzRm9jdXNlZCl7Y29uc3QgZT10aGlzLmRvY3VtZW50LnNlbGVjdGlvbi5lZGl0YWJsZUVsZW1lbnQ7ZT8odGhpcy5kb21Db252ZXJ0ZXIuZm9jdXMoZSksdGhpcy5yZW5kZXIoKSk6UnUud2Fybigndmlldy1mb2N1cy1uby1zZWxlY3Rpb246IFRoZXJlIGlzIG5vIHNlbGVjdGlvbiBpbiBhbnkgZWRpdGFibGUgdG8gZm9jdXMuJyl9fWNoYW5nZShlKXtpZih0aGlzLl9yZW5kZXJpbmdJblByb2dyZXNzfHx0aGlzLl9wb3N0Rml4ZXJzSW5Qcm9ncmVzcyl0aHJvdyBuZXcgWmEoJ2Nhbm5vdC1jaGFuZ2Utdmlldy10cmVlOiBBdHRlbXB0aW5nIHRvIG1ha2UgY2hhbmdlcyB0byB0aGUgdmlldyB3aGVuIGl0IGlzIGluIGluY29ycmVjdCBzdGF0ZTogcmVuZGVyaW5nIG9yIHBvc3QgZml4ZXJzIGFyZSBpbiBwcm9ncmVzcy4gVGhpcyBtYXkgY2F1c2Ugc29tZSB1bmV4cGVjdGVkIGJlaGF2aW91ciBhbmQgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuIHRoZSBET00gYW5kIHRoZSB2aWV3LicpO3JldHVybiB0aGlzLl9vbmdvaW5nQ2hhbmdlP3ZvaWQgZSh0aGlzLl93cml0ZXIpOnZvaWQodGhpcy5fb25nb2luZ0NoYW5nZT0hMCxlKHRoaXMuX3dyaXRlciksdGhpcy5fb25nb2luZ0NoYW5nZT0hMSx0aGlzLl9wb3N0Rml4ZXJzSW5Qcm9ncmVzcz0hMCx0aGlzLmRvY3VtZW50Ll9jYWxsUG9zdEZpeGVycyh0aGlzLl93cml0ZXIpLHRoaXMuX3Bvc3RGaXhlcnNJblByb2dyZXNzPSExLHRoaXMuZmlyZSgncmVuZGVyJykpfXJlbmRlcigpe3RoaXMuY2hhbmdlKCgpPT57fSl9ZGVzdHJveSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuX29ic2VydmVycy52YWx1ZXMoKSllLmRlc3Ryb3koKTt0aGlzLnN0b3BMaXN0ZW5pbmcoKX1fcmVuZGVyKCl7dGhpcy5fcmVuZGVyaW5nSW5Qcm9ncmVzcz0hMCx0aGlzLmRpc2FibGVPYnNlcnZlcnMoKSx0aGlzLl9yZW5kZXJlci5yZW5kZXIoKSx0aGlzLmVuYWJsZU9ic2VydmVycygpLHRoaXMuX3JlbmRlcmluZ0luUHJvZ3Jlc3M9ITF9fWYoQnUsYmMpO2NsYXNzIEx1e2NvbnN0cnVjdG9yKGUpe3RoaXMucGFyZW50PW51bGwsdGhpcy5fYXR0cnM9cnQoZSl9Z2V0IGluZGV4KCl7bGV0IGU7aWYoIXRoaXMucGFyZW50KXJldHVybiBudWxsO2lmKG51bGw9PT0oZT10aGlzLnBhcmVudC5nZXRDaGlsZEluZGV4KHRoaXMpKSl0aHJvdyBuZXcgWmEoJ21vZGVsLW5vZGUtbm90LWZvdW5kLWluLXBhcmVudDogVGhlIG5vZGVcXCdzIHBhcmVudCBkb2VzIG5vdCBjb250YWluIHRoaXMgbm9kZS4nKTtyZXR1cm4gZX1nZXQgc3RhcnRPZmZzZXQoKXtsZXQgZTtpZighdGhpcy5wYXJlbnQpcmV0dXJuIG51bGw7aWYobnVsbD09PShlPXRoaXMucGFyZW50LmdldENoaWxkU3RhcnRPZmZzZXQodGhpcykpKXRocm93IG5ldyBaYSgnbW9kZWwtbm9kZS1ub3QtZm91bmQtaW4tcGFyZW50OiBUaGUgbm9kZVxcJ3MgcGFyZW50IGRvZXMgbm90IGNvbnRhaW4gdGhpcyBub2RlLicpO3JldHVybiBlfWdldCBvZmZzZXRTaXplKCl7cmV0dXJuIDF9Z2V0IGVuZE9mZnNldCgpe3JldHVybiB0aGlzLnBhcmVudD90aGlzLnN0YXJ0T2Zmc2V0K3RoaXMub2Zmc2V0U2l6ZTpudWxsfWdldCBuZXh0U2libGluZygpe2NvbnN0IGU9dGhpcy5pbmRleDtyZXR1cm4gbnVsbCE9PWUmJnRoaXMucGFyZW50LmdldENoaWxkKGUrMSl8fG51bGx9Z2V0IHByZXZpb3VzU2libGluZygpe2NvbnN0IGU9dGhpcy5pbmRleDtyZXR1cm4gbnVsbCE9PWUmJnRoaXMucGFyZW50LmdldENoaWxkKGUtMSl8fG51bGx9Z2V0IHJvb3QoKXtsZXQgZT10aGlzO2Zvcig7ZS5wYXJlbnQ7KWU9ZS5wYXJlbnQ7cmV0dXJuIGV9Z2V0IGRvY3VtZW50KCl7cmV0dXJuIHRoaXMucm9vdD09dGhpcz9udWxsOnRoaXMucm9vdC5kb2N1bWVudHx8bnVsbH1nZXRQYXRoKCl7Y29uc3QgZT1bXTtmb3IobGV0IHQ9dGhpczt0LnBhcmVudDspZS51bnNoaWZ0KHQuc3RhcnRPZmZzZXQpLHQ9dC5wYXJlbnQ7cmV0dXJuIGV9Z2V0QW5jZXN0b3JzKGU9e2luY2x1ZGVTZWxmOiExLHBhcmVudEZpcnN0OiExfSl7Y29uc3QgdD1bXTtmb3IobGV0IG89ZS5pbmNsdWRlU2VsZj90aGlzOnRoaXMucGFyZW50O287KXRbZS5wYXJlbnRGaXJzdD8ncHVzaCc6J3Vuc2hpZnQnXShvKSxvPW8ucGFyZW50O3JldHVybiB0fWdldENvbW1vbkFuY2VzdG9yKGUsdD17fSl7Y29uc3Qgbz10aGlzLmdldEFuY2VzdG9ycyh0KSxuPWUuZ2V0QW5jZXN0b3JzKHQpO2xldCByPTA7Zm9yKDtvW3JdPT1uW3JdJiZvW3JdOylyKys7cmV0dXJuIDA9PXI/bnVsbDpvW3ItMV19aXNCZWZvcmUoZSl7aWYodGhpcz09ZSlyZXR1cm4hMTtpZih0aGlzLnJvb3QhPT1lLnJvb3QpcmV0dXJuITE7Y29uc3QgdD10aGlzLmdldFBhdGgoKSxvPWUuZ2V0UGF0aCgpLG49QSh0LG8pO3JldHVybiEoJ3ByZWZpeCchPT1uKXx8J2V4dGVuc2lvbichPT1uJiZ0W25dPG9bbl19aXNBZnRlcihlKXtyZXR1cm4gdGhpcyE9ZSYmISh0aGlzLnJvb3QhPT1lLnJvb3QpJiYhdGhpcy5pc0JlZm9yZShlKX1oYXNBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMuX2F0dHJzLmhhcyhlKX1nZXRBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMuX2F0dHJzLmdldChlKX1nZXRBdHRyaWJ1dGVzKCl7cmV0dXJuIHRoaXMuX2F0dHJzLmVudHJpZXMoKX1nZXRBdHRyaWJ1dGVLZXlzKCl7cmV0dXJuIHRoaXMuX2F0dHJzLmtleXMoKX10b0pTT04oKXtjb25zdCBlPXt9O3JldHVybiB0aGlzLl9hdHRycy5zaXplJiYoZS5hdHRyaWJ1dGVzPVsuLi50aGlzLl9hdHRyc10pLGV9X2Nsb25lKCl7cmV0dXJuIG5ldyBMdSh0aGlzLl9hdHRycyl9X3JlbW92ZSgpe3RoaXMucGFyZW50Ll9yZW1vdmVDaGlsZHJlbih0aGlzLmluZGV4KX1fc2V0QXR0cmlidXRlKGUsdCl7dGhpcy5fYXR0cnMuc2V0KGUsdCl9X3NldEF0dHJpYnV0ZXNUbyhlKXt0aGlzLl9hdHRycz1ydChlKX1fcmVtb3ZlQXR0cmlidXRlKGUpe3JldHVybiB0aGlzLl9hdHRycy5kZWxldGUoZSl9X2NsZWFyQXR0cmlidXRlcygpe3RoaXMuX2F0dHJzLmNsZWFyKCl9aXMoZSl7cmV0dXJuJ25vZGUnPT1lfX1jbGFzcyB6dSBleHRlbmRzIEx1e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIodCksdGhpcy5fZGF0YT1lfHwnJ31nZXQgb2Zmc2V0U2l6ZSgpe3JldHVybiB0aGlzLmRhdGEubGVuZ3RofWdldCBkYXRhKCl7cmV0dXJuIHRoaXMuX2RhdGF9aXMoZSl7cmV0dXJuJ3RleHQnPT1lfHxzdXBlci5pcyhlKX10b0pTT04oKXtjb25zdCBlPXN1cGVyLnRvSlNPTigpO3JldHVybiBlLmRhdGE9dGhpcy5kYXRhLGV9X2Nsb25lKCl7cmV0dXJuIG5ldyB6dSh0aGlzLmRhdGEsdGhpcy5nZXRBdHRyaWJ1dGVzKCkpfXN0YXRpYyBmcm9tSlNPTihlKXtyZXR1cm4gbmV3IHp1KGUuZGF0YSxlLmF0dHJpYnV0ZXMpfX1jbGFzcyBqdXtjb25zdHJ1Y3RvcihlLHQsbyl7aWYodGhpcy50ZXh0Tm9kZT1lLDA+dHx8dD5lLm9mZnNldFNpemUpdGhyb3cgbmV3IFphKCdtb2RlbC10ZXh0cHJveHktd3Jvbmctb2Zmc2V0aW50ZXh0OiBHaXZlbiBvZmZzZXRJblRleHQgdmFsdWUgaXMgaW5jb3JyZWN0LicpO2lmKDA+b3x8dCtvPmUub2Zmc2V0U2l6ZSl0aHJvdyBuZXcgWmEoJ21vZGVsLXRleHRwcm94eS13cm9uZy1sZW5ndGg6IEdpdmVuIGxlbmd0aCB2YWx1ZSBpcyBpbmNvcnJlY3QuJyk7dGhpcy5kYXRhPWUuZGF0YS5zdWJzdHJpbmcodCx0K28pLHRoaXMub2Zmc2V0SW5UZXh0PXR9Z2V0IHN0YXJ0T2Zmc2V0KCl7cmV0dXJuIG51bGw9PT10aGlzLnRleHROb2RlLnN0YXJ0T2Zmc2V0P251bGw6dGhpcy50ZXh0Tm9kZS5zdGFydE9mZnNldCt0aGlzLm9mZnNldEluVGV4dH1nZXQgb2Zmc2V0U2l6ZSgpe3JldHVybiB0aGlzLmRhdGEubGVuZ3RofWdldCBlbmRPZmZzZXQoKXtyZXR1cm4gbnVsbD09PXRoaXMuc3RhcnRPZmZzZXQ/bnVsbDp0aGlzLnN0YXJ0T2Zmc2V0K3RoaXMub2Zmc2V0U2l6ZX1nZXQgaXNQYXJ0aWFsKCl7cmV0dXJuIHRoaXMub2Zmc2V0U2l6ZSE9PXRoaXMudGV4dE5vZGUub2Zmc2V0U2l6ZX1nZXQgcGFyZW50KCl7cmV0dXJuIHRoaXMudGV4dE5vZGUucGFyZW50fWdldCByb290KCl7cmV0dXJuIHRoaXMudGV4dE5vZGUucm9vdH1nZXQgZG9jdW1lbnQoKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5kb2N1bWVudH1pcyhlKXtyZXR1cm4ndGV4dFByb3h5Jz09ZX1nZXRQYXRoKCl7Y29uc3QgZT10aGlzLnRleHROb2RlLmdldFBhdGgoKTtyZXR1cm4gMDxlLmxlbmd0aCYmKGVbZS5sZW5ndGgtMV0rPXRoaXMub2Zmc2V0SW5UZXh0KSxlfWdldEFuY2VzdG9ycyhlPXtpbmNsdWRlU2VsZjohMSxwYXJlbnRGaXJzdDohMX0pe2NvbnN0IHQ9W107Zm9yKGxldCBvPWUuaW5jbHVkZVNlbGY/dGhpczp0aGlzLnBhcmVudDtvOyl0W2UucGFyZW50Rmlyc3Q/J3B1c2gnOid1bnNoaWZ0J10obyksbz1vLnBhcmVudDtyZXR1cm4gdH1oYXNBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMudGV4dE5vZGUuaGFzQXR0cmlidXRlKGUpfWdldEF0dHJpYnV0ZShlKXtyZXR1cm4gdGhpcy50ZXh0Tm9kZS5nZXRBdHRyaWJ1dGUoZSl9Z2V0QXR0cmlidXRlcygpe3JldHVybiB0aGlzLnRleHROb2RlLmdldEF0dHJpYnV0ZXMoKX1nZXRBdHRyaWJ1dGVLZXlzKCl7cmV0dXJuIHRoaXMudGV4dE5vZGUuZ2V0QXR0cmlidXRlS2V5cygpfX1jbGFzcyBxdXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9ub2Rlcz1bXSxlJiZ0aGlzLl9pbnNlcnROb2RlcygwLGUpfVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXMuX25vZGVzW1N5bWJvbC5pdGVyYXRvcl0oKX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX25vZGVzLmxlbmd0aH1nZXQgbWF4T2Zmc2V0KCl7cmV0dXJuIHRoaXMuX25vZGVzLnJlZHVjZSgoZSx0KT0+ZSt0Lm9mZnNldFNpemUsMCl9Z2V0Tm9kZShlKXtyZXR1cm4gdGhpcy5fbm9kZXNbZV18fG51bGx9Z2V0Tm9kZUluZGV4KGUpe2NvbnN0IHQ9dGhpcy5fbm9kZXMuaW5kZXhPZihlKTtyZXR1cm4tMT09dD9udWxsOnR9Z2V0Tm9kZVN0YXJ0T2Zmc2V0KGUpe2NvbnN0IHQ9dGhpcy5nZXROb2RlSW5kZXgoZSk7cmV0dXJuIG51bGw9PT10P251bGw6dGhpcy5fbm9kZXMuc2xpY2UoMCx0KS5yZWR1Y2UoKGUsdCk9PmUrdC5vZmZzZXRTaXplLDApfWluZGV4VG9PZmZzZXQoZSl7aWYoZT09dGhpcy5fbm9kZXMubGVuZ3RoKXJldHVybiB0aGlzLm1heE9mZnNldDtjb25zdCB0PXRoaXMuX25vZGVzW2VdO2lmKCF0KXRocm93IG5ldyBaYSgnbW9kZWwtbm9kZWxpc3QtaW5kZXgtb3V0LW9mLWJvdW5kczogR2l2ZW4gaW5kZXggY2Fubm90IGJlIGZvdW5kIGluIHRoZSBub2RlIGxpc3QuJyk7cmV0dXJuIHRoaXMuZ2V0Tm9kZVN0YXJ0T2Zmc2V0KHQpfW9mZnNldFRvSW5kZXgoZSl7bGV0IHQ9MDtmb3IoY29uc3QgbyBvZiB0aGlzLl9ub2Rlcyl7aWYoZT49dCYmZTx0K28ub2Zmc2V0U2l6ZSlyZXR1cm4gdGhpcy5nZXROb2RlSW5kZXgobyk7dCs9by5vZmZzZXRTaXplfWlmKHQhPWUpdGhyb3cgbmV3IFphKCdtb2RlbC1ub2RlbGlzdC1vZmZzZXQtb3V0LW9mLWJvdW5kczogR2l2ZW4gb2Zmc2V0IGNhbm5vdCBiZSBmb3VuZCBpbiB0aGUgbm9kZSBsaXN0LicpO3JldHVybiB0aGlzLmxlbmd0aH1faW5zZXJ0Tm9kZXMoZSx0KXtmb3IoY29uc3QgbyBvZiB0KWlmKCEobyBpbnN0YW5jZW9mIEx1KSl0aHJvdyBuZXcgWmEoJ21vZGVsLW5vZGVsaXN0LWluc2VydE5vZGVzLW5vdC1ub2RlOiBUcnlpbmcgdG8gaW5zZXJ0IGFuIG9iamVjdCB3aGljaCBpcyBub3QgYSBOb2RlIGluc3RhbmNlLicpO3RoaXMuX25vZGVzLnNwbGljZShlLDAsLi4udCl9X3JlbW92ZU5vZGVzKGUsdD0xKXtyZXR1cm4gdGhpcy5fbm9kZXMuc3BsaWNlKGUsdCl9dG9KU09OKCl7cmV0dXJuIHRoaXMuX25vZGVzLm1hcCgoZSk9PmUudG9KU09OKCkpfX1jbGFzcyBXdSBleHRlbmRzIEx1e2NvbnN0cnVjdG9yKGUsdCxvKXtzdXBlcih0KSx0aGlzLm5hbWU9ZSx0aGlzLl9jaGlsZHJlbj1uZXcgcXUsbyYmdGhpcy5faW5zZXJ0Q2hpbGQoMCxvKX1nZXQgY2hpbGRDb3VudCgpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5sZW5ndGh9Z2V0IG1heE9mZnNldCgpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5tYXhPZmZzZXR9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMuY2hpbGRDb3VudH1pcyhlLHQ9bnVsbCl7cmV0dXJuIHQ/J2VsZW1lbnQnPT1lJiZ0PT10aGlzLm5hbWU6J2VsZW1lbnQnPT1lfHxlPT10aGlzLm5hbWV8fHN1cGVyLmlzKGUpfWdldENoaWxkKGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5nZXROb2RlKGUpfWdldENoaWxkcmVuKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKX1nZXRDaGlsZEluZGV4KGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5nZXROb2RlSW5kZXgoZSl9Z2V0Q2hpbGRTdGFydE9mZnNldChlKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4uZ2V0Tm9kZVN0YXJ0T2Zmc2V0KGUpfW9mZnNldFRvSW5kZXgoZSl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuLm9mZnNldFRvSW5kZXgoZSl9Z2V0Tm9kZUJ5UGF0aChlKXtsZXQgdD10aGlzO2Zvcihjb25zdCBvIG9mIGUpdD10LmdldENoaWxkKHQub2Zmc2V0VG9JbmRleChvKSk7cmV0dXJuIHR9dG9KU09OKCl7Y29uc3QgZT1zdXBlci50b0pTT04oKTtpZihlLm5hbWU9dGhpcy5uYW1lLDA8dGhpcy5fY2hpbGRyZW4ubGVuZ3RoKXtlLmNoaWxkcmVuPVtdO2Zvcihjb25zdCB0IG9mIHRoaXMuX2NoaWxkcmVuKWUuY2hpbGRyZW4ucHVzaCh0LnRvSlNPTigpKX1yZXR1cm4gZX1fY2xvbmUoZT0hMSl7Y29uc3QgdD1lP0FycmF5LmZyb20odGhpcy5fY2hpbGRyZW4pLm1hcCgoZSk9PmUuX2Nsb25lKCEwKSk6bnVsbDtyZXR1cm4gbmV3IFd1KHRoaXMubmFtZSx0aGlzLmdldEF0dHJpYnV0ZXMoKSx0KX1fYXBwZW5kQ2hpbGQoZSl7dGhpcy5faW5zZXJ0Q2hpbGQodGhpcy5jaGlsZENvdW50LGUpfV9pbnNlcnRDaGlsZChlLHQpe2NvbnN0IG89YXQodCk7Zm9yKGNvbnN0IG4gb2YgbyludWxsIT09bi5wYXJlbnQmJm4uX3JlbW92ZSgpLG4ucGFyZW50PXRoaXM7dGhpcy5fY2hpbGRyZW4uX2luc2VydE5vZGVzKGUsbyl9X3JlbW92ZUNoaWxkcmVuKGUsdD0xKXtjb25zdCBvPXRoaXMuX2NoaWxkcmVuLl9yZW1vdmVOb2RlcyhlLHQpO2Zvcihjb25zdCBuIG9mIG8pbi5wYXJlbnQ9bnVsbDtyZXR1cm4gb31zdGF0aWMgZnJvbUpTT04oZSl7bGV0IHQ9bnVsbDtpZihlLmNoaWxkcmVuKXt0PVtdO2Zvcihjb25zdCBvIG9mIGUuY2hpbGRyZW4pby5uYW1lP3QucHVzaChXdS5mcm9tSlNPTihvKSk6dC5wdXNoKHp1LmZyb21KU09OKG8pKX1yZXR1cm4gbmV3IFd1KGUubmFtZSxlLmF0dHJpYnV0ZXMsdCl9fWNsYXNzIFV1e2NvbnN0cnVjdG9yKGU9e30pe2lmKCFlLmJvdW5kYXJpZXMmJiFlLnN0YXJ0UG9zaXRpb24pdGhyb3cgbmV3IFphKCdtb2RlbC10cmVlLXdhbGtlci1uby1zdGFydC1wb3NpdGlvbjogTmVpdGhlciBib3VuZGFyaWVzIG5vciBzdGFydGluZyBwb3NpdGlvbiBoYXZlIGJlZW4gZGVmaW5lZC4nKTtjb25zdCB0PWUuZGlyZWN0aW9ufHwnZm9yd2FyZCc7aWYoJ2ZvcndhcmQnIT10JiYnYmFja3dhcmQnIT10KXRocm93IG5ldyBaYSgnbW9kZWwtdHJlZS13YWxrZXItdW5rbm93bi1kaXJlY3Rpb246IE9ubHkgYGJhY2t3YXJkYCBhbmQgYGZvcndhcmRgIGRpcmVjdGlvbiBhbGxvd2VkLicse2RpcmVjdGlvbjp0fSk7dGhpcy5kaXJlY3Rpb249dCx0aGlzLmJvdW5kYXJpZXM9ZS5ib3VuZGFyaWVzfHxudWxsLHRoaXMucG9zaXRpb249ZS5zdGFydFBvc2l0aW9uP0t1LmNyZWF0ZUZyb21Qb3NpdGlvbihlLnN0YXJ0UG9zaXRpb24pOkt1LmNyZWF0ZUZyb21Qb3NpdGlvbih0aGlzLmJvdW5kYXJpZXNbJ2JhY2t3YXJkJz09dGhpcy5kaXJlY3Rpb24/J2VuZCc6J3N0YXJ0J10pLHRoaXMuc2luZ2xlQ2hhcmFjdGVycz0hIWUuc2luZ2xlQ2hhcmFjdGVycyx0aGlzLnNoYWxsb3c9ISFlLnNoYWxsb3csdGhpcy5pZ25vcmVFbGVtZW50RW5kPSEhZS5pZ25vcmVFbGVtZW50RW5kLHRoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQ9dGhpcy5ib3VuZGFyaWVzP3RoaXMuYm91bmRhcmllcy5zdGFydC5wYXJlbnQ6bnVsbCx0aGlzLl9ib3VuZGFyeUVuZFBhcmVudD10aGlzLmJvdW5kYXJpZXM/dGhpcy5ib3VuZGFyaWVzLmVuZC5wYXJlbnQ6bnVsbCx0aGlzLl92aXNpdGVkUGFyZW50PXRoaXMucG9zaXRpb24ucGFyZW50fVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXN9c2tpcChlKXtsZXQgdCxvLG4saTtkbyBuPXRoaXMucG9zaXRpb24saT10aGlzLl92aXNpdGVkUGFyZW50LCh7ZG9uZTp0LHZhbHVlOm99PXRoaXMubmV4dCgpKTt3aGlsZSghdCYmZShvKSk7dHx8KHRoaXMucG9zaXRpb249bix0aGlzLl92aXNpdGVkUGFyZW50PWkpfW5leHQoKXtyZXR1cm4nZm9yd2FyZCc9PXRoaXMuZGlyZWN0aW9uP3RoaXMuX25leHQoKTp0aGlzLl9wcmV2aW91cygpfV9uZXh0KCl7Y29uc3QgZT10aGlzLnBvc2l0aW9uLHQ9S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMucG9zaXRpb24pLG89dGhpcy5fdmlzaXRlZFBhcmVudDtpZihudWxsPT09by5wYXJlbnQmJnQub2Zmc2V0PT09by5tYXhPZmZzZXQpcmV0dXJue2RvbmU6ITB9O2lmKG89PT10aGlzLl9ib3VuZGFyeUVuZFBhcmVudCYmdC5vZmZzZXQ9PXRoaXMuYm91bmRhcmllcy5lbmQub2Zmc2V0KXJldHVybntkb25lOiEwfTtjb25zdCBuPXQudGV4dE5vZGU/dC50ZXh0Tm9kZTp0Lm5vZGVBZnRlcjtpZihuIGluc3RhbmNlb2YgV3UpcmV0dXJuIHRoaXMuc2hhbGxvdz90Lm9mZnNldCsrOih0LnBhdGgucHVzaCgwKSx0aGlzLl92aXNpdGVkUGFyZW50PW4pLHRoaXMucG9zaXRpb249dCxzdCgnZWxlbWVudFN0YXJ0JyxuLGUsdCwxKTtpZihuIGluc3RhbmNlb2YgenUpe2xldCBpO2lmKHRoaXMuc2luZ2xlQ2hhcmFjdGVycylpPTE7ZWxzZXtsZXQgZT1uLmVuZE9mZnNldDt0aGlzLl9ib3VuZGFyeUVuZFBhcmVudD09byYmdGhpcy5ib3VuZGFyaWVzLmVuZC5vZmZzZXQ8ZSYmKGU9dGhpcy5ib3VuZGFyaWVzLmVuZC5vZmZzZXQpLGk9ZS10Lm9mZnNldH1jb25zdCByPXQub2Zmc2V0LW4uc3RhcnRPZmZzZXQsYT1uZXcganUobixyLGkpO3JldHVybiB0Lm9mZnNldCs9aSx0aGlzLnBvc2l0aW9uPXQsc3QoJ3RleHQnLGEsZSx0LGkpfXJldHVybiB0LnBhdGgucG9wKCksdC5vZmZzZXQrKyx0aGlzLnBvc2l0aW9uPXQsdGhpcy5fdmlzaXRlZFBhcmVudD1vLnBhcmVudCx0aGlzLmlnbm9yZUVsZW1lbnRFbmQ/dGhpcy5fbmV4dCgpOnN0KCdlbGVtZW50RW5kJyxvLGUsdCl9X3ByZXZpb3VzKCl7Y29uc3QgZT10aGlzLnBvc2l0aW9uLHQ9S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMucG9zaXRpb24pLG89dGhpcy5fdmlzaXRlZFBhcmVudDtpZihudWxsPT09by5wYXJlbnQmJjA9PT10Lm9mZnNldClyZXR1cm57ZG9uZTohMH07aWYobz09dGhpcy5fYm91bmRhcnlTdGFydFBhcmVudCYmdC5vZmZzZXQ9PXRoaXMuYm91bmRhcmllcy5zdGFydC5vZmZzZXQpcmV0dXJue2RvbmU6ITB9O2NvbnN0IG49dC50ZXh0Tm9kZT90LnRleHROb2RlOnQubm9kZUJlZm9yZTtpZihuIGluc3RhbmNlb2YgV3UpcmV0dXJuIHQub2Zmc2V0LS0sdGhpcy5zaGFsbG93Pyh0aGlzLnBvc2l0aW9uPXQsc3QoJ2VsZW1lbnRTdGFydCcsbixlLHQsMSkpOih0LnBhdGgucHVzaChuLm1heE9mZnNldCksdGhpcy5wb3NpdGlvbj10LHRoaXMuX3Zpc2l0ZWRQYXJlbnQ9bix0aGlzLmlnbm9yZUVsZW1lbnRFbmQ/dGhpcy5fcHJldmlvdXMoKTpzdCgnZWxlbWVudEVuZCcsbixlLHQpKTtpZihuIGluc3RhbmNlb2YgenUpe2xldCBpO2lmKHRoaXMuc2luZ2xlQ2hhcmFjdGVycylpPTE7ZWxzZXtsZXQgZT1uLnN0YXJ0T2Zmc2V0O3RoaXMuX2JvdW5kYXJ5U3RhcnRQYXJlbnQ9PW8mJnRoaXMuYm91bmRhcmllcy5zdGFydC5vZmZzZXQ+ZSYmKGU9dGhpcy5ib3VuZGFyaWVzLnN0YXJ0Lm9mZnNldCksaT10Lm9mZnNldC1lfWNvbnN0IHI9dC5vZmZzZXQtbi5zdGFydE9mZnNldCxhPW5ldyBqdShuLHItaSxpKTtyZXR1cm4gdC5vZmZzZXQtPWksdGhpcy5wb3NpdGlvbj10LHN0KCd0ZXh0JyxhLGUsdCxpKX1yZXR1cm4gdC5wYXRoLnBvcCgpLHRoaXMucG9zaXRpb249dCx0aGlzLl92aXNpdGVkUGFyZW50PW8ucGFyZW50LHN0KCdlbGVtZW50U3RhcnQnLG8sZSx0LDEpfX12YXIgSHU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9lLmxlbmd0aDowO3JldHVybiB0P2VbdC0xXTp2b2lkIDB9O2NsYXNzIEt1e2NvbnN0cnVjdG9yKGUsdCl7aWYoIWUuaXMoJ2VsZW1lbnQnKSYmIWUuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKSl0aHJvdyBuZXcgWmEoJ21vZGVsLXBvc2l0aW9uLXJvb3QtaW52YWxpZDogUG9zaXRpb24gcm9vdCBpbnZhbGlkLicpO2lmKCEodCBpbnN0YW5jZW9mIEFycmF5KXx8MD09PXQubGVuZ3RoKXRocm93IG5ldyBaYSgnbW9kZWwtcG9zaXRpb24tcGF0aC1pbmNvcnJlY3Q6IFBvc2l0aW9uIHBhdGggbXVzdCBiZSBhbiBhcnJheSB3aXRoIGF0IGxlYXN0IG9uZSBpdGVtLicse3BhdGg6dH0pO3Q9ZS5nZXRQYXRoKCkuY29uY2F0KHQpLGU9ZS5yb290LHRoaXMucm9vdD1lLHRoaXMucGF0aD10fWdldCBvZmZzZXQoKXtyZXR1cm4gSHUodGhpcy5wYXRoKX1zZXQgb2Zmc2V0KGUpe3RoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoLTFdPWV9Z2V0IHBhcmVudCgpe2xldCBlPXRoaXMucm9vdDtmb3IobGV0IHQ9MDt0PHRoaXMucGF0aC5sZW5ndGgtMTt0KyspZT1lLmdldENoaWxkKGUub2Zmc2V0VG9JbmRleCh0aGlzLnBhdGhbdF0pKTtyZXR1cm4gZX1nZXQgaW5kZXgoKXtyZXR1cm4gdGhpcy5wYXJlbnQub2Zmc2V0VG9JbmRleCh0aGlzLm9mZnNldCl9Z2V0IHRleHROb2RlKCl7Y29uc3QgZT10aGlzLnBhcmVudC5nZXRDaGlsZCh0aGlzLmluZGV4KTtyZXR1cm4gZSBpbnN0YW5jZW9mIHp1JiZlLnN0YXJ0T2Zmc2V0PHRoaXMub2Zmc2V0P2U6bnVsbH1nZXQgbm9kZUFmdGVyKCl7cmV0dXJuIG51bGw9PT10aGlzLnRleHROb2RlP3RoaXMucGFyZW50LmdldENoaWxkKHRoaXMuaW5kZXgpOm51bGx9Z2V0IG5vZGVCZWZvcmUoKXtyZXR1cm4gbnVsbD09PXRoaXMudGV4dE5vZGU/dGhpcy5wYXJlbnQuZ2V0Q2hpbGQodGhpcy5pbmRleC0xKTpudWxsfWdldCBpc0F0U3RhcnQoKXtyZXR1cm4gMD09PXRoaXMub2Zmc2V0fWdldCBpc0F0RW5kKCl7cmV0dXJuIHRoaXMub2Zmc2V0PT10aGlzLnBhcmVudC5tYXhPZmZzZXR9Y29tcGFyZVdpdGgoZSl7aWYodGhpcy5yb290IT1lLnJvb3QpcmV0dXJuJ2RpZmZlcmVudCc7Y29uc3QgdD1BKHRoaXMucGF0aCxlLnBhdGgpO3JldHVybidzYW1lJz09PXQ/J3NhbWUnOidwcmVmaXgnPT09dD8nYmVmb3JlJzonZXh0ZW5zaW9uJz09PXQ/J2FmdGVyJzp0aGlzLnBhdGhbdF08ZS5wYXRoW3RdPydiZWZvcmUnOidhZnRlcid9Z2V0TGFzdE1hdGNoaW5nUG9zaXRpb24oZSx0PXt9KXt0LnN0YXJ0UG9zaXRpb249dGhpcztjb25zdCBvPW5ldyBVdSh0KTtyZXR1cm4gby5za2lwKGUpLG8ucG9zaXRpb259Z2V0UGFyZW50UGF0aCgpe3JldHVybiB0aGlzLnBhdGguc2xpY2UoMCwtMSl9Z2V0QW5jZXN0b3JzKCl7cmV0dXJuIHRoaXMucGFyZW50LmlzKCdkb2N1bWVudEZyYWdtZW50Jyk/W3RoaXMucGFyZW50XTp0aGlzLnBhcmVudC5nZXRBbmNlc3RvcnMoe2luY2x1ZGVTZWxmOiEwfSl9Z2V0Q29tbW9uUGF0aChlKXtpZih0aGlzLnJvb3QhPWUucm9vdClyZXR1cm5bXTtjb25zdCB0PUEodGhpcy5wYXRoLGUucGF0aCksbz0nc3RyaW5nJz09dHlwZW9mIHQ/TGEodGhpcy5wYXRoLmxlbmd0aCxlLnBhdGgubGVuZ3RoKTp0O3JldHVybiB0aGlzLnBhdGguc2xpY2UoMCxvKX1nZXRDb21tb25BbmNlc3RvcihlKXtjb25zdCB0PXRoaXMuZ2V0QW5jZXN0b3JzKCksbz1lLmdldEFuY2VzdG9ycygpO2xldCBuPTA7Zm9yKDt0W25dPT1vW25dJiZ0W25dOyluKys7cmV0dXJuIDA9PW4/bnVsbDp0W24tMV19Z2V0U2hpZnRlZEJ5KGUpe2NvbnN0IHQ9S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMpLG89dC5vZmZzZXQrZTtyZXR1cm4gdC5vZmZzZXQ9MD5vPzA6byx0fWlzQWZ0ZXIoZSl7cmV0dXJuJ2FmdGVyJz09dGhpcy5jb21wYXJlV2l0aChlKX1pc0JlZm9yZShlKXtyZXR1cm4nYmVmb3JlJz09dGhpcy5jb21wYXJlV2l0aChlKX1pc0VxdWFsKGUpe3JldHVybidzYW1lJz09dGhpcy5jb21wYXJlV2l0aChlKX1pc1RvdWNoaW5nKGUpe2xldCB0PW51bGwsbz1udWxsO2NvbnN0IG49dGhpcy5jb21wYXJlV2l0aChlKTtzd2l0Y2gobil7Y2FzZSdzYW1lJzpyZXR1cm4hMDtjYXNlJ2JlZm9yZSc6dD1LdS5jcmVhdGVGcm9tUG9zaXRpb24odGhpcyksbz1LdS5jcmVhdGVGcm9tUG9zaXRpb24oZSk7YnJlYWs7Y2FzZSdhZnRlcic6dD1LdS5jcmVhdGVGcm9tUG9zaXRpb24oZSksbz1LdS5jcmVhdGVGcm9tUG9zaXRpb24odGhpcyk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4hMTt9Zm9yKGxldCBuPXQucGFyZW50O3QucGF0aC5sZW5ndGgrby5wYXRoLmxlbmd0aDspe2lmKHQuaXNFcXVhbChvKSlyZXR1cm4hMDtpZih0LnBhdGgubGVuZ3RoPm8ucGF0aC5sZW5ndGgpe2lmKHQub2Zmc2V0IT09bi5tYXhPZmZzZXQpcmV0dXJuITE7dC5wYXRoPXQucGF0aC5zbGljZSgwLC0xKSxuPW4ucGFyZW50LHQub2Zmc2V0Kyt9ZWxzZXtpZigwIT09by5vZmZzZXQpcmV0dXJuITE7by5wYXRoPW8ucGF0aC5zbGljZSgwLC0xKX19fV9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24oZSx0KXtjb25zdCBvPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbih0aGlzKTtpZih0aGlzLnJvb3QhPWUucm9vdClyZXR1cm4gbztpZignc2FtZSc9PUEoZS5nZXRQYXJlbnRQYXRoKCksdGhpcy5nZXRQYXJlbnRQYXRoKCkpKXtpZihlLm9mZnNldDx0aGlzLm9mZnNldCl7aWYoZS5vZmZzZXQrdD50aGlzLm9mZnNldClyZXR1cm4gbnVsbDtvLm9mZnNldC09dH19ZWxzZSBpZigncHJlZml4Jz09QShlLmdldFBhcmVudFBhdGgoKSx0aGlzLmdldFBhcmVudFBhdGgoKSkpe2NvbnN0IG49ZS5wYXRoLmxlbmd0aC0xO2lmKGUub2Zmc2V0PD10aGlzLnBhdGhbbl0pe2lmKGUub2Zmc2V0K3Q+dGhpcy5wYXRoW25dKXJldHVybiBudWxsO28ucGF0aFtuXS09dH19cmV0dXJuIG99X2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24oZSx0LG8pe2NvbnN0IG49S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMpO2lmKHRoaXMucm9vdCE9ZS5yb290KXJldHVybiBuO2lmKCdzYW1lJz09QShlLmdldFBhcmVudFBhdGgoKSx0aGlzLmdldFBhcmVudFBhdGgoKSkpKGUub2Zmc2V0PHRoaXMub2Zmc2V0fHxlLm9mZnNldD09dGhpcy5vZmZzZXQmJm8pJiYobi5vZmZzZXQrPXQpO2Vsc2UgaWYoJ3ByZWZpeCc9PUEoZS5nZXRQYXJlbnRQYXRoKCksdGhpcy5nZXRQYXJlbnRQYXRoKCkpKXtjb25zdCBvPWUucGF0aC5sZW5ndGgtMTtlLm9mZnNldDw9dGhpcy5wYXRoW29dJiYobi5wYXRoW29dKz10KX1yZXR1cm4gbn1fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoZSx0LG8sbixpKXtsZXQgcj10aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24oZSxvKTtyZXR1cm4gdD10Ll9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24oZSxvKSxyPW51bGw9PT1yfHxpJiZyLmlzRXF1YWwoZSk/dGhpcy5fZ2V0Q29tYmluZWQoZSx0KTpyLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHQsbyxuKSxyfV9nZXRDb21iaW5lZChlLHQpe2NvbnN0IG89ZS5wYXRoLmxlbmd0aC0xLG49S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHQpO3JldHVybiBuLm9mZnNldD1uLm9mZnNldCt0aGlzLnBhdGhbb10tZS5vZmZzZXQsbi5wYXRoPW4ucGF0aC5jb25jYXQodGhpcy5wYXRoLnNsaWNlKG8rMSkpLG59c3RhdGljIGNyZWF0ZUF0KGUsdCl7aWYoZSBpbnN0YW5jZW9mIEt1KXJldHVybiB0aGlzLmNyZWF0ZUZyb21Qb3NpdGlvbihlKTtlbHNle2NvbnN0IG89ZTtpZignZW5kJz09dCl0PW8ubWF4T2Zmc2V0O2Vsc2V7aWYoJ2JlZm9yZSc9PXQpcmV0dXJuIHRoaXMuY3JlYXRlQmVmb3JlKG8pO2lmKCdhZnRlcic9PXQpcmV0dXJuIHRoaXMuY3JlYXRlQWZ0ZXIobyk7dHx8KHQ9MCl9cmV0dXJuIHRoaXMuY3JlYXRlRnJvbVBhcmVudEFuZE9mZnNldChvLHQpfX1zdGF0aWMgY3JlYXRlQWZ0ZXIoZSl7aWYoIWUucGFyZW50KXRocm93IG5ldyBaYSgnbW9kZWwtcG9zaXRpb24tYWZ0ZXItcm9vdDogWW91IGNhbm5vdCBtYWtlIGEgcG9zaXRpb24gYWZ0ZXIgcm9vdC4nLHtyb290OmV9KTtyZXR1cm4gdGhpcy5jcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KGUucGFyZW50LGUuZW5kT2Zmc2V0KX1zdGF0aWMgY3JlYXRlQmVmb3JlKGUpe2lmKCFlLnBhcmVudCl0aHJvdyBuZXcgWmEoJ21vZGVsLXBvc2l0aW9uLWJlZm9yZS1yb290OiBZb3UgY2Fubm90IG1ha2UgYSBwb3NpdGlvbiBiZWZvcmUgcm9vdC4nLHtyb290OmV9KTtyZXR1cm4gdGhpcy5jcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KGUucGFyZW50LGUuc3RhcnRPZmZzZXQpfXN0YXRpYyBjcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KGUsdCl7aWYoIWUuaXMoJ2VsZW1lbnQnKSYmIWUuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKSl0aHJvdyBuZXcgWmEoJ21vZGVsLXBvc2l0aW9uLXBhcmVudC1pbmNvcnJlY3Q6IFBvc2l0aW9uIHBhcmVudCBoYXZlIHRvIGJlIGEgZWxlbWVudCBvciBkb2N1bWVudCBmcmFnbWVudC4nKTtjb25zdCBvPWUuZ2V0UGF0aCgpO3JldHVybiBvLnB1c2godCksbmV3IHRoaXMoZS5yb290LG8pfXN0YXRpYyBjcmVhdGVGcm9tUG9zaXRpb24oZSl7cmV0dXJuIG5ldyB0aGlzKGUucm9vdCxlLnBhdGguc2xpY2UoKSl9c3RhdGljIGZyb21KU09OKGUsdCl7aWYoJyRncmF2ZXlhcmQnPT09ZS5yb290KXJldHVybiBuZXcgS3UodC5ncmF2ZXlhcmQsZS5wYXRoKTtpZighdC5nZXRSb290KGUucm9vdCkpdGhyb3cgbmV3IFphKCdtb2RlbC1wb3NpdGlvbi1mcm9tanNvbi1uby1yb290OiBDYW5ub3QgY3JlYXRlIHBvc2l0aW9uIGZvciBkb2N1bWVudC4gUm9vdCB3aXRoIHNwZWNpZmllZCBuYW1lIGRvZXMgbm90IGV4aXN0Licse3Jvb3ROYW1lOmUucm9vdH0pO3JldHVybiBuZXcgS3UodC5nZXRSb290KGUucm9vdCksZS5wYXRoKX19Y2xhc3MgR3V7Y29uc3RydWN0b3IoZSx0PW51bGwpe3RoaXMuc3RhcnQ9S3UuY3JlYXRlRnJvbVBvc2l0aW9uKGUpLHRoaXMuZW5kPXQ/S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHQpOkt1LmNyZWF0ZUZyb21Qb3NpdGlvbihlKX0qW1N5bWJvbC5pdGVyYXRvcl0oKXt5aWVsZCpuZXcgVXUoe2JvdW5kYXJpZXM6dGhpcyxpZ25vcmVFbGVtZW50RW5kOiEwfSl9Z2V0IGlzQ29sbGFwc2VkKCl7cmV0dXJuIHRoaXMuc3RhcnQuaXNFcXVhbCh0aGlzLmVuZCl9Z2V0IGlzRmxhdCgpe3JldHVybiB0aGlzLnN0YXJ0LnBhcmVudD09PXRoaXMuZW5kLnBhcmVudH1nZXQgcm9vdCgpe3JldHVybiB0aGlzLnN0YXJ0LnJvb3R9Y29udGFpbnNQb3NpdGlvbihlKXtyZXR1cm4gZS5pc0FmdGVyKHRoaXMuc3RhcnQpJiZlLmlzQmVmb3JlKHRoaXMuZW5kKX1jb250YWluc1JhbmdlKGUsdD0hMSl7ZS5pc0NvbGxhcHNlZCYmKHQ9ITEpO2NvbnN0IG89dGhpcy5jb250YWluc1Bvc2l0aW9uKGUuc3RhcnQpfHx0JiZ0aGlzLnN0YXJ0LmlzRXF1YWwoZS5zdGFydCksbj10aGlzLmNvbnRhaW5zUG9zaXRpb24oZS5lbmQpfHx0JiZ0aGlzLmVuZC5pc0VxdWFsKGUuZW5kKTtyZXR1cm4gbyYmbn1jb250YWluc0l0ZW0oZSl7Y29uc3QgdD1LdS5jcmVhdGVCZWZvcmUoZSk7cmV0dXJuIHRoaXMuY29udGFpbnNQb3NpdGlvbih0KXx8dGhpcy5zdGFydC5pc0VxdWFsKHQpfWlzRXF1YWwoZSl7cmV0dXJuIHRoaXMuc3RhcnQuaXNFcXVhbChlLnN0YXJ0KSYmdGhpcy5lbmQuaXNFcXVhbChlLmVuZCl9aXNJbnRlcnNlY3RpbmcoZSl7cmV0dXJuIHRoaXMuc3RhcnQuaXNCZWZvcmUoZS5lbmQpJiZ0aGlzLmVuZC5pc0FmdGVyKGUuc3RhcnQpfWdldERpZmZlcmVuY2UoZSl7Y29uc3QgdD1bXTtyZXR1cm4gdGhpcy5pc0ludGVyc2VjdGluZyhlKT8odGhpcy5jb250YWluc1Bvc2l0aW9uKGUuc3RhcnQpJiZ0LnB1c2gobmV3IEd1KHRoaXMuc3RhcnQsZS5zdGFydCkpLHRoaXMuY29udGFpbnNQb3NpdGlvbihlLmVuZCkmJnQucHVzaChuZXcgR3UoZS5lbmQsdGhpcy5lbmQpKSk6dC5wdXNoKEd1LmNyZWF0ZUZyb21SYW5nZSh0aGlzKSksdH1nZXRJbnRlcnNlY3Rpb24oZSl7aWYodGhpcy5pc0ludGVyc2VjdGluZyhlKSl7bGV0IHQ9dGhpcy5zdGFydCxvPXRoaXMuZW5kO3JldHVybiB0aGlzLmNvbnRhaW5zUG9zaXRpb24oZS5zdGFydCkmJih0PWUuc3RhcnQpLHRoaXMuY29udGFpbnNQb3NpdGlvbihlLmVuZCkmJihvPWUuZW5kKSxuZXcgR3UodCxvKX1yZXR1cm4gbnVsbH1nZXRNaW5pbWFsRmxhdFJhbmdlcygpe2NvbnN0IGU9W10sdD10aGlzLnN0YXJ0LmdldENvbW1vblBhdGgodGhpcy5lbmQpLmxlbmd0aCxvPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbih0aGlzLnN0YXJ0KTtmb3IobGV0IG49by5wYXJlbnQ7by5wYXRoLmxlbmd0aD50KzE7KXtjb25zdCB0PW4ubWF4T2Zmc2V0LW8ub2Zmc2V0OzAhPXQmJmUucHVzaChuZXcgR3UobyxvLmdldFNoaWZ0ZWRCeSh0KSkpLG8ucGF0aD1vLnBhdGguc2xpY2UoMCwtMSksby5vZmZzZXQrKyxuPW4ucGFyZW50fWZvcig7by5wYXRoLmxlbmd0aDw9dGhpcy5lbmQucGF0aC5sZW5ndGg7KXtjb25zdCB0PXRoaXMuZW5kLnBhdGhbby5wYXRoLmxlbmd0aC0xXSxuPXQtby5vZmZzZXQ7MCE9biYmZS5wdXNoKG5ldyBHdShvLG8uZ2V0U2hpZnRlZEJ5KG4pKSksby5vZmZzZXQ9dCxvLnBhdGgucHVzaCgwKX1yZXR1cm4gZX1nZXRXYWxrZXIoZT17fSl7cmV0dXJuIGUuYm91bmRhcmllcz10aGlzLG5ldyBVdShlKX0qZ2V0SXRlbXMoZT17fSl7ZS5ib3VuZGFyaWVzPXRoaXMsZS5pZ25vcmVFbGVtZW50RW5kPSEwO2NvbnN0IHQ9bmV3IFV1KGUpO2Zvcihjb25zdCBvIG9mIHQpeWllbGQgby5pdGVtfSpnZXRQb3NpdGlvbnMoZT17fSl7ZS5ib3VuZGFyaWVzPXRoaXM7Y29uc3QgdD1uZXcgVXUoZSk7eWllbGQgdC5wb3NpdGlvbjtmb3IoY29uc3QgbyBvZiB0KXlpZWxkIG8ubmV4dFBvc2l0aW9ufWdldFRyYW5zZm9ybWVkQnlEZWx0YShlKXtjb25zdCB0PVtHdS5jcmVhdGVGcm9tUmFuZ2UodGhpcyldLG89bmV3IFNldChbJ2luc2VydCcsJ21vdmUnLCdyZW1vdmUnLCdyZWluc2VydCddKTtmb3IoY29uc3QgbiBvZiBlLm9wZXJhdGlvbnMpaWYoby5oYXMobi50eXBlKSlmb3IobGV0IG89MDtvPHQubGVuZ3RoO28rKyl7bGV0IGk7aT0naW5zZXJ0Jz09bi50eXBlP3Rbb10uX2dldFRyYW5zZm9ybWVkQnlEb2N1bWVudENoYW5nZShuLnR5cGUsZS50eXBlLG4ucG9zaXRpb24sbi5ub2Rlcy5tYXhPZmZzZXQpOnRbb10uX2dldFRyYW5zZm9ybWVkQnlEb2N1bWVudENoYW5nZShuLnR5cGUsZS50eXBlLG4udGFyZ2V0UG9zaXRpb24sbi5ob3dNYW55LG4uc291cmNlUG9zaXRpb24pLHQuc3BsaWNlKG8sMSwuLi5pKSxvKz1pLmxlbmd0aC0xfXJldHVybiB0fWdldFRyYW5zZm9ybWVkQnlEZWx0YXMoZSl7Y29uc3QgdD1bR3UuY3JlYXRlRnJvbVJhbmdlKHRoaXMpXTtmb3IoY29uc3QgbyBvZiBlKWZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXtjb25zdCBuPXRbZV0uZ2V0VHJhbnNmb3JtZWRCeURlbHRhKG8pO3Quc3BsaWNlKGUsMSwuLi5uKSxlKz1uLmxlbmd0aC0xfWZvcihsZXQgbz0wO288dC5sZW5ndGg7bysrKXtjb25zdCBlPXRbb107Zm9yKGxldCBuPW8rMTtuPHQubGVuZ3RoO24rKyl7Y29uc3Qgbz10W25dOyhlLmNvbnRhaW5zUmFuZ2Uobyl8fG8uY29udGFpbnNSYW5nZShlKXx8ZS5pc0VxdWFsKG8pKSYmdC5zcGxpY2UobiwxKX19cmV0dXJuIHR9Z2V0Q29tbW9uQW5jZXN0b3IoKXtyZXR1cm4gdGhpcy5zdGFydC5nZXRDb21tb25BbmNlc3Rvcih0aGlzLmVuZCl9X2dldFRyYW5zZm9ybWVkQnlEb2N1bWVudENoYW5nZShlLHQsbyxuLGkpe2lmKCdpbnNlcnQnPT1lKXJldHVybiB0aGlzLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKG8sbiwhMSwhMSk7ZWxzZXtjb25zdCBlPUd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGksbik7aWYoJ21lcmdlJz09dCYmdGhpcy5pc0NvbGxhcHNlZCYmKHRoaXMuc3RhcnQuaXNFcXVhbChlLnN0YXJ0KXx8dGhpcy5zdGFydC5pc0VxdWFsKGUuZW5kKSkpe2NvbnN0IHQ9dGhpcy5zdGFydC5vZmZzZXQtZS5zdGFydC5vZmZzZXQ7cmV0dXJuW25ldyBHdShvLmdldFNoaWZ0ZWRCeSh0KSldfWlmKCdzcGxpdCc9PXQmJnRoaXMuaXNDb2xsYXBzZWQmJnRoaXMuZW5kLmlzRXF1YWwoZS5lbmQpKXJldHVybltuZXcgR3Uoby5nZXRTaGlmdGVkQnkobikpXTtpZigoZS5jb250YWluc1Bvc2l0aW9uKHRoaXMuc3RhcnQpfHxlLnN0YXJ0LmlzRXF1YWwodGhpcy5zdGFydCkpJiZ0aGlzLmNvbnRhaW5zUG9zaXRpb24oZS5lbmQpJiZ0aGlzLmVuZC5pc0FmdGVyKG8pKXtjb25zdCBlPXRoaXMuc3RhcnQuX2dldENvbWJpbmVkKGksby5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGksbikpLHQ9dGhpcy5lbmQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKGksbyxuLCExLCExKTtyZXR1cm5bbmV3IEd1KGUsdCldfWlmKChlLmNvbnRhaW5zUG9zaXRpb24odGhpcy5lbmQpfHxlLmVuZC5pc0VxdWFsKHRoaXMuZW5kKSkmJnRoaXMuY29udGFpbnNQb3NpdGlvbihlLnN0YXJ0KSYmdGhpcy5zdGFydC5pc0JlZm9yZShvKSl7Y29uc3QgZT10aGlzLnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5TW92ZShpLG8sbiwhMCwhMSksdD10aGlzLmVuZC5fZ2V0Q29tYmluZWQoaSxvLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24oaSxuKSk7cmV0dXJuW25ldyBHdShlLHQpXX1yZXR1cm4gdGhpcy5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUoaSxvLG4pfX1fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbihlLHQsbz0hMSxuPSExKXtpZihvJiZ0aGlzLmNvbnRhaW5zUG9zaXRpb24oZSkpcmV0dXJuW25ldyBHdSh0aGlzLnN0YXJ0LGUpLG5ldyBHdShlLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKGUsdCwhMCksdGhpcy5lbmQuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24oZSx0LHRoaXMuaXNDb2xsYXBzZWQpKV07ZWxzZXtjb25zdCBvPUd1LmNyZWF0ZUZyb21SYW5nZSh0aGlzKSxpPSEhby5pc0NvbGxhcHNlZHx8bjtyZXR1cm4gby5zdGFydD1vLnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKGUsdCwhbiksby5lbmQ9by5lbmQuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24oZSx0LGkpLFtvXX19X2dldFRyYW5zZm9ybWVkQnlNb3ZlKGUsdCxvKXtpZih0aGlzLmlzQ29sbGFwc2VkKXtjb25zdCBuPXRoaXMuc3RhcnQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKGUsdCxvLCEwLCExKTtyZXR1cm5bbmV3IEd1KG4pXX1sZXQgbjtjb25zdCBpPW5ldyBHdShlLGUuZ2V0U2hpZnRlZEJ5KG8pKSxyPXRoaXMuZ2V0RGlmZmVyZW5jZShpKTtsZXQgYT1udWxsO2NvbnN0IHM9dGhpcy5nZXRJbnRlcnNlY3Rpb24oaSk7MT09ci5sZW5ndGg/YT1uZXcgR3UoclswXS5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKGUsbyksclswXS5lbmQuX2dldFRyYW5zZm9ybWVkQnlEZWxldGlvbihlLG8pKToyPT1yLmxlbmd0aCYmKGE9bmV3IEd1KHRoaXMuc3RhcnQsdGhpcy5lbmQuX2dldFRyYW5zZm9ybWVkQnlEZWxldGlvbihlLG8pKSk7Y29uc3QgbD10Ll9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24oZSxvKTtyZXR1cm4gbj1hP2EuX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24obCxvLG51bGwhPT1zKTpbXSxzJiZuLnB1c2gobmV3IEd1KHMuc3RhcnQuX2dldENvbWJpbmVkKGkuc3RhcnQsbCkscy5lbmQuX2dldENvbWJpbmVkKGkuc3RhcnQsbCkpKSxufXN0YXRpYyBjcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLHQpe2NvbnN0IG89ZSxuPWUuZ2V0U2hpZnRlZEJ5KHQpO3JldHVybiAwPHQ/bmV3IHRoaXMobyxuKTpuZXcgdGhpcyhuLG8pfXN0YXRpYyBjcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHMoZSx0LG8sbil7cmV0dXJuIG5ldyB0aGlzKEt1LmNyZWF0ZUZyb21QYXJlbnRBbmRPZmZzZXQoZSx0KSxLdS5jcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KG8sbikpfXN0YXRpYyBjcmVhdGVGcm9tUmFuZ2UoZSl7cmV0dXJuIG5ldyB0aGlzKGUuc3RhcnQsZS5lbmQpfXN0YXRpYyBjcmVhdGVJbihlKXtyZXR1cm4gdGhpcy5jcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHMoZSwwLGUsZS5tYXhPZmZzZXQpfXN0YXRpYyBjcmVhdGVPbihlKXtyZXR1cm4gdGhpcy5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChLdS5jcmVhdGVCZWZvcmUoZSksZS5vZmZzZXRTaXplKX1zdGF0aWMgY3JlYXRlQ29sbGFwc2VkQXQoZSx0KXtjb25zdCBvPUt1LmNyZWF0ZUF0KGUsdCksbj1LdS5jcmVhdGVGcm9tUG9zaXRpb24obyk7cmV0dXJuIG5ldyBHdShvLG4pfXN0YXRpYyBjcmVhdGVGcm9tUmFuZ2VzKGUpe2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBuZXcgWmEoJ3JhbmdlLWNyZWF0ZS1mcm9tLXJhbmdlcy1lbXB0eS1hcnJheTogQXQgbGVhc3Qgb25lIHJhbmdlIGhhcyB0byBiZSBwYXNzZWQuJyk7ZWxzZSBpZigxPT1lLmxlbmd0aClyZXR1cm4gdGhpcy5jcmVhdGVGcm9tUmFuZ2UoZVswXSk7Y29uc3QgdD1lWzBdO2Uuc29ydCgoZSx0KT0+ZS5zdGFydC5pc0FmdGVyKHQuc3RhcnQpPzE6LTEpO2NvbnN0IG89ZS5pbmRleE9mKHQpLG49bmV3IHRoaXModC5zdGFydCx0LmVuZCk7Zm9yKGxldCB0PW8tMTswPD10JiZlW3RdLmVuZC5pc0VxdWFsKG4uc3RhcnQpO3QrKyluLnN0YXJ0PUt1LmNyZWF0ZUZyb21Qb3NpdGlvbihlW3RdLnN0YXJ0KTtmb3IobGV0IHQ9bysxO3Q8ZS5sZW5ndGgmJmVbdF0uc3RhcnQuaXNFcXVhbChuLmVuZCk7dCsrKW4uZW5kPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbihlW3RdLmVuZCk7cmV0dXJuIG59c3RhdGljIGZyb21KU09OKGUsdCl7cmV0dXJuIG5ldyB0aGlzKEt1LmZyb21KU09OKGUuc3RhcnQsdCksS3UuZnJvbUpTT04oZS5lbmQsdCkpfX1jbGFzcyAkdXtjb25zdHJ1Y3Rvcigpe3RoaXMuX21vZGVsVG9WaWV3TWFwcGluZz1uZXcgV2Vha01hcCx0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmc9bmV3IFdlYWtNYXAsdGhpcy5fdmlld1RvTW9kZWxMZW5ndGhDYWxsYmFja3M9bmV3IE1hcCx0aGlzLl9tYXJrZXJOYW1lVG9FbGVtZW50cz1uZXcgTWFwLHRoaXMub24oJ21vZGVsVG9WaWV3UG9zaXRpb24nLChlLHQpPT57aWYoIXQudmlld1Bvc2l0aW9uKXtjb25zdCBlPXRoaXMuX21vZGVsVG9WaWV3TWFwcGluZy5nZXQodC5tb2RlbFBvc2l0aW9uLnBhcmVudCk7dC52aWV3UG9zaXRpb249dGhpcy5fZmluZFBvc2l0aW9uSW4oZSx0Lm1vZGVsUG9zaXRpb24ub2Zmc2V0KX19LHtwcmlvcml0eTonbG93J30pLHRoaXMub24oJ3ZpZXdUb01vZGVsUG9zaXRpb24nLChlLHQpPT57aWYodC5tb2RlbFBvc2l0aW9uKXJldHVybjtsZXQgbz10LnZpZXdQb3NpdGlvbi5wYXJlbnQsbj10aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuZ2V0KG8pO2Zvcig7IW47KW89by5wYXJlbnQsbj10aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuZ2V0KG8pO2NvbnN0IGk9dGhpcy5fdG9Nb2RlbE9mZnNldCh0LnZpZXdQb3NpdGlvbi5wYXJlbnQsdC52aWV3UG9zaXRpb24ub2Zmc2V0LG8pO3QubW9kZWxQb3NpdGlvbj1LdS5jcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KG4saSl9LHtwcmlvcml0eTonbG93J30pfWJpbmRFbGVtZW50cyhlLHQpe3RoaXMuX21vZGVsVG9WaWV3TWFwcGluZy5zZXQoZSx0KSx0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuc2V0KHQsZSl9dW5iaW5kVmlld0VsZW1lbnQoZSl7Y29uc3QgdD10aGlzLnRvTW9kZWxFbGVtZW50KGUpO3RoaXMuX3ZpZXdUb01vZGVsTWFwcGluZy5kZWxldGUoZSksdGhpcy5fbW9kZWxUb1ZpZXdNYXBwaW5nLmdldCh0KT09ZSYmdGhpcy5fbW9kZWxUb1ZpZXdNYXBwaW5nLmRlbGV0ZSh0KX11bmJpbmRNb2RlbEVsZW1lbnQoZSl7Y29uc3QgdD10aGlzLnRvVmlld0VsZW1lbnQoZSk7dGhpcy5fbW9kZWxUb1ZpZXdNYXBwaW5nLmRlbGV0ZShlKSx0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuZ2V0KHQpPT1lJiZ0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuZGVsZXRlKHQpfWJpbmRFbGVtZW50VG9NYXJrZXIoZSx0KXtjb25zdCBvPXRoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzLmdldCh0KXx8bmV3IFNldDtvLmFkZChlKSx0aGlzLl9tYXJrZXJOYW1lVG9FbGVtZW50cy5zZXQodCxvKX11bmJpbmRFbGVtZW50c0Zyb21NYXJrZXJOYW1lKGUpe3RoaXMuX21hcmtlck5hbWVUb0VsZW1lbnRzLmRlbGV0ZShlKX1jbGVhckJpbmRpbmdzKCl7dGhpcy5fbW9kZWxUb1ZpZXdNYXBwaW5nPW5ldyBXZWFrTWFwLHRoaXMuX3ZpZXdUb01vZGVsTWFwcGluZz1uZXcgV2Vha01hcCx0aGlzLl9tYXJrZXJOYW1lVG9FbGVtZW50cz1uZXcgTWFwfXRvTW9kZWxFbGVtZW50KGUpe3JldHVybiB0aGlzLl92aWV3VG9Nb2RlbE1hcHBpbmcuZ2V0KGUpfXRvVmlld0VsZW1lbnQoZSl7cmV0dXJuIHRoaXMuX21vZGVsVG9WaWV3TWFwcGluZy5nZXQoZSl9dG9Nb2RlbFJhbmdlKGUpe3JldHVybiBuZXcgR3UodGhpcy50b01vZGVsUG9zaXRpb24oZS5zdGFydCksdGhpcy50b01vZGVsUG9zaXRpb24oZS5lbmQpKX10b1ZpZXdSYW5nZShlKXtyZXR1cm4gbmV3IENjKHRoaXMudG9WaWV3UG9zaXRpb24oZS5zdGFydCksdGhpcy50b1ZpZXdQb3NpdGlvbihlLmVuZCkpfXRvTW9kZWxQb3NpdGlvbihlKXtjb25zdCB0PXt2aWV3UG9zaXRpb246ZSxtYXBwZXI6dGhpc307cmV0dXJuIHRoaXMuZmlyZSgndmlld1RvTW9kZWxQb3NpdGlvbicsdCksdC5tb2RlbFBvc2l0aW9ufXRvVmlld1Bvc2l0aW9uKGUsdD17aXNQaGFudG9tOiExfSl7Y29uc3Qgbz17bW9kZWxQb3NpdGlvbjplLG1hcHBlcjp0aGlzLGlzUGhhbnRvbTp0LmlzUGhhbnRvbX07cmV0dXJuIHRoaXMuZmlyZSgnbW9kZWxUb1ZpZXdQb3NpdGlvbicsbyksby52aWV3UG9zaXRpb259bWFya2VyTmFtZVRvRWxlbWVudHMoZSl7Y29uc3QgdD10aGlzLl9tYXJrZXJOYW1lVG9FbGVtZW50cy5nZXQoZSk7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3Qgbz1uZXcgU2V0O2Zvcihjb25zdCBuIG9mIHQpaWYobi5pcygnYXR0cmlidXRlRWxlbWVudCcpKWZvcihjb25zdCBlIG9mIG4uZ2V0RWxlbWVudHNXaXRoU2FtZUlkKCkpby5hZGQoZSk7ZWxzZSBvLmFkZChuKTtyZXR1cm4gb31yZWdpc3RlclZpZXdUb01vZGVsTGVuZ3RoKGUsdCl7dGhpcy5fdmlld1RvTW9kZWxMZW5ndGhDYWxsYmFja3Muc2V0KGUsdCl9X3RvTW9kZWxPZmZzZXQoZSx0LG8pe2lmKG8hPWUpe2NvbnN0IG49dGhpcy5fdG9Nb2RlbE9mZnNldChlLnBhcmVudCxlLmluZGV4LG8pLGk9dGhpcy5fdG9Nb2RlbE9mZnNldChlLHQsZSk7cmV0dXJuIG4raX1pZihlLmlzKCd0ZXh0JykpcmV0dXJuIHQ7bGV0IG49MDtmb3IobGV0IHI9MDtyPHQ7cisrKW4rPXRoaXMuZ2V0TW9kZWxMZW5ndGgoZS5nZXRDaGlsZChyKSk7cmV0dXJuIG59Z2V0TW9kZWxMZW5ndGgoZSl7aWYodGhpcy5fdmlld1RvTW9kZWxMZW5ndGhDYWxsYmFja3MuZ2V0KGUubmFtZSkpe2NvbnN0IHQ9dGhpcy5fdmlld1RvTW9kZWxMZW5ndGhDYWxsYmFja3MuZ2V0KGUubmFtZSk7cmV0dXJuIHQoZSl9aWYodGhpcy5fdmlld1RvTW9kZWxNYXBwaW5nLmhhcyhlKSlyZXR1cm4gMTtpZihlLmlzKCd0ZXh0JykpcmV0dXJuIGUuZGF0YS5sZW5ndGg7aWYoZS5pcygndWlFbGVtZW50JykpcmV0dXJuIDA7ZWxzZXtsZXQgdD0wO2Zvcihjb25zdCBvIG9mIGUuZ2V0Q2hpbGRyZW4oKSl0Kz10aGlzLmdldE1vZGVsTGVuZ3RoKG8pO3JldHVybiB0fX1fZmluZFBvc2l0aW9uSW4oZSx0KXtsZXQgbz0wLG49MCxpPTAscjtpZihlLmlzKCd0ZXh0JykpcmV0dXJuIG5ldyB4YyhlLHQpO2Zvcig7bjx0OylyPWUuZ2V0Q2hpbGQoaSksbz10aGlzLmdldE1vZGVsTGVuZ3RoKHIpLG4rPW8saSsrO3JldHVybiBuPT10P3RoaXMuX21vdmVWaWV3UG9zaXRpb25Ub1RleHROb2RlKG5ldyB4YyhlLGkpKTp0aGlzLl9maW5kUG9zaXRpb25JbihyLHQtKG4tbykpfV9tb3ZlVmlld1Bvc2l0aW9uVG9UZXh0Tm9kZShlKXtjb25zdCB0PWUubm9kZUJlZm9yZSxvPWUubm9kZUFmdGVyO2lmKHQgaW5zdGFuY2VvZiBPZClyZXR1cm4gbmV3IHhjKHQsdC5kYXRhLmxlbmd0aCk7cmV0dXJuIG8gaW5zdGFuY2VvZiBPZD9uZXcgeGMobywwKTplfX1mKCR1LHNzKTtjbGFzcyBKdXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2NvbnN1bWFibGU9bmV3IE1hcCx0aGlzLl90ZXh0UHJveHlSZWdpc3RyeT1uZXcgTWFwfWFkZChlLHQpe3Q9bHQodCksZSBpbnN0YW5jZW9mIGp1JiYoZT10aGlzLl9nZXRTeW1ib2xGb3JUZXh0UHJveHkoZSkpLHRoaXMuX2NvbnN1bWFibGUuaGFzKGUpfHx0aGlzLl9jb25zdW1hYmxlLnNldChlLG5ldyBNYXApLHRoaXMuX2NvbnN1bWFibGUuZ2V0KGUpLnNldCh0LCEwKX1jb25zdW1lKGUsdCl7cmV0dXJuIHQ9bHQodCksZSBpbnN0YW5jZW9mIGp1JiYoZT10aGlzLl9nZXRTeW1ib2xGb3JUZXh0UHJveHkoZSkpLCEhdGhpcy50ZXN0KGUsdCkmJih0aGlzLl9jb25zdW1hYmxlLmdldChlKS5zZXQodCwhMSksITApfXRlc3QoZSx0KXt0PWx0KHQpLGUgaW5zdGFuY2VvZiBqdSYmKGU9dGhpcy5fZ2V0U3ltYm9sRm9yVGV4dFByb3h5KGUpKTtjb25zdCBvPXRoaXMuX2NvbnN1bWFibGUuZ2V0KGUpO2lmKG89PT12b2lkIDApcmV0dXJuIG51bGw7Y29uc3Qgbj1vLmdldCh0KTtyZXR1cm4gdm9pZCAwPT09bj9udWxsOm59cmV2ZXJ0KGUsdCl7dD1sdCh0KSxlIGluc3RhbmNlb2YganUmJihlPXRoaXMuX2dldFN5bWJvbEZvclRleHRQcm94eShlKSk7Y29uc3Qgbz10aGlzLnRlc3QoZSx0KTtyZXR1cm4hMT09PW8/KHRoaXMuX2NvbnN1bWFibGUuZ2V0KGUpLnNldCh0LCEwKSwhMCk6ITAhPT1vJiZudWxsfV9nZXRTeW1ib2xGb3JUZXh0UHJveHkoZSl7bGV0IHQ9bnVsbDtjb25zdCBvPXRoaXMuX3RleHRQcm94eVJlZ2lzdHJ5LmdldChlLnN0YXJ0T2Zmc2V0KTtpZihvKXtjb25zdCBuPW8uZ2V0KGUuZW5kT2Zmc2V0KTtuJiYodD1uLmdldChlLnBhcmVudCkpfXJldHVybiB0fHwodD10aGlzLl9hZGRTeW1ib2xGb3JUZXh0UHJveHkoZS5zdGFydE9mZnNldCxlLmVuZE9mZnNldCxlLnBhcmVudCkpLHR9X2FkZFN5bWJvbEZvclRleHRQcm94eShlLHQsbyl7Y29uc3Qgbj1TeW1ib2woJ3RleHRQcm94eVN5bWJvbCcpO2xldCBpLHI7cmV0dXJuIGk9dGhpcy5fdGV4dFByb3h5UmVnaXN0cnkuZ2V0KGUpLGl8fChpPW5ldyBNYXAsdGhpcy5fdGV4dFByb3h5UmVnaXN0cnkuc2V0KGUsaSkpLHI9aS5nZXQodCkscnx8KHI9bmV3IE1hcCxpLnNldCh0LHIpKSxyLnNldChvLG4pLG59fWNsYXNzIFF1e2NvbnN0cnVjdG9yKGU9e30pe3RoaXMuY29udmVyc2lvbkFwaT1tYyh7ZGlzcGF0Y2hlcjp0aGlzfSxlKX1jb252ZXJ0Q2hhbmdlcyhlLHQpe2Zvcihjb25zdCBvIG9mIGUuZ2V0TWFya2Vyc1RvUmVtb3ZlKCkpdGhpcy5jb252ZXJ0TWFya2VyUmVtb3ZlKG8ubmFtZSxvLnJhbmdlLHQpO2Zvcihjb25zdCBvIG9mIGUuZ2V0Q2hhbmdlcygpKSdpbnNlcnQnPT1vLnR5cGU/dGhpcy5jb252ZXJ0SW5zZXJ0KEd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KG8ucG9zaXRpb24sby5sZW5ndGgpLHQpOidyZW1vdmUnPT1vLnR5cGU/dGhpcy5jb252ZXJ0UmVtb3ZlKG8ucG9zaXRpb24sby5sZW5ndGgsby5uYW1lLHQpOnRoaXMuY29udmVydEF0dHJpYnV0ZShvLnJhbmdlLG8uYXR0cmlidXRlS2V5LG8uYXR0cmlidXRlT2xkVmFsdWUsby5hdHRyaWJ1dGVOZXdWYWx1ZSx0KTtmb3IoY29uc3QgbyBvZiBlLmdldE1hcmtlcnNUb0FkZCgpKXRoaXMuY29udmVydE1hcmtlckFkZChvLm5hbWUsby5yYW5nZSx0KX1jb252ZXJ0SW5zZXJ0KGUsdCl7dGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcj10LHRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlPXRoaXMuX2NyZWF0ZUluc2VydENvbnN1bWFibGUoZSk7Zm9yKGNvbnN0IG8gb2YgZSl7Y29uc3QgZT1vLml0ZW0sdD1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChvLnByZXZpb3VzUG9zaXRpb24sby5sZW5ndGgpLG49e2l0ZW06ZSxyYW5nZTp0fTt0aGlzLl90ZXN0QW5kRmlyZSgnaW5zZXJ0JyxuKTtmb3IoY29uc3QgdCBvZiBlLmdldEF0dHJpYnV0ZUtleXMoKSluLmF0dHJpYnV0ZUtleT10LG4uYXR0cmlidXRlT2xkVmFsdWU9bnVsbCxuLmF0dHJpYnV0ZU5ld1ZhbHVlPWUuZ2V0QXR0cmlidXRlKHQpLHRoaXMuX3Rlc3RBbmRGaXJlKGBhdHRyaWJ1dGU6JHt0fWAsbil9dGhpcy5fY2xlYXJDb252ZXJzaW9uQXBpKCl9Y29udmVydFJlbW92ZShlLHQsbyxuKXt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyPW4sdGhpcy5maXJlKCdyZW1vdmU6JytvLHtwb3NpdGlvbjplLGxlbmd0aDp0fSx0aGlzLmNvbnZlcnNpb25BcGkpLHRoaXMuX2NsZWFyQ29udmVyc2lvbkFwaSgpfWNvbnZlcnRBdHRyaWJ1dGUoZSx0LG8sbixpKXt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyPWksdGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGU9dGhpcy5fY3JlYXRlQ29uc3VtYWJsZUZvclJhbmdlKGUsYGF0dHJpYnV0ZToke3R9YCk7Zm9yKGNvbnN0IHIgb2YgZSl7Y29uc3QgZT1yLml0ZW0saT1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChyLnByZXZpb3VzUG9zaXRpb24sci5sZW5ndGgpO3RoaXMuX3Rlc3RBbmRGaXJlKGBhdHRyaWJ1dGU6JHt0fWAse2l0ZW06ZSxyYW5nZTppLGF0dHJpYnV0ZUtleTp0LGF0dHJpYnV0ZU9sZFZhbHVlOm8sYXR0cmlidXRlTmV3VmFsdWU6bn0pfXRoaXMuX2NsZWFyQ29udmVyc2lvbkFwaSgpfWNvbnZlcnRTZWxlY3Rpb24oZSx0LG8pe2NvbnN0IG49QXJyYXkuZnJvbSh0LmdldE1hcmtlcnNBdFBvc2l0aW9uKGUuZ2V0Rmlyc3RQb3NpdGlvbigpKSk7aWYodGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcj1vLHRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlPXRoaXMuX2NyZWF0ZVNlbGVjdGlvbkNvbnN1bWFibGUoZSxuKSx0aGlzLmZpcmUoJ3NlbGVjdGlvbicse3NlbGVjdGlvbjplfSx0aGlzLmNvbnZlcnNpb25BcGkpLCEhZS5pc0NvbGxhcHNlZCl7Zm9yKGNvbnN0IHQgb2Ygbil7Y29uc3Qgbz10LmdldFJhbmdlKCk7aWYoIWR0KGUuZ2V0Rmlyc3RQb3NpdGlvbigpLHQsdGhpcy5jb252ZXJzaW9uQXBpLm1hcHBlcikpY29udGludWU7Y29uc3Qgbj17aXRlbTplLG1hcmtlck5hbWU6dC5uYW1lLG1hcmtlclJhbmdlOm99O3RoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlLnRlc3QoZSwnYWRkTWFya2VyOicrdC5uYW1lKSYmdGhpcy5maXJlKCdhZGRNYXJrZXI6Jyt0Lm5hbWUsbix0aGlzLmNvbnZlcnNpb25BcGkpfWZvcihjb25zdCB0IG9mIGUuZ2V0QXR0cmlidXRlS2V5cygpKXtjb25zdCBvPXtpdGVtOmUscmFuZ2U6ZS5nZXRGaXJzdFJhbmdlKCksYXR0cmlidXRlS2V5OnQsYXR0cmlidXRlT2xkVmFsdWU6bnVsbCxhdHRyaWJ1dGVOZXdWYWx1ZTplLmdldEF0dHJpYnV0ZSh0KX07dGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGUudGVzdChlLCdhdHRyaWJ1dGU6JytvLmF0dHJpYnV0ZUtleSkmJnRoaXMuZmlyZSgnYXR0cmlidXRlOicrby5hdHRyaWJ1dGVLZXksbyx0aGlzLmNvbnZlcnNpb25BcGkpfXRoaXMuX2NsZWFyQ29udmVyc2lvbkFwaSgpfX1jb252ZXJ0TWFya2VyQWRkKGUsdCxvKXtpZih0LnJvb3QuZG9jdW1lbnQmJickZ3JhdmV5YXJkJyE9dC5yb290LnJvb3ROYW1lKXt0aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyPW87Y29uc3Qgbj0nYWRkTWFya2VyOicrZTtpZih0LmlzQ29sbGFwc2VkKXtjb25zdCBvPW5ldyBKdTtyZXR1cm4gby5hZGQodCxuKSx0aGlzLmNvbnZlcnNpb25BcGkuY29uc3VtYWJsZT1vLHZvaWQgdGhpcy5maXJlKG4se21hcmtlck5hbWU6ZSxtYXJrZXJSYW5nZTp0fSx0aGlzLmNvbnZlcnNpb25BcGkpfXRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlPXRoaXMuX2NyZWF0ZUNvbnN1bWFibGVGb3JSYW5nZSh0LG4pO2Zvcihjb25zdCBvIG9mIHQuZ2V0SXRlbXMoKSl7aWYoIXRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlLnRlc3QobyxuKSljb250aW51ZTtjb25zdCBpPXtpdGVtOm8scmFuZ2U6R3UuY3JlYXRlT24obyksbWFya2VyTmFtZTplLG1hcmtlclJhbmdlOnR9O3RoaXMuZmlyZShuLGksdGhpcy5jb252ZXJzaW9uQXBpKX10aGlzLl9jbGVhckNvbnZlcnNpb25BcGkoKX19Y29udmVydE1hcmtlclJlbW92ZShlLHQsbyl7dC5yb290LmRvY3VtZW50JiYnJGdyYXZleWFyZCchPXQucm9vdC5yb290TmFtZSYmKHRoaXMuY29udmVyc2lvbkFwaS53cml0ZXI9byx0aGlzLmZpcmUoJ3JlbW92ZU1hcmtlcjonK2Use21hcmtlck5hbWU6ZSxtYXJrZXJSYW5nZTp0fSx0aGlzLmNvbnZlcnNpb25BcGkpLHRoaXMuX2NsZWFyQ29udmVyc2lvbkFwaSgpKX1fY3JlYXRlSW5zZXJ0Q29uc3VtYWJsZShlKXtjb25zdCB0PW5ldyBKdTtmb3IoY29uc3QgbyBvZiBlKXtjb25zdCBlPW8uaXRlbTt0LmFkZChlLCdpbnNlcnQnKTtmb3IoY29uc3QgbyBvZiBlLmdldEF0dHJpYnV0ZUtleXMoKSl0LmFkZChlLCdhdHRyaWJ1dGU6JytvKX1yZXR1cm4gdH1fY3JlYXRlQ29uc3VtYWJsZUZvclJhbmdlKGUsdCl7Y29uc3Qgbz1uZXcgSnU7Zm9yKGNvbnN0IG4gb2YgZS5nZXRJdGVtcygpKW8uYWRkKG4sdCk7cmV0dXJuIG99X2NyZWF0ZVNlbGVjdGlvbkNvbnN1bWFibGUoZSx0KXtjb25zdCBvPW5ldyBKdTtvLmFkZChlLCdzZWxlY3Rpb24nKTtmb3IoY29uc3QgbiBvZiB0KW8uYWRkKGUsJ2FkZE1hcmtlcjonK24ubmFtZSk7Zm9yKGNvbnN0IG4gb2YgZS5nZXRBdHRyaWJ1dGVLZXlzKCkpby5hZGQoZSwnYXR0cmlidXRlOicrbik7cmV0dXJuIG99X3Rlc3RBbmRGaXJlKGUsdCl7aWYodGhpcy5jb252ZXJzaW9uQXBpLmNvbnN1bWFibGUudGVzdCh0Lml0ZW0sZSkpe2NvbnN0IG89dC5pdGVtLm5hbWV8fCckdGV4dCc7dGhpcy5maXJlKGUrJzonK28sdCx0aGlzLmNvbnZlcnNpb25BcGkpfX1fY2xlYXJDb252ZXJzaW9uQXBpKCl7ZGVsZXRlIHRoaXMuY29udmVyc2lvbkFwaS53cml0ZXIsZGVsZXRlIHRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlfX1mKFF1LHNzKTtjbGFzcyBZdXtjb25zdHJ1Y3RvcihlLHQsbyl7dGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ9ITEsdGhpcy5fcmFuZ2VzPVtdLHRoaXMuX2F0dHJzPW5ldyBNYXAsZSYmdGhpcy5zZXRUbyhlLHQsbyl9Z2V0IGFuY2hvcigpe2lmKDA8dGhpcy5fcmFuZ2VzLmxlbmd0aCl7Y29uc3QgZT10aGlzLl9yYW5nZXNbdGhpcy5fcmFuZ2VzLmxlbmd0aC0xXTtyZXR1cm4gdGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ/ZS5lbmQ6ZS5zdGFydH1yZXR1cm4gbnVsbH1nZXQgZm9jdXMoKXtpZigwPHRoaXMuX3Jhbmdlcy5sZW5ndGgpe2NvbnN0IGU9dGhpcy5fcmFuZ2VzW3RoaXMuX3Jhbmdlcy5sZW5ndGgtMV07cmV0dXJuIHRoaXMuX2xhc3RSYW5nZUJhY2t3YXJkP2Uuc3RhcnQ6ZS5lbmR9cmV0dXJuIG51bGx9Z2V0IGlzQ29sbGFwc2VkKCl7Y29uc3QgZT10aGlzLl9yYW5nZXMubGVuZ3RoO3JldHVybiEoMSE9PWUpJiZ0aGlzLl9yYW5nZXNbMF0uaXNDb2xsYXBzZWR9Z2V0IHJhbmdlQ291bnQoKXtyZXR1cm4gdGhpcy5fcmFuZ2VzLmxlbmd0aH1nZXQgaXNCYWNrd2FyZCgpe3JldHVybiF0aGlzLmlzQ29sbGFwc2VkJiZ0aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZH1pc0VxdWFsKGUpe2lmKHRoaXMucmFuZ2VDb3VudCE9ZS5yYW5nZUNvdW50KXJldHVybiExO2lmKDA9PT10aGlzLnJhbmdlQ291bnQpcmV0dXJuITA7aWYoIXRoaXMuYW5jaG9yLmlzRXF1YWwoZS5hbmNob3IpfHwhdGhpcy5mb2N1cy5pc0VxdWFsKGUuZm9jdXMpKXJldHVybiExO2Zvcihjb25zdCB0IG9mIHRoaXMuX3Jhbmdlcyl7bGV0IG89ITE7Zm9yKGNvbnN0IG4gb2YgZS5fcmFuZ2VzKWlmKHQuaXNFcXVhbChuKSl7bz0hMDticmVha31pZighbylyZXR1cm4hMX1yZXR1cm4hMH0qZ2V0UmFuZ2VzKCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcmFuZ2VzKXlpZWxkIEd1LmNyZWF0ZUZyb21SYW5nZShlKX1nZXRGaXJzdFJhbmdlKCl7bGV0IGU9bnVsbDtmb3IoY29uc3QgdCBvZiB0aGlzLl9yYW5nZXMpKCFlfHx0LnN0YXJ0LmlzQmVmb3JlKGUuc3RhcnQpKSYmKGU9dCk7cmV0dXJuIGU/R3UuY3JlYXRlRnJvbVJhbmdlKGUpOm51bGx9Z2V0TGFzdFJhbmdlKCl7bGV0IGU9bnVsbDtmb3IoY29uc3QgdCBvZiB0aGlzLl9yYW5nZXMpKCFlfHx0LmVuZC5pc0FmdGVyKGUuZW5kKSkmJihlPXQpO3JldHVybiBlP0d1LmNyZWF0ZUZyb21SYW5nZShlKTpudWxsfWdldEZpcnN0UG9zaXRpb24oKXtjb25zdCBlPXRoaXMuZ2V0Rmlyc3RSYW5nZSgpO3JldHVybiBlP0t1LmNyZWF0ZUZyb21Qb3NpdGlvbihlLnN0YXJ0KTpudWxsfWdldExhc3RQb3NpdGlvbigpe2NvbnN0IGU9dGhpcy5nZXRMYXN0UmFuZ2UoKTtyZXR1cm4gZT9LdS5jcmVhdGVGcm9tUG9zaXRpb24oZS5lbmQpOm51bGx9c2V0VG8oZSx0LG8pe2lmKG51bGw9PT1lKXRoaXMuX3NldFJhbmdlcyhbXSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgWXUpdGhpcy5fc2V0UmFuZ2VzKGUuZ2V0UmFuZ2VzKCksZS5pc0JhY2t3YXJkKTtlbHNlIGlmKGUmJidmdW5jdGlvbic9PXR5cGVvZiBlLmdldFJhbmdlcyl0aGlzLl9zZXRSYW5nZXMoZS5nZXRSYW5nZXMoKSxlLmlzQmFja3dhcmQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEd1KXRoaXMuX3NldFJhbmdlcyhbZV0sISF0JiYhIXQuYmFja3dhcmQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIEt1KXRoaXMuX3NldFJhbmdlcyhbbmV3IEd1KGUpXSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgTHUpe2NvbnN0IG49ISFvJiYhIW8uYmFja3dhcmQ7bGV0IGk7aWYoJ2luJz09dClpPUd1LmNyZWF0ZUluKGUpO2Vsc2UgaWYoJ29uJz09dClpPUd1LmNyZWF0ZU9uKGUpO2Vsc2UgaWYodCE9PXZvaWQgMClpPUd1LmNyZWF0ZUNvbGxhcHNlZEF0KGUsdCk7ZWxzZSB0aHJvdyBuZXcgWmEoJ21vZGVsLXNlbGVjdGlvbi1zZXRUby1yZXF1aXJlZC1zZWNvbmQtcGFyYW1ldGVyOiBzZWxlY3Rpb24uc2V0VG8gcmVxdWlyZXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIgd2hlbiB0aGUgZmlyc3QgcGFyYW1ldGVyIGlzIGEgbm9kZS4nKTt0aGlzLl9zZXRSYW5nZXMoW2ldLG4pfWVsc2UgaWYoUChlKSl0aGlzLl9zZXRSYW5nZXMoZSx0JiYhIXQuYmFja3dhcmQpO2Vsc2UgdGhyb3cgbmV3IFphKCdtb2RlbC1zZWxlY3Rpb24tc2V0VG8tbm90LXNlbGVjdGFibGU6IENhbm5vdCBzZXQgc2VsZWN0aW9uIHRvIGdpdmVuIHBsYWNlLicpfV9zZXRSYW5nZXMoZSx0PSExKXtlPUFycmF5LmZyb20oZSk7Y29uc3Qgbz1lLnNvbWUoKGUpPT57aWYoIShlIGluc3RhbmNlb2YgR3UpKXRocm93IG5ldyBaYSgnbW9kZWwtc2VsZWN0aW9uLWFkZGVkLW5vdC1yYW5nZTogVHJ5aW5nIHRvIGFkZCBhbiBvYmplY3QgdGhhdCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgUmFuZ2UuJyk7cmV0dXJuIHRoaXMuX3Jhbmdlcy5ldmVyeSgodCk9PiF0LmlzRXF1YWwoZSkpfSk7aWYoZS5sZW5ndGghPT10aGlzLl9yYW5nZXMubGVuZ3RofHxvKXt0aGlzLl9yZW1vdmVBbGxSYW5nZXMoKTtmb3IoY29uc3QgdCBvZiBlKXRoaXMuX3B1c2hSYW5nZSh0KTt0aGlzLl9sYXN0UmFuZ2VCYWNrd2FyZD0hIXQsdGhpcy5maXJlKCdjaGFuZ2U6cmFuZ2UnLHtkaXJlY3RDaGFuZ2U6ITB9KX19c2V0Rm9jdXMoZSx0KXtpZihudWxsPT09dGhpcy5hbmNob3IpdGhyb3cgbmV3IFphKCdtb2RlbC1zZWxlY3Rpb24tc2V0Rm9jdXMtbm8tcmFuZ2VzOiBDYW5ub3Qgc2V0IHNlbGVjdGlvbiBmb2N1cyBpZiB0aGVyZSBhcmUgbm8gcmFuZ2VzIGluIHNlbGVjdGlvbi4nKTtjb25zdCBvPUt1LmNyZWF0ZUF0KGUsdCk7aWYoJ3NhbWUnIT1vLmNvbXBhcmVXaXRoKHRoaXMuZm9jdXMpKXtjb25zdCBlPXRoaXMuYW5jaG9yO3RoaXMuX3Jhbmdlcy5sZW5ndGgmJnRoaXMuX3BvcFJhbmdlKCksJ2JlZm9yZSc9PW8uY29tcGFyZVdpdGgoZSk/KHRoaXMuX3B1c2hSYW5nZShuZXcgR3UobyxlKSksdGhpcy5fbGFzdFJhbmdlQmFja3dhcmQ9ITApOih0aGlzLl9wdXNoUmFuZ2UobmV3IEd1KGUsbykpLHRoaXMuX2xhc3RSYW5nZUJhY2t3YXJkPSExKSx0aGlzLmZpcmUoJ2NoYW5nZTpyYW5nZScse2RpcmVjdENoYW5nZTohMH0pfX1nZXRBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMuX2F0dHJzLmdldChlKX1nZXRBdHRyaWJ1dGVzKCl7cmV0dXJuIHRoaXMuX2F0dHJzLmVudHJpZXMoKX1nZXRBdHRyaWJ1dGVLZXlzKCl7cmV0dXJuIHRoaXMuX2F0dHJzLmtleXMoKX1oYXNBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMuX2F0dHJzLmhhcyhlKX1yZW1vdmVBdHRyaWJ1dGUoZSl7dGhpcy5oYXNBdHRyaWJ1dGUoZSkmJih0aGlzLl9hdHRycy5kZWxldGUoZSksdGhpcy5maXJlKCdjaGFuZ2U6YXR0cmlidXRlJyx7YXR0cmlidXRlS2V5czpbZV0sZGlyZWN0Q2hhbmdlOiEwfSkpfXNldEF0dHJpYnV0ZShlLHQpe3RoaXMuZ2V0QXR0cmlidXRlKGUpIT09dCYmKHRoaXMuX2F0dHJzLnNldChlLHQpLHRoaXMuZmlyZSgnY2hhbmdlOmF0dHJpYnV0ZScse2F0dHJpYnV0ZUtleXM6W2VdLGRpcmVjdENoYW5nZTohMH0pKX1nZXRTZWxlY3RlZEVsZW1lbnQoKXtpZigxIT09dGhpcy5yYW5nZUNvdW50KXJldHVybiBudWxsO2NvbnN0IGU9dGhpcy5nZXRGaXJzdFJhbmdlKCksdD1lLnN0YXJ0Lm5vZGVBZnRlcixvPWUuZW5kLm5vZGVCZWZvcmU7cmV0dXJuIHQgaW5zdGFuY2VvZiBXdSYmdD09bz90Om51bGx9KmdldFNlbGVjdGVkQmxvY2tzKCl7Y29uc3QgZT1uZXcgV2Vha1NldDtmb3IoY29uc3QgdCBvZiB0aGlzLmdldFJhbmdlcygpKXtjb25zdCBvPXV0KHQuc3RhcnQsZSk7byYmKHlpZWxkIG8pO2Zvcihjb25zdCBvIG9mIHQuZ2V0V2Fsa2VyKCkpJ2VsZW1lbnRFbmQnPT1vLnR5cGUmJmN0KG8uaXRlbSxlKSYmKHlpZWxkIG8uaXRlbSk7Y29uc3Qgbj11dCh0LmVuZCxlKTtuJiYhdC5lbmQuaXNUb3VjaGluZyhLdS5jcmVhdGVBdChuKSkmJih5aWVsZCBuKX19Y29udGFpbnNFbnRpcmVDb250ZW50KGU9dGhpcy5hbmNob3Iucm9vdCl7Y29uc3QgdD1LdS5jcmVhdGVBdChlKSxvPUt1LmNyZWF0ZUF0KGUsJ2VuZCcpO3JldHVybiB0LmlzVG91Y2hpbmcodGhpcy5nZXRGaXJzdFBvc2l0aW9uKCkpJiZvLmlzVG91Y2hpbmcodGhpcy5nZXRMYXN0UG9zaXRpb24oKSl9X3B1c2hSYW5nZShlKXt0aGlzLl9jaGVja1JhbmdlKGUpLHRoaXMuX3Jhbmdlcy5wdXNoKEd1LmNyZWF0ZUZyb21SYW5nZShlKSl9X2NoZWNrUmFuZ2UoZSl7Zm9yKGxldCB0PTA7dDx0aGlzLl9yYW5nZXMubGVuZ3RoO3QrKylpZihlLmlzSW50ZXJzZWN0aW5nKHRoaXMuX3Jhbmdlc1t0XSkpdGhyb3cgbmV3IFphKCdtb2RlbC1zZWxlY3Rpb24tcmFuZ2UtaW50ZXJzZWN0czogVHJ5aW5nIHRvIGFkZCBhIHJhbmdlIHRoYXQgaW50ZXJzZWN0cyB3aXRoIGFub3RoZXIgcmFuZ2UgZnJvbSBzZWxlY3Rpb24uJyx7YWRkZWRSYW5nZTplLGludGVyc2VjdGluZ1JhbmdlOnRoaXMuX3Jhbmdlc1t0XX0pfV9yZW1vdmVBbGxSYW5nZXMoKXtmb3IoOzA8dGhpcy5fcmFuZ2VzLmxlbmd0aDspdGhpcy5fcG9wUmFuZ2UoKX1fcG9wUmFuZ2UoKXt0aGlzLl9yYW5nZXMucG9wKCl9fWYoWXUsc3MpO2NsYXNzIFh1IGV4dGVuZHMgR3V7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlLHQpLG10LmNhbGwodGhpcyl9ZGV0YWNoKCl7dGhpcy5zdG9wTGlzdGVuaW5nKCl9fWYoWHUsc3MpO2NvbnN0IFp1PSdzZWxlY3Rpb246JztjbGFzcyBlbXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9zZWxlY3Rpb249bmV3IHRtKGUpLHRoaXMuX3NlbGVjdGlvbi5kZWxlZ2F0ZSgnY2hhbmdlOnJhbmdlJykudG8odGhpcyksdGhpcy5fc2VsZWN0aW9uLmRlbGVnYXRlKCdjaGFuZ2U6YXR0cmlidXRlJykudG8odGhpcyl9Z2V0IGlzQ29sbGFwc2VkKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0NvbGxhcHNlZH1nZXQgYW5jaG9yKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5hbmNob3J9Z2V0IGZvY3VzKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5mb2N1c31nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24ucmFuZ2VDb3VudH1nZXQgaGFzT3duUmFuZ2UoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmhhc093blJhbmdlfWdldCBpc0JhY2t3YXJkKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0JhY2t3YXJkfWdldCBpc0dyYXZpdHlPdmVycmlkZGVuKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5pc0dyYXZpdHlPdmVycmlkZGVufWdldCBfcmFuZ2VzKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5fcmFuZ2VzfWdldFJhbmdlcygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0UmFuZ2VzKCl9Z2V0Rmlyc3RQb3NpdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0Rmlyc3RQb3NpdGlvbigpfWdldExhc3RQb3NpdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0TGFzdFBvc2l0aW9uKCl9Z2V0Rmlyc3RSYW5nZSgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0Rmlyc3RSYW5nZSgpfWdldExhc3RSYW5nZSgpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0TGFzdFJhbmdlKCl9Z2V0U2VsZWN0ZWRCbG9ja3MoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCl9Z2V0U2VsZWN0ZWRFbGVtZW50KCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRTZWxlY3RlZEVsZW1lbnQoKX1jb250YWluc0VudGlyZUNvbnRlbnQoZSl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5jb250YWluc0VudGlyZUNvbnRlbnQoZSl9ZGVzdHJveSgpe3RoaXMuX3NlbGVjdGlvbi5kZXN0cm95KCl9Z2V0QXR0cmlidXRlS2V5cygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uZ2V0QXR0cmlidXRlS2V5cygpfWdldEF0dHJpYnV0ZXMoKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uLmdldEF0dHJpYnV0ZXMoKX1nZXRBdHRyaWJ1dGUoZSl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5nZXRBdHRyaWJ1dGUoZSl9aGFzQXR0cmlidXRlKGUpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uaGFzQXR0cmlidXRlKGUpfV9zZXRGb2N1cyhlLHQpe3RoaXMuX3NlbGVjdGlvbi5zZXRGb2N1cyhlLHQpfV9zZXRUbyhlLHQsbyl7dGhpcy5fc2VsZWN0aW9uLnNldFRvKGUsdCxvKX1fc2V0QXR0cmlidXRlKGUsdCl7dGhpcy5fc2VsZWN0aW9uLnNldEF0dHJpYnV0ZShlLHQpfV9yZW1vdmVBdHRyaWJ1dGUoZSl7dGhpcy5fc2VsZWN0aW9uLnJlbW92ZUF0dHJpYnV0ZShlKX1fZ2V0U3RvcmVkQXR0cmlidXRlcygpe3JldHVybiB0aGlzLl9zZWxlY3Rpb24uX2dldFN0b3JlZEF0dHJpYnV0ZXMoKX1fb3ZlcnJpZGVHcmF2aXR5KCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvbi5vdmVycmlkZUdyYXZpdHkoKX1fcmVzdG9yZUdyYXZpdHkoZSl7dGhpcy5fc2VsZWN0aW9uLnJlc3RvcmVHcmF2aXR5KGUpfXN0YXRpYyBfZ2V0U3RvcmVBdHRyaWJ1dGVLZXkoZSl7cmV0dXJuIFp1K2V9c3RhdGljIF9pc1N0b3JlQXR0cmlidXRlS2V5KGUpe3JldHVybiBlLnN0YXJ0c1dpdGgoWnUpfX1mKGVtLHNzKTtjbGFzcyB0bSBleHRlbmRzIFl1e2NvbnN0cnVjdG9yKGUpe3N1cGVyKCksdGhpcy5fbW9kZWw9ZS5tb2RlbCx0aGlzLl9kb2N1bWVudD1lLHRoaXMuX2F0dHJpYnV0ZVByaW9yaXR5PW5ldyBNYXAsdGhpcy5fZml4R3JhdmV5YXJkUmFuZ2VzRGF0YT1bXSx0aGlzLl9oYXNDaGFuZ2VkUmFuZ2U9ITEsdGhpcy5fb3ZlcnJpZGRlbkdyYXZpdHlSZWdpc3Rlcj1uZXcgU2V0LHRoaXMub24oJ2NoYW5nZTpyYW5nZScsKCk9Pntmb3IoY29uc3QgZSBvZiB0aGlzLmdldFJhbmdlcygpKWlmKCF0aGlzLl9kb2N1bWVudC5fdmFsaWRhdGVTZWxlY3Rpb25SYW5nZShlKSl0aHJvdyBuZXcgWmEoJ2RvY3VtZW50LXNlbGVjdGlvbi13cm9uZy1wb3NpdGlvbjogUmFuZ2UgZnJvbSBkb2N1bWVudCBzZWxlY3Rpb24gc3RhcnRzIG9yIGVuZHMgYXQgaW5jb3JyZWN0IHBvc2l0aW9uLicse3JhbmdlOmV9KX0pLHRoaXMubGlzdGVuVG8odGhpcy5fZG9jdW1lbnQsJ2NoYW5nZScsKGUsdCk9Pnt0aGlzLl91cGRhdGVBdHRyaWJ1dGVzKCExKSxmdCh0aGlzLl9tb2RlbCx0KX0pLHRoaXMubGlzdGVuVG8odGhpcy5fbW9kZWwsJ2FwcGx5T3BlcmF0aW9uJywoKT0+e2Zvcig7dGhpcy5fZml4R3JhdmV5YXJkUmFuZ2VzRGF0YS5sZW5ndGg7KXtjb25zdHtsaXZlUmFuZ2U6ZSxzb3VyY2VQb3NpdGlvbjp0fT10aGlzLl9maXhHcmF2ZXlhcmRSYW5nZXNEYXRhLnNoaWZ0KCk7dGhpcy5fZml4R3JhdmV5YXJkU2VsZWN0aW9uKGUsdCl9dGhpcy5faGFzQ2hhbmdlZFJhbmdlJiYodGhpcy5faGFzQ2hhbmdlZFJhbmdlPSExLHRoaXMuZmlyZSgnY2hhbmdlOnJhbmdlJyx7ZGlyZWN0Q2hhbmdlOiExfSkpfSx7cHJpb3JpdHk6J2xvd2VzdCd9KX1nZXQgaXNDb2xsYXBzZWQoKXtjb25zdCBlPXRoaXMuX3Jhbmdlcy5sZW5ndGg7cmV0dXJuIDA9PT1lP3RoaXMuX2RvY3VtZW50Ll9nZXREZWZhdWx0UmFuZ2UoKS5pc0NvbGxhcHNlZDpzdXBlci5pc0NvbGxhcHNlZH1nZXQgYW5jaG9yKCl7cmV0dXJuIHN1cGVyLmFuY2hvcnx8dGhpcy5fZG9jdW1lbnQuX2dldERlZmF1bHRSYW5nZSgpLnN0YXJ0fWdldCBmb2N1cygpe3JldHVybiBzdXBlci5mb2N1c3x8dGhpcy5fZG9jdW1lbnQuX2dldERlZmF1bHRSYW5nZSgpLmVuZH1nZXQgcmFuZ2VDb3VudCgpe3JldHVybiB0aGlzLl9yYW5nZXMubGVuZ3RoP3RoaXMuX3Jhbmdlcy5sZW5ndGg6MX1nZXQgaGFzT3duUmFuZ2UoKXtyZXR1cm4gMDx0aGlzLl9yYW5nZXMubGVuZ3RofWdldCBpc0dyYXZpdHlPdmVycmlkZGVuKCl7cmV0dXJuISF0aGlzLl9vdmVycmlkZGVuR3Jhdml0eVJlZ2lzdGVyLnNpemV9ZGVzdHJveSgpe2ZvcihsZXQgZT0wO2U8dGhpcy5fcmFuZ2VzLmxlbmd0aDtlKyspdGhpcy5fcmFuZ2VzW2VdLmRldGFjaCgpO3RoaXMuc3RvcExpc3RlbmluZygpfSpnZXRSYW5nZXMoKXt0aGlzLl9yYW5nZXMubGVuZ3RoP3lpZWxkKnN1cGVyLmdldFJhbmdlcygpOnlpZWxkIHRoaXMuX2RvY3VtZW50Ll9nZXREZWZhdWx0UmFuZ2UoKX1nZXRGaXJzdFJhbmdlKCl7cmV0dXJuIHN1cGVyLmdldEZpcnN0UmFuZ2UoKXx8dGhpcy5fZG9jdW1lbnQuX2dldERlZmF1bHRSYW5nZSgpfWdldExhc3RSYW5nZSgpe3JldHVybiBzdXBlci5nZXRMYXN0UmFuZ2UoKXx8dGhpcy5fZG9jdW1lbnQuX2dldERlZmF1bHRSYW5nZSgpfXNldFRvKGUsdCxvKXtzdXBlci5zZXRUbyhlLHQsbyksdGhpcy5fcmVmcmVzaEF0dHJpYnV0ZXMoKX1zZXRGb2N1cyhlLHQpe3N1cGVyLnNldEZvY3VzKGUsdCksdGhpcy5fcmVmcmVzaEF0dHJpYnV0ZXMoKX1zZXRBdHRyaWJ1dGUoZSx0KXtpZih0aGlzLl9zZXRBdHRyaWJ1dGUoZSx0KSl7dGhpcy5maXJlKCdjaGFuZ2U6YXR0cmlidXRlJyx7YXR0cmlidXRlS2V5czpbZV0sZGlyZWN0Q2hhbmdlOiEwfSl9fXJlbW92ZUF0dHJpYnV0ZShlKXtpZih0aGlzLl9yZW1vdmVBdHRyaWJ1dGUoZSkpe3RoaXMuZmlyZSgnY2hhbmdlOmF0dHJpYnV0ZScse2F0dHJpYnV0ZUtleXM6W2VdLGRpcmVjdENoYW5nZTohMH0pfX1vdmVycmlkZUdyYXZpdHkoKXtjb25zdCBlPWkoKTtyZXR1cm4gdGhpcy5fb3ZlcnJpZGRlbkdyYXZpdHlSZWdpc3Rlci5hZGQoZSksMT09PXRoaXMuX292ZXJyaWRkZW5HcmF2aXR5UmVnaXN0ZXIuc2l6ZSYmdGhpcy5fcmVmcmVzaEF0dHJpYnV0ZXMoKSxlfXJlc3RvcmVHcmF2aXR5KGUpe2lmKCF0aGlzLl9vdmVycmlkZGVuR3Jhdml0eVJlZ2lzdGVyLmhhcyhlKSl0aHJvdyBuZXcgWmEoJ2RvY3VtZW50LXNlbGVjdGlvbi1ncmF2aXR5LXdyb25nLXJlc3RvcmU6IEF0dGVtcHRpbmcgdG8gcmVzdG9yZSB0aGUgc2VsZWN0aW9uIGdyYXZpdHkgZm9yIGFuIHVua25vd24gVUlELicse3VpZDplfSk7dGhpcy5fb3ZlcnJpZGRlbkdyYXZpdHlSZWdpc3Rlci5kZWxldGUoZSksdGhpcy5pc0dyYXZpdHlPdmVycmlkZGVufHx0aGlzLl9yZWZyZXNoQXR0cmlidXRlcygpfV9yZWZyZXNoQXR0cmlidXRlcygpe3RoaXMuX3VwZGF0ZUF0dHJpYnV0ZXMoITApfV9wb3BSYW5nZSgpe3RoaXMuX3Jhbmdlcy5wb3AoKS5kZXRhY2goKX1fcHVzaFJhbmdlKGUpe2NvbnN0IHQ9dGhpcy5fcHJlcGFyZVJhbmdlKGUpO3QmJnRoaXMuX3Jhbmdlcy5wdXNoKHQpfV9wcmVwYXJlUmFuZ2UoZSl7aWYodGhpcy5fY2hlY2tSYW5nZShlKSxlLnJvb3Q9PXRoaXMuX2RvY3VtZW50LmdyYXZleWFyZClyZXR1cm4gdm9pZCBSdS53YXJuKCdtb2RlbC1zZWxlY3Rpb24tcmFuZ2UtaW4tZ3JhdmV5YXJkOiBUcnlpbmcgdG8gYWRkIGEgUmFuZ2UgdGhhdCBpcyBpbiB0aGUgZ3JhdmV5YXJkIHJvb3QuIFJhbmdlIHJlamVjdGVkLicpO2NvbnN0IHQ9WHUuY3JlYXRlRnJvbVJhbmdlKGUpO3JldHVybiB0Lm9uKCdjaGFuZ2U6cmFuZ2UnLChlLG8sbik9Pnt0aGlzLl9oYXNDaGFuZ2VkUmFuZ2U9ITAsdC5yb290PT10aGlzLl9kb2N1bWVudC5ncmF2ZXlhcmQmJnRoaXMuX2ZpeEdyYXZleWFyZFJhbmdlc0RhdGEucHVzaCh7bGl2ZVJhbmdlOnQsc291cmNlUG9zaXRpb246bi5zb3VyY2VQb3NpdGlvbn0pfSksdH1fdXBkYXRlQXR0cmlidXRlcyhlKXtjb25zdCB0PXJ0KHRoaXMuX2dldFN1cnJvdW5kaW5nQXR0cmlidXRlcygpKSxvPXJ0KHRoaXMuZ2V0QXR0cmlidXRlcygpKTtpZihlKXRoaXMuX2F0dHJpYnV0ZVByaW9yaXR5PW5ldyBNYXAsdGhpcy5fYXR0cnM9bmV3IE1hcDtlbHNlIGZvcihjb25zdFtlLHRdb2YgdGhpcy5fYXR0cmlidXRlUHJpb3JpdHkpJ2xvdyc9PXQmJih0aGlzLl9hdHRycy5kZWxldGUoZSksdGhpcy5fYXR0cmlidXRlUHJpb3JpdHkuZGVsZXRlKGUpKTt0aGlzLl9zZXRBdHRyaWJ1dGVzVG8odCk7Y29uc3Qgbj1bXTtmb3IoY29uc3RbdCxpXW9mIHRoaXMuZ2V0QXR0cmlidXRlcygpKW8uaGFzKHQpJiZvLmdldCh0KT09PWl8fG4ucHVzaCh0KTtmb3IoY29uc3RbdF1vZiBvKXRoaXMuaGFzQXR0cmlidXRlKHQpfHxuLnB1c2godCk7MDxuLmxlbmd0aCYmdGhpcy5maXJlKCdjaGFuZ2U6YXR0cmlidXRlJyx7YXR0cmlidXRlS2V5czpuLGRpcmVjdENoYW5nZTohMX0pfV9zZXRBdHRyaWJ1dGUoZSx0LG89ITApe2NvbnN0IG49bz8nbm9ybWFsJzonbG93JztpZignbG93Jz09biYmJ25vcm1hbCc9PXRoaXMuX2F0dHJpYnV0ZVByaW9yaXR5LmdldChlKSlyZXR1cm4hMTtjb25zdCBpPXN1cGVyLmdldEF0dHJpYnV0ZShlKTtyZXR1cm4gaSE9PXQmJih0aGlzLl9hdHRycy5zZXQoZSx0KSx0aGlzLl9hdHRyaWJ1dGVQcmlvcml0eS5zZXQoZSxuKSwhMCl9X3JlbW92ZUF0dHJpYnV0ZShlLHQ9ITApe2NvbnN0IG89dD8nbm9ybWFsJzonbG93JztyZXR1cm4oJ2xvdychPW98fCdub3JtYWwnIT10aGlzLl9hdHRyaWJ1dGVQcmlvcml0eS5nZXQoZSkpJiYodGhpcy5fYXR0cmlidXRlUHJpb3JpdHkuc2V0KGUsbyksISFzdXBlci5oYXNBdHRyaWJ1dGUoZSkpJiYodGhpcy5fYXR0cnMuZGVsZXRlKGUpLCEwKX1fc2V0QXR0cmlidXRlc1RvKGUpe2NvbnN0IHQ9bmV3IFNldDtmb3IoY29uc3RbdCxvXW9mIHRoaXMuZ2V0QXR0cmlidXRlcygpKWUuZ2V0KHQpIT09byYmdGhpcy5fcmVtb3ZlQXR0cmlidXRlKHQsITEpO2Zvcihjb25zdFtvLG5db2YgZSl7Y29uc3QgZT10aGlzLl9zZXRBdHRyaWJ1dGUobyxuLCExKTtlJiZ0LmFkZChvKX1yZXR1cm4gdH0qX2dldFN0b3JlZEF0dHJpYnV0ZXMoKXtjb25zdCBlPXRoaXMuZ2V0Rmlyc3RQb3NpdGlvbigpLnBhcmVudDtpZih0aGlzLmlzQ29sbGFwc2VkJiZlLmlzRW1wdHkpZm9yKGNvbnN0IHQgb2YgZS5nZXRBdHRyaWJ1dGVLZXlzKCkpaWYodC5zdGFydHNXaXRoKFp1KSl7Y29uc3Qgbz10LnN1YnN0cihadS5sZW5ndGgpO3lpZWxkW28sZS5nZXRBdHRyaWJ1dGUodCldfX1fZ2V0U3Vycm91bmRpbmdBdHRyaWJ1dGVzKCl7Y29uc3QgZT10aGlzLmdldEZpcnN0UG9zaXRpb24oKSx0PXRoaXMuX21vZGVsLnNjaGVtYTtsZXQgbz1udWxsO2lmKCF0aGlzLmlzQ29sbGFwc2VkKXtjb25zdCBlPXRoaXMuZ2V0Rmlyc3RSYW5nZSgpO2Zvcihjb25zdCBuIG9mIGUpe2lmKG4uaXRlbS5pcygnZWxlbWVudCcpJiZ0LmlzT2JqZWN0KG4uaXRlbSkpYnJlYWs7J3RleHQnPT1uLnR5cGUmJm51bGw9PT1vJiYobz1uLml0ZW0uZ2V0QXR0cmlidXRlcygpKX19ZWxzZXtjb25zdCB0PWUudGV4dE5vZGU/ZS50ZXh0Tm9kZTplLm5vZGVCZWZvcmUsbj1lLnRleHROb2RlP2UudGV4dE5vZGU6ZS5ub2RlQWZ0ZXI7aWYodGhpcy5pc0dyYXZpdHlPdmVycmlkZGVufHwobz1ndCh0KSksb3x8KG89Z3QobikpLCF0aGlzLmlzR3Jhdml0eU92ZXJyaWRkZW4mJiFvKWZvcihsZXQgZT10O2UmJiFvOyllPWUucHJldmlvdXNTaWJsaW5nLG89Z3QoZSk7aWYoIW8pZm9yKGxldCBlPW47ZSYmIW87KWU9ZS5uZXh0U2libGluZyxvPWd0KGUpO298fChvPXRoaXMuX2dldFN0b3JlZEF0dHJpYnV0ZXMoKSl9cmV0dXJuIG99X2ZpeEdyYXZleWFyZFNlbGVjdGlvbihlLHQpe2NvbnN0IG89S3UuY3JlYXRlRnJvbVBvc2l0aW9uKHQpLG49dGhpcy5fbW9kZWwuc2NoZW1hLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShvKSxpPXRoaXMuX3Jhbmdlcy5pbmRleE9mKGUpO2lmKHRoaXMuX3Jhbmdlcy5zcGxpY2UoaSwxKSxlLmRldGFjaCgpLG4pe2NvbnN0IGU9dGhpcy5fcHJlcGFyZVJhbmdlKG4pO3RoaXMuX3Jhbmdlcy5zcGxpY2UoaSwwLGUpfX19dmFyIG9tPWZ1bmN0aW9uKGUpe3JldHVybiBQZChlLCEwLCEwKX07Y2xhc3Mgbm17Y29uc3RydWN0b3IoZSl7dGhpcy5tb2RlbD1lLHRoaXMudmlldz1uZXcgQnUsdGhpcy5tYXBwZXI9bmV3ICR1LHRoaXMuZG93bmNhc3REaXNwYXRjaGVyPW5ldyBRdSh7bWFwcGVyOnRoaXMubWFwcGVyfSk7Y29uc3QgdD10aGlzLm1vZGVsLmRvY3VtZW50LG89dC5zZWxlY3Rpb24sbj10aGlzLm1vZGVsLm1hcmtlcnM7dGhpcy5saXN0ZW5Ubyh0LCdjaGFuZ2UnLCgpPT57dGhpcy52aWV3LmNoYW5nZSgoZSk9Pnt0aGlzLmRvd25jYXN0RGlzcGF0Y2hlci5jb252ZXJ0Q2hhbmdlcyh0LmRpZmZlcixlKSx0aGlzLmRvd25jYXN0RGlzcGF0Y2hlci5jb252ZXJ0U2VsZWN0aW9uKG8sbixlKX0pfSx7cHJpb3JpdHk6J2xvdyd9KSx0aGlzLmxpc3RlblRvKHRoaXMudmlldy5kb2N1bWVudCwnc2VsZWN0aW9uQ2hhbmdlJyxFdCh0aGlzLm1vZGVsLHRoaXMubWFwcGVyKSksdGhpcy5kb3duY2FzdERpc3BhdGNoZXIub24oJ2luc2VydDokdGV4dCcsQ3QoKSx7cHJpb3JpdHk6J2xvd2VzdCd9KSx0aGlzLmRvd25jYXN0RGlzcGF0Y2hlci5vbigncmVtb3ZlJyxBdCgpLHtwcmlvcml0eTonbG93J30pLHRoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKCdzZWxlY3Rpb24nLFJ0KCkse3ByaW9yaXR5Oidsb3cnfSksdGhpcy5kb3duY2FzdERpc3BhdGNoZXIub24oJ3NlbGVjdGlvbicsU3QoKSx7cHJpb3JpdHk6J2xvdyd9KSx0aGlzLmRvd25jYXN0RGlzcGF0Y2hlci5vbignc2VsZWN0aW9uJyxPdCgpLHtwcmlvcml0eTonbG93J30pLHRoaXMudmlldy5kb2N1bWVudC5yb290cy5iaW5kVG8odGhpcy5tb2RlbC5kb2N1bWVudC5yb290cykudXNpbmcoKGUpPT57aWYoJyRncmF2ZXlhcmQnPT1lLnJvb3ROYW1lKXJldHVybiBudWxsO2NvbnN0IHQ9bmV3IHZjKGUubmFtZSk7cmV0dXJuIHQucm9vdE5hbWU9ZS5yb290TmFtZSx0Ll9kb2N1bWVudD10aGlzLnZpZXcuZG9jdW1lbnQsdGhpcy5tYXBwZXIuYmluZEVsZW1lbnRzKGUsdCksdH0pfWRlc3Ryb3koKXt0aGlzLnZpZXcuZGVzdHJveSgpLHRoaXMuc3RvcExpc3RlbmluZygpfX1mKG5tLGJjKTtjbGFzcyBpbXtjb25zdHJ1Y3RvcihlLHQ9W10pe3RoaXMuX2VkaXRvcj1lLHRoaXMuX2F2YWlsYWJsZVBsdWdpbnM9bmV3IE1hcCx0aGlzLl9wbHVnaW5zPW5ldyBNYXA7Zm9yKGNvbnN0IG8gb2YgdCl0aGlzLl9hdmFpbGFibGVQbHVnaW5zLnNldChvLG8pLG8ucGx1Z2luTmFtZSYmdGhpcy5fYXZhaWxhYmxlUGx1Z2lucy5zZXQoby5wbHVnaW5OYW1lLG8pfSpbU3ltYm9sLml0ZXJhdG9yXSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuX3BsdWdpbnMpJ2Z1bmN0aW9uJz09dHlwZW9mIGVbMF0mJih5aWVsZCBlKX1nZXQoZSl7cmV0dXJuIHRoaXMuX3BsdWdpbnMuZ2V0KGUpfWxvYWQoZSx0PVtdKXtmdW5jdGlvbiBvKGUpe3JldHVybiB1LmluY2x1ZGVzKGUpfHxhLmdldChlKXx8bC5oYXMoZSk/dm9pZCAwOm4oZSkuY2F0Y2goKHQpPT57dGhyb3cgUnUuZXJyb3IoJ3BsdWdpbmNvbGxlY3Rpb24tbG9hZDogSXQgd2FzIG5vdCBwb3NzaWJsZSB0byBsb2FkIHRoZSBwbHVnaW4uJyx7cGx1Z2luOmV9KSx0fSl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKG4pPT57bC5hZGQoZSksZS5yZXF1aXJlcyYmZS5yZXF1aXJlcy5mb3JFYWNoKChuKT0+e2NvbnN0IHI9aShuKTtpZih0LmluY2x1ZGVzKHIpKXRocm93IG5ldyBaYSgncGx1Z2luY29sbGVjdGlvbi1yZXF1aXJlZDogQ2Fubm90IGxvYWQgYSBwbHVnaW4gYmVjYXVzZSBvbmUgb2YgaXRzIGRlcGVuZGVuY2llcyBpcyBsaXN0ZWQgaW50aGUgYHJlbW92ZVBsdWdpbnNgIG9wdGlvbi4nLHtwbHVnaW46cixyZXF1aXJlZEJ5OmV9KTtvKHIpfSk7Y29uc3Qgcj1uZXcgZShzKTthLl9hZGQoZSxyKSxkLnB1c2gociksbigpfSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4nZnVuY3Rpb24nPT10eXBlb2YgZT9lOmEuX2F2YWlsYWJsZVBsdWdpbnMuZ2V0KGUpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUubWFwKChlKT0+aShlKSkuZmlsdGVyKChlKT0+ISFlKX1jb25zdCBhPXRoaXMscz10aGlzLl9lZGl0b3IsbD1uZXcgU2V0LGQ9W10sYz1yKGUpLHU9cih0KSxtPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IG8gb2YgZSlpKG8pfHx0LnB1c2gobyk7cmV0dXJuIHQubGVuZ3RoP3Q6bnVsbH0oZSk7aWYobSl7Y29uc3QgZT0ncGx1Z2luY29sbGVjdGlvbi1wbHVnaW4tbm90LWZvdW5kOiBTb21lIHBsdWdpbnMgYXJlIG5vdCBhdmFpbGFibGUgYW5kIGNvdWxkIG5vdCBiZSBsb2FkZWQuJztyZXR1cm4gUnUuZXJyb3IoZSx7cGx1Z2luczptfSksUHJvbWlzZS5yZWplY3QobmV3IFphKGUse3BsdWdpbnM6bX0pKX1yZXR1cm4gUHJvbWlzZS5hbGwoYy5tYXAobykpLnRoZW4oKCk9PmQpfWRlc3Ryb3koKXtjb25zdCBlPUFycmF5LmZyb20odGhpcykubWFwKChbLGVdKT0+ZSkuZmlsdGVyKChlKT0+J2Z1bmN0aW9uJz09dHlwZW9mIGUuZGVzdHJveSkubWFwKChlKT0+ZS5kZXN0cm95KCkpO3JldHVybiBQcm9taXNlLmFsbChlKX1fYWRkKGUsdCl7dGhpcy5fcGx1Z2lucy5zZXQoZSx0KTtjb25zdCBvPWUucGx1Z2luTmFtZTtvJiYodGhpcy5fcGx1Z2lucy5oYXMobyk/UnUud2FybigncGx1Z2luY29sbGVjdGlvbi1wbHVnaW4tbmFtZS1jb25mbGljdDogVHdvIHBsdWdpbnMgd2l0aCB0aGUgc2FtZSBuYW1lIHdlcmUgbG9hZGVkLicse3BsdWdpbk5hbWU6byxwbHVnaW4xOnRoaXMuX3BsdWdpbnMuZ2V0KG8pLmNvbnN0cnVjdG9yLHBsdWdpbjI6ZX0pOnRoaXMuX3BsdWdpbnMuc2V0KG8sdCkpfX1jbGFzcyBybXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2NvbW1hbmRzPW5ldyBNYXB9YWRkKGUsdCl7dGhpcy5fY29tbWFuZHMuc2V0KGUsdCl9Z2V0KGUpe3JldHVybiB0aGlzLl9jb21tYW5kcy5nZXQoZSl9ZXhlY3V0ZShlLC4uLnQpe2NvbnN0IG89dGhpcy5nZXQoZSk7aWYoIW8pdGhyb3cgbmV3IFphKCdjb21tYW5kY29sbGVjdGlvbi1jb21tYW5kLW5vdC1mb3VuZDogQ29tbWFuZCBkb2VzIG5vdCBleGlzdC4nLHtjb21tYW5kTmFtZTplfSk7by5leGVjdXRlKC4uLnQpfSpuYW1lcygpe3lpZWxkKnRoaXMuX2NvbW1hbmRzLmtleXMoKX0qY29tbWFuZHMoKXt5aWVsZCp0aGlzLl9jb21tYW5kcy52YWx1ZXMoKX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLl9jb21tYW5kc1tTeW1ib2wuaXRlcmF0b3JdKCl9ZGVzdHJveSgpe2Zvcihjb25zdCBlIG9mIHRoaXMuY29tbWFuZHMoKSllLmRlc3Ryb3koKX19d2luZG93LkNLRURJVE9SX1RSQU5TTEFUSU9OU3x8KHdpbmRvdy5DS0VESVRPUl9UUkFOU0xBVElPTlM9e30pO2NsYXNzIGFte2NvbnN0cnVjdG9yKGUpe3RoaXMubGFuZ3VhZ2U9ZXx8J2VuJyx0aGlzLnQ9KC4uLmUpPT50aGlzLl90KC4uLmUpfV90KGUsdCl7bGV0IG89SXQodGhpcy5sYW5ndWFnZSxlKTtyZXR1cm4gdCYmKG89by5yZXBsYWNlKC8lKFxcZCspL2csKGUsbyk9Pm88dC5sZW5ndGg/dFtvXTplKSksb319Y2xhc3Mgc217Y29uc3RydWN0b3IoKXt0aGlzLl9jb25zdW1hYmxlcz1uZXcgTWFwfWFkZChlLHQpe2xldCBvO3JldHVybiBlLmlzKCd0ZXh0Jyl8fGUuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKT92b2lkIHRoaXMuX2NvbnN1bWFibGVzLnNldChlLCEwKTp2b2lkKHRoaXMuX2NvbnN1bWFibGVzLmhhcyhlKT9vPXRoaXMuX2NvbnN1bWFibGVzLmdldChlKToobz1uZXcgbG0sdGhpcy5fY29uc3VtYWJsZXMuc2V0KGUsbykpLG8uYWRkKHQpKX10ZXN0KGUsdCl7Y29uc3Qgbz10aGlzLl9jb25zdW1hYmxlcy5nZXQoZSk7cmV0dXJuIHZvaWQgMD09PW8/bnVsbDplLmlzKCd0ZXh0Jyl8fGUuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKT9vOm8udGVzdCh0KX1jb25zdW1lKGUsdCl7cmV0dXJuISF0aGlzLnRlc3QoZSx0KSYmKGUuaXMoJ3RleHQnKXx8ZS5pcygnZG9jdW1lbnRGcmFnbWVudCcpP3RoaXMuX2NvbnN1bWFibGVzLnNldChlLCExKTp0aGlzLl9jb25zdW1hYmxlcy5nZXQoZSkuY29uc3VtZSh0KSwhMCl9cmV2ZXJ0KGUsdCl7Y29uc3Qgbz10aGlzLl9jb25zdW1hYmxlcy5nZXQoZSk7byE9PXZvaWQgMCYmKGUuaXMoJ3RleHQnKXx8ZS5pcygnZG9jdW1lbnRGcmFnbWVudCcpP3RoaXMuX2NvbnN1bWFibGVzLnNldChlLCEwKTpvLnJldmVydCh0KSl9c3RhdGljIGNvbnN1bWFibGVzRnJvbUVsZW1lbnQoZSl7Y29uc3QgdD17bmFtZTohMCxhdHRyaWJ1dGVzOltdLGNsYXNzZXM6W10sc3R5bGVzOltdfSxvPWUuZ2V0QXR0cmlidXRlS2V5cygpO2Zvcihjb25zdCBuIG9mIG8pJ3N0eWxlJyE9biYmJ2NsYXNzJyE9biYmdC5hdHRyaWJ1dGVzLnB1c2gobik7Y29uc3Qgbj1lLmdldENsYXNzTmFtZXMoKTtmb3IoY29uc3QgbyBvZiBuKXQuY2xhc3Nlcy5wdXNoKG8pO2NvbnN0IGk9ZS5nZXRTdHlsZU5hbWVzKCk7Zm9yKGNvbnN0IG8gb2YgaSl0LnN0eWxlcy5wdXNoKG8pO3JldHVybiB0fXN0YXRpYyBjcmVhdGVGcm9tKGUsdCl7aWYodHx8KHQ9bmV3IHNtKSxlLmlzKCd0ZXh0JykpcmV0dXJuIHQuYWRkKGUpLHQ7ZS5pcygnZWxlbWVudCcpJiZ0LmFkZChlLHNtLmNvbnN1bWFibGVzRnJvbUVsZW1lbnQoZSkpLGUuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKSYmdC5hZGQoZSk7Zm9yKGNvbnN0IG8gb2YgZS5nZXRDaGlsZHJlbigpKXQ9c20uY3JlYXRlRnJvbShvLHQpO3JldHVybiB0fX1jbGFzcyBsbXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2NhbkNvbnN1bWVOYW1lPW51bGwsdGhpcy5fY29uc3VtYWJsZXM9e2F0dHJpYnV0ZXM6bmV3IE1hcCxzdHlsZXM6bmV3IE1hcCxjbGFzc2VzOm5ldyBNYXB9fWFkZChlKXtmb3IoY29uc3QgdCBpbiBlLm5hbWUmJih0aGlzLl9jYW5Db25zdW1lTmFtZT0hMCksdGhpcy5fY29uc3VtYWJsZXMpdCBpbiBlJiZ0aGlzLl9hZGQodCxlW3RdKX10ZXN0KGUpe2lmKGUubmFtZSYmIXRoaXMuX2NhbkNvbnN1bWVOYW1lKXJldHVybiB0aGlzLl9jYW5Db25zdW1lTmFtZTtmb3IoY29uc3QgdCBpbiB0aGlzLl9jb25zdW1hYmxlcylpZih0IGluIGUpe2NvbnN0IG89dGhpcy5fdGVzdCh0LGVbdF0pO2lmKCEwIT09bylyZXR1cm4gb31yZXR1cm4hMH1jb25zdW1lKGUpe2Zvcihjb25zdCB0IGluIGUubmFtZSYmKHRoaXMuX2NhbkNvbnN1bWVOYW1lPSExKSx0aGlzLl9jb25zdW1hYmxlcyl0IGluIGUmJnRoaXMuX2NvbnN1bWUodCxlW3RdKX1yZXZlcnQoZSl7Zm9yKGNvbnN0IHQgaW4gZS5uYW1lJiYodGhpcy5fY2FuQ29uc3VtZU5hbWU9ITApLHRoaXMuX2NvbnN1bWFibGVzKXQgaW4gZSYmdGhpcy5fcmV2ZXJ0KHQsZVt0XSl9X2FkZChlLHQpe2NvbnN0IG89ZGwodCk/dDpbdF0sbj10aGlzLl9jb25zdW1hYmxlc1tlXTtmb3IoY29uc3QgaSBvZiBvKXtpZignYXR0cmlidXRlcyc9PT1lJiYoJ2NsYXNzJz09PWl8fCdzdHlsZSc9PT1pKSl0aHJvdyBuZXcgWmEoJ3ZpZXdjb25zdW1hYmxlLWludmFsaWQtYXR0cmlidXRlOiBDbGFzc2VzIGFuZCBzdHlsZXMgc2hvdWxkIGJlIGhhbmRsZWQgc2VwYXJhdGVseS4nKTtuLnNldChpLCEwKX19X3Rlc3QoZSx0KXtjb25zdCBvPWRsKHQpP3Q6W3RdLG49dGhpcy5fY29uc3VtYWJsZXNbZV07Zm9yKGNvbnN0IGkgb2YgbylpZignYXR0cmlidXRlcyc9PT1lJiYoJ2NsYXNzJz09PWl8fCdzdHlsZSc9PT1pKSl7Y29uc3QgZT0nY2xhc3MnPT1pPydjbGFzc2VzJzonc3R5bGVzJyx0PXRoaXMuX3Rlc3QoZSxbLi4udGhpcy5fY29uc3VtYWJsZXNbZV0ua2V5cygpXSk7aWYoITAhPT10KXJldHVybiB0fWVsc2V7Y29uc3QgZT1uLmdldChpKTtpZihlPT09dm9pZCAwKXJldHVybiBudWxsO2lmKCFlKXJldHVybiExfXJldHVybiEwfV9jb25zdW1lKGUsdCl7Y29uc3Qgbz1kbCh0KT90Olt0XSxuPXRoaXMuX2NvbnN1bWFibGVzW2VdO2Zvcihjb25zdCBpIG9mIG8paWYoJ2F0dHJpYnV0ZXMnPT09ZSYmKCdjbGFzcyc9PT1pfHwnc3R5bGUnPT09aSkpe2NvbnN0IGU9J2NsYXNzJz09aT8nY2xhc3Nlcyc6J3N0eWxlcyc7dGhpcy5fY29uc3VtZShlLFsuLi50aGlzLl9jb25zdW1hYmxlc1tlXS5rZXlzKCldKX1lbHNlIG4uc2V0KGksITEpfV9yZXZlcnQoZSx0KXtjb25zdCBvPWRsKHQpP3Q6W3RdLG49dGhpcy5fY29uc3VtYWJsZXNbZV07Zm9yKGNvbnN0IGkgb2YgbylpZignYXR0cmlidXRlcyc9PT1lJiYoJ2NsYXNzJz09PWl8fCdzdHlsZSc9PT1pKSl7Y29uc3QgZT0nY2xhc3MnPT1pPydjbGFzc2VzJzonc3R5bGVzJzt0aGlzLl9yZXZlcnQoZSxbLi4udGhpcy5fY29uc3VtYWJsZXNbZV0ua2V5cygpXSl9ZWxzZXtjb25zdCBlPW4uZ2V0KGkpOyExPT09ZSYmbi5zZXQoaSwhMCl9fX1jbGFzcyBkbXtjb25zdHJ1Y3Rvcigpe3RoaXMuX3NvdXJjZURlZmluaXRpb25zPXt9LHRoaXMuZGVjb3JhdGUoJ2NoZWNrQ2hpbGQnKSx0aGlzLmRlY29yYXRlKCdjaGVja0F0dHJpYnV0ZScpLHRoaXMub24oJ2NoZWNrQXR0cmlidXRlJywoZSx0KT0+e3RbMF09bmV3IGNtKHRbMF0pfSx7cHJpb3JpdHk6J2hpZ2hlc3QnfSksdGhpcy5vbignY2hlY2tDaGlsZCcsKGUsdCk9Pnt0WzBdPW5ldyBjbSh0WzBdKSx0WzFdPXRoaXMuZ2V0RGVmaW5pdGlvbih0WzFdKX0se3ByaW9yaXR5OidoaWdoZXN0J30pfXJlZ2lzdGVyKGUsdCl7aWYodGhpcy5fc291cmNlRGVmaW5pdGlvbnNbZV0pdGhyb3cgbmV3IFphKCdzY2hlbWEtY2Fubm90LXJlZ2lzdGVyLWl0ZW0tdHdpY2U6IEEgc2luZ2xlIGl0ZW0gY2Fubm90IGJlIHJlZ2lzdGVyZWQgdHdpY2UgaW4gdGhlIHNjaGVtYS4nLHtpdGVtTmFtZTplfSk7dGhpcy5fc291cmNlRGVmaW5pdGlvbnNbZV09W09iamVjdC5hc3NpZ24oe30sdCldLHRoaXMuX2NsZWFyQ2FjaGUoKX1leHRlbmQoZSx0KXtpZighdGhpcy5fc291cmNlRGVmaW5pdGlvbnNbZV0pdGhyb3cgbmV3IFphKCdzY2hlbWEtY2Fubm90LWV4dGVuZC1taXNzaW5nLWl0ZW06IENhbm5vdCBleHRlbmQgYW4gaXRlbSB3aGljaCB3YXMgbm90IHJlZ2lzdGVyZWQgeWV0Licse2l0ZW1OYW1lOmV9KTt0aGlzLl9zb3VyY2VEZWZpbml0aW9uc1tlXS5wdXNoKE9iamVjdC5hc3NpZ24oe30sdCkpLHRoaXMuX2NsZWFyQ2FjaGUoKX1nZXREZWZpbml0aW9ucygpe3JldHVybiB0aGlzLl9jb21waWxlZERlZmluaXRpb25zfHx0aGlzLl9jb21waWxlKCksdGhpcy5fY29tcGlsZWREZWZpbml0aW9uc31nZXREZWZpbml0aW9uKGUpe2xldCB0O3JldHVybiB0PSdzdHJpbmcnPT10eXBlb2YgZT9lOmUuaXMmJihlLmlzKCd0ZXh0Jyl8fGUuaXMoJ3RleHRQcm94eScpKT8nJHRleHQnOmUubmFtZSx0aGlzLmdldERlZmluaXRpb25zKClbdF19aXNSZWdpc3RlcmVkKGUpe3JldHVybiEhdGhpcy5nZXREZWZpbml0aW9uKGUpfWlzQmxvY2soZSl7Y29uc3QgdD10aGlzLmdldERlZmluaXRpb24oZSk7cmV0dXJuISEodCYmdC5pc0Jsb2NrKX1pc0xpbWl0KGUpe2NvbnN0IHQ9dGhpcy5nZXREZWZpbml0aW9uKGUpO3JldHVybiEhKHQmJnQuaXNMaW1pdCl9aXNPYmplY3QoZSl7Y29uc3QgdD10aGlzLmdldERlZmluaXRpb24oZSk7cmV0dXJuISEodCYmdC5pc09iamVjdCl9Y2hlY2tDaGlsZChlLHQpe3JldHVybiEhdCYmdGhpcy5fY2hlY2tDb250ZXh0TWF0Y2godCxlKX1jaGVja0F0dHJpYnV0ZShlLHQpe2NvbnN0IG89dGhpcy5nZXREZWZpbml0aW9uKGUubGFzdCk7cmV0dXJuISFvJiZvLmFsbG93QXR0cmlidXRlcy5pbmNsdWRlcyh0KX1jaGVja01lcmdlKGUsdD1udWxsKXtpZihlIGluc3RhbmNlb2YgS3Upe2NvbnN0IHQ9ZS5ub2RlQmVmb3JlLG89ZS5ub2RlQWZ0ZXI7aWYoISh0IGluc3RhbmNlb2YgV3UpKXRocm93IG5ldyBaYSgnc2NoZW1hLWNoZWNrLW1lcmdlLW5vLWVsZW1lbnQtYmVmb3JlOiBUaGUgbm9kZSBiZWZvcmUgdGhlIG1lcmdlIHBvc2l0aW9uIG11c3QgYmUgYW4gZWxlbWVudC4nKTtpZighKG8gaW5zdGFuY2VvZiBXdSkpdGhyb3cgbmV3IFphKCdzY2hlbWEtY2hlY2stbWVyZ2Utbm8tZWxlbWVudC1hZnRlcjogVGhlIG5vZGUgYWZ0ZXIgdGhlIG1lcmdlIHBvc2l0aW9uIG11c3QgYmUgYW4gZWxlbWVudC4nKTtyZXR1cm4gdGhpcy5jaGVja01lcmdlKHQsbyl9Zm9yKGNvbnN0IG8gb2YgdC5nZXRDaGlsZHJlbigpKWlmKCF0aGlzLmNoZWNrQ2hpbGQoZSxvKSlyZXR1cm4hMTtyZXR1cm4hMH1hZGRDaGlsZENoZWNrKGUpe3RoaXMub24oJ2NoZWNrQ2hpbGQnLCh0LFtvLG5dKT0+e2lmKG4pe2NvbnN0IGk9ZShvLG4pOydib29sZWFuJz09dHlwZW9mIGkmJih0LnN0b3AoKSx0LnJldHVybj1pKX19LHtwcmlvcml0eTonaGlnaCd9KX1hZGRBdHRyaWJ1dGVDaGVjayhlKXt0aGlzLm9uKCdjaGVja0F0dHJpYnV0ZScsKHQsW28sbl0pPT57Y29uc3QgaT1lKG8sbik7J2Jvb2xlYW4nPT10eXBlb2YgaSYmKHQuc3RvcCgpLHQucmV0dXJuPWkpfSx7cHJpb3JpdHk6J2hpZ2gnfSl9Z2V0TGltaXRFbGVtZW50KGUpe2xldCB0PUFycmF5LmZyb20oZS5nZXRSYW5nZXMoKSkucmVkdWNlKChlLHQpPT57Y29uc3Qgbz10LmdldENvbW1vbkFuY2VzdG9yKCk7cmV0dXJuIGU/ZS5nZXRDb21tb25BbmNlc3RvcihvLHtpbmNsdWRlU2VsZjohMH0pOm99LG51bGwpO2Zvcig7IXRoaXMuaXNMaW1pdCh0KSYmdC5wYXJlbnQ7KXQ9dC5wYXJlbnQ7cmV0dXJuIHR9Y2hlY2tBdHRyaWJ1dGVJblNlbGVjdGlvbihlLHQpe2lmKGUuaXNDb2xsYXBzZWQpcmV0dXJuIHRoaXMuY2hlY2tBdHRyaWJ1dGUoWy4uLmUuZ2V0Rmlyc3RQb3NpdGlvbigpLmdldEFuY2VzdG9ycygpLCckdGV4dCddLHQpO2Vsc2V7Y29uc3Qgbz1lLmdldFJhbmdlcygpO2Zvcihjb25zdCBlIG9mIG8pZm9yKGNvbnN0IG8gb2YgZSlpZih0aGlzLmNoZWNrQXR0cmlidXRlKG8uaXRlbSx0KSlyZXR1cm4hMH1yZXR1cm4hMX1nZXRWYWxpZFJhbmdlcyhlLHQpe2NvbnN0IG89W107Zm9yKGNvbnN0IG4gb2YgZSl7bGV0IGU9bi5zdGFydCxpPW4uc3RhcnQ7Y29uc3Qgcj1uLmVuZDtmb3IoY29uc3QgciBvZiBuLmdldFdhbGtlcigpKXRoaXMuY2hlY2tBdHRyaWJ1dGUoci5pdGVtLHQpfHwoIWkuaXNFcXVhbChlKSYmby5wdXNoKG5ldyBHdShpLGUpKSxpPXIubmV4dFBvc2l0aW9uKSxlPXIubmV4dFBvc2l0aW9uO2kmJiFpLmlzRXF1YWwocikmJm8ucHVzaChuZXcgR3UoaSxyKSl9cmV0dXJuIG99Z2V0TmVhcmVzdFNlbGVjdGlvblJhbmdlKGUsdD0nYm90aCcpe2lmKHRoaXMuY2hlY2tDaGlsZChlLCckdGV4dCcpKXJldHVybiBuZXcgR3UoZSk7bGV0IG8sbjsoJ2JvdGgnPT10fHwnYmFja3dhcmQnPT10KSYmKG89bmV3IFV1KHtzdGFydFBvc2l0aW9uOmUsZGlyZWN0aW9uOidiYWNrd2FyZCd9KSksKCdib3RoJz09dHx8J2ZvcndhcmQnPT10KSYmKG49bmV3IFV1KHtzdGFydFBvc2l0aW9uOmV9KSk7Zm9yKGNvbnN0IGkgb2YgJHQobyxuKSl7Y29uc3QgZT1pLndhbGtlcj09bz8nZWxlbWVudEVuZCc6J2VsZW1lbnRTdGFydCcsdD1pLnZhbHVlO2lmKHQudHlwZT09ZSYmdGhpcy5pc09iamVjdCh0Lml0ZW0pKXJldHVybiBHdS5jcmVhdGVPbih0Lml0ZW0pO2lmKHRoaXMuY2hlY2tDaGlsZCh0Lm5leHRQb3NpdGlvbiwnJHRleHQnKSlyZXR1cm4gbmV3IEd1KHQubmV4dFBvc2l0aW9uKX1yZXR1cm4gbnVsbH1maW5kQWxsb3dlZFBhcmVudChlLHQpe2ZvcihsZXQgbz10LnBhcmVudDtvOyl7aWYodGhpcy5jaGVja0NoaWxkKG8sZSkpcmV0dXJuIG87aWYodGhpcy5pc0xpbWl0KG8pfHx0aGlzLmlzT2JqZWN0KG8pKXJldHVybiBudWxsO289by5wYXJlbnR9cmV0dXJuIG51bGx9cmVtb3ZlRGlzYWxsb3dlZEF0dHJpYnV0ZXMoZSx0KXtmb3IoY29uc3QgbyBvZiBlKXtmb3IoY29uc3QgZSBvZiBvLmdldEF0dHJpYnV0ZUtleXMoKSl0aGlzLmNoZWNrQXR0cmlidXRlKG8sZSl8fHQucmVtb3ZlQXR0cmlidXRlKGUsbyk7by5pcygnZWxlbWVudCcpJiZ0aGlzLnJlbW92ZURpc2FsbG93ZWRBdHRyaWJ1dGVzKG8uZ2V0Q2hpbGRyZW4oKSx0KX19X2NsZWFyQ2FjaGUoKXt0aGlzLl9jb21waWxlZERlZmluaXRpb25zPW51bGx9X2NvbXBpbGUoKXtjb25zdCBlPXt9LHQ9dGhpcy5fc291cmNlRGVmaW5pdGlvbnMsbz1PYmplY3Qua2V5cyh0KTtmb3IoY29uc3QgbiBvZiBvKWVbbl09TnQodFtuXSxuKTtmb3IoY29uc3QgdCBvZiBvKU10KGUsdCk7Zm9yKGNvbnN0IHQgb2YgbylEdChlLHQpO2Zvcihjb25zdCB0IG9mIG8pQnQoZSx0KSxMdChlLHQpO2Zvcihjb25zdCB0IG9mIG8penQoZSx0KSxqdChlLHQpO3RoaXMuX2NvbXBpbGVkRGVmaW5pdGlvbnM9ZX1fY2hlY2tDb250ZXh0TWF0Y2goZSx0LG89dC5sZW5ndGgtMSl7Y29uc3Qgbj10LmdldEl0ZW0obyk7aWYoIWUuYWxsb3dJbi5pbmNsdWRlcyhuLm5hbWUpKXJldHVybiExO2Vsc2UgaWYoMD09bylyZXR1cm4hMDtlbHNle2NvbnN0IGU9dGhpcy5nZXREZWZpbml0aW9uKG4pO3JldHVybiB0aGlzLl9jaGVja0NvbnRleHRNYXRjaChlLHQsby0xKX19fWYoZG0sYmMpO2NsYXNzIGNte2NvbnN0cnVjdG9yKGUpe3JldHVybiBlIGluc3RhbmNlb2YgY20/ZTp2b2lkKCdzdHJpbmcnPT10eXBlb2YgZT9lPVtlXTohQXJyYXkuaXNBcnJheShlKSYmKGU9ZS5nZXRBbmNlc3RvcnMoe2luY2x1ZGVTZWxmOiEwfSkpLGVbMF0mJidzdHJpbmcnIT10eXBlb2YgZVswXSYmZVswXS5pcygnZG9jdW1lbnRGcmFnbWVudCcpJiZlLnNoaWZ0KCksdGhpcy5faXRlbXM9ZS5tYXAoR3QpKX1nZXQgbGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aH1nZXQgbGFzdCgpe3JldHVybiB0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGgtMV19W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5faXRlbXNbU3ltYm9sLml0ZXJhdG9yXSgpfXB1c2goZSl7Y29uc3QgdD1uZXcgY20oW2VdKTtyZXR1cm4gdC5faXRlbXM9Wy4uLnRoaXMuX2l0ZW1zLC4uLnQuX2l0ZW1zXSx0fWdldEl0ZW0oZSl7cmV0dXJuIHRoaXMuX2l0ZW1zW2VdfSpnZXROYW1lcygpe3lpZWxkKnRoaXMuX2l0ZW1zLm1hcCgoZSk9PmUubmFtZSl9ZW5kc1dpdGgoZSl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5nZXROYW1lcygpKS5qb2luKCcgJykuZW5kc1dpdGgoZSl9fWNsYXNzIHVte2NvbnN0cnVjdG9yKGU9e30pe3RoaXMuX3JlbW92ZUlmRW1wdHk9bmV3IFNldCx0aGlzLl9tb2RlbEN1cnNvcj1udWxsLHRoaXMuY29udmVyc2lvbkFwaT1PYmplY3QuYXNzaWduKHt9LGUpLHRoaXMuY29udmVyc2lvbkFwaS5jb252ZXJ0SXRlbT10aGlzLl9jb252ZXJ0SXRlbS5iaW5kKHRoaXMpLHRoaXMuY29udmVyc2lvbkFwaS5jb252ZXJ0Q2hpbGRyZW49dGhpcy5fY29udmVydENoaWxkcmVuLmJpbmQodGhpcyksdGhpcy5jb252ZXJzaW9uQXBpLnNwbGl0VG9BbGxvd2VkUGFyZW50PXRoaXMuX3NwbGl0VG9BbGxvd2VkUGFyZW50LmJpbmQodGhpcyl9Y29udmVydChlLHQsbz1bJyRyb290J10pe3RoaXMuZmlyZSgndmlld0NsZWFudXAnLGUpLHRoaXMuX21vZGVsQ3Vyc29yPVF0KG8sdCksdGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcj10LHRoaXMuY29udmVyc2lvbkFwaS5jb25zdW1hYmxlPXNtLmNyZWF0ZUZyb20oZSksdGhpcy5jb252ZXJzaW9uQXBpLnN0b3JlPXt9O2NvbnN0e21vZGVsUmFuZ2U6bn09dGhpcy5fY29udmVydEl0ZW0oZSx0aGlzLl9tb2RlbEN1cnNvciksaT10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihuKXt0aGlzLl9yZW1vdmVFbXB0eUVsZW1lbnRzKCk7Zm9yKGNvbnN0IGUgb2YgQXJyYXkuZnJvbSh0aGlzLl9tb2RlbEN1cnNvci5wYXJlbnQuZ2V0Q2hpbGRyZW4oKSkpdC5hcHBlbmQoZSxpKTtpLm1hcmtlcnM9SnQoaSx0KX1yZXR1cm4gdGhpcy5fbW9kZWxDdXJzb3I9bnVsbCx0aGlzLl9yZW1vdmVJZkVtcHR5LmNsZWFyKCksdGhpcy5jb252ZXJzaW9uQXBpLndyaXRlcj1udWxsLHRoaXMuY29udmVyc2lvbkFwaS5zdG9yZT1udWxsLGl9X2NvbnZlcnRJdGVtKGUsdCl7Y29uc3Qgbz1PYmplY3QuYXNzaWduKHt2aWV3SXRlbTplLG1vZGVsQ3Vyc29yOnQsbW9kZWxSYW5nZTpudWxsfSk7aWYoZS5pcygnZWxlbWVudCcpP3RoaXMuZmlyZSgnZWxlbWVudDonK2UubmFtZSxvLHRoaXMuY29udmVyc2lvbkFwaSk6ZS5pcygndGV4dCcpP3RoaXMuZmlyZSgndGV4dCcsbyx0aGlzLmNvbnZlcnNpb25BcGkpOnRoaXMuZmlyZSgnZG9jdW1lbnRGcmFnbWVudCcsbyx0aGlzLmNvbnZlcnNpb25BcGkpLG8ubW9kZWxSYW5nZSYmIShvLm1vZGVsUmFuZ2UgaW5zdGFuY2VvZiBHdSkpdGhyb3cgbmV3IFphKCd2aWV3LWNvbnZlcnNpb24tZGlzcGF0Y2hlci1pbmNvcnJlY3QtcmVzdWx0OiBJbmNvcnJlY3QgY29udmVyc2lvbiByZXN1bHQgd2FzIGRyb3BwZWQuJyk7cmV0dXJue21vZGVsUmFuZ2U6by5tb2RlbFJhbmdlLG1vZGVsQ3Vyc29yOm8ubW9kZWxDdXJzb3J9fV9jb252ZXJ0Q2hpbGRyZW4oZSx0KXtjb25zdCBvPW5ldyBHdSh0KTtsZXQgbj10O2Zvcihjb25zdCBpIG9mIEFycmF5LmZyb20oZS5nZXRDaGlsZHJlbigpKSl7Y29uc3QgZT10aGlzLl9jb252ZXJ0SXRlbShpLG4pO2UubW9kZWxSYW5nZSBpbnN0YW5jZW9mIEd1JiYoby5lbmQ9ZS5tb2RlbFJhbmdlLmVuZCxuPWUubW9kZWxDdXJzb3IpfXJldHVybnttb2RlbFJhbmdlOm8sbW9kZWxDdXJzb3I6bn19X3NwbGl0VG9BbGxvd2VkUGFyZW50KGUsdCl7Y29uc3Qgbz10aGlzLmNvbnZlcnNpb25BcGkuc2NoZW1hLmZpbmRBbGxvd2VkUGFyZW50KGUsdCk7aWYoIW8pcmV0dXJuIG51bGw7aWYobz09PXQucGFyZW50KXJldHVybntwb3NpdGlvbjp0fTtpZih0aGlzLl9tb2RlbEN1cnNvci5wYXJlbnQuZ2V0QW5jZXN0b3JzKCkuaW5jbHVkZXMobykpcmV0dXJuIG51bGw7Y29uc3Qgbj10aGlzLmNvbnZlcnNpb25BcGkud3JpdGVyLnNwbGl0KHQsbyk7Zm9yKGNvbnN0IG8gb2Ygbi5yYW5nZS5nZXRQb3NpdGlvbnMoKSlvLmlzRXF1YWwobi5wb3NpdGlvbil8fHRoaXMuX3JlbW92ZUlmRW1wdHkuYWRkKG8ucGFyZW50KTtyZXR1cm57cG9zaXRpb246bi5wb3NpdGlvbixjdXJzb3JQYXJlbnQ6bi5yYW5nZS5lbmQucGFyZW50fX1fcmVtb3ZlRW1wdHlFbGVtZW50cygpe2xldCBlPSExO2Zvcihjb25zdCB0IG9mIHRoaXMuX3JlbW92ZUlmRW1wdHkpdC5pc0VtcHR5JiYodGhpcy5jb252ZXJzaW9uQXBpLndyaXRlci5yZW1vdmUodCksdGhpcy5fcmVtb3ZlSWZFbXB0eS5kZWxldGUodCksZT0hMCk7ZSYmdGhpcy5fcmVtb3ZlRW1wdHlFbGVtZW50cygpfX1mKHVtLHNzKTtjbGFzcyBtbXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMubW9kZWw9ZSx0aGlzLnByb2Nlc3Nvcj10LHRoaXMubWFwcGVyPW5ldyAkdSx0aGlzLmRvd25jYXN0RGlzcGF0Y2hlcj1uZXcgUXUoe21hcHBlcjp0aGlzLm1hcHBlcn0pLHRoaXMuZG93bmNhc3REaXNwYXRjaGVyLm9uKCdpbnNlcnQ6JHRleHQnLEN0KCkse3ByaW9yaXR5Oidsb3dlc3QnfSksdGhpcy51cGNhc3REaXNwYXRjaGVyPW5ldyB1bSh7c2NoZW1hOmUuc2NoZW1hfSksdGhpcy51cGNhc3REaXNwYXRjaGVyLm9uKCd0ZXh0JyxjbygpLHtwcmlvcml0eTonbG93ZXN0J30pLHRoaXMudXBjYXN0RGlzcGF0Y2hlci5vbignZWxlbWVudCcsbG8oKSx7cHJpb3JpdHk6J2xvd2VzdCd9KSx0aGlzLnVwY2FzdERpc3BhdGNoZXIub24oJ2RvY3VtZW50RnJhZ21lbnQnLGxvKCkse3ByaW9yaXR5Oidsb3dlc3QnfSksdGhpcy5kZWNvcmF0ZSgnaW5pdCcpfWdldChlPSdtYWluJyl7cmV0dXJuIHRoaXMuc3RyaW5naWZ5KHRoaXMubW9kZWwuZG9jdW1lbnQuZ2V0Um9vdChlKSl9c3RyaW5naWZ5KGUpe2NvbnN0IHQ9dGhpcy50b1ZpZXcoZSk7cmV0dXJuIHRoaXMucHJvY2Vzc29yLnRvRGF0YSh0KX10b1ZpZXcoZSl7Y29uc3QgdD1HdS5jcmVhdGVJbihlKSxvPW5ldyBMYyxuPW5ldyB6YyhuZXcgRWMoKSk7aWYodGhpcy5tYXBwZXIuYmluZEVsZW1lbnRzKGUsbyksdGhpcy5kb3duY2FzdERpc3BhdGNoZXIuY29udmVydEluc2VydCh0LG4pLCFlLmlzKCdkb2N1bWVudEZyYWdtZW50Jykpe2NvbnN0IHQ9dW8oZSk7Zm9yKGNvbnN0W2Usb11vZiB0KXRoaXMuZG93bmNhc3REaXNwYXRjaGVyLmNvbnZlcnRNYXJrZXJBZGQoZSxvLG4pfXJldHVybiB0aGlzLm1hcHBlci5jbGVhckJpbmRpbmdzKCksb31pbml0KGUsdD0nbWFpbicpe2lmKHRoaXMubW9kZWwuZG9jdW1lbnQudmVyc2lvbil0aHJvdyBuZXcgWmEoJ2RhdGFjb250cm9sbGVyLWluaXQtZG9jdW1lbnQtbm90LWVtcHR5OiBUcnlpbmcgdG8gc2V0IGluaXRpYWwgZGF0YSB0byBub3QgZW1wdHkgZG9jdW1lbnQuJyk7Y29uc3Qgbz10aGlzLm1vZGVsLmRvY3VtZW50LmdldFJvb3QodCk7cmV0dXJuIHRoaXMubW9kZWwuZW5xdWV1ZUNoYW5nZSgndHJhbnNwYXJlbnQnLCh0KT0+e3QuaW5zZXJ0KHRoaXMucGFyc2UoZSxvKSxvKX0pLFByb21pc2UucmVzb2x2ZSgpfXNldChlLHQ9J21haW4nKXtjb25zdCBvPXRoaXMubW9kZWwuZG9jdW1lbnQuZ2V0Um9vdCh0KTt0aGlzLm1vZGVsLmVucXVldWVDaGFuZ2UoJ3RyYW5zcGFyZW50JywodCk9Pnt0LnNldFNlbGVjdGlvbihudWxsKSx0LnJlbW92ZVNlbGVjdGlvbkF0dHJpYnV0ZSh0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRBdHRyaWJ1dGVLZXlzKCkpLHQucmVtb3ZlKEd1LmNyZWF0ZUluKG8pKSx0Lmluc2VydCh0aGlzLnBhcnNlKGUsbyksbyl9KX1wYXJzZShlLHQ9JyRyb290Jyl7Y29uc3Qgbz10aGlzLnByb2Nlc3Nvci50b1ZpZXcoZSk7cmV0dXJuIHRoaXMudG9Nb2RlbChvLHQpfXRvTW9kZWwoZSx0PSckcm9vdCcpe3JldHVybiB0aGlzLm1vZGVsLmNoYW5nZSgobyk9PnRoaXMudXBjYXN0RGlzcGF0Y2hlci5jb252ZXJ0KGUsbyx0KSl9ZGVzdHJveSgpe319ZihtbSxiYyk7Y2xhc3MgcG17Y29uc3RydWN0b3IoKXt0aGlzLl9kaXNwYXRjaGVyc0dyb3Vwcz1uZXcgTWFwfXJlZ2lzdGVyKGUsdCl7aWYodGhpcy5fZGlzcGF0Y2hlcnNHcm91cHMuaGFzKGUpKXRocm93IG5ldyBaYSgnY29udmVyc2lvbi1yZWdpc3Rlci1ncm91cC1leGlzdHM6IFRyeWluZyB0byByZWdpc3RlciBhIGdyb3VwIG5hbWUgdGhhdCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkLicpO3RoaXMuX2Rpc3BhdGNoZXJzR3JvdXBzLnNldChlLHQpfWZvcihlKXtjb25zdCB0PXRoaXMuX2dldERpc3BhdGNoZXJzKGUpO3JldHVybnthZGQoZSl7cmV0dXJuIG1vKHQsZSksdGhpc319fWVsZW1lbnRUb0VsZW1lbnQoZSl7dGhpcy5mb3IoJ2Rvd25jYXN0JykuYWRkKGh0KGUpKTtmb3IoY29uc3R7bW9kZWw6dCx2aWV3Om99b2YgcG8oZSkpdGhpcy5mb3IoJ3VwY2FzdCcpLmFkZChZdCh7bW9kZWw6dCx2aWV3Om8scHJpb3JpdHk6ZS5wcmlvcml0eX0pKX1hdHRyaWJ1dGVUb0VsZW1lbnQoZSl7dGhpcy5mb3IoJ2Rvd25jYXN0JykuYWRkKGJ0KGUpKTtmb3IoY29uc3R7bW9kZWw6dCx2aWV3Om99b2YgcG8oZSkpdGhpcy5mb3IoJ3VwY2FzdCcpLmFkZChYdCh7dmlldzpvLG1vZGVsOnQscHJpb3JpdHk6ZS5wcmlvcml0eX0pKX1hdHRyaWJ1dGVUb0F0dHJpYnV0ZShlKXt0aGlzLmZvcignZG93bmNhc3QnKS5hZGQoa3QoZSkpO2Zvcihjb25zdHttb2RlbDp0LHZpZXc6b31vZiBwbyhlKSl0aGlzLmZvcigndXBjYXN0JykuYWRkKFp0KHt2aWV3Om8sbW9kZWw6dH0pKX1fZ2V0RGlzcGF0Y2hlcnMoZSl7Y29uc3QgdD10aGlzLl9kaXNwYXRjaGVyc0dyb3Vwcy5nZXQoZSk7aWYoIXQpdGhyb3cgbmV3IFphKCdjb252ZXJzaW9uLWZvci11bmtub3duLWdyb3VwOiBUcnlpbmcgdG8gYWRkIGEgY29udmVydGVyIHRvIGFuIHVua25vd24gZGlzcGF0Y2hlcnMgZ3JvdXAuJyk7cmV0dXJuIHR9fWNsYXNzIGdte2NvbnN0cnVjdG9yKGUpe3RoaXMuYmFzZVZlcnNpb249ZSx0aGlzLmlzRG9jdW1lbnRPcGVyYXRpb249bnVsbCE9PXRoaXMuYmFzZVZlcnNpb259X3ZhbGlkYXRlKCl7fXRvSlNPTigpe2NvbnN0IGU9RWQodGhpcywhMCk7cmV0dXJuIGUuX19jbGFzc05hbWU9dGhpcy5jb25zdHJ1Y3Rvci5jbGFzc05hbWUsZGVsZXRlIGUuZGVsdGEsZGVsZXRlIGUuaXNEb2N1bWVudE9wZXJhdGlvbixlfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uT3BlcmF0aW9uJ31zdGF0aWMgZnJvbUpTT04oZSl7cmV0dXJuIG5ldyB0aGlzKGUuYmFzZVZlcnNpb24pfX1jbGFzcyBmbXtjb25zdHJ1Y3RvcihlKXt0aGlzLm1hcmtlcnM9bmV3IE1hcCx0aGlzLl9jaGlsZHJlbj1uZXcgcXUsZSYmdGhpcy5faW5zZXJ0Q2hpbGQoMCxlKX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiB0aGlzLmdldENoaWxkcmVuKCl9Z2V0IGNoaWxkQ291bnQoKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4ubGVuZ3RofWdldCBtYXhPZmZzZXQoKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4ubWF4T2Zmc2V0fWdldCBpc0VtcHR5KCl7cmV0dXJuIDA9PT10aGlzLmNoaWxkQ291bnR9Z2V0IHJvb3QoKXtyZXR1cm4gdGhpc31nZXQgcGFyZW50KCl7cmV0dXJuIG51bGx9aXMoZSl7cmV0dXJuJ2RvY3VtZW50RnJhZ21lbnQnPT1lfWdldENoaWxkKGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5nZXROb2RlKGUpfWdldENoaWxkcmVuKCl7cmV0dXJuIHRoaXMuX2NoaWxkcmVuW1N5bWJvbC5pdGVyYXRvcl0oKX1nZXRDaGlsZEluZGV4KGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5nZXROb2RlSW5kZXgoZSl9Z2V0Q2hpbGRTdGFydE9mZnNldChlKXtyZXR1cm4gdGhpcy5fY2hpbGRyZW4uZ2V0Tm9kZVN0YXJ0T2Zmc2V0KGUpfWdldFBhdGgoKXtyZXR1cm5bXX1nZXROb2RlQnlQYXRoKGUpe2xldCB0PXRoaXM7Zm9yKGNvbnN0IG8gb2YgZSl0PXQuZ2V0Q2hpbGQodC5vZmZzZXRUb0luZGV4KG8pKTtyZXR1cm4gdH1vZmZzZXRUb0luZGV4KGUpe3JldHVybiB0aGlzLl9jaGlsZHJlbi5vZmZzZXRUb0luZGV4KGUpfXRvSlNPTigpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgb2YgdGhpcy5fY2hpbGRyZW4pZS5wdXNoKHQudG9KU09OKCkpO3JldHVybiBlfXN0YXRpYyBmcm9tSlNPTihlKXtjb25zdCB0PVtdO2Zvcihjb25zdCBvIG9mIGUpby5uYW1lP3QucHVzaChXdS5mcm9tSlNPTihvKSk6dC5wdXNoKHp1LmZyb21KU09OKG8pKTtyZXR1cm4gbmV3IGZtKHQpfV9hcHBlbmRDaGlsZChlKXt0aGlzLl9pbnNlcnRDaGlsZCh0aGlzLmNoaWxkQ291bnQsZSl9X2luc2VydENoaWxkKGUsdCl7Y29uc3Qgbz1mbyh0KTtmb3IoY29uc3QgbiBvZiBvKW51bGwhPT1uLnBhcmVudCYmbi5fcmVtb3ZlKCksbi5wYXJlbnQ9dGhpczt0aGlzLl9jaGlsZHJlbi5faW5zZXJ0Tm9kZXMoZSxvKX1fcmVtb3ZlQ2hpbGRyZW4oZSx0PTEpe2NvbnN0IG89dGhpcy5fY2hpbGRyZW4uX3JlbW92ZU5vZGVzKGUsdCk7Zm9yKGNvbnN0IG4gb2YgbyluLnBhcmVudD1udWxsO3JldHVybiBvfX12YXIgaG09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYnUoZSx0KX07Y2xhc3MgYm0gZXh0ZW5kcyBnbXtjb25zdHJ1Y3RvcihlLHQsbyxuLGkpe3N1cGVyKGkpLHRoaXMucmFuZ2U9R3UuY3JlYXRlRnJvbVJhbmdlKGUpLHRoaXMua2V5PXQsdGhpcy5vbGRWYWx1ZT1vPT09dm9pZCAwP251bGw6byx0aGlzLm5ld1ZhbHVlPW49PT12b2lkIDA/bnVsbDpufWdldCB0eXBlKCl7cmV0dXJuIG51bGw9PT10aGlzLm9sZFZhbHVlPydhZGRBdHRyaWJ1dGUnOm51bGw9PT10aGlzLm5ld1ZhbHVlPydyZW1vdmVBdHRyaWJ1dGUnOidjaGFuZ2VBdHRyaWJ1dGUnfWNsb25lKCl7cmV0dXJuIG5ldyBibSh0aGlzLnJhbmdlLHRoaXMua2V5LHRoaXMub2xkVmFsdWUsdGhpcy5uZXdWYWx1ZSx0aGlzLmJhc2VWZXJzaW9uKX1nZXRSZXZlcnNlZCgpe3JldHVybiBuZXcgYm0odGhpcy5yYW5nZSx0aGlzLmtleSx0aGlzLm5ld1ZhbHVlLHRoaXMub2xkVmFsdWUsdGhpcy5iYXNlVmVyc2lvbisxKX1fdmFsaWRhdGUoKXtmb3IoY29uc3QgZSBvZiB0aGlzLnJhbmdlLmdldEl0ZW1zKCkpe2lmKG51bGwhPT10aGlzLm9sZFZhbHVlJiYhaG0oZS5nZXRBdHRyaWJ1dGUodGhpcy5rZXkpLHRoaXMub2xkVmFsdWUpKXRocm93IG5ldyBaYSgnYXR0cmlidXRlLW9wZXJhdGlvbi13cm9uZy1vbGQtdmFsdWU6IENoYW5nZWQgbm9kZSBoYXMgZGlmZmVyZW50IGF0dHJpYnV0ZSB2YWx1ZSB0aGFuIG9wZXJhdGlvblxcJ3Mgb2xkIGF0dHJpYnV0ZSB2YWx1ZS4nLHtpdGVtOmUsa2V5OnRoaXMua2V5LHZhbHVlOnRoaXMub2xkVmFsdWV9KTtpZihudWxsPT09dGhpcy5vbGRWYWx1ZSYmbnVsbCE9PXRoaXMubmV3VmFsdWUmJmUuaGFzQXR0cmlidXRlKHRoaXMua2V5KSl0aHJvdyBuZXcgWmEoJ2F0dHJpYnV0ZS1vcGVyYXRpb24tYXR0cmlidXRlLWV4aXN0czogVGhlIGF0dHJpYnV0ZSB3aXRoIGdpdmVuIGtleSBhbHJlYWR5IGV4aXN0cy4nLHtub2RlOmUsa2V5OnRoaXMua2V5fSl9fV9leGVjdXRlKCl7aG0odGhpcy5vbGRWYWx1ZSx0aGlzLm5ld1ZhbHVlKXx8X28odGhpcy5yYW5nZSx0aGlzLmtleSx0aGlzLm5ld1ZhbHVlKX1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwub3BlcmF0aW9uLkF0dHJpYnV0ZU9wZXJhdGlvbid9c3RhdGljIGZyb21KU09OKGUsdCl7cmV0dXJuIG5ldyBibShHdS5mcm9tSlNPTihlLnJhbmdlLHQpLGUua2V5LGUub2xkVmFsdWUsZS5uZXdWYWx1ZSxlLmJhc2VWZXJzaW9uKX19Y2xhc3Mga20gZXh0ZW5kcyBnbXtjb25zdHJ1Y3RvcihlLHQsbyxuKXtzdXBlcihuKSx0aGlzLnNvdXJjZVBvc2l0aW9uPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbihlKSx0aGlzLmhvd01hbnk9dCx0aGlzLnRhcmdldFBvc2l0aW9uPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbihvKSx0aGlzLmlzU3RpY2t5PSExfWdldCB0eXBlKCl7cmV0dXJuJ21vdmUnfWNsb25lKCl7Y29uc3QgZT1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLnNvdXJjZVBvc2l0aW9uLHRoaXMuaG93TWFueSx0aGlzLnRhcmdldFBvc2l0aW9uLHRoaXMuYmFzZVZlcnNpb24pO3JldHVybiBlLmlzU3RpY2t5PXRoaXMuaXNTdGlja3ksZX1nZXRNb3ZlZFJhbmdlU3RhcnQoKXtyZXR1cm4gdGhpcy50YXJnZXRQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeURlbGV0aW9uKHRoaXMuc291cmNlUG9zaXRpb24sdGhpcy5ob3dNYW55KX1nZXRSZXZlcnNlZCgpe2NvbnN0IGU9dGhpcy5zb3VyY2VQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0aGlzLnRhcmdldFBvc2l0aW9uLHRoaXMuaG93TWFueSksdD1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmdldE1vdmVkUmFuZ2VTdGFydCgpLHRoaXMuaG93TWFueSxlLHRoaXMuYmFzZVZlcnNpb24rMSk7cmV0dXJuIHQuaXNTdGlja3k9dGhpcy5pc1N0aWNreSx0fV92YWxpZGF0ZSgpe2NvbnN0IGU9dGhpcy5zb3VyY2VQb3NpdGlvbi5wYXJlbnQsdD10aGlzLnRhcmdldFBvc2l0aW9uLnBhcmVudCxvPXRoaXMuc291cmNlUG9zaXRpb24ub2Zmc2V0LG49dGhpcy50YXJnZXRQb3NpdGlvbi5vZmZzZXQ7aWYoIWV8fCF0KXRocm93IG5ldyBaYSgnbW92ZS1vcGVyYXRpb24tcG9zaXRpb24taW52YWxpZDogU291cmNlIHBvc2l0aW9uIG9yIHRhcmdldCBwb3NpdGlvbiBpcyBpbnZhbGlkLicpO2Vsc2UgaWYobyt0aGlzLmhvd01hbnk+ZS5tYXhPZmZzZXQpdGhyb3cgbmV3IFphKCdtb3ZlLW9wZXJhdGlvbi1ub2Rlcy1kby1ub3QtZXhpc3Q6IFRoZSBub2RlcyB3aGljaCBzaG91bGQgYmUgbW92ZWQgZG8gbm90IGV4aXN0LicpO2Vsc2UgaWYoZT09PXQmJm88biYmbjxvK3RoaXMuaG93TWFueSl0aHJvdyBuZXcgWmEoJ21vdmUtb3BlcmF0aW9uLXJhbmdlLWludG8taXRzZWxmOiBUcnlpbmcgdG8gbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHRvIHRoZSBpbnNpZGUgb2YgdGhhdCByYW5nZS4nKTtlbHNlIGlmKHRoaXMuc291cmNlUG9zaXRpb24ucm9vdD09dGhpcy50YXJnZXRQb3NpdGlvbi5yb290JiYncHJlZml4Jz09QSh0aGlzLnNvdXJjZVBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSx0aGlzLnRhcmdldFBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSkpe2NvbnN0IGU9dGhpcy5zb3VyY2VQb3NpdGlvbi5wYXRoLmxlbmd0aC0xO2lmKHRoaXMudGFyZ2V0UG9zaXRpb24ucGF0aFtlXT49byYmdGhpcy50YXJnZXRQb3NpdGlvbi5wYXRoW2VdPG8rdGhpcy5ob3dNYW55KXRocm93IG5ldyBaYSgnbW92ZS1vcGVyYXRpb24tbm9kZS1pbnRvLWl0c2VsZjogVHJ5aW5nIHRvIG1vdmUgYSByYW5nZSBvZiBub2RlcyBpbnRvIG9uZSBvZiBub2RlcyBmcm9tIHRoYXQgcmFuZ2UuJyl9fV9leGVjdXRlKCl7a28oR3UuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodGhpcy5zb3VyY2VQb3NpdGlvbix0aGlzLmhvd01hbnkpLHRoaXMudGFyZ2V0UG9zaXRpb24pfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uTW92ZU9wZXJhdGlvbid9c3RhdGljIGZyb21KU09OKGUsdCl7Y29uc3Qgbz1LdS5mcm9tSlNPTihlLnNvdXJjZVBvc2l0aW9uLHQpLG49S3UuZnJvbUpTT04oZS50YXJnZXRQb3NpdGlvbix0KSxpPW5ldyB0aGlzKG8sZS5ob3dNYW55LG4sZS5iYXNlVmVyc2lvbik7cmV0dXJuIGUuaXNTdGlja3kmJihpLmlzU3RpY2t5PSEwKSxpfX1jbGFzcyBfbSBleHRlbmRzIGtte2dldCBwb3NpdGlvbigpe3JldHVybiB0aGlzLnRhcmdldFBvc2l0aW9ufXNldCBwb3NpdGlvbihlKXt0aGlzLnRhcmdldFBvc2l0aW9uPWV9Z2V0IHR5cGUoKXtyZXR1cm4ncmVpbnNlcnQnfWdldFJldmVyc2VkKCl7Y29uc3QgZT10aGlzLnNvdXJjZVBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHRoaXMudGFyZ2V0UG9zaXRpb24sdGhpcy5ob3dNYW55KTtyZXR1cm4gbmV3IHdtKHRoaXMuZ2V0TW92ZWRSYW5nZVN0YXJ0KCksdGhpcy5ob3dNYW55LGUsdGhpcy5iYXNlVmVyc2lvbisxKX1fdmFsaWRhdGUoKXtpZihzdXBlci5fdmFsaWRhdGUoKSwhdGhpcy5zb3VyY2VQb3NpdGlvbi5yb290LmRvY3VtZW50KXRocm93IG5ldyBaYSgncmVpbnNlcnQtb3BlcmF0aW9uLW9uLWRldGFjaGVkLWl0ZW06IENhbm5vdCByZWluc2VydCBkZXRhY2hlZCBpdGVtLicpO2lmKCF0aGlzLnRhcmdldFBvc2l0aW9uLnJvb3QuZG9jdW1lbnQpdGhyb3cgbmV3IFphKCdyZWluc2VydC1vcGVyYXRpb24tdG8tZGV0YWNoZWQtcGFyZW50OiBDYW5ub3QgcmVpbnNlcnQgaXRlbSB0byBkZXRhY2hlZCBwYXJlbnQuJyl9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4nZW5naW5lLm1vZGVsLm9wZXJhdGlvbi5SZWluc2VydE9wZXJhdGlvbid9fWNsYXNzIHdtIGV4dGVuZHMga217Z2V0IHR5cGUoKXtyZXR1cm4ncmVtb3ZlJ31nZXRSZXZlcnNlZCgpe2NvbnN0IGU9dGhpcy5zb3VyY2VQb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0aGlzLnRhcmdldFBvc2l0aW9uLHRoaXMuaG93TWFueSk7cmV0dXJuIG5ldyBfbSh0aGlzLmdldE1vdmVkUmFuZ2VTdGFydCgpLHRoaXMuaG93TWFueSxlLHRoaXMuYmFzZVZlcnNpb24rMSl9X3ZhbGlkYXRlKCl7aWYoc3VwZXIuX3ZhbGlkYXRlKCksIXRoaXMuc291cmNlUG9zaXRpb24ucm9vdC5kb2N1bWVudCl0aHJvdyBuZXcgWmEoJ3JlbW92ZS1vcGVyYXRpb24tb24tZGV0YWNoZWQtaXRlbTogQ2Fubm90IHJlbW92ZSBkZXRhY2hlZCBpdGVtLicpfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uUmVtb3ZlT3BlcmF0aW9uJ319Y2xhc3Mgdm0gZXh0ZW5kcyBnbXtjb25zdHJ1Y3RvcihlLHQsbyl7c3VwZXIobyksdGhpcy5wb3NpdGlvbj1LdS5jcmVhdGVGcm9tUG9zaXRpb24oZSksdGhpcy5ub2Rlcz1uZXcgcXUod28odCkpfWdldCB0eXBlKCl7cmV0dXJuJ2luc2VydCd9Y2xvbmUoKXtjb25zdCBlPW5ldyBxdShbLi4udGhpcy5ub2Rlc10ubWFwKChlKT0+ZS5fY2xvbmUoITApKSk7cmV0dXJuIG5ldyB2bSh0aGlzLnBvc2l0aW9uLGUsdGhpcy5iYXNlVmVyc2lvbil9Z2V0UmV2ZXJzZWQoKXtjb25zdCBlPXRoaXMucG9zaXRpb24ucm9vdC5kb2N1bWVudC5ncmF2ZXlhcmQsdD1uZXcgS3UoZSxbMF0pO3JldHVybiBuZXcgd20odGhpcy5wb3NpdGlvbix0aGlzLm5vZGVzLm1heE9mZnNldCx0LHRoaXMuYmFzZVZlcnNpb24rMSl9X3ZhbGlkYXRlKCl7Y29uc3QgZT10aGlzLnBvc2l0aW9uLnBhcmVudDtpZighZXx8ZS5tYXhPZmZzZXQ8dGhpcy5wb3NpdGlvbi5vZmZzZXQpdGhyb3cgbmV3IFphKCdpbnNlcnQtb3BlcmF0aW9uLXBvc2l0aW9uLWludmFsaWQ6IEluc2VydGlvbiBwb3NpdGlvbiBpcyBpbnZhbGlkLicpfV9leGVjdXRlKCl7Y29uc3QgZT10aGlzLm5vZGVzO3RoaXMubm9kZXM9bmV3IHF1KFsuLi5lXS5tYXAoKGUpPT5lLl9jbG9uZSghMCkpKSxobyh0aGlzLnBvc2l0aW9uLGUpfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uSW5zZXJ0T3BlcmF0aW9uJ31zdGF0aWMgZnJvbUpTT04oZSx0KXtjb25zdCBvPVtdO2Zvcihjb25zdCBuIG9mIGUubm9kZXMpbi5uYW1lP28ucHVzaChXdS5mcm9tSlNPTihuKSk6by5wdXNoKHp1LmZyb21KU09OKG4pKTtyZXR1cm4gbmV3IHZtKEt1LmZyb21KU09OKGUucG9zaXRpb24sdCksbyxlLmJhc2VWZXJzaW9uKX19Y2xhc3MgeW0gZXh0ZW5kcyBnbXtjb25zdHJ1Y3RvcihlLHQsbyxuLGkpe3N1cGVyKGkpLHRoaXMubmFtZT1lLHRoaXMub2xkUmFuZ2U9dD9HdS5jcmVhdGVGcm9tUmFuZ2UodCk6bnVsbCx0aGlzLm5ld1JhbmdlPW8/R3UuY3JlYXRlRnJvbVJhbmdlKG8pOm51bGwsdGhpcy5fbWFya2Vycz1ufWdldCB0eXBlKCl7cmV0dXJuJ21hcmtlcid9Y2xvbmUoKXtyZXR1cm4gbmV3IHltKHRoaXMubmFtZSx0aGlzLm9sZFJhbmdlLHRoaXMubmV3UmFuZ2UsdGhpcy5fbWFya2Vycyx0aGlzLmJhc2VWZXJzaW9uKX1nZXRSZXZlcnNlZCgpe3JldHVybiBuZXcgeW0odGhpcy5uYW1lLHRoaXMubmV3UmFuZ2UsdGhpcy5vbGRSYW5nZSx0aGlzLl9tYXJrZXJzLHRoaXMuYmFzZVZlcnNpb24rMSl9X2V4ZWN1dGUoKXtjb25zdCBlPXRoaXMubmV3UmFuZ2U/J19zZXQnOidfcmVtb3ZlJzt0aGlzLl9tYXJrZXJzW2VdKHRoaXMubmFtZSx0aGlzLm5ld1JhbmdlLCEwKX10b0pTT04oKXtjb25zdCBlPXN1cGVyLnRvSlNPTigpO3JldHVybiBkZWxldGUgZS5fbWFya2VycyxlfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uTWFya2VyT3BlcmF0aW9uJ31zdGF0aWMgZnJvbUpTT04oZSx0KXtyZXR1cm4gbmV3IHltKGUubmFtZSxlLm9sZFJhbmdlP0d1LmZyb21KU09OKGUub2xkUmFuZ2UsdCk6bnVsbCxlLm5ld1JhbmdlP0d1LmZyb21KU09OKGUubmV3UmFuZ2UsdCk6bnVsbCx0Lm1vZGVsLm1hcmtlcnMsZS5iYXNlVmVyc2lvbil9fWNsYXNzIHhtIGV4dGVuZHMgZ217Z2V0IHR5cGUoKXtyZXR1cm4nbm9vcCd9Y2xvbmUoKXtyZXR1cm4gbmV3IHhtKHRoaXMuYmFzZVZlcnNpb24pfWdldFJldmVyc2VkKCl7cmV0dXJuIG5ldyB4bSh0aGlzLmJhc2VWZXJzaW9uKzEpfV9leGVjdXRlKCl7fXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uTm9PcGVyYXRpb24nfX1jbGFzcyBDbSBleHRlbmRzIGdte2NvbnN0cnVjdG9yKGUsdCxvLG4pe3N1cGVyKG4pLHRoaXMucG9zaXRpb249ZSx0aGlzLm9sZE5hbWU9dCx0aGlzLm5ld05hbWU9b31nZXQgdHlwZSgpe3JldHVybidyZW5hbWUnfWNsb25lKCl7cmV0dXJuIG5ldyBDbShLdS5jcmVhdGVGcm9tUG9zaXRpb24odGhpcy5wb3NpdGlvbiksdGhpcy5vbGROYW1lLHRoaXMubmV3TmFtZSx0aGlzLmJhc2VWZXJzaW9uKX1nZXRSZXZlcnNlZCgpe3JldHVybiBuZXcgQ20oS3UuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMucG9zaXRpb24pLHRoaXMubmV3TmFtZSx0aGlzLm9sZE5hbWUsdGhpcy5iYXNlVmVyc2lvbisxKX1fdmFsaWRhdGUoKXtjb25zdCBlPXRoaXMucG9zaXRpb24ubm9kZUFmdGVyO2lmKCEoZSBpbnN0YW5jZW9mIFd1KSl0aHJvdyBuZXcgWmEoJ3JlbmFtZS1vcGVyYXRpb24td3JvbmctcG9zaXRpb246IEdpdmVuIHBvc2l0aW9uIGlzIGludmFsaWQgb3Igbm9kZSBhZnRlciBpdCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgRWxlbWVudC4nKTtlbHNlIGlmKGUubmFtZSE9PXRoaXMub2xkTmFtZSl0aHJvdyBuZXcgWmEoJ3JlbmFtZS1vcGVyYXRpb24td3JvbmctbmFtZTogRWxlbWVudCB0byBjaGFuZ2UgaGFzIGRpZmZlcmVudCBuYW1lIHRoYW4gb3BlcmF0aW9uXFwncyBvbGQgbmFtZS4nKX1fZXhlY3V0ZSgpe2NvbnN0IGU9dGhpcy5wb3NpdGlvbi5ub2RlQWZ0ZXI7ZS5uYW1lPXRoaXMubmV3TmFtZX1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwub3BlcmF0aW9uLlJlbmFtZU9wZXJhdGlvbid9c3RhdGljIGZyb21KU09OKGUsdCl7cmV0dXJuIG5ldyBDbShLdS5mcm9tSlNPTihlLnBvc2l0aW9uLHQpLGUub2xkTmFtZSxlLm5ld05hbWUsZS5iYXNlVmVyc2lvbil9fWNsYXNzIEFtIGV4dGVuZHMgZ217Y29uc3RydWN0b3IoZSx0LG8sbixpKXtzdXBlcihpKSx0aGlzLnJvb3Q9ZSx0aGlzLmtleT10LHRoaXMub2xkVmFsdWU9byx0aGlzLm5ld1ZhbHVlPW59Z2V0IHR5cGUoKXtyZXR1cm4gbnVsbD09PXRoaXMub2xkVmFsdWU/J2FkZFJvb3RBdHRyaWJ1dGUnOm51bGw9PT10aGlzLm5ld1ZhbHVlPydyZW1vdmVSb290QXR0cmlidXRlJzonY2hhbmdlUm9vdEF0dHJpYnV0ZSd9Y2xvbmUoKXtyZXR1cm4gbmV3IEFtKHRoaXMucm9vdCx0aGlzLmtleSx0aGlzLm9sZFZhbHVlLHRoaXMubmV3VmFsdWUsdGhpcy5iYXNlVmVyc2lvbil9Z2V0UmV2ZXJzZWQoKXtyZXR1cm4gbmV3IEFtKHRoaXMucm9vdCx0aGlzLmtleSx0aGlzLm5ld1ZhbHVlLHRoaXMub2xkVmFsdWUsdGhpcy5iYXNlVmVyc2lvbisxKX1fdmFsaWRhdGUoKXtpZih0aGlzLnJvb3QhPXRoaXMucm9vdC5yb290fHx0aGlzLnJvb3QuaXMoJ2RvY3VtZW50RnJhZ21lbnQnKSl0aHJvdyBuZXcgWmEoJ3Jvb3RhdHRyaWJ1dGUtb3BlcmF0aW9uLW5vdC1hLXJvb3Q6IFRoZSBlbGVtZW50IHRvIGNoYW5nZSBpcyBub3QgYSByb290IGVsZW1lbnQuJyx7cm9vdDp0aGlzLnJvb3Qsa2V5OnRoaXMua2V5fSk7aWYobnVsbCE9PXRoaXMub2xkVmFsdWUmJnRoaXMucm9vdC5nZXRBdHRyaWJ1dGUodGhpcy5rZXkpIT09dGhpcy5vbGRWYWx1ZSl0aHJvdyBuZXcgWmEoJ3Jvb3RhdHRyaWJ1dGUtb3BlcmF0aW9uLXdyb25nLW9sZC12YWx1ZTogQ2hhbmdlZCBub2RlIGhhcyBkaWZmZXJlbnQgYXR0cmlidXRlIHZhbHVlIHRoYW4gb3BlcmF0aW9uXFwncyBvbGQgYXR0cmlidXRlIHZhbHVlLicse3Jvb3Q6dGhpcy5yb290LGtleTp0aGlzLmtleX0pO2lmKG51bGw9PT10aGlzLm9sZFZhbHVlJiZudWxsIT09dGhpcy5uZXdWYWx1ZSYmdGhpcy5yb290Lmhhc0F0dHJpYnV0ZSh0aGlzLmtleSkpdGhyb3cgbmV3IFphKCdyb290YXR0cmlidXRlLW9wZXJhdGlvbi1hdHRyaWJ1dGUtZXhpc3RzOiBUaGUgYXR0cmlidXRlIHdpdGggZ2l2ZW4ga2V5IGFscmVhZHkgZXhpc3RzLicse3Jvb3Q6dGhpcy5yb290LGtleTp0aGlzLmtleX0pfV9leGVjdXRlKCl7bnVsbD09PXRoaXMubmV3VmFsdWU/dGhpcy5yb290Ll9yZW1vdmVBdHRyaWJ1dGUodGhpcy5rZXkpOnRoaXMucm9vdC5fc2V0QXR0cmlidXRlKHRoaXMua2V5LHRoaXMubmV3VmFsdWUpfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5vcGVyYXRpb24uUm9vdEF0dHJpYnV0ZU9wZXJhdGlvbid9c3RhdGljIGZyb21KU09OKGUsdCl7aWYoIXQuZ2V0Um9vdChlLnJvb3QpKXRocm93IG5ldyBaYSgncm9vdGF0dHJpYnV0ZS1vcGVyYXRpb24tZnJvbWpzb24tbm8tcm9vdDogQ2Fubm90IGNyZWF0ZSBSb290QXR0cmlidXRlT3BlcmF0aW9uLiBSb290IHdpdGggc3BlY2lmaWVkIG5hbWUgZG9lcyBub3QgZXhpc3QuJyx7cm9vdE5hbWU6ZX0pO3JldHVybiBuZXcgQW0odC5nZXRSb290KGUucm9vdCksZS5rZXksZS5vbGRWYWx1ZSxlLm5ld1ZhbHVlLGUuYmFzZVZlcnNpb24pfX1jb25zdCBUbT17fTtUbVtibS5jbGFzc05hbWVdPWJtLFRtW3ZtLmNsYXNzTmFtZV09dm0sVG1beW0uY2xhc3NOYW1lXT15bSxUbVtrbS5jbGFzc05hbWVdPWttLFRtW3htLmNsYXNzTmFtZV09eG0sVG1bZ20uY2xhc3NOYW1lXT1nbSxUbVtfbS5jbGFzc05hbWVdPV9tLFRtW3dtLmNsYXNzTmFtZV09d20sVG1bQ20uY2xhc3NOYW1lXT1DbSxUbVtBbS5jbGFzc05hbWVdPUFtO2NsYXNzIFBte3N0YXRpYyBmcm9tSlNPTihlLHQpe3JldHVybiBUbVtlLl9fY2xhc3NOYW1lXS5mcm9tSlNPTihlLHQpfX1jb25zdCBFbT1uZXcgTWFwO2NsYXNzIFNte3N0YXRpYyBmcm9tSlNPTihlLHQpe2lmKCFFbS5oYXMoZS5fX2NsYXNzTmFtZSkpdGhyb3cgbmV3IFphKCdkZWx0YS1mcm9tanNvbi1uby1kZXNlcmlhbGl6ZXI6IFRoaXMgZGVsdGEgaGFzIG5vIGRlZmluZWQgZGVzZXJpYWxpemVyJyx7bmFtZTplLl9fY2xhc3NOYW1lfSk7Y29uc3Qgbz1FbS5nZXQoZS5fX2NsYXNzTmFtZSksbj1uZXcgbztmb3IoY29uc3QgbyBvZiBlLm9wZXJhdGlvbnMpbi5hZGRPcGVyYXRpb24oUG0uZnJvbUpTT04obyx0KSk7Zm9yKGNvbnN0IG8gaW4gZSknX19jbGFzc05hbWUnIT1vJiZ2b2lkIDA9PT1uW29dJiYobltvXT1lW29dKTtyZXR1cm4gbn1zdGF0aWMgcmVnaXN0ZXIoZSl7RW0uc2V0KGUuY2xhc3NOYW1lLGUpfX1jbGFzcyBPbXtjb25zdHJ1Y3Rvcigpe3RoaXMuYmF0Y2g9bnVsbCx0aGlzLm9wZXJhdGlvbnM9W119Z2V0IGJhc2VWZXJzaW9uKCl7cmV0dXJuIDA8dGhpcy5vcGVyYXRpb25zLmxlbmd0aD90aGlzLm9wZXJhdGlvbnNbMF0uYmFzZVZlcnNpb246bnVsbH1zZXQgYmFzZVZlcnNpb24oZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5vcGVyYXRpb25zKXQuYmFzZVZlcnNpb249ZSsrfWdldCBfcmV2ZXJzZURlbHRhQ2xhc3MoKXtyZXR1cm4gT219YWRkT3BlcmF0aW9uKGUpe3JldHVybiBlLmRlbHRhPXRoaXMsdGhpcy5vcGVyYXRpb25zLnB1c2goZSksZX1jbG9uZSgpe2NvbnN0IGU9bmV3IHRoaXMuY29uc3RydWN0b3I7Zm9yKGNvbnN0IHQgb2YgdGhpcy5vcGVyYXRpb25zKWUuYWRkT3BlcmF0aW9uKHQuY2xvbmUoKSk7cmV0dXJuIGV9Z2V0UmV2ZXJzZWQoKXtjb25zdCBlPW5ldyB0aGlzLl9yZXZlcnNlRGVsdGFDbGFzcztmb3IoY29uc3QgdCBvZiB0aGlzLm9wZXJhdGlvbnMpZS5hZGRPcGVyYXRpb24odC5nZXRSZXZlcnNlZCgpKTtlLm9wZXJhdGlvbnMucmV2ZXJzZSgpO2ZvcihsZXQgdD0wO3Q8ZS5vcGVyYXRpb25zLmxlbmd0aDt0KyspZS5vcGVyYXRpb25zW3RdLmJhc2VWZXJzaW9uPXRoaXMub3BlcmF0aW9uc1t0aGlzLm9wZXJhdGlvbnMubGVuZ3RoLTFdLmJhc2VWZXJzaW9uK3QrMTtyZXR1cm4gZX10b0pTT04oKXtjb25zdCBlPUVkKHRoaXMpO3JldHVybiBlLl9fY2xhc3NOYW1lPXRoaXMuY29uc3RydWN0b3IuY2xhc3NOYW1lLGRlbGV0ZSBlLmJhdGNoLGV9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4nZW5naW5lLm1vZGVsLmRlbHRhLkRlbHRhJ319U20ucmVnaXN0ZXIoT20pO2NsYXNzIFJtIGV4dGVuZHMgT217Z2V0IHR5cGUoKXtyZXR1cm4nYXR0cmlidXRlJ31nZXQga2V5KCl7cmV0dXJuIHRoaXMub3BlcmF0aW9uc1swXT90aGlzLm9wZXJhdGlvbnNbMF0ua2V5Om51bGx9Z2V0IHZhbHVlKCl7cmV0dXJuIHRoaXMub3BlcmF0aW9uc1swXT90aGlzLm9wZXJhdGlvbnNbMF0ubmV3VmFsdWU6bnVsbH1nZXQgcmFuZ2UoKXtpZih0aGlzLl9yYW5nZSlyZXR1cm4gdGhpcy5fcmFuZ2U7bGV0IGU9bnVsbCx0PW51bGw7Zm9yKGNvbnN0IG8gb2YgdGhpcy5vcGVyYXRpb25zKW8gaW5zdGFuY2VvZiB4bXx8KChudWxsPT09ZXx8ZS5pc0FmdGVyKG8ucmFuZ2Uuc3RhcnQpKSYmKGU9by5yYW5nZS5zdGFydCksKG51bGw9PT10fHx0LmlzQmVmb3JlKG8ucmFuZ2UuZW5kKSkmJih0PW8ucmFuZ2UuZW5kKSk7cmV0dXJuIGUmJnQ/KHRoaXMuX3JhbmdlPW5ldyBHdShlLHQpLHRoaXMuX3JhbmdlKTpudWxsfWdldCBfcmV2ZXJzZURlbHRhQ2xhc3MoKXtyZXR1cm4gUm19dG9KU09OKCl7Y29uc3QgZT1zdXBlci50b0pTT04oKTtyZXR1cm4gZGVsZXRlIGUuX3JhbmdlLGV9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4nZW5naW5lLm1vZGVsLmRlbHRhLkF0dHJpYnV0ZURlbHRhJ319U20ucmVnaXN0ZXIoUm0pO2NsYXNzIEltIGV4dGVuZHMgT217Z2V0IHR5cGUoKXtyZXR1cm4nc3BsaXQnfWdldCBwb3NpdGlvbigpe3JldHVybiB0aGlzLl9tb3ZlT3BlcmF0aW9uP3RoaXMuX21vdmVPcGVyYXRpb24uc291cmNlUG9zaXRpb246bnVsbH1nZXQgX2Nsb25lT3BlcmF0aW9uKCl7cmV0dXJuIHRoaXMub3BlcmF0aW9uc1swXXx8bnVsbH1nZXQgX21vdmVPcGVyYXRpb24oKXtyZXR1cm4gdGhpcy5vcGVyYXRpb25zWzFdJiZ0aGlzLm9wZXJhdGlvbnNbMV1pbnN0YW5jZW9mIGttP3RoaXMub3BlcmF0aW9uc1sxXTpudWxsfWdldCBfcmV2ZXJzZURlbHRhQ2xhc3MoKXtyZXR1cm4gVm19c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4nZW5naW5lLm1vZGVsLmRlbHRhLlNwbGl0RGVsdGEnfX1TbS5yZWdpc3RlcihJbSk7Y2xhc3MgVm0gZXh0ZW5kcyBPbXtnZXQgdHlwZSgpe3JldHVybidtZXJnZSd9Z2V0IHBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW92ZU9wZXJhdGlvbj90aGlzLl9yZW1vdmVPcGVyYXRpb24uc291cmNlUG9zaXRpb246bnVsbH1nZXQgX3JlbW92ZU9wZXJhdGlvbigpe3JldHVybiB0aGlzLm9wZXJhdGlvbnNbMV18fG51bGx9Z2V0IF9yZXZlcnNlRGVsdGFDbGFzcygpe3JldHVybiBJbX1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwuZGVsdGEuTWVyZ2VEZWx0YSd9fVNtLnJlZ2lzdGVyKFZtKTtjbGFzcyBGbSBleHRlbmRzIE9te2dldCB0eXBlKCl7cmV0dXJuJ21vdmUnfWdldCBob3dNYW55KCl7cmV0dXJuIHRoaXMuX21vdmVPcGVyYXRpb24/dGhpcy5fbW92ZU9wZXJhdGlvbi5ob3dNYW55Om51bGx9Z2V0IHNvdXJjZVBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuX21vdmVPcGVyYXRpb24/dGhpcy5fbW92ZU9wZXJhdGlvbi5zb3VyY2VQb3NpdGlvbjpudWxsfWdldCB0YXJnZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLl9tb3ZlT3BlcmF0aW9uP3RoaXMuX21vdmVPcGVyYXRpb24udGFyZ2V0UG9zaXRpb246bnVsbH1nZXQgX21vdmVPcGVyYXRpb24oKXtyZXR1cm4gdGhpcy5vcGVyYXRpb25zWzBdfHxudWxsfWdldCBfcmV2ZXJzZURlbHRhQ2xhc3MoKXtyZXR1cm4gRm19c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4nZW5naW5lLm1vZGVsLmRlbHRhLk1vdmVEZWx0YSd9fVNtLnJlZ2lzdGVyKEZtKTtjbGFzcyBObSBleHRlbmRzIEZte3N0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5kZWx0YS5SZW1vdmVEZWx0YSd9fVNtLnJlZ2lzdGVyKE5tKTtjbGFzcyBNbSBleHRlbmRzIE9te2dldCB0eXBlKCl7cmV0dXJuJ3JlbmFtZSd9Z2V0IF9yZXZlcnNlRGVsdGFDbGFzcygpe3JldHVybiBNbX1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwuZGVsdGEuUmVuYW1lRGVsdGEnfX1TbS5yZWdpc3RlcihNbSk7Y2xhc3MgRG0gZXh0ZW5kcyBPbXtnZXQgdHlwZSgpe3JldHVybid3cmFwJ31nZXQgcmFuZ2UoKXtjb25zdCBlPXRoaXMuX21vdmVPcGVyYXRpb247cmV0dXJuIGU/R3UuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZS5zb3VyY2VQb3NpdGlvbixlLmhvd01hbnkpOm51bGx9Z2V0IGhvd01hbnkoKXtjb25zdCBlPXRoaXMucmFuZ2U7cmV0dXJuIGU/ZS5lbmQub2Zmc2V0LWUuc3RhcnQub2Zmc2V0OjB9Z2V0IF9pbnNlcnRPcGVyYXRpb24oKXtyZXR1cm4gdGhpcy5vcGVyYXRpb25zWzBdfHxudWxsfWdldCBfbW92ZU9wZXJhdGlvbigpe3JldHVybiB0aGlzLm9wZXJhdGlvbnNbMV18fG51bGx9Z2V0IF9yZXZlcnNlRGVsdGFDbGFzcygpe3JldHVybiBCbX1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwuZGVsdGEuV3JhcERlbHRhJ319U20ucmVnaXN0ZXIoRG0pO2NsYXNzIEJtIGV4dGVuZHMgT217Z2V0IHR5cGUoKXtyZXR1cm4ndW53cmFwJ31nZXQgcG9zaXRpb24oKXtyZXR1cm4gdGhpcy5fbW92ZU9wZXJhdGlvbj90aGlzLl9tb3ZlT3BlcmF0aW9uLnRhcmdldFBvc2l0aW9uOm51bGx9Z2V0IF9tb3ZlT3BlcmF0aW9uKCl7cmV0dXJuIHRoaXMub3BlcmF0aW9uc1swXXx8bnVsbH1nZXQgX3JldmVyc2VEZWx0YUNsYXNzKCl7cmV0dXJuIERtfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5kZWx0YS5VbndyYXBEZWx0YSd9fVNtLnJlZ2lzdGVyKEJtKTtjbGFzcyBMbSBleHRlbmRzIE9te2dldCB0eXBlKCl7cmV0dXJuJ2luc2VydCd9Z2V0IHBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuX2luc2VydE9wZXJhdGlvbj90aGlzLl9pbnNlcnRPcGVyYXRpb24ucG9zaXRpb246bnVsbH1nZXQgbm9kZXMoKXtyZXR1cm4gdGhpcy5faW5zZXJ0T3BlcmF0aW9uP3RoaXMuX2luc2VydE9wZXJhdGlvbi5ub2RlczpudWxsfWdldCBfaW5zZXJ0T3BlcmF0aW9uKCl7cmV0dXJuIHRoaXMub3BlcmF0aW9uc1swXXx8bnVsbH1nZXQgX3JldmVyc2VEZWx0YUNsYXNzKCl7cmV0dXJuIE5tfXN0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5kZWx0YS5JbnNlcnREZWx0YSd9fVNtLnJlZ2lzdGVyKExtKTtjbGFzcyB6bSBleHRlbmRzIExte3N0YXRpYyBnZXQgY2xhc3NOYW1lKCl7cmV0dXJuJ2VuZ2luZS5tb2RlbC5kZWx0YS5XZWFrSW5zZXJ0RGVsdGEnfX1TbS5yZWdpc3Rlcih6bSk7dmFyIGptPWZ1bmN0aW9uKGUsdCxvPXtpc1N0cm9uZzohMX0pe2xldCBuLGk7ZSBpbnN0YW5jZW9mIHZtP249cW0uSW5zZXJ0T3BlcmF0aW9uOmUgaW5zdGFuY2VvZiBibT9uPXFtLkF0dHJpYnV0ZU9wZXJhdGlvbjplIGluc3RhbmNlb2YgQW0/bj1xbS5Sb290QXR0cmlidXRlT3BlcmF0aW9uOmUgaW5zdGFuY2VvZiBDbT9uPXFtLlJlbmFtZU9wZXJhdGlvbjplIGluc3RhbmNlb2YgeW0/bj1xbS5NYXJrZXJPcGVyYXRpb246ZSBpbnN0YW5jZW9mIGttP249cW0uTW92ZU9wZXJhdGlvbjppPUNvLG4mJih0IGluc3RhbmNlb2Ygdm0/aT1uLkluc2VydE9wZXJhdGlvbjp0IGluc3RhbmNlb2YgYm0/aT1uLkF0dHJpYnV0ZU9wZXJhdGlvbjp0IGluc3RhbmNlb2YgQW0/aT1uLlJvb3RBdHRyaWJ1dGVPcGVyYXRpb246dCBpbnN0YW5jZW9mIENtP2k9bi5SZW5hbWVPcGVyYXRpb246dCBpbnN0YW5jZW9mIHltP2k9bi5NYXJrZXJPcGVyYXRpb246dCBpbnN0YW5jZW9mIGttP2k9bi5Nb3ZlT3BlcmF0aW9uOmk9Q28pO2NvbnN0IHI9aShlLHQsbyk7cmV0dXJuIEFvKGUuYmFzZVZlcnNpb24scil9O2NvbnN0IHFtPXtJbnNlcnRPcGVyYXRpb246e0luc2VydE9wZXJhdGlvbihlLHQsbyl7Y29uc3Qgbj1lLmNsb25lKCksaT12b2lkIDA9PT1vLmluc2VydEJlZm9yZT8hby5pc1N0cm9uZzpvLmluc2VydEJlZm9yZTtyZXR1cm4gbi5wb3NpdGlvbj1uLnBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHQucG9zaXRpb24sdC5ub2Rlcy5tYXhPZmZzZXQsaSksW25dfSxBdHRyaWJ1dGVPcGVyYXRpb246Q28sUm9vdEF0dHJpYnV0ZU9wZXJhdGlvbjpDbyxSZW5hbWVPcGVyYXRpb246Q28sTWFya2VyT3BlcmF0aW9uOkNvLE1vdmVPcGVyYXRpb24oZSx0LG8pe2NvbnN0IG49ZS5jbG9uZSgpLGk9dm9pZCAwPT09by5pbnNlcnRCZWZvcmU/IW8uaXNTdHJvbmc6by5pbnNlcnRCZWZvcmU7cmV0dXJuIG4ucG9zaXRpb249ZS5wb3NpdGlvbi5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodC5zb3VyY2VQb3NpdGlvbix0LnRhcmdldFBvc2l0aW9uLHQuaG93TWFueSxpLHQuaXNTdGlja3kmJiFvLmZvcmNlTm90U3RpY2t5KSxbbl19fSxBdHRyaWJ1dGVPcGVyYXRpb246e0luc2VydE9wZXJhdGlvbihlLHQpe2NvbnN0IG89ZS5yYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LnBvc2l0aW9uLHQubm9kZXMubWF4T2Zmc2V0LCEwLCExKTtyZXR1cm4gby5yZXZlcnNlKCkubWFwKCh0KT0+bmV3IGJtKHQsZS5rZXksZS5vbGRWYWx1ZSxlLm5ld1ZhbHVlLGUuYmFzZVZlcnNpb24pKX0sQXR0cmlidXRlT3BlcmF0aW9uKGUsdCxvKXtpZihlLmtleT09PXQua2V5KXtjb25zdCBuPWUucmFuZ2UuZ2V0RGlmZmVyZW5jZSh0LnJhbmdlKS5tYXAoKHQpPT5uZXcgYm0odCxlLmtleSxlLm9sZFZhbHVlLGUubmV3VmFsdWUsZS5iYXNlVmVyc2lvbikpLGk9ZS5yYW5nZS5nZXRJbnRlcnNlY3Rpb24odC5yYW5nZSk7cmV0dXJuIGkmJihvLmlzU3Ryb25nP24ucHVzaChuZXcgYm0oaSx0LmtleSx0Lm5ld1ZhbHVlLGUubmV3VmFsdWUsZS5iYXNlVmVyc2lvbikpOjA9PT1uLmxlbmd0aCYmbi5wdXNoKG5ldyB4bSgwKSkpLG59cmV0dXJuW2UuY2xvbmUoKV19LFJvb3RBdHRyaWJ1dGVPcGVyYXRpb246Q28sUmVuYW1lT3BlcmF0aW9uOkNvLE1hcmtlck9wZXJhdGlvbjpDbyxNb3ZlT3BlcmF0aW9uKGUsdCl7Y29uc3Qgbz1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0LnNvdXJjZVBvc2l0aW9uLHQuaG93TWFueSk7bGV0IG49W107Y29uc3QgaT1QbyhlLnJhbmdlLmdldERpZmZlcmVuY2UobykpLHI9ZS5yYW5nZS5nZXRJbnRlcnNlY3Rpb24obyk7cmV0dXJuIG51bGwhPT1pJiYoaS5zdGFydD1pLnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnkpLGkuZW5kPWkuZW5kLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnkpLG49aS5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LmdldE1vdmVkUmFuZ2VTdGFydCgpLHQuaG93TWFueSwhMCwhMSkucmV2ZXJzZSgpKSxudWxsIT09ciYmKHIuc3RhcnQ9ci5zdGFydC5fZ2V0Q29tYmluZWQodC5zb3VyY2VQb3NpdGlvbix0LmdldE1vdmVkUmFuZ2VTdGFydCgpKSxyLmVuZD1yLmVuZC5fZ2V0Q29tYmluZWQodC5zb3VyY2VQb3NpdGlvbix0LmdldE1vdmVkUmFuZ2VTdGFydCgpKSxuLnB1c2gocikpLG4ubWFwKCh0KT0+bmV3IGJtKHQsZS5rZXksZS5vbGRWYWx1ZSxlLm5ld1ZhbHVlLGUuYmFzZVZlcnNpb24pKX19LFJvb3RBdHRyaWJ1dGVPcGVyYXRpb246e0luc2VydE9wZXJhdGlvbjpDbyxBdHRyaWJ1dGVPcGVyYXRpb246Q28sUm9vdEF0dHJpYnV0ZU9wZXJhdGlvbihlLHQsbyl7cmV0dXJuIGUucm9vdCE9PXQucm9vdHx8ZS5rZXkhPT10LmtleXx8KGUubmV3VmFsdWU9PT10Lm5ld1ZhbHVlfHxvLmlzU3Ryb25nKSYmZS5uZXdWYWx1ZSE9PXQubmV3VmFsdWU/W2UuY2xvbmUoKV06W25ldyB4bShlLmJhc2VWZXJzaW9uKV19LFJlbmFtZU9wZXJhdGlvbjpDbyxNYXJrZXJPcGVyYXRpb246Q28sTW92ZU9wZXJhdGlvbjpDb30sUmVuYW1lT3BlcmF0aW9uOntJbnNlcnRPcGVyYXRpb24oZSx0KXtjb25zdCBvPWUuY2xvbmUoKTtyZXR1cm4gby5wb3NpdGlvbj1vLnBvc2l0aW9uLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHQucG9zaXRpb24sdC5ub2Rlcy5tYXhPZmZzZXQsITApLFtvXX0sQXR0cmlidXRlT3BlcmF0aW9uOkNvLFJvb3RBdHRyaWJ1dGVPcGVyYXRpb246Q28sUmVuYW1lT3BlcmF0aW9uKGUsdCxvKXtjb25zdCBuPWUuY2xvbmUoKTtpZihlLnBvc2l0aW9uLmlzRXF1YWwodC5wb3NpdGlvbikpaWYoby5pc1N0cm9uZyluLm9sZE5hbWU9dC5uZXdOYW1lO2Vsc2UgcmV0dXJuW25ldyB4bShlLmJhc2VWZXJzaW9uKV07cmV0dXJuW25dfSxNYXJrZXJPcGVyYXRpb246Q28sTW92ZU9wZXJhdGlvbihlLHQpe2NvbnN0IG89ZS5jbG9uZSgpLG49by5wb3NpdGlvbi5pc0VxdWFsKHQuc291cmNlUG9zaXRpb24pO3JldHVybiBvLnBvc2l0aW9uPW8ucG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQuc291cmNlUG9zaXRpb24sdC50YXJnZXRQb3NpdGlvbix0Lmhvd01hbnksITAsbiksW29dfX0sTWFya2VyT3BlcmF0aW9uOntJbnNlcnRPcGVyYXRpb24oZSx0KXtjb25zdCBvPWUuY2xvbmUoKTtyZXR1cm4gby5vbGRSYW5nZSYmKG8ub2xkUmFuZ2U9by5vbGRSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LnBvc2l0aW9uLHQubm9kZXMubWF4T2Zmc2V0LCExLCExKVswXSksby5uZXdSYW5nZSYmKG8ubmV3UmFuZ2U9by5uZXdSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeUluc2VydGlvbih0LnBvc2l0aW9uLHQubm9kZXMubWF4T2Zmc2V0LCExLCExKVswXSksW29dfSxBdHRyaWJ1dGVPcGVyYXRpb246Q28sUm9vdEF0dHJpYnV0ZU9wZXJhdGlvbjpDbyxSZW5hbWVPcGVyYXRpb246Q28sTWFya2VyT3BlcmF0aW9uKGUsdCxvKXtjb25zdCBuPWUuY2xvbmUoKTtpZihlLm5hbWU9PXQubmFtZSlpZihvLmlzU3Ryb25nKW4ub2xkUmFuZ2U9dC5uZXdSYW5nZTtlbHNlIHJldHVybltuZXcgeG0oZS5iYXNlVmVyc2lvbildO3JldHVybltuXX0sTW92ZU9wZXJhdGlvbihlLHQpe2NvbnN0IG89ZS5jbG9uZSgpO2lmKG8ub2xkUmFuZ2Upe2NvbnN0IGU9by5vbGRSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodC5zb3VyY2VQb3NpdGlvbix0LnRhcmdldFBvc2l0aW9uLHQuaG93TWFueSk7by5vbGRSYW5nZT1HdS5jcmVhdGVGcm9tUmFuZ2VzKGUpfWlmKG8ubmV3UmFuZ2Upe2NvbnN0IGU9by5uZXdSYW5nZS5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodC5zb3VyY2VQb3NpdGlvbix0LnRhcmdldFBvc2l0aW9uLHQuaG93TWFueSk7by5uZXdSYW5nZT1HdS5jcmVhdGVGcm9tUmFuZ2VzKGUpfXJldHVybltvXX19LE1vdmVPcGVyYXRpb246e0luc2VydE9wZXJhdGlvbihlLHQsbyl7bGV0IG49R3UuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQoZS5zb3VyY2VQb3NpdGlvbixlLmhvd01hbnkpO2NvbnN0IGk9ZS5pc1N0aWNreSYmIW8uZm9yY2VOb3RTdGlja3k7bj1uLl9nZXRUcmFuc2Zvcm1lZEJ5SW5zZXJ0aW9uKHQucG9zaXRpb24sdC5ub2Rlcy5tYXhPZmZzZXQsITEsaSlbMF07Y29uc3Qgcj12b2lkIDA9PT1vLmluc2VydEJlZm9yZT8hby5pc1N0cm9uZzpvLmluc2VydEJlZm9yZSxhPW5ldyBlLmNvbnN0cnVjdG9yKG4uc3RhcnQsbi5lbmQub2Zmc2V0LW4uc3RhcnQub2Zmc2V0LGUudGFyZ2V0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24odC5wb3NpdGlvbix0Lm5vZGVzLm1heE9mZnNldCxyKSxlLmJhc2VWZXJzaW9uKTtyZXR1cm4gYS5pc1N0aWNreT1lLmlzU3RpY2t5LFthXX0sQXR0cmlidXRlT3BlcmF0aW9uOkNvLFJvb3RBdHRyaWJ1dGVPcGVyYXRpb246Q28sUmVuYW1lT3BlcmF0aW9uOkNvLE1hcmtlck9wZXJhdGlvbjpDbyxNb3ZlT3BlcmF0aW9uKGUsdCxvKXtjb25zdCBuPUd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KGUuc291cmNlUG9zaXRpb24sZS5ob3dNYW55KSxpPUd1LmNyZWF0ZUZyb21Qb3NpdGlvbkFuZFNoaWZ0KHQuc291cmNlUG9zaXRpb24sdC5ob3dNYW55KTtsZXQgcj1vLmlzU3Ryb25nO2NvbnN0IGE9ZS5pc1N0aWNreSYmIW8uZm9yY2VOb3RTdGlja3kscz12b2lkIDA9PT1vLmluc2VydEJlZm9yZT8hcjpvLmluc2VydEJlZm9yZSxsPWUudGFyZ2V0UG9zaXRpb24uX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQuc291cmNlUG9zaXRpb24sdC50YXJnZXRQb3NpdGlvbix0Lmhvd01hbnkscyx0LmlzU3RpY2t5JiYhby5mb3JjZU5vdFN0aWNreSk7aWYoVG8oZSx0KSYmVG8odCxlKSlyZXR1cm5bdC5nZXRSZXZlcnNlZCgpXTtjb25zdCBkPW4uY29udGFpbnNQb3NpdGlvbih0LnRhcmdldFBvc2l0aW9uKXx8bi5zdGFydC5pc0VxdWFsKHQudGFyZ2V0UG9zaXRpb24pJiZhfHxuLmVuZC5pc0VxdWFsKHQudGFyZ2V0UG9zaXRpb24pJiZhO2lmKGQmJm4uY29udGFpbnNSYW5nZShpLCEwKSlyZXR1cm4gbi5zdGFydD1uLnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5TW92ZSh0LnNvdXJjZVBvc2l0aW9uLHQudGFyZ2V0UG9zaXRpb24sdC5ob3dNYW55LCFhKSxuLmVuZD1uLmVuZC5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodC5zb3VyY2VQb3NpdGlvbix0LnRhcmdldFBvc2l0aW9uLHQuaG93TWFueSxhKSxFbyhbbl0sbCxlKTtjb25zdCBjPWkuY29udGFpbnNQb3NpdGlvbihlLnRhcmdldFBvc2l0aW9uKXx8aS5zdGFydC5pc0VxdWFsKGUudGFyZ2V0UG9zaXRpb24pJiZ0LmlzU3RpY2t5JiYhby5mb3JjZU5vdFN0aWNreXx8aS5lbmQuaXNFcXVhbChlLnRhcmdldFBvc2l0aW9uKSYmdC5pc1N0aWNreSYmIW8uZm9yY2VOb3RTdGlja3k7aWYoYyYmaS5jb250YWluc1JhbmdlKG4sITApKXJldHVybiBuLnN0YXJ0PW4uc3RhcnQuX2dldENvbWJpbmVkKHQuc291cmNlUG9zaXRpb24sdC5nZXRNb3ZlZFJhbmdlU3RhcnQoKSksbi5lbmQ9bi5lbmQuX2dldENvbWJpbmVkKHQuc291cmNlUG9zaXRpb24sdC5nZXRNb3ZlZFJhbmdlU3RhcnQoKSksRW8oW25dLGwsZSk7Y29uc3QgdT1BKGUuc291cmNlUG9zaXRpb24uZ2V0UGFyZW50UGF0aCgpLHQuc291cmNlUG9zaXRpb24uZ2V0UGFyZW50UGF0aCgpKTtpZigncHJlZml4Jz09dXx8J2V4dGVuc2lvbic9PXUpcmV0dXJuIG4uc3RhcnQ9bi5zdGFydC5fZ2V0VHJhbnNmb3JtZWRCeU1vdmUodC5zb3VyY2VQb3NpdGlvbix0LnRhcmdldFBvc2l0aW9uLHQuaG93TWFueSwhYSksbi5lbmQ9bi5lbmQuX2dldFRyYW5zZm9ybWVkQnlNb3ZlKHQuc291cmNlUG9zaXRpb24sdC50YXJnZXRQb3NpdGlvbix0Lmhvd01hbnksYSksRW8oW25dLGwsZSk7by5mb3JjZVdlYWtSZW1vdmV8fChlIGluc3RhbmNlb2Ygd20mJiEodCBpbnN0YW5jZW9mIHdtKT9yPSEwOiEoZSBpbnN0YW5jZW9mIHdtKSYmdCBpbnN0YW5jZW9mIHdtJiYocj0hMSkpO2NvbnN0IG09W10scD1uLmdldERpZmZlcmVuY2UoaSk7Zm9yKGNvbnN0IG4gb2YgcCl7bi5zdGFydD1uLnN0YXJ0Ll9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnkpLG4uZW5kPW4uZW5kLl9nZXRUcmFuc2Zvcm1lZEJ5RGVsZXRpb24odC5zb3VyY2VQb3NpdGlvbix0Lmhvd01hbnkpO2NvbnN0IGU9J3NhbWUnPT1BKG4uc3RhcnQuZ2V0UGFyZW50UGF0aCgpLHQuZ2V0TW92ZWRSYW5nZVN0YXJ0KCkuZ2V0UGFyZW50UGF0aCgpKSxvPW4uX2dldFRyYW5zZm9ybWVkQnlJbnNlcnRpb24odC5nZXRNb3ZlZFJhbmdlU3RhcnQoKSx0Lmhvd01hbnksZSxhKTttLnB1c2goLi4ubyl9Y29uc3QgZz1uLmdldEludGVyc2VjdGlvbihpKTtyZXR1cm4gbnVsbCE9PWcmJnImJiFkJiYoZy5zdGFydD1nLnN0YXJ0Ll9nZXRDb21iaW5lZCh0LnNvdXJjZVBvc2l0aW9uLHQuZ2V0TW92ZWRSYW5nZVN0YXJ0KCkpLGcuZW5kPWcuZW5kLl9nZXRDb21iaW5lZCh0LnNvdXJjZVBvc2l0aW9uLHQuZ2V0TW92ZWRSYW5nZVN0YXJ0KCkpLDA9PT1tLmxlbmd0aD9tLnB1c2goZyk6MT09bS5sZW5ndGg/aS5zdGFydC5pc0JlZm9yZShuLnN0YXJ0KXx8aS5zdGFydC5pc0VxdWFsKG4uc3RhcnQpP20udW5zaGlmdChnKTptLnB1c2goZyk6bS5zcGxpY2UoMSwwLGcpKSwwPT09bS5sZW5ndGg/W25ldyB4bShlLmJhc2VWZXJzaW9uKV06RW8obSxsLGUpfX19O3ZhciBvdD1mdW5jdGlvbihlLHQsbyl7dmFyIG49LTEsaT1lLmxlbmd0aDswPnQmJih0PS10Pmk/MDppK3QpLG89bz5pP2k6bywwPm8mJihvKz1pKSxpPXQ+bz8wOm8tdD4+PjAsdD4+Pj0wO2Zvcih2YXIgcj1BcnJheShpKTsrK248aTspcltuXT1lW24rdF07cmV0dXJuIHJ9LFdtPU1hdGguY2VpbCxVbT1mdW5jdGlvbihlKXtyZXR1cm4gZGwoZSl8fHNsKGUpfSxIbT1PbyxLbT1mdW5jdGlvbihlLHQsbyl7Zm9yKHZhciBuPWUubGVuZ3RoLGk9dCsobz8wOi0xKTtvP2ktLTorK2k8bjspe3ZhciByPWVbaV07aWYociE9PXIpcmV0dXJuIGl9cmV0dXJuLTF9LEdtPWZ1bmN0aW9uKGUsdCxvKXtpZih0IT09dClyZXR1cm4gS20oZSxvKTtmb3IodmFyIG49by0xLGk9ZS5sZW5ndGg7KytuPGk7KWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfSwkbT1mdW5jdGlvbihlLHQpe3JldHVybiEhZS5sZW5ndGgmJi0xPEdtKGUsdCwwKX0sSm09ZnVuY3Rpb24oZSx0LG8pe2Zvcih2YXIgbj0tMSxpPWUubGVuZ3RoOysrbjxpOylpZihvKHQsZVtuXSkpcmV0dXJuITA7cmV0dXJuITF9LFFtPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvPS0xLG49ZS5sZW5ndGgsaT1BcnJheShuKTsrK288bjspaVtvXT10KGVbb10sbyxlKTtyZXR1cm4gaX0sWW09ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlKHQpfX0sWG09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5oYXModCl9LFptPWZ1bmN0aW9uKGUsdCxvLG4pe3ZhciBpPS0xLHI9JG0sYT0hMCxzPWUubGVuZ3RoLGw9W10sZD10Lmxlbmd0aDtpZighcylyZXR1cm4gbDtvJiYodD1RbSh0LFltKG8pKSksbj8ocj1KbSxhPSExKTp0Lmxlbmd0aD49MjAwJiYocj1YbSxhPSExLHQ9bmV3IGV1KHQpKTtvdXRlcjpmb3IoOysraTxzOyl7dmFyIGM9ZVtpXSx1PW8/byhjKTpjO2lmKGM9bnx8MCE9PWM/YzowLGEmJnU9PT11KXtmb3IodmFyIG09ZDttLS07KWlmKHRbbV09PT11KWNvbnRpbnVlIG91dGVyO2wucHVzaChjKX1lbHNlIHIodCx1LG4pfHxsLnB1c2goYyl9cmV0dXJuIGx9LGVwPVlkKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG9sKGUpP1ptKGUsSG0odCwxLG9sLCEwKSk6W119KSx0cD0xLG9wPTIsbnA9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1lJiYhcHMoZSl9LGlwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFFtKHQsZnVuY3Rpb24odCl7cmV0dXJuW3QsZVt0XV19KX0scnA9ZnVuY3Rpb24oZSl7dmFyIHQ9LTEsbz1BcnJheShlLnNpemUpO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7b1srK3RdPVtlLGVdfSksb30sYXA9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBvPSRsKHQpO3JldHVybiBvPT0nW29iamVjdCBNYXBdJz9pZCh0KTpvPT0nW29iamVjdCBTZXRdJz9ycCh0KTppcCh0LGUodCkpfX0oa2wpLHNwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1hcChlKSxvPXQubGVuZ3RoO28tLTspdFtvXVsyXT1ucCh0W29dWzFdKTtyZXR1cm4gdH0sbHA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24obyl7cmV0dXJuIG51bGwhPW8mJm9bZV09PT10JiYodCE9PXZvaWQgMHx8ZSBpbiBPYmplY3QobykpfX0sZHA9ZnVuY3Rpb24oZSl7dmFyIHQ9c3AoZSk7cmV0dXJuIDE9PXQubGVuZ3RoJiZ0WzBdWzJdP2xwKHRbMF1bMF0sdFswXVsxXSk6ZnVuY3Rpb24obyl7cmV0dXJuIG89PT1lfHxSbyhvLGUsdCl9fSxjcD0nRXhwZWN0ZWQgYSBmdW5jdGlvbic7SW8uQ2FjaGU9THM7dmFyIHVwPW1kP21kLnByb3RvdHlwZTp2b2lkIDAsbXA9dXA/dXAudG9TdHJpbmc6dm9pZCAwLHBwPWZ1bmN0aW9uKGUpe2lmKCdzdHJpbmcnPT10eXBlb2YgZSlyZXR1cm4gZTtpZihMZChlKSlyZXR1cm4gbXA/bXAuY2FsbChlKTonJzt2YXIgdD1lKycnO3JldHVybicwJz09dCYmMS9lPT0tKDEvMCk/Jy0wJzp0fSxncD1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8nJzpwcChlKX0sZnA9L1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF0vZyxocD0vXFxcXChcXFxcKT8vZyxicD1JbyhmdW5jdGlvbihlKXt2YXIgdD1bXTtyZXR1cm4gZ3AoZSkucmVwbGFjZShmcCxmdW5jdGlvbihlLG8sbixpKXt0LnB1c2gobj9pLnJlcGxhY2UoaHAsJyQxJyk6b3x8ZSl9KSx0fSksa3A9ZnVuY3Rpb24oZSl7cmV0dXJuIGRsKGUpP2U6YnAoZSl9LF9wPS9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sd3A9L15cXHcqJC8sdnA9Vm8seXA9ZnVuY3Rpb24oZSl7aWYoJ3N0cmluZyc9PXR5cGVvZiBlfHxMZChlKSlyZXR1cm4gZTt2YXIgdD1lKycnO3JldHVybicwJz09dCYmMS9lPT0tKDEvMCk/Jy0wJzp0fSx4cD1mdW5jdGlvbihlLHQpe3Q9dnAodCxlKT9bdF06a3AodCk7Zm9yKHZhciBvPTAsbj10Lmxlbmd0aDtudWxsIT1lJiZvPG47KWU9ZVt5cCh0W28rK10pXTtyZXR1cm4gbyYmbz09bj9lOnZvaWQgMH0sQ3A9ZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW51bGw9PWU/dm9pZCAwOnhwKGUsdCk7cmV0dXJuIG49PT12b2lkIDA/bzpufSxBcD1mdW5jdGlvbihlLHQsbyl7dD12cCh0LGUpP1t0XTprcCh0KTtmb3IodmFyIG49LTEsaT10Lmxlbmd0aCxyOysrbjxpOyl7dmFyIGE9eXAodFtuXSk7aWYoIShyPW51bGwhPWUmJm8oZSxhKSkpYnJlYWs7ZT1lW2FdfWlmKHIpcmV0dXJuIHI7dmFyIGk9ZT9lLmxlbmd0aDowO3JldHVybiEhaSYmZWwoaSkmJmZsKGEsaSkmJihkbChlKXx8bWwoZSl8fHNsKGUpKX0sVHA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9ZSYmQXAoZSx0LEZvKX0sUHA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdnAoZSkmJm5wKHQpP2xwKHlwKGUpLHQpOmZ1bmN0aW9uKG8pe3ZhciBuPUNwKG8sZSk7cmV0dXJuIG49PT12b2lkIDAmJm49PT10P1RwKG8sZSk6YnUodCxuLHZvaWQgMCwxfDIpfX0sRXA9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LFNwPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4geHAodCxlKX19LE9wPWZ1bmN0aW9uKGUpe3JldHVybiB2cChlKT9Ycyh5cChlKSk6U3AoZSl9LFJwPWZ1bmN0aW9uKGUpe3JldHVybidmdW5jdGlvbic9PXR5cGVvZiBlP2U6bnVsbD09ZT9FcDonb2JqZWN0Jz09dHlwZW9mIGU/ZGwoZSk/UHAoZVswXSxlWzFdKTpkcChlKTpPcChlKX0sSXA9WWQoZnVuY3Rpb24oZSx0KXt2YXIgbz1IdSh0KTtyZXR1cm4gb2wobykmJihvPXZvaWQgMCksb2woZSk/Wm0oZSxIbSh0LDEsb2wsITApLFJwKG8pKTpbXX0pLFZwPVlkKGZ1bmN0aW9uKGUsdCl7dmFyIG89SHUodCk7cmV0dXJuIG9sKG8pJiYobz12b2lkIDApLG9sKGUpP1ptKGUsSG0odCwxLG9sLCEwKSx2b2lkIDAsbyk6W119KSxGcD1mdW5jdGlvbihlLHQsbyl7dmFyIG49ZT9lLmxlbmd0aDowO3JldHVybiBuPyh0PW98fHZvaWQgMD09PXQ/MTpKZCh0KSxvdChlLDA+dD8wOnQsbikpOltdfSxOcD1mdW5jdGlvbihlLHQsbyl7dmFyIG49ZT9lLmxlbmd0aDowO3JldHVybiBuPyh0PW98fHZvaWQgMD09PXQ/MTpKZCh0KSx0PW4tdCxvdChlLDAsMD50PzA6dCkpOltdfSxNcD1mdW5jdGlvbihlLHQsbyxuKXtmb3IodmFyIGk9ZS5sZW5ndGgscj1uP2k6LTE7KG4/ci0tOisrcjxpKSYmdChlW3JdLHIsZSk7KTtyZXR1cm4gbz9vdChlLG4/MDpyLG4/cisxOmkpOm90KGUsbj9yKzE6MCxuP2k6cil9LERwPWZ1bmN0aW9uKGUsdCxvKXtyZXR1cm4gZT09PWUmJih2b2lkIDAhPT1vJiYoZT1lPD1vP2U6byksdm9pZCAwIT09dCYmKGU9ZT49dD9lOnQpKSxlfSxCcD1mdW5jdGlvbihlKXtyZXR1cm4gZT9EcChKZChlKSwwLDQyOTQ5NjcyOTUpOjB9LExwPWZ1bmN0aW9uKGUsdCxvLG4pe3ZhciBpPWUubGVuZ3RoO2ZvcihvPUpkKG8pLDA+byYmKG89LW8+aT8wOmkrbyksbj12b2lkIDA9PT1ufHxuPmk/aTpKZChuKSwwPm4mJihuKz1pKSxuPW8+bj8wOkJwKG4pO288bjspZVtvKytdPXQ7cmV0dXJuIGV9LHpwPWZ1bmN0aW9uKGUsdCxvKXtmb3IodmFyIG49ZS5sZW5ndGgsaT1vP246LTE7bz9pLS06KytpPG47KWlmKHQoZVtpXSxpLGUpKXJldHVybiBpO3JldHVybi0xfSxqcD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5sZW5ndGg/ZVswXTp2b2lkIDB9LHFwPWZ1bmN0aW9uKGUsdCxvKXtmb3IodmFyIG49bz9KbTokbSxpPWVbMF0ubGVuZ3RoLHI9ZS5sZW5ndGgsYT1yLHM9QXJyYXkociksbD1JbmZpbml0eSxkPVtdO2EtLTspe3ZhciBjPWVbYV07YSYmdCYmKGM9UW0oYyxZbSh0KSkpLGw9TGEoYy5sZW5ndGgsbCksc1thXT0hbyYmKHR8fDEyMDw9aSYmMTIwPD1jLmxlbmd0aCk/bmV3IGV1KGEmJmMpOnZvaWQgMH1jPWVbMF07dmFyIHU9LTEsbT1zWzBdO291dGVyOmZvcig7Kyt1PGkmJmQubGVuZ3RoPGw7KXt2YXIgcD1jW3VdLGc9dD90KHApOnA7aWYocD1vfHwwIT09cD9wOjAsbT8hWG0obSxnKTohbihkLGcsbykpe2ZvcihhPXI7LS1hOyl7dmFyIGY9c1thXTtpZihmPyFYbShmLGcpOiFuKGVbYV0sZyxvKSljb250aW51ZSBvdXRlcn1tJiZtLnB1c2goZyksZC5wdXNoKHApfX1yZXR1cm4gZH0sV3A9ZnVuY3Rpb24oZSl7cmV0dXJuIG9sKGUpP2U6W119LFVwPVlkKGZ1bmN0aW9uKGUpe3ZhciB0PVFtKGUsV3ApO3JldHVybiB0Lmxlbmd0aCYmdFswXT09PWVbMF0/cXAodCk6W119KSxIcD1ZZChmdW5jdGlvbihlKXt2YXIgdD1IdShlKSxvPVFtKGUsV3ApO3JldHVybiB0PT09SHUobyk/dD12b2lkIDA6by5wb3AoKSxvLmxlbmd0aCYmb1swXT09PWVbMF0/cXAobyxScCh0KSk6W119KSxLcD1ZZChmdW5jdGlvbihlKXt2YXIgdD1IdShlKSxvPVFtKGUsV3ApO3JldHVybiB0PT09SHUobyk/dD12b2lkIDA6by5wb3AoKSxvLmxlbmd0aCYmb1swXT09PWVbMF0/cXAobyx2b2lkIDAsdCk6W119KSxHcD1BcnJheS5wcm90b3R5cGUsJHA9R3Auam9pbixKcD1mdW5jdGlvbihlLHQpe3ZhciBvPWUubGVuZ3RoO2lmKG8pcmV0dXJuIHQrPTA+dD9vOjAsZmwodCxvKT9lW3RdOnZvaWQgMH0sUXA9ZnVuY3Rpb24oZSx0LG8sbil7Zm9yKHZhciBpPW8tMSxyPWUubGVuZ3RoOysraTxyOylpZihuKGVbaV0sdCkpcmV0dXJuIGk7cmV0dXJuLTF9LFlwPUFycmF5LnByb3RvdHlwZSxYcD1ZcC5zcGxpY2UsWnA9ZnVuY3Rpb24oZSx0LG8sbil7dmFyIGk9bj9RcDpHbSxyPS0xLGE9dC5sZW5ndGgscz1lO2ZvcihvJiYocz1RbShlLFltKG8pKSk7KytyPGE7KWZvcih2YXIgbD0wLGQ9dFtyXSxjPW8/byhkKTpkOy0xPChsPWkocyxjLGwsbikpOylzIT09ZSYmWHAuY2FsbChzLGwsMSksWHAuY2FsbChlLGwsMSk7cmV0dXJuIGV9LGVnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUubGVuZ3RoJiZ0JiZ0Lmxlbmd0aD9acChlLHQpOmV9LHRnPVlkKGVnKSxvZz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbz0tMSxuPXQubGVuZ3RoLGk9QXJyYXkobik7KytvPG47KWlbb109bnVsbD09ZT92b2lkIDA6Q3AoZSx0W29dKTtyZXR1cm4gaX0sbmc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMT09dC5sZW5ndGg/ZTp4cChlLG90KHQsMCwtMSkpfSxpZz1BcnJheS5wcm90b3R5cGUscmc9aWcuc3BsaWNlLGFnPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvPWU/dC5sZW5ndGg6MCxuPW8tMTtvLS07KXt2YXIgaT10W29dO2lmKG89PW58fGkhPT1yKXt2YXIgcj1pO2lmKGZsKGkpKXJnLmNhbGwoZSxpLDEpO2Vsc2UgaWYoIXZwKGksZSkpe3ZhciBhPWtwKGkpLHM9bmcoZSxhKTtudWxsIT1zJiZkZWxldGUgc1t5cChIdShhKSldfWVsc2UgZGVsZXRlIGVbeXAoaSldfX1yZXR1cm4gZX0sc2c9ZnVuY3Rpb24oZSx0KXtpZihlIT09dCl7dmFyIG89ZSE9PXZvaWQgMCxuPW51bGw9PT1lLGk9ZT09PWUscj1MZChlKSxhPXQhPT12b2lkIDAscz1udWxsPT09dCxsPXQ9PT10LGQ9TGQodCk7aWYoIXMmJiFkJiYhciYmZT50fHxyJiZhJiZsJiYhcyYmIWR8fG4mJmEmJmx8fCFvJiZsfHwhaSlyZXR1cm4gMTtpZighbiYmIXImJiFkJiZlPHR8fGQmJm8mJmkmJiFuJiYhcnx8cyYmbyYmaXx8IWEmJml8fCFsKXJldHVybi0xfXJldHVybiAwfSxsZz1ZZChmdW5jdGlvbihlLHQpe3Q9SG0odCwxKTt2YXIgbz1lP2UubGVuZ3RoOjAsbj1vZyhlLHQpO3JldHVybiBhZyhlLFFtKHQsZnVuY3Rpb24oZSl7cmV0dXJuIGZsKGUsbyk/K2U6ZX0pLnNvcnQoc2cpKSxufSksZGc9QXJyYXkucHJvdG90eXBlLGNnPWRnLnJldmVyc2UsdWc9ZnVuY3Rpb24oZSx0LG8sbil7dD1vKHQpO2Zvcih2YXIgaT0wLHI9ZT9lLmxlbmd0aDowLGE9dCE9PXQscz1udWxsPT09dCxsPUxkKHQpLGQ9dm9pZCAwPT09dDtpPHI7KXt2YXIgYz16YSgoaStyKS8yKSx1PW8oZVtjXSksbT11IT09dm9pZCAwLHA9bnVsbD09PXUsZz11PT09dSxmPUxkKHUpO2lmKGEpdmFyIGg9bnx8ZztlbHNlIGg9ZD9nJiYobnx8bSk6cz9nJiZtJiYobnx8IXApOmw/ZyYmbSYmIXAmJihufHwhZik6IShwfHxmKSYmKG4/dTw9dDp1PHQpO2g/aT1jKzE6cj1jfXJldHVybiBMYShyLDQyOTQ5NjcyOTUtMSl9LG1nPWZ1bmN0aW9uKGUsdCxvKXt2YXIgbj0wLGk9ZT9lLmxlbmd0aDpuO2lmKCdudW1iZXInPT10eXBlb2YgdCYmdD09PXQmJmk8PTQyOTQ5NjcyOTU+Pj4xKXtmb3IoO248aTspe3ZhciByPW4raT4+PjEsYT1lW3JdO251bGwhPT1hJiYhTGQoYSkmJihvP2E8PXQ6YTx0KT9uPXIrMTppPXJ9cmV0dXJuIGl9cmV0dXJuIHVnKGUsdCxFcCxvKX0scGc9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG89LTEsbj1lLmxlbmd0aCxpPTAscj1bXTsrK288bjspe3ZhciBhPWVbb10scz10P3QoYSk6YTtpZighb3x8IWxzKHMsbCkpe3ZhciBsPXM7cltpKytdPTA9PT1hPzA6YX19cmV0dXJuIHJ9LGdnPVZsJiYxL2RkKG5ldyBWbChbLC0wXSkpWzFdPT0xLzA/ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBWbChlKX06ZnVuY3Rpb24oKXt9LGZnPWZ1bmN0aW9uKGUsdCxvKXt2YXIgbj0tMSxpPSRtLHI9ZS5sZW5ndGgsYT0hMCxzPVtdLGw9cztpZihvKWE9ITEsaT1KbTtlbHNlIGlmKHI+PTIwMCl7dmFyIGQ9dD9udWxsOmdnKGUpO2lmKGQpcmV0dXJuIGRkKGQpO2E9ITEsaT1YbSxsPW5ldyBldX1lbHNlIGw9dD9bXTpzO291dGVyOmZvcig7KytuPHI7KXt2YXIgYz1lW25dLHU9dD90KGMpOmM7aWYoYz1vfHwwIT09Yz9jOjAsYSYmdT09PXUpe2Zvcih2YXIgbT1sLmxlbmd0aDttLS07KWlmKGxbbV09PT11KWNvbnRpbnVlIG91dGVyO3QmJmwucHVzaCh1KSxzLnB1c2goYyl9ZWxzZSBpKGwsdSxvKXx8KGwhPT1zJiZsLnB1c2godSkscy5wdXNoKGMpKX1yZXR1cm4gc30saGc9WWQoZnVuY3Rpb24oZSl7cmV0dXJuIGZnKEhtKGUsMSxvbCwhMCkpfSksYmc9WWQoZnVuY3Rpb24oZSl7dmFyIHQ9SHUoZSk7cmV0dXJuIG9sKHQpJiYodD12b2lkIDApLGZnKEhtKGUsMSxvbCwhMCksUnAodCkpfSksa2c9WWQoZnVuY3Rpb24oZSl7dmFyIHQ9SHUoZSk7cmV0dXJuIG9sKHQpJiYodD12b2lkIDApLGZnKEhtKGUsMSxvbCwhMCksdm9pZCAwLHQpfSksX2c9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG89LTEsbj1lLmxlbmd0aCxpPTAscj1bXTsrK288bjspe3ZhciBhPWVbb107dChhLG8sZSkmJihyW2krK109YSl9cmV0dXJuIHJ9LHdnPWZ1bmN0aW9uKGUpe2lmKCEoZSYmZS5sZW5ndGgpKXJldHVybltdO3ZhciB0PTA7cmV0dXJuIGU9X2coZSxmdW5jdGlvbihlKXtpZihvbChlKSlyZXR1cm4gdD1CYShlLmxlbmd0aCx0KSwhMH0pLFlzKHQsZnVuY3Rpb24odCl7cmV0dXJuIFFtKGUsWHModCkpfSl9LHZnPWZ1bmN0aW9uKGUsdCl7aWYoIShlJiZlLmxlbmd0aCkpcmV0dXJuW107dmFyIG89d2coZSk7cmV0dXJuIG51bGw9PXQ/bzpRbShvLGZ1bmN0aW9uKGUpe3JldHVybiBNZCh0LHZvaWQgMCxlKX0pfSx5Zz1ZZChmdW5jdGlvbihlLHQpe3JldHVybiBvbChlKT9abShlLHQpOltdfSkseGc9ZnVuY3Rpb24oZSx0LG8pe2Zvcih2YXIgbj0tMSxpPWUubGVuZ3RoOysrbjxpOyl2YXIgcj1yP0FsKFptKHIsZVtuXSx0LG8pLFptKGVbbl0scix0LG8pKTplW25dO3JldHVybiByJiZyLmxlbmd0aD9mZyhyLHQsbyk6W119LENnPVlkKGZ1bmN0aW9uKGUpe3JldHVybiB4ZyhfZyhlLG9sKSl9KSxBZz1ZZChmdW5jdGlvbihlKXt2YXIgdD1IdShlKTtyZXR1cm4gb2wodCkmJih0PXZvaWQgMCkseGcoX2coZSxvbCksUnAodCkpfSksVGc9WWQoZnVuY3Rpb24oZSl7dmFyIHQ9SHUoZSk7cmV0dXJuIG9sKHQpJiYodD12b2lkIDApLHhnKF9nKGUsb2wpLHZvaWQgMCx0KX0pLFBnPVlkKHdnKSxFZz1mdW5jdGlvbihlLHQsbyl7Zm9yKHZhciBuPS0xLGk9ZS5sZW5ndGgscj10Lmxlbmd0aCxhPXt9OysrbjxpOyl7dmFyIHM9bjxyP3Rbbl06dm9pZCAwO28oYSxlW25dLHMpfXJldHVybiBhfSxTZz1mdW5jdGlvbihlLHQsbyxuKXt0PXZwKHQsZSk/W3RdOmtwKHQpO2Zvcih2YXIgaT0tMSxyPXQubGVuZ3RoLGE9ZTtudWxsIT1hJiYrK2k8cjspe3ZhciBzPXlwKHRbaV0pO2lmKHBzKGEpKXt2YXIgbD1vO2lmKGkhPXItMSl7dmFyIGQ9YVtzXTtsPW4/bihkLHMsYSk6dm9pZCAwLGw9PT12b2lkIDAmJihsPW51bGw9PWQ/ZmwodFtpKzFdKT9bXTp7fTpkKX1VcyhhLHMsbCl9YT1hW3NdfXJldHVybiBlfSxPZz1ZZChmdW5jdGlvbihlKXt2YXIgdD1lLmxlbmd0aCxvPTE8dD9lW3QtMV06dm9pZCAwO3JldHVybiBvPSdmdW5jdGlvbic9PXR5cGVvZiBvPyhlLnBvcCgpLG8pOnZvaWQgMCx2ZyhlLG8pfSksUmc9e2NodW5rOmZ1bmN0aW9uKGUsdCxvKXt0PShvP05kKGUsdCxvKTp2b2lkIDA9PT10KT8xOkJhKEpkKHQpLDApO3ZhciBuPWU/ZS5sZW5ndGg6MDtpZighbnx8MT50KXJldHVybltdO2Zvcih2YXIgaT0wLHI9MCxhPUFycmF5KFdtKG4vdCkpO2k8bjspYVtyKytdPW90KGUsaSxpKz10KTtyZXR1cm4gYX0sY29tcGFjdDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9LTEsbz1lP2UubGVuZ3RoOjAsbj0wLGk9W107Kyt0PG87KXt2YXIgcj1lW3RdO3ImJihpW24rK109cil9cmV0dXJuIGl9LGNvbmNhdDpmdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLHQ9QXJyYXkoZT9lLTE6MCksbz1hcmd1bWVudHNbMF0sbj1lO24tLTspdFtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gZT9BbChkbChvKT92bChvKTpbb10sSG0odCwxKSk6W119LGRpZmZlcmVuY2U6ZXAsZGlmZmVyZW5jZUJ5OklwLGRpZmZlcmVuY2VXaXRoOlZwLGRyb3A6RnAsZHJvcFJpZ2h0Ok5wLGRyb3BSaWdodFdoaWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUubGVuZ3RoP01wKGUsUnAodCwzKSwhMCwhMCk6W119LGRyb3BXaGlsZTpmdW5jdGlvbihlLHQpe3JldHVybiBlJiZlLmxlbmd0aD9NcChlLFJwKHQsMyksITApOltdfSxmaWxsOmZ1bmN0aW9uKGUsdCxvLG4pe3ZhciBpPWU/ZS5sZW5ndGg6MDtyZXR1cm4gaT8obyYmJ251bWJlcichPXR5cGVvZiBvJiZOZChlLHQsbykmJihvPTAsbj1pKSxMcChlLHQsbyxuKSk6W119LGZpbmRJbmRleDpmdW5jdGlvbihlLHQpe3JldHVybiBlJiZlLmxlbmd0aD96cChlLFJwKHQsMykpOi0xfSxmaW5kTGFzdEluZGV4OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUubGVuZ3RoP3pwKGUsUnAodCwzKSwhMCk6LTF9LGZpcnN0OmpwLGZsYXR0ZW46ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9lLmxlbmd0aDowO3JldHVybiB0P0htKGUsMSk6W119LGZsYXR0ZW5EZWVwOmZ1bmN0aW9uKGUpe3ZhciB0PWU/ZS5sZW5ndGg6MDtyZXR1cm4gdD9IbShlLDEvMCk6W119LGZsYXR0ZW5EZXB0aDpmdW5jdGlvbihlLHQpe3ZhciBvPWU/ZS5sZW5ndGg6MDtyZXR1cm4gbz8odD12b2lkIDA9PT10PzE6SmQodCksSG0oZSx0KSk6W119LGZyb21QYWlyczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9LTEsbz1lP2UubGVuZ3RoOjAsbj17fTsrK3Q8bzspe3ZhciBpPWVbdF07bltpWzBdXT1pWzFdfXJldHVybiBufSxoZWFkOmpwLGluZGV4T2Y6ZnVuY3Rpb24oZSx0LG8pe3ZhciBuPWU/ZS5sZW5ndGg6MDtyZXR1cm4gbj8obz1KZChvKSwwPm8mJihvPUJhKG4rbywwKSksR20oZSx0LG8pKTotMX0saW5pdGlhbDpmdW5jdGlvbihlKXtyZXR1cm4gTnAoZSwxKX0saW50ZXJzZWN0aW9uOlVwLGludGVyc2VjdGlvbkJ5OkhwLGludGVyc2VjdGlvbldpdGg6S3Asam9pbjpmdW5jdGlvbihlLHQpe3JldHVybiBlPyRwLmNhbGwoZSx0KTonJ30sbGFzdDpIdSxsYXN0SW5kZXhPZjpmdW5jdGlvbihlLHQsbyl7dmFyIG49ZT9lLmxlbmd0aDowO2lmKCFuKXJldHVybi0xO3ZhciBpPW47aWYodm9pZCAwIT09byYmKGk9SmQobyksaT0oMD5pP0JhKG4raSwwKTpMYShpLG4tMSkpKzEpLHQhPT10KXJldHVybiBLbShlLGksITApO2Zvcig7aS0tOylpZihlW2ldPT09dClyZXR1cm4gaTtyZXR1cm4tMX0sbnRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUubGVuZ3RoP0pwKGUsSmQodCkpOnZvaWQgMH0scHVsbDp0ZyxwdWxsQWxsOmVnLHB1bGxBbGxCeTpmdW5jdGlvbihlLHQsbyl7cmV0dXJuIGUmJmUubGVuZ3RoJiZ0JiZ0Lmxlbmd0aD9acChlLHQsUnAobykpOmV9LHB1bGxBbGxXaXRoOmZ1bmN0aW9uKGUsdCxvKXtyZXR1cm4gZSYmZS5sZW5ndGgmJnQmJnQubGVuZ3RoP1pwKGUsdCx2b2lkIDAsbyk6ZX0scHVsbEF0OmxnLHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBvPVtdO2lmKCEoZSYmZS5sZW5ndGgpKXJldHVybiBvO3ZhciBuPS0xLGk9W10scj1lLmxlbmd0aDtmb3IodD1ScCh0LDMpOysrbjxyOyl7dmFyIGE9ZVtuXTt0KGEsbixlKSYmKG8ucHVzaChhKSxpLnB1c2gobikpfXJldHVybiBhZyhlLGkpLG99LHJldmVyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/Y2cuY2FsbChlKTplfSxzbGljZTpmdW5jdGlvbihlLHQsbyl7dmFyIG49ZT9lLmxlbmd0aDowO3JldHVybiBuPyhvJiYnbnVtYmVyJyE9dHlwZW9mIG8mJk5kKGUsdCxvKT8odD0wLG89bik6KHQ9bnVsbD09dD8wOkpkKHQpLG89dm9pZCAwPT09bz9uOkpkKG8pKSxvdChlLHQsbykpOltdfSxzb3J0ZWRJbmRleDpmdW5jdGlvbihlLHQpe3JldHVybiBtZyhlLHQpfSxzb3J0ZWRJbmRleEJ5OmZ1bmN0aW9uKGUsdCxvKXtyZXR1cm4gdWcoZSx0LFJwKG8pKX0sc29ydGVkSW5kZXhPZjpmdW5jdGlvbihlLHQpe3ZhciBvPWU/ZS5sZW5ndGg6MDtpZihvKXt2YXIgbj1tZyhlLHQpO2lmKG48byYmbHMoZVtuXSx0KSlyZXR1cm4gbn1yZXR1cm4tMX0sc29ydGVkTGFzdEluZGV4OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG1nKGUsdCwhMCl9LHNvcnRlZExhc3RJbmRleEJ5OmZ1bmN0aW9uKGUsdCxvKXtyZXR1cm4gdWcoZSx0LFJwKG8pLCEwKX0sc29ydGVkTGFzdEluZGV4T2Y6ZnVuY3Rpb24oZSx0KXt2YXIgbz1lP2UubGVuZ3RoOjA7aWYobyl7dmFyIG49bWcoZSx0LCEwKS0xO2lmKGxzKGVbbl0sdCkpcmV0dXJuIG59cmV0dXJuLTF9LHNvcnRlZFVuaXE6ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUubGVuZ3RoP3BnKGUpOltdfSxzb3J0ZWRVbmlxQnk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmZS5sZW5ndGg/cGcoZSxScCh0KSk6W119LHRhaWw6ZnVuY3Rpb24oZSl7cmV0dXJuIEZwKGUsMSl9LHRha2U6ZnVuY3Rpb24oZSx0LG8pe3JldHVybiBlJiZlLmxlbmd0aD8odD1vfHx2b2lkIDA9PT10PzE6SmQodCksb3QoZSwwLDA+dD8wOnQpKTpbXX0sdGFrZVJpZ2h0OmZ1bmN0aW9uKGUsdCxvKXt2YXIgbj1lP2UubGVuZ3RoOjA7cmV0dXJuIG4/KHQ9b3x8dm9pZCAwPT09dD8xOkpkKHQpLHQ9bi10LG90KGUsMD50PzA6dCxuKSk6W119LHRha2VSaWdodFdoaWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUubGVuZ3RoP01wKGUsUnAodCwzKSwhMSwhMCk6W119LHRha2VXaGlsZTpmdW5jdGlvbihlLHQpe3JldHVybiBlJiZlLmxlbmd0aD9NcChlLFJwKHQsMykpOltdfSx1bmlvbjpoZyx1bmlvbkJ5OmJnLHVuaW9uV2l0aDprZyx1bmlxOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmxlbmd0aD9mZyhlKTpbXX0sdW5pcUJ5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJmUubGVuZ3RoP2ZnKGUsUnAodCkpOltdfSx1bmlxV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiBlJiZlLmxlbmd0aD9mZyhlLHZvaWQgMCx0KTpbXX0sdW56aXA6d2csdW56aXBXaXRoOnZnLHdpdGhvdXQ6eWcseG9yOkNnLHhvckJ5OkFnLHhvcldpdGg6VGcsemlwOlBnLHppcE9iamVjdDpmdW5jdGlvbihlLHQpe3JldHVybiBFZyhlfHxbXSx0fHxbXSxVcyl9LHppcE9iamVjdERlZXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gRWcoZXx8W10sdHx8W10sU2cpfSx6aXBXaXRoOk9nfTtjb25zdCBJZz1uZXcgTWFwLFZnPXt0cmFuc2Zvcm0oZSx0LG8pe2NvbnN0IG49VmcuZ2V0VHJhbnNmb3JtYXRpb25DYXNlKGUsdCl8fFZnLmRlZmF1bHRUcmFuc2Zvcm0saT1uKGUsdCxPYmplY3QuYXNzaWduKHt9LG8pKSxyPVJnLmxhc3QodC5vcGVyYXRpb25zKS5iYXNlVmVyc2lvbjtyZXR1cm4gTm8ocixpKX0sZGVmYXVsdFRyYW5zZm9ybShlLHQsbyl7Y29uc3Qgbj1bXTtsZXQgaT10Lm9wZXJhdGlvbnMscj1bXTtmb3IoY29uc3QgYSBvZiBlLm9wZXJhdGlvbnMpe2NvbnN0IGU9W2FdO2Zvcihjb25zdCB0IG9mIGkpZm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspe2NvbnN0IGk9ZVtuXSxhPWptKGksdCxvKTtBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KGUsW24sMV0uY29uY2F0KGEpKSxuKz1hLmxlbmd0aC0xO2NvbnN0IHM9T2JqZWN0LmFzc2lnbih7fSxvKTtzLmlzU3Ryb25nPSFvLmlzU3Ryb25nLHMuaW5zZXJ0QmVmb3JlPW8uaW5zZXJ0QmVmb3JlPT09dm9pZCAwP3ZvaWQgMDohby5pbnNlcnRCZWZvcmU7Y29uc3QgbD1qbSh0LGkscyk7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocixsKX1pPXIscj1bXTtmb3IoY29uc3QgdCBvZiBlKW4ucHVzaCh0KX1yZXR1cm4gSG8oZS5jb25zdHJ1Y3RvcixuKX0sYWRkVHJhbnNmb3JtYXRpb25DYXNlKGUsdCxvKXtsZXQgbj1JZy5nZXQoZSk7bnx8KG49bmV3IE1hcCxJZy5zZXQoZSxuKSksbi5zZXQodCxvKX0sZ2V0VHJhbnNmb3JtYXRpb25DYXNlKGUsdCl7bGV0IG89SWcuZ2V0KGUuY29uc3RydWN0b3IpO2lmKCFvfHwhby5nZXQodC5jb25zdHJ1Y3Rvcikpe2NvbnN0IG49SWcua2V5cygpO2Zvcihjb25zdCBpIG9mIG4paWYoZSBpbnN0YW5jZW9mIGkmJklnLmdldChpKS5nZXQodC5jb25zdHJ1Y3Rvcikpe289SWcuZ2V0KGkpO2JyZWFrfX1yZXR1cm4gbz9vLmdldCh0LmNvbnN0cnVjdG9yKTp2b2lkIDB9LHRyYW5zZm9ybURlbHRhU2V0cyhlLHQsbz1udWxsKXtjb25zdCBuPUFycmF5LmZyb20oZSksaT1BcnJheS5mcm9tKHQpLHI9bnVsbCE9PW8sYT17aXNTdHJvbmc6ITB9O2lmKHIpe2Eud2FzQWZmZWN0ZWQ9bmV3IE1hcCxhLm9yaWdpbmFsRGVsdGE9bmV3IE1hcCxhLmRvY3VtZW50PW8sYS51bmRvTW9kZT0hMDtmb3IoY29uc3QgZSBvZiBpKWEub3JpZ2luYWxEZWx0YS5zZXQoZSxlKX1mb3IobGV0IHM9MDtzPG4ubGVuZ3RoO3MrKyl7Y29uc3QgZT1bbltzXV07Zm9yKGxldCB0PTA7dDxpLmxlbmd0aDt0Kyspe2NvbnN0IG89W2lbdF1dO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCsrKWZvcihsZXQgbj0wO248by5sZW5ndGg7bisrKXtyJiZCbyhlW3RdLG9bbl0sYSk7Y29uc3QgaT1WZy50cmFuc2Zvcm0oZVt0XSxvW25dLHtpbnNlcnRCZWZvcmU6YS5pbnNlcnRCZWZvcmUsZm9yY2VOb3RTdGlja3k6YS5mb3JjZU5vdFN0aWNreSxpc1N0cm9uZzphLmlzU3Ryb25nLGZvcmNlV2Vha1JlbW92ZTphLmZvcmNlV2Vha1JlbW92ZSx1bmRvTW9kZTphLnVuZG9Nb2RlfSkscz1WZy50cmFuc2Zvcm0ob1tuXSxlW3RdLHtpbnNlcnRCZWZvcmU6IWEuaW5zZXJ0QmVmb3JlLGZvcmNlTm90U3RpY2t5OmEuZm9yY2VOb3RTdGlja3ksaXNTdHJvbmc6IWEuaXNTdHJvbmcsZm9yY2VXZWFrUmVtb3ZlOmEuZm9yY2VXZWFrUmVtb3ZlLHVuZG9Nb2RlOmEudW5kb01vZGV9KTtpZihyKXtVbyhlW3RdLGksYSk7Y29uc3Qgcj1hLm9yaWdpbmFsRGVsdGEuZ2V0KG9bbl0pO2Zvcihjb25zdCBlIG9mIHMpYS5vcmlnaW5hbERlbHRhLnNldChlLHIpfWUuc3BsaWNlKHQsMSwuLi5pKSx0Kz1pLmxlbmd0aC0xLG8uc3BsaWNlKG4sMSwuLi5zKSxuKz1zLmxlbmd0aC0xfWkuc3BsaWNlKHQsMSwuLi5vKSx0Kz1vLmxlbmd0aC0xfW4uc3BsaWNlKHMsMSwuLi5lKSxzKz1lLmxlbmd0aC0xfWNvbnN0IHM9TW8obiktTW8oZSksbD1NbyhpKS1Nbyh0KTtyZXR1cm4gbDxzP0RvKGkscy1sKTpzPGwmJkRvKG4sbC1zKSx7ZGVsdGFzQTpuLGRlbHRhc0I6aX19fTt2YXIgRmc9Vmc7Y2xhc3MgTmcgZXh0ZW5kcyBPbXtnZXQgdHlwZSgpe3JldHVybidtYXJrZXInfWdldCBfcmV2ZXJzZURlbHRhQ2xhc3MoKXtyZXR1cm4gTmd9c3RhdGljIGdldCBjbGFzc05hbWUoKXtyZXR1cm4nZW5naW5lLm1vZGVsLmRlbHRhLk1hcmtlckRlbHRhJ319U20ucmVnaXN0ZXIoTmcpO2NvbnN0IE1nPUZnLmFkZFRyYW5zZm9ybWF0aW9uQ2FzZSxEZz1GZy5kZWZhdWx0VHJhbnNmb3JtO01nKFJtLHptLChlLHQsbyk9Pntjb25zdCBuPURnKGUsdCxvKTtyZXR1cm4gZS5yYW5nZS5jb250YWluc1Bvc2l0aW9uKHQucG9zaXRpb24pJiZuLnB1c2goR28odCxlKSksbn0pLE1nKFJtLEltLChlLHQsbyk9PntpZighdC5wb3NpdGlvbilyZXR1cm4gRGcoZSx0LG8pO2NvbnN0IG49by51bmRvTW9kZSxpPW5ldyBLdSh0LnBvc2l0aW9uLnJvb3QsdC5wb3NpdGlvbi5wYXRoLnNsaWNlKDAsLTEpKSxyPURnKGUsdCxvKTtpZihufHwhKHQuX2Nsb25lT3BlcmF0aW9uIGluc3RhbmNlb2Ygdm0pKXJldHVybiByO2Zvcihjb25zdCBuIG9mIGUub3BlcmF0aW9ucylpZihuLnJhbmdlLmNvbnRhaW5zUG9zaXRpb24oaSl8fG4ucmFuZ2Uuc3RhcnQuaXNFcXVhbChpKSl7Y29uc3QgZT1uZXcgUm0sbz1pLmdldFNoaWZ0ZWRCeSgxKSxhPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbihvKTthLnBhdGgucHVzaCgwKTtjb25zdCBzPXQuX2Nsb25lT3BlcmF0aW9uLm5vZGVzLmdldE5vZGUoMCkuZ2V0QXR0cmlidXRlKG4ua2V5KTtlLmFkZE9wZXJhdGlvbihuZXcgYm0obmV3IEd1KG8sYSksbi5rZXkscz09PXZvaWQgMD9udWxsOnMsbi5uZXdWYWx1ZSwwKSksci5wdXNoKGUpO2JyZWFrfXJldHVybiByfSksTWcoTG0sVm0sKGUsdCxvKT0+e2lmKCF0LnBvc2l0aW9uKXJldHVybiBEZyhlLHQsbyk7Y29uc3Qgbj1vLnVuZG9Nb2RlO3JldHVybiFuJiZlLnBvc2l0aW9uLmlzRXF1YWwodC5wb3NpdGlvbik/W3QuZ2V0UmV2ZXJzZWQoKSxlLmNsb25lKCldOkRnKGUsdCxvKX0pLE1nKE5nLEltLEtvKSxNZyhOZyxWbSxLbyksTWcoTmcsRG0sS28pLE1nKE5nLEJtLEtvKSxNZyhOZyxGbSxLbyksTWcoTmcsTW0sS28pLE1nKEZtLFZtLChlLHQsbyk9Pntjb25zdCBuPW8udW5kb01vZGU7aWYobnx8IXQucG9zaXRpb24pcmV0dXJuIERnKGUsdCxvKTtjb25zdCBpPWUuc291cmNlUG9zaXRpb24ucm9vdD09dC5wb3NpdGlvbi5yb290JiYnc2FtZSc9PT1BKGUuc291cmNlUG9zaXRpb24uZ2V0UGFyZW50UGF0aCgpLHQucG9zaXRpb24uZ2V0UGFyZW50UGF0aCgpKSxyPWUuc291cmNlUG9zaXRpb24ub2Zmc2V0PD10LnBvc2l0aW9uLm9mZnNldCYmZS5zb3VyY2VQb3NpdGlvbi5vZmZzZXQrZS5ob3dNYW55PnQucG9zaXRpb24ub2Zmc2V0O3JldHVybiBpJiZyP1t0LmdldFJldmVyc2VkKCksZS5jbG9uZSgpXTpEZyhlLHQsbyl9KSxNZyhWbSxMbSwoZSx0LG8pPT57aWYoIWUucG9zaXRpb24pcmV0dXJuIERnKGUsdCxvKTtjb25zdCBuPW8udW5kb01vZGU7cmV0dXJuIW4mJmUucG9zaXRpb24uaXNFcXVhbCh0LnBvc2l0aW9uKT9bJG8oKV06RGcoZSx0LG8pfSksTWcoVm0sRm0sKGUsdCxvKT0+e2NvbnN0IG49by51bmRvTW9kZTtpZihufHwhZS5wb3NpdGlvbilyZXR1cm4gRGcoZSx0LG8pO2NvbnN0IGk9ZS5wb3NpdGlvbi5yb290PT10LnNvdXJjZVBvc2l0aW9uLnJvb3QmJidzYW1lJz09PUEoZS5wb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCksdC5zb3VyY2VQb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCkpLHI9dC5zb3VyY2VQb3NpdGlvbi5vZmZzZXQ8PWUucG9zaXRpb24ub2Zmc2V0JiZ0LnNvdXJjZVBvc2l0aW9uLm9mZnNldCt0Lmhvd01hbnk+ZS5wb3NpdGlvbi5vZmZzZXQ7cmV0dXJuIGkmJnI/WyRvKCldOkRnKGUsdCxvKX0pLE1nKEltLEltLChlLHQsbyk9Pntjb25zdCBuPW8udW5kb01vZGU7aWYobilyZXR1cm4gRGcoZSx0LG8pO2lmKCFlLnBvc2l0aW9ufHwhdC5wb3NpdGlvbilyZXR1cm4gRGcoZSx0LG8pO2NvbnN0IGk9ZS5wb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCkscj10LnBvc2l0aW9uLmdldFBhcmVudFBhdGgoKTtpZihlLnBvc2l0aW9uLnJvb3Q9PXQucG9zaXRpb24ucm9vdCYmJ3NhbWUnPT1BKGkscikpaWYoZT1lLmNsb25lKCksZS5wb3NpdGlvbi5vZmZzZXQ8dC5wb3NpdGlvbi5vZmZzZXR8fGUucG9zaXRpb24ub2Zmc2V0PT10LnBvc2l0aW9uLm9mZnNldCYmby5pc1N0cm9uZyl7ZS5fY2xvbmVPcGVyYXRpb24gaW5zdGFuY2VvZiBfbSYmdC5fY2xvbmVPcGVyYXRpb24gaW5zdGFuY2VvZiBfbSYmZS5fY2xvbmVPcGVyYXRpb24uc291cmNlUG9zaXRpb24ub2Zmc2V0PnQuX2Nsb25lT3BlcmF0aW9uLnNvdXJjZVBvc2l0aW9uLm9mZnNldCYmZS5fY2xvbmVPcGVyYXRpb24uc291cmNlUG9zaXRpb24ub2Zmc2V0LS07Y29uc3Qgbz1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLnBvc2l0aW9uLGUuX21vdmVPcGVyYXRpb24uaG93TWFueSksbj1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdCh0LnBvc2l0aW9uLHQuX21vdmVPcGVyYXRpb24uaG93TWFueSksaT1vLmdldERpZmZlcmVuY2Uobik7bGV0IHI9MDtmb3IoY29uc3QgZSBvZiBpKXIrPWUuZW5kLm9mZnNldC1lLnN0YXJ0Lm9mZnNldDtyZXR1cm4gMD09cj8oZS5vcGVyYXRpb25zLnBvcCgpLGUuYWRkT3BlcmF0aW9uKG5ldyB4bShlLm9wZXJhdGlvbnNbMF0uYmFzZVZlcnNpb24rMSkpKTplLm9wZXJhdGlvbnNbMV0uaG93TWFueT1yLFtlXX1lbHNle2NvbnN0IG49T2JqZWN0LmFzc2lnbih7fSxvKTtyZXR1cm4gbi5pc1N0cm9uZz0hMCxuLmluc2VydEJlZm9yZT0hMCxEZyhlLHQsbil9cmV0dXJuIERnKGUsdCxvKX0pLE1nKEltLEJtLChlLHQsbyk9PmUucG9zaXRpb24/ZS5wb3NpdGlvbi5yb290PT10LnBvc2l0aW9uLnJvb3QmJidzYW1lJz09PUEodC5wb3NpdGlvbi5wYXRoLGUucG9zaXRpb24uZ2V0UGFyZW50UGF0aCgpKT9bJG8oKV06RGcoZSx0LG8pOkRnKGUsdCxvKSksTWcoSW0sRG0sKGUsdCxvKT0+e2lmKCFlLnBvc2l0aW9uKXJldHVybiBEZyhlLHQsbyk7Y29uc3Qgbj1lLnBvc2l0aW9uLnJvb3Q9PXQucmFuZ2Uuc3RhcnQucm9vdCxpPW4mJidzYW1lJz09PUEoZS5wb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCksdC5yYW5nZS5zdGFydC5nZXRQYXJlbnRQYXRoKCkpLHI9dC5yYW5nZS5zdGFydC5vZmZzZXQ8ZS5wb3NpdGlvbi5vZmZzZXQmJnQucmFuZ2UuZW5kLm9mZnNldD49ZS5wb3NpdGlvbi5vZmZzZXQ7aWYoaSYmcilyZXR1cm5bJG8oKV07aWYobiYmJ3NhbWUnPT09QShlLnBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSx0LnJhbmdlLmVuZC5nZXRTaGlmdGVkQnkoLTEpLnBhdGgpKXtjb25zdCBvPWUuY2xvbmUoKSxuPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbih0LnJhbmdlLnN0YXJ0KTtuLnBhdGgucHVzaCh0Lmhvd01hbnktMSk7Y29uc3QgaT1uLmdldFNoaWZ0ZWRCeSgxKTtvLl9jbG9uZU9wZXJhdGlvbi5wb3NpdGlvbj1pO2NvbnN0IHI9S3UuY3JlYXRlRnJvbVBvc2l0aW9uKG4pO3IucGF0aC5wdXNoKGUucG9zaXRpb24ub2Zmc2V0KSxvLl9tb3ZlT3BlcmF0aW9uLnNvdXJjZVBvc2l0aW9uPXI7Y29uc3QgYT1LdS5jcmVhdGVGcm9tUG9zaXRpb24oaSk7cmV0dXJuIGEucGF0aC5wdXNoKDApLG8uX21vdmVPcGVyYXRpb24udGFyZ2V0UG9zaXRpb249YSxbb119cmV0dXJuIERnKGUsdCxvKX0pLE1nKEltLFJtLChlLHQsbyk9PntpZighZS5wb3NpdGlvbilyZXR1cm4gRGcoZSx0LG8pO2U9ZS5jbG9uZSgpO2NvbnN0IG49by51bmRvTW9kZSxpPW5ldyBLdShlLnBvc2l0aW9uLnJvb3QsZS5wb3NpdGlvbi5wYXRoLnNsaWNlKDAsLTEpKTtpZihufHwhKGUuX2Nsb25lT3BlcmF0aW9uIGluc3RhbmNlb2Ygdm0pKXJldHVybltlXTtmb3IoY29uc3QgbiBvZiB0Lm9wZXJhdGlvbnMpaWYobi5yYW5nZS5jb250YWluc1Bvc2l0aW9uKGkpfHxuLnJhbmdlLnN0YXJ0LmlzRXF1YWwoaSkpe251bGw9PT1uLm5ld1ZhbHVlP2UuX2Nsb25lT3BlcmF0aW9uLm5vZGVzLmdldE5vZGUoMCkuX3JlbW92ZUF0dHJpYnV0ZShuLmtleSk6ZS5fY2xvbmVPcGVyYXRpb24ubm9kZXMuZ2V0Tm9kZSgwKS5fc2V0QXR0cmlidXRlKG4ua2V5LG4ubmV3VmFsdWUpO2JyZWFrfXJldHVybltlXX0pLE1nKEJtLEltLChlLHQsbyk9PnQucG9zaXRpb24/ZS5wb3NpdGlvbi5yb290PT10LnBvc2l0aW9uLnJvb3QmJidzYW1lJz09PUEoZS5wb3NpdGlvbi5wYXRoLHQucG9zaXRpb24uZ2V0UGFyZW50UGF0aCgpKT9bdC5nZXRSZXZlcnNlZCgpLGUuY2xvbmUoKV06RGcoZSx0LG8pOkRnKGUsdCxvKSksTWcoem0sUm0sKGUsdCk9Pntjb25zdCBvPVtlLmNsb25lKCldO3JldHVybiB0LnJhbmdlLmNvbnRhaW5zUG9zaXRpb24oZS5wb3NpdGlvbikmJm8ucHVzaChHbyhlLHQpKSxvfSksTWcoRG0sSW0sKGUsdCxvKT0+e2lmKCF0LnBvc2l0aW9uKXJldHVybiBEZyhlLHQsbyk7Y29uc3Qgbj1lLnJhbmdlLnN0YXJ0LnJvb3Q9PXQucG9zaXRpb24ucm9vdCxpPW4mJidzYW1lJz09PUEoZS5yYW5nZS5zdGFydC5nZXRQYXJlbnRQYXRoKCksdC5wb3NpdGlvbi5nZXRQYXJlbnRQYXRoKCkpLHI9ZS5yYW5nZS5zdGFydC5vZmZzZXQ8dC5wb3NpdGlvbi5vZmZzZXQmJmUucmFuZ2UuZW5kLm9mZnNldD49dC5wb3NpdGlvbi5vZmZzZXQ7aWYoaSYmcilyZXR1cm5bdC5nZXRSZXZlcnNlZCgpLGUuY2xvbmUoKV07aWYobiYmJ3NhbWUnPT09QSh0LnBvc2l0aW9uLmdldFBhcmVudFBhdGgoKSxlLnJhbmdlLmVuZC5nZXRTaGlmdGVkQnkoLTEpLnBhdGgpKXtjb25zdCB0PWUuY2xvbmUoKTtyZXR1cm4gdC5faW5zZXJ0T3BlcmF0aW9uLnBvc2l0aW9uLm9mZnNldCsrLHQuX21vdmVPcGVyYXRpb24uaG93TWFueSsrLHQuX21vdmVPcGVyYXRpb24udGFyZ2V0UG9zaXRpb24ucGF0aFt0Ll9tb3ZlT3BlcmF0aW9uLnRhcmdldFBvc2l0aW9uLnBhdGgubGVuZ3RoLTJdKyssW3RdfXJldHVybiBEZyhlLHQsbyl9KSxNZyhNbSxJbSwoZSx0LG8pPT57Y29uc3Qgbj1vLnVuZG9Nb2RlLGk9RGcoZSx0LG8pO2lmKG58fCEodC5fY2xvbmVPcGVyYXRpb24gaW5zdGFuY2VvZiB2bSkpcmV0dXJuIGk7Y29uc3Qgcj10Ll9jbG9uZU9wZXJhdGlvbi5wb3NpdGlvbi5nZXRTaGlmdGVkQnkoLTEpO2lmKHImJmUub3BlcmF0aW9uc1swXS5wb3NpdGlvbi5pc0VxdWFsKHIpKXtjb25zdCB0PWUuY2xvbmUoKTt0Lm9wZXJhdGlvbnNbMF0ucG9zaXRpb249ci5nZXRTaGlmdGVkQnkoMSksaS5wdXNoKHQpfXJldHVybiBpfSksTWcoSW0sTW0sKGUsdCxvKT0+e2U9ZS5jbG9uZSgpO2NvbnN0IG49by51bmRvTW9kZTtpZihufHwhKGUuX2Nsb25lT3BlcmF0aW9uIGluc3RhbmNlb2Ygdm0pKXJldHVybltlXTtjb25zdCBpPWUuX2Nsb25lT3BlcmF0aW9uLnBvc2l0aW9uLmdldFNoaWZ0ZWRCeSgtMSk7aWYoaSYmIW4mJnQub3BlcmF0aW9uc1swXS5wb3NpdGlvbi5pc0VxdWFsKGkpKXtjb25zdCBvPXQuY2xvbmUoKTtyZXR1cm4gby5vcGVyYXRpb25zWzBdLnBvc2l0aW9uPWkuZ2V0U2hpZnRlZEJ5KDEpLG8ub3BlcmF0aW9uc1swXS5vbGROYW1lPWUuX2Nsb25lT3BlcmF0aW9uLm5vZGVzLmdldE5vZGUoMCkubmFtZSxbZSxvXX1yZXR1cm5bZV19KSxNZyhObSxJbSwoZSx0LG8pPT57Y29uc3Qgbj1EZyhlLHQsbyksaT10Ll9jbG9uZU9wZXJhdGlvbi5wb3NpdGlvbnx8dC5fY2xvbmVPcGVyYXRpb24udGFyZ2V0UG9zaXRpb247aWYoIWkpcmV0dXJuIERnKGUsdCxvKTtjb25zdCByPW8udW5kb01vZGU7aWYocilyZXR1cm4gbjtmb3IoY29uc3QgciBvZiBuKWlmKHIgaW5zdGFuY2VvZiBObSl7Y29uc3QgZT1yLl9tb3ZlT3BlcmF0aW9uLHQ9ZS5zb3VyY2VQb3NpdGlvbi5nZXRTaGlmdGVkQnkoZS5ob3dNYW55KTt0LmlzRXF1YWwoaSkmJihlLmhvd01hbnkrPTEpfXJldHVybiBufSksTWcoSW0sTm0sKGUsdCxvKT0+e2NvbnN0IG49by51bmRvTW9kZTtpZihuKXJldHVybiBEZyhlLHQsbyk7Y29uc3QgaT1lLl9jbG9uZU9wZXJhdGlvbi5wb3NpdGlvbnx8ZS5fY2xvbmVPcGVyYXRpb24udGFyZ2V0UG9zaXRpb247aWYoIWkpcmV0dXJuIERnKGUsdCxvKTt0PXQuY2xvbmUoKTtjb25zdCByPXQuX21vdmVPcGVyYXRpb24sYT1yLnNvdXJjZVBvc2l0aW9uLmdldFNoaWZ0ZWRCeShyLmhvd01hbnkpO3JldHVybiBhLmlzRXF1YWwoaSkmJihyLmhvd01hbnkrPTEpLERnKGUsdCxvKX0pO2NsYXNzIEJne2NvbnN0cnVjdG9yKGU9J2RlZmF1bHQnKXt0aGlzLmRlbHRhcz1bXSx0aGlzLnR5cGU9ZX1nZXQgYmFzZVZlcnNpb24oKXtmb3IoY29uc3QgZSBvZiB0aGlzLmRlbHRhcylpZihudWxsIT09ZS5iYXNlVmVyc2lvbilyZXR1cm4gZS5iYXNlVmVyc2lvbjtyZXR1cm4gbnVsbH1hZGREZWx0YShlKXtyZXR1cm4gZS5iYXRjaD10aGlzLHRoaXMuZGVsdGFzLnB1c2goZSksZX0qZ2V0T3BlcmF0aW9ucygpe2Zvcihjb25zdCBlIG9mIHRoaXMuZGVsdGFzKXlpZWxkKmUub3BlcmF0aW9uc319Y2xhc3MgTGcgZXh0ZW5kcyBPbXtzdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwuZGVsdGEuUm9vdEF0dHJpYnV0ZURlbHRhJ319U20ucmVnaXN0ZXIoTGcpO2NsYXNzIHpnIGV4dGVuZHMgZ217Y29uc3RydWN0b3IoZSx0KXtzdXBlcihudWxsKSx0aGlzLnNvdXJjZVBvc2l0aW9uPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbihlKSx0aGlzLmhvd01hbnk9dH1nZXQgdHlwZSgpe3JldHVybidkZXRhY2gnfV92YWxpZGF0ZSgpe2lmKHRoaXMuc291cmNlUG9zaXRpb24ucm9vdC5kb2N1bWVudCl0aHJvdyBuZXcgWmEoJ2RldGFjaC1vcGVyYXRpb24tb24tZG9jdW1lbnQtbm9kZTogQ2Fubm90IGRldGFjaCBkb2N1bWVudCBub2RlLicpfV9leGVjdXRlKCl7Ym8oR3UuY3JlYXRlRnJvbVBvc2l0aW9uQW5kU2hpZnQodGhpcy5zb3VyY2VQb3NpdGlvbix0aGlzLmhvd01hbnkpKX1zdGF0aWMgZ2V0IGNsYXNzTmFtZSgpe3JldHVybidlbmdpbmUubW9kZWwub3BlcmF0aW9uLkRldGFjaE9wZXJhdGlvbid9fWNsYXNzIGpnIGV4dGVuZHMgV3V7Y29uc3RydWN0b3IoZSx0LG89J21haW4nKXtzdXBlcih0KSx0aGlzLl9kb2M9ZSx0aGlzLnJvb3ROYW1lPW99Z2V0IGRvY3VtZW50KCl7cmV0dXJuIHRoaXMuX2RvY31pcyhlLHQpe3JldHVybiB0Pydyb290RWxlbWVudCc9PWUmJnQ9PXRoaXMubmFtZXx8c3VwZXIuaXMoZSx0KToncm9vdEVsZW1lbnQnPT1lfHxzdXBlci5pcyhlKX10b0pTT04oKXtyZXR1cm4gdGhpcy5yb290TmFtZX19Y2xhc3MgcWd7Y29uc3RydWN0b3IoZSx0KXt0aGlzLm1vZGVsPWUsdGhpcy5iYXRjaD10fWNyZWF0ZVRleHQoZSx0KXtyZXR1cm4gbmV3IHp1KGUsdCl9Y3JlYXRlRWxlbWVudChlLHQpe3JldHVybiBuZXcgV3UoZSx0KX1jcmVhdGVEb2N1bWVudEZyYWdtZW50KCl7cmV0dXJuIG5ldyBmbX1pbnNlcnQoZSx0LG8pe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtjb25zdCBuPUt1LmNyZWF0ZUF0KHQsbyksaT1lIGluc3RhbmNlb2YgenUmJiFlLnBhcmVudD9uZXcgem06bmV3IExtO2lmKGUucGFyZW50KXtpZihabyhlLnJvb3Qsbi5yb290KSlyZXR1cm4gdm9pZCB0aGlzLm1vdmUoR3UuY3JlYXRlT24oZSksbik7aWYoZS5yb290LmRvY3VtZW50KXRocm93IG5ldyBFcnJvcignbW9kZWwtd3JpdGVyLWluc2VydC1mb3JiaWRkZW4tbW92ZTogQ2Fubm90IG1vdmUgYSBub2RlIGZyb20gYSBkb2N1bWVudCB0byBhIGRpZmZlcmVudCB0cmVlLicpO2Vsc2UgdGhpcy5yZW1vdmUoZSl9Y29uc3Qgcj1uLnJvb3QuZG9jdW1lbnQ/bi5yb290LmRvY3VtZW50LnZlcnNpb246bnVsbCxhPW5ldyB2bShuLGUscik7aWYodGhpcy5iYXRjaC5hZGREZWx0YShpKSxpLmFkZE9wZXJhdGlvbihhKSx0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKGEpLGUgaW5zdGFuY2VvZiBmbSlmb3IoY29uc3RbdCxvXW9mIGUubWFya2Vycyl7Y29uc3QgZT1LdS5jcmVhdGVBdChvLnJvb3QpLGk9bmV3IEd1KG8uc3RhcnQuX2dldENvbWJpbmVkKGUsbiksby5lbmQuX2dldENvbWJpbmVkKGUsbikpO3RoaXMuYWRkTWFya2VyKHQse3JhbmdlOmksdXNpbmdPcGVyYXRpb246ITB9KX19aW5zZXJ0VGV4dChlLHQsbyxuKXt0IGluc3RhbmNlb2YgZm18fHQgaW5zdGFuY2VvZiBXdXx8dCBpbnN0YW5jZW9mIEt1P3RoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlVGV4dChlKSx0LG8pOnRoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlVGV4dChlLHQpLG8sbil9aW5zZXJ0RWxlbWVudChlLHQsbyxuKXt0IGluc3RhbmNlb2YgZm18fHQgaW5zdGFuY2VvZiBXdXx8dCBpbnN0YW5jZW9mIEt1P3RoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlRWxlbWVudChlKSx0LG8pOnRoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlRWxlbWVudChlLHQpLG8sbil9YXBwZW5kKGUsdCl7dGhpcy5pbnNlcnQoZSx0LCdlbmQnKX1hcHBlbmRUZXh0KGUsdCxvKXt0IGluc3RhbmNlb2YgZm18fHQgaW5zdGFuY2VvZiBXdT90aGlzLmluc2VydCh0aGlzLmNyZWF0ZVRleHQoZSksdCwnZW5kJyk6dGhpcy5pbnNlcnQodGhpcy5jcmVhdGVUZXh0KGUsdCksbywnZW5kJyl9YXBwZW5kRWxlbWVudChlLHQsbyl7dCBpbnN0YW5jZW9mIGZtfHx0IGluc3RhbmNlb2YgV3U/dGhpcy5pbnNlcnQodGhpcy5jcmVhdGVFbGVtZW50KGUpLHQsJ2VuZCcpOnRoaXMuaW5zZXJ0KHRoaXMuY3JlYXRlRWxlbWVudChlLHQpLG8sJ2VuZCcpfXNldEF0dHJpYnV0ZShlLHQsbyl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpLG8gaW5zdGFuY2VvZiBHdT9Kbyh0aGlzLGUsdCxvKTpRbyh0aGlzLGUsdCxvKX1zZXRBdHRyaWJ1dGVzKGUsdCl7Zm9yKGNvbnN0W28sbl1vZiBydChlKSl0aGlzLnNldEF0dHJpYnV0ZShvLG4sdCl9cmVtb3ZlQXR0cmlidXRlKGUsdCl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpLHQgaW5zdGFuY2VvZiBHdT9Kbyh0aGlzLGUsbnVsbCx0KTpRbyh0aGlzLGUsbnVsbCx0KX1jbGVhckF0dHJpYnV0ZXMoZSl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2NvbnN0IHQ9KGUpPT57Zm9yKGNvbnN0IHQgb2YgZS5nZXRBdHRyaWJ1dGVLZXlzKCkpdGhpcy5yZW1vdmVBdHRyaWJ1dGUodCxlKX07aWYoIShlIGluc3RhbmNlb2YgR3UpKXQoZSk7ZWxzZSBmb3IoY29uc3QgbyBvZiBlLmdldEl0ZW1zKCkpdChvKX1tb3ZlKGUsdCxvKXtpZih0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCksIShlIGluc3RhbmNlb2YgR3UpKXRocm93IG5ldyBaYSgnd3JpdGVyLW1vdmUtaW52YWxpZC1yYW5nZTogSW52YWxpZCByYW5nZSB0byBtb3ZlLicpO2lmKCFlLmlzRmxhdCl0aHJvdyBuZXcgWmEoJ3dyaXRlci1tb3ZlLXJhbmdlLW5vdC1mbGF0OiBSYW5nZSB0byBtb3ZlIGlzIG5vdCBmbGF0LicpO2NvbnN0IG49S3UuY3JlYXRlQXQodCxvKTtpZighWm8oZS5yb290LG4ucm9vdCkpdGhyb3cgbmV3IFphKCd3cml0ZXItbW92ZS1kaWZmZXJlbnQtZG9jdW1lbnQ6IFJhbmdlIGlzIGdvaW5nIHRvIGJlIG1vdmVkIGJldHdlZW4gZGlmZmVyZW50IGRvY3VtZW50cy4nKTtjb25zdCBpPW5ldyBGbTt0aGlzLmJhdGNoLmFkZERlbHRhKGkpO2NvbnN0IHI9ZS5yb290LmRvY3VtZW50P2Uucm9vdC5kb2N1bWVudC52ZXJzaW9uOm51bGwsYT1uZXcga20oZS5zdGFydCxlLmVuZC5vZmZzZXQtZS5zdGFydC5vZmZzZXQsbixyKTtpLmFkZE9wZXJhdGlvbihhKSx0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKGEpfXJlbW92ZShlKXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7Y29uc3QgdD0oZSx0KT0+e2NvbnN0IG89bmV3IE5tO3RoaXMuYmF0Y2guYWRkRGVsdGEobyksWG8oZSx0LG8sdGhpcy5tb2RlbCl9O2lmKGUgaW5zdGFuY2VvZiBHdSl7Y29uc3Qgbz1lLmdldE1pbmltYWxGbGF0UmFuZ2VzKCkucmV2ZXJzZSgpO2Zvcihjb25zdCBlIG9mIG8pdChlLnN0YXJ0LGUuZW5kLm9mZnNldC1lLnN0YXJ0Lm9mZnNldCl9ZWxzZXtjb25zdCBvPWUuaXMoJ3RleHQnKT9lLm9mZnNldFNpemU6MTt0KEt1LmNyZWF0ZUJlZm9yZShlKSxvKX19bWVyZ2UoZSl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2NvbnN0IHQ9bmV3IFZtO3RoaXMuYmF0Y2guYWRkRGVsdGEodCk7Y29uc3Qgbz1lLm5vZGVCZWZvcmUsbj1lLm5vZGVBZnRlcjtpZighKG8gaW5zdGFuY2VvZiBXdSkpdGhyb3cgbmV3IFphKCd3cml0ZXItbWVyZ2Utbm8tZWxlbWVudC1iZWZvcmU6IE5vZGUgYmVmb3JlIG1lcmdlIHBvc2l0aW9uIG11c3QgYmUgYW4gZWxlbWVudC4nKTtpZighKG4gaW5zdGFuY2VvZiBXdSkpdGhyb3cgbmV3IFphKCd3cml0ZXItbWVyZ2Utbm8tZWxlbWVudC1hZnRlcjogTm9kZSBhZnRlciBtZXJnZSBwb3NpdGlvbiBtdXN0IGJlIGFuIGVsZW1lbnQuJyk7Y29uc3QgaT1LdS5jcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KG4sMCkscj1LdS5jcmVhdGVGcm9tUGFyZW50QW5kT2Zmc2V0KG8sby5tYXhPZmZzZXQpLGE9ZS5yb290LmRvY3VtZW50P2Uucm9vdC5kb2N1bWVudC52ZXJzaW9uOm51bGwscz1uZXcga20oaSxuLm1heE9mZnNldCxyLGEpO3MuaXNTdGlja3k9ITAsdC5hZGRPcGVyYXRpb24ocyksdGhpcy5tb2RlbC5hcHBseU9wZXJhdGlvbihzKSxYbyhlLDEsdCx0aGlzLm1vZGVsKX1yZW5hbWUoZSx0KXtpZih0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCksIShlIGluc3RhbmNlb2YgV3UpKXRocm93IG5ldyBaYSgnd3JpdGVyLXJlbmFtZS1ub3QtZWxlbWVudC1pbnN0YW5jZTogVHJ5aW5nIHRvIHJlbmFtZSBhbiBvYmplY3Qgd2hpY2ggaXMgbm90IGFuIGluc3RhbmNlIG9mIEVsZW1lbnQuJyk7Y29uc3Qgbz1uZXcgTW07dGhpcy5iYXRjaC5hZGREZWx0YShvKTtjb25zdCBuPWUucm9vdC5kb2N1bWVudD9lLnJvb3QuZG9jdW1lbnQudmVyc2lvbjpudWxsLGk9bmV3IENtKEt1LmNyZWF0ZUJlZm9yZShlKSxlLm5hbWUsdCxuKTtvLmFkZE9wZXJhdGlvbihpKSx0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKGkpfXNwbGl0KGUsdCl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpO2xldCBvPWUucGFyZW50O2lmKCFvLnBhcmVudCl0aHJvdyBuZXcgWmEoJ3dyaXRlci1zcGxpdC1lbGVtZW50LW5vLXBhcmVudDogRWxlbWVudCB3aXRoIG5vIHBhcmVudCBjYW4gbm90IGJlIHNwbGl0LicpO2lmKHR8fCh0PW8ucGFyZW50KSwhZS5wYXJlbnQuZ2V0QW5jZXN0b3JzKHtpbmNsdWRlU2VsZjohMH0pLmluY2x1ZGVzKHQpKXRocm93IG5ldyBaYSgnd3JpdGVyLXNwbGl0LWludmFsaWQtbGltaXQtZWxlbWVudDogTGltaXQgZWxlbWVudCBpcyBub3QgYSBwb3NpdGlvbiBhbmNlc3Rvci4nKTtsZXQgbixpO2Rve2NvbnN0IHQ9bmV3IEltO3RoaXMuYmF0Y2guYWRkRGVsdGEodCk7Y29uc3Qgcj1uZXcgV3Uoby5uYW1lLG8uZ2V0QXR0cmlidXRlcygpKSxhPW8ucm9vdC5kb2N1bWVudD9vLnJvb3QuZG9jdW1lbnQudmVyc2lvbjpudWxsLHM9bmV3IHZtKEt1LmNyZWF0ZUFmdGVyKG8pLHIsYSk7dC5hZGRPcGVyYXRpb24ocyksdGhpcy5tb2RlbC5hcHBseU9wZXJhdGlvbihzKTtjb25zdCBsPW51bGw9PT1hP251bGw6YSsxLGQ9bmV3IGttKGUsby5tYXhPZmZzZXQtZS5vZmZzZXQsS3UuY3JlYXRlRnJvbVBhcmVudEFuZE9mZnNldChyLDApLGwpO2QuaXNTdGlja3k9ITAsdC5hZGRPcGVyYXRpb24oZCksdGhpcy5tb2RlbC5hcHBseU9wZXJhdGlvbihkKSxufHxpfHwobj1vLGk9ciksZT1LdS5jcmVhdGVCZWZvcmUociksbz1lLnBhcmVudH13aGlsZShvIT09dCk7cmV0dXJue3Bvc2l0aW9uOmUscmFuZ2U6bmV3IEd1KEt1LmNyZWF0ZUF0KG4sJ2VuZCcpLEt1LmNyZWF0ZUF0KGkpKX19d3JhcChlLHQpe2lmKHRoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKSwhZS5pc0ZsYXQpdGhyb3cgbmV3IFphKCd3cml0ZXItd3JhcC1yYW5nZS1ub3QtZmxhdDogUmFuZ2UgdG8gd3JhcCBpcyBub3QgZmxhdC4nKTtjb25zdCBvPXQgaW5zdGFuY2VvZiBXdT90Om5ldyBXdSh0KTtpZigwPG8uY2hpbGRDb3VudCl0aHJvdyBuZXcgWmEoJ3dyaXRlci13cmFwLWVsZW1lbnQtbm90LWVtcHR5OiBFbGVtZW50IHRvIHdyYXAgd2l0aCBpcyBub3QgZW1wdHkuJyk7aWYobnVsbCE9PW8ucGFyZW50KXRocm93IG5ldyBaYSgnd3JpdGVyLXdyYXAtZWxlbWVudC1hdHRhY2hlZDogRWxlbWVudCB0byB3cmFwIHdpdGggaXMgYWxyZWFkeSBhdHRhY2hlZCB0byB0cmVlIG1vZGVsLicpO2NvbnN0IG49bmV3IERtO3RoaXMuYmF0Y2guYWRkRGVsdGEobik7Y29uc3QgaT1lLnJvb3QuZG9jdW1lbnQ/ZS5yb290LmRvY3VtZW50LnZlcnNpb246bnVsbCxyPW5ldyB2bShlLmVuZCxvLGkpO24uYWRkT3BlcmF0aW9uKHIpLHRoaXMubW9kZWwuYXBwbHlPcGVyYXRpb24ocik7Y29uc3QgYT1udWxsPT09aT9udWxsOmkrMSxzPUt1LmNyZWF0ZUZyb21QYXJlbnRBbmRPZmZzZXQobywwKSxsPW5ldyBrbShlLnN0YXJ0LGUuZW5kLm9mZnNldC1lLnN0YXJ0Lm9mZnNldCxzLGEpO24uYWRkT3BlcmF0aW9uKGwpLHRoaXMubW9kZWwuYXBwbHlPcGVyYXRpb24obCl9dW53cmFwKGUpe2lmKHRoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKSxudWxsPT09ZS5wYXJlbnQpdGhyb3cgbmV3IFphKCd3cml0ZXItdW53cmFwLWVsZW1lbnQtbm8tcGFyZW50OiBUcnlpbmcgdG8gdW53cmFwIGFuIGVsZW1lbnQgd2hpY2ggaGFzIG5vIHBhcmVudC4nKTtjb25zdCB0PW5ldyBCbTt0aGlzLmJhdGNoLmFkZERlbHRhKHQpO2NvbnN0IG89S3UuY3JlYXRlRnJvbVBhcmVudEFuZE9mZnNldChlLDApLG49by5yb290LmRvY3VtZW50P28ucm9vdC5kb2N1bWVudC52ZXJzaW9uOm51bGwsaT1uZXcga20obyxlLm1heE9mZnNldCxLdS5jcmVhdGVCZWZvcmUoZSksbik7aS5pc1N0aWNreT0hMCx0LmFkZE9wZXJhdGlvbihpKSx0aGlzLm1vZGVsLmFwcGx5T3BlcmF0aW9uKGkpLFhvKEt1LmNyZWF0ZUJlZm9yZShlKSwxLHQsdGhpcy5tb2RlbCl9YWRkTWFya2VyKGUsdCl7aWYodGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpLCF0fHwnYm9vbGVhbichPXR5cGVvZiB0LnVzaW5nT3BlcmF0aW9uKXRocm93IG5ldyBaYSgnd3JpdGVyLWFkZE1hcmtlci1uby11c2luZ09wZXJhdGlvbnM6IFRoZSBvcHRpb25zLnVzaW5nT3BlcmF0aW9ucyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgd2hlbiBhZGRpbmcgYSBuZXcgbWFya2VyLicpO2NvbnN0IG89dC51c2luZ09wZXJhdGlvbixuPXQucmFuZ2U7aWYodGhpcy5tb2RlbC5tYXJrZXJzLmhhcyhlKSl0aHJvdyBuZXcgWmEoJ3dyaXRlci1hZGRNYXJrZXItbWFya2VyLWV4aXN0czogTWFya2VyIHdpdGggcHJvdmlkZWQgbmFtZSBhbHJlYWR5IGV4aXN0cy4nKTtpZighbil0aHJvdyBuZXcgWmEoJ3dyaXRlci1hZGRNYXJrZXItbm8tcmFuZ2U6IFJhbmdlIHBhcmFtZXRlciBpcyByZXF1aXJlZCB3aGVuIGFkZGluZyBhIG5ldyBtYXJrZXIuJyk7cmV0dXJuIG8/KFlvKHRoaXMsZSxudWxsLG4pLHRoaXMubW9kZWwubWFya2Vycy5nZXQoZSkpOnRoaXMubW9kZWwubWFya2Vycy5fc2V0KGUsbixvKX11cGRhdGVNYXJrZXIoZSx0KXt0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCk7Y29uc3Qgbz0nc3RyaW5nJz09dHlwZW9mIGU/ZTplLm5hbWUsbj10aGlzLm1vZGVsLm1hcmtlcnMuZ2V0KG8pO2lmKCFuKXRocm93IG5ldyBaYSgnd3JpdGVyLXVwZGF0ZU1hcmtlci1tYXJrZXItbm90LWV4aXN0czogTWFya2VyIHdpdGggcHJvdmlkZWQgbmFtZSBkb2VzIG5vdCBleGlzdHMuJyk7Y29uc3QgaT10JiZ0LnJhbmdlLHI9ISF0JiYnYm9vbGVhbic9PXR5cGVvZiB0LnVzaW5nT3BlcmF0aW9uO2lmKCFyJiYhaSl0aHJvdyBuZXcgWmEoJ3dyaXRlci11cGRhdGVNYXJrZXItd3Jvbmctb3B0aW9uczogT25lIG9mIG9wdGlvbnMgaXMgcmVxdWlyZWQgLSBwcm92aWRlIHJhbmdlIG9yIHVzaW5nT3BlcmF0aW9ucy4nKTtpZihyJiZ0LnVzaW5nT3BlcmF0aW9uIT09bi5tYW5hZ2VkVXNpbmdPcGVyYXRpb25zKXtpZih0LnVzaW5nT3BlcmF0aW9uKVlvKHRoaXMsbyxudWxsLGk/aTpuLmdldFJhbmdlKCkpO2Vsc2V7Y29uc3QgZT1uLmdldFJhbmdlKCk7WW8odGhpcyxvLGUsbnVsbCksdGhpcy5tb2RlbC5tYXJrZXJzLl9zZXQobyxpP2k6ZSl9cmV0dXJufW4ubWFuYWdlZFVzaW5nT3BlcmF0aW9ucz9Zbyh0aGlzLG8sbi5nZXRSYW5nZSgpLGkpOnRoaXMubW9kZWwubWFya2Vycy5fc2V0KG8saSl9cmVtb3ZlTWFya2VyKGUpe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKTtjb25zdCB0PSdzdHJpbmcnPT10eXBlb2YgZT9lOmUubmFtZTtpZighdGhpcy5tb2RlbC5tYXJrZXJzLmhhcyh0KSl0aHJvdyBuZXcgWmEoJ3dyaXRlci1yZW1vdmVNYXJrZXItbm8tbWFya2VyOiBUcnlpbmcgdG8gcmVtb3ZlIG1hcmtlciB3aGljaCBkb2VzIG5vdCBleGlzdC4nKTtjb25zdCBvPXRoaXMubW9kZWwubWFya2Vycy5nZXQodCk7aWYoIW8ubWFuYWdlZFVzaW5nT3BlcmF0aW9ucylyZXR1cm4gdm9pZCB0aGlzLm1vZGVsLm1hcmtlcnMuX3JlbW92ZSh0KTtjb25zdCBuPW8uZ2V0UmFuZ2UoKTtZbyh0aGlzLHQsbixudWxsKX1zZXRTZWxlY3Rpb24oZSx0LG8pe3RoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKSx0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5fc2V0VG8oZSx0LG8pfXNldFNlbGVjdGlvbkZvY3VzKGUsdCl7dGhpcy5fYXNzZXJ0V3JpdGVyVXNlZENvcnJlY3RseSgpLHRoaXMubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLl9zZXRGb2N1cyhlLHQpfXNldFNlbGVjdGlvbkF0dHJpYnV0ZShlLHQpe2lmKHRoaXMuX2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKSwnc3RyaW5nJz09dHlwZW9mIGUpdGhpcy5fc2V0U2VsZWN0aW9uQXR0cmlidXRlKGUsdCk7ZWxzZSBmb3IoY29uc3RbdCxvXW9mIHJ0KGUpKXRoaXMuX3NldFNlbGVjdGlvbkF0dHJpYnV0ZSh0LG8pfXJlbW92ZVNlbGVjdGlvbkF0dHJpYnV0ZShlKXtpZih0aGlzLl9hc3NlcnRXcml0ZXJVc2VkQ29ycmVjdGx5KCksJ3N0cmluZyc9PXR5cGVvZiBlKXRoaXMuX3JlbW92ZVNlbGVjdGlvbkF0dHJpYnV0ZShlKTtlbHNlIGZvcihjb25zdCB0IG9mIGUpdGhpcy5fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKHQpfW92ZXJyaWRlU2VsZWN0aW9uR3Jhdml0eSgpe3JldHVybiB0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5fb3ZlcnJpZGVHcmF2aXR5KCl9cmVzdG9yZVNlbGVjdGlvbkdyYXZpdHkoZSl7dGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uX3Jlc3RvcmVHcmF2aXR5KGUpfV9zZXRTZWxlY3Rpb25BdHRyaWJ1dGUoZSx0KXtjb25zdCBvPXRoaXMubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uO2lmKG8uaXNDb2xsYXBzZWQmJm8uYW5jaG9yLnBhcmVudC5pc0VtcHR5KXtjb25zdCBuPWVtLl9nZXRTdG9yZUF0dHJpYnV0ZUtleShlKTt0aGlzLnNldEF0dHJpYnV0ZShuLHQsby5hbmNob3IucGFyZW50KX1vLl9zZXRBdHRyaWJ1dGUoZSx0KX1fcmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKGUpe2NvbnN0IHQ9dGhpcy5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb247aWYodC5pc0NvbGxhcHNlZCYmdC5hbmNob3IucGFyZW50LmlzRW1wdHkpe2NvbnN0IG89ZW0uX2dldFN0b3JlQXR0cmlidXRlS2V5KGUpO3RoaXMucmVtb3ZlQXR0cmlidXRlKG8sdC5hbmNob3IucGFyZW50KX10Ll9yZW1vdmVBdHRyaWJ1dGUoZSl9X2Fzc2VydFdyaXRlclVzZWRDb3JyZWN0bHkoKXtpZih0aGlzLm1vZGVsLl9jdXJyZW50V3JpdGVyIT09dGhpcyl0aHJvdyBuZXcgWmEoJ3dyaXRlci1pbmNvcnJlY3QtdXNlOiBUcnlpbmcgdG8gdXNlIGEgd3JpdGVyIG91dHNpZGUgdGhlIGNoYW5nZSgpIGJsb2NrLicpfX1jbGFzcyBXZ3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9tYXJrZXJDb2xsZWN0aW9uPWUsdGhpcy5fY2hhbmdlc0luRWxlbWVudD1uZXcgTWFwLHRoaXMuX2VsZW1lbnRTbmFwc2hvdHM9bmV3IE1hcCx0aGlzLl9jaGFuZ2VkTWFya2Vycz1uZXcgTWFwLHRoaXMuX2NoYW5nZUNvdW50PTAsdGhpcy5fY2FjaGVkQ2hhbmdlcz1udWxsLHRoaXMuX2NhY2hlZENoYW5nZXNXaXRoR3JhdmV5YXJkPW51bGx9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gMD09dGhpcy5fY2hhbmdlc0luRWxlbWVudC5zaXplJiYwPT10aGlzLl9jaGFuZ2VkTWFya2Vycy5zaXplfWJ1ZmZlck9wZXJhdGlvbihlKXtzd2l0Y2goZS50eXBlKXtjYXNlJ2luc2VydCc6e2lmKHRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQoZS5wb3NpdGlvbi5wYXJlbnQpKXJldHVybjt0aGlzLl9tYXJrSW5zZXJ0KGUucG9zaXRpb24ucGFyZW50LGUucG9zaXRpb24ub2Zmc2V0LGUubm9kZXMubWF4T2Zmc2V0KTticmVha31jYXNlJ2FkZEF0dHJpYnV0ZSc6Y2FzZSdyZW1vdmVBdHRyaWJ1dGUnOmNhc2UnY2hhbmdlQXR0cmlidXRlJzp7Zm9yKGNvbnN0IHQgb2YgZS5yYW5nZS5nZXRJdGVtcygpKXRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQodC5wYXJlbnQpfHx0aGlzLl9tYXJrQXR0cmlidXRlKHQpO2JyZWFrfWNhc2UncmVtb3ZlJzpjYXNlJ21vdmUnOmNhc2UncmVpbnNlcnQnOntjb25zdCB0PXRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQoZS5zb3VyY2VQb3NpdGlvbi5wYXJlbnQpLG89dGhpcy5faXNJbkluc2VydGVkRWxlbWVudChlLnRhcmdldFBvc2l0aW9uLnBhcmVudCk7dHx8dGhpcy5fbWFya1JlbW92ZShlLnNvdXJjZVBvc2l0aW9uLnBhcmVudCxlLnNvdXJjZVBvc2l0aW9uLm9mZnNldCxlLmhvd01hbnkpLG98fHRoaXMuX21hcmtJbnNlcnQoZS50YXJnZXRQb3NpdGlvbi5wYXJlbnQsZS5nZXRNb3ZlZFJhbmdlU3RhcnQoKS5vZmZzZXQsZS5ob3dNYW55KTticmVha31jYXNlJ3JlbmFtZSc6e2lmKHRoaXMuX2lzSW5JbnNlcnRlZEVsZW1lbnQoZS5wb3NpdGlvbi5wYXJlbnQpKXJldHVybjt0aGlzLl9tYXJrUmVtb3ZlKGUucG9zaXRpb24ucGFyZW50LGUucG9zaXRpb24ub2Zmc2V0LDEpLHRoaXMuX21hcmtJbnNlcnQoZS5wb3NpdGlvbi5wYXJlbnQsZS5wb3NpdGlvbi5vZmZzZXQsMSk7Y29uc3QgdD1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChlLnBvc2l0aW9uLDEpO2Zvcihjb25zdCBlIG9mIHRoaXMuX21hcmtlckNvbGxlY3Rpb24uZ2V0TWFya2Vyc0ludGVyc2VjdGluZ1JhbmdlKHQpKXtjb25zdCB0PWUuZ2V0UmFuZ2UoKTt0aGlzLmJ1ZmZlck1hcmtlckNoYW5nZShlLm5hbWUsdCx0KX1icmVha319dGhpcy5fY2FjaGVkQ2hhbmdlcz1udWxsfWJ1ZmZlck1hcmtlckNoYW5nZShlLHQsbyl7Y29uc3Qgbj10aGlzLl9jaGFuZ2VkTWFya2Vycy5nZXQoZSk7bj8obi5uZXdSYW5nZT1vLG51bGw9PW4ub2xkUmFuZ2UmJm51bGw9PW4ubmV3UmFuZ2UmJnRoaXMuX2NoYW5nZWRNYXJrZXJzLmRlbGV0ZShlKSk6dGhpcy5fY2hhbmdlZE1hcmtlcnMuc2V0KGUse29sZFJhbmdlOnQsbmV3UmFuZ2U6b30pfWdldE1hcmtlcnNUb1JlbW92ZSgpe2NvbnN0IGU9W107Zm9yKGNvbnN0W3Qsb11vZiB0aGlzLl9jaGFuZ2VkTWFya2VycyludWxsIT1vLm9sZFJhbmdlJiZlLnB1c2goe25hbWU6dCxyYW5nZTpvLm9sZFJhbmdlfSk7cmV0dXJuIGV9Z2V0TWFya2Vyc1RvQWRkKCl7Y29uc3QgZT1bXTtmb3IoY29uc3RbdCxvXW9mIHRoaXMuX2NoYW5nZWRNYXJrZXJzKW51bGwhPW8ubmV3UmFuZ2UmJmUucHVzaCh7bmFtZTp0LHJhbmdlOm8ubmV3UmFuZ2V9KTtyZXR1cm4gZX1nZXRDaGFuZ2VzKGU9e2luY2x1ZGVDaGFuZ2VzSW5HcmF2ZXlhcmQ6ITF9KXtpZih0aGlzLl9jYWNoZWRDaGFuZ2VzKXJldHVybiBlLmluY2x1ZGVDaGFuZ2VzSW5HcmF2ZXlhcmQ/dGhpcy5fY2FjaGVkQ2hhbmdlc1dpdGhHcmF2ZXlhcmQuc2xpY2UoKTp0aGlzLl9jYWNoZWRDaGFuZ2VzLnNsaWNlKCk7Y29uc3QgdD1bXTtmb3IoY29uc3QgbyBvZiB0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmtleXMoKSl7Y29uc3QgZT10aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmdldChvKS5zb3J0KChlLHQpPT5lLm9mZnNldD09PXQub2Zmc2V0P2UudHlwZT09dC50eXBlPzA6J3JlbW92ZSc9PWUudHlwZT8tMToxOmUub2Zmc2V0PHQub2Zmc2V0Py0xOjEpLG49dGhpcy5fZWxlbWVudFNuYXBzaG90cy5nZXQobykscj1lbihvLmdldENoaWxkcmVuKCkpLGE9dG4obi5sZW5ndGgsZSk7bGV0IHM9MCxpPTA7Zm9yKGNvbnN0IGUgb2YgYSlpZignaSc9PT1lKXQucHVzaCh0aGlzLl9nZXRJbnNlcnREaWZmKG8scyxyW3NdLm5hbWUpKSxzKys7ZWxzZSBpZigncic9PT1lKXQucHVzaCh0aGlzLl9nZXRSZW1vdmVEaWZmKG8scyxuW2ldLm5hbWUpKSxpKys7ZWxzZSBpZignYSc9PT1lKXtjb25zdCBlPXJbc10uYXR0cmlidXRlcyxhPW5baV0uYXR0cmlidXRlcztsZXQgbDtpZignJHRleHQnPT1yW3NdLm5hbWUpbD1HdS5jcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHMobyxzLG8scysxKTtlbHNle2NvbnN0IGU9by5vZmZzZXRUb0luZGV4KHMpO2w9R3UuY3JlYXRlRnJvbVBhcmVudHNBbmRPZmZzZXRzKG8scyxvLmdldENoaWxkKGUpLDApfXQucHVzaCguLi50aGlzLl9nZXRBdHRyaWJ1dGVzRGlmZihsLGEsZSkpLHMrKyxpKyt9ZWxzZSBzKyssaSsrfXQuc29ydCgoZSx0KT0+ZS5wb3NpdGlvbi5yb290PT10LnBvc2l0aW9uLnJvb3Q/ZS5wb3NpdGlvbi5pc0VxdWFsKHQucG9zaXRpb24pP2UuY2hhbmdlQ291bnQ8dC5jaGFuZ2VDb3VudD8tMToxOmUucG9zaXRpb24uaXNCZWZvcmUodC5wb3NpdGlvbik/LTE6MTplLnBvc2l0aW9uLnJvb3Qucm9vdE5hbWU8dC5wb3NpdGlvbi5yb290LnJvb3ROYW1lPy0xOjEpO2ZvcihsZXQgbz0xO288dC5sZW5ndGg7bysrKXtjb25zdCBlPXRbby0xXSxuPXRbb10saT0ncmVtb3ZlJz09ZS50eXBlJiYncmVtb3ZlJz09bi50eXBlJiYnJHRleHQnPT1lLm5hbWUmJickdGV4dCc9PW4ubmFtZSYmZS5wb3NpdGlvbi5pc0VxdWFsKG4ucG9zaXRpb24pLHI9J2luc2VydCc9PWUudHlwZSYmJ2luc2VydCc9PW4udHlwZSYmJyR0ZXh0Jz09ZS5uYW1lJiYnJHRleHQnPT1uLm5hbWUmJmUucG9zaXRpb24ucGFyZW50PT1uLnBvc2l0aW9uLnBhcmVudCYmZS5wb3NpdGlvbi5vZmZzZXQrZS5sZW5ndGg9PW4ucG9zaXRpb24ub2Zmc2V0LGE9J2F0dHJpYnV0ZSc9PWUudHlwZSYmJ2F0dHJpYnV0ZSc9PW4udHlwZSYmZS5wb3NpdGlvbi5wYXJlbnQ9PW4ucG9zaXRpb24ucGFyZW50JiZlLnJhbmdlLmlzRmxhdCYmbi5yYW5nZS5pc0ZsYXQmJmUucG9zaXRpb24ub2Zmc2V0K2UubGVuZ3RoPT1uLnBvc2l0aW9uLm9mZnNldCYmZS5hdHRyaWJ1dGVLZXk9PW4uYXR0cmlidXRlS2V5JiZlLmF0dHJpYnV0ZU9sZFZhbHVlPT1uLmF0dHJpYnV0ZU9sZFZhbHVlJiZlLmF0dHJpYnV0ZU5ld1ZhbHVlPT1uLmF0dHJpYnV0ZU5ld1ZhbHVlOyhpfHxyfHxhKSYmKHRbby0xXS5sZW5ndGgrKyxhJiYodFtvLTFdLnJhbmdlLmVuZD10W28tMV0ucmFuZ2UuZW5kLmdldFNoaWZ0ZWRCeSgxKSksdC5zcGxpY2UobywxKSxvLS0pfWZvcihjb25zdCBvIG9mIHQpZGVsZXRlIG8uY2hhbmdlQ291bnQsJ2F0dHJpYnV0ZSc9PW8udHlwZSYmKGRlbGV0ZSBvLnBvc2l0aW9uLGRlbGV0ZSBvLmxlbmd0aCk7cmV0dXJuIHRoaXMuX2NoYW5nZUNvdW50PTAsdGhpcy5fY2FjaGVkQ2hhbmdlc1dpdGhHcmF2ZXlhcmQ9dC5zbGljZSgpLHRoaXMuX2NhY2hlZENoYW5nZXM9dC5zbGljZSgpLmZpbHRlcihvbiksZS5pbmNsdWRlQ2hhbmdlc0luR3JhdmV5YXJkP3RoaXMuX2NhY2hlZENoYW5nZXNXaXRoR3JhdmV5YXJkOnRoaXMuX2NhY2hlZENoYW5nZXN9cmVzZXQoKXt0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmNsZWFyKCksdGhpcy5fZWxlbWVudFNuYXBzaG90cy5jbGVhcigpLHRoaXMuX2NoYW5nZWRNYXJrZXJzLmNsZWFyKCksdGhpcy5fY2FjaGVkQ2hhbmdlcz1udWxsfV9tYXJrSW5zZXJ0KGUsdCxvKXtjb25zdCBuPXt0eXBlOidpbnNlcnQnLG9mZnNldDp0LGhvd01hbnk6byxjb3VudDp0aGlzLl9jaGFuZ2VDb3VudCsrfTt0aGlzLl9tYXJrQ2hhbmdlKGUsbil9X21hcmtSZW1vdmUoZSx0LG8pe2NvbnN0IG49e3R5cGU6J3JlbW92ZScsb2Zmc2V0OnQsaG93TWFueTpvLGNvdW50OnRoaXMuX2NoYW5nZUNvdW50Kyt9O3RoaXMuX21hcmtDaGFuZ2UoZSxuKSx0aGlzLl9yZW1vdmVBbGxOZXN0ZWRDaGFuZ2VzKGUsdCxvKX1fbWFya0F0dHJpYnV0ZShlKXtjb25zdCB0PXt0eXBlOidhdHRyaWJ1dGUnLG9mZnNldDplLnN0YXJ0T2Zmc2V0LGhvd01hbnk6ZS5vZmZzZXRTaXplLGNvdW50OnRoaXMuX2NoYW5nZUNvdW50Kyt9O3RoaXMuX21hcmtDaGFuZ2UoZS5wYXJlbnQsdCl9X21hcmtDaGFuZ2UoZSx0KXt0aGlzLl9tYWtlU25hcHNob3QoZSk7Y29uc3Qgbz10aGlzLl9nZXRDaGFuZ2VzRm9yRWxlbWVudChlKTt0aGlzLl9oYW5kbGVDaGFuZ2UodCxvKSxvLnB1c2godCk7Zm9yKGxldCBuPTA7bjxvLmxlbmd0aDtuKyspMT5vW25dLmhvd01hbnkmJihvLnNwbGljZShuLDEpLG4tLSl9X2dldENoYW5nZXNGb3JFbGVtZW50KGUpe2xldCB0O3JldHVybiB0aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmhhcyhlKT90PXRoaXMuX2NoYW5nZXNJbkVsZW1lbnQuZ2V0KGUpOih0PVtdLHRoaXMuX2NoYW5nZXNJbkVsZW1lbnQuc2V0KGUsdCkpLHR9X21ha2VTbmFwc2hvdChlKXt0aGlzLl9lbGVtZW50U25hcHNob3RzLmhhcyhlKXx8dGhpcy5fZWxlbWVudFNuYXBzaG90cy5zZXQoZSxlbihlLmdldENoaWxkcmVuKCkpKX1faGFuZGxlQ2hhbmdlKGUsdCl7ZS5ub2Rlc1RvSGFuZGxlPWUuaG93TWFueTtmb3IoY29uc3QgbyBvZiB0KXtjb25zdCBuPWUub2Zmc2V0K2UuaG93TWFueSxpPW8ub2Zmc2V0K28uaG93TWFueTtpZignaW5zZXJ0Jz09ZS50eXBlJiYoJ2luc2VydCc9PW8udHlwZSYmKGUub2Zmc2V0PD1vLm9mZnNldD9vLm9mZnNldCs9ZS5ob3dNYW55OmUub2Zmc2V0PGkmJihvLmhvd01hbnkrPWUubm9kZXNUb0hhbmRsZSxlLm5vZGVzVG9IYW5kbGU9MCkpLCdyZW1vdmUnPT1vLnR5cGUmJmUub2Zmc2V0PG8ub2Zmc2V0JiYoby5vZmZzZXQrPWUuaG93TWFueSksJ2F0dHJpYnV0ZSc9PW8udHlwZSkpaWYoZS5vZmZzZXQ8PW8ub2Zmc2V0KW8ub2Zmc2V0Kz1lLmhvd01hbnk7ZWxzZSBpZihlLm9mZnNldDxpKXtjb25zdCBpPW8uaG93TWFueTtvLmhvd01hbnk9ZS5vZmZzZXQtby5vZmZzZXQsdC51bnNoaWZ0KHt0eXBlOidhdHRyaWJ1dGUnLG9mZnNldDpuLGhvd01hbnk6aS1vLmhvd01hbnksY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK30pfWlmKCdyZW1vdmUnPT1lLnR5cGUpe2lmKCdpbnNlcnQnPT1vLnR5cGUpaWYobjw9by5vZmZzZXQpby5vZmZzZXQtPWUuaG93TWFueTtlbHNlIGlmKG48PWkpe2lmKGUub2Zmc2V0PG8ub2Zmc2V0KXtjb25zdCB0PW4tby5vZmZzZXQ7by5vZmZzZXQ9ZS5vZmZzZXQsby5ob3dNYW55LT10LGUubm9kZXNUb0hhbmRsZS09dH1lbHNlIG8uaG93TWFueS09ZS5ub2Rlc1RvSGFuZGxlLGUubm9kZXNUb0hhbmRsZT0wO31lbHNlIGlmKGUub2Zmc2V0PD1vLm9mZnNldCllLm5vZGVzVG9IYW5kbGUtPW8uaG93TWFueSxvLmhvd01hbnk9MDtlbHNlIGlmKGUub2Zmc2V0PGkpe2NvbnN0IHQ9aS1lLm9mZnNldDtvLmhvd01hbnktPXQsZS5ub2Rlc1RvSGFuZGxlLT10fWlmKCdyZW1vdmUnPT1vLnR5cGUmJihuPD1vLm9mZnNldD9vLm9mZnNldC09ZS5ob3dNYW55OmUub2Zmc2V0PG8ub2Zmc2V0JiYoZS5ub2Rlc1RvSGFuZGxlKz1vLmhvd01hbnksby5ob3dNYW55PTApKSwnYXR0cmlidXRlJz09by50eXBlKWlmKG48PW8ub2Zmc2V0KW8ub2Zmc2V0LT1lLmhvd01hbnk7ZWxzZSBpZihlLm9mZnNldDxvLm9mZnNldCl7Y29uc3QgdD1uLW8ub2Zmc2V0O28ub2Zmc2V0PWUub2Zmc2V0LG8uaG93TWFueS09dH1lbHNlIGlmKGUub2Zmc2V0PGkpaWYobjw9aSl7Y29uc3Qgbj1vLmhvd01hbnk7by5ob3dNYW55PWUub2Zmc2V0LW8ub2Zmc2V0O2NvbnN0IGk9bi1vLmhvd01hbnktZS5ub2Rlc1RvSGFuZGxlO3QudW5zaGlmdCh7dHlwZTonYXR0cmlidXRlJyxvZmZzZXQ6ZS5vZmZzZXQsaG93TWFueTppLGNvdW50OnRoaXMuX2NoYW5nZUNvdW50Kyt9KX1lbHNlIG8uaG93TWFueS09aS1lLm9mZnNldH1pZignYXR0cmlidXRlJz09ZS50eXBlKXtpZignaW5zZXJ0Jz09by50eXBlKWlmKGUub2Zmc2V0PG8ub2Zmc2V0JiZuPm8ub2Zmc2V0KXtpZihuPmkpe2NvbnN0IGU9e3R5cGU6J2F0dHJpYnV0ZScsb2Zmc2V0OmksaG93TWFueTpuLWksY291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK307dGhpcy5faGFuZGxlQ2hhbmdlKGUsdCksdC5wdXNoKGUpfWUubm9kZXNUb0hhbmRsZT1vLm9mZnNldC1lLm9mZnNldCxlLmhvd01hbnk9ZS5ub2Rlc1RvSGFuZGxlfWVsc2UgZS5vZmZzZXQ+PW8ub2Zmc2V0JiZlLm9mZnNldDxpJiYobj5pPyhlLm5vZGVzVG9IYW5kbGU9bi1pLGUub2Zmc2V0PWkpOmUubm9kZXNUb0hhbmRsZT0wKTsnYXR0cmlidXRlJz09by50eXBlJiYoZS5vZmZzZXQ+PW8ub2Zmc2V0JiZuPD1pPyhlLm5vZGVzVG9IYW5kbGU9MCxlLmhvd01hbnk9MCxlLm9mZnNldD0wKTplLm9mZnNldDw9by5vZmZzZXQmJm4+PWkmJihvLmhvd01hbnk9MCkpfX1lLmhvd01hbnk9ZS5ub2Rlc1RvSGFuZGxlLGRlbGV0ZSBlLm5vZGVzVG9IYW5kbGV9X2dldEluc2VydERpZmYoZSx0LG8pe3JldHVybnt0eXBlOidpbnNlcnQnLHBvc2l0aW9uOkt1LmNyZWF0ZUZyb21QYXJlbnRBbmRPZmZzZXQoZSx0KSxuYW1lOm8sbGVuZ3RoOjEsY2hhbmdlQ291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK319X2dldFJlbW92ZURpZmYoZSx0LG8pe3JldHVybnt0eXBlOidyZW1vdmUnLHBvc2l0aW9uOkt1LmNyZWF0ZUZyb21QYXJlbnRBbmRPZmZzZXQoZSx0KSxuYW1lOm8sbGVuZ3RoOjEsY2hhbmdlQ291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK319X2dldEF0dHJpYnV0ZXNEaWZmKGUsdCxvKXtjb25zdCBuPVtdO289bmV3IE1hcChvKTtmb3IoY29uc3RbaSxyXW9mIHQpe2NvbnN0IHQ9by5oYXMoaSk/by5nZXQoaSk6bnVsbDt0IT09ciYmbi5wdXNoKHt0eXBlOidhdHRyaWJ1dGUnLHBvc2l0aW9uOmUuc3RhcnQscmFuZ2U6R3UuY3JlYXRlRnJvbVJhbmdlKGUpLGxlbmd0aDoxLGF0dHJpYnV0ZUtleTppLGF0dHJpYnV0ZU9sZFZhbHVlOnIsYXR0cmlidXRlTmV3VmFsdWU6dCxjaGFuZ2VDb3VudDp0aGlzLl9jaGFuZ2VDb3VudCsrfSksby5kZWxldGUoaSl9Zm9yKGNvbnN0W2kscl1vZiBvKW4ucHVzaCh7dHlwZTonYXR0cmlidXRlJyxwb3NpdGlvbjplLnN0YXJ0LHJhbmdlOkd1LmNyZWF0ZUZyb21SYW5nZShlKSxsZW5ndGg6MSxhdHRyaWJ1dGVLZXk6aSxhdHRyaWJ1dGVPbGRWYWx1ZTpudWxsLGF0dHJpYnV0ZU5ld1ZhbHVlOnIsY2hhbmdlQ291bnQ6dGhpcy5fY2hhbmdlQ291bnQrK30pO3JldHVybiBufV9pc0luSW5zZXJ0ZWRFbGVtZW50KGUpe2NvbnN0IHQ9ZS5wYXJlbnQ7aWYoIXQpcmV0dXJuITE7Y29uc3Qgbz10aGlzLl9jaGFuZ2VzSW5FbGVtZW50LmdldCh0KSxuPWUuc3RhcnRPZmZzZXQ7aWYobylmb3IoY29uc3QgZSBvZiBvKWlmKCdpbnNlcnQnPT1lLnR5cGUmJm4+PWUub2Zmc2V0JiZuPGUub2Zmc2V0K2UuaG93TWFueSlyZXR1cm4hMDtyZXR1cm4gdGhpcy5faXNJbkluc2VydGVkRWxlbWVudCh0KX1fcmVtb3ZlQWxsTmVzdGVkQ2hhbmdlcyhlLHQsbyl7Y29uc3Qgbj1HdS5jcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHMoZSx0LGUsdCtvKTtmb3IoY29uc3QgaSBvZiBuLmdldEl0ZW1zKHtzaGFsbG93OiEwfSkpaS5pcygnZWxlbWVudCcpJiYodGhpcy5fZWxlbWVudFNuYXBzaG90cy5kZWxldGUoaSksdGhpcy5fY2hhbmdlc0luRWxlbWVudC5kZWxldGUoaSksdGhpcy5fcmVtb3ZlQWxsTmVzdGVkQ2hhbmdlcyhpLDAsaS5tYXhPZmZzZXQpKX19Y2xhc3MgVWd7Y29uc3RydWN0b3IoKXt0aGlzLl9kZWx0YXM9W10sdGhpcy5faGlzdG9yeVBvaW50cz1uZXcgTWFwLHRoaXMuX3VuZG9QYWlycz1uZXcgTWFwLHRoaXMuX3VuZG9uZURlbHRhcz1uZXcgU2V0fWFkZERlbHRhKGUpe2lmKDA8ZS5vcGVyYXRpb25zLmxlbmd0aCYmIXRoaXMuX2hpc3RvcnlQb2ludHMuaGFzKGUuYmFzZVZlcnNpb24pKXtjb25zdCB0PXRoaXMuX2RlbHRhcy5sZW5ndGg7dGhpcy5fZGVsdGFzW3RdPWUsdGhpcy5faGlzdG9yeVBvaW50cy5zZXQoZS5iYXNlVmVyc2lvbix0KX19KmdldERlbHRhcyhlPTAsdD1EYSl7aWYoMCE9PXRoaXMuX2RlbHRhcy5sZW5ndGgpe2xldCBvPXRoaXMuX2dldEluZGV4KGUpO2lmKC0xIT1vKWZvcig7bzx0aGlzLl9kZWx0YXMubGVuZ3RoOyl7Y29uc3QgZT10aGlzLl9kZWx0YXNbbysrXTtpZihlLmJhc2VWZXJzaW9uPj10KWJyZWFrO3lpZWxkIGV9fX1nZXREZWx0YShlKXtjb25zdCB0PXRoaXMuX2hpc3RvcnlQb2ludHMuZ2V0KGUpO3JldHVybiB0PT09dm9pZCAwP251bGw6dGhpcy5fZGVsdGFzW3RdfXNldERlbHRhQXNVbmRvbmUoZSx0KXt0aGlzLl91bmRvUGFpcnMuc2V0KHQsZSksdGhpcy5fdW5kb25lRGVsdGFzLmFkZChlKX1pc1VuZG9pbmdEZWx0YShlKXtyZXR1cm4gdGhpcy5fdW5kb1BhaXJzLmhhcyhlKX1pc1VuZG9uZURlbHRhKGUpe3JldHVybiB0aGlzLl91bmRvbmVEZWx0YXMuaGFzKGUpfWdldFVuZG9uZURlbHRhKGUpe3JldHVybiB0aGlzLl91bmRvUGFpcnMuZ2V0KGUpfV9nZXRJbmRleChlKXtjb25zdCB0PXRoaXMuX2hpc3RvcnlQb2ludHMuZ2V0KGUpO2lmKHQ9PT12b2lkIDApe2NvbnN0IHQ9dGhpcy5fZGVsdGFzW3RoaXMuX2RlbHRhcy5sZW5ndGgtMV0sbz10LmJhc2VWZXJzaW9uK3Qub3BlcmF0aW9ucy5sZW5ndGg7aWYoMD5lfHxlPj1vKXJldHVybi0xO3Rocm93IG5ldyBaYSgnbW9kZWwtaGlzdG9yeS13cm9uZy12ZXJzaW9uOiBHaXZlbiBiYXNlIHZlcnNpb24gcG9pbnRzIHRvIHRoZSBtaWRkbGUgb2YgYSBkZWx0YS4nKX1yZXR1cm4gdH19Y29uc3QgSGc9JyRncmF2ZXlhcmQnO2NsYXNzIEtne2NvbnN0cnVjdG9yKGUpe3RoaXMubW9kZWw9ZSx0aGlzLnZlcnNpb249MCx0aGlzLmhpc3Rvcnk9bmV3IFVnKHRoaXMpLHRoaXMuc2VsZWN0aW9uPW5ldyBlbSh0aGlzKSx0aGlzLnJvb3RzPW5ldyBQYyh7aWRQcm9wZXJ0eToncm9vdE5hbWUnfSksdGhpcy5kaWZmZXI9bmV3IFdnKGUubWFya2VycyksdGhpcy5fcG9zdEZpeGVycz1uZXcgU2V0LHRoaXMuY3JlYXRlUm9vdCgnJHJvb3QnLEhnKSx0aGlzLmxpc3RlblRvKGUsJ2FwcGx5T3BlcmF0aW9uJywoZSx0KT0+e2NvbnN0IG89dFswXTtpZihvLmlzRG9jdW1lbnRPcGVyYXRpb24mJm8uYmFzZVZlcnNpb24hPT10aGlzLnZlcnNpb24pdGhyb3cgbmV3IFphKCdtb2RlbC1kb2N1bWVudC1hcHBseU9wZXJhdGlvbi13cm9uZy12ZXJzaW9uOiBPbmx5IG9wZXJhdGlvbnMgd2l0aCBtYXRjaGluZyB2ZXJzaW9ucyBjYW4gYmUgYXBwbGllZC4nLHtvcGVyYXRpb246b30pfSx7cHJpb3JpdHk6J2hpZ2hlc3QnfSksdGhpcy5saXN0ZW5UbyhlLCdhcHBseU9wZXJhdGlvbicsKGUsdCk9Pntjb25zdCBvPXRbMF07by5pc0RvY3VtZW50T3BlcmF0aW9uJiZ0aGlzLmRpZmZlci5idWZmZXJPcGVyYXRpb24obyl9LHtwcmlvcml0eTonaGlnaCd9KSx0aGlzLmxpc3RlblRvKGUsJ2FwcGx5T3BlcmF0aW9uJywoZSx0KT0+e2NvbnN0IG89dFswXTtvLmlzRG9jdW1lbnRPcGVyYXRpb24mJih0aGlzLnZlcnNpb24rKyx0aGlzLmhpc3RvcnkuYWRkRGVsdGEoby5kZWx0YSkpfSx7cHJpb3JpdHk6J2xvdyd9KTtsZXQgdD0hMTt0aGlzLmxpc3RlblRvKHRoaXMuc2VsZWN0aW9uLCdjaGFuZ2UnLCgpPT57dD0hMH0pLHRoaXMubGlzdGVuVG8oZSwnX2NoYW5nZScsKGUsbyk9PnsoIXRoaXMuZGlmZmVyLmlzRW1wdHl8fHQpJiYodGhpcy5fY2FsbFBvc3RGaXhlcnMobyksdGhpcy5maXJlKCdjaGFuZ2UnLG8uYmF0Y2gpLHRoaXMuZGlmZmVyLnJlc2V0KCksdD0hMSl9KSx0aGlzLmxpc3RlblRvKGUubWFya2VycywndXBkYXRlJywoZSx0LG8sbik9Pnt0aGlzLmRpZmZlci5idWZmZXJNYXJrZXJDaGFuZ2UodC5uYW1lLG8sbiksbnVsbD09PW8mJnQub24oJ2NoYW5nZScsKGUsbyk9Pnt0aGlzLmRpZmZlci5idWZmZXJNYXJrZXJDaGFuZ2UodC5uYW1lLG8sdC5nZXRSYW5nZSgpKX0pfSl9Z2V0IGdyYXZleWFyZCgpe3JldHVybiB0aGlzLmdldFJvb3QoSGcpfWNyZWF0ZVJvb3QoZT0nJHJvb3QnLHQ9J21haW4nKXtpZih0aGlzLnJvb3RzLmdldCh0KSl0aHJvdyBuZXcgWmEoJ21vZGVsLWRvY3VtZW50LWNyZWF0ZVJvb3QtbmFtZS1leGlzdHM6IFJvb3Qgd2l0aCBzcGVjaWZpZWQgbmFtZSBhbHJlYWR5IGV4aXN0cy4nLHtuYW1lOnR9KTtjb25zdCBvPW5ldyBqZyh0aGlzLGUsdCk7cmV0dXJuIHRoaXMucm9vdHMuYWRkKG8pLG99ZGVzdHJveSgpe3RoaXMuc2VsZWN0aW9uLmRlc3Ryb3koKSx0aGlzLnN0b3BMaXN0ZW5pbmcoKX1nZXRSb290KGU9J21haW4nKXtyZXR1cm4gdGhpcy5yb290cy5nZXQoZSl9Z2V0Um9vdE5hbWVzKCl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5yb290cywoZSk9PmUucm9vdE5hbWUpLmZpbHRlcigoZSk9PmUhPUhnKX1yZWdpc3RlclBvc3RGaXhlcihlKXt0aGlzLl9wb3N0Rml4ZXJzLmFkZChlKX10b0pTT04oKXtjb25zdCBlPUVkKHRoaXMpO3JldHVybiBlLnNlbGVjdGlvbj0nW2VuZ2luZS5tb2RlbC5Eb2N1bWVudFNlbGVjdGlvbl0nLGUubW9kZWw9J1tlbmdpbmUubW9kZWwuTW9kZWxdJyxlfV9nZXREZWZhdWx0Um9vdCgpe2Zvcihjb25zdCBlIG9mIHRoaXMucm9vdHMpaWYoZSE9PXRoaXMuZ3JhdmV5YXJkKXJldHVybiBlO3JldHVybiB0aGlzLmdyYXZleWFyZH1fZ2V0RGVmYXVsdFJhbmdlKCl7Y29uc3QgZT10aGlzLl9nZXREZWZhdWx0Um9vdCgpLHQ9dGhpcy5tb2RlbC5zY2hlbWEsbz1uZXcgS3UoZSxbMF0pLG49dC5nZXROZWFyZXN0U2VsZWN0aW9uUmFuZ2Uobyk7cmV0dXJuIG58fG5ldyBHdShvKX1fdmFsaWRhdGVTZWxlY3Rpb25SYW5nZShlKXtyZXR1cm4gZG4oZS5zdGFydCkmJmRuKGUuZW5kKX1fY2FsbFBvc3RGaXhlcnMoZSl7bGV0IHQ9ITE7ZG8gZm9yKGNvbnN0IG8gb2YgdGhpcy5fcG9zdEZpeGVycylpZih0PW8oZSksdClicmVhazt3aGlsZSh0KX19ZihLZyxzcyk7Y2xhc3MgR2d7Y29uc3RydWN0b3IoKXt0aGlzLl9tYXJrZXJzPW5ldyBNYXB9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5fbWFya2Vycy52YWx1ZXMoKX1oYXMoZSl7cmV0dXJuIHRoaXMuX21hcmtlcnMuaGFzKGUpfWdldChlKXtyZXR1cm4gdGhpcy5fbWFya2Vycy5nZXQoZSl8fG51bGx9X3NldChlLHQsbz0hMSl7Y29uc3Qgbj1lIGluc3RhbmNlb2YgJGc/ZS5uYW1lOmUsaT10aGlzLl9tYXJrZXJzLmdldChuKTtpZihpKXtjb25zdCBlPWkuZ2V0UmFuZ2UoKTtsZXQgcj0hMTtyZXR1cm4gZS5pc0VxdWFsKHQpfHwoaS5fYXR0YWNoTGl2ZVJhbmdlKFh1LmNyZWF0ZUZyb21SYW5nZSh0KSkscj0hMCksbyE9aS5tYW5hZ2VkVXNpbmdPcGVyYXRpb25zJiYoaS5fbWFuYWdlZFVzaW5nT3BlcmF0aW9ucz1vLHI9ITApLHImJnRoaXMuZmlyZSgndXBkYXRlOicrbixpLGUsdCksaX1jb25zdCByPVh1LmNyZWF0ZUZyb21SYW5nZSh0KSxhPW5ldyAkZyhuLHIsbyk7cmV0dXJuIHRoaXMuX21hcmtlcnMuc2V0KG4sYSksdGhpcy5maXJlKCd1cGRhdGU6JytuLGEsbnVsbCx0KSxhfV9yZW1vdmUoZSl7Y29uc3QgdD1lIGluc3RhbmNlb2YgJGc/ZS5uYW1lOmUsbz10aGlzLl9tYXJrZXJzLmdldCh0KTtyZXR1cm4hIW8mJih0aGlzLl9tYXJrZXJzLmRlbGV0ZSh0KSx0aGlzLmZpcmUoJ3VwZGF0ZTonK3QsbyxvLmdldFJhbmdlKCksbnVsbCksdGhpcy5fZGVzdHJveU1hcmtlcihvKSwhMCl9KmdldE1hcmtlcnNBdFBvc2l0aW9uKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMpdC5nZXRSYW5nZSgpLmNvbnRhaW5zUG9zaXRpb24oZSkmJih5aWVsZCB0KX0qZ2V0TWFya2Vyc0ludGVyc2VjdGluZ1JhbmdlKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMpbnVsbCE9PXQuZ2V0UmFuZ2UoKS5nZXRJbnRlcnNlY3Rpb24oZSkmJih5aWVsZCB0KX1kZXN0cm95KCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fbWFya2Vycy52YWx1ZXMoKSl0aGlzLl9kZXN0cm95TWFya2VyKGUpO3RoaXMuX21hcmtlcnM9bnVsbCx0aGlzLnN0b3BMaXN0ZW5pbmcoKX0qZ2V0TWFya2Vyc0dyb3VwKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuX21hcmtlcnMudmFsdWVzKCkpdC5uYW1lLnN0YXJ0c1dpdGgoZSsnOicpJiYoeWllbGQgdCl9X2Rlc3Ryb3lNYXJrZXIoZSl7ZS5zdG9wTGlzdGVuaW5nKCksZS5fZGV0YWNoTGl2ZVJhbmdlKCl9fWYoR2csc3MpO2NsYXNzICRne2NvbnN0cnVjdG9yKGUsdCxvKXt0aGlzLm5hbWU9ZSx0aGlzLl9tYW5hZ2VkVXNpbmdPcGVyYXRpb25zPW8sdGhpcy5fbGl2ZVJhbmdlPXRoaXMuX2F0dGFjaExpdmVSYW5nZSh0KX1nZXQgbWFuYWdlZFVzaW5nT3BlcmF0aW9ucygpe2lmKCF0aGlzLl9saXZlUmFuZ2UpdGhyb3cgbmV3IFphKCdtYXJrZXItZGVzdHJveWVkOiBDYW5ub3QgdXNlIGEgZGVzdHJveWVkIG1hcmtlciBpbnN0YW5jZS4nKTtyZXR1cm4gdGhpcy5fbWFuYWdlZFVzaW5nT3BlcmF0aW9uc31nZXRTdGFydCgpe2lmKCF0aGlzLl9saXZlUmFuZ2UpdGhyb3cgbmV3IFphKCdtYXJrZXItZGVzdHJveWVkOiBDYW5ub3QgdXNlIGEgZGVzdHJveWVkIG1hcmtlciBpbnN0YW5jZS4nKTtyZXR1cm4gS3UuY3JlYXRlRnJvbVBvc2l0aW9uKHRoaXMuX2xpdmVSYW5nZS5zdGFydCl9Z2V0RW5kKCl7aWYoIXRoaXMuX2xpdmVSYW5nZSl0aHJvdyBuZXcgWmEoJ21hcmtlci1kZXN0cm95ZWQ6IENhbm5vdCB1c2UgYSBkZXN0cm95ZWQgbWFya2VyIGluc3RhbmNlLicpO3JldHVybiBLdS5jcmVhdGVGcm9tUG9zaXRpb24odGhpcy5fbGl2ZVJhbmdlLmVuZCl9Z2V0UmFuZ2UoKXtpZighdGhpcy5fbGl2ZVJhbmdlKXRocm93IG5ldyBaYSgnbWFya2VyLWRlc3Ryb3llZDogQ2Fubm90IHVzZSBhIGRlc3Ryb3llZCBtYXJrZXIgaW5zdGFuY2UuJyk7cmV0dXJuIEd1LmNyZWF0ZUZyb21SYW5nZSh0aGlzLl9saXZlUmFuZ2UpfV9hdHRhY2hMaXZlUmFuZ2UoZSl7cmV0dXJuIHRoaXMuX2xpdmVSYW5nZSYmdGhpcy5fZGV0YWNoTGl2ZVJhbmdlKCksZS5kZWxlZ2F0ZSgnY2hhbmdlOnJhbmdlJykudG8odGhpcyksZS5kZWxlZ2F0ZSgnY2hhbmdlOmNvbnRlbnQnKS50byh0aGlzKSx0aGlzLl9saXZlUmFuZ2U9ZSxlfV9kZXRhY2hMaXZlUmFuZ2UoKXt0aGlzLl9saXZlUmFuZ2Uuc3RvcERlbGVnYXRpbmcoJ2NoYW5nZTpyYW5nZScsdGhpcyksdGhpcy5fbGl2ZVJhbmdlLnN0b3BEZWxlZ2F0aW5nKCdjaGFuZ2U6Y29udGVudCcsdGhpcyksdGhpcy5fbGl2ZVJhbmdlLmRldGFjaCgpLHRoaXMuX2xpdmVSYW5nZT1udWxsfX1mKCRnLHNzKTtjbGFzcyBKZyBleHRlbmRzIEt1e2NvbnN0cnVjdG9yKGUsdCxvKXtpZihzdXBlcihlLHQpLCF0aGlzLnJvb3QuaXMoJ3Jvb3RFbGVtZW50JykpdGhyb3cgbmV3IFphKCdtb2RlbC1saXZlcG9zaXRpb24tcm9vdC1ub3Qtcm9vdGVsZW1lbnQ6IExpdmVQb3NpdGlvblxcJ3Mgcm9vdCBoYXMgdG8gYmUgYW4gaW5zdGFuY2Ugb2YgUm9vdEVsZW1lbnQuJyk7dGhpcy5zdGlja2luZXNzPW98fCdzdGlja3NUb05leHQnLGNuLmNhbGwodGhpcyl9ZGV0YWNoKCl7dGhpcy5zdG9wTGlzdGVuaW5nKCl9fWYoSmcsc3MpO2NsYXNzIFFne2NvbnN0cnVjdG9yKGUsdCxvKXt0aGlzLm1vZGVsPWUsdGhpcy53cml0ZXI9dCx0aGlzLnBvc2l0aW9uPW8sdGhpcy5jYW5NZXJnZVdpdGg9bmV3IFNldChbdGhpcy5wb3NpdGlvbi5wYXJlbnRdKSx0aGlzLnNjaGVtYT1lLnNjaGVtYSx0aGlzLl9maWx0ZXJBdHRyaWJ1dGVzT2Y9W119aGFuZGxlTm9kZXMoZSx0KXtlPUFycmF5LmZyb20oZSk7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspe2NvbnN0IG49ZVtvXTt0aGlzLl9oYW5kbGVOb2RlKG4se2lzRmlyc3Q6MD09PW8mJnQuaXNGaXJzdCxpc0xhc3Q6bz09PWUubGVuZ3RoLTEmJnQuaXNMYXN0fSl9dGhpcy5zY2hlbWEucmVtb3ZlRGlzYWxsb3dlZEF0dHJpYnV0ZXModGhpcy5fZmlsdGVyQXR0cmlidXRlc09mLHRoaXMud3JpdGVyKSx0aGlzLl9maWx0ZXJBdHRyaWJ1dGVzT2Y9W119Z2V0U2VsZWN0aW9uUmFuZ2UoKXtyZXR1cm4gdGhpcy5ub2RlVG9TZWxlY3Q/R3UuY3JlYXRlT24odGhpcy5ub2RlVG9TZWxlY3QpOnRoaXMubW9kZWwuc2NoZW1hLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZSh0aGlzLnBvc2l0aW9uKX1faGFuZGxlTm9kZShlLHQpe2lmKHRoaXMuc2NoZW1hLmlzT2JqZWN0KGUpKXJldHVybiB2b2lkIHRoaXMuX2hhbmRsZU9iamVjdChlLHQpO2NvbnN0IG89dGhpcy5fY2hlY2tBbmRTcGxpdFRvQWxsb3dlZFBvc2l0aW9uKGUsdCk7cmV0dXJuIG8/dm9pZCh0aGlzLl9pbnNlcnQoZSksdGhpcy5fbWVyZ2VTaWJsaW5nc09mKGUsdCkpOnZvaWQgdGhpcy5faGFuZGxlRGlzYWxsb3dlZE5vZGUoZSx0KX1faGFuZGxlT2JqZWN0KGUsdCl7dGhpcy5fY2hlY2tBbmRTcGxpdFRvQWxsb3dlZFBvc2l0aW9uKGUpP3RoaXMuX2luc2VydChlKTp0aGlzLl90cnlBdXRvcGFyYWdyYXBoaW5nKGUsdCl9X2hhbmRsZURpc2FsbG93ZWROb2RlKGUsdCl7ZS5pcygnZWxlbWVudCcpP3RoaXMuaGFuZGxlTm9kZXMoZS5nZXRDaGlsZHJlbigpLHQpOnRoaXMuX3RyeUF1dG9wYXJhZ3JhcGhpbmcoZSx0KX1faW5zZXJ0KGUpe2lmKCF0aGlzLnNjaGVtYS5jaGVja0NoaWxkKHRoaXMucG9zaXRpb24sZSkpcmV0dXJuIHZvaWQgUnUuZXJyb3IoJ2luc2VydGNvbnRlbnQtd3JvbmctcG9zaXRpb246IFRoZSBub2RlIGNhbm5vdCBiZSBpbnNlcnRlZCBvbiB0aGUgZ2l2ZW4gcG9zaXRpb24uJyx7bm9kZTplLHBvc2l0aW9uOnRoaXMucG9zaXRpb259KTtjb25zdCB0PUpnLmNyZWF0ZUZyb21Qb3NpdGlvbih0aGlzLnBvc2l0aW9uKTt0aGlzLndyaXRlci5pbnNlcnQoZSx0aGlzLnBvc2l0aW9uKSx0aGlzLnBvc2l0aW9uPUt1LmNyZWF0ZUZyb21Qb3NpdGlvbih0KSx0LmRldGFjaCgpLHRoaXMubm9kZVRvU2VsZWN0PXRoaXMuc2NoZW1hLmlzT2JqZWN0KGUpJiYhdGhpcy5zY2hlbWEuY2hlY2tDaGlsZCh0aGlzLnBvc2l0aW9uLCckdGV4dCcpP2U6bnVsbCx0aGlzLl9maWx0ZXJBdHRyaWJ1dGVzT2YucHVzaChlKX1fbWVyZ2VTaWJsaW5nc09mKGUsdCl7aWYoZSBpbnN0YW5jZW9mIFd1KXtjb25zdCBvPXRoaXMuX2Nhbk1lcmdlTGVmdChlLHQpLG49dGhpcy5fY2FuTWVyZ2VSaWdodChlLHQpLGk9SmcuY3JlYXRlQmVmb3JlKGUpLHI9SmcuY3JlYXRlQWZ0ZXIoZSk7aWYobyl7Y29uc3QgZT1KZy5jcmVhdGVGcm9tUG9zaXRpb24odGhpcy5wb3NpdGlvbik7dGhpcy53cml0ZXIubWVyZ2UoaSksdGhpcy5wb3NpdGlvbj1LdS5jcmVhdGVGcm9tUG9zaXRpb24oZSksZS5kZXRhY2goKX1pZihuKXt0aGlzLnBvc2l0aW9uLmlzRXF1YWwocil8fFJ1LmVycm9yKCdpbnNlcnRjb250ZW50LXdyb25nLXBvc2l0aW9uLW9uLW1lcmdlOiBUaGUgaW5zZXJ0aW9uIHBvc2l0aW9uIHNob3VsZCBlcXVhbCB0aGUgbWVyZ2UgcG9zaXRpb24nKSx0aGlzLnBvc2l0aW9uPUt1LmNyZWF0ZUF0KHIubm9kZUJlZm9yZSwnZW5kJyk7Y29uc3QgZT1uZXcgSmcodGhpcy5wb3NpdGlvbi5yb290LHRoaXMucG9zaXRpb24ucGF0aCwnc3RpY2tzVG9QcmV2aW91cycpO3RoaXMud3JpdGVyLm1lcmdlKHIpLHRoaXMucG9zaXRpb249S3UuY3JlYXRlRnJvbVBvc2l0aW9uKGUpLGUuZGV0YWNoKCl9KG98fG4pJiZ0aGlzLl9maWx0ZXJBdHRyaWJ1dGVzT2YucHVzaCh0aGlzLnBvc2l0aW9uLnBhcmVudCksaS5kZXRhY2goKSxyLmRldGFjaCgpfX1fY2FuTWVyZ2VMZWZ0KGUsdCl7Y29uc3Qgbz1lLnByZXZpb3VzU2libGluZztyZXR1cm4gdC5pc0ZpcnN0JiZvIGluc3RhbmNlb2YgV3UmJnRoaXMuY2FuTWVyZ2VXaXRoLmhhcyhvKSYmdGhpcy5tb2RlbC5zY2hlbWEuY2hlY2tNZXJnZShvLGUpfV9jYW5NZXJnZVJpZ2h0KGUsdCl7Y29uc3Qgbz1lLm5leHRTaWJsaW5nO3JldHVybiB0LmlzTGFzdCYmbyBpbnN0YW5jZW9mIFd1JiZ0aGlzLmNhbk1lcmdlV2l0aC5oYXMobykmJnRoaXMubW9kZWwuc2NoZW1hLmNoZWNrTWVyZ2UoZSxvKX1fdHJ5QXV0b3BhcmFncmFwaGluZyhlLHQpe2NvbnN0IG89dGhpcy53cml0ZXIuY3JlYXRlRWxlbWVudCgncGFyYWdyYXBoJyk7dGhpcy5fZ2V0QWxsb3dlZEluKG8sdGhpcy5wb3NpdGlvbi5wYXJlbnQpJiZ0aGlzLnNjaGVtYS5jaGVja0NoaWxkKG8sZSkmJihvLl9hcHBlbmRDaGlsZChlKSx0aGlzLl9oYW5kbGVOb2RlKG8sdCkpfV9jaGVja0FuZFNwbGl0VG9BbGxvd2VkUG9zaXRpb24oZSl7Y29uc3QgdD10aGlzLl9nZXRBbGxvd2VkSW4oZSx0aGlzLnBvc2l0aW9uLnBhcmVudCk7aWYoIXQpcmV0dXJuITE7Zm9yKDt0IT10aGlzLnBvc2l0aW9uLnBhcmVudDspe2lmKHRoaXMuc2NoZW1hLmlzTGltaXQodGhpcy5wb3NpdGlvbi5wYXJlbnQpKXJldHVybiExO2lmKHRoaXMucG9zaXRpb24uaXNBdFN0YXJ0KXtjb25zdCBlPXRoaXMucG9zaXRpb24ucGFyZW50O3RoaXMucG9zaXRpb249S3UuY3JlYXRlQmVmb3JlKGUpLGUuaXNFbXB0eSYmdGhpcy53cml0ZXIucmVtb3ZlKGUpfWVsc2UgaWYodGhpcy5wb3NpdGlvbi5pc0F0RW5kKXRoaXMucG9zaXRpb249S3UuY3JlYXRlQWZ0ZXIodGhpcy5wb3NpdGlvbi5wYXJlbnQpO2Vsc2V7Y29uc3QgZT1LdS5jcmVhdGVBZnRlcih0aGlzLnBvc2l0aW9uLnBhcmVudCk7dGhpcy53cml0ZXIuc3BsaXQodGhpcy5wb3NpdGlvbiksdGhpcy5wb3NpdGlvbj1lLHRoaXMuY2FuTWVyZ2VXaXRoLmFkZCh0aGlzLnBvc2l0aW9uLm5vZGVBZnRlcil9fXJldHVybiEwfV9nZXRBbGxvd2VkSW4oZSx0KXtyZXR1cm4gdGhpcy5zY2hlbWEuY2hlY2tDaGlsZCh0LGUpP3Q6dC5wYXJlbnQ/dGhpcy5fZ2V0QWxsb3dlZEluKGUsdC5wYXJlbnQpOm51bGx9fWNvbnN0IFlnPScgLC4/ITo7XCItKCknO2NsYXNzIFhne2NvbnN0cnVjdG9yKCl7dGhpcy5tYXJrZXJzPW5ldyBHZyx0aGlzLmRvY3VtZW50PW5ldyBLZyh0aGlzKSx0aGlzLnNjaGVtYT1uZXcgZG0sdGhpcy5fcGVuZGluZ0NoYW5nZXM9W10sdGhpcy5fY3VycmVudFdyaXRlcj1udWxsLFsnaW5zZXJ0Q29udGVudCcsJ2RlbGV0ZUNvbnRlbnQnLCdtb2RpZnlTZWxlY3Rpb24nLCdnZXRTZWxlY3RlZENvbnRlbnQnLCdhcHBseU9wZXJhdGlvbiddLmZvckVhY2goKGUpPT50aGlzLmRlY29yYXRlKGUpKSx0aGlzLm9uKCdhcHBseU9wZXJhdGlvbicsKGUsdCk9Pntjb25zdCBvPXRbMF07by5fdmFsaWRhdGUoKX0se3ByaW9yaXR5OidoaWdoZXN0J30pLHRoaXMuc2NoZW1hLnJlZ2lzdGVyKCckcm9vdCcse2lzTGltaXQ6ITB9KSx0aGlzLnNjaGVtYS5yZWdpc3RlcignJGJsb2NrJyx7YWxsb3dJbjonJHJvb3QnLGlzQmxvY2s6ITB9KSx0aGlzLnNjaGVtYS5yZWdpc3RlcignJHRleHQnLHthbGxvd0luOickYmxvY2snfSksdGhpcy5zY2hlbWEucmVnaXN0ZXIoJyRjbGlwYm9hcmRIb2xkZXInLHthbGxvd0NvbnRlbnRPZjonJHJvb3QnLGlzTGltaXQ6ITB9KSx0aGlzLnNjaGVtYS5leHRlbmQoJyR0ZXh0Jyx7YWxsb3dJbjonJGNsaXBib2FyZEhvbGRlcid9KSx0aGlzLnNjaGVtYS5yZWdpc3RlcignJG1hcmtlcicse2FsbG93SW46Wyckcm9vdCcsJyRibG9jayddfSl9Y2hhbmdlKGUpe3JldHVybiAwPT09dGhpcy5fcGVuZGluZ0NoYW5nZXMubGVuZ3RoPyh0aGlzLl9wZW5kaW5nQ2hhbmdlcy5wdXNoKHtiYXRjaDpuZXcgQmcsY2FsbGJhY2s6ZX0pLHRoaXMuX3J1blBlbmRpbmdDaGFuZ2VzKClbMF0pOmUodGhpcy5fY3VycmVudFdyaXRlcil9ZW5xdWV1ZUNoYW5nZShlLHQpeydzdHJpbmcnPT10eXBlb2YgZT9lPW5ldyBCZyhlKTonZnVuY3Rpb24nPT10eXBlb2YgZSYmKHQ9ZSxlPW5ldyBCZyksdGhpcy5fcGVuZGluZ0NoYW5nZXMucHVzaCh7YmF0Y2g6ZSxjYWxsYmFjazp0fSksMT09dGhpcy5fcGVuZGluZ0NoYW5nZXMubGVuZ3RoJiZ0aGlzLl9ydW5QZW5kaW5nQ2hhbmdlcygpfWFwcGx5T3BlcmF0aW9uKGUpe2UuX2V4ZWN1dGUoKX10cmFuc2Zvcm1EZWx0YXMoZSx0LG89ITEpe3JldHVybiBGZy50cmFuc2Zvcm1EZWx0YVNldHMoZSx0LG8/dGhpcy5kb2N1bWVudDpudWxsKX1pbnNlcnRDb250ZW50KGUsdCl7bW4odGhpcyxlLHQpfWRlbGV0ZUNvbnRlbnQoZSx0KXtwbih0aGlzLGUsdCl9bW9kaWZ5U2VsZWN0aW9uKGUsdCl7d24odGhpcyxlLHQpfWdldFNlbGVjdGVkQ29udGVudChlKXtyZXR1cm4gUG4odGhpcyxlKX1oYXNDb250ZW50KGUpe2lmKGUgaW5zdGFuY2VvZiBXdSYmKGU9R3UuY3JlYXRlSW4oZSkpLGUuaXNDb2xsYXBzZWQpcmV0dXJuITE7Zm9yKGNvbnN0IHQgb2YgZS5nZXRJdGVtcygpKWlmKHQuaXMoJ3RleHRQcm94eScpfHx0aGlzLnNjaGVtYS5pc09iamVjdCh0KSlyZXR1cm4hMDtyZXR1cm4hMX1kZXN0cm95KCl7dGhpcy5kb2N1bWVudC5kZXN0cm95KCksdGhpcy5zdG9wTGlzdGVuaW5nKCl9X3J1blBlbmRpbmdDaGFuZ2VzKCl7Y29uc3QgZT1bXTtmb3IoO3RoaXMuX3BlbmRpbmdDaGFuZ2VzLmxlbmd0aDspe2NvbnN0IHQ9dGhpcy5fcGVuZGluZ0NoYW5nZXNbMF0uYmF0Y2g7dGhpcy5fY3VycmVudFdyaXRlcj1uZXcgcWcodGhpcyx0KTtjb25zdCBvPXRoaXMuX3BlbmRpbmdDaGFuZ2VzWzBdLmNhbGxiYWNrKHRoaXMuX2N1cnJlbnRXcml0ZXIpO2UucHVzaChvKSx0aGlzLmZpcmUoJ19jaGFuZ2UnLHRoaXMuX2N1cnJlbnRXcml0ZXIpLHRoaXMuX3BlbmRpbmdDaGFuZ2VzLnNoaWZ0KCksdGhpcy5fY3VycmVudFdyaXRlcj1udWxsfXJldHVybiBlfX1mKFhnLGJjKTtjbGFzcyBaZ3tjb25zdHJ1Y3Rvcigpe3RoaXMuX2xpc3RlbmVyPU9iamVjdC5jcmVhdGUoWWMpfWxpc3RlblRvKGUpe3RoaXMuX2xpc3RlbmVyLmxpc3RlblRvKGUsJ2tleWRvd24nLChlLHQpPT57dGhpcy5fbGlzdGVuZXIuZmlyZSgnX2tleWRvd246Jyt0ZSh0KSx0KX0pfXNldChlLHQsbz17fSl7Y29uc3Qgbj1vZShlKSxpPW8ucHJpb3JpdHk7dGhpcy5fbGlzdGVuZXIubGlzdGVuVG8odGhpcy5fbGlzdGVuZXIsJ19rZXlkb3duOicrbiwoZSxvKT0+e3QobywoKT0+e28ucHJldmVudERlZmF1bHQoKSxvLnN0b3BQcm9wYWdhdGlvbigpLGUuc3RvcCgpfSksZS5yZXR1cm49ITB9LHtwcmlvcml0eTppfSl9cHJlc3MoZSl7cmV0dXJuISF0aGlzLl9saXN0ZW5lci5maXJlKCdfa2V5ZG93bjonK3RlKGUpLGUpfWRlc3Ryb3koKXt0aGlzLl9saXN0ZW5lci5zdG9wTGlzdGVuaW5nKCl9fWNsYXNzIGVmIGV4dGVuZHMgWmd7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmVkaXRvcj1lfXNldChlLHQsbz17fSl7aWYoJ3N0cmluZyc9PXR5cGVvZiB0KXtjb25zdCBlPXQ7dD0odCxvKT0+e3RoaXMuZWRpdG9yLmV4ZWN1dGUoZSksbygpfX1zdXBlci5zZXQoZSx0LG8pfX1jbGFzcyB0Zntjb25zdHJ1Y3RvcihlKXtjb25zdCB0PXRoaXMuY29uc3RydWN0b3IuYnVpbGQmJnRoaXMuY29uc3RydWN0b3IuYnVpbGQucGx1Z2luczt0aGlzLmNvbmZpZz1uZXcgWWEoZSx0aGlzLmNvbnN0cnVjdG9yLmJ1aWxkJiZ0aGlzLmNvbnN0cnVjdG9yLmJ1aWxkLmNvbmZpZyksdGhpcy5jb25maWcuZGVmaW5lKCdwbHVnaW5zJyx0KSx0aGlzLnBsdWdpbnM9bmV3IGltKHRoaXMsdCksdGhpcy5jb21tYW5kcz1uZXcgcm0sdGhpcy5sb2NhbGU9bmV3IGFtKHRoaXMuY29uZmlnLmdldCgnbGFuZ3VhZ2UnKSksdGhpcy50PXRoaXMubG9jYWxlLnQsdGhpcy5zZXQoJ2lzUmVhZE9ubHknLCExKSx0aGlzLm1vZGVsPW5ldyBYZyx0aGlzLmRhdGE9bmV3IG1tKHRoaXMubW9kZWwpLHRoaXMuZWRpdGluZz1uZXcgbm0odGhpcy5tb2RlbCksdGhpcy5lZGl0aW5nLnZpZXcuZG9jdW1lbnQuYmluZCgnaXNSZWFkT25seScpLnRvKHRoaXMpLHRoaXMuY29udmVyc2lvbj1uZXcgcG0sdGhpcy5jb252ZXJzaW9uLnJlZ2lzdGVyKCdkb3duY2FzdCcsW3RoaXMuZWRpdGluZy5kb3duY2FzdERpc3BhdGNoZXIsdGhpcy5kYXRhLmRvd25jYXN0RGlzcGF0Y2hlcl0pLHRoaXMuY29udmVyc2lvbi5yZWdpc3RlcignZWRpdGluZ0Rvd25jYXN0JyxbdGhpcy5lZGl0aW5nLmRvd25jYXN0RGlzcGF0Y2hlcl0pLHRoaXMuY29udmVyc2lvbi5yZWdpc3RlcignZGF0YURvd25jYXN0JyxbdGhpcy5kYXRhLmRvd25jYXN0RGlzcGF0Y2hlcl0pLHRoaXMuY29udmVyc2lvbi5yZWdpc3RlcigndXBjYXN0JyxbdGhpcy5kYXRhLnVwY2FzdERpc3BhdGNoZXJdKSx0aGlzLmtleXN0cm9rZXM9bmV3IGVmKHRoaXMpLHRoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVkaXRpbmcudmlldy5kb2N1bWVudCl9aW5pdFBsdWdpbnMoKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIGUucmVkdWNlKChlLG8pPT5vW3RdP2UudGhlbihvW3RdLmJpbmQobykpOmUsUHJvbWlzZS5yZXNvbHZlKCkpfWNvbnN0IHQ9dGhpcyxvPXRoaXMuY29uZmlnO3JldHVybiBmdW5jdGlvbigpe2NvbnN0IGU9by5nZXQoJ3BsdWdpbnMnKXx8W10sbj1vLmdldCgncmVtb3ZlUGx1Z2lucycpfHxbXTtyZXR1cm4gdC5wbHVnaW5zLmxvYWQoZSxuKX0oKS50aGVuKCh0KT0+ZSh0LCdpbml0JykudGhlbigoKT0+ZSh0LCdhZnRlckluaXQnKSkpLnRoZW4oKCk9PnRoaXMuZmlyZSgncGx1Z2luc1JlYWR5JykpfWRlc3Ryb3koKXtyZXR1cm4gdGhpcy5maXJlKCdkZXN0cm95JyksdGhpcy5zdG9wTGlzdGVuaW5nKCksdGhpcy5jb21tYW5kcy5kZXN0cm95KCksdGhpcy5wbHVnaW5zLmRlc3Ryb3koKS50aGVuKCgpPT57dGhpcy5tb2RlbC5kZXN0cm95KCksdGhpcy5kYXRhLmRlc3Ryb3koKSx0aGlzLmVkaXRpbmcuZGVzdHJveSgpLHRoaXMua2V5c3Ryb2tlcy5kZXN0cm95KCl9KX1leGVjdXRlKC4uLmUpe3RoaXMuY29tbWFuZHMuZXhlY3V0ZSguLi5lKX1zdGF0aWMgY3JlYXRlKGUpe3JldHVybiBuZXcgUHJvbWlzZSgodCk9Pntjb25zdCBvPW5ldyB0aGlzKGUpO3Qoby5pbml0UGx1Z2lucygpLnRoZW4oKCk9PntvLmZpcmUoJ2RhdGFSZWFkeScpLG8uZmlyZSgncmVhZHknKX0pLnRoZW4oKCk9Pm8pKX0pfX1mKHRmLGJjKTtjb25zdCBvZj17c2V0RGF0YShlKXt0aGlzLmRhdGEuc2V0KGUpfSxnZXREYXRhKCl7cmV0dXJuIHRoaXMuZGF0YS5nZXQoKX19O2NvbnN0IG5mPXt1cGRhdGVFbGVtZW50KCl7U24odGhpcy5lbGVtZW50LHRoaXMuZGF0YS5nZXQoKSl9fTtjbGFzcyByZntnZXRIdG1sKGUpe2NvbnN0IHQ9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCcnKSxvPXQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoZSksby5pbm5lckhUTUx9fWNsYXNzIGFme2NvbnN0cnVjdG9yKCl7dGhpcy5fZG9tUGFyc2VyPW5ldyBET01QYXJzZXIsdGhpcy5fZG9tQ29udmVydGVyPW5ldyBKYyh7YmxvY2tGaWxsZXI6V2N9KSx0aGlzLl9odG1sV3JpdGVyPW5ldyByZn10b0RhdGEoZSl7Y29uc3QgdD10aGlzLl9kb21Db252ZXJ0ZXIudmlld1RvRG9tKGUsZG9jdW1lbnQpO3JldHVybiB0aGlzLl9odG1sV3JpdGVyLmdldEh0bWwodCl9dG9WaWV3KGUpe2NvbnN0IHQ9dGhpcy5fdG9Eb20oZSk7cmV0dXJuIHRoaXMuX2RvbUNvbnZlcnRlci5kb21Ub1ZpZXcodCl9X3RvRG9tKGUpe2NvbnN0IHQ9dGhpcy5fZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyhlLCd0ZXh0L2h0bWwnKSxvPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG49dC5ib2R5LmNoaWxkTm9kZXM7Zm9yKDswPG4ubGVuZ3RoOylvLmFwcGVuZENoaWxkKG5bMF0pO3JldHVybiBvfX1jbGFzcyBzZntjb25zdHJ1Y3RvcihlKXt0aGlzLmVkaXRvcj1lLHRoaXMuX2NvbXBvbmVudHM9bmV3IE1hcH0qbmFtZXMoKXtmb3IoY29uc3QgZSBvZiB0aGlzLl9jb21wb25lbnRzLnZhbHVlcygpKXlpZWxkIGUub3JpZ2luYWxOYW1lfWFkZChlLHQpe2lmKHRoaXMuaGFzKGUpKXRocm93IG5ldyBaYSgnY29tcG9uZW50ZmFjdG9yeS1pdGVtLWV4aXN0czogVGhlIGl0ZW0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIGNvbXBvbmVudCBmYWN0b3J5Licse25hbWU6ZX0pO3RoaXMuX2NvbXBvbmVudHMuc2V0KFJuKGUpLHtjYWxsYmFjazp0LG9yaWdpbmFsTmFtZTplfSl9Y3JlYXRlKGUpe2lmKCF0aGlzLmhhcyhlKSl0aHJvdyBuZXcgWmEoJ2NvbXBvbmVudGZhY3RvcnktaXRlbS1taXNzaW5nOiBUaGUgcmVxdWlyZWQgY29tcG9uZW50IGlzIG5vdCByZWdpc3RlcmVkIGluIHRoZSBmYWN0b3J5Licse25hbWU6ZX0pO3JldHVybiB0aGlzLl9jb21wb25lbnRzLmdldChSbihlKSkuY2FsbGJhY2sodGhpcy5lZGl0b3IubG9jYWxlKX1oYXMoZSl7cmV0dXJuIHRoaXMuX2NvbXBvbmVudHMuaGFzKFJuKGUpKX19Y2xhc3MgbGZ7Y29uc3RydWN0b3IoKXt0aGlzLnNldCgnaXNGb2N1c2VkJywhMSksdGhpcy5mb2N1c2VkRWxlbWVudD1udWxsLHRoaXMuX2VsZW1lbnRzPW5ldyBTZXQsdGhpcy5fbmV4dEV2ZW50TG9vcFRpbWVvdXQ9bnVsbH1hZGQoZSl7aWYodGhpcy5fZWxlbWVudHMuaGFzKGUpKXRocm93IG5ldyBaYSgnZm9jdXNUcmFja2VyLWFkZC1lbGVtZW50LWFscmVhZHktZXhpc3QnKTt0aGlzLmxpc3RlblRvKGUsJ2ZvY3VzJywoKT0+dGhpcy5fZm9jdXMoZSkse3VzZUNhcHR1cmU6ITB9KSx0aGlzLmxpc3RlblRvKGUsJ2JsdXInLCgpPT50aGlzLl9ibHVyKCkse3VzZUNhcHR1cmU6ITB9KSx0aGlzLl9lbGVtZW50cy5hZGQoZSl9cmVtb3ZlKGUpe2U9PT10aGlzLmZvY3VzZWRFbGVtZW50JiZ0aGlzLl9ibHVyKGUpLHRoaXMuX2VsZW1lbnRzLmhhcyhlKSYmKHRoaXMuc3RvcExpc3RlbmluZyhlKSx0aGlzLl9lbGVtZW50cy5kZWxldGUoZSkpfV9mb2N1cyhlKXtjbGVhclRpbWVvdXQodGhpcy5fbmV4dEV2ZW50TG9vcFRpbWVvdXQpLHRoaXMuZm9jdXNlZEVsZW1lbnQ9ZSx0aGlzLmlzRm9jdXNlZD0hMH1fYmx1cigpe2NsZWFyVGltZW91dCh0aGlzLl9uZXh0RXZlbnRMb29wVGltZW91dCksdGhpcy5fbmV4dEV2ZW50TG9vcFRpbWVvdXQ9c2V0VGltZW91dCgoKT0+e3RoaXMuZm9jdXNlZEVsZW1lbnQ9bnVsbCx0aGlzLmlzRm9jdXNlZD0hMX0sMCl9fWYobGYsWWMpLGYobGYsYmMpO2NsYXNzIGRme2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5lZGl0b3I9ZSx0aGlzLnZpZXc9dCx0aGlzLmNvbXBvbmVudEZhY3Rvcnk9bmV3IHNmKGUpLHRoaXMuZm9jdXNUcmFja2VyPW5ldyBsZix0aGlzLl90b29sYmFyQ29uZmlnPVZuKGUuY29uZmlnLmdldCgndG9vbGJhcicpKX1pbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PXRoaXMudmlldzt0LnJlbmRlcigpLHQuc3RpY2t5UGFuZWwuYmluZCgnaXNBY3RpdmUnKS50byh0aGlzLmZvY3VzVHJhY2tlciwnaXNGb2N1c2VkJyksdC5zdGlja3lQYW5lbC5saW1pdGVyRWxlbWVudD10LmVsZW1lbnQsdGhpcy5fdG9vbGJhckNvbmZpZy52aWV3cG9ydFRvcE9mZnNldCYmKHQuc3RpY2t5UGFuZWwudmlld3BvcnRUb3BPZmZzZXQ9dGhpcy5fdG9vbGJhckNvbmZpZy52aWV3cG9ydFRvcE9mZnNldCk7Y29uc3Qgbz1lLmVkaXRpbmcudmlldy5kb2N1bWVudC5nZXRSb290KCk7dC5lZGl0YWJsZS5iaW5kKCdpc1JlYWRPbmx5JykudG8obyksdC5lZGl0YWJsZS5iaW5kKCdpc0ZvY3VzZWQnKS50byhlLmVkaXRpbmcudmlldy5kb2N1bWVudCksdC5lZGl0YWJsZS5uYW1lPW8ucm9vdE5hbWUsdGhpcy5mb2N1c1RyYWNrZXIuYWRkKHRoaXMudmlldy5lZGl0YWJsZUVsZW1lbnQpLHRoaXMudmlldy50b29sYmFyLmZpbGxGcm9tQ29uZmlnKHRoaXMuX3Rvb2xiYXJDb25maWcuaXRlbXMsdGhpcy5jb21wb25lbnRGYWN0b3J5KSxJbih7b3JpZ2luOmUuZWRpdGluZy52aWV3LG9yaWdpbkZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixvcmlnaW5LZXlzdHJva2VIYW5kbGVyOmUua2V5c3Ryb2tlcyx0b29sYmFyOnRoaXMudmlldy50b29sYmFyfSl9ZGVzdHJveSgpe3RoaXMudmlldy5kZXN0cm95KCl9fWNsYXNzIGNmIGV4dGVuZHMgUGN7Y29uc3RydWN0b3IoZSl7c3VwZXIoe2lkUHJvcGVydHk6J3ZpZXdVaWQnfSksdGhpcy5vbignYWRkJywoZSx0LG8pPT57dC5pc1JlbmRlcmVkfHx0LnJlbmRlcigpLHQuZWxlbWVudCYmdGhpcy5fcGFyZW50RWxlbWVudCYmdGhpcy5fcGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodC5lbGVtZW50LHRoaXMuX3BhcmVudEVsZW1lbnQuY2hpbGRyZW5bb10pfSksdGhpcy5vbigncmVtb3ZlJywoZSx0KT0+e3QuZWxlbWVudCYmdGhpcy5fcGFyZW50RWxlbWVudCYmdC5lbGVtZW50LnJlbW92ZSgpfSksdGhpcy5sb2NhbGU9ZSx0aGlzLl9wYXJlbnRFbGVtZW50PW51bGx9ZGVzdHJveSgpe3RoaXMubWFwKChlKT0+ZS5kZXN0cm95KCkpfXNldFBhcmVudChlKXt0aGlzLl9wYXJlbnRFbGVtZW50PWV9ZGVsZWdhdGUoLi4uZSl7aWYoIWUubGVuZ3RofHwhRm4oZSkpdGhyb3cgbmV3IFphKCd1aS12aWV3Y29sbGVjdGlvbi1kZWxlZ2F0ZS13cm9uZy1ldmVudHM6IEFsbCBldmVudCBuYW1lcyBtdXN0IGJlIHN0cmluZ3MuJyk7cmV0dXJue3RvOih0KT0+e2Zvcihjb25zdCBvIG9mIHRoaXMpZm9yKGNvbnN0IG4gb2YgZSlvLmRlbGVnYXRlKG4pLnRvKHQpO3RoaXMub24oJ2FkZCcsKG8sbik9Pntmb3IoY29uc3QgaSBvZiBlKW4uZGVsZWdhdGUoaSkudG8odCl9KSx0aGlzLm9uKCdyZW1vdmUnLChvLG4pPT57Zm9yKGNvbnN0IGkgb2YgZSluLnN0b3BEZWxlZ2F0aW5nKGksdCl9KX19fX1mKFBjLGJjKTt2YXIgdWY9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gUGQoZSwhMCwhMCx0KX07Y2xhc3MgbWZ7Y29uc3RydWN0b3IoZSl7T2JqZWN0LmFzc2lnbih0aGlzLHFuKGpuKGUpKSksdGhpcy5faXNSZW5kZXJlZD0hMSx0aGlzLl9yZXZlcnREYXRhPW51bGx9cmVuZGVyKCl7Y29uc3QgZT10aGlzLl9yZW5kZXJOb2RlKHtpbnRvRnJhZ21lbnQ6ITB9KTtyZXR1cm4gdGhpcy5faXNSZW5kZXJlZD0hMCxlfWFwcGx5KGUpe3JldHVybiB0aGlzLl9yZXZlcnREYXRhPXRpKCksdGhpcy5fcmVuZGVyTm9kZSh7bm9kZTplLGlzQXBwbHlpbmc6ITAscmV2ZXJ0RGF0YTp0aGlzLl9yZXZlcnREYXRhfSksZX1yZXZlcnQoZSl7aWYoIXRoaXMuX3JldmVydERhdGEpdGhyb3cgbmV3IFphKCd1aS10ZW1wbGF0ZS1yZXZlcnQtbm90LWFwcGxpZWQ6IEF0dGVtcHRpbmcgdG8gcmV2ZXJ0IGEgdGVtcGxhdGUgd2hpY2ggaGFzIG5vdCBiZWVuIGFwcGxpZWQgeWV0LicpO3RoaXMuX3JldmVydFRlbXBsYXRlRnJvbU5vZGUoZSx0aGlzLl9yZXZlcnREYXRhKX0qZ2V0Vmlld3MoKXtmdW5jdGlvbiplKHQpe2lmKHQuY2hpbGRyZW4pZm9yKGNvbnN0IG8gb2YgdC5jaGlsZHJlbilYbihvKT95aWVsZCBvOlpuKG8pJiYoeWllbGQqZShvKSl9eWllbGQqZSh0aGlzKX1zdGF0aWMgYmluZChlLHQpe3JldHVybnt0byhvLG4pe3JldHVybiBuZXcgZ2Yoe2V2ZW50TmFtZU9yRnVuY3Rpb246byxhdHRyaWJ1dGU6byxvYnNlcnZhYmxlOmUsZW1pdHRlcjp0LGNhbGxiYWNrOm59KX0saWYobyxuLGkpe3JldHVybiBuZXcgZmYoe29ic2VydmFibGU6ZSxlbWl0dGVyOnQsYXR0cmlidXRlOm8sdmFsdWVJZlRydWU6bixjYWxsYmFjazppfSl9fX1zdGF0aWMgZXh0ZW5kKGUsdCl7ZS5faXNSZW5kZXJlZCYmUnUud2FybigndGVtcGxhdGUtZXh0ZW5kLXJlbmRlcjogQXR0ZW1wdGluZyB0byBleHRlbmQgYSB0ZW1wbGF0ZSB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIHJlbmRlcmVkLicpLFFuKGUscW4oam4odCkpKX1fcmVuZGVyTm9kZShlKXtsZXQgdDtpZih0PWUubm9kZT90aGlzLnRhZyYmdGhpcy50ZXh0OnRoaXMudGFnP3RoaXMudGV4dDohdGhpcy50ZXh0LHQpdGhyb3cgbmV3IFphKCd1aS10ZW1wbGF0ZS13cm9uZy1zeW50YXg6IE5vZGUgZGVmaW5pdGlvbiBtdXN0IGhhdmUgZWl0aGVyIFwidGFnXCIgb3IgXCJ0ZXh0XCIgd2hlbiByZW5kZXJpbmcgYSBuZXcgTm9kZS4nKTtyZXR1cm4gdGhpcy50ZXh0P3RoaXMuX3JlbmRlclRleHQoZSk6dGhpcy5fcmVuZGVyRWxlbWVudChlKX1fcmVuZGVyRWxlbWVudChlKXtsZXQgdD1lLm5vZGU7cmV0dXJuIHR8fCh0PWUubm9kZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlModGhpcy5uc3x8J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLHRoaXMudGFnKSksdGhpcy5fcmVuZGVyQXR0cmlidXRlcyhlKSx0aGlzLl9yZW5kZXJFbGVtZW50Q2hpbGRyZW4oZSksdGhpcy5fc2V0VXBMaXN0ZW5lcnMoZSksdH1fcmVuZGVyVGV4dChlKXtsZXQgdD1lLm5vZGU7cmV0dXJuIHQ/ZS5yZXZlcnREYXRhLnRleHQ9dC50ZXh0Q29udGVudDp0PWUubm9kZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyksTm4odGhpcy50ZXh0KT90aGlzLl9iaW5kVG9PYnNlcnZhYmxlKHtzY2hlbWE6dGhpcy50ZXh0LHVwZGF0ZXI6Qm4odCksZGF0YTplfSk6dC50ZXh0Q29udGVudD10aGlzLnRleHQuam9pbignJyksdH1fcmVuZGVyQXR0cmlidXRlcyhlKXtsZXQgdCxvLG4saTtpZih0aGlzLmF0dHJpYnV0ZXMpe2NvbnN0IHI9ZS5ub2RlLGE9ZS5yZXZlcnREYXRhO2Zvcih0IGluIHRoaXMuYXR0cmlidXRlcylpZihuPXIuZ2V0QXR0cmlidXRlKHQpLG89dGhpcy5hdHRyaWJ1dGVzW3RdLGEmJihhLmF0dHJpYnV0ZXNbdF09biksaT1wcyhvWzBdKSYmb1swXS5ucz9vWzBdLm5zOm51bGwsTm4obykpe2NvbnN0IHM9aT9vWzBdLnZhbHVlOm87YSYmb2kodCkmJnMudW5zaGlmdChuKSx0aGlzLl9iaW5kVG9PYnNlcnZhYmxlKHtzY2hlbWE6cyx1cGRhdGVyOkxuKHIsdCxpKSxkYXRhOmV9KX1lbHNlJ3N0eWxlJz09dCYmJ3N0cmluZychPXR5cGVvZiBvWzBdP3RoaXMuX3JlbmRlclN0eWxlQXR0cmlidXRlKG9bMF0sZSk6KGEmJm4mJm9pKHQpJiZvLnVuc2hpZnQobiksbz1vLm1hcCgoZSk9PmU/ZS52YWx1ZXx8ZTplKS5yZWR1Y2UoKGUsdCk9PmUuY29uY2F0KHQpLFtdKS5yZWR1Y2UoJG4sJycpLFluKG8pfHxyLnNldEF0dHJpYnV0ZU5TKGksdCxvKSl9fV9yZW5kZXJTdHlsZUF0dHJpYnV0ZShlLHQpe2NvbnN0IG89dC5ub2RlO2Zvcihjb25zdCBuIGluIGUpe2NvbnN0IGk9ZVtuXTtObihpKT90aGlzLl9iaW5kVG9PYnNlcnZhYmxlKHtzY2hlbWE6W2ldLHVwZGF0ZXI6em4obyxuKSxkYXRhOnR9KTpvLnN0eWxlW25dPWl9fV9yZW5kZXJFbGVtZW50Q2hpbGRyZW4oZSl7Y29uc3QgdD1lLm5vZGUsbz1lLmludG9GcmFnbWVudD9kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk6dCxuPWUuaXNBcHBseWluZztsZXQgaT0wO2Zvcihjb25zdCByIG9mIHRoaXMuY2hpbGRyZW4paWYoZWkocikpe2lmKCFuKXtyLnNldFBhcmVudCh0KTtmb3IoY29uc3QgZSBvZiByKW8uYXBwZW5kQ2hpbGQoZS5lbGVtZW50KX19ZWxzZSBpZihYbihyKSlufHwoIXIuaXNSZW5kZXJlZCYmci5yZW5kZXIoKSxvLmFwcGVuZENoaWxkKHIuZWxlbWVudCkpO2Vsc2UgaWYoTWUocikpby5hcHBlbmRDaGlsZChyKTtlbHNlIGlmKG4pe2NvbnN0IHQ9ZS5yZXZlcnREYXRhLG49dGkoKTt0LmNoaWxkcmVuLnB1c2gobiksci5fcmVuZGVyTm9kZSh7bm9kZTpvLmNoaWxkTm9kZXNbaSsrXSxpc0FwcGx5aW5nOiEwLHJldmVydERhdGE6bn0pfWVsc2Ugby5hcHBlbmRDaGlsZChyLnJlbmRlcigpKTtlLmludG9GcmFnbWVudCYmdC5hcHBlbmRDaGlsZChvKX1fc2V0VXBMaXN0ZW5lcnMoZSl7aWYodGhpcy5ldmVudExpc3RlbmVycylmb3IoY29uc3QgdCBpbiB0aGlzLmV2ZW50TGlzdGVuZXJzKXtjb25zdCBvPXRoaXMuZXZlbnRMaXN0ZW5lcnNbdF0ubWFwKChvKT0+e2NvbnN0W24saV09dC5zcGxpdCgnQCcpO3JldHVybiBvLmFjdGl2YXRlRG9tRXZlbnRMaXN0ZW5lcihuLGksZSl9KTtlLnJldmVydERhdGEmJmUucmV2ZXJ0RGF0YS5iaW5kaW5ncy5wdXNoKG8pfX1fYmluZFRvT2JzZXJ2YWJsZSh7c2NoZW1hOmUsdXBkYXRlcjp0LGRhdGE6b30pe2NvbnN0IG49by5yZXZlcnREYXRhO0RuKGUsdCxvKTtjb25zdCBpPWUuZmlsdGVyKChlKT0+IVluKGUpKS5maWx0ZXIoKGUpPT5lLm9ic2VydmFibGUpLm1hcCgobik9Pm4uYWN0aXZhdGVBdHRyaWJ1dGVMaXN0ZW5lcihlLHQsbykpO24mJm4uYmluZGluZ3MucHVzaChpKX1fcmV2ZXJ0VGVtcGxhdGVGcm9tTm9kZShlLHQpe2Zvcihjb25zdCBvIG9mIHQuYmluZGluZ3MpZm9yKGNvbnN0IGUgb2YgbyllKCk7aWYodC50ZXh0KXJldHVybiB2b2lkKGUudGV4dENvbnRlbnQ9dC50ZXh0KTtmb3IoY29uc3QgbyBpbiB0LmF0dHJpYnV0ZXMpe2NvbnN0IG49dC5hdHRyaWJ1dGVzW29dO251bGw9PT1uP2UucmVtb3ZlQXR0cmlidXRlKG8pOmUuc2V0QXR0cmlidXRlKG8sbil9Zm9yKGxldCBvPTA7bzx0LmNoaWxkcmVuLmxlbmd0aDsrK28pdGhpcy5fcmV2ZXJ0VGVtcGxhdGVGcm9tTm9kZShlLmNoaWxkTm9kZXNbb10sdC5jaGlsZHJlbltvXSl9fWYobWYsc3MpO2NsYXNzIHBme2NvbnN0cnVjdG9yKGUpe09iamVjdC5hc3NpZ24odGhpcyxlKX1nZXRWYWx1ZShlKXtjb25zdCB0PXRoaXMub2JzZXJ2YWJsZVt0aGlzLmF0dHJpYnV0ZV07cmV0dXJuIHRoaXMuY2FsbGJhY2s/dGhpcy5jYWxsYmFjayh0LGUpOnR9YWN0aXZhdGVBdHRyaWJ1dGVMaXN0ZW5lcihlLHQsbyl7Y29uc3Qgbj0oKT0+RG4oZSx0LG8pO3JldHVybiB0aGlzLmVtaXR0ZXIubGlzdGVuVG8odGhpcy5vYnNlcnZhYmxlLCdjaGFuZ2U6Jyt0aGlzLmF0dHJpYnV0ZSxuKSwoKT0+e3RoaXMuZW1pdHRlci5zdG9wTGlzdGVuaW5nKHRoaXMub2JzZXJ2YWJsZSwnY2hhbmdlOicrdGhpcy5hdHRyaWJ1dGUsbil9fX1jbGFzcyBnZiBleHRlbmRzIHBme2FjdGl2YXRlRG9tRXZlbnRMaXN0ZW5lcihlLHQsbyl7Y29uc3Qgbj0oZSxvKT0+eyghdHx8by50YXJnZXQubWF0Y2hlcyh0KSkmJignZnVuY3Rpb24nPT10eXBlb2YgdGhpcy5ldmVudE5hbWVPckZ1bmN0aW9uP3RoaXMuZXZlbnROYW1lT3JGdW5jdGlvbihvKTp0aGlzLm9ic2VydmFibGUuZmlyZSh0aGlzLmV2ZW50TmFtZU9yRnVuY3Rpb24sbykpfTtyZXR1cm4gdGhpcy5lbWl0dGVyLmxpc3RlblRvKG8ubm9kZSxlLG4pLCgpPT57dGhpcy5lbWl0dGVyLnN0b3BMaXN0ZW5pbmcoby5ub2RlLGUsbil9fX1jbGFzcyBmZiBleHRlbmRzIHBme2dldFZhbHVlKGUpe2NvbnN0IHQ9c3VwZXIuZ2V0VmFsdWUoZSk7cmV0dXJuIVluKHQpJiYodGhpcy52YWx1ZUlmVHJ1ZXx8ITApfX12YXIgaGY9bygxMSksYmY9by5uKGhmKTtjbGFzcyBrZntjb25zdHJ1Y3RvcihlKXt0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLmlzUmVuZGVyZWQ9ITEsdGhpcy5sb2NhbGU9ZSx0aGlzLnQ9ZSYmZS50LHRoaXMuX3ZpZXdDb2xsZWN0aW9ucz1uZXcgUGMsdGhpcy5fdW5ib3VuZENoaWxkcmVuPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpLHRoaXMuX3ZpZXdDb2xsZWN0aW9ucy5vbignYWRkJywodCxvKT0+e28ubG9jYWxlPWV9KSx0aGlzLmRlY29yYXRlKCdyZW5kZXInKX1nZXQgYmluZFRlbXBsYXRlKCl7cmV0dXJuIHRoaXMuX2JpbmRUZW1wbGF0ZT90aGlzLl9iaW5kVGVtcGxhdGU6dGhpcy5fYmluZFRlbXBsYXRlPW1mLmJpbmQodGhpcyx0aGlzKX1jcmVhdGVDb2xsZWN0aW9uKCl7Y29uc3QgZT1uZXcgY2Y7cmV0dXJuIHRoaXMuX3ZpZXdDb2xsZWN0aW9ucy5hZGQoZSksZX1yZWdpc3RlckNoaWxkKGUpe1AoZSl8fChlPVtlXSk7Zm9yKGNvbnN0IHQgb2YgZSl0aGlzLl91bmJvdW5kQ2hpbGRyZW4uYWRkKHQpfWRlcmVnaXN0ZXJDaGlsZChlKXtQKGUpfHwoZT1bZV0pO2Zvcihjb25zdCB0IG9mIGUpdGhpcy5fdW5ib3VuZENoaWxkcmVuLnJlbW92ZSh0KX1zZXRUZW1wbGF0ZShlKXt0aGlzLnRlbXBsYXRlPW5ldyBtZihlKX1leHRlbmRUZW1wbGF0ZShlKXttZi5leHRlbmQodGhpcy50ZW1wbGF0ZSxlKX1yZW5kZXIoKXtpZih0aGlzLmlzUmVuZGVyZWQpdGhyb3cgbmV3IFphKCd1aS12aWV3LXJlbmRlci1hbHJlYWR5LXJlbmRlcmVkOiBUaGlzIFZpZXcgaGFzIGFscmVhZHkgYmVlbiByZW5kZXJlZC4nKTt0aGlzLnRlbXBsYXRlJiYodGhpcy5lbGVtZW50PXRoaXMudGVtcGxhdGUucmVuZGVyKCksdGhpcy5yZWdpc3RlckNoaWxkKHRoaXMudGVtcGxhdGUuZ2V0Vmlld3MoKSkpLHRoaXMuaXNSZW5kZXJlZD0hMH1kZXN0cm95KCl7dGhpcy5zdG9wTGlzdGVuaW5nKCksdGhpcy5fdmlld0NvbGxlY3Rpb25zLm1hcCgoZSk9PmUuZGVzdHJveSgpKX19ZihrZixZYyksZihrZixiYyk7dmFyIF9mPW8oMTQpLHdmPW8ubihfZik7Y2xhc3MgdmYgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmJvZHk9dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCksdGhpcy5fcmVuZGVyQm9keUNvbGxlY3Rpb24oKX1kZXN0cm95KCl7cmV0dXJuIHRoaXMuX2JvZHlDb2xsZWN0aW9uQ29udGFpbmVyLnJlbW92ZSgpLHN1cGVyLmRlc3Ryb3koKX1fcmVuZGVyQm9keUNvbGxlY3Rpb24oKXtjb25zdCBlPXRoaXMuX2JvZHlDb2xsZWN0aW9uQ29udGFpbmVyPW5ldyBtZih7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1yZXNldF9hbGwnLCdjay1ib2R5JywnY2stcm91bmRlZC1jb3JuZXJzJ119LGNoaWxkcmVuOnRoaXMuYm9keX0pLnJlbmRlcigpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSl9fXZhciB5Zj1vKDE2KSx4Zj1vLm4oeWYpO2NsYXNzIENmIGV4dGVuZHMga2Z7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zZXQoJ3RleHQnKSx0aGlzLnNldCgnZm9yJyk7Y29uc3QgdD10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6J2xhYmVsJyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stbGFiZWwnXSxmb3I6dC50bygnZm9yJyl9LGNoaWxkcmVuOlt7dGV4dDp0LnRvKCd0ZXh0Jyl9XX0pfX1jbGFzcyBBZiBleHRlbmRzIHZme2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpO2NvbnN0IHQ9aSgpO3RoaXMudG9wPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpLHRoaXMubWFpbj10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKSx0aGlzLl92b2ljZUxhYmVsVmlldz10aGlzLl9jcmVhdGVWb2ljZUxhYmVsKHQpLHRoaXMuc2V0VGVtcGxhdGUoe3RhZzonZGl2JyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stcmVzZXQnLCdjay1lZGl0b3InLCdjay1yb3VuZGVkLWNvcm5lcnMnXSxyb2xlOidhcHBsaWNhdGlvbicsZGlyOidsdHInLGxhbmc6ZS5sYW5ndWFnZSxcImFyaWEtbGFiZWxsZWRieVwiOmBjay1lZGl0b3JfX2FyaWEtbGFiZWxfJHt0fWB9LGNoaWxkcmVuOlt0aGlzLl92b2ljZUxhYmVsVmlldyx7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1lZGl0b3JfX3RvcCcsJ2NrLXJlc2V0X2FsbCddLHJvbGU6J3ByZXNlbnRhdGlvbid9LGNoaWxkcmVuOnRoaXMudG9wfSx7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1lZGl0b3JfX21haW4nXSxyb2xlOidwcmVzZW50YXRpb24nfSxjaGlsZHJlbjp0aGlzLm1haW59XX0pfV9jcmVhdGVWb2ljZUxhYmVsKGUpe2NvbnN0IG89dGhpcy50LHQ9bmV3IENmO3JldHVybiB0LnRleHQ9bygnYWYnKSx0LmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntpZDpgY2stZWRpdG9yX19hcmlhLWxhYmVsXyR7ZX1gLGNsYXNzOidjay12b2ljZS1sYWJlbCd9fSksdH19Y2xhc3MgVGYgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUpO2NvbnN0IG89dGhpcy5iaW5kVGVtcGxhdGU7dCYmKHRoaXMuZWxlbWVudD10aGlzLmVkaXRhYmxlRWxlbWVudD10KSx0aGlzLnNldFRlbXBsYXRlKHt0YWc6J2RpdicsYXR0cmlidXRlczp7Y2xhc3M6WydjaycsJ2NrLWNvbnRlbnQnLCdjay1lZGl0b3JfX2VkaXRhYmxlJywnY2stcm91bmRlZC1jb3JuZXJzJyxvLnRvKCdpc0ZvY3VzZWQnLChlKT0+ZT8nY2stZm9jdXNlZCc6J2NrLWJsdXJyZWQnKV0sY29udGVudGVkaXRhYmxlOm8udG8oJ2lzUmVhZE9ubHknLChlKT0+IWUpfX0pLHRoaXMuc2V0KCdpc1JlYWRPbmx5JywhMSksdGhpcy5zZXQoJ2lzRm9jdXNlZCcsITEpLHRoaXMuZXh0ZXJuYWxFbGVtZW50PXR9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCksdGhpcy5leHRlcm5hbEVsZW1lbnQ/dGhpcy50ZW1wbGF0ZS5hcHBseSh0aGlzLmVsZW1lbnQ9dGhpcy5leHRlcm5hbEVsZW1lbnQpOnRoaXMuZWRpdGFibGVFbGVtZW50PXRoaXMuZWxlbWVudH1kZXN0cm95KCl7dGhpcy5leHRlcm5hbEVsZW1lbnQmJnRoaXMudGVtcGxhdGUucmV2ZXJ0KHRoaXMuZXh0ZXJuYWxFbGVtZW50KSxzdXBlci5kZXN0cm95KCl9fWNsYXNzIFBmIGV4dGVuZHMgVGZ7Y29uc3RydWN0b3IoZSxvKXtzdXBlcihlLG8pO2NvbnN0IG49dGhpcy5iaW5kVGVtcGxhdGUsaT10aGlzLnQ7dGhpcy5zZXQoJ25hbWUnLG51bGwpO3RoaXMuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e3JvbGU6J3RleHRib3gnLFwiYXJpYS1sYWJlbFwiOm4udG8oJ25hbWUnLChlKT0+aSgnYWUnLFtlXSkpLGNsYXNzOidjay1lZGl0b3JfX2VkaXRhYmxlX2lubGluZSd9fSl9fXZhciBFZj1vKDE4KSxTZj1vLm4oRWYpO2NvbnN0IE9mPW5pKCdweCcpO2NsYXNzIFJmIGV4dGVuZHMga2Z7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSk7Y29uc3QgdD10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldCgnaXNBY3RpdmUnLCExKSx0aGlzLnNldCgnaXNTdGlja3knLCExKSx0aGlzLnNldCgnbGltaXRlckVsZW1lbnQnLG51bGwpLHRoaXMuc2V0KCdsaW1pdGVyQm90dG9tT2Zmc2V0Jyw1MCksdGhpcy5zZXQoJ3ZpZXdwb3J0VG9wT2Zmc2V0JywwKSx0aGlzLnNldCgnX21hcmdpbkxlZnQnLG51bGwpLHRoaXMuc2V0KCdfaXNTdGlja3lUb1RoZUxpbWl0ZXInLCExKSx0aGlzLnNldCgnX2hhc1ZpZXdwb3J0VG9wT2Zmc2V0JywhMSksdGhpcy5jb250ZW50PXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpLHRoaXMuX2NvbnRlbnRQYW5lbFBsYWNlaG9sZGVyPW5ldyBtZih7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1zdGlja3ktcGFuZWxfX3BsYWNlaG9sZGVyJ10sc3R5bGU6e2Rpc3BsYXk6dC50bygnaXNTdGlja3knLChlKT0+ZT8nYmxvY2snOidub25lJyksaGVpZ2h0OnQudG8oJ2lzU3RpY2t5JywoZSk9PmU/T2YodGhpcy5fcGFuZWxSZWN0LmhlaWdodCk6bnVsbCl9fX0pLnJlbmRlcigpLHRoaXMuX2NvbnRlbnRQYW5lbD1uZXcgbWYoe3RhZzonZGl2JyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stc3RpY2t5LXBhbmVsX19jb250ZW50Jyx0LmlmKCdpc1N0aWNreScsJ2NrLXN0aWNreS1wYW5lbF9fY29udGVudF9zdGlja3knKSx0LmlmKCdfaXNTdGlja3lUb1RoZUxpbWl0ZXInLCdjay1zdGlja3ktcGFuZWxfX2NvbnRlbnRfc3RpY2t5X2JvdHRvbS1saW1pdCcpXSxzdHlsZTp7d2lkdGg6dC50bygnaXNTdGlja3knLChlKT0+ZT9PZih0aGlzLl9jb250ZW50UGFuZWxQbGFjZWhvbGRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk6bnVsbCksdG9wOnQudG8oJ19oYXNWaWV3cG9ydFRvcE9mZnNldCcsKGUpPT5lP09mKHRoaXMudmlld3BvcnRUb3BPZmZzZXQpOm51bGwpLGJvdHRvbTp0LnRvKCdfaXNTdGlja3lUb1RoZUxpbWl0ZXInLChlKT0+ZT9PZih0aGlzLmxpbWl0ZXJCb3R0b21PZmZzZXQpOm51bGwpLG1hcmdpbkxlZnQ6dC50bygnX21hcmdpbkxlZnQnKX19LGNoaWxkcmVuOnRoaXMuY29udGVudH0pLnJlbmRlcigpLHRoaXMuc2V0VGVtcGxhdGUoe3RhZzonZGl2JyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stc3RpY2t5LXBhbmVsJ119LGNoaWxkcmVuOlt0aGlzLl9jb250ZW50UGFuZWxQbGFjZWhvbGRlcix0aGlzLl9jb250ZW50UGFuZWxdfSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCksdGhpcy5fY2hlY2tJZlNob3VsZEJlU3RpY2t5KCksdGhpcy5saXN0ZW5UbygkYy53aW5kb3csJ3Njcm9sbCcsKCk9Pnt0aGlzLl9jaGVja0lmU2hvdWxkQmVTdGlja3koKX0pLHRoaXMubGlzdGVuVG8odGhpcywnY2hhbmdlOmlzQWN0aXZlJywoKT0+e3RoaXMuX2NoZWNrSWZTaG91bGRCZVN0aWNreSgpfSl9X2NoZWNrSWZTaG91bGRCZVN0aWNreSgpe2NvbnN0IGU9dGhpcy5fcGFuZWxSZWN0PXRoaXMuX2NvbnRlbnRQYW5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtsZXQgdDt0aGlzLmxpbWl0ZXJFbGVtZW50Pyh0PXRoaXMuX2xpbWl0ZXJSZWN0PXRoaXMubGltaXRlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksdGhpcy5pc1N0aWNreT10aGlzLmlzQWN0aXZlJiZ0LnRvcDx0aGlzLnZpZXdwb3J0VG9wT2Zmc2V0JiZ0aGlzLl9wYW5lbFJlY3QuaGVpZ2h0K3RoaXMubGltaXRlckJvdHRvbU9mZnNldDx0LmhlaWdodCk6dGhpcy5pc1N0aWNreT0hMSx0aGlzLmlzU3RpY2t5Pyh0aGlzLl9pc1N0aWNreVRvVGhlTGltaXRlcj10LmJvdHRvbTxlLmhlaWdodCt0aGlzLmxpbWl0ZXJCb3R0b21PZmZzZXQrdGhpcy52aWV3cG9ydFRvcE9mZnNldCx0aGlzLl9oYXNWaWV3cG9ydFRvcE9mZnNldD0hdGhpcy5faXNTdGlja3lUb1RoZUxpbWl0ZXImJiEhdGhpcy52aWV3cG9ydFRvcE9mZnNldCx0aGlzLl9tYXJnaW5MZWZ0PXRoaXMuX2lzU3RpY2t5VG9UaGVMaW1pdGVyP251bGw6T2YoLSRjLndpbmRvdy5zY3JvbGxYKSk6KHRoaXMuX2lzU3RpY2t5VG9UaGVMaW1pdGVyPSExLHRoaXMuX2hhc1ZpZXdwb3J0VG9wT2Zmc2V0PSExLHRoaXMuX21hcmdpbkxlZnQ9bnVsbCl9fWNsYXNzIElme2NvbnN0cnVjdG9yKGUpe2lmKE9iamVjdC5hc3NpZ24odGhpcyxlKSxlLmFjdGlvbnMmJmUua2V5c3Ryb2tlSGFuZGxlcilmb3IoY29uc3QgdCBpbiBlLmFjdGlvbnMpe2xldCBvPWUuYWN0aW9uc1t0XTsnc3RyaW5nJz09dHlwZW9mIG8mJihvPVtvXSk7Zm9yKGNvbnN0IG4gb2YgbyllLmtleXN0cm9rZUhhbmRsZXIuc2V0KG4sKGUsbyk9Pnt0aGlzW3RdKCksbygpfSl9fWdldCBmaXJzdCgpe3JldHVybiB0aGlzLmZvY3VzYWJsZXMuZmluZChpaSl8fG51bGx9Z2V0IGxhc3QoKXtyZXR1cm4gdGhpcy5mb2N1c2FibGVzLmZpbHRlcihpaSkuc2xpY2UoLTEpWzBdfHxudWxsfWdldCBuZXh0KCl7cmV0dXJuIHRoaXMuX2dldEZvY3VzYWJsZUl0ZW0oMSl9Z2V0IHByZXZpb3VzKCl7cmV0dXJuIHRoaXMuX2dldEZvY3VzYWJsZUl0ZW0oLTEpfWdldCBjdXJyZW50KCl7bGV0IGU9bnVsbDtyZXR1cm4gbnVsbD09PXRoaXMuZm9jdXNUcmFja2VyLmZvY3VzZWRFbGVtZW50P251bGw6KHRoaXMuZm9jdXNhYmxlcy5maW5kKCh0LG8pPT57Y29uc3Qgbj10LmVsZW1lbnQ9PT10aGlzLmZvY3VzVHJhY2tlci5mb2N1c2VkRWxlbWVudDtyZXR1cm4gbiYmKGU9byksbn0pLGUpfWZvY3VzRmlyc3QoKXt0aGlzLl9mb2N1cyh0aGlzLmZpcnN0KX1mb2N1c0xhc3QoKXt0aGlzLl9mb2N1cyh0aGlzLmxhc3QpfWZvY3VzTmV4dCgpe3RoaXMuX2ZvY3VzKHRoaXMubmV4dCl9Zm9jdXNQcmV2aW91cygpe3RoaXMuX2ZvY3VzKHRoaXMucHJldmlvdXMpfV9mb2N1cyhlKXtlJiZlLmZvY3VzKCl9X2dldEZvY3VzYWJsZUl0ZW0oZSl7Y29uc3QgdD10aGlzLmN1cnJlbnQsbz10aGlzLmZvY3VzYWJsZXMubGVuZ3RoO2lmKCFvKXJldHVybiBudWxsO2lmKG51bGw9PT10KXJldHVybiB0aGlzWzE9PT1lPydmaXJzdCc6J2xhc3QnXTtsZXQgbj0odCtvK2UpJW87ZG97Y29uc3QgdD10aGlzLmZvY3VzYWJsZXMuZ2V0KG4pO2lmKGlpKHQpKXJldHVybiB0O249KG4rbytlKSVvfXdoaWxlKG4hPT10KTtyZXR1cm4gbnVsbH19Y2xhc3MgVmYgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnNldFRlbXBsYXRlKHt0YWc6J3NwYW4nLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay10b29sYmFyX19zZXBhcmF0b3InXX19KX19dmFyIEZmPW8oMjApLE5mPW8ubihGZik7Y2xhc3MgTWYgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKTtjb25zdCB0PXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuaXRlbXM9dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCksdGhpcy5mb2N1c1RyYWNrZXI9bmV3IGxmLHRoaXMua2V5c3Ryb2tlcz1uZXcgWmcsdGhpcy5zZXQoJ2lzVmVydGljYWwnLCExKSx0aGlzLnNldCgnY2xhc3NOYW1lJyksdGhpcy5fZm9jdXNDeWNsZXI9bmV3IElmKHtmb2N1c2FibGVzOnRoaXMuaXRlbXMsZm9jdXNUcmFja2VyOnRoaXMuZm9jdXNUcmFja2VyLGtleXN0cm9rZUhhbmRsZXI6dGhpcy5rZXlzdHJva2VzLGFjdGlvbnM6e2ZvY3VzUHJldmlvdXM6WydhcnJvd2xlZnQnLCdhcnJvd3VwJ10sZm9jdXNOZXh0OlsnYXJyb3dyaWdodCcsJ2Fycm93ZG93biddfX0pLHRoaXMuc2V0VGVtcGxhdGUoe3RhZzonZGl2JyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stdG9vbGJhcicsdC5pZignaXNWZXJ0aWNhbCcsJ2NrLXRvb2xiYXJfdmVydGljYWwnKSx0LnRvKCdjbGFzc05hbWUnKV19LGNoaWxkcmVuOnRoaXMuaXRlbXMsb246e21vdXNlZG93bjpyaSh0aGlzKX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtmb3IoY29uc3QgZSBvZiB0aGlzLml0ZW1zKXRoaXMuZm9jdXNUcmFja2VyLmFkZChlLmVsZW1lbnQpO3RoaXMuaXRlbXMub24oJ2FkZCcsKGUsdCk9Pnt0aGlzLmZvY3VzVHJhY2tlci5hZGQodC5lbGVtZW50KX0pLHRoaXMuaXRlbXMub24oJ3JlbW92ZScsKGUsdCk9Pnt0aGlzLmZvY3VzVHJhY2tlci5yZW1vdmUodC5lbGVtZW50KX0pLHRoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfWZvY3VzKCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNGaXJzdCgpfWZvY3VzTGFzdCgpe3RoaXMuX2ZvY3VzQ3ljbGVyLmZvY3VzTGFzdCgpfWZpbGxGcm9tQ29uZmlnKGUsdCl7ZS5tYXAoKGUpPT57J3wnPT1lP3RoaXMuaXRlbXMuYWRkKG5ldyBWZik6dC5oYXMoZSk/dGhpcy5pdGVtcy5hZGQodC5jcmVhdGUoZSkpOlJ1Lndhcm4oJ3Rvb2xiYXJ2aWV3LWl0ZW0tdW5hdmFpbGFibGU6IFRoZSByZXF1ZXN0ZWQgdG9vbGJhciBpdGVtIGlzIHVuYXZhaWxhYmxlLicse25hbWU6ZX0pfSl9fXZhciBEZj1vKDIyKSxCZj1vLm4oRGYpO2NsYXNzIExmIGV4dGVuZHMgQWZ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zdGlja3lQYW5lbD1uZXcgUmYoZSksdGhpcy50b29sYmFyPW5ldyBNZihlKSx0aGlzLmVkaXRhYmxlPW5ldyBQZihlKX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKSx0aGlzLnN0aWNreVBhbmVsLmNvbnRlbnQuYWRkKHRoaXMudG9vbGJhciksdGhpcy50b3AuYWRkKHRoaXMuc3RpY2t5UGFuZWwpLHRoaXMubWFpbi5hZGQodGhpcy5lZGl0YWJsZSl9Z2V0IGVkaXRhYmxlRWxlbWVudCgpe3JldHVybiB0aGlzLmVkaXRhYmxlLmVsZW1lbnR9fWNsYXNzIHpme2NvbnN0cnVjdG9yKCl7dGhpcy5fcmVwbGFjZWRFbGVtZW50cz1bXX1yZXBsYWNlKGUsdCl7dGhpcy5fcmVwbGFjZWRFbGVtZW50cy5wdXNoKHtlbGVtZW50OmUsbmV3RWxlbWVudDp0fSksZS5zdHlsZS5kaXNwbGF5PSdub25lJyx0JiZlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHQsZS5uZXh0U2libGluZyl9cmVzdG9yZSgpe3RoaXMuX3JlcGxhY2VkRWxlbWVudHMuZm9yRWFjaCgoe2VsZW1lbnQ6ZSxuZXdFbGVtZW50OnR9KT0+e2Uuc3R5bGUuZGlzcGxheT0nJyx0JiZ0LnJlbW92ZSgpfSksdGhpcy5fcmVwbGFjZWRFbGVtZW50cz1bXX19Y2xhc3MgamYgZXh0ZW5kcyB0Zntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKHQpLHRoaXMuX2VsZW1lbnRSZXBsYWNlcj1uZXcgemYsdGhpcy5lbGVtZW50PWUsdGhpcy5kYXRhLnByb2Nlc3Nvcj1uZXcgYWYsdGhpcy5tb2RlbC5kb2N1bWVudC5jcmVhdGVSb290KCksdGhpcy51aT1uZXcgZGYodGhpcyxuZXcgTGYodGhpcy5sb2NhbGUpKSxPbih0aGlzKX1kZXN0cm95KCl7cmV0dXJuIHRoaXMudXBkYXRlRWxlbWVudCgpLHRoaXMuX2VsZW1lbnRSZXBsYWNlci5yZXN0b3JlKCksdGhpcy51aS5kZXN0cm95KCksc3VwZXIuZGVzdHJveSgpfXN0YXRpYyBjcmVhdGUoZSx0KXtyZXR1cm4gbmV3IFByb21pc2UoKG8pPT57Y29uc3Qgbj1uZXcgdGhpcyhlLHQpO28obi5pbml0UGx1Z2lucygpLnRoZW4oKCk9Pm4udWkuaW5pdCgpKS50aGVuKCgpPT57bi5fZWxlbWVudFJlcGxhY2VyLnJlcGxhY2UoZSxuLnVpLnZpZXcuZWxlbWVudCksbi5maXJlKCd1aVJlYWR5Jyl9KS50aGVuKCgpPT5uLmVkaXRpbmcudmlldy5hdHRhY2hEb21Sb290KG4udWkudmlldy5lZGl0YWJsZUVsZW1lbnQpKS50aGVuKCgpPT5uLmRhdGEuaW5pdChhaShlKSkpLnRoZW4oKCk9PntuLmZpcmUoJ2RhdGFSZWFkeScpLG4uZmlyZSgncmVhZHknKX0pLnRoZW4oKCk9Pm4pKX0pfX1mKGpmLG9mKSxmKGpmLG5mKTtjbGFzcyBxZntjb25zdHJ1Y3RvcihlKXt0aGlzLmVkaXRvcj1lfWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX19ZihxZixiYyk7Y2xhc3MgV2Z7Y29uc3RydWN0b3IoZSl7dGhpcy5maWxlcz1zaShlKSx0aGlzLl9uYXRpdmU9ZX1nZXQgdHlwZXMoKXtyZXR1cm4gdGhpcy5fbmF0aXZlLnR5cGVzfWdldERhdGEoZSl7cmV0dXJuIHRoaXMuX25hdGl2ZS5nZXREYXRhKGUpfXNldERhdGEoZSx0KXt0aGlzLl9uYXRpdmUuc2V0RGF0YShlLHQpfX1jbGFzcyBVZiBleHRlbmRzIHZ1e2NvbnN0cnVjdG9yKGUpe2Z1bmN0aW9uIHQoZSx0KXt0LnByZXZlbnREZWZhdWx0KCk7Y29uc3Qgbj10LmRyb3BSYW5nZT9bdC5kcm9wUmFuZ2VdOkFycmF5LmZyb20oby5zZWxlY3Rpb24uZ2V0UmFuZ2VzKCkpO28uZmlyZSgnY2xpcGJvYXJkSW5wdXQnLHtkYXRhVHJhbnNmZXI6dC5kYXRhVHJhbnNmZXIsdGFyZ2V0UmFuZ2VzOm59KX1zdXBlcihlKTtjb25zdCBvPXRoaXMuZG9jdW1lbnQ7dGhpcy5kb21FdmVudFR5cGU9WydwYXN0ZScsJ2NvcHknLCdjdXQnLCdkcm9wJywnZHJhZ292ZXInXSx0aGlzLmxpc3RlblRvKG8sJ3Bhc3RlJyx0LHtwcmlvcml0eTonbG93J30pLHRoaXMubGlzdGVuVG8obywnZHJvcCcsdCx7cHJpb3JpdHk6J2xvdyd9KX1vbkRvbUV2ZW50KGUpe2NvbnN0IHQ9e2RhdGFUcmFuc2ZlcjpuZXcgV2YoZS5jbGlwYm9hcmREYXRhP2UuY2xpcGJvYXJkRGF0YTplLmRhdGFUcmFuc2Zlcil9Oydkcm9wJz09ZS50eXBlJiYodC5kcm9wUmFuZ2U9bGkodGhpcy52aWV3LGUpKSx0aGlzLmZpcmUoZS50eXBlLGUsdCl9fWNvbnN0IEhmPVsnZmlnY2FwdGlvbicsJ2xpJ107Y2xhc3MgS2YgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nQ2xpcGJvYXJkJ31pbml0KCl7ZnVuY3Rpb24gZShlLG4pe2NvbnN0IHI9bi5kYXRhVHJhbnNmZXI7bi5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IGE9dC5kYXRhLnRvVmlldyh0Lm1vZGVsLmdldFNlbGVjdGVkQ29udGVudChvLnNlbGVjdGlvbikpO2kuZmlyZSgnY2xpcGJvYXJkT3V0cHV0Jyx7ZGF0YVRyYW5zZmVyOnIsY29udGVudDphLG1ldGhvZDplLm5hbWV9KX1jb25zdCB0PXRoaXMuZWRpdG9yLG89dC5tb2RlbC5kb2N1bWVudCxuPXQuZWRpdGluZy52aWV3LGk9bi5kb2N1bWVudDt0aGlzLl9odG1sRGF0YVByb2Nlc3Nvcj1uZXcgYWYsbi5hZGRPYnNlcnZlcihVZiksdGhpcy5saXN0ZW5UbyhpLCdjbGlwYm9hcmRJbnB1dCcsKGUsbyk9PntpZih0LmlzUmVhZE9ubHkpcmV0dXJuO2NvbnN0IGk9by5kYXRhVHJhbnNmZXI7bGV0IHI9Jyc7aS5nZXREYXRhKCd0ZXh0L2h0bWwnKT9yPWNpKGkuZ2V0RGF0YSgndGV4dC9odG1sJykpOmkuZ2V0RGF0YSgndGV4dC9wbGFpbicpJiYocj1kaShpLmdldERhdGEoJ3RleHQvcGxhaW4nKSkpLHI9dGhpcy5faHRtbERhdGFQcm9jZXNzb3IudG9WaWV3KHIpLHRoaXMuZmlyZSgnaW5wdXRUcmFuc2Zvcm1hdGlvbicse2NvbnRlbnQ6cn0pLG4uc2Nyb2xsVG9UaGVTZWxlY3Rpb24oKX0se3ByaW9yaXR5Oidsb3cnfSksdGhpcy5saXN0ZW5Ubyh0aGlzLCdpbnB1dFRyYW5zZm9ybWF0aW9uJywoZSx0KT0+e2lmKCF0LmNvbnRlbnQuaXNFbXB0eSl7Y29uc3QgZT10aGlzLmVkaXRvci5kYXRhLG49dGhpcy5lZGl0b3IubW9kZWwsaT1lLnRvTW9kZWwodC5jb250ZW50LCckY2xpcGJvYXJkSG9sZGVyJyk7aWYoMD09aS5jaGlsZENvdW50KXJldHVybjtuLmluc2VydENvbnRlbnQoaSxvLnNlbGVjdGlvbil9fSx7cHJpb3JpdHk6J2xvdyd9KSx0aGlzLmxpc3RlblRvKGksJ2NvcHknLGUse3ByaW9yaXR5Oidsb3cnfSksdGhpcy5saXN0ZW5UbyhpLCdjdXQnLChvLG4pPT57dC5pc1JlYWRPbmx5P24ucHJldmVudERlZmF1bHQoKTplKG8sbil9LHtwcmlvcml0eTonbG93J30pLHRoaXMubGlzdGVuVG8oaSwnY2xpcGJvYXJkT3V0cHV0JywoZSxuKT0+e24uY29udGVudC5pc0VtcHR5fHwobi5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJyx0aGlzLl9odG1sRGF0YVByb2Nlc3Nvci50b0RhdGEobi5jb250ZW50KSksbi5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsdWkobi5jb250ZW50KSkpLCdjdXQnPT1uLm1ldGhvZCYmdC5tb2RlbC5kZWxldGVDb250ZW50KG8uc2VsZWN0aW9uKX0se3ByaW9yaXR5Oidsb3cnfSl9fWNsYXNzIEdme2NvbnN0cnVjdG9yKGUpe2Z1bmN0aW9uIHQoKXt0aGlzLmlzRW5hYmxlZD0hMX10aGlzLmVkaXRvcj1lLHRoaXMuc2V0KCd2YWx1ZScsdm9pZCAwKSx0aGlzLnNldCgnaXNFbmFibGVkJywhMSksdGhpcy5kZWNvcmF0ZSgnZXhlY3V0ZScpLHRoaXMubGlzdGVuVG8odGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQsJ2NoYW5nZScsKCk9Pnt0aGlzLnJlZnJlc2goKX0pLHRoaXMub24oJ2V4ZWN1dGUnLChlKT0+e3RoaXMuaXNFbmFibGVkfHxlLnN0b3AoKX0se3ByaW9yaXR5OidoaWdoJ30pLHRoaXMubGlzdGVuVG8oZSwnY2hhbmdlOmlzUmVhZE9ubHknLChlLG8sbik9PntuPyh0aGlzLm9uKCdjaGFuZ2U6aXNFbmFibGVkJyx0LHtwcmlvcml0eTonbG93ZXN0J30pLHRoaXMuaXNFbmFibGVkPSExKToodGhpcy5vZmYoJ2NoYW5nZTppc0VuYWJsZWQnLHQpLHRoaXMucmVmcmVzaCgpKX0pfXJlZnJlc2goKXt0aGlzLmlzRW5hYmxlZD0hMH1leGVjdXRlKCl7fWRlc3Ryb3koKXt0aGlzLnN0b3BMaXN0ZW5pbmcoKX19ZihHZixiYyk7Y2xhc3MgJGYgZXh0ZW5kcyBHZntleGVjdXRlKCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbCx0PWUuZG9jdW1lbnQ7ZS5jaGFuZ2UoKG8pPT57bWkodGhpcy5lZGl0b3IubW9kZWwsbyx0LnNlbGVjdGlvbixlLnNjaGVtYSksdGhpcy5maXJlKCdhZnRlckV4ZWN1dGUnLHt3cml0ZXI6b30pfSl9fWNsYXNzIEpmIGV4dGVuZHMgWmN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSk7Y29uc3QgdD10aGlzLmRvY3VtZW50O3Qub24oJ2tleWRvd24nLChlLG8pPT57aWYodGhpcy5pc0VuYWJsZWQmJm8ua2V5Q29kZT09RGMuZW50ZXIpe2xldCBuO3Qub25jZSgnZW50ZXInLChlKT0+bj1lLHtwcmlvcml0eTonaGlnaGVzdCd9KSx0LmZpcmUoJ2VudGVyJyxuZXcgd3UodCxvLmRvbUV2ZW50KSksbiYmbi5zdG9wLmNhbGxlZCYmZS5zdG9wKCl9fSl9b2JzZXJ2ZSgpe319Y2xhc3MgUWYgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nRW50ZXInfWluaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5lZGl0aW5nLnZpZXcsbz10LmRvY3VtZW50O3QuYWRkT2JzZXJ2ZXIoSmYpLGUuY29tbWFuZHMuYWRkKCdlbnRlcicsbmV3ICRmKGUpKSx0aGlzLmxpc3RlblRvKG8sJ2VudGVyJywobyxuKT0+e2UuZXhlY3V0ZSgnZW50ZXInKSxuLnByZXZlbnREZWZhdWx0KCksdC5zY3JvbGxUb1RoZVNlbGVjdGlvbigpfSx7cHJpb3JpdHk6J2xvdyd9KX19Y2xhc3MgWWZ7Y29uc3RydWN0b3IoZSx0PTIwKXt0aGlzLm1vZGVsPWUsdGhpcy5zaXplPTAsdGhpcy5saW1pdD10LHRoaXMuaXNMb2NrZWQ9ITEsdGhpcy5fY2hhbmdlQ2FsbGJhY2s9KGUsdCk9PnsndHJhbnNwYXJlbnQnIT10LnR5cGUmJnQhPT10aGlzLl9iYXRjaCYmdGhpcy5fcmVzZXQoITApfSx0aGlzLl9zZWxlY3Rpb25DaGFuZ2VDYWxsYmFjaz0oKT0+e3RoaXMuX3Jlc2V0KCl9LHRoaXMubW9kZWwuZG9jdW1lbnQub24oJ2NoYW5nZScsdGhpcy5fY2hhbmdlQ2FsbGJhY2spLHRoaXMubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLm9uKCdjaGFuZ2U6cmFuZ2UnLHRoaXMuX3NlbGVjdGlvbkNoYW5nZUNhbGxiYWNrKSx0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5vbignY2hhbmdlOmF0dHJpYnV0ZScsdGhpcy5fc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2spfWdldCBiYXRjaCgpe3JldHVybiB0aGlzLl9iYXRjaHx8KHRoaXMuX2JhdGNoPW5ldyBCZyksdGhpcy5fYmF0Y2h9aW5wdXQoZSl7dGhpcy5zaXplKz1lLHRoaXMuc2l6ZT49dGhpcy5saW1pdCYmdGhpcy5fcmVzZXQoITApfWxvY2soKXt0aGlzLmlzTG9ja2VkPSEwfXVubG9jaygpe3RoaXMuaXNMb2NrZWQ9ITF9ZGVzdHJveSgpe3RoaXMubW9kZWwuZG9jdW1lbnQub2ZmKCdjaGFuZ2UnLHRoaXMuX2NoYW5nZUNhbGxiYWNrKSx0aGlzLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5vZmYoJ2NoYW5nZTpyYW5nZScsdGhpcy5fc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2spLHRoaXMubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLm9mZignY2hhbmdlOmF0dHJpYnV0ZScsdGhpcy5fc2VsZWN0aW9uQ2hhbmdlQ2FsbGJhY2spfV9yZXNldChlKXsoIXRoaXMuaXNMb2NrZWR8fGUpJiYodGhpcy5fYmF0Y2g9bnVsbCx0aGlzLnNpemU9MCl9fWNsYXNzIFhmIGV4dGVuZHMgR2Z7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLl9idWZmZXI9bmV3IFlmKGUubW9kZWwsdCl9Z2V0IGJ1ZmZlcigpe3JldHVybiB0aGlzLl9idWZmZXJ9ZGVzdHJveSgpe3N1cGVyLmRlc3Ryb3koKSx0aGlzLl9idWZmZXIuZGVzdHJveSgpfWV4ZWN1dGUoZT17fSl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbCxvPXQuZG9jdW1lbnQsbj1lLnRleHR8fCcnLGk9bi5sZW5ndGgscj1lLnJhbmdlfHxvLnNlbGVjdGlvbi5nZXRGaXJzdFJhbmdlKCksYT1lLnJlc3VsdFJhbmdlO3QuZW5xdWV1ZUNoYW5nZSh0aGlzLl9idWZmZXIuYmF0Y2gsKGUpPT57Y29uc3QgdD1yLmlzQ29sbGFwc2VkO3RoaXMuX2J1ZmZlci5sb2NrKCksdHx8ZS5yZW1vdmUociksbiYmZS5pbnNlcnRUZXh0KG4sby5zZWxlY3Rpb24uZ2V0QXR0cmlidXRlcygpLHIuc3RhcnQpLGE/ZS5zZXRTZWxlY3Rpb24oYSk6dCYmZS5zZXRTZWxlY3Rpb24oci5zdGFydC5nZXRTaGlmdGVkQnkoaSkpLHRoaXMuX2J1ZmZlci51bmxvY2soKSx0aGlzLl9idWZmZXIuaW5wdXQoaSl9KX19Y2xhc3MgWmYgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nSW5wdXQnfWluaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5lZGl0aW5nLnZpZXcsbz1uZXcgWGYoZSxlLmNvbmZpZy5nZXQoJ3R5cGluZy51bmRvU3RlcCcpfHwyMCk7ZS5jb21tYW5kcy5hZGQoJ2lucHV0JyxvKSx0aGlzLmxpc3RlblRvKHQuZG9jdW1lbnQsJ2tleWRvd24nLChlLHQpPT57dGhpcy5faGFuZGxlS2V5ZG93bih0LG8pfSx7cHJpb3JpdHk6J2xvd2VzdCd9KSx0aGlzLmxpc3RlblRvKHQuZG9jdW1lbnQsJ211dGF0aW9ucycsKGUsdCxvKT0+e3RoaXMuX2hhbmRsZU11dGF0aW9ucyh0LG8pfSl9X2hhbmRsZUtleWRvd24oZSx0KXtjb25zdCBvPXRoaXMuZWRpdG9yLm1vZGVsLG49by5kb2N1bWVudCxpPXQuYnVmZmVyOyF0LmlzRW5hYmxlZHx8ZmkoZSl8fG4uc2VsZWN0aW9uLmlzQ29sbGFwc2VkfHwoaS5sb2NrKCksby5lbnF1ZXVlQ2hhbmdlKGkuYmF0Y2gsKCk9Pnt0aGlzLmVkaXRvci5tb2RlbC5kZWxldGVDb250ZW50KG4uc2VsZWN0aW9uKX0pLGkudW5sb2NrKCkpfV9oYW5kbGVNdXRhdGlvbnMoZSx0KXtuZXcgZWgodGhpcy5lZGl0b3IpLmhhbmRsZShlLHQpfX1jbGFzcyBlaHtjb25zdHJ1Y3RvcihlKXt0aGlzLmVkaXRvcj1lLHRoaXMuZWRpdGluZz10aGlzLmVkaXRvci5lZGl0aW5nfWhhbmRsZShlLHQpe2lmKF9pKGUpKXRoaXMuX2hhbmRsZUNvbnRhaW5lckNoaWxkcmVuTXV0YXRpb25zKGUsdCk7ZWxzZSBmb3IoY29uc3QgbyBvZiBlKXRoaXMuX2hhbmRsZVRleHRNdXRhdGlvbihvLHQpLHRoaXMuX2hhbmRsZVRleHROb2RlSW5zZXJ0aW9uKG8pfV9oYW5kbGVDb250YWluZXJDaGlsZHJlbk11dGF0aW9ucyhlLHQpe2NvbnN0IG89a2koZSk7aWYoIW8pcmV0dXJuO2NvbnN0IG49dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvbUNvbnZlcnRlcixpPW4ubWFwVmlld1RvRG9tKG8pLHI9bmV3IEpjLGE9dGhpcy5lZGl0b3IuZGF0YS50b01vZGVsKHIuZG9tVG9WaWV3KGkpKS5nZXRDaGlsZCgwKSxzPXRoaXMuZWRpdG9yLmVkaXRpbmcubWFwcGVyLnRvTW9kZWxFbGVtZW50KG8pO2lmKCFzKXJldHVybjtjb25zdCBsPUFycmF5LmZyb20oYS5nZXRDaGlsZHJlbigpKSxkPUFycmF5LmZyb20ocy5nZXRDaGlsZHJlbigpKTtpZighd2kobCl8fCF3aShkKSlyZXR1cm47Y29uc3QgYz1sLm1hcCgoZSk9PmUuZGF0YSkuam9pbignJykucmVwbGFjZSgvXFx1MDBBMC9nLCcgJyksdT1kLm1hcCgoZSk9PmUuZGF0YSkuam9pbignJyk7aWYodT09PWMpcmV0dXJuO2NvbnN0IG09VGUodSxjKSx7Zmlyc3RDaGFuZ2VBdDpwLGluc2VydGlvbnM6ZyxkZWxldGlvbnM6Zn09dmkobSk7bGV0IGg9bnVsbDt0JiYoaD10aGlzLmVkaXRpbmcubWFwcGVyLnRvTW9kZWxSYW5nZSh0LmdldEZpcnN0UmFuZ2UoKSkpO2NvbnN0IGI9Yy5zdWJzdHIocCxnKSxrPUd1LmNyZWF0ZUZyb21QYXJlbnRzQW5kT2Zmc2V0cyhzLHAscyxwK2YpO3RoaXMuZWRpdG9yLmV4ZWN1dGUoJ2lucHV0Jyx7dGV4dDpiLHJhbmdlOmsscmVzdWx0UmFuZ2U6aH0pfV9oYW5kbGVUZXh0TXV0YXRpb24oZSx0KXtpZigndGV4dCchPWUudHlwZSlyZXR1cm47Y29uc3Qgbz1lLm5ld1RleHQucmVwbGFjZSgvXFx1MDBBMC9nLCcgJyksbj1lLm9sZFRleHQucmVwbGFjZSgvXFx1MDBBMC9nLCcgJyksaT1UZShuLG8pLHtmaXJzdENoYW5nZUF0OnIsaW5zZXJ0aW9uczphLGRlbGV0aW9uczpzfT12aShpKTtsZXQgbD1udWxsO3QmJihsPXRoaXMuZWRpdGluZy5tYXBwZXIudG9Nb2RlbFJhbmdlKHQuZ2V0Rmlyc3RSYW5nZSgpKSk7Y29uc3QgZD1uZXcgeGMoZS5ub2RlLHIpLGM9dGhpcy5lZGl0aW5nLm1hcHBlci50b01vZGVsUG9zaXRpb24oZCksdT1HdS5jcmVhdGVGcm9tUG9zaXRpb25BbmRTaGlmdChjLHMpLG09by5zdWJzdHIocixhKTt0aGlzLmVkaXRvci5leGVjdXRlKCdpbnB1dCcse3RleHQ6bSxyYW5nZTp1LHJlc3VsdFJhbmdlOmx9KX1faGFuZGxlVGV4dE5vZGVJbnNlcnRpb24oZSl7aWYoJ2NoaWxkcmVuJz09ZS50eXBlKXtjb25zdCB0PWJpKGUpLG89bmV3IHhjKGUubm9kZSx0LmluZGV4KSxuPXRoaXMuZWRpdGluZy5tYXBwZXIudG9Nb2RlbFBvc2l0aW9uKG8pLGk9dC52YWx1ZXNbMF0uZGF0YTt0aGlzLmVkaXRvci5leGVjdXRlKCdpbnB1dCcse3RleHQ6aS5yZXBsYWNlKC9cXHUwMEEwL2csJyAnKSxyYW5nZTpuZXcgR3Uobil9KX19fWNvbnN0IHRoPVt0ZSgnYXJyb3dVcCcpLHRlKCdhcnJvd1JpZ2h0JyksdGUoJ2Fycm93RG93bicpLHRlKCdhcnJvd0xlZnQnKSw5LDE2LDE3LDE4LDIwLDI3LDMzLDM0LDM1LDM2LDIyOV07Zm9yKGxldCBuPTExMjsxMzU+PW47bisrKXRoLnB1c2gobik7Y2xhc3Mgb2ggZXh0ZW5kcyBHZntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUpLHRoaXMuZGlyZWN0aW9uPXQsdGhpcy5fYnVmZmVyPW5ldyBZZihlLm1vZGVsLGUuY29uZmlnLmdldCgndHlwaW5nLnVuZG9TdGVwJykpfWV4ZWN1dGUoZT17fSl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbCxvPXQuZG9jdW1lbnQ7dC5lbnF1ZXVlQ2hhbmdlKHRoaXMuX2J1ZmZlci5iYXRjaCwobik9Pnt0aGlzLl9idWZmZXIubG9jaygpO2NvbnN0IGk9bmV3IFl1KG8uc2VsZWN0aW9uKSxyPWkuaXNDb2xsYXBzZWQ7aWYoaS5pc0NvbGxhcHNlZCYmdC5tb2RpZnlTZWxlY3Rpb24oaSx7ZGlyZWN0aW9uOnRoaXMuZGlyZWN0aW9uLHVuaXQ6ZS51bml0fSksdGhpcy5fc2hvdWxkRW50aXJlQ29udGVudEJlUmVwbGFjZWRXaXRoUGFyYWdyYXBoKGUuc2VxdWVuY2V8fDEpKXJldHVybiB2b2lkIHRoaXMuX3JlcGxhY2VFbnRpcmVDb250ZW50V2l0aFBhcmFncmFwaChuKTtpZihpLmlzQ29sbGFwc2VkKXJldHVybjtsZXQgYT0wO2kuZ2V0Rmlyc3RSYW5nZSgpLmdldE1pbmltYWxGbGF0UmFuZ2VzKCkuZm9yRWFjaCgoZSk9PnthKz1ZKGUuZ2V0V2Fsa2VyKHtzaW5nbGVDaGFyYWN0ZXJzOiEwLGlnbm9yZUVsZW1lbnRFbmQ6ITAsc2hhbGxvdzohMH0pKX0pLHQuZGVsZXRlQ29udGVudChpLHtkb05vdFJlc2V0RW50aXJlQ29udGVudDpyfSksdGhpcy5fYnVmZmVyLmlucHV0KGEpLG4uc2V0U2VsZWN0aW9uKGkpLHRoaXMuX2J1ZmZlci51bmxvY2soKX0pfV9zaG91bGRFbnRpcmVDb250ZW50QmVSZXBsYWNlZFdpdGhQYXJhZ3JhcGgoZSl7aWYoMTxlKXJldHVybiExO2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwsbz10LmRvY3VtZW50LG49by5zZWxlY3Rpb24saT10LnNjaGVtYS5nZXRMaW1pdEVsZW1lbnQobikscj1uLmlzQ29sbGFwc2VkJiZuLmNvbnRhaW5zRW50aXJlQ29udGVudChpKTtpZighcilyZXR1cm4hMTtpZighdC5zY2hlbWEuY2hlY2tDaGlsZChpLCdwYXJhZ3JhcGgnKSlyZXR1cm4hMTtjb25zdCBhPWkuZ2V0Q2hpbGQoMCk7cmV0dXJuIShhJiYncGFyYWdyYXBoJz09PWEubmFtZSl9X3JlcGxhY2VFbnRpcmVDb250ZW50V2l0aFBhcmFncmFwaChlKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsLG89dC5kb2N1bWVudCxuPW8uc2VsZWN0aW9uLGk9dC5zY2hlbWEuZ2V0TGltaXRFbGVtZW50KG4pLHI9bmV3IFd1KCdwYXJhZ3JhcGgnKTtlLnJlbW92ZShHdS5jcmVhdGVJbihpKSksZS5pbnNlcnQocixpKSxlLnNldFNlbGVjdGlvbihyLDApfX1jbGFzcyBuaCBleHRlbmRzIFpje2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpO2NvbnN0IHQ9ZS5kb2N1bWVudDtsZXQgbz0wO3Qub24oJ2tleXVwJywoZSx0KT0+eyh0LmtleUNvZGU9PURjLmRlbGV0ZXx8dC5rZXlDb2RlPT1EYy5iYWNrc3BhY2UpJiYobz0wKX0pLHQub24oJ2tleWRvd24nLChlLG4pPT57Y29uc3QgaT17fTtpZihuLmtleUNvZGU9PURjLmRlbGV0ZSlpLmRpcmVjdGlvbj0nZm9yd2FyZCcsaS51bml0PSdjaGFyYWN0ZXInO2Vsc2UgaWYobi5rZXlDb2RlPT1EYy5iYWNrc3BhY2UpaS5kaXJlY3Rpb249J2JhY2t3YXJkJyxpLnVuaXQ9J2NvZGVQb2ludCc7ZWxzZSByZXR1cm47Y29uc3Qgcj1GYy5pc01hYz9uLmFsdEtleTpuLmN0cmxLZXk7aS51bml0PXI/J3dvcmQnOmkudW5pdCxpLnNlcXVlbmNlPSsrbztsZXQgYTt0Lm9uY2UoJ2RlbGV0ZScsKGUpPT5hPWUse3ByaW9yaXR5OidoaWdoZXN0J30pLHQuZmlyZSgnZGVsZXRlJyxuZXcgd3UodCxuLmRvbUV2ZW50LGkpKSxhJiZhLnN0b3AuY2FsbGVkJiZlLnN0b3AoKX0pfW9ic2VydmUoKXt9fWNsYXNzIGloIGV4dGVuZHMgcWZ7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0RlbGV0ZSd9aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLmVkaXRpbmcudmlldyxvPXQuZG9jdW1lbnQ7dC5hZGRPYnNlcnZlcihuaCksZS5jb21tYW5kcy5hZGQoJ2ZvcndhcmREZWxldGUnLG5ldyBvaChlLCdmb3J3YXJkJykpLGUuY29tbWFuZHMuYWRkKCdkZWxldGUnLG5ldyBvaChlLCdiYWNrd2FyZCcpKSx0aGlzLmxpc3RlblRvKG8sJ2RlbGV0ZScsKG8sbik9PntlLmV4ZWN1dGUoJ2ZvcndhcmQnPT1uLmRpcmVjdGlvbj8nZm9yd2FyZERlbGV0ZSc6J2RlbGV0ZScse3VuaXQ6bi51bml0LHNlcXVlbmNlOm4uc2VxdWVuY2V9KSxuLnByZXZlbnREZWZhdWx0KCksdC5zY3JvbGxUb1RoZVNlbGVjdGlvbigpfSl9fWNsYXNzIHJoIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltaZixpaF19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ1R5cGluZyd9fWNsYXNzIGFoIGV4dGVuZHMgR2Z7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fc3RhY2s9W10sdGhpcy5fY3JlYXRlZEJhdGNoZXM9bmV3IFdlYWtTZXQsdGhpcy5yZWZyZXNoKCl9cmVmcmVzaCgpe3RoaXMuaXNFbmFibGVkPTA8dGhpcy5fc3RhY2subGVuZ3RofWFkZEJhdGNoKGUpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLG89e3Jhbmdlczp0Lmhhc093blJhbmdlP0FycmF5LmZyb20odC5nZXRSYW5nZXMoKSk6W10saXNCYWNrd2FyZDp0LmlzQmFja3dhcmR9O3RoaXMuX3N0YWNrLnB1c2goe2JhdGNoOmUsc2VsZWN0aW9uOm99KSx0aGlzLnJlZnJlc2goKX1jbGVhclN0YWNrKCl7dGhpcy5fc3RhY2s9W10sdGhpcy5yZWZyZXNoKCl9X3Jlc3RvcmVTZWxlY3Rpb24oZSx0LG8pe2NvbnN0IG49dGhpcy5lZGl0b3IubW9kZWwsaT1uLmRvY3VtZW50LHI9W107Zm9yKGNvbnN0IG4gb2YgZSl7Y29uc3QgZT15aShuLG8pLHQ9ZS5maW5kKChlKT0+ZS5zdGFydC5yb290IT1pLmdyYXZleWFyZCk7dCYmci5wdXNoKHQpfXIubGVuZ3RoJiZuLmNoYW5nZSgoZSk9PntlLnNldFNlbGVjdGlvbihyLHtiYWNrd2FyZDp0fSl9KX1fdW5kbyhlLHQpe2NvbnN0IG89dGhpcy5lZGl0b3IubW9kZWwsbj1vLmRvY3VtZW50O3RoaXMuX2NyZWF0ZWRCYXRjaGVzLmFkZCh0KTtjb25zdCBpPWUuZGVsdGFzLnNsaWNlKCk7aS5yZXZlcnNlKCk7Zm9yKGNvbnN0IHIgb2YgaSlpZihyLm9wZXJhdGlvbnMuc29tZSgoZSk9PmUuaXNEb2N1bWVudE9wZXJhdGlvbikpe2NvbnN0IGU9ci5iYXNlVmVyc2lvbityLm9wZXJhdGlvbnMubGVuZ3RoLGk9QXJyYXkuZnJvbShuLmhpc3RvcnkuZ2V0RGVsdGFzKGUpKSxhPW8udHJhbnNmb3JtRGVsdGFzKFtyLmdldFJldmVyc2VkKCldLGksITApLHM9YS5kZWx0YXNBO2Zvcihjb25zdCBlIG9mIHMpe2UuYmFzZVZlcnNpb249bi52ZXJzaW9uLHQuYWRkRGVsdGEoZSk7Zm9yKGNvbnN0IHQgb2YgZS5vcGVyYXRpb25zKW8uYXBwbHlPcGVyYXRpb24odCk7bi5oaXN0b3J5LnNldERlbHRhQXNVbmRvbmUocixlKX19fX1jbGFzcyBzaCBleHRlbmRzIGFoe2V4ZWN1dGUoZT1udWxsKXtjb25zdCB0PWU/dGhpcy5fc3RhY2suZmluZEluZGV4KCh0KT0+dC5iYXRjaD09ZSk6dGhpcy5fc3RhY2subGVuZ3RoLTEsbz10aGlzLl9zdGFjay5zcGxpY2UodCwxKVswXSxuPW5ldyBCZzt0aGlzLmVkaXRvci5tb2RlbC5lbnF1ZXVlQ2hhbmdlKG4sKCk9Pnt0aGlzLl91bmRvKG8uYmF0Y2gsbik7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5oaXN0b3J5LmdldERlbHRhcyhvLmJhdGNoLmJhc2VWZXJzaW9uKTt0aGlzLl9yZXN0b3JlU2VsZWN0aW9uKG8uc2VsZWN0aW9uLnJhbmdlcyxvLnNlbGVjdGlvbi5pc0JhY2t3YXJkLGUpLHRoaXMuZmlyZSgncmV2ZXJ0JyxvLmJhdGNoLG4pfSksdGhpcy5yZWZyZXNoKCl9fWNsYXNzIGxoIGV4dGVuZHMgYWh7ZXhlY3V0ZSgpe2NvbnN0IGU9dGhpcy5fc3RhY2sucG9wKCksdD1uZXcgQmc7dGhpcy5lZGl0b3IubW9kZWwuZW5xdWV1ZUNoYW5nZSh0LCgpPT57Y29uc3Qgbz1lLmJhdGNoLmRlbHRhc1tlLmJhdGNoLmRlbHRhcy5sZW5ndGgtMV0sbj1vLmJhc2VWZXJzaW9uK28ub3BlcmF0aW9ucy5sZW5ndGgsaT10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5oaXN0b3J5LmdldERlbHRhcyhuKTt0aGlzLl9yZXN0b3JlU2VsZWN0aW9uKGUuc2VsZWN0aW9uLnJhbmdlcyxlLnNlbGVjdGlvbi5pc0JhY2t3YXJkLGkpLHRoaXMuX3VuZG8oZS5iYXRjaCx0KX0pLHRoaXMucmVmcmVzaCgpfX1jbGFzcyBkaCBleHRlbmRzIHFme2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2JhdGNoUmVnaXN0cnk9bmV3IFdlYWtTZXR9aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3I7dGhpcy5fdW5kb0NvbW1hbmQ9bmV3IHNoKGUpLHRoaXMuX3JlZG9Db21tYW5kPW5ldyBsaChlKSxlLmNvbW1hbmRzLmFkZCgndW5kbycsdGhpcy5fdW5kb0NvbW1hbmQpLGUuY29tbWFuZHMuYWRkKCdyZWRvJyx0aGlzLl9yZWRvQ29tbWFuZCksdGhpcy5saXN0ZW5UbyhlLm1vZGVsLCdhcHBseU9wZXJhdGlvbicsKGUsdCk9Pntjb25zdCBvPXRbMF07aWYoby5pc0RvY3VtZW50T3BlcmF0aW9uKXtjb25zdCBlPW8uZGVsdGEuYmF0Y2g7dGhpcy5fYmF0Y2hSZWdpc3RyeS5oYXMoZSl8fCd0cmFuc3BhcmVudCc9PWUudHlwZXx8KHRoaXMuX3JlZG9Db21tYW5kLl9jcmVhdGVkQmF0Y2hlcy5oYXMoZSk/dGhpcy5fdW5kb0NvbW1hbmQuYWRkQmF0Y2goZSk6IXRoaXMuX3VuZG9Db21tYW5kLl9jcmVhdGVkQmF0Y2hlcy5oYXMoZSkmJih0aGlzLl91bmRvQ29tbWFuZC5hZGRCYXRjaChlKSx0aGlzLl9yZWRvQ29tbWFuZC5jbGVhclN0YWNrKCkpLHRoaXMuX2JhdGNoUmVnaXN0cnkuYWRkKGUpKX19LHtwcmlvcml0eTonaGlnaGVzdCd9KSx0aGlzLmxpc3RlblRvKHRoaXMuX3VuZG9Db21tYW5kLCdyZXZlcnQnLChlLHQsbyk9Pnt0aGlzLl9yZWRvQ29tbWFuZC5hZGRCYXRjaChvKX0pLGUua2V5c3Ryb2tlcy5zZXQoJ0NUUkwrWicsJ3VuZG8nKSxlLmtleXN0cm9rZXMuc2V0KCdDVFJMK1knLCdyZWRvJyksZS5rZXlzdHJva2VzLnNldCgnQ1RSTCtTSElGVCtaJywncmVkbycpfX12YXIgY2g9bygyNCksdWg9by5uKGNoKTtjbGFzcyBtaCBleHRlbmRzIGtme2NvbnN0cnVjdG9yKCl7c3VwZXIoKTtjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KCdjb250ZW50JywnJyksdGhpcy5zZXQoJ3ZpZXdCb3gnLCcwIDAgMjAgMjAnKSx0aGlzLnNldCgnZmlsbENvbG9yJywnJyksdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOidzdmcnLG5zOidodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsYXR0cmlidXRlczp7Y2xhc3M6WydjaycsJ2NrLWljb24nXSx2aWV3Qm94OmUudG8oJ3ZpZXdCb3gnKX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKSx0aGlzLl91cGRhdGVYTUxDb250ZW50KCksdGhpcy5fY29sb3JGaWxsUGF0aHMoKSx0aGlzLm9uKCdjaGFuZ2U6Y29udGVudCcsKCk9Pnt0aGlzLl91cGRhdGVYTUxDb250ZW50KCksdGhpcy5fY29sb3JGaWxsUGF0aHMoKX0pLHRoaXMub24oJ2NoYW5nZTpmaWxsQ29sb3InLCgpPT57dGhpcy5fY29sb3JGaWxsUGF0aHMoKX0pfV91cGRhdGVYTUxDb250ZW50KCl7aWYodGhpcy5jb250ZW50KXtjb25zdCBlPW5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodGhpcy5jb250ZW50LnRyaW0oKSwnaW1hZ2Uvc3ZnK3htbCcpLHQ9ZS5xdWVyeVNlbGVjdG9yKCdzdmcnKSxvPXQuZ2V0QXR0cmlidXRlKCd2aWV3Qm94Jyk7Zm9yKG8mJih0aGlzLnZpZXdCb3g9byksdGhpcy5lbGVtZW50LmlubmVySFRNTD0nJzswPHQuY2hpbGROb2Rlcy5sZW5ndGg7KXRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0LmNoaWxkTm9kZXNbMF0pfX1fY29sb3JGaWxsUGF0aHMoKXt0aGlzLmZpbGxDb2xvciYmdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jay1pY29uX19maWxsJykuZm9yRWFjaCgoZSk9PntlLnN0eWxlLmZpbGw9dGhpcy5maWxsQ29sb3J9KX19dmFyIHBoPW8oMjYpLGdoPW8ubihwaCk7Y2xhc3MgZmggZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnNldCgndGV4dCcsJycpLHRoaXMuc2V0KCdwb3NpdGlvbicsJ3MnKTtjb25zdCB0PXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzonc3BhbicsYXR0cmlidXRlczp7Y2xhc3M6WydjaycsJ2NrLXRvb2x0aXAnLHQudG8oJ3Bvc2l0aW9uJywoZSk9Pidjay10b29sdGlwXycrZSksdC5pZigndGV4dCcsJ2NrLWhpZGRlbicsKGUpPT4hZS50cmltKCkpXX0sY2hpbGRyZW46W3t0YWc6J3NwYW4nLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay10b29sdGlwX190ZXh0J119LGNoaWxkcmVuOlt7dGV4dDp0LnRvKCd0ZXh0Jyl9XX1dfSl9fXZhciBoaD1vKDI4KSxiaD1vLm4oaGgpO2NsYXNzIGtoIGV4dGVuZHMga2Z7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSk7Y29uc3QgdD10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldCgnaWNvbicpLHRoaXMuc2V0KCdpc0VuYWJsZWQnLCEwKSx0aGlzLnNldCgnaXNPbicsITEpLHRoaXMuc2V0KCdpc1Zpc2libGUnLCEwKSx0aGlzLnNldCgna2V5c3Ryb2tlJyksdGhpcy5zZXQoJ2xhYmVsJyksdGhpcy5zZXQoJ3RhYmluZGV4JywtMSksdGhpcy5zZXQoJ3Rvb2x0aXAnKSx0aGlzLnNldCgndG9vbHRpcFBvc2l0aW9uJywncycpLHRoaXMuc2V0KCd0eXBlJywnYnV0dG9uJyksdGhpcy5zZXQoJ3dpdGhUZXh0JywhMSksdGhpcy5jaGlsZHJlbj10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKSx0aGlzLnRvb2x0aXBWaWV3PXRoaXMuX2NyZWF0ZVRvb2x0aXBWaWV3KCksdGhpcy5sYWJlbFZpZXc9dGhpcy5fY3JlYXRlTGFiZWxWaWV3KCksdGhpcy5pY29uVmlldz1uZXcgbWgsdGhpcy5pY29uVmlldy5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6J2NrLWJ1dHRvbl9faWNvbid9fSksdGhpcy5iaW5kKCdfdG9vbHRpcFN0cmluZycpLnRvKHRoaXMsJ3Rvb2x0aXAnLHRoaXMsJ2xhYmVsJyx0aGlzLCdrZXlzdHJva2UnLHRoaXMuX2dldFRvb2x0aXBTdHJpbmcuYmluZCh0aGlzKSksdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOididXR0b24nLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1idXR0b24nLHQudG8oJ2lzRW5hYmxlZCcsKGUpPT5lPydjay1lbmFibGVkJzonY2stZGlzYWJsZWQnKSx0LmlmKCdpc1Zpc2libGUnLCdjay1oaWRkZW4nLChlKT0+IWUpLHQudG8oJ2lzT24nLChlKT0+ZT8nY2stb24nOidjay1vZmYnKSx0LmlmKCd3aXRoVGV4dCcsJ2NrLWJ1dHRvbl93aXRoLXRleHQnKV0sdHlwZTp0LnRvKCd0eXBlJywoZSk9PmU/ZTonYnV0dG9uJyksdGFiaW5kZXg6dC50bygndGFiaW5kZXgnKX0sY2hpbGRyZW46dGhpcy5jaGlsZHJlbixvbjp7bW91c2Vkb3duOnQudG8oKGUpPT57ZS5wcmV2ZW50RGVmYXVsdCgpfSksY2xpY2s6dC50bygoZSk9Pnt0aGlzLmlzRW5hYmxlZD90aGlzLmZpcmUoJ2V4ZWN1dGUnKTplLnByZXZlbnREZWZhdWx0KCl9KX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKSx0aGlzLmljb24mJih0aGlzLmljb25WaWV3LmJpbmQoJ2NvbnRlbnQnKS50byh0aGlzLCdpY29uJyksdGhpcy5jaGlsZHJlbi5hZGQodGhpcy5pY29uVmlldykpLHRoaXMuY2hpbGRyZW4uYWRkKHRoaXMudG9vbHRpcFZpZXcpLHRoaXMuY2hpbGRyZW4uYWRkKHRoaXMubGFiZWxWaWV3KX1mb2N1cygpe3RoaXMuZWxlbWVudC5mb2N1cygpfV9jcmVhdGVUb29sdGlwVmlldygpe2NvbnN0IGU9bmV3IGZoO3JldHVybiBlLmJpbmQoJ3RleHQnKS50byh0aGlzLCdfdG9vbHRpcFN0cmluZycpLGUuYmluZCgncG9zaXRpb24nKS50byh0aGlzLCd0b29sdGlwUG9zaXRpb24nKSxlfV9jcmVhdGVMYWJlbFZpZXcoKXtjb25zdCBlPW5ldyBrZjtyZXR1cm4gZS5zZXRUZW1wbGF0ZSh7dGFnOidzcGFuJyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stYnV0dG9uX19sYWJlbCddfSxjaGlsZHJlbjpbe3RleHQ6dGhpcy5iaW5kVGVtcGxhdGUudG8oJ2xhYmVsJyl9XX0pLGV9X2dldFRvb2x0aXBTdHJpbmcoZSx0LG8pe3JldHVybiBlPydzdHJpbmcnPT10eXBlb2YgZT9lOihvJiYobz1uZShvKSksZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2UodCxvKTpgJHt0fSR7bz9gICgke299KWA6Jyd9YCk6Jyd9fXZhciBfaD1vKDMwKSx3aD1vLm4oX2gpLHZoPW8oMzEpLHloPW8ubih2aCk7Y2xhc3MgeGggZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcixvPWUudDt0aGlzLl9hZGRCdXR0b24oJ3VuZG8nLG8oJ2FnJyksJ0NUUkwrWicsd2guYSksdGhpcy5fYWRkQnV0dG9uKCdyZWRvJyxvKCdhaCcpLCdDVFJMK1knLHloLmEpfV9hZGRCdXR0b24oZSx0LG8sbil7Y29uc3QgaT10aGlzLmVkaXRvcjtpLnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKGUsKHIpPT57Y29uc3QgYT1pLmNvbW1hbmRzLmdldChlKSxzPW5ldyBraChyKTtyZXR1cm4gcy5zZXQoe2xhYmVsOnQsaWNvbjpuLGtleXN0cm9rZTpvLHRvb2x0aXA6ITB9KSxzLmJpbmQoJ2lzRW5hYmxlZCcpLnRvKGEsJ2lzRW5hYmxlZCcpLHRoaXMubGlzdGVuVG8ocywnZXhlY3V0ZScsKCk9PmkuZXhlY3V0ZShlKSksc30pfX1jbGFzcyBDaCBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bZGgseGhdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidVbmRvJ319Y2xhc3MgQWggZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW0tmLFFmLHJoLENoXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nRXNzZW50aWFscyd9fWNsYXNzIFRoe2NvbnN0cnVjdG9yKCl7Y29uc3QgZT1uZXcgd2luZG93LkZpbGVSZWFkZXI7dGhpcy5fcmVhZGVyPWUsdGhpcy5zZXQoJ2xvYWRlZCcsMCksZS5vbnByb2dyZXNzPShlKT0+e3RoaXMubG9hZGVkPWUubG9hZGVkfX1nZXQgZXJyb3IoKXtyZXR1cm4gdGhpcy5fcmVhZGVyLmVycm9yfXJlYWQoZSl7Y29uc3QgdD10aGlzLl9yZWFkZXI7cmV0dXJuIHRoaXMudG90YWw9ZS5zaXplLG5ldyBQcm9taXNlKChvLG4pPT57dC5vbmxvYWQ9KCk9PntvKHQucmVzdWx0KX0sdC5vbmVycm9yPSgpPT57bignZXJyb3InKX0sdC5vbmFib3J0PSgpPT57bignYWJvcnRlZCcpfSx0aGlzLl9yZWFkZXIucmVhZEFzRGF0YVVSTChlKX0pfWFib3J0KCl7dGhpcy5fcmVhZGVyLmFib3J0KCl9fWYoVGgsYmMpO2NsYXNzIFBoIGV4dGVuZHMgcWZ7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0ZpbGVSZXBvc2l0b3J5J31pbml0KCl7dGhpcy5sb2FkZXJzPW5ldyBQYyx0aGlzLnNldCgndXBsb2FkZWQnLDApLHRoaXMuc2V0KCd1cGxvYWRUb3RhbCcsbnVsbCksdGhpcy5iaW5kKCd1cGxvYWRlZFBlcmNlbnQnKS50byh0aGlzLCd1cGxvYWRlZCcsdGhpcywndXBsb2FkVG90YWwnLChlLHQpPT50PzEwMCooZS90KTowKX1nZXRMb2FkZXIoZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5sb2FkZXJzKWlmKHQuZmlsZT09ZSlyZXR1cm4gdDtyZXR1cm4gbnVsbH1jcmVhdGVMb2FkZXIoZSl7aWYoIXRoaXMuY3JlYXRlVXBsb2FkQWRhcHRlcilyZXR1cm4gUnUuZXJyb3IoJ2ZpbGVyZXBvc2l0b3J5LW5vLXVwbG9hZC1hZGFwdGVyOiBVcGxvYWQgYWRhcHRlciBpcyBub3QgZGVmaW5lZC4nKSxudWxsO2NvbnN0IHQ9bmV3IEVoKGUpO3JldHVybiB0Ll9hZGFwdGVyPXRoaXMuY3JlYXRlVXBsb2FkQWRhcHRlcih0KSx0aGlzLmxvYWRlcnMuYWRkKHQpLHQub24oJ2NoYW5nZTp1cGxvYWRlZCcsKCk9PntsZXQgZT0wO2Zvcihjb25zdCB0IG9mIHRoaXMubG9hZGVycyllKz10LnVwbG9hZGVkO3RoaXMudXBsb2FkZWQ9ZX0pLHQub24oJ2NoYW5nZTp1cGxvYWRUb3RhbCcsKCk9PntsZXQgZT0wO2Zvcihjb25zdCB0IG9mIHRoaXMubG9hZGVycyl0LnVwbG9hZFRvdGFsJiYoZSs9dC51cGxvYWRUb3RhbCk7dGhpcy51cGxvYWRUb3RhbD1lfSksdH1kZXN0cm95TG9hZGVyKGUpe2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIEVoP2U6dGhpcy5nZXRMb2FkZXIoZSk7dC5fZGVzdHJveSgpLHRoaXMubG9hZGVycy5yZW1vdmUodCl9fWYoUGgsYmMpO2NsYXNzIEVoe2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5pZD1pKCksdGhpcy5maWxlPWUsdGhpcy5fYWRhcHRlcj10LHRoaXMuX3JlYWRlcj1uZXcgVGgsdGhpcy5zZXQoJ3N0YXR1cycsJ2lkbGUnKSx0aGlzLnNldCgndXBsb2FkZWQnLDApLHRoaXMuc2V0KCd1cGxvYWRUb3RhbCcsbnVsbCksdGhpcy5iaW5kKCd1cGxvYWRlZFBlcmNlbnQnKS50byh0aGlzLCd1cGxvYWRlZCcsdGhpcywndXBsb2FkVG90YWwnLChlLHQpPT50PzEwMCooZS90KTowKSx0aGlzLnNldCgndXBsb2FkUmVzcG9uc2UnLG51bGwpfXJlYWQoKXtpZignaWRsZSchPXRoaXMuc3RhdHVzKXRocm93IG5ldyBaYSgnZmlsZXJlcG9zaXRvcnktcmVhZC13cm9uZy1zdGF0dXM6IFlvdSBjYW5ub3QgY2FsbCByZWFkIGlmIHRoZSBzdGF0dXMgaXMgZGlmZmVyZW50IHRoYW4gaWRsZS4nKTtyZXR1cm4gdGhpcy5zdGF0dXM9J3JlYWRpbmcnLHRoaXMuX3JlYWRlci5yZWFkKHRoaXMuZmlsZSkudGhlbigoZSk9Pih0aGlzLnN0YXR1cz0naWRsZScsZSkpLmNhdGNoKChlKT0+e2lmKCdhYm9ydGVkJz09PWUpdGhyb3cgdGhpcy5zdGF0dXM9J2Fib3J0ZWQnLCdhYm9ydGVkJzt0aHJvdyB0aGlzLnN0YXR1cz0nZXJyb3InLHRoaXMuX3JlYWRlci5lcnJvcn0pfXVwbG9hZCgpe2lmKCdpZGxlJyE9dGhpcy5zdGF0dXMpdGhyb3cgbmV3IFphKCdmaWxlcmVwb3NpdG9yeS11cGxvYWQtd3Jvbmctc3RhdHVzOiBZb3UgY2Fubm90IGNhbGwgdXBsb2FkIGlmIHRoZSBzdGF0dXMgaXMgZGlmZmVyZW50IHRoYW4gaWRsZS4nKTtyZXR1cm4gdGhpcy5zdGF0dXM9J3VwbG9hZGluZycsdGhpcy5fYWRhcHRlci51cGxvYWQoKS50aGVuKChlKT0+KHRoaXMudXBsb2FkUmVzcG9uc2U9ZSx0aGlzLnN0YXR1cz0naWRsZScsZSkpLmNhdGNoKChlKT0+e2lmKCdhYm9ydGVkJz09PXRoaXMuc3RhdHVzKXRocm93J2Fib3J0ZWQnO3Rocm93IHRoaXMuc3RhdHVzPSdlcnJvcicsZX0pfWFib3J0KCl7Y29uc3QgZT10aGlzLnN0YXR1czt0aGlzLnN0YXR1cz0nYWJvcnRlZCcsJ3JlYWRpbmcnPT1lJiZ0aGlzLl9yZWFkZXIuYWJvcnQoKSwndXBsb2FkaW5nJz09ZSYmdGhpcy5fYWRhcHRlci5hYm9ydCYmdGhpcy5fYWRhcHRlci5hYm9ydCgpLHRoaXMuX2Rlc3Ryb3koKX1fZGVzdHJveSgpe3RoaXMuX3JlYWRlcj12b2lkIDAsdGhpcy5fYWRhcHRlcj12b2lkIDAsdGhpcy5kYXRhPXZvaWQgMCx0aGlzLnVwbG9hZFJlc3BvbnNlPXZvaWQgMCx0aGlzLmZpbGU9dm9pZCAwfX1mKEVoLGJjKTtjb25zdCBTaD0nY2tDc3JmVG9rZW4nLE9oPTQwLFJoPSdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO2NsYXNzIEloIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltQaF19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0NLRmluZGVyVXBsb2FkQWRhcHRlcid9aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IuY29uZmlnLmdldCgnY2tmaW5kZXIudXBsb2FkVXJsJyk7ZSYmKHRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KFBoKS5jcmVhdGVVcGxvYWRBZGFwdGVyPSh0KT0+bmV3IFZoKHQsZSx0aGlzLmVkaXRvci50KSl9fWNsYXNzIFZoe2NvbnN0cnVjdG9yKGUsbyxuKXt0aGlzLmxvYWRlcj1lLHRoaXMudXJsPW8sdGhpcy50PW59dXBsb2FkKCl7cmV0dXJuIG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5faW5pdFJlcXVlc3QoKSx0aGlzLl9pbml0TGlzdGVuZXJzKGUsdCksdGhpcy5fc2VuZFJlcXVlc3QoKX0pfWFib3J0KCl7dGhpcy54aHImJnRoaXMueGhyLmFib3J0KCl9X2luaXRSZXF1ZXN0KCl7Y29uc3QgZT10aGlzLnhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7ZS5vcGVuKCdQT1NUJyx0aGlzLnVybCwhMCksZS5yZXNwb25zZVR5cGU9J2pzb24nfV9pbml0TGlzdGVuZXJzKGUsbyl7Y29uc3Qgbj10aGlzLnhocixpPXRoaXMubG9hZGVyLHI9dGhpcy50LHQ9cignYScpK2AgJHtpLmZpbGUubmFtZX0uYDtuLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywoKT0+byh0KSksbi5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsKCk9Pm8oKSksbi5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywoKT0+e2NvbnN0IGk9bi5yZXNwb25zZTtyZXR1cm4gaSYmaS51cGxvYWRlZD92b2lkIGUoe2RlZmF1bHQ6aS51cmx9KTpvKGkmJmkuZXJyb3ImJmkuZXJyb3IubWVzc2FnZT9pLmVycm9yLm1lc3NhZ2U6dCl9KSxuLnVwbG9hZCYmbi51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLChlKT0+e2UubGVuZ3RoQ29tcHV0YWJsZSYmKGkudXBsb2FkVG90YWw9ZS50b3RhbCxpLnVwbG9hZGVkPWUubG9hZGVkKX0pfV9zZW5kUmVxdWVzdCgpe2NvbnN0IGU9bmV3IEZvcm1EYXRhO2UuYXBwZW5kKCd1cGxvYWQnLHRoaXMubG9hZGVyLmZpbGUpLGUuYXBwZW5kKCdja0NzcmZUb2tlbicsQ2koKSksdGhpcy54aHIuc2VuZChlKX19Y2xhc3MgRmh7Y29uc3RydWN0b3IoZSx0LG8pe2xldCBuO2lmKCdmdW5jdGlvbic9PXR5cGVvZiBvKW49bztlbHNle249KCk9PntlLmV4ZWN1dGUobyl9fWUubW9kZWwuZG9jdW1lbnQub24oJ2NoYW5nZScsKG8saSk9PntpZigndHJhbnNwYXJlbnQnPT1pLnR5cGUpcmV0dXJuO2NvbnN0IHI9QXJyYXkuZnJvbShlLm1vZGVsLmRvY3VtZW50LmRpZmZlci5nZXRDaGFuZ2VzKCkpLGE9clswXTtpZigxIT1yLmxlbmd0aHx8J2luc2VydCchPT1hLnR5cGV8fCckdGV4dCchPWEubmFtZXx8MSE9YS5sZW5ndGgpcmV0dXJuO2NvbnN0IHM9YS5wb3NpdGlvbi50ZXh0Tm9kZXx8YS5wb3NpdGlvbi5ub2RlQWZ0ZXI7aWYoIXMucGFyZW50LmlzKCdwYXJhZ3JhcGgnKSlyZXR1cm47Y29uc3QgbD10LmV4ZWMocy5kYXRhKTtsJiZlLm1vZGVsLmVucXVldWVDaGFuZ2UoKGUpPT57Y29uc3QgdD1HdS5jcmVhdGVGcm9tUGFyZW50c0FuZE9mZnNldHMocy5wYXJlbnQsMCxzLnBhcmVudCxsWzBdLmxlbmd0aCk7ZS5yZW1vdmUodCksbih7bWF0Y2g6bH0pfSl9KX19Y2xhc3MgTmh7Y29uc3RydWN0b3IoZSx0LG8pe2xldCBuLGkscixhO3QgaW5zdGFuY2VvZiBSZWdFeHA/bj10OnI9dCwnc3RyaW5nJz09dHlwZW9mIG8/aT1vOmE9byxyPXJ8fCgoZSk9PntsZXQgdDtjb25zdCBvPVtdLGk9W107Zm9yKDtudWxsIT09KHQ9bi5leGVjKGUpKSYmISh0JiY0PnQubGVuZ3RoKTspe2xldHtpbmRleDplLDE6biwyOnIsMzphfT10O2UrPXRbMF0ubGVuZ3RoLShuK3IrYSkubGVuZ3RoO2NvbnN0IHM9W2UsZStuLmxlbmd0aF0sbD1bZStuLmxlbmd0aCtyLmxlbmd0aCxlK24ubGVuZ3RoK3IubGVuZ3RoK2EubGVuZ3RoXTtvLnB1c2gocyksby5wdXNoKGwpLGkucHVzaChbZStuLmxlbmd0aCxlK24ubGVuZ3RoK3IubGVuZ3RoXSl9cmV0dXJue3JlbW92ZTpvLGZvcm1hdDppfX0pLGE9YXx8KChlLHQpPT57Zm9yKGNvbnN0IG8gb2YgdCllLnNldEF0dHJpYnV0ZShpLCEwLG8pO2UucmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKGkpfSksZS5tb2RlbC5kb2N1bWVudC5vbignY2hhbmdlJywodCxvKT0+e2lmKCd0cmFuc3BhcmVudCc9PW8udHlwZSlyZXR1cm47Y29uc3Qgbj1lLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjtpZighbi5pc0NvbGxhcHNlZClyZXR1cm47Y29uc3Qgcz1BcnJheS5mcm9tKGUubW9kZWwuZG9jdW1lbnQuZGlmZmVyLmdldENoYW5nZXMoKSksbD1zWzBdO2lmKDEhPXMubGVuZ3RofHwnaW5zZXJ0JyE9PWwudHlwZXx8JyR0ZXh0JyE9bC5uYW1lfHwxIT1sLmxlbmd0aClyZXR1cm47Y29uc3QgZD1uLmZvY3VzLnBhcmVudCxjPUVpKGQpLnNsaWNlKDAsbi5mb2N1cy5vZmZzZXQpLHU9cihjKSxtPVNpKGQsdS5mb3JtYXQpLHA9U2koZCx1LnJlbW92ZSk7bS5sZW5ndGgmJnAubGVuZ3RoJiZlLm1vZGVsLmVucXVldWVDaGFuZ2UoKHQpPT57Y29uc3Qgbz1lLm1vZGVsLnNjaGVtYS5nZXRWYWxpZFJhbmdlcyhtLGkpO2EodCxvKTtmb3IoY29uc3QgZSBvZiBwLnJldmVyc2UoKSl0LnJlbW92ZShlKX0pfSl9fWNsYXNzIE1oIGV4dGVuZHMgcWZ7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0F1dG9mb3JtYXQnfWFmdGVySW5pdCgpe3RoaXMuX2FkZExpc3RBdXRvZm9ybWF0cygpLHRoaXMuX2FkZEJhc2ljU3R5bGVzQXV0b2Zvcm1hdHMoKSx0aGlzLl9hZGRIZWFkaW5nQXV0b2Zvcm1hdHMoKSx0aGlzLl9hZGRCbG9ja1F1b3RlQXV0b2Zvcm1hdHMoKX1fYWRkTGlzdEF1dG9mb3JtYXRzKCl7Y29uc3QgZT10aGlzLmVkaXRvci5jb21tYW5kcztlLmdldCgnYnVsbGV0ZWRMaXN0JykmJm5ldyBGaCh0aGlzLmVkaXRvciwvXlsqLV1cXHMkLywnYnVsbGV0ZWRMaXN0JyksZS5nZXQoJ251bWJlcmVkTGlzdCcpJiZuZXcgRmgodGhpcy5lZGl0b3IsL15cXGQrWy58KV1cXHMkLywnbnVtYmVyZWRMaXN0Jyl9X2FkZEJhc2ljU3R5bGVzQXV0b2Zvcm1hdHMoKXtjb25zdCBlPXRoaXMuZWRpdG9yLmNvbW1hbmRzO2UuZ2V0KCdib2xkJykmJihuZXcgTmgodGhpcy5lZGl0b3IsLyhcXCpcXCopKFteKl0rKShcXCpcXCopJC9nLCdib2xkJyksbmV3IE5oKHRoaXMuZWRpdG9yLC8oX18pKFteX10rKShfXykkL2csJ2JvbGQnKSksZS5nZXQoJ2l0YWxpYycpJiYobmV3IE5oKHRoaXMuZWRpdG9yLC8oPzpefFteKl0pKFxcKikoW14qX10rKShcXCopJC9nLCdpdGFsaWMnKSxuZXcgTmgodGhpcy5lZGl0b3IsLyg/Ol58W15fXSkoXykoW15fXSspKF8pJC9nLCdpdGFsaWMnKSksZS5nZXQoJ2NvZGUnKSYmbmV3IE5oKHRoaXMuZWRpdG9yLC8oYCkoW15gXSspKGApJC9nLCdjb2RlJyl9X2FkZEhlYWRpbmdBdXRvZm9ybWF0cygpe2NvbnN0IGU9dGhpcy5lZGl0b3IuY29tbWFuZHMuZ2V0KCdoZWFkaW5nJyk7ZSYmZS5tb2RlbEVsZW1lbnRzLmZpbHRlcigoZSk9PmUubWF0Y2goL15oZWFkaW5nWzEtNl0kLykpLmZvckVhY2goKGUpPT57Y29uc3QgdD1lWzddLG89bmV3IFJlZ0V4cChgXigjeyR7dH19KVxcXFxzJGApO25ldyBGaCh0aGlzLmVkaXRvcixvLCgpPT57dGhpcy5lZGl0b3IuZXhlY3V0ZSgnaGVhZGluZycse3ZhbHVlOmV9KX0pfSl9X2FkZEJsb2NrUXVvdGVBdXRvZm9ybWF0cygpe3RoaXMuZWRpdG9yLmNvbW1hbmRzLmdldCgnYmxvY2tRdW90ZScpJiZuZXcgRmgodGhpcy5lZGl0b3IsL14+XFxzJC8sJ2Jsb2NrUXVvdGUnKX19Y2xhc3MgRGggZXh0ZW5kcyBHZntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGUpLHRoaXMuYXR0cmlidXRlS2V5PXR9cmVmcmVzaCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwsdD1lLmRvY3VtZW50O3RoaXMudmFsdWU9dC5zZWxlY3Rpb24uaGFzQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlS2V5KSx0aGlzLmlzRW5hYmxlZD1lLnNjaGVtYS5jaGVja0F0dHJpYnV0ZUluU2VsZWN0aW9uKHQuc2VsZWN0aW9uLHRoaXMuYXR0cmlidXRlS2V5KX1leGVjdXRlKGU9e30pe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwsbz10LmRvY3VtZW50LG49by5zZWxlY3Rpb24saT1lLmZvcmNlVmFsdWU9PT12b2lkIDA/IXRoaXMudmFsdWU6ZS5mb3JjZVZhbHVlO3QuY2hhbmdlKChlKT0+e2lmKG4uaXNDb2xsYXBzZWQpaT9lLnNldFNlbGVjdGlvbkF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZUtleSwhMCk6ZS5yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXkpO2Vsc2V7Y29uc3Qgbz10LnNjaGVtYS5nZXRWYWxpZFJhbmdlcyhuLmdldFJhbmdlcygpLHRoaXMuYXR0cmlidXRlS2V5KTtmb3IoY29uc3QgdCBvZiBvKWk/ZS5zZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVLZXksaSx0KTplLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZUtleSx0KX19KX19Y29uc3QgQmg9J2JvbGQnO2NsYXNzIExoIGV4dGVuZHMgcWZ7aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3I7ZS5tb2RlbC5zY2hlbWEuZXh0ZW5kKCckdGV4dCcse2FsbG93QXR0cmlidXRlczpCaH0pLGUuY29udmVyc2lvbi5hdHRyaWJ1dGVUb0VsZW1lbnQoe21vZGVsOkJoLHZpZXc6J3N0cm9uZycsdXBjYXN0QWxzbzpbJ2InLHtzdHlsZXM6e1wiZm9udC13ZWlnaHRcIjonYm9sZCd9fV19KSxlLmNvbW1hbmRzLmFkZChCaCxuZXcgRGgoZSxCaCkpLGUua2V5c3Ryb2tlcy5zZXQoJ0NUUkwrQicsQmgpfX12YXIgemg9bygzMiksamg9by5uKHpoKTtjb25zdCBxaD0nYm9sZCc7Y2xhc3MgV2ggZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcixvPWUudDtlLnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKHFoLCh0KT0+e2NvbnN0IG49ZS5jb21tYW5kcy5nZXQocWgpLGk9bmV3IGtoKHQpO3JldHVybiBpLnNldCh7bGFiZWw6bygnYycpLGljb246amguYSxrZXlzdHJva2U6J0NUUkwrQicsdG9vbHRpcDohMH0pLGkuYmluZCgnaXNPbicsJ2lzRW5hYmxlZCcpLnRvKG4sJ3ZhbHVlJywnaXNFbmFibGVkJyksdGhpcy5saXN0ZW5UbyhpLCdleGVjdXRlJywoKT0+ZS5leGVjdXRlKHFoKSksaX0pfX1jbGFzcyBVaCBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bTGgsV2hdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidCb2xkJ319Y29uc3QgSGg9J2l0YWxpYyc7Y2xhc3MgS2ggZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcjtlLm1vZGVsLnNjaGVtYS5leHRlbmQoJyR0ZXh0Jyx7YWxsb3dBdHRyaWJ1dGVzOkhofSksZS5jb252ZXJzaW9uLmF0dHJpYnV0ZVRvRWxlbWVudCh7bW9kZWw6SGgsdmlldzonaScsdXBjYXN0QWxzbzpbJ2VtJyx7c3R5bGVzOntcImZvbnQtc3R5bGVcIjonaXRhbGljJ319XX0pLGUuY29tbWFuZHMuYWRkKEhoLG5ldyBEaChlLEhoKSksZS5rZXlzdHJva2VzLnNldCgnQ1RSTCtJJyxIaCl9fXZhciBHaD1vKDMzKSwkaD1vLm4oR2gpO2NvbnN0IEpoPSdpdGFsaWMnO2NsYXNzIFFoIGV4dGVuZHMgcWZ7aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3Isbz1lLnQ7ZS51aS5jb21wb25lbnRGYWN0b3J5LmFkZChKaCwodCk9Pntjb25zdCBuPWUuY29tbWFuZHMuZ2V0KEpoKSxpPW5ldyBraCh0KTtyZXR1cm4gaS5zZXQoe2xhYmVsOm8oJ2QnKSxpY29uOiRoLmEsa2V5c3Ryb2tlOidDVFJMK0knLHRvb2x0aXA6ITB9KSxpLmJpbmQoJ2lzT24nLCdpc0VuYWJsZWQnKS50byhuLCd2YWx1ZScsJ2lzRW5hYmxlZCcpLHRoaXMubGlzdGVuVG8oaSwnZXhlY3V0ZScsKCk9PmUuZXhlY3V0ZShKaCkpLGl9KX19Y2xhc3MgWWggZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW0toLFFoXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nSXRhbGljJ319Y2xhc3MgWGggZXh0ZW5kcyBHZntyZWZyZXNoKCl7dGhpcy52YWx1ZT10aGlzLl9nZXRWYWx1ZSgpLHRoaXMuaXNFbmFibGVkPXRoaXMuX2NoZWNrRW5hYmxlZCgpfWV4ZWN1dGUoKXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsLHQ9ZS5kb2N1bWVudCxvPWUuc2NoZW1hLG49QXJyYXkuZnJvbSh0LnNlbGVjdGlvbi5nZXRTZWxlY3RlZEJsb2NrcygpKTtlLmNoYW5nZSgoZSk9PntpZih0aGlzLnZhbHVlKXRoaXMuX3JlbW92ZVF1b3RlKGUsbi5maWx0ZXIoUmkpKTtlbHNle2NvbnN0IHQ9bi5maWx0ZXIoKGUpPT5SaShlKXx8VmkobyxlKSk7dGhpcy5fYXBwbHlRdW90ZShlLHQpfX0pfV9nZXRWYWx1ZSgpe2NvbnN0IGU9T2kodGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO3JldHVybiEhKGUmJlJpKGUpKX1fY2hlY2tFbmFibGVkKCl7aWYodGhpcy52YWx1ZSlyZXR1cm4hMDtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbix0PXRoaXMuZWRpdG9yLm1vZGVsLnNjaGVtYSxvPU9pKGUuZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7cmV0dXJuISFvJiZWaSh0LG8pfV9yZW1vdmVRdW90ZShlLHQpe0lpKHQpLnJldmVyc2UoKS5mb3JFYWNoKCh0KT0+e2lmKHQuc3RhcnQuaXNBdFN0YXJ0JiZ0LmVuZC5pc0F0RW5kKXJldHVybiB2b2lkIGUudW53cmFwKHQuc3RhcnQucGFyZW50KTtpZih0LnN0YXJ0LmlzQXRTdGFydCl7Y29uc3Qgbz1LdS5jcmVhdGVCZWZvcmUodC5zdGFydC5wYXJlbnQpO3JldHVybiB2b2lkIGUubW92ZSh0LG8pfXQuZW5kLmlzQXRFbmR8fGUuc3BsaXQodC5lbmQpO2NvbnN0IG89S3UuY3JlYXRlQWZ0ZXIodC5lbmQucGFyZW50KTtlLm1vdmUodCxvKX0pfV9hcHBseVF1b3RlKGUsdCl7Y29uc3Qgbz1bXTtJaSh0KS5yZXZlcnNlKCkuZm9yRWFjaCgodCk9PntsZXQgbj1SaSh0LnN0YXJ0KTtufHwobj1uZXcgV3UoJ2Jsb2NrUXVvdGUnKSxlLndyYXAodCxuKSksby5wdXNoKG4pfSksby5yZXZlcnNlKCkucmVkdWNlKCh0LG8pPT50Lm5leHRTaWJsaW5nPT1vPyhlLm1lcmdlKEt1LmNyZWF0ZUFmdGVyKHQpKSx0KTpvKX19Y2xhc3MgWmggZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PWUubW9kZWwuc2NoZW1hO2UuY29tbWFuZHMuYWRkKCdibG9ja1F1b3RlJyxuZXcgWGgoZSkpLHQucmVnaXN0ZXIoJ2Jsb2NrUXVvdGUnLHthbGxvd1doZXJlOickYmxvY2snLGFsbG93Q29udGVudE9mOickcm9vdCd9KSx0LmFkZENoaWxkQ2hlY2soKGUsdCk9PntpZihlLmVuZHNXaXRoKCdibG9ja1F1b3RlJykmJidibG9ja1F1b3RlJz09dC5uYW1lKXJldHVybiExfSksZS5jb252ZXJzaW9uLmVsZW1lbnRUb0VsZW1lbnQoe21vZGVsOidibG9ja1F1b3RlJyx2aWV3OidibG9ja3F1b3RlJ30pfWFmdGVySW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLmNvbW1hbmRzLmdldCgnYmxvY2tRdW90ZScpO3RoaXMubGlzdGVuVG8odGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LmRvY3VtZW50LCdlbnRlcicsKGUsbyk9Pntjb25zdCBuPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LGk9bi5zZWxlY3Rpb24uZ2V0TGFzdFBvc2l0aW9uKCkucGFyZW50O24uc2VsZWN0aW9uLmlzQ29sbGFwc2VkJiZpLmlzRW1wdHkmJnQudmFsdWUmJih0aGlzLmVkaXRvci5leGVjdXRlKCdibG9ja1F1b3RlJyksdGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LnNjcm9sbFRvVGhlU2VsZWN0aW9uKCksby5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcCgpKX0pfX12YXIgZWI9bygzNCksdGI9by5uKGViKSxvYj1vKDM1KSxuYj1vLm4ob2IpO2NsYXNzIGliIGV4dGVuZHMgcWZ7aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3Isbz1lLnQ7ZS51aS5jb21wb25lbnRGYWN0b3J5LmFkZCgnYmxvY2tRdW90ZScsKHQpPT57Y29uc3Qgbj1lLmNvbW1hbmRzLmdldCgnYmxvY2tRdW90ZScpLGk9bmV3IGtoKHQpO3JldHVybiBpLnNldCh7bGFiZWw6bygnYicpLGljb246dGIuYSx0b29sdGlwOiEwfSksaS5iaW5kKCdpc09uJywnaXNFbmFibGVkJykudG8obiwndmFsdWUnLCdpc0VuYWJsZWQnKSx0aGlzLmxpc3RlblRvKGksJ2V4ZWN1dGUnLCgpPT5lLmV4ZWN1dGUoJ2Jsb2NrUXVvdGUnKSksaX0pfX1jbGFzcyByYiBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bWmgsaWJdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidCbG9ja1F1b3RlJ319Y29uc3QgYWI9L15kYXRhOihcXFMqPyk7YmFzZTY0LC87Y2xhc3Mgc2J7Y29uc3RydWN0b3IoZSx0LG8pe2lmKCFlKXRocm93IG5ldyBFcnJvcignRmlsZSBtdXN0IGJlIHByb3ZpZGVkJyk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdUb2tlbiBtdXN0IGJlIHByb3ZpZGVkJyk7aWYoIW8pdGhyb3cgbmV3IEVycm9yKCdBcGkgYWRkcmVzcyBtdXN0IGJlIHByb3ZpZGVkJyk7dGhpcy5maWxlPU5pKGUpP0ZpKGUpOmUsdGhpcy5fdG9rZW49dCx0aGlzLl9hcGlBZGRyZXNzPW99b25Qcm9ncmVzcyhlKXtyZXR1cm4gdGhpcy5vbigncHJvZ3Jlc3MnLCh0LG8pPT5lKG8pKSx0aGlzfW9uRXJyb3IoZSl7cmV0dXJuIHRoaXMub25jZSgnZXJyb3InLCh0LG8pPT5lKG8pKSx0aGlzfWFib3J0KCl7dGhpcy54aHIuYWJvcnQoKX1zZW5kKCl7cmV0dXJuIHRoaXMuX3ByZXBhcmVSZXF1ZXN0KCksdGhpcy5fYXR0YWNoWEhSTGlzdGVuZXJzKCksdGhpcy5fc2VuZFJlcXVlc3QoKX1fcHJlcGFyZVJlcXVlc3QoKXtjb25zdCBlPW5ldyBYTUxIdHRwUmVxdWVzdDtlLm9wZW4oJ1BPU1QnLHRoaXMuX2FwaUFkZHJlc3MpLGUuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsdGhpcy5fdG9rZW4udmFsdWUpLGUucmVzcG9uc2VUeXBlPSdqc29uJyx0aGlzLnhocj1lfV9hdHRhY2hYSFJMaXN0ZW5lcnMoKXtmdW5jdGlvbiBlKGUpe3JldHVybigpPT50LmZpcmUoJ2Vycm9yJyxlKX1jb25zdCB0PXRoaXMsbz10aGlzLnhocjtvLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJyxlKCdOZXR3b3JrIEVycm9yJykpLG8uYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLGUoJ0Fib3J0JykpLG8udXBsb2FkJiZvLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsKGUpPT57ZS5sZW5ndGhDb21wdXRhYmxlJiZ0aGlzLmZpcmUoJ3Byb2dyZXNzJyx7dG90YWw6ZS50b3RhbCx1cGxvYWRlZDplLmxvYWRlZH0pfSksby5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywoKT0+e2NvbnN0IGU9by5zdGF0dXMsdD1vLnJlc3BvbnNlO2lmKDIwMD5lfHwyOTk8ZSlyZXR1cm4gdGhpcy5maXJlKCdlcnJvcicsdC5tZXNzYWdlfHx0LmVycm9yKX0pfV9zZW5kUmVxdWVzdCgpe2NvbnN0IGU9bmV3IEZvcm1EYXRhLHQ9dGhpcy54aHI7cmV0dXJuIGUuYXBwZW5kKCdmaWxlJyx0aGlzLmZpbGUpLG5ldyBQcm9taXNlKChvLG4pPT57dC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywoKT0+e2NvbnN0IGU9dC5zdGF0dXMsaT10LnJlc3BvbnNlO3JldHVybiAyMDA+ZXx8Mjk5PGU/bihpLm1lc3NhZ2V8fGkuZXJyb3IpOm8oaSl9KSx0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywoKT0+bignTmV0d29yayBFcnJvcicpKSx0LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywoKT0+bignQWJvcnQnKSksdC5zZW5kKGUpfSl9fWYoc2Isc3MpO2NvbnN0IGxiPXtyZWZyZXNoSW50ZXJ2YWw6MzZlNSxhdXRvUmVmcmVzaDohMH07Y2xhc3MgZGJ7Y29uc3RydWN0b3IoZSx0PWxiKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoJ2B0b2tlblVybGAgbXVzdCBiZSBwcm92aWRlZCcpO3RoaXMuc2V0KCd2YWx1ZScsdC5pbml0VmFsdWUpLHRoaXMuX3Rva2VuVXJsPWUsdGhpcy5fb3B0aW9ucz1PYmplY3QuYXNzaWduKHt9LGxiLHQpfWluaXQoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9Pih0aGlzLl9vcHRpb25zLmF1dG9SZWZyZXNoJiZ0aGlzLl9zdGFydFJlZnJlc2hpbmcoKSx0aGlzLnZhbHVlP3ZvaWQgZSh0aGlzKTp2b2lkIHRoaXMuX3JlZnJlc2hUb2tlbigpLnRoZW4oZSkuY2F0Y2godCkpKX1fcmVmcmVzaFRva2VuKCl7cmV0dXJuIG5ldyBQcm9taXNlKChlLHQpPT57Y29uc3Qgbz1uZXcgWE1MSHR0cFJlcXVlc3Q7by5vcGVuKCdHRVQnLHRoaXMuX3Rva2VuVXJsKSxvLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCgpPT57Y29uc3Qgbj1vLnN0YXR1cyxpPW8ucmVzcG9uc2U7cmV0dXJuIDIwMD5ufHwyOTk8bj90KCdDYW5ub3QgZG93bmxvYWQgbmV3IHRva2VuIScpOih0aGlzLnNldCgndmFsdWUnLGkpLGUodGhpcykpfSksby5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsKCk9PnQoJ05ldHdvcmsgRXJyb3InKSksby5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsKCk9PnQoJ0Fib3J0JykpLG8uc2VuZCgpfSl9X3N0YXJ0UmVmcmVzaGluZygpe3RoaXMuX3JlZnJlc2hJbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLl9yZWZyZXNoVG9rZW4uYmluZCh0aGlzKSx0aGlzLl9vcHRpb25zLnJlZnJlc2hJbnRlcnZhbCl9X3N0b3BSZWZyZXNoaW5nKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLl9yZWZyZXNoSW50ZXJ2YWwpfXN0YXRpYyBjcmVhdGUoZSx0PWxiKXtjb25zdCBvPW5ldyBkYihlLHQpO3JldHVybiBvLmluaXQoKX19ZihkYixiYyk7Y2xhc3MgY2IgZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PWUuY29uZmlnLG89dC5nZXQoJ2Nsb3VkU2VydmljZXMnKXx8e307Zm9yKGNvbnN0IGUgaW4gbyl0aGlzW2VdPW9bZV07cmV0dXJuIHRoaXMudG9rZW5Vcmw/KHRoaXMudG9rZW49bmV3IGNiLlRva2VuKHRoaXMudG9rZW5VcmwpLHRoaXMudG9rZW4uaW5pdCgpKTp2b2lkKHRoaXMudG9rZW49bnVsbCl9fWNiLlRva2VuPWRiO2NsYXNzIHViIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltQaCxjYl19aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLnBsdWdpbnMuZ2V0KGNiKSxvPXQudG9rZW4sbj10LnVwbG9hZFVybDtvJiYodGhpcy5fdXBsb2FkR2F0ZXdheT1uZXcgdWIuX1VwbG9hZEdhdGV3YXkobyxuKSxlLnBsdWdpbnMuZ2V0KFBoKS5jcmVhdGVVcGxvYWRBZGFwdGVyPShlKT0+bmV3IG1iKHRoaXMuX3VwbG9hZEdhdGV3YXksZSkpfX1jbGFzcyBtYntjb25zdHJ1Y3RvcihlLHQpe3RoaXMudXBsb2FkR2F0ZXdheT1lLHRoaXMubG9hZGVyPXR9dXBsb2FkKCl7cmV0dXJuIHRoaXMuZmlsZVVwbG9hZGVyPXRoaXMudXBsb2FkR2F0ZXdheS51cGxvYWQodGhpcy5sb2FkZXIuZmlsZSksdGhpcy5maWxlVXBsb2FkZXIub24oJ3Byb2dyZXNzJywoZSx0KT0+e3RoaXMubG9hZGVyLnVwbG9hZFRvdGFsPXQudG90YWwsdGhpcy5sb2FkZXIudXBsb2FkZWQ9dC51cGxvYWRlZH0pLHRoaXMuZmlsZVVwbG9hZGVyLnNlbmQoKX1hYm9ydCgpe3RoaXMuZmlsZVVwbG9hZGVyLmFib3J0KCl9fXViLl9VcGxvYWRHYXRld2F5PWNsYXNze2NvbnN0cnVjdG9yKGUsdCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCdUb2tlbiBtdXN0IGJlIHByb3ZpZGVkJyk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdBcGkgYWRkcmVzcyBtdXN0IGJlIHByb3ZpZGVkJyk7dGhpcy5fdG9rZW49ZSx0aGlzLl9hcGlBZGRyZXNzPXR9dXBsb2FkKGUpe3JldHVybiBuZXcgc2IoZSx0aGlzLl90b2tlbix0aGlzLl9hcGlBZGRyZXNzKX19O2NsYXNzIHBie2NvbnN0cnVjdG9yKCl7dGhpcy5fc3RhY2s9W119YWRkKGUsdCl7Y29uc3Qgbz10aGlzLl9zdGFjayxuPW9bMF07dGhpcy5faW5zZXJ0RGVzY3JpcHRvcihlKTtjb25zdCBpPW9bMF07bj09PWl8fExpKG4saSl8fHRoaXMuZmlyZSgnY2hhbmdlOnRvcCcse29sZERlc2NyaXB0b3I6bixuZXdEZXNjcmlwdG9yOmksd3JpdGVyOnR9KX1yZW1vdmUoZSx0KXtjb25zdCBvPXRoaXMuX3N0YWNrLG49b1swXTt0aGlzLl9yZW1vdmVEZXNjcmlwdG9yKGUpO2NvbnN0IGk9b1swXTtuPT09aXx8TGkobixpKXx8dGhpcy5maXJlKCdjaGFuZ2U6dG9wJyx7b2xkRGVzY3JpcHRvcjpuLG5ld0Rlc2NyaXB0b3I6aSx3cml0ZXI6dH0pfV9pbnNlcnREZXNjcmlwdG9yKGUpe2NvbnN0IHQ9dGhpcy5fc3RhY2ssbz10LmZpbmRJbmRleCgodCk9PnQuaWQ9PT1lLmlkKTtpZighTGkoZSx0W29dKSl7LTE8byYmdC5zcGxpY2UobywxKTtsZXQgbj0wO2Zvcig7dFtuXSYmemkodFtuXSxlKTspbisrO3Quc3BsaWNlKG4sMCxlKX19X3JlbW92ZURlc2NyaXB0b3IoZSl7Y29uc3QgdD10aGlzLl9zdGFjayxvPXQuZmluZEluZGV4KCh0KT0+dC5pZD09PWUpOy0xPG8mJnQuc3BsaWNlKG8sMSl9fWYocGIsc3MpO2NvbnN0IGdiPVN5bWJvbCgnaXNXaWRnZXQnKSxmYj1TeW1ib2woJ2xhYmVsJyksaGI9J2NrLXdpZGdldCcsYmI9J2NrLXdpZGdldF9zZWxlY3RlZCcsa2I9U3ltYm9sKCdpc0ltYWdlJyk7Y2xhc3MgX2IgZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcixvPWUubW9kZWwuc2NoZW1hLG49ZS50LHQ9ZS5jb252ZXJzaW9uO28ucmVnaXN0ZXIoJ2ltYWdlJyx7aXNPYmplY3Q6ITAsaXNCbG9jazohMCxhbGxvd1doZXJlOickYmxvY2snLGFsbG93QXR0cmlidXRlczpbJ2FsdCcsJ3NyYycsJ3NyY3NldCddfSksdC5mb3IoJ2RhdGFEb3duY2FzdCcpLmFkZChodCh7bW9kZWw6J2ltYWdlJyx2aWV3OihlLHQpPT5aaSh0KX0pKSx0LmZvcignZWRpdGluZ0Rvd25jYXN0JykuYWRkKGh0KHttb2RlbDonaW1hZ2UnLHZpZXc6KGUsdCk9PkppKFppKHQpLHQsbignZScpKX0pKSx0LmZvcignZG93bmNhc3QnKS5hZGQoQmkoJ3NyYycpKS5hZGQoQmkoJ2FsdCcpKS5hZGQoRGkoKSksdC5mb3IoJ3VwY2FzdCcpLmFkZChZdCh7dmlldzp7bmFtZTonaW1nJyxhdHRyaWJ1dGVzOntzcmM6ITB9fSxtb2RlbDooZSx0KT0+dC5jcmVhdGVFbGVtZW50KCdpbWFnZScse3NyYzplLmdldEF0dHJpYnV0ZSgnc3JjJyl9KX0pKS5hZGQoWnQoe3ZpZXc6e25hbWU6J2ltZycsa2V5OidhbHQnfSxtb2RlbDonYWx0J30pKS5hZGQoWnQoe3ZpZXc6e25hbWU6J2ltZycsa2V5OidzcmNzZXQnfSxtb2RlbDp7a2V5OidzcmNzZXQnLHZhbHVlOihlKT0+e2NvbnN0IHQ9e2RhdGE6ZS5nZXRBdHRyaWJ1dGUoJ3NyY3NldCcpfTtyZXR1cm4gZS5oYXNBdHRyaWJ1dGUoJ3dpZHRoJykmJih0LndpZHRoPWUuZ2V0QXR0cmlidXRlKCd3aWR0aCcpKSx0fX19KSkuYWRkKE1pKCkpfX1jbGFzcyB3YiBleHRlbmRzIHZ1e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuZG9tRXZlbnRUeXBlPSdtb3VzZWRvd24nfW9uRG9tRXZlbnQoZSl7dGhpcy5maXJlKGUudHlwZSxlKX19dmFyIHZiPW8oMzcpLHliPW8ubih2Yik7Y29uc3QgeGI9b2UoJ0N0cmwrQScpO2NsYXNzIENiIGV4dGVuZHMgcWZ7c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ1dpZGdldCd9aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IuZWRpdGluZy52aWV3LHQ9ZS5kb2N1bWVudDt0aGlzLl9wcmV2aW91c2x5U2VsZWN0ZWQ9bmV3IFNldCx0aGlzLmVkaXRvci5lZGl0aW5nLmRvd25jYXN0RGlzcGF0Y2hlci5vbignc2VsZWN0aW9uJywoZSx0LG8pPT57dGhpcy5fY2xlYXJQcmV2aW91c2x5U2VsZWN0ZWRXaWRnZXRzKG8ud3JpdGVyKTtjb25zdCBuPW8ud3JpdGVyLGk9bi5kb2N1bWVudC5zZWxlY3Rpb24scj1pLmdldFNlbGVjdGVkRWxlbWVudCgpO2Zvcihjb25zdCBhIG9mIGkuZ2V0UmFuZ2VzKCkpZm9yKGNvbnN0IGUgb2YgYSl7Y29uc3QgdD1lLml0ZW07dC5pcygnZWxlbWVudCcpJiZxaSh0KSYmKG4uYWRkQ2xhc3MoYmIsdCksdGhpcy5fcHJldmlvdXNseVNlbGVjdGVkLmFkZCh0KSx0PT1yJiZuLnNldFNlbGVjdGlvbihpLmdldFJhbmdlcygpLHtmYWtlOiEwLGxhYmVsOktpKHIpfSkpfX0se3ByaW9yaXR5Oidsb3cnfSksZS5hZGRPYnNlcnZlcih3YiksdGhpcy5saXN0ZW5Ubyh0LCdtb3VzZWRvd24nLCguLi5lKT0+dGhpcy5fb25Nb3VzZWRvd24oLi4uZSkpLHRoaXMubGlzdGVuVG8odCwna2V5ZG93bicsKC4uLmUpPT50aGlzLl9vbktleWRvd24oLi4uZSkse3ByaW9yaXR5OidoaWdoJ30pLHRoaXMubGlzdGVuVG8odCwnZGVsZXRlJywoZSx0KT0+e3RoaXMuX2hhbmRsZURlbGV0ZSgnZm9yd2FyZCc9PXQuZGlyZWN0aW9uKSYmKHQucHJldmVudERlZmF1bHQoKSxlLnN0b3AoKSl9LHtwcmlvcml0eTonaGlnaCd9KX1fb25Nb3VzZWRvd24oZSx0KXtjb25zdCBvPXRoaXMuZWRpdG9yLG49by5lZGl0aW5nLnZpZXcsaT1uLmRvY3VtZW50O2xldCByPXQudGFyZ2V0O2lmKCFvcihyKSYmKHFpKHIpfHwocj1yLmZpbmRBbmNlc3RvcihxaSksISFyKSkpe3QucHJldmVudERlZmF1bHQoKSxpLmlzRm9jdXNlZHx8bi5mb2N1cygpO2NvbnN0IGU9by5lZGl0aW5nLm1hcHBlci50b01vZGVsRWxlbWVudChyKTt0aGlzLl9zZXRTZWxlY3Rpb25PdmVyRWxlbWVudChlKX19X29uS2V5ZG93bihlLHQpe2NvbnN0IG89dC5rZXlDb2RlLG49bz09RGMuZGVsZXRlfHxvPT1EYy5hcnJvd2Rvd258fG89PURjLmFycm93cmlnaHQ7bGV0IGk9ITE7ZXIobyk/aT10aGlzLl9oYW5kbGVBcnJvd0tleXMobik6dHIodCkmJihpPXRoaXMuX3NlbGVjdEFsbE5lc3RlZEVkaXRhYmxlQ29udGVudCgpfHx0aGlzLl9zZWxlY3RBbGxDb250ZW50KCkpLGkmJih0LnByZXZlbnREZWZhdWx0KCksZS5zdG9wKCkpfV9oYW5kbGVEZWxldGUoZSl7aWYodGhpcy5lZGl0b3IuaXNSZWFkT25seSlyZXR1cm47Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudCxvPXQuc2VsZWN0aW9uO2lmKCFvLmlzQ29sbGFwc2VkKXJldHVybjtjb25zdCBuPXRoaXMuX2dldE9iamVjdEVsZW1lbnROZXh0VG9TZWxlY3Rpb24oZSk7aWYobilyZXR1cm4gdGhpcy5lZGl0b3IubW9kZWwuY2hhbmdlKChlKT0+e2ZvcihsZXQgdD1vLmFuY2hvci5wYXJlbnQ7dC5pc0VtcHR5Oyl7Y29uc3Qgbz10O3Q9by5wYXJlbnQsZS5yZW1vdmUobyl9dGhpcy5fc2V0U2VsZWN0aW9uT3ZlckVsZW1lbnQobil9KSwhMH1faGFuZGxlQXJyb3dLZXlzKGUpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwsbz10LnNjaGVtYSxuPXQuZG9jdW1lbnQsaT1uLnNlbGVjdGlvbixyPWkuZ2V0U2VsZWN0ZWRFbGVtZW50KCk7aWYociYmby5pc09iamVjdChyKSl7Y29uc3Qgbj1lP2kuZ2V0TGFzdFBvc2l0aW9uKCk6aS5nZXRGaXJzdFBvc2l0aW9uKCkscj1vLmdldE5lYXJlc3RTZWxlY3Rpb25SYW5nZShuLGU/J2ZvcndhcmQnOidiYWNrd2FyZCcpO3JldHVybiByJiZ0LmNoYW5nZSgoZSk9PntlLnNldFNlbGVjdGlvbihyKX0pLCEwfWlmKGkuaXNDb2xsYXBzZWQpe2NvbnN0IHQ9dGhpcy5fZ2V0T2JqZWN0RWxlbWVudE5leHRUb1NlbGVjdGlvbihlKTtpZih0IGluc3RhbmNlb2YgV3UmJm8uaXNPYmplY3QodCkpcmV0dXJuIHRoaXMuX3NldFNlbGVjdGlvbk92ZXJFbGVtZW50KHQpLCEwfX1fc2VsZWN0QWxsTmVzdGVkRWRpdGFibGVDb250ZW50KCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbCx0PWUuZG9jdW1lbnQuc2VsZWN0aW9uLG89ZS5zY2hlbWEuZ2V0TGltaXRFbGVtZW50KHQpO3JldHVybiB0LmdldEZpcnN0UmFuZ2UoKS5yb290IT1vJiYoZS5jaGFuZ2UoKGUpPT57ZS5zZXRTZWxlY3Rpb24oR3UuY3JlYXRlSW4obykpfSksITApfV9zZWxlY3RBbGxDb250ZW50KCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbCx0PXRoaXMuZWRpdG9yLmVkaXRpbmcsbz10LnZpZXcsbj1vLmRvY3VtZW50LGk9bi5zZWxlY3Rpb24scj1pLmdldFNlbGVjdGVkRWxlbWVudCgpO2lmKHImJnFpKHIpKXtjb25zdCBvPXQubWFwcGVyLnRvTW9kZWxFbGVtZW50KHIucGFyZW50KTtyZXR1cm4gZS5jaGFuZ2UoKGUpPT57ZS5zZXRTZWxlY3Rpb24oR3UuY3JlYXRlSW4obykpfSksITB9cmV0dXJuITF9X3NldFNlbGVjdGlvbk92ZXJFbGVtZW50KGUpe3RoaXMuZWRpdG9yLm1vZGVsLmNoYW5nZSgodCk9Pnt0LnNldFNlbGVjdGlvbihHdS5jcmVhdGVPbihlKSl9KX1fZ2V0T2JqZWN0RWxlbWVudE5leHRUb1NlbGVjdGlvbihlKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsLG89dC5zY2hlbWEsbj10LmRvY3VtZW50LnNlbGVjdGlvbixpPW5ldyBZdShuKTt0Lm1vZGlmeVNlbGVjdGlvbihpLHtkaXJlY3Rpb246ZT8nZm9yd2FyZCc6J2JhY2t3YXJkJ30pO2NvbnN0IHI9ZT9pLmZvY3VzLm5vZGVCZWZvcmU6aS5mb2N1cy5ub2RlQWZ0ZXI7cmV0dXJuIHIgaW5zdGFuY2VvZiBXdSYmby5pc09iamVjdChyKT9yOm51bGx9X2NsZWFyUHJldmlvdXNseVNlbGVjdGVkV2lkZ2V0cyhlKXtmb3IoY29uc3QgdCBvZiB0aGlzLl9wcmV2aW91c2x5U2VsZWN0ZWQpZS5yZW1vdmVDbGFzcyhiYix0KTt0aGlzLl9wcmV2aW91c2x5U2VsZWN0ZWQuY2xlYXIoKX19Y2xhc3MgQWIgZXh0ZW5kcyBHZntyZWZyZXNoKCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCk7dGhpcy5pc0VuYWJsZWQ9WGkoZSksdGhpcy52YWx1ZT0hIShYaShlKSYmZS5oYXNBdHRyaWJ1dGUoJ2FsdCcpKSYmZS5nZXRBdHRyaWJ1dGUoJ2FsdCcpfWV4ZWN1dGUoZSl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbCxvPXQuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpO3QuY2hhbmdlKCh0KT0+e3Quc2V0QXR0cmlidXRlKCdhbHQnLGUubmV3VmFsdWUsbyl9KX19Y2xhc3MgVGIgZXh0ZW5kcyBxZntpbml0KCl7dGhpcy5lZGl0b3IuY29tbWFuZHMuYWRkKCdpbWFnZVRleHRBbHRlcm5hdGl2ZScsbmV3IEFiKHRoaXMuZWRpdG9yKSl9fWNsYXNzIFBiIGV4dGVuZHMga2Z7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKTtjb25zdCBvPWBjay1pbnB1dC0ke2koKX1gO3RoaXMuc2V0KCdsYWJlbCcpLHRoaXMuc2V0KCd2YWx1ZScpLHRoaXMuc2V0KCdpc1JlYWRPbmx5JywhMSksdGhpcy5sYWJlbFZpZXc9dGhpcy5fY3JlYXRlTGFiZWxWaWV3KG8pLHRoaXMuaW5wdXRWaWV3PXRoaXMuX2NyZWF0ZUlucHV0Vmlldyh0LG8pO2NvbnN0IG49dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5zZXRUZW1wbGF0ZSh7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1sYWJlbGVkLWlucHV0JyxuLmlmKCdpc1JlYWRPbmx5JywnY2stZGlzYWJsZWQnKV19LGNoaWxkcmVuOlt0aGlzLmxhYmVsVmlldyx0aGlzLmlucHV0Vmlld119KX1fY3JlYXRlTGFiZWxWaWV3KGUpe2NvbnN0IHQ9bmV3IENmKHRoaXMubG9jYWxlKTtyZXR1cm4gdC5mb3I9ZSx0LmJpbmQoJ3RleHQnKS50byh0aGlzLCdsYWJlbCcpLHR9X2NyZWF0ZUlucHV0VmlldyhlLHQpe2NvbnN0IG89bmV3IGUodGhpcy5sb2NhbGUpO3JldHVybiBvLmlkPXQsby5iaW5kKCd2YWx1ZScpLnRvKHRoaXMpLG8uYmluZCgnaXNSZWFkT25seScpLnRvKHRoaXMpLG99c2VsZWN0KCl7dGhpcy5pbnB1dFZpZXcuc2VsZWN0KCl9Zm9jdXMoKXt0aGlzLmlucHV0Vmlldy5mb2N1cygpfX12YXIgRWI9bygzOSksU2I9by5uKEViKTtjbGFzcyBPYiBleHRlbmRzIGtme2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuc2V0KCd2YWx1ZScpLHRoaXMuc2V0KCdpZCcpLHRoaXMuc2V0KCdwbGFjZWhvbGRlcicpLHRoaXMuc2V0KCdpc1JlYWRPbmx5JywhMSk7Y29uc3QgdD10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLnNldFRlbXBsYXRlKHt0YWc6J2lucHV0JyxhdHRyaWJ1dGVzOnt0eXBlOid0ZXh0JyxjbGFzczpbJ2NrJywnY2staW5wdXQnLCdjay1pbnB1dC10ZXh0J10saWQ6dC50bygnaWQnKSxwbGFjZWhvbGRlcjp0LnRvKCdwbGFjZWhvbGRlcicpLHJlYWRvbmx5OnQudG8oJ2lzUmVhZE9ubHknKX19KX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKTtjb25zdCBlPShlKT0+e3RoaXMuZWxlbWVudC52YWx1ZT1lfHwwPT09ZT9lOicnfTtlKHRoaXMudmFsdWUpLHRoaXMub24oJ2NoYW5nZTp2YWx1ZScsKHQsbyxuKT0+e2Uobil9KX1zZWxlY3QoKXt0aGlzLmVsZW1lbnQuc2VsZWN0KCl9Zm9jdXMoKXt0aGlzLmVsZW1lbnQuZm9jdXMoKX19dmFyIFJiPW8oMyksSWI9by5uKFJiKSxWYj1vKDQpLEZiPW8ubihWYiksTmI9byg0MSksTWI9by5uKE5iKTtjbGFzcyBEYiBleHRlbmRzIGtme2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpO2NvbnN0IG89dGhpcy5sb2NhbGUudDt0aGlzLmZvY3VzVHJhY2tlcj1uZXcgbGYsdGhpcy5rZXlzdHJva2VzPW5ldyBaZyx0aGlzLmxhYmVsZWRJbnB1dD10aGlzLl9jcmVhdGVMYWJlbGVkSW5wdXRWaWV3KCksdGhpcy5zYXZlQnV0dG9uVmlldz10aGlzLl9jcmVhdGVCdXR0b24obygneCcpLEliLmEsJ2NrLWJ1dHRvbi1zYXZlJyksdGhpcy5zYXZlQnV0dG9uVmlldy50eXBlPSdzdWJtaXQnLHRoaXMuY2FuY2VsQnV0dG9uVmlldz10aGlzLl9jcmVhdGVCdXR0b24obygneScpLEZiLmEsJ2NrLWJ1dHRvbi1jYW5jZWwnLCdjYW5jZWwnKSx0aGlzLl9mb2N1c2FibGVzPW5ldyBjZix0aGlzLl9mb2N1c0N5Y2xlcj1uZXcgSWYoe2ZvY3VzYWJsZXM6dGhpcy5fZm9jdXNhYmxlcyxmb2N1c1RyYWNrZXI6dGhpcy5mb2N1c1RyYWNrZXIsa2V5c3Ryb2tlSGFuZGxlcjp0aGlzLmtleXN0cm9rZXMsYWN0aW9uczp7Zm9jdXNQcmV2aW91czonc2hpZnQgKyB0YWInLGZvY3VzTmV4dDondGFiJ319KSx0aGlzLnNldFRlbXBsYXRlKHt0YWc6J2Zvcm0nLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay10ZXh0LWFsdGVybmF0aXZlLWZvcm0nXSx0YWJpbmRleDonLTEnfSxjaGlsZHJlbjpbdGhpcy5sYWJlbGVkSW5wdXQsdGhpcy5zYXZlQnV0dG9uVmlldyx0aGlzLmNhbmNlbEJ1dHRvblZpZXddfSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCksdGhpcy5rZXlzdHJva2VzLmxpc3RlblRvKHRoaXMuZWxlbWVudCksaXIoe3ZpZXc6dGhpc30pLFt0aGlzLmxhYmVsZWRJbnB1dCx0aGlzLnNhdmVCdXR0b25WaWV3LHRoaXMuY2FuY2VsQnV0dG9uVmlld10uZm9yRWFjaCgoZSk9Pnt0aGlzLl9mb2N1c2FibGVzLmFkZChlKSx0aGlzLmZvY3VzVHJhY2tlci5hZGQoZS5lbGVtZW50KX0pfV9jcmVhdGVCdXR0b24oZSx0LG8sbil7Y29uc3QgaT1uZXcga2godGhpcy5sb2NhbGUpO3JldHVybiBpLnNldCh7bGFiZWw6ZSxpY29uOnQsdG9vbHRpcDohMH0pLGkuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOm99fSksbiYmaS5kZWxlZ2F0ZSgnZXhlY3V0ZScpLnRvKHRoaXMsbiksaX1fY3JlYXRlTGFiZWxlZElucHV0Vmlldygpe2NvbnN0IGU9dGhpcy5sb2NhbGUudCx0PW5ldyBQYih0aGlzLmxvY2FsZSxPYik7cmV0dXJuIHQubGFiZWw9ZSgnYWknKSx0LmlucHV0Vmlldy5wbGFjZWhvbGRlcj1lKCdhaScpLHR9fXZhciBCYj1vKDQzKSxMYj1vLm4oQmIpO2NvbnN0IHpiPW5pKCdweCcpLGpiPSRjLmRvY3VtZW50LmJvZHk7Y2xhc3MgcWIgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKTtjb25zdCB0PXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0KCd0b3AnLDApLHRoaXMuc2V0KCdsZWZ0JywwKSx0aGlzLnNldCgncG9zaXRpb24nLCdhcnJvd19udycpLHRoaXMuc2V0KCdpc1Zpc2libGUnLCExKSx0aGlzLnNldCgnd2l0aEFycm93JywhMCksdGhpcy5zZXQoJ2NsYXNzTmFtZScpLHRoaXMuY29udGVudD10aGlzLmNyZWF0ZUNvbGxlY3Rpb24oKSx0aGlzLnNldFRlbXBsYXRlKHt0YWc6J2RpdicsYXR0cmlidXRlczp7Y2xhc3M6WydjaycsJ2NrLWJhbGxvb24tcGFuZWwnLHQudG8oJ3Bvc2l0aW9uJywoZSk9PmBjay1iYWxsb29uLXBhbmVsXyR7ZX1gKSx0LmlmKCdpc1Zpc2libGUnLCdjay1iYWxsb29uLXBhbmVsX3Zpc2libGUnKSx0LmlmKCd3aXRoQXJyb3cnLCdjay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3cnKSx0LnRvKCdjbGFzc05hbWUnKV0sc3R5bGU6e3RvcDp0LnRvKCd0b3AnLHpiKSxsZWZ0OnQudG8oJ2xlZnQnLHpiKX19LGNoaWxkcmVuOnRoaXMuY29udGVudH0pfXNob3coKXt0aGlzLmlzVmlzaWJsZT0hMH1oaWRlKCl7dGhpcy5pc1Zpc2libGU9ITF9YXR0YWNoVG8oZSl7dGhpcy5zaG93KCk7Y29uc3QgdD1xYi5kZWZhdWx0UG9zaXRpb25zLG89T2JqZWN0LmFzc2lnbih7fSx7ZWxlbWVudDp0aGlzLmVsZW1lbnQscG9zaXRpb25zOlt0LnNvdXRoQXJyb3dOb3J0aCx0LnNvdXRoQXJyb3dOb3J0aFdlc3QsdC5zb3V0aEFycm93Tm9ydGhFYXN0LHQubm9ydGhBcnJvd1NvdXRoLHQubm9ydGhBcnJvd1NvdXRoV2VzdCx0Lm5vcnRoQXJyb3dTb3V0aEVhc3RdLGxpbWl0ZXI6amIsZml0SW5WaWV3cG9ydDohMH0sZSkse3RvcDpuLGxlZnQ6aSxuYW1lOnJ9PWFyKG8pO09iamVjdC5hc3NpZ24odGhpcyx7dG9wOm4sbGVmdDppLHBvc2l0aW9uOnJ9KX1waW4oZSl7dGhpcy51bnBpbigpLHRoaXMuX3BpbldoZW5Jc1Zpc2libGVDYWxsYmFjaz0oKT0+e3RoaXMuaXNWaXNpYmxlP3RoaXMuX3N0YXJ0UGlubmluZyhlKTp0aGlzLl9zdG9wUGlubmluZygpfSx0aGlzLl9zdGFydFBpbm5pbmcoZSksdGhpcy5saXN0ZW5Ubyh0aGlzLCdjaGFuZ2U6aXNWaXNpYmxlJyx0aGlzLl9waW5XaGVuSXNWaXNpYmxlQ2FsbGJhY2spfXVucGluKCl7dGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrJiYodGhpcy5fc3RvcFBpbm5pbmcoKSx0aGlzLnN0b3BMaXN0ZW5pbmcodGhpcywnY2hhbmdlOmlzVmlzaWJsZScsdGhpcy5fcGluV2hlbklzVmlzaWJsZUNhbGxiYWNrKSx0aGlzLl9waW5XaGVuSXNWaXNpYmxlQ2FsbGJhY2s9bnVsbCx0aGlzLmhpZGUoKSl9X3N0YXJ0UGlubmluZyhlKXt0aGlzLmF0dGFjaFRvKGUpO2NvbnN0IHQ9Y3IoZS50YXJnZXQpLG89ZS5saW1pdGVyP2NyKGUubGltaXRlcik6amI7dGhpcy5saXN0ZW5UbygkYy5kb2N1bWVudCwnc2Nyb2xsJywobixpKT0+e2NvbnN0IHI9aS50YXJnZXQsYT10JiZyLmNvbnRhaW5zKHQpLHM9byYmci5jb250YWlucyhvKTsoYXx8c3x8IXR8fCFvKSYmdGhpcy5hdHRhY2hUbyhlKX0se3VzZUNhcHR1cmU6ITB9KSx0aGlzLmxpc3RlblRvKCRjLndpbmRvdywncmVzaXplJywoKT0+e3RoaXMuYXR0YWNoVG8oZSl9KX1fc3RvcFBpbm5pbmcoKXt0aGlzLnN0b3BMaXN0ZW5pbmcoJGMuZG9jdW1lbnQsJ3Njcm9sbCcpLHRoaXMuc3RvcExpc3RlbmluZygkYy53aW5kb3csJ3Jlc2l6ZScpfX1xYi5hcnJvd0hvcml6b250YWxPZmZzZXQ9MjUscWIuYXJyb3dWZXJ0aWNhbE9mZnNldD0xMCxxYi5kZWZhdWx0UG9zaXRpb25zPXtub3J0aEFycm93U291dGg6KGUsdCk9Pih7dG9wOnVyKGUsdCksbGVmdDplLmxlZnQrZS53aWR0aC8yLXQud2lkdGgvMixuYW1lOidhcnJvd19zJ30pLG5vcnRoQXJyb3dTb3V0aEVhc3Q6KGUsdCk9Pih7dG9wOnVyKGUsdCksbGVmdDplLmxlZnQrZS53aWR0aC8yLXQud2lkdGgrcWIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6J2Fycm93X3NlJ30pLG5vcnRoQXJyb3dTb3V0aFdlc3Q6KGUsdCk9Pih7dG9wOnVyKGUsdCksbGVmdDplLmxlZnQrZS53aWR0aC8yLXFiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19zdyd9KSxub3J0aFdlc3RBcnJvd1NvdXRoOihlLHQpPT4oe3RvcDp1cihlLHQpLGxlZnQ6ZS5sZWZ0LXQud2lkdGgvMixuYW1lOidhcnJvd19zJ30pLG5vcnRoV2VzdEFycm93U291dGhXZXN0OihlLHQpPT4oe3RvcDp1cihlLHQpLGxlZnQ6ZS5sZWZ0LXFiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19zdyd9KSxub3J0aFdlc3RBcnJvd1NvdXRoRWFzdDooZSx0KT0+KHt0b3A6dXIoZSx0KSxsZWZ0OmUubGVmdC10LndpZHRoK3FiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19zZSd9KSxub3J0aEVhc3RBcnJvd1NvdXRoOihlLHQpPT4oe3RvcDp1cihlLHQpLGxlZnQ6ZS5yaWdodC10LndpZHRoLzIsbmFtZTonYXJyb3dfcyd9KSxub3J0aEVhc3RBcnJvd1NvdXRoRWFzdDooZSx0KT0+KHt0b3A6dXIoZSx0KSxsZWZ0OmUucmlnaHQtdC53aWR0aCtxYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTonYXJyb3dfc2UnfSksbm9ydGhFYXN0QXJyb3dTb3V0aFdlc3Q6KGUsdCk9Pih7dG9wOnVyKGUsdCksbGVmdDplLnJpZ2h0LXFiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19zdyd9KSxzb3V0aEFycm93Tm9ydGg6KGUsdCk9Pih7dG9wOm1yKGUsdCksbGVmdDplLmxlZnQrZS53aWR0aC8yLXQud2lkdGgvMixuYW1lOidhcnJvd19uJ30pLHNvdXRoQXJyb3dOb3J0aEVhc3Q6KGUsdCk9Pih7dG9wOm1yKGUsdCksbGVmdDplLmxlZnQrZS53aWR0aC8yLXQud2lkdGgrcWIuYXJyb3dIb3Jpem9udGFsT2Zmc2V0LG5hbWU6J2Fycm93X25lJ30pLHNvdXRoQXJyb3dOb3J0aFdlc3Q6KGUsdCk9Pih7dG9wOm1yKGUsdCksbGVmdDplLmxlZnQrZS53aWR0aC8yLXFiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19udyd9KSxzb3V0aFdlc3RBcnJvd05vcnRoOihlLHQpPT4oe3RvcDptcihlLHQpLGxlZnQ6ZS5sZWZ0LXQud2lkdGgvMixuYW1lOidhcnJvd19uJ30pLHNvdXRoV2VzdEFycm93Tm9ydGhXZXN0OihlLHQpPT4oe3RvcDptcihlLHQpLGxlZnQ6ZS5sZWZ0LXFiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19udyd9KSxzb3V0aFdlc3RBcnJvd05vcnRoRWFzdDooZSx0KT0+KHt0b3A6bXIoZSx0KSxsZWZ0OmUubGVmdC10LndpZHRoK3FiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19uZSd9KSxzb3V0aEVhc3RBcnJvd05vcnRoOihlLHQpPT4oe3RvcDptcihlLHQpLGxlZnQ6ZS5yaWdodC10LndpZHRoLzIsbmFtZTonYXJyb3dfbid9KSxzb3V0aEVhc3RBcnJvd05vcnRoRWFzdDooZSx0KT0+KHt0b3A6bXIoZSx0KSxsZWZ0OmUucmlnaHQtdC53aWR0aCtxYi5hcnJvd0hvcml6b250YWxPZmZzZXQsbmFtZTonYXJyb3dfbmUnfSksc291dGhFYXN0QXJyb3dOb3J0aFdlc3Q6KGUsdCk9Pih7dG9wOm1yKGUsdCksbGVmdDplLnJpZ2h0LXFiLmFycm93SG9yaXpvbnRhbE9mZnNldCxuYW1lOidhcnJvd19udyd9KX07Y2xhc3MgV2IgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nQ29udGV4dHVhbEJhbGxvb24nfWluaXQoKXt0aGlzLnZpZXc9bmV3IHFiLHRoaXMucG9zaXRpb25MaW1pdGVyPSgpPT57Y29uc3QgZT10aGlzLmVkaXRvci5lZGl0aW5nLnZpZXcsdD1lLmRvY3VtZW50LG89dC5zZWxlY3Rpb24uZWRpdGFibGVFbGVtZW50O3JldHVybiBvP2UuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbShvLnJvb3QpOm51bGx9LHRoaXMuX3N0YWNrPW5ldyBNYXAsdGhpcy5lZGl0b3IudWkudmlldy5ib2R5LmFkZCh0aGlzLnZpZXcpLHRoaXMuZWRpdG9yLnVpLmZvY3VzVHJhY2tlci5hZGQodGhpcy52aWV3LmVsZW1lbnQpfWdldCB2aXNpYmxlVmlldygpe2NvbnN0IGU9dGhpcy5fc3RhY2suZ2V0KHRoaXMudmlldy5jb250ZW50LmdldCgwKSk7cmV0dXJuIGU/ZS52aWV3Om51bGx9aGFzVmlldyhlKXtyZXR1cm4gdGhpcy5fc3RhY2suaGFzKGUpfWFkZChlKXtpZih0aGlzLmhhc1ZpZXcoZS52aWV3KSl0aHJvdyBuZXcgWmEoJ2NvbnRleHR1YWxiYWxsb29uLWFkZC12aWV3LWV4aXN0OiBDYW5ub3QgYWRkIGNvbmZpZ3VyYXRpb24gb2YgdGhlIHNhbWUgdmlldyB0d2ljZS4nKTt0aGlzLnZpc2libGVWaWV3JiZ0aGlzLnZpZXcuY29udGVudC5yZW1vdmUodGhpcy52aXNpYmxlVmlldyksdGhpcy5fc3RhY2suc2V0KGUudmlldyxlKSx0aGlzLl9zaG93KGUpfXJlbW92ZShlKXtpZighdGhpcy5oYXNWaWV3KGUpKXRocm93IG5ldyBaYSgnY29udGV4dHVhbGJhbGxvb24tcmVtb3ZlLXZpZXctbm90LWV4aXN0OiBDYW5ub3QgcmVtb3ZlIGNvbmZpZ3VyYXRpb24gb2Ygbm90IGV4aXN0aW5nIHZpZXcuJyk7aWYodGhpcy52aXNpYmxlVmlldz09PWUpe3RoaXMudmlldy5jb250ZW50LnJlbW92ZShlKSx0aGlzLl9zdGFjay5kZWxldGUoZSk7Y29uc3QgdD1BcnJheS5mcm9tKHRoaXMuX3N0YWNrLnZhbHVlcygpKS5wb3AoKTt0P3RoaXMuX3Nob3codCk6dGhpcy52aWV3LmhpZGUoKX1lbHNlIHRoaXMuX3N0YWNrLmRlbGV0ZShlKX11cGRhdGVQb3NpdGlvbihlKXtlJiYodGhpcy5fc3RhY2suZ2V0KHRoaXMudmlzaWJsZVZpZXcpLnBvc2l0aW9uPWUpLHRoaXMudmlldy5waW4odGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uKCkpfV9zaG93KHt2aWV3OmUsYmFsbG9vbkNsYXNzTmFtZTp0PScnfSl7dGhpcy52aWV3LmNsYXNzTmFtZT10LHRoaXMudmlldy5jb250ZW50LmFkZChlKSx0aGlzLnZpZXcucGluKHRoaXMuX2dldEJhbGxvb25Qb3NpdGlvbigpKX1fZ2V0QmFsbG9vblBvc2l0aW9uKCl7bGV0IGU9T2kodGhpcy5fc3RhY2sudmFsdWVzKCkpLnBvc2l0aW9uO3JldHVybiBlJiYhZS5saW1pdGVyJiYoZT1PYmplY3QuYXNzaWduKHt9LGUse2xpbWl0ZXI6dGhpcy5wb3NpdGlvbkxpbWl0ZXJ9KSksZX19dmFyIFViPW8oNDUpLEhiPW8ubihVYik7Y2xhc3MgS2IgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW1diXX1pbml0KCl7dGhpcy5fY3JlYXRlQnV0dG9uKCksdGhpcy5fY3JlYXRlRm9ybSgpfV9jcmVhdGVCdXR0b24oKXtjb25zdCBlPXRoaXMuZWRpdG9yLG89ZS50O2UudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoJ2ltYWdlVGV4dEFsdGVybmF0aXZlJywodCk9Pntjb25zdCBuPWUuY29tbWFuZHMuZ2V0KCdpbWFnZVRleHRBbHRlcm5hdGl2ZScpLGk9bmV3IGtoKHQpO3JldHVybiBpLnNldCh7bGFiZWw6bygncycpLGljb246SGIuYSx0b29sdGlwOiEwfSksaS5iaW5kKCdpc0VuYWJsZWQnKS50byhuLCdpc0VuYWJsZWQnKSx0aGlzLmxpc3RlblRvKGksJ2V4ZWN1dGUnLCgpPT50aGlzLl9zaG93Rm9ybSgpKSxpfSl9X2NyZWF0ZUZvcm0oKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5lZGl0aW5nLnZpZXcsbz10LmRvY3VtZW50O3RoaXMuX2JhbGxvb249dGhpcy5lZGl0b3IucGx1Z2lucy5nZXQoJ0NvbnRleHR1YWxCYWxsb29uJyksdGhpcy5fZm9ybT1uZXcgRGIoZS5sb2NhbGUpLHRoaXMuX2Zvcm0ucmVuZGVyKCksdGhpcy5saXN0ZW5Ubyh0aGlzLl9mb3JtLCdzdWJtaXQnLCgpPT57ZS5leGVjdXRlKCdpbWFnZVRleHRBbHRlcm5hdGl2ZScse25ld1ZhbHVlOnRoaXMuX2Zvcm0ubGFiZWxlZElucHV0LmlucHV0Vmlldy5lbGVtZW50LnZhbHVlfSksdGhpcy5faGlkZUZvcm0oITApfSksdGhpcy5saXN0ZW5Ubyh0aGlzLl9mb3JtLCdjYW5jZWwnLCgpPT57dGhpcy5faGlkZUZvcm0oITApfSksdGhpcy5fZm9ybS5rZXlzdHJva2VzLnNldCgnRXNjJywoZSx0KT0+e3RoaXMuX2hpZGVGb3JtKCEwKSx0KCl9KSx0aGlzLmxpc3RlblRvKHQsJ3JlbmRlcicsKCk9PntZaShvLnNlbGVjdGlvbik/dGhpcy5faXNWaXNpYmxlJiZwcihlKTp0aGlzLl9oaWRlRm9ybSghMCl9KSxucih7ZW1pdHRlcjp0aGlzLl9mb3JtLGFjdGl2YXRvcjooKT0+dGhpcy5faXNWaXNpYmxlLGNvbnRleHRFbGVtZW50czpbdGhpcy5fZm9ybS5lbGVtZW50XSxjYWxsYmFjazooKT0+dGhpcy5faGlkZUZvcm0oKX0pfV9zaG93Rm9ybSgpe2lmKCF0aGlzLl9pc1Zpc2libGUpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLmNvbW1hbmRzLmdldCgnaW1hZ2VUZXh0QWx0ZXJuYXRpdmUnKSxvPXRoaXMuX2Zvcm0ubGFiZWxlZElucHV0O3RoaXMuX2JhbGxvb24uaGFzVmlldyh0aGlzLl9mb3JtKXx8dGhpcy5fYmFsbG9vbi5hZGQoe3ZpZXc6dGhpcy5fZm9ybSxwb3NpdGlvbjpncihlKX0pLG8udmFsdWU9by5pbnB1dFZpZXcuZWxlbWVudC52YWx1ZT10LnZhbHVlfHwnJyx0aGlzLl9mb3JtLmxhYmVsZWRJbnB1dC5zZWxlY3QoKX19X2hpZGVGb3JtKGUpe3RoaXMuX2lzVmlzaWJsZSYmKHRoaXMuX2JhbGxvb24ucmVtb3ZlKHRoaXMuX2Zvcm0pLGUmJnRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5mb2N1cygpKX1nZXQgX2lzVmlzaWJsZSgpe3JldHVybiB0aGlzLl9iYWxsb29uLnZpc2libGVWaWV3PT10aGlzLl9mb3JtfX1jbGFzcyBHYiBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bVGIsS2JdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidJbWFnZVRleHRBbHRlcm5hdGl2ZSd9fXZhciAkYj1vKDQ2KSxKYj1vLm4oJGIpO2NsYXNzIFFiIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltfYixDYixHYl19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0ltYWdlJ319Y2xhc3MgWWIgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmJ1dHRvblZpZXc9bmV3IGtoKGUpLHRoaXMuX2ZpbGVJbnB1dFZpZXc9bmV3IFhiKGUpLHRoaXMuX2ZpbGVJbnB1dFZpZXcuYmluZCgnYWNjZXB0ZWRUeXBlJykudG8odGhpcyksdGhpcy5fZmlsZUlucHV0Vmlldy5iaW5kKCdhbGxvd011bHRpcGxlRmlsZXMnKS50byh0aGlzKSx0aGlzLl9maWxlSW5wdXRWaWV3LmRlbGVnYXRlKCdkb25lJykudG8odGhpcyksdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOidzcGFuJyxhdHRyaWJ1dGVzOntjbGFzczonY2stZmlsZS1kaWFsb2ctYnV0dG9uJ30sY2hpbGRyZW46W3RoaXMuYnV0dG9uVmlldyx0aGlzLl9maWxlSW5wdXRWaWV3XX0pLHRoaXMuYnV0dG9uVmlldy5vbignZXhlY3V0ZScsKCk9Pnt0aGlzLl9maWxlSW5wdXRWaWV3Lm9wZW4oKX0pfWZvY3VzKCl7dGhpcy5idXR0b25WaWV3LmZvY3VzKCl9fWNsYXNzIFhiIGV4dGVuZHMga2Z7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5zZXQoJ2FjY2VwdGVkVHlwZScpLHRoaXMuc2V0KCdhbGxvd011bHRpcGxlRmlsZXMnLCExKTtjb25zdCB0PXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzonaW5wdXQnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2staGlkZGVuJ10sdHlwZTonZmlsZScsdGFiaW5kZXg6Jy0xJyxhY2NlcHQ6dC50bygnYWNjZXB0ZWRUeXBlJyksbXVsdGlwbGU6dC50bygnYWxsb3dNdWx0aXBsZUZpbGVzJyl9LG9uOntjaGFuZ2U6dC50bygoKT0+e3RoaXMuZWxlbWVudCYmdGhpcy5lbGVtZW50LmZpbGVzJiZ0aGlzLmVsZW1lbnQuZmlsZXMubGVuZ3RoJiZ0aGlzLmZpcmUoJ2RvbmUnLHRoaXMuZWxlbWVudC5maWxlcyksdGhpcy5lbGVtZW50LnZhbHVlPScnfSl9fSl9b3Blbigpe3RoaXMuZWxlbWVudC5jbGljaygpfX12YXIgWmI9byg0OCksZWs9by5uKFpiKTtjbGFzcyB0ayBleHRlbmRzIHFme2luaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLG89ZS50O2UudWkuY29tcG9uZW50RmFjdG9yeS5hZGQoJ2ltYWdlVXBsb2FkJywodCk9Pntjb25zdCBuPW5ldyBZYih0KSxpPWUuY29tbWFuZHMuZ2V0KCdpbWFnZVVwbG9hZCcpO3JldHVybiBuLnNldCh7YWNjZXB0ZWRUeXBlOidpbWFnZS8qJyxhbGxvd011bHRpcGxlRmlsZXM6ITB9KSxuLmJ1dHRvblZpZXcuc2V0KHtsYWJlbDpvKCdvJyksaWNvbjplay5hLHRvb2x0aXA6ITB9KSxuLmJ1dHRvblZpZXcuYmluZCgnaXNFbmFibGVkJykudG8oaSksbi5vbignZG9uZScsKHQsbyk9Pntmb3IoY29uc3QgbiBvZiBBcnJheS5mcm9tKG8pKXtjb25zdCB0PWhyKGUubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uKTtmcihuKSYmZS5leGVjdXRlKCdpbWFnZVVwbG9hZCcse2ZpbGU6bixpbnNlcnRBdDp0fSl9fSksbn0pfX12YXIgb2s9byg0OSksbms9by5uKG9rKSxpaz1vKDUwKSxyaz1vLm4oaWspO2NsYXNzIGFrIGV4dGVuZHMgcWZ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5wbGFjZWhvbGRlcj0nZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJytlbmNvZGVVUklDb21wb25lbnQobmsuYSl9aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3I7ZS5lZGl0aW5nLmRvd25jYXN0RGlzcGF0Y2hlci5vbignYXR0cmlidXRlOnVwbG9hZFN0YXR1czppbWFnZScsKC4uLmUpPT50aGlzLnVwbG9hZFN0YXR1c0NoYW5nZSguLi5lKSl9dXBsb2FkU3RhdHVzQ2hhbmdlKGUsdCxvKXtjb25zdCBuPXRoaXMuZWRpdG9yLGk9dC5pdGVtLHI9aS5nZXRBdHRyaWJ1dGUoJ3VwbG9hZElkJyk7aWYoby5jb25zdW1hYmxlLmNvbnN1bWUodC5pdGVtLGUubmFtZSkpe2NvbnN0IGU9bi5wbHVnaW5zLmdldChQaCksYT1yP3QuYXR0cmlidXRlTmV3VmFsdWU6bnVsbCxzPXRoaXMucGxhY2Vob2xkZXIsbD1uLmVkaXRpbmcubWFwcGVyLnRvVmlld0VsZW1lbnQoaSksZD1vLndyaXRlcjtpZigncmVhZGluZyc9PWEpcmV0dXJuIGJyKGwsZCksdm9pZCBfcihzLGwsZCk7aWYoJ3VwbG9hZGluZyc9PWEpe2NvbnN0IHQ9ZS5sb2FkZXJzLmdldChyKTtyZXR1cm4gYnIobCxkKSx2b2lkKHQ/KHdyKGwsZCksdnIobCxkLHQsbi5lZGl0aW5nLnZpZXcpKTpfcihzLGwsZCkpfXlyKGwsZCksd3IobCxkKSxrcihsLGQpfX19Y29uc3Qgc2s9U3ltYm9sKCdwcm9ncmVzcy1iYXInKTtjbGFzcyBsayBleHRlbmRzIEdme2V4ZWN1dGUoZSl7Y29uc3QgdD10aGlzLmVkaXRvcixvPXQubW9kZWwuZG9jdW1lbnQsbj1lLmZpbGUsaT10LnBsdWdpbnMuZ2V0KFBoKTt0Lm1vZGVsLmNoYW5nZSgocik9Pntjb25zdCBhPWkuY3JlYXRlTG9hZGVyKG4pO2lmKCFhKXJldHVybjtjb25zdCBzPW5ldyBXdSgnaW1hZ2UnLHt1cGxvYWRJZDphLmlkfSk7bGV0IGw7bD1lLmluc2VydEF0P25ldyBZdShbbmV3IEd1KGUuaW5zZXJ0QXQpXSk6by5zZWxlY3Rpb24sdC5tb2RlbC5pbnNlcnRDb250ZW50KHMsbCkscy5wYXJlbnQmJnIuc2V0U2VsZWN0aW9uKEd1LmNyZWF0ZU9uKHMpKX0pfX1jbGFzcyBkayBleHRlbmRzIHFme3N0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidOb3RpZmljYXRpb24nfWluaXQoKXt0aGlzLm9uKCdzaG93Ondhcm5pbmcnLChlLHQpPT57d2luZG93LmFsZXJ0KHQubWVzc2FnZSl9LHtwcmlvcml0eTonbG93ZXN0J30pfXNob3dTdWNjZXNzKGUsdD17fSl7dGhpcy5fc2hvd05vdGlmaWNhdGlvbih7bWVzc2FnZTplLHR5cGU6J3N1Y2Nlc3MnLG5hbWVzcGFjZTp0Lm5hbWVzcGFjZSx0aXRsZTp0LnRpdGxlfSl9c2hvd0luZm8oZSx0PXt9KXt0aGlzLl9zaG93Tm90aWZpY2F0aW9uKHttZXNzYWdlOmUsdHlwZTonaW5mbycsbmFtZXNwYWNlOnQubmFtZXNwYWNlLHRpdGxlOnQudGl0bGV9KX1zaG93V2FybmluZyhlLHQ9e30pe3RoaXMuX3Nob3dOb3RpZmljYXRpb24oe21lc3NhZ2U6ZSx0eXBlOid3YXJuaW5nJyxuYW1lc3BhY2U6dC5uYW1lc3BhY2UsdGl0bGU6dC50aXRsZX0pfV9zaG93Tm90aWZpY2F0aW9uKGUpe2NvbnN0IHQ9YHNob3c6JHtlLnR5cGV9YCsoZS5uYW1lc3BhY2U/YDoke2UubmFtZXNwYWNlfWA6JycpO3RoaXMuZmlyZSh0LHttZXNzYWdlOmUubWVzc2FnZSx0eXBlOmUudHlwZSx0aXRsZTplLnRpdGxlfHwnJ30pfX1jbGFzcyBjayBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bUGgsZGtdfWluaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5tb2RlbC5kb2N1bWVudCxvPWUubW9kZWwuc2NoZW1hLG49ZS5wbHVnaW5zLmdldChQaCk7by5leHRlbmQoJ2ltYWdlJyx7YWxsb3dBdHRyaWJ1dGVzOlsndXBsb2FkSWQnLCd1cGxvYWRTdGF0dXMnXX0pLGUuY29tbWFuZHMuYWRkKCdpbWFnZVVwbG9hZCcsbmV3IGxrKGUpKSxlLmVkaXRpbmcudmlldy5kb2N1bWVudC5vbignY2xpcGJvYXJkSW5wdXQnLChvLG4pPT57aWYoQXIobi5kYXRhVHJhbnNmZXIpKXJldHVybjtsZXQgaT1uZXcgWXUobi50YXJnZXRSYW5nZXMubWFwKCh0KT0+ZS5lZGl0aW5nLm1hcHBlci50b01vZGVsUmFuZ2UodCkpKTtmb3IoY29uc3QgciBvZiBuLmRhdGFUcmFuc2Zlci5maWxlcyl7Y29uc3Qgbj1ocihpKTtmcihyKSYmKGUuZXhlY3V0ZSgnaW1hZ2VVcGxvYWQnLHtmaWxlOnIsaW5zZXJ0QXQ6bn0pLG8uc3RvcCgpKSxpPXQuc2VsZWN0aW9ufX0pLGUuZWRpdGluZy52aWV3LmRvY3VtZW50Lm9uKCdkcmFnb3ZlcicsKGUsdCk9Pnt0LnByZXZlbnREZWZhdWx0KCl9KSx0Lm9uKCdjaGFuZ2UnLCgpPT57Y29uc3QgZT10LmRpZmZlci5nZXRDaGFuZ2VzKHtpbmNsdWRlQ2hhbmdlc0luR3JhdmV5YXJkOiEwfSk7Zm9yKGNvbnN0IHQgb2YgZSlpZignaW5zZXJ0Jz09dC50eXBlJiYnaW1hZ2UnPT10Lm5hbWUpe2NvbnN0IGU9dC5wb3NpdGlvbi5ub2RlQWZ0ZXIsbz0nJGdyYXZleWFyZCc9PXQucG9zaXRpb24ucm9vdC5yb290TmFtZSxpPWUuZ2V0QXR0cmlidXRlKCd1cGxvYWRJZCcpO2lmKCFpKWNvbnRpbnVlO2NvbnN0IHI9bi5sb2FkZXJzLmdldChpKTtpZighciljb250aW51ZTtvP3IuYWJvcnQoKTonaWRsZSc9PXIuc3RhdHVzJiZ0aGlzLl9sb2FkKHIsZSl9fSl9X2xvYWQoZSxvKXtmdW5jdGlvbiBuKCl7ci5lbnF1ZXVlQ2hhbmdlKCd0cmFuc3BhcmVudCcsKGUpPT57ZS5yZW1vdmVBdHRyaWJ1dGUoJ3VwbG9hZElkJyxvKSxlLnJlbW92ZUF0dHJpYnV0ZSgndXBsb2FkU3RhdHVzJyxvKX0pLHQuZGVzdHJveUxvYWRlcihlKX1jb25zdCBpPXRoaXMuZWRpdG9yLHI9aS5tb2RlbCxhPWkubG9jYWxlLnQsdD1pLnBsdWdpbnMuZ2V0KFBoKSxzPWkucGx1Z2lucy5nZXQoZGspO3JldHVybiByLmVucXVldWVDaGFuZ2UoJ3RyYW5zcGFyZW50JywoZSk9PntlLnNldEF0dHJpYnV0ZSgndXBsb2FkU3RhdHVzJywncmVhZGluZycsbyl9KSxlLnJlYWQoKS50aGVuKCh0KT0+e2NvbnN0IG49aS5lZGl0aW5nLm1hcHBlci50b1ZpZXdFbGVtZW50KG8pLGE9bi5nZXRDaGlsZCgwKSxzPWUudXBsb2FkKCk7cmV0dXJuIGkuZWRpdGluZy52aWV3LmNoYW5nZSgoZSk9PntlLnNldEF0dHJpYnV0ZSgnc3JjJyx0LGEpfSksci5lbnF1ZXVlQ2hhbmdlKCd0cmFuc3BhcmVudCcsKGUpPT57ZS5zZXRBdHRyaWJ1dGUoJ3VwbG9hZFN0YXR1cycsJ3VwbG9hZGluZycsbyl9KSxzfSkudGhlbigoZSk9PntyLmVucXVldWVDaGFuZ2UoJ3RyYW5zcGFyZW50JywodCk9Pnt0LnNldEF0dHJpYnV0ZXMoe3VwbG9hZFN0YXR1czonY29tcGxldGUnLHNyYzplLmRlZmF1bHR9LG8pO2xldCBuPTA7Y29uc3QgaT1PYmplY3Qua2V5cyhlKS5maWx0ZXIoKGUpPT57Y29uc3QgdD1wYXJzZUludChlLDEwKTtpZighaXNOYU4odCkpcmV0dXJuIG49QmEobix0KSwhMH0pLm1hcCgodCk9PmAke2VbdF19ICR7dH13YCkuam9pbignLCAnKTsnJyE9aSYmdC5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcse2RhdGE6aSx3aWR0aDpufSxvKX0pLG4oKX0pLmNhdGNoKCh0KT0+e2lmKCdlcnJvcichPT1lLnN0YXR1cyYmJ2Fib3J0ZWQnIT09ZS5zdGF0dXMpdGhyb3cgdDsnZXJyb3InPT1lLnN0YXR1cyYmcy5zaG93V2FybmluZyh0LHt0aXRsZTphKCduJyksbmFtZXNwYWNlOid1cGxvYWQnfSksbigpLHIuZW5xdWV1ZUNoYW5nZSgndHJhbnNwYXJlbnQnLChlKT0+e2UucmVtb3ZlKG8pfSl9KX19Y2xhc3MgdWsgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nSW1hZ2VVcGxvYWQnfXN0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bY2ssdGssYWtdfX1jbGFzcyBtayBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bdWIsUWIsdWtdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidFYXN5SW1hZ2UnfX1jbGFzcyBwayBleHRlbmRzIEdme3JlZnJlc2goKXtjb25zdCBlPXRoaXMuZWRpdG9yLm1vZGVsLHQ9ZS5kb2N1bWVudCxvPU9pKHQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO3RoaXMudmFsdWU9ISFvJiZvLmlzKCdwYXJhZ3JhcGgnKSx0aGlzLmlzRW5hYmxlZD0hIW8mJlRyKG8sZS5zY2hlbWEpfWV4ZWN1dGUoZT17fSl7Y29uc3QgdD10aGlzLmVkaXRvci5tb2RlbCxvPXQuZG9jdW1lbnQ7dC5jaGFuZ2UoKG4pPT57Y29uc3QgaT0oZS5zZWxlY3Rpb258fG8uc2VsZWN0aW9uKS5nZXRTZWxlY3RlZEJsb2NrcygpO2Zvcihjb25zdCBlIG9mIGkpIWUuaXMoJ3BhcmFncmFwaCcpJiZUcihlLHQuc2NoZW1hKSYmbi5yZW5hbWUoZSwncGFyYWdyYXBoJyl9KX19Y2xhc3MgZ2sgZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nUGFyYWdyYXBoJ31pbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PWUubW9kZWwsbz1lLmRhdGE7ZS5jb21tYW5kcy5hZGQoJ3BhcmFncmFwaCcsbmV3IHBrKGUpKSx0LnNjaGVtYS5yZWdpc3RlcigncGFyYWdyYXBoJyx7aW5oZXJpdEFsbEZyb206JyRibG9jayd9KSxlLmNvbnZlcnNpb24uZWxlbWVudFRvRWxlbWVudCh7bW9kZWw6J3BhcmFncmFwaCcsdmlldzoncCd9KSxvLnVwY2FzdERpc3BhdGNoZXIub24oJ2VsZW1lbnQnLChlLHQsbyk9PntpZihvLmNvbnN1bWFibGUudGVzdCh0LnZpZXdJdGVtLHtuYW1lOnQudmlld0l0ZW0ubmFtZX0pKWlmKGdrLnBhcmFncmFwaExpa2VFbGVtZW50cy5oYXModC52aWV3SXRlbS5uYW1lKSl7aWYodC52aWV3SXRlbS5pc0VtcHR5KXJldHVybjtjb25zdCBlPW8ud3JpdGVyLmNyZWF0ZUVsZW1lbnQoJ3BhcmFncmFwaCcpLG49by5zcGxpdFRvQWxsb3dlZFBhcmVudChlLHQubW9kZWxDdXJzb3IpO2lmKCFuKXJldHVybjtvLndyaXRlci5pbnNlcnQoZSxuLnBvc2l0aW9uKTtjb25zdHttb2RlbFJhbmdlOml9PW8uY29udmVydENoaWxkcmVuKHQudmlld0l0ZW0sS3UuY3JlYXRlQXQoZSkpO3QubW9kZWxSYW5nZT1uZXcgR3UoS3UuY3JlYXRlQmVmb3JlKGUpLGkuZW5kKSx0Lm1vZGVsQ3Vyc29yPXQubW9kZWxSYW5nZS5lbmR9ZWxzZSBFcih0LnZpZXdJdGVtLHQubW9kZWxDdXJzb3Isby5zY2hlbWEpJiYodD1PYmplY3QuYXNzaWduKHQsUHIodC52aWV3SXRlbSx0Lm1vZGVsQ3Vyc29yLG8pKSl9LHtwcmlvcml0eTonbG93J30pLG8udXBjYXN0RGlzcGF0Y2hlci5vbigndGV4dCcsKGUsdCxvKT0+e3QubW9kZWxSYW5nZXx8RXIodC52aWV3SXRlbSx0Lm1vZGVsQ3Vyc29yLG8uc2NoZW1hKSYmKHQ9T2JqZWN0LmFzc2lnbih0LFByKHQudmlld0l0ZW0sdC5tb2RlbEN1cnNvcixvKSkpfSx7cHJpb3JpdHk6J2xvd2VzdCd9KSx0LmRvY3VtZW50LnJlZ2lzdGVyUG9zdEZpeGVyKChlKT0+dGhpcy5fYXV0b3BhcmFncmFwaEVtcHR5Um9vdHMoZSkpLGUub24oJ2RhdGFSZWFkeScsKCk9Pnt0LmVucXVldWVDaGFuZ2UoJ3RyYW5zcGFyZW50JywoZSk9PnRoaXMuX2F1dG9wYXJhZ3JhcGhFbXB0eVJvb3RzKGUpKX0se3ByaW9yaXR5Oidsb3dlc3QnfSl9X2F1dG9wYXJhZ3JhcGhFbXB0eVJvb3RzKGUpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWw7Zm9yKGNvbnN0IG8gb2YgdC5kb2N1bWVudC5nZXRSb290TmFtZXMoKSl7Y29uc3Qgbj10LmRvY3VtZW50LmdldFJvb3Qobyk7aWYobi5pc0VtcHR5JiYnJGdyYXZleWFyZCchPW4ucm9vdE5hbWUmJnQuc2NoZW1hLmNoZWNrQ2hpbGQobiwncGFyYWdyYXBoJykpcmV0dXJuIGUuaW5zZXJ0RWxlbWVudCgncGFyYWdyYXBoJyxuKSwhMH19fWdrLnBhcmFncmFwaExpa2VFbGVtZW50cz1uZXcgU2V0KFsnYmxvY2txdW90ZScsJ2RkJywnZGl2JywnZHQnLCdoMScsJ2gyJywnaDMnLCdoNCcsJ2g1JywnaDYnLCdsaScsJ3AnLCd0ZCddKTtjbGFzcyBmayBleHRlbmRzIEdme2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksdGhpcy5tb2RlbEVsZW1lbnRzPXR9cmVmcmVzaCgpe2NvbnN0IGU9T2kodGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO3RoaXMudmFsdWU9ISFlJiZ0aGlzLm1vZGVsRWxlbWVudHMuaW5jbHVkZXMoZS5uYW1lKSYmZS5uYW1lLHRoaXMuaXNFbmFibGVkPSEhZSYmdGhpcy5tb2RlbEVsZW1lbnRzLnNvbWUoKHQpPT5TcihlLHQsdGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hKSl9ZXhlY3V0ZShlKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsLG89dC5kb2N1bWVudCxuPWUudmFsdWU7dC5jaGFuZ2UoKGUpPT57Y29uc3QgaT1BcnJheS5mcm9tKG8uc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpLmZpbHRlcigoZSk9PlNyKGUsbix0LnNjaGVtYSkpO2Zvcihjb25zdCB0IG9mIGkpdC5pcyhuKXx8ZS5yZW5hbWUodCxuKX0pfX1jb25zdCBoaz0ncGFyYWdyYXBoJztjbGFzcyBiayBleHRlbmRzIHFme2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLGUuY29uZmlnLmRlZmluZSgnaGVhZGluZycse29wdGlvbnM6W3ttb2RlbDoncGFyYWdyYXBoJyx0aXRsZTonUGFyYWdyYXBoJyxjbGFzczonY2staGVhZGluZ19wYXJhZ3JhcGgnfSx7bW9kZWw6J2hlYWRpbmcxJyx2aWV3OidoMicsdGl0bGU6J0hlYWRpbmcgMScsY2xhc3M6J2NrLWhlYWRpbmdfaGVhZGluZzEnfSx7bW9kZWw6J2hlYWRpbmcyJyx2aWV3OidoMycsdGl0bGU6J0hlYWRpbmcgMicsY2xhc3M6J2NrLWhlYWRpbmdfaGVhZGluZzInfSx7bW9kZWw6J2hlYWRpbmczJyx2aWV3OidoNCcsdGl0bGU6J0hlYWRpbmcgMycsY2xhc3M6J2NrLWhlYWRpbmdfaGVhZGluZzMnfV19KX1zdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW2drXX1pbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PWUuY29uZmlnLmdldCgnaGVhZGluZy5vcHRpb25zJyksbz1bXTtmb3IoY29uc3QgbiBvZiB0KW4ubW9kZWwhPT1oayYmKGUubW9kZWwuc2NoZW1hLnJlZ2lzdGVyKG4ubW9kZWwse2luaGVyaXRBbGxGcm9tOickYmxvY2snfSksZS5jb252ZXJzaW9uLmVsZW1lbnRUb0VsZW1lbnQobiksby5wdXNoKG4ubW9kZWwpKTtlLmNvbW1hbmRzLmFkZCgnaGVhZGluZycsbmV3IGZrKGUsbykpfWFmdGVySW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLmNvbW1hbmRzLmdldCgnZW50ZXInKSxvPWUuY29uZmlnLmdldCgnaGVhZGluZy5vcHRpb25zJyk7dCYmdGhpcy5saXN0ZW5Ubyh0LCdhZnRlckV4ZWN1dGUnLCh0LG4pPT57Y29uc3QgaT1lLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCkucGFyZW50LHI9by5zb21lKChlKT0+aS5pcyhlLm1vZGVsKSk7ciYmIWkuaXMoaGspJiYwPT09aS5jaGlsZENvdW50JiZuLndyaXRlci5yZW5hbWUoaSxoayl9KX19Y2xhc3Mga2t7Y29uc3RydWN0b3IoZSx0KXt0JiZtYyh0aGlzLHQpLGUmJnRoaXMuc2V0KGUpfX1mKGtrLGJjKTtjbGFzcyBfayBleHRlbmRzIGtme2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpO2NvbnN0IHQ9dGhpcy5iaW5kVGVtcGxhdGU7dGhpcy5zZXQoJ2lzVmlzaWJsZScsITEpLHRoaXMuY2hpbGRyZW49dGhpcy5jcmVhdGVDb2xsZWN0aW9uKCksdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1yZXNldCcsJ2NrLWRyb3Bkb3duX19wYW5lbCcsdC5pZignaXNWaXNpYmxlJywnY2stZHJvcGRvd25fX3BhbmVsLXZpc2libGUnKV19LGNoaWxkcmVuOnRoaXMuY2hpbGRyZW4sb246e3NlbGVjdHN0YXJ0OnQudG8oKGUpPT5lLnByZXZlbnREZWZhdWx0KCkpfX0pfWZvY3VzKCl7dGhpcy5jaGlsZHJlbi5sZW5ndGgmJnRoaXMuY2hpbGRyZW4uZmlyc3QuZm9jdXMoKX1mb2N1c0xhc3QoKXtpZih0aGlzLmNoaWxkcmVuLmxlbmd0aCl7Y29uc3QgZT10aGlzLmNoaWxkcmVuLmxhc3Q7J2Z1bmN0aW9uJz09dHlwZW9mIGUuZm9jdXNMYXN0P2UuZm9jdXNMYXN0KCk6ZS5mb2N1cygpfX19dmFyIHdrPW8oNTIpLHZrPW8ubih3ayk7Y2xhc3MgeWsgZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlLHQsbyl7c3VwZXIoZSk7Y29uc3Qgbj10aGlzLmJpbmRUZW1wbGF0ZTt0aGlzLmJ1dHRvblZpZXc9dCx0aGlzLnBhbmVsVmlldz1vLHRoaXMuc2V0KCdpc09wZW4nLCExKSx0aGlzLnNldCgnaXNFbmFibGVkJywhMCksdGhpcy5mb2N1c1RyYWNrZXI9bmV3IGxmLHRoaXMua2V5c3Ryb2tlcz1uZXcgWmcsdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOidkaXYnLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1kcm9wZG93bicsbi50bygnaXNFbmFibGVkJywoZSk9PmU/Jyc6J2NrLWRpc2FibGVkJyldfSxjaGlsZHJlbjpbdCxvXX0pLHQuZXh0ZW5kVGVtcGxhdGUoe2F0dHJpYnV0ZXM6e2NsYXNzOlsnY2stZHJvcGRvd25fX2J1dHRvbiddfX0pfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpLHRoaXMubGlzdGVuVG8odGhpcy5idXR0b25WaWV3LCdvcGVuJywoKT0+e3RoaXMuaXNPcGVuPSF0aGlzLmlzT3Blbn0pLHRoaXMucGFuZWxWaWV3LmJpbmQoJ2lzVmlzaWJsZScpLnRvKHRoaXMsJ2lzT3BlbicpLHRoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpLHRoaXMuZm9jdXNUcmFja2VyLmFkZCh0aGlzLmVsZW1lbnQpO2NvbnN0IGU9KGUsdCk9Pnt0aGlzLmlzT3BlbiYmKHRoaXMuYnV0dG9uVmlldy5mb2N1cygpLHRoaXMuaXNPcGVuPSExLHQoKSl9O3RoaXMua2V5c3Ryb2tlcy5zZXQoJ2Fycm93ZG93bicsKGUsdCk9Pnt0aGlzLmJ1dHRvblZpZXcuaXNFbmFibGVkJiYhdGhpcy5pc09wZW4mJih0aGlzLmlzT3Blbj0hMCx0KCkpfSksdGhpcy5rZXlzdHJva2VzLnNldCgnYXJyb3dyaWdodCcsKGUsdCk9Pnt0aGlzLmlzT3BlbiYmdCgpfSksdGhpcy5rZXlzdHJva2VzLnNldCgnYXJyb3dsZWZ0JyxlKSx0aGlzLmtleXN0cm9rZXMuc2V0KCdlc2MnLGUpfWZvY3VzKCl7dGhpcy5idXR0b25WaWV3LmZvY3VzKCl9fXZhciB4az1vKDU0KSxDaz1vLm4oeGspO2NsYXNzIEFrIGV4dGVuZHMga2h7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5hcnJvd1ZpZXc9dGhpcy5fY3JlYXRlQXJyb3dWaWV3KCksdGhpcy5kZWxlZ2F0ZSgnZXhlY3V0ZScpLnRvKHRoaXMsJ29wZW4nKX1yZW5kZXIoKXtzdXBlci5yZW5kZXIoKSx0aGlzLmNoaWxkcmVuLmFkZCh0aGlzLmFycm93Vmlldyl9X2NyZWF0ZUFycm93Vmlldygpe2NvbnN0IGU9bmV3IG1oO3JldHVybiBlLmNvbnRlbnQ9Q2suYSxlLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczonY2stZHJvcGRvd25fX2Fycm93J319KSxlfX12YXIgVGs9byg1NSksUGs9by5uKFRrKTtjbGFzcyBFayBleHRlbmRzIGtme2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLml0ZW1zPXRoaXMuY3JlYXRlQ29sbGVjdGlvbigpLHRoaXMuZm9jdXNUcmFja2VyPW5ldyBsZix0aGlzLmtleXN0cm9rZXM9bmV3IFpnLHRoaXMuX2ZvY3VzQ3ljbGVyPW5ldyBJZih7Zm9jdXNhYmxlczp0aGlzLml0ZW1zLGZvY3VzVHJhY2tlcjp0aGlzLmZvY3VzVHJhY2tlcixrZXlzdHJva2VIYW5kbGVyOnRoaXMua2V5c3Ryb2tlcyxhY3Rpb25zOntmb2N1c1ByZXZpb3VzOidhcnJvd3VwJyxmb2N1c05leHQ6J2Fycm93ZG93bid9fSksdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOid1bCcsYXR0cmlidXRlczp7Y2xhc3M6WydjaycsJ2NrLXJlc2V0JywnY2stbGlzdCddfSxjaGlsZHJlbjp0aGlzLml0ZW1zfSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7Zm9yKGNvbnN0IGUgb2YgdGhpcy5pdGVtcyl0aGlzLmZvY3VzVHJhY2tlci5hZGQoZS5lbGVtZW50KTt0aGlzLml0ZW1zLm9uKCdhZGQnLChlLHQpPT57dGhpcy5mb2N1c1RyYWNrZXIuYWRkKHQuZWxlbWVudCl9KSx0aGlzLml0ZW1zLm9uKCdyZW1vdmUnLChlLHQpPT57dGhpcy5mb2N1c1RyYWNrZXIucmVtb3ZlKHQuZWxlbWVudCl9KSx0aGlzLmtleXN0cm9rZXMubGlzdGVuVG8odGhpcy5lbGVtZW50KX1mb2N1cygpe3RoaXMuX2ZvY3VzQ3ljbGVyLmZvY3VzRmlyc3QoKX1mb2N1c0xhc3QoKXt0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0xhc3QoKX19Y2xhc3MgU2sgZXh0ZW5kcyBrZntjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zZXQoJ3RhYmluZGV4JywtMSksdGhpcy5rZXlzdHJva2VzPW5ldyBaZztjb25zdCBlPXRoaXMuYmluZFRlbXBsYXRlO3RoaXMuc2V0VGVtcGxhdGUoe3RhZzonbGknLGF0dHJpYnV0ZXM6e2NsYXNzOlsnY2snLCdjay1saXN0X19pdGVtJyxlLnRvKCdjbGFzcycpLGUuaWYoJ2lzQWN0aXZlJywnY2stbGlzdF9faXRlbV9hY3RpdmUnKV0sc3R5bGU6ZS50bygnc3R5bGUnKSx0YWJpbmRleDplLnRvKCd0YWJpbmRleCcpfSxjaGlsZHJlbjpbe3RleHQ6ZS50bygnbGFiZWwnKX1dLG9uOntjbGljazplLnRvKCdleGVjdXRlJyl9fSl9cmVuZGVyKCl7c3VwZXIucmVuZGVyKCk7Y29uc3QgZT0oZSx0KT0+e3RoaXMuZmlyZSgnZXhlY3V0ZScpLHQoKX07dGhpcy5rZXlzdHJva2VzLmxpc3RlblRvKHRoaXMuZWxlbWVudCksdGhpcy5rZXlzdHJva2VzLnNldCgnRW50ZXInLGUpLHRoaXMua2V5c3Ryb2tlcy5zZXQoJ1NwYWNlJyxlKX1mb2N1cygpe3RoaXMuZWxlbWVudC5mb2N1cygpfX12YXIgT2s9byg1NyksUms9by5uKE9rKSxJaz1vKDU5KSxWaz1vLm4oSWspLEZrPW8oNSksTms9by5uKEZrKTtjbGFzcyBNayBleHRlbmRzIHFme2luaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLG89ZS50LHQ9TXIoZSksbj1vKCdnJyksaT1vKCdoJyk7ZS51aS5jb21wb25lbnRGYWN0b3J5LmFkZCgnaGVhZGluZycsKG8pPT57Y29uc3Qgcj17fSxhPW5ldyBQYyxzPWUuY29tbWFuZHMuZ2V0KCdoZWFkaW5nJyksbD1lLmNvbW1hbmRzLmdldCgncGFyYWdyYXBoJyksZD1bc107Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD1uZXcga2soe2xhYmVsOmUudGl0bGUsY2xhc3M6ZS5jbGFzc30pOydwYXJhZ3JhcGgnPT09ZS5tb2RlbD8odC5iaW5kKCdpc0FjdGl2ZScpLnRvKGwsJ3ZhbHVlJyksdC5zZXQoJ2NvbW1hbmROYW1lJywncGFyYWdyYXBoJyksZC5wdXNoKGwpKToodC5iaW5kKCdpc0FjdGl2ZScpLnRvKHMsJ3ZhbHVlJywodCk9PnQ9PT1lLm1vZGVsKSx0LnNldCh7Y29tbWFuZE5hbWU6J2hlYWRpbmcnLGNvbW1hbmRWYWx1ZTplLm1vZGVsfSkpLGEuYWRkKHQpLHJbZS5tb2RlbF09ZS50aXRsZX1jb25zdCBjPU9yKG8pO3JldHVybiBScihjLGEpLGMuYnV0dG9uVmlldy5zZXQoe2lzT246ITEsd2l0aFRleHQ6ITAsdG9vbHRpcDppfSksYy5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6Wydjay1oZWFkaW5nLWRyb3Bkb3duJ119fSksYy5iaW5kKCdpc0VuYWJsZWQnKS50b01hbnkoZCwnaXNFbmFibGVkJywoLi4uZSk9PmUuc29tZSgoZSk9PmUpKSxjLmJ1dHRvblZpZXcuYmluZCgnbGFiZWwnKS50byhzLCd2YWx1ZScsbCwndmFsdWUnLChlLHQpPT57Y29uc3Qgbz1lfHx0JiYncGFyYWdyYXBoJztyZXR1cm4gcltvXT9yW29dOm59KSx0aGlzLmxpc3RlblRvKGMsJ2V4ZWN1dGUnLCh0KT0+e2UuZXhlY3V0ZSh0LnNvdXJjZS5jb21tYW5kTmFtZSx0LnNvdXJjZS5jb21tYW5kVmFsdWU/e3ZhbHVlOnQuc291cmNlLmNvbW1hbmRWYWx1ZX06dm9pZCAwKSxlLmVkaXRpbmcudmlldy5mb2N1cygpfSksY30pfX1jbGFzcyBEayBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bYmssTWtdfXN0YXRpYyBnZXQgcGx1Z2luTmFtZSgpe3JldHVybidIZWFkaW5nJ319dmFyIEJrPW8oNjIpLExrPW8ubihCayk7Y29uc3Qgems9bmV3IFdlYWtNYXAsams9U3ltYm9sKCdpbWFnZUNhcHRpb24nKTtjbGFzcyBxayBleHRlbmRzIHFme2luaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLG89ZS5lZGl0aW5nLnZpZXcsbj1lLm1vZGVsLnNjaGVtYSxpPWUuZGF0YSxyPWUuZWRpdGluZyxhPWUudDtuLnJlZ2lzdGVyKCdjYXB0aW9uJyx7YWxsb3dJbjonaW1hZ2UnLGFsbG93Q29udGVudE9mOickYmxvY2snLGlzTGltaXQ6ITB9KSxlLm1vZGVsLmRvY3VtZW50LnJlZ2lzdGVyUG9zdEZpeGVyKChlKT0+dGhpcy5faW5zZXJ0TWlzc2luZ01vZGVsQ2FwdGlvbkVsZW1lbnQoZSkpLGUuY29udmVyc2lvbi5mb3IoJ3VwY2FzdCcpLmFkZChZdCh7dmlldzpxcixtb2RlbDonY2FwdGlvbid9KSk7aS5kb3duY2FzdERpc3BhdGNoZXIub24oJ2luc2VydDpjYXB0aW9uJyxXcigoZSk9PmUuY3JlYXRlQ29udGFpbmVyRWxlbWVudCgnZmlnY2FwdGlvbicpLCExKSk7Y29uc3QgdD16cihvLGEoJ2YnKSk7ci5kb3duY2FzdERpc3BhdGNoZXIub24oJ2luc2VydDpjYXB0aW9uJyxXcih0KSksci5kb3duY2FzdERpc3BhdGNoZXIub24oJ2luc2VydCcsdGhpcy5fZml4Q2FwdGlvblZpc2liaWxpdHkoKGUpPT5lLml0ZW0pLHtwcmlvcml0eTonaGlnaCd9KSxyLmRvd25jYXN0RGlzcGF0Y2hlci5vbigncmVtb3ZlJyx0aGlzLl9maXhDYXB0aW9uVmlzaWJpbGl0eSgoZSk9PmUucG9zaXRpb24ucGFyZW50KSx7cHJpb3JpdHk6J2hpZ2gnfSksby5kb2N1bWVudC5yZWdpc3RlclBvc3RGaXhlcigoZSk9PnRoaXMuX3VwZGF0ZUNhcHRpb25WaXNpYmlsaXR5KGUpKX1fdXBkYXRlQ2FwdGlvblZpc2liaWxpdHkoZSl7Y29uc3QgdD10aGlzLmVkaXRvci5lZGl0aW5nLm1hcHBlcixvPXRoaXMuX2xhc3RTZWxlY3RlZENhcHRpb247bGV0IG47Y29uc3QgaT10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24scj1pLmdldFNlbGVjdGVkRWxlbWVudCgpO2lmKHImJnIuaXMoJ2ltYWdlJykpe2NvbnN0IGU9anIocik7bj10LnRvVmlld0VsZW1lbnQoZSl9Y29uc3QgYT1pLmdldEZpcnN0UG9zaXRpb24oKSxzPUhyKGEucGFyZW50KTtpZihzJiYobj10LnRvVmlld0VsZW1lbnQocykpLG4pcmV0dXJuIG8/bz09PW4/R3IobixlKTooS3IobyxlKSx0aGlzLl9sYXN0U2VsZWN0ZWRDYXB0aW9uPW4sR3IobixlKSk6KHRoaXMuX2xhc3RTZWxlY3RlZENhcHRpb249bixHcihuLGUpKTtpZihvKXtjb25zdCB0PUtyKG8sZSk7cmV0dXJuIHRoaXMuX2xhc3RTZWxlY3RlZENhcHRpb249bnVsbCx0fXJldHVybiExfV9maXhDYXB0aW9uVmlzaWJpbGl0eShlKXtyZXR1cm4odCxvLG4pPT57Y29uc3QgaT1lKG8pLHI9SHIoaSksYT10aGlzLmVkaXRvci5lZGl0aW5nLm1hcHBlcixzPW4ud3JpdGVyO2lmKHIpe2NvbnN0IGU9YS50b1ZpZXdFbGVtZW50KHIpO2UmJihyLmNoaWxkQ291bnQ/cy5yZW1vdmVDbGFzcygnY2staGlkZGVuJyxlKTpzLmFkZENsYXNzKCdjay1oaWRkZW4nLGUpKX19fV9pbnNlcnRNaXNzaW5nTW9kZWxDYXB0aW9uRWxlbWVudChlKXtjb25zdCB0PXRoaXMuZWRpdG9yLm1vZGVsLG89dC5kb2N1bWVudC5kaWZmZXIuZ2V0Q2hhbmdlcygpO2Zvcihjb25zdCB0IG9mIG8paWYoJ2luc2VydCc9PXQudHlwZSYmJ2ltYWdlJz09dC5uYW1lKXtjb25zdCBvPXQucG9zaXRpb24ubm9kZUFmdGVyO2lmKCFqcihvKSlyZXR1cm4gZS5hcHBlbmRFbGVtZW50KCdjYXB0aW9uJyxvKSwhMH19fXZhciBXaz1vKDY0KSxVaz1vLm4oV2spO2NsYXNzIEhrIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltxa119c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0ltYWdlQ2FwdGlvbid9fWNsYXNzIEtrIGV4dGVuZHMgR2Z7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLl9kZWZhdWx0U3R5bGU9ITEsdGhpcy5zdHlsZXM9dC5yZWR1Y2UoKGUsdCk9PihlW3QubmFtZV09dCx0LmlzRGVmYXVsdCYmKHRoaXMuX2RlZmF1bHRTdHlsZT10Lm5hbWUpLGUpLHt9KX1yZWZyZXNoKCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbC5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCk7aWYodGhpcy5pc0VuYWJsZWQ9WGkoZSksIWUpdGhpcy52YWx1ZT0hMTtlbHNlIGlmKGUuaGFzQXR0cmlidXRlKCdpbWFnZVN0eWxlJykpe2NvbnN0IHQ9ZS5nZXRBdHRyaWJ1dGUoJ2ltYWdlU3R5bGUnKTt0aGlzLnZhbHVlPSEhdGhpcy5zdHlsZXNbdF0mJnR9ZWxzZSB0aGlzLnZhbHVlPXRoaXMuX2RlZmF1bHRTdHlsZX1leGVjdXRlKGUpe2NvbnN0IHQ9ZS52YWx1ZSxvPXRoaXMuZWRpdG9yLm1vZGVsLG49by5kb2N1bWVudC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRFbGVtZW50KCk7by5jaGFuZ2UoKGUpPT57dGhpcy5zdHlsZXNbdF0uaXNEZWZhdWx0P2UucmVtb3ZlQXR0cmlidXRlKCdpbWFnZVN0eWxlJyxuKTplLnNldEF0dHJpYnV0ZSgnaW1hZ2VTdHlsZScsdCxuKX0pfX12YXIgR2s9byg2NiksJGs9by5uKEdrKSxKaz1vKDY3KSxRaz1vLm4oSmspLFlrPW8oNjgpLFhrPW8ubihZayksWms9byg2OSksZV89by5uKFprKTtjb25zdCB0Xz17ZnVsbDp7bmFtZTonZnVsbCcsdGl0bGU6J0Z1bGwgc2l6ZSBpbWFnZScsaWNvbjokay5hLGlzRGVmYXVsdDohMH0sc2lkZTp7bmFtZTonc2lkZScsdGl0bGU6J1NpZGUgaW1hZ2UnLGljb246ZV8uYSxjbGFzc05hbWU6J2ltYWdlLXN0eWxlLXNpZGUnfSxhbGlnbkxlZnQ6e25hbWU6J2FsaWduTGVmdCcsdGl0bGU6J0xlZnQgYWxpZ25lZCBpbWFnZScsaWNvbjpRay5hLGNsYXNzTmFtZTonaW1hZ2Utc3R5bGUtYWxpZ24tbGVmdCd9LGFsaWduQ2VudGVyOntuYW1lOidhbGlnbkNlbnRlcicsdGl0bGU6J0NlbnRlcmVkIGltYWdlJyxpY29uOlhrLmEsY2xhc3NOYW1lOidpbWFnZS1zdHlsZS1hbGlnbi1jZW50ZXInfSxhbGlnblJpZ2h0OntuYW1lOidhbGlnblJpZ2h0Jyx0aXRsZTonUmlnaHQgYWxpZ25lZCBpbWFnZScsaWNvbjplXy5hLGNsYXNzTmFtZTonaW1hZ2Utc3R5bGUtYWxpZ24tcmlnaHQnfX0sb189e2Z1bGw6JGsuYSxsZWZ0OlFrLmEscmlnaHQ6ZV8uYSxjZW50ZXI6WGsuYX07Y2xhc3Mgbl8gZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW19iXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nSW1hZ2VTdHlsZUVkaXRpbmcnfWluaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5tb2RlbC5zY2hlbWEsbz1lLmRhdGEsbj1lLmVkaXRpbmc7ZS5jb25maWcuZGVmaW5lKCdpbWFnZS5zdHlsZXMnLFsnZnVsbCcsJ3NpZGUnXSk7Y29uc3QgaT1ZcihlLmNvbmZpZy5nZXQoJ2ltYWdlLnN0eWxlcycpKTt0LmV4dGVuZCgnaW1hZ2UnLHthbGxvd0F0dHJpYnV0ZXM6J2ltYWdlU3R5bGUnfSk7Y29uc3Qgcj0kcihpKTtuLmRvd25jYXN0RGlzcGF0Y2hlci5vbignYXR0cmlidXRlOmltYWdlU3R5bGU6aW1hZ2UnLHIpLG8uZG93bmNhc3REaXNwYXRjaGVyLm9uKCdhdHRyaWJ1dGU6aW1hZ2VTdHlsZTppbWFnZScsciksby51cGNhc3REaXNwYXRjaGVyLm9uKCdlbGVtZW50OmZpZ3VyZScsSnIoaSkse3ByaW9yaXR5Oidsb3cnfSksZS5jb21tYW5kcy5hZGQoJ2ltYWdlU3R5bGUnLG5ldyBLayhlLGkpKX19dmFyIGlfPW8oNzApLHJfPW8ubihpXyk7Y2xhc3MgYV8gZXh0ZW5kcyBxZntnZXQgbG9jYWxpemVkRGVmYXVsdFN0eWxlc1RpdGxlcygpe2NvbnN0IGU9dGhpcy5lZGl0b3IudDtyZXR1cm57XCJGdWxsIHNpemUgaW1hZ2VcIjplKCdpJyksXCJTaWRlIGltYWdlXCI6ZSgnaicpLFwiTGVmdCBhbGlnbmVkIGltYWdlXCI6ZSgnaycpLFwiQ2VudGVyZWQgaW1hZ2VcIjplKCdsJyksXCJSaWdodCBhbGlnbmVkIGltYWdlXCI6ZSgnbScpfX1pbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PWUuY29uZmlnLmdldCgnaW1hZ2Uuc3R5bGVzJyksbz1acihZcih0KSx0aGlzLmxvY2FsaXplZERlZmF1bHRTdHlsZXNUaXRsZXMpO2Zvcihjb25zdCBlIG9mIG8pdGhpcy5fY3JlYXRlQnV0dG9uKGUpfV9jcmVhdGVCdXR0b24oZSl7Y29uc3QgdD10aGlzLmVkaXRvcixvPWBpbWFnZVN0eWxlOiR7ZS5uYW1lfWA7dC51aS5jb21wb25lbnRGYWN0b3J5LmFkZChvLChvKT0+e2NvbnN0IG49dC5jb21tYW5kcy5nZXQoJ2ltYWdlU3R5bGUnKSxpPW5ldyBraChvKTtyZXR1cm4gaS5zZXQoe2xhYmVsOmUudGl0bGUsaWNvbjplLmljb24sdG9vbHRpcDohMH0pLGkuYmluZCgnaXNFbmFibGVkJykudG8obiwnaXNFbmFibGVkJyksaS5iaW5kKCdpc09uJykudG8obiwndmFsdWUnLCh0KT0+dD09PWUubmFtZSksdGhpcy5saXN0ZW5UbyhpLCdleGVjdXRlJywoKT0+dC5leGVjdXRlKCdpbWFnZVN0eWxlJyx7dmFsdWU6ZS5uYW1lfSkpLGl9KX19Y2xhc3Mgc18gZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW25fLGFfXX1zdGF0aWMgZ2V0IHBsdWdpbk5hbWUoKXtyZXR1cm4nSW1hZ2VTdHlsZSd9fWNsYXNzIGxfIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltXYl19c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0ltYWdlVG9vbGJhcid9aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLnBsdWdpbnMuZ2V0KCdCYWxsb29uVG9vbGJhcicpO3QmJnRoaXMubGlzdGVuVG8odCwnc2hvdycsKHQpPT57WWkoZS5lZGl0aW5nLnZpZXcuZG9jdW1lbnQuc2VsZWN0aW9uKSYmdC5zdG9wKCl9LHtwcmlvcml0eTonaGlnaCd9KX1hZnRlckluaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5jb25maWcuZ2V0KCdpbWFnZS50b29sYmFyJyk7dCYmdC5sZW5ndGgmJih0aGlzLl9iYWxsb29uPXRoaXMuZWRpdG9yLnBsdWdpbnMuZ2V0KCdDb250ZXh0dWFsQmFsbG9vbicpLHRoaXMuX3Rvb2xiYXI9bmV3IE1mLHRoaXMuX3Rvb2xiYXIuZmlsbEZyb21Db25maWcodCxlLnVpLmNvbXBvbmVudEZhY3RvcnkpLHRoaXMubGlzdGVuVG8oZS5lZGl0aW5nLnZpZXcsJ3JlbmRlcicsKCk9Pnt0aGlzLl9jaGVja0lzVmlzaWJsZSgpfSksdGhpcy5saXN0ZW5UbyhlLnVpLmZvY3VzVHJhY2tlciwnY2hhbmdlOmlzRm9jdXNlZCcsKCk9Pnt0aGlzLl9jaGVja0lzVmlzaWJsZSgpfSx7cHJpb3JpdHk6J2xvdyd9KSl9X2NoZWNrSXNWaXNpYmxlKCl7Y29uc3QgZT10aGlzLmVkaXRvcjtlLnVpLmZvY3VzVHJhY2tlci5pc0ZvY3VzZWQ/WWkoZS5lZGl0aW5nLnZpZXcuZG9jdW1lbnQuc2VsZWN0aW9uKT90aGlzLl9zaG93VG9vbGJhcigpOnRoaXMuX2hpZGVUb29sYmFyKCk6dGhpcy5faGlkZVRvb2xiYXIoKX1fc2hvd1Rvb2xiYXIoKXtjb25zdCBlPXRoaXMuZWRpdG9yO3RoaXMuX2lzVmlzaWJsZT9wcihlKTohdGhpcy5fYmFsbG9vbi5oYXNWaWV3KHRoaXMuX3Rvb2xiYXIpJiZ0aGlzLl9iYWxsb29uLmFkZCh7dmlldzp0aGlzLl90b29sYmFyLHBvc2l0aW9uOmdyKGUpLGJhbGxvb25DbGFzc05hbWU6J2NrLXRvb2xiYXItY29udGFpbmVyJ30pfV9oaWRlVG9vbGJhcigpe3RoaXMuX2lzVmlzaWJsZSYmdGhpcy5fYmFsbG9vbi5yZW1vdmUodGhpcy5fdG9vbGJhcil9Z2V0IF9pc1Zpc2libGUoKXtyZXR1cm4gdGhpcy5fYmFsbG9vbi52aXNpYmxlVmlldz09dGhpcy5fdG9vbGJhcn19Y2xhc3MgZF8gZXh0ZW5kcyBHZntyZWZyZXNoKCl7Y29uc3QgZT10aGlzLmVkaXRvci5tb2RlbCx0PWUuZG9jdW1lbnQ7dGhpcy52YWx1ZT10LnNlbGVjdGlvbi5nZXRBdHRyaWJ1dGUoJ2xpbmtIcmVmJyksdGhpcy5pc0VuYWJsZWQ9ZS5zY2hlbWEuY2hlY2tBdHRyaWJ1dGVJblNlbGVjdGlvbih0LnNlbGVjdGlvbiwnbGlua0hyZWYnKX1leGVjdXRlKGUpe2NvbnN0IHQ9dGhpcy5lZGl0b3IubW9kZWwsbz10LmRvY3VtZW50LnNlbGVjdGlvbjt0LmNoYW5nZSgobik9PntpZihvLmlzQ29sbGFwc2VkKXtjb25zdCB0PW8uZ2V0Rmlyc3RQb3NpdGlvbigpO2lmKG8uaGFzQXR0cmlidXRlKCdsaW5rSHJlZicpKXtjb25zdCB0PWVhKG8uZ2V0Rmlyc3RQb3NpdGlvbigpLG8uZ2V0QXR0cmlidXRlKCdsaW5rSHJlZicpKTtuLnNldEF0dHJpYnV0ZSgnbGlua0hyZWYnLGUsdCksbi5zZXRTZWxlY3Rpb24odCl9ZWxzZSBpZignJyE9PWUpe2NvbnN0IGk9cnQoby5nZXRBdHRyaWJ1dGVzKCkpO2kuc2V0KCdsaW5rSHJlZicsZSk7Y29uc3Qgcj1uLmNyZWF0ZVRleHQoZSxpKTtuLmluc2VydChyLHQpLG4uc2V0U2VsZWN0aW9uKEd1LmNyZWF0ZU9uKHIpKX19ZWxzZXtjb25zdCBpPXQuc2NoZW1hLmdldFZhbGlkUmFuZ2VzKG8uZ2V0UmFuZ2VzKCksJ2xpbmtIcmVmJyk7Zm9yKGNvbnN0IHQgb2YgaSluLnNldEF0dHJpYnV0ZSgnbGlua0hyZWYnLGUsdCl9fSl9fWNsYXNzIGNfIGV4dGVuZHMgR2Z7cmVmcmVzaCgpe3RoaXMuaXNFbmFibGVkPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbi5oYXNBdHRyaWJ1dGUoJ2xpbmtIcmVmJyl9ZXhlY3V0ZSgpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwsdD1lLmRvY3VtZW50LnNlbGVjdGlvbjtlLmNoYW5nZSgoZSk9Pntjb25zdCBvPXQuaXNDb2xsYXBzZWQ/W2VhKHQuZ2V0Rmlyc3RQb3NpdGlvbigpLHQuZ2V0QXR0cmlidXRlKCdsaW5rSHJlZicpKV06dC5nZXRSYW5nZXMoKTtmb3IoY29uc3QgdCBvZiBvKWUucmVtb3ZlQXR0cmlidXRlKCdsaW5rSHJlZicsdCl9KX19Y29uc3QgdV89U3ltYm9sKCdsaW5rRWxlbWVudCcpLG1fPS9bXFx1MDAwMC1cXHUwMDIwXFx1MDBBMFxcdTE2ODBcXHUxODBFXFx1MjAwMC1cXHUyMDI5XFx1MjA1ZlxcdTMwMDBdL2cscF89L14oPzooPzpodHRwcz98ZnRwcz98bWFpbHRvKTp8W15hLXpdfFthLXorLi1dKyg/OlteYS16Ky46LV18JCkpL2k7Y2xhc3MgZ197Y29uc3RydWN0b3IoZSx0LG8pe3RoaXMubW9kZWw9ZSx0aGlzLmF0dHJpYnV0ZT1vLHRoaXMuX21vZGVsU2VsZWN0aW9uPWUuZG9jdW1lbnQuc2VsZWN0aW9uLHRoaXMuX292ZXJyaWRlVWlkPW51bGwsdGhpcy5faXNOZXh0R3Jhdml0eVJlc3RvcmF0aW9uU2tpcHBlZD0hMSx0Lmxpc3RlblRvKHRoaXMuX21vZGVsU2VsZWN0aW9uLCdjaGFuZ2U6cmFuZ2UnLChlLHQpPT50aGlzLl9pc05leHRHcmF2aXR5UmVzdG9yYXRpb25Ta2lwcGVkP3ZvaWQodGhpcy5faXNOZXh0R3Jhdml0eVJlc3RvcmF0aW9uU2tpcHBlZD0hMSk6dm9pZCghdGhpcy5faXNHcmF2aXR5T3ZlcnJpZGRlbnx8IXQuZGlyZWN0Q2hhbmdlJiZzYSh0aGlzLl9tb2RlbFNlbGVjdGlvbi5nZXRGaXJzdFBvc2l0aW9uKCksbyl8fHRoaXMuX3Jlc3RvcmVHcmF2aXR5KCkpKX1oYW5kbGVGb3J3YXJkTW92ZW1lbnQoZSx0KXtjb25zdCBvPXRoaXMuYXR0cmlidXRlO3JldHVybiB0aGlzLl9pc0dyYXZpdHlPdmVycmlkZGVufHxlLmlzQXRTdGFydCYmdGhpcy5faGFzU2VsZWN0aW9uQXR0cmlidXRlP3ZvaWQgMDpjYShlLG8pJiZ0aGlzLl9oYXNTZWxlY3Rpb25BdHRyaWJ1dGU/KHRoaXMuX3ByZXZlbnRDYXJldE1vdmVtZW50KHQpLHRoaXMuX3JlbW92ZVNlbGVjdGlvbkF0dHJpYnV0ZSgpLCEwKTpsYShlLG8pPyh0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudCh0KSx0aGlzLl9vdmVycmlkZUdyYXZpdHkoKSwhMCk6ZGEoZSxvKSYmdGhpcy5faGFzU2VsZWN0aW9uQXR0cmlidXRlPyh0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudCh0KSx0aGlzLl9vdmVycmlkZUdyYXZpdHkoKSwhMCk6dm9pZCAwfWhhbmRsZUJhY2t3YXJkTW92ZW1lbnQoZSx0KXtjb25zdCBvPXRoaXMuYXR0cmlidXRlO2lmKHRoaXMuX2lzR3Jhdml0eU92ZXJyaWRkZW4pcmV0dXJuIGNhKGUsbykmJnRoaXMuX2hhc1NlbGVjdGlvbkF0dHJpYnV0ZT8odGhpcy5fcHJldmVudENhcmV0TW92ZW1lbnQodCksdGhpcy5fcmVzdG9yZUdyYXZpdHkoKSx0aGlzLl9yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUoKSwhMCk6KHRoaXMuX3ByZXZlbnRDYXJldE1vdmVtZW50KHQpLHRoaXMuX3Jlc3RvcmVHcmF2aXR5KCksZS5pc0F0U3RhcnQmJnRoaXMuX3JlbW92ZVNlbGVjdGlvbkF0dHJpYnV0ZSgpLCEwKTtyZXR1cm4gY2EoZSxvKSYmIXRoaXMuX2hhc1NlbGVjdGlvbkF0dHJpYnV0ZT8odGhpcy5fcHJldmVudENhcmV0TW92ZW1lbnQodCksdGhpcy5fc2V0U2VsZWN0aW9uQXR0cmlidXRlRnJvbVRoZU5vZGVCZWZvcmUoZSksITApOmUuaXNBdEVuZCYmZGEoZSxvKT90aGlzLl9oYXNTZWxlY3Rpb25BdHRyaWJ1dGU/dm9pZCh1YShlLG8pJiYodGhpcy5fc2tpcE5leHRBdXRvbWF0aWNHcmF2aXR5UmVzdG9yYXRpb24oKSx0aGlzLl9vdmVycmlkZUdyYXZpdHkoKSkpOih0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudCh0KSx0aGlzLl9zZXRTZWxlY3Rpb25BdHRyaWJ1dGVGcm9tVGhlTm9kZUJlZm9yZShlKSwhMCk6ZS5pc0F0U3RhcnQ/dGhpcy5faGFzU2VsZWN0aW9uQXR0cmlidXRlPyh0aGlzLl9yZW1vdmVTZWxlY3Rpb25BdHRyaWJ1dGUoKSx0aGlzLl9wcmV2ZW50Q2FyZXRNb3ZlbWVudCh0KSwhMCk6dm9pZCAwOnZvaWQodWEoZSxvKSYmKHRoaXMuX3NraXBOZXh0QXV0b21hdGljR3Jhdml0eVJlc3RvcmF0aW9uKCksdGhpcy5fb3ZlcnJpZGVHcmF2aXR5KCkpKX1nZXQgX2lzR3Jhdml0eU92ZXJyaWRkZW4oKXtyZXR1cm4hIXRoaXMuX292ZXJyaWRlVWlkfWdldCBfaGFzU2VsZWN0aW9uQXR0cmlidXRlKCl7cmV0dXJuIHRoaXMuX21vZGVsU2VsZWN0aW9uLmhhc0F0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZSl9X292ZXJyaWRlR3Jhdml0eSgpe3RoaXMuX292ZXJyaWRlVWlkPXRoaXMubW9kZWwuY2hhbmdlKChlKT0+ZS5vdmVycmlkZVNlbGVjdGlvbkdyYXZpdHkoKSl9X3Jlc3RvcmVHcmF2aXR5KCl7dGhpcy5tb2RlbC5jaGFuZ2UoKGUpPT57ZS5yZXN0b3JlU2VsZWN0aW9uR3Jhdml0eSh0aGlzLl9vdmVycmlkZVVpZCksdGhpcy5fb3ZlcnJpZGVVaWQ9bnVsbH0pfV9wcmV2ZW50Q2FyZXRNb3ZlbWVudChlKXtlLnByZXZlbnREZWZhdWx0KCl9X3JlbW92ZVNlbGVjdGlvbkF0dHJpYnV0ZSgpe3RoaXMubW9kZWwuY2hhbmdlKChlKT0+e2UucmVtb3ZlU2VsZWN0aW9uQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlKX0pfV9zZXRTZWxlY3Rpb25BdHRyaWJ1dGVGcm9tVGhlTm9kZUJlZm9yZShlKXtjb25zdCB0PXRoaXMuYXR0cmlidXRlO3RoaXMubW9kZWwuY2hhbmdlKChvKT0+e28uc2V0U2VsZWN0aW9uQXR0cmlidXRlKHRoaXMuYXR0cmlidXRlLGUubm9kZUJlZm9yZS5nZXRBdHRyaWJ1dGUodCkpfSl9X3NraXBOZXh0QXV0b21hdGljR3Jhdml0eVJlc3RvcmF0aW9uKCl7dGhpcy5faXNOZXh0R3Jhdml0eVJlc3RvcmF0aW9uU2tpcHBlZD0hMH19dmFyIGZfPW8oNzIpLGhfPW8ubihmXyk7Y29uc3QgYl89J2NrLWxpbmtfc2VsZWN0ZWQnO2NsYXNzIGtfIGV4dGVuZHMgcWZ7aW5pdCgpe2NvbnN0IGU9dGhpcy5lZGl0b3I7ZS5tb2RlbC5zY2hlbWEuZXh0ZW5kKCckdGV4dCcse2FsbG93QXR0cmlidXRlczonbGlua0hyZWYnfSksZS5jb252ZXJzaW9uLmZvcignZGF0YURvd25jYXN0JykuYWRkKGJ0KHttb2RlbDonbGlua0hyZWYnLHZpZXc6bmF9KSksZS5jb252ZXJzaW9uLmZvcignZWRpdGluZ0Rvd25jYXN0JykuYWRkKGJ0KHttb2RlbDonbGlua0hyZWYnLHZpZXc6KGUsdCk9Pm5hKGlhKGUpLHQpfSkpLGUuY29udmVyc2lvbi5mb3IoJ3VwY2FzdCcpLmFkZChYdCh7dmlldzp7bmFtZTonYScsYXR0cmlidXRlczp7aHJlZjohMH19LG1vZGVsOntrZXk6J2xpbmtIcmVmJyx2YWx1ZTooZSk9PmUuZ2V0QXR0cmlidXRlKCdocmVmJyl9fSkpLGUuY29tbWFuZHMuYWRkKCdsaW5rJyxuZXcgZF8oZSkpLGUuY29tbWFuZHMuYWRkKCd1bmxpbmsnLG5ldyBjXyhlKSksYWEoZS5lZGl0aW5nLnZpZXcsZS5tb2RlbCx0aGlzLCdsaW5rSHJlZicpLHRoaXMuX3NldHVwTGlua0hpZ2hsaWdodCgpfV9zZXR1cExpbmtIaWdobGlnaHQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9ZS5lZGl0aW5nLnZpZXcsbz1uZXcgU2V0O3QuZG9jdW1lbnQucmVnaXN0ZXJQb3N0Rml4ZXIoKHQpPT57Y29uc3Qgbj1lLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjtpZihuLmhhc0F0dHJpYnV0ZSgnbGlua0hyZWYnKSl7Y29uc3QgaT1lYShuLmdldEZpcnN0UG9zaXRpb24oKSxuLmdldEF0dHJpYnV0ZSgnbGlua0hyZWYnKSkscj1lLmVkaXRpbmcubWFwcGVyLnRvVmlld1JhbmdlKGkpO2Zvcihjb25zdCBlIG9mIHIuZ2V0SXRlbXMoKSllLmlzKCdhJykmJih0LmFkZENsYXNzKGJfLGUpLG8uYWRkKGUpKX19KSxlLmNvbnZlcnNpb24uZm9yKCdlZGl0aW5nRG93bmNhc3QnKS5hZGQoKGUpPT57ZnVuY3Rpb24gbigpe3QuY2hhbmdlKChlKT0+e2Zvcihjb25zdCB0IG9mIG8udmFsdWVzKCkpZS5yZW1vdmVDbGFzcyhiXyx0KSxvLmRlbGV0ZSh0KX0pfWUub24oJ2luc2VydCcsbix7cHJpb3JpdHk6J2hpZ2hlc3QnfSksZS5vbigncmVtb3ZlJyxuLHtwcmlvcml0eTonaGlnaGVzdCd9KSxlLm9uKCdhdHRyaWJ1dGUnLG4se3ByaW9yaXR5OidoaWdoZXN0J30pLGUub24oJ3NlbGVjdGlvbicsbix7cHJpb3JpdHk6J2hpZ2hlc3QnfSl9KX19Y2xhc3MgX18gZXh0ZW5kcyB2dXtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLmRvbUV2ZW50VHlwZT0nY2xpY2snfW9uRG9tRXZlbnQoZSl7dGhpcy5maXJlKGUudHlwZSxlKX19dmFyIHdfPW8oNzQpLHZfPW8ubih3Xyk7Y2xhc3MgeV8gZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKTtjb25zdCBvPWUudDt0aGlzLmZvY3VzVHJhY2tlcj1uZXcgbGYsdGhpcy5rZXlzdHJva2VzPW5ldyBaZyx0aGlzLnVybElucHV0Vmlldz10aGlzLl9jcmVhdGVVcmxJbnB1dCgpLHRoaXMuc2F2ZUJ1dHRvblZpZXc9dGhpcy5fY3JlYXRlQnV0dG9uKG8oJ3gnKSxJYi5hLCdjay1idXR0b24tc2F2ZScpLHRoaXMuc2F2ZUJ1dHRvblZpZXcudHlwZT0nc3VibWl0Jyx0aGlzLmNhbmNlbEJ1dHRvblZpZXc9dGhpcy5fY3JlYXRlQnV0dG9uKG8oJ3knKSxGYi5hLCdjay1idXR0b24tY2FuY2VsJywnY2FuY2VsJyksdGhpcy5fZm9jdXNhYmxlcz1uZXcgY2YsdGhpcy5fZm9jdXNDeWNsZXI9bmV3IElmKHtmb2N1c2FibGVzOnRoaXMuX2ZvY3VzYWJsZXMsZm9jdXNUcmFja2VyOnRoaXMuZm9jdXNUcmFja2VyLGtleXN0cm9rZUhhbmRsZXI6dGhpcy5rZXlzdHJva2VzLGFjdGlvbnM6e2ZvY3VzUHJldmlvdXM6J3NoaWZ0ICsgdGFiJyxmb2N1c05leHQ6J3RhYid9fSksdGhpcy5zZXRUZW1wbGF0ZSh7dGFnOidmb3JtJyxhdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stbGluay1mb3JtJ10sdGFiaW5kZXg6Jy0xJ30sY2hpbGRyZW46W3RoaXMudXJsSW5wdXRWaWV3LHRoaXMuc2F2ZUJ1dHRvblZpZXcsdGhpcy5jYW5jZWxCdXR0b25WaWV3XX0pfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpLGlyKHt2aWV3OnRoaXN9KTtjb25zdCBlPVt0aGlzLnVybElucHV0Vmlldyx0aGlzLnNhdmVCdXR0b25WaWV3LHRoaXMuY2FuY2VsQnV0dG9uVmlld107ZS5mb3JFYWNoKChlKT0+e3RoaXMuX2ZvY3VzYWJsZXMuYWRkKGUpLHRoaXMuZm9jdXNUcmFja2VyLmFkZChlLmVsZW1lbnQpfSksdGhpcy5rZXlzdHJva2VzLmxpc3RlblRvKHRoaXMuZWxlbWVudCl9Zm9jdXMoKXt0aGlzLl9mb2N1c0N5Y2xlci5mb2N1c0ZpcnN0KCl9X2NyZWF0ZVVybElucHV0KCl7Y29uc3QgZT10aGlzLmxvY2FsZS50LHQ9bmV3IFBiKHRoaXMubG9jYWxlLE9iKTtyZXR1cm4gdC5sYWJlbD1lKCd6JyksdC5pbnB1dFZpZXcucGxhY2Vob2xkZXI9J2h0dHBzOi8vZXhhbXBsZS5jb20nLHR9X2NyZWF0ZUJ1dHRvbihlLHQsbyxuKXtjb25zdCBpPW5ldyBraCh0aGlzLmxvY2FsZSk7cmV0dXJuIGkuc2V0KHtsYWJlbDplLGljb246dCx0b29sdGlwOiEwfSksaS5leHRlbmRUZW1wbGF0ZSh7YXR0cmlidXRlczp7Y2xhc3M6b319KSxuJiZpLmRlbGVnYXRlKCdleGVjdXRlJykudG8odGhpcyxuKSxpfX12YXIgeF89byg3NiksQ189by5uKHhfKSxBXz1vKDc3KSxUXz1vLm4oQV8pLFBfPW8oNzgpLEVfPW8ubihQXyk7Y2xhc3MgU18gZXh0ZW5kcyBrZntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKTtjb25zdCBvPWUudDt0aGlzLmZvY3VzVHJhY2tlcj1uZXcgbGYsdGhpcy5rZXlzdHJva2VzPW5ldyBaZyx0aGlzLnByZXZpZXdCdXR0b25WaWV3PXRoaXMuX2NyZWF0ZVByZXZpZXdCdXR0b24oKSx0aGlzLnVubGlua0J1dHRvblZpZXc9dGhpcy5fY3JlYXRlQnV0dG9uKG8oJ2FhJyksQ18uYSwndW5saW5rJyksdGhpcy5lZGl0QnV0dG9uVmlldz10aGlzLl9jcmVhdGVCdXR0b24obygnYWInKSxUXy5hLCdlZGl0JyksdGhpcy5zZXQoJ2hyZWYnKSx0aGlzLl9mb2N1c2FibGVzPW5ldyBjZix0aGlzLl9mb2N1c0N5Y2xlcj1uZXcgSWYoe2ZvY3VzYWJsZXM6dGhpcy5fZm9jdXNhYmxlcyxmb2N1c1RyYWNrZXI6dGhpcy5mb2N1c1RyYWNrZXIsa2V5c3Ryb2tlSGFuZGxlcjp0aGlzLmtleXN0cm9rZXMsYWN0aW9uczp7Zm9jdXNQcmV2aW91czonc2hpZnQgKyB0YWInLGZvY3VzTmV4dDondGFiJ319KSx0aGlzLnNldFRlbXBsYXRlKHt0YWc6J2RpdicsYXR0cmlidXRlczp7Y2xhc3M6WydjaycsJ2NrLWxpbmstYWN0aW9ucyddLHRhYmluZGV4OictMSd9LGNoaWxkcmVuOlt0aGlzLnByZXZpZXdCdXR0b25WaWV3LHRoaXMuZWRpdEJ1dHRvblZpZXcsdGhpcy51bmxpbmtCdXR0b25WaWV3XX0pfXJlbmRlcigpe3N1cGVyLnJlbmRlcigpO2NvbnN0IGU9W3RoaXMucHJldmlld0J1dHRvblZpZXcsdGhpcy5lZGl0QnV0dG9uVmlldyx0aGlzLnVubGlua0J1dHRvblZpZXddO2UuZm9yRWFjaCgoZSk9Pnt0aGlzLl9mb2N1c2FibGVzLmFkZChlKSx0aGlzLmZvY3VzVHJhY2tlci5hZGQoZS5lbGVtZW50KX0pLHRoaXMua2V5c3Ryb2tlcy5saXN0ZW5Ubyh0aGlzLmVsZW1lbnQpfWZvY3VzKCl7dGhpcy5fZm9jdXNDeWNsZXIuZm9jdXNGaXJzdCgpfV9jcmVhdGVCdXR0b24oZSx0LG8pe2NvbnN0IG49bmV3IGtoKHRoaXMubG9jYWxlKTtyZXR1cm4gbi5zZXQoe2xhYmVsOmUsaWNvbjp0LHRvb2x0aXA6ITB9KSxuLmRlbGVnYXRlKCdleGVjdXRlJykudG8odGhpcyxvKSxufV9jcmVhdGVQcmV2aWV3QnV0dG9uKCl7Y29uc3QgZT1uZXcga2godGhpcy5sb2NhbGUpLG89dGhpcy5iaW5kVGVtcGxhdGUsbj10aGlzLnQ7cmV0dXJuIGUuc2V0KHt3aXRoVGV4dDohMCx0b29sdGlwOm4oJ2FjJyl9KSxlLmV4dGVuZFRlbXBsYXRlKHthdHRyaWJ1dGVzOntjbGFzczpbJ2NrJywnY2stbGluay1hY3Rpb25zX19wcmV2aWV3J10saHJlZjpvLnRvKCdocmVmJywoZSk9PmUmJmlhKGUpKSx0YXJnZXQ6J19ibGFuayd9fSksZS5iaW5kKCdsYWJlbCcpLnRvKHRoaXMsJ2hyZWYnLChlKT0+ZXx8bignYWQnKSksZS5iaW5kKCdpc0VuYWJsZWQnKS50byh0aGlzLCdocmVmJywoZSk9PiEhZSksZS50ZW1wbGF0ZS50YWc9J2EnLGUudGVtcGxhdGUuZXZlbnRMaXN0ZW5lcnM9e30sZX19dmFyIE9fPW8oODApLFJfPW8ubihPXyk7Y29uc3QgSV89J0N0cmwrSyc7Y2xhc3MgVl8gZXh0ZW5kcyBxZntzdGF0aWMgZ2V0IHJlcXVpcmVzKCl7cmV0dXJuW1diXX1pbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvcjtlLmVkaXRpbmcudmlldy5hZGRPYnNlcnZlcihfXyksdGhpcy5hY3Rpb25zVmlldz10aGlzLl9jcmVhdGVBY3Rpb25zVmlldygpLHRoaXMuZm9ybVZpZXc9dGhpcy5fY3JlYXRlRm9ybVZpZXcoKSx0aGlzLl9iYWxsb29uPWUucGx1Z2lucy5nZXQoV2IpLHRoaXMuX2NyZWF0ZVRvb2xiYXJMaW5rQnV0dG9uKCksdGhpcy5fZW5hYmxlVXNlckJhbGxvb25JbnRlcmFjdGlvbnMoKX1fY3JlYXRlQWN0aW9uc1ZpZXcoKXtjb25zdCBlPXRoaXMuZWRpdG9yLHQ9bmV3IFNfKGUubG9jYWxlKSxvPWUuY29tbWFuZHMuZ2V0KCdsaW5rJyksbj1lLmNvbW1hbmRzLmdldCgndW5saW5rJyk7cmV0dXJuIHQuYmluZCgnaHJlZicpLnRvKG8sJ3ZhbHVlJyksdC5lZGl0QnV0dG9uVmlldy5iaW5kKCdpc0VuYWJsZWQnKS50byhvKSx0LnVubGlua0J1dHRvblZpZXcuYmluZCgnaXNFbmFibGVkJykudG8obiksdGhpcy5saXN0ZW5Ubyh0LCdlZGl0JywoKT0+e3RoaXMuX2FkZEZvcm1WaWV3KCl9KSx0aGlzLmxpc3RlblRvKHQsJ3VubGluaycsKCk9PntlLmV4ZWN1dGUoJ3VubGluaycpLHRoaXMuX2hpZGVVSSgpfSksdC5rZXlzdHJva2VzLnNldCgnRXNjJywoZSx0KT0+e3RoaXMuX2hpZGVVSSgpLHQoKX0pLHQua2V5c3Ryb2tlcy5zZXQoSV8sKGUsdCk9Pnt0aGlzLl9hZGRGb3JtVmlldygpLHQoKX0pLHR9X2NyZWF0ZUZvcm1WaWV3KCl7Y29uc3QgZT10aGlzLmVkaXRvcix0PW5ldyB5XyhlLmxvY2FsZSksbz1lLmNvbW1hbmRzLmdldCgnbGluaycpO3JldHVybiB0LnVybElucHV0Vmlldy5iaW5kKCd2YWx1ZScpLnRvKG8sJ3ZhbHVlJyksdC51cmxJbnB1dFZpZXcuYmluZCgnaXNSZWFkT25seScpLnRvKG8sJ2lzRW5hYmxlZCcsKGUpPT4hZSksdC5zYXZlQnV0dG9uVmlldy5iaW5kKCdpc0VuYWJsZWQnKS50byhvKSx0aGlzLmxpc3RlblRvKHQsJ3N1Ym1pdCcsKCk9PntlLmV4ZWN1dGUoJ2xpbmsnLHQudXJsSW5wdXRWaWV3LmlucHV0Vmlldy5lbGVtZW50LnZhbHVlKSx0aGlzLl9yZW1vdmVGb3JtVmlldygpfSksdGhpcy5saXN0ZW5Ubyh0LCdjYW5jZWwnLCgpPT57dGhpcy5fcmVtb3ZlRm9ybVZpZXcoKX0pLHQua2V5c3Ryb2tlcy5zZXQoJ0VzYycsKGUsdCk9Pnt0aGlzLl9yZW1vdmVGb3JtVmlldygpLHQoKX0pLHR9X2NyZWF0ZVRvb2xiYXJMaW5rQnV0dG9uKCl7Y29uc3QgZT10aGlzLmVkaXRvcixvPWUuY29tbWFuZHMuZ2V0KCdsaW5rJyksbj1lLnQ7ZS5rZXlzdHJva2VzLnNldChJXywoZSx0KT0+e3QoKSxvLmlzRW5hYmxlZCYmdGhpcy5fc2hvd1VJKCl9KSxlLnVpLmNvbXBvbmVudEZhY3RvcnkuYWRkKCdsaW5rJywoZSk9Pntjb25zdCB0PW5ldyBraChlKTtyZXR1cm4gdC5pc0VuYWJsZWQ9ITAsdC5sYWJlbD1uKCdyJyksdC5pY29uPVJfLmEsdC5rZXlzdHJva2U9SV8sdC50b29sdGlwPSEwLHQuYmluZCgnaXNFbmFibGVkJykudG8obywnaXNFbmFibGVkJyksdGhpcy5saXN0ZW5Ubyh0LCdleGVjdXRlJywoKT0+dGhpcy5fc2hvd1VJKCkpLHR9KX1fZW5hYmxlVXNlckJhbGxvb25JbnRlcmFjdGlvbnMoKXtjb25zdCBlPXRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5kb2N1bWVudDt0aGlzLmxpc3RlblRvKGUsJ2NsaWNrJywoKT0+e2NvbnN0IGU9dGhpcy5fZ2V0U2VsZWN0ZWRMaW5rRWxlbWVudCgpO2UmJnRoaXMuX3Nob3dVSSgpfSksdGhpcy5lZGl0b3Iua2V5c3Ryb2tlcy5zZXQoJ1RhYicsKGUsdCk9Pnt0aGlzLl9hcmVBY3Rpb25zVmlzaWJsZSYmIXRoaXMuYWN0aW9uc1ZpZXcuZm9jdXNUcmFja2VyLmlzRm9jdXNlZCYmKHRoaXMuYWN0aW9uc1ZpZXcuZm9jdXMoKSx0KCkpfSx7cHJpb3JpdHk6J2hpZ2gnfSksdGhpcy5lZGl0b3Iua2V5c3Ryb2tlcy5zZXQoJ0VzYycsKGUsdCk9Pnt0aGlzLl9pc1VJVmlzaWJsZSYmKHRoaXMuX2hpZGVVSSgpLHQoKSl9KSxucih7ZW1pdHRlcjp0aGlzLmZvcm1WaWV3LGFjdGl2YXRvcjooKT0+dGhpcy5faXNVSVZpc2libGUsY29udGV4dEVsZW1lbnRzOlt0aGlzLl9iYWxsb29uLnZpZXcuZWxlbWVudF0sY2FsbGJhY2s6KCk9PnRoaXMuX2hpZGVVSSgpfSl9X2FkZEFjdGlvbnNWaWV3KCl7dGhpcy5fYXJlQWN0aW9uc0luUGFuZWx8fHRoaXMuX2JhbGxvb24uYWRkKHt2aWV3OnRoaXMuYWN0aW9uc1ZpZXcscG9zaXRpb246dGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uRGF0YSgpfSl9X2FkZEZvcm1WaWV3KCl7aWYoIXRoaXMuX2lzRm9ybUluUGFuZWwpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLmNvbW1hbmRzLmdldCgnbGluaycpO3RoaXMuX2JhbGxvb24uYWRkKHt2aWV3OnRoaXMuZm9ybVZpZXcscG9zaXRpb246dGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uRGF0YSgpfSksdGhpcy5mb3JtVmlldy51cmxJbnB1dFZpZXcuc2VsZWN0KCksdGhpcy5mb3JtVmlldy51cmxJbnB1dFZpZXcuaW5wdXRWaWV3LmVsZW1lbnQudmFsdWU9dC52YWx1ZXx8Jyd9fV9yZW1vdmVGb3JtVmlldygpe3RoaXMuX2lzRm9ybUluUGFuZWwmJih0aGlzLl9iYWxsb29uLnJlbW92ZSh0aGlzLmZvcm1WaWV3KSx0aGlzLmVkaXRvci5lZGl0aW5nLnZpZXcuZm9jdXMoKSl9X3Nob3dVSSgpe2NvbnN0IGU9dGhpcy5lZGl0b3IsdD1lLmNvbW1hbmRzLmdldCgnbGluaycpO3QuaXNFbmFibGVkJiYodGhpcy5fZ2V0U2VsZWN0ZWRMaW5rRWxlbWVudCgpP3RoaXMuX2FyZUFjdGlvbnNWaXNpYmxlP3RoaXMuX2FkZEZvcm1WaWV3KCk6dGhpcy5fYWRkQWN0aW9uc1ZpZXcoKToodGhpcy5fYWRkQWN0aW9uc1ZpZXcoKSx0aGlzLl9hZGRGb3JtVmlldygpKSx0aGlzLl9zdGFydFVwZGF0aW5nVUlPblZpZXdSZW5kZXIoKSl9X2hpZGVVSSgpe2lmKHRoaXMuX2lzVUlJblBhbmVsKXtjb25zdCBlPXRoaXMuZWRpdG9yLmVkaXRpbmcudmlldzt0aGlzLnN0b3BMaXN0ZW5pbmcoZSwncmVuZGVyJyksdGhpcy5fcmVtb3ZlRm9ybVZpZXcoKSx0aGlzLl9iYWxsb29uLnJlbW92ZSh0aGlzLmFjdGlvbnNWaWV3KSxlLmZvY3VzKCl9fV9zdGFydFVwZGF0aW5nVUlPblZpZXdSZW5kZXIoKXtmdW5jdGlvbiBlKCl7cmV0dXJuIG4uZG9jdW1lbnQuc2VsZWN0aW9uLmZvY3VzLmdldEFuY2VzdG9ycygpLnJldmVyc2UoKS5maW5kKChlKT0+ZS5pcygnZWxlbWVudCcpKX1jb25zdCB0PXRoaXMuZWRpdG9yLG89dC5lZGl0aW5nLG49by52aWV3O2xldCBpPXRoaXMuX2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKSxyPWUoKTt0aGlzLmxpc3RlblRvKG4sJ3JlbmRlcicsKCk9Pntjb25zdCB0PXRoaXMuX2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKSxvPWUoKTsoIWl8fHQpJiYoaXx8bz09PXIpP3RoaXMuX2JhbGxvb24udXBkYXRlUG9zaXRpb24odGhpcy5fZ2V0QmFsbG9vblBvc2l0aW9uRGF0YSgpKTp0aGlzLl9oaWRlVUkoKSxpPXQscj1vfSl9Z2V0IF9pc0Zvcm1JblBhbmVsKCl7cmV0dXJuIHRoaXMuX2JhbGxvb24uaGFzVmlldyh0aGlzLmZvcm1WaWV3KX1nZXQgX2FyZUFjdGlvbnNJblBhbmVsKCl7cmV0dXJuIHRoaXMuX2JhbGxvb24uaGFzVmlldyh0aGlzLmFjdGlvbnNWaWV3KX1nZXQgX2FyZUFjdGlvbnNWaXNpYmxlKCl7cmV0dXJuIHRoaXMuX2JhbGxvb24udmlzaWJsZVZpZXc9PT10aGlzLmFjdGlvbnNWaWV3fWdldCBfaXNVSUluUGFuZWwoKXtyZXR1cm4gdGhpcy5faXNGb3JtSW5QYW5lbHx8dGhpcy5fYXJlQWN0aW9uc0luUGFuZWx9Z2V0IF9pc1VJVmlzaWJsZSgpe2NvbnN0IGU9dGhpcy5fYmFsbG9vbi52aXNpYmxlVmlldztyZXR1cm4gZT09dGhpcy5mb3JtVmlld3x8dGhpcy5fYXJlQWN0aW9uc1Zpc2libGV9X2dldEJhbGxvb25Qb3NpdGlvbkRhdGEoKXtjb25zdCBlPXRoaXMuZWRpdG9yLmVkaXRpbmcudmlldyx0PWUuZG9jdW1lbnQsbz10aGlzLl9nZXRTZWxlY3RlZExpbmtFbGVtZW50KCksbj1vP2UuZG9tQ29udmVydGVyLm1hcFZpZXdUb0RvbShvKTplLmRvbUNvbnZlcnRlci52aWV3UmFuZ2VUb0RvbSh0LnNlbGVjdGlvbi5nZXRGaXJzdFJhbmdlKCkpO3JldHVybnt0YXJnZXQ6bn19X2dldFNlbGVjdGVkTGlua0VsZW1lbnQoKXtjb25zdCBlPXRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5kb2N1bWVudC5zZWxlY3Rpb247aWYoZS5pc0NvbGxhcHNlZClyZXR1cm4gbWEoZS5nZXRGaXJzdFBvc2l0aW9uKCkpO2Vsc2V7Y29uc3QgdD1lLmdldEZpcnN0UmFuZ2UoKS5nZXRUcmltbWVkKCksbz1tYSh0LnN0YXJ0KSxuPW1hKHQuZW5kKTtyZXR1cm4gbyYmbz09bj9DYy5jcmVhdGVJbihvKS5nZXRUcmltbWVkKCkuaXNFcXVhbCh0KT9vOm51bGw6bnVsbH19fWNsYXNzIEZfIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltrXyxWX119c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0xpbmsnfX1jbGFzcyBOXyBleHRlbmRzIEdme2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoZSksdGhpcy50eXBlPSdidWxsZXRlZCc9PXQ/J2J1bGxldGVkJzonbnVtYmVyZWQnfXJlZnJlc2goKXt0aGlzLnZhbHVlPXRoaXMuX2dldFZhbHVlKCksdGhpcy5pc0VuYWJsZWQ9dGhpcy5fY2hlY2tFbmFibGVkKCl9ZXhlY3V0ZSgpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwsdD1lLmRvY3VtZW50LG89QXJyYXkuZnJvbSh0LnNlbGVjdGlvbi5nZXRTZWxlY3RlZEJsb2NrcygpKS5maWx0ZXIoKHQpPT5nYSh0LGUuc2NoZW1hKSksbj0hMD09PXRoaXMudmFsdWU7ZS5jaGFuZ2UoKGUpPT57aWYobil7bGV0IHQ9b1tvLmxlbmd0aC0xXS5uZXh0U2libGluZyxuPURhLGk9W107Zm9yKDt0JiYnbGlzdEl0ZW0nPT10Lm5hbWUmJjAhPT10LmdldEF0dHJpYnV0ZSgnaW5kZW50Jyk7KXtjb25zdCBlPXQuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKTtlPG4mJihuPWUpO2NvbnN0IG89ZS1uO2kucHVzaCh7ZWxlbWVudDp0LGluZGVudDpvfSksdD10Lm5leHRTaWJsaW5nfWk9aS5yZXZlcnNlKCk7Zm9yKGNvbnN0IHQgb2YgaSllLnNldEF0dHJpYnV0ZSgnaW5kZW50Jyx0LmluZGVudCx0LmVsZW1lbnQpfWlmKCFuKXtsZXQgZT1EYTtmb3IoY29uc3QgdCBvZiBvKXQuaXMoJ2xpc3RJdGVtJykmJnQuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKTxlJiYoZT10LmdldEF0dHJpYnV0ZSgnaW5kZW50JykpO2U9MD09PWU/MTplLHBhKG8sITAsZSkscGEobywhMSxlKX1mb3IoY29uc3QgdCBvZiBvLnJldmVyc2UoKSluJiYnbGlzdEl0ZW0nPT10Lm5hbWU/ZS5yZW5hbWUodCwncGFyYWdyYXBoJyk6bnx8J2xpc3RJdGVtJz09dC5uYW1lP258fCdsaXN0SXRlbSchPXQubmFtZXx8dC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKT09dGhpcy50eXBlfHxlLnNldEF0dHJpYnV0ZSgndHlwZScsdGhpcy50eXBlLHQpOihlLnNldEF0dHJpYnV0ZXMoe3R5cGU6dGhpcy50eXBlLGluZGVudDowfSx0KSxlLnJlbmFtZSh0LCdsaXN0SXRlbScpKX0pfV9nZXRWYWx1ZSgpe2NvbnN0IGU9T2kodGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO3JldHVybiEhZSYmZS5pcygnbGlzdEl0ZW0nKSYmZS5nZXRBdHRyaWJ1dGUoJ3R5cGUnKT09dGhpcy50eXBlfV9jaGVja0VuYWJsZWQoKXtpZih0aGlzLnZhbHVlKXJldHVybiEwO2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLHQ9dGhpcy5lZGl0b3IubW9kZWwuc2NoZW1hLG89T2koZS5nZXRTZWxlY3RlZEJsb2NrcygpKTtyZXR1cm4hIW8mJmdhKG8sdCl9fWNsYXNzIE1fIGV4dGVuZHMgR2Z7Y29uc3RydWN0b3IoZSx0KXtzdXBlcihlKSx0aGlzLl9pbmRlbnRCeT0nZm9yd2FyZCc9PXQ/MTotMX1yZWZyZXNoKCl7dGhpcy5pc0VuYWJsZWQ9dGhpcy5fY2hlY2tFbmFibGVkKCl9ZXhlY3V0ZSgpe2NvbnN0IGU9dGhpcy5lZGl0b3IubW9kZWwsdD1lLmRvY3VtZW50O2xldCBvPUFycmF5LmZyb20odC5zZWxlY3Rpb24uZ2V0U2VsZWN0ZWRCbG9ja3MoKSk7ZS5jaGFuZ2UoKGUpPT57Y29uc3QgdD1vW28ubGVuZ3RoLTFdO2ZvcihsZXQgbj10Lm5leHRTaWJsaW5nO24mJidsaXN0SXRlbSc9PW4ubmFtZSYmbi5nZXRBdHRyaWJ1dGUoJ2luZGVudCcpPnQuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKTspby5wdXNoKG4pLG49bi5uZXh0U2libGluZzswPnRoaXMuX2luZGVudEJ5JiYobz1vLnJldmVyc2UoKSk7Zm9yKGNvbnN0IHQgb2Ygbyl7Y29uc3Qgbz10LmdldEF0dHJpYnV0ZSgnaW5kZW50JykrdGhpcy5faW5kZW50Qnk7MD5vP2UucmVuYW1lKHQsJ3BhcmFncmFwaCcpOmUuc2V0QXR0cmlidXRlKCdpbmRlbnQnLG8sdCl9fSl9X2NoZWNrRW5hYmxlZCgpe2NvbnN0IGU9T2kodGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQuc2VsZWN0aW9uLmdldFNlbGVjdGVkQmxvY2tzKCkpO2lmKCFlfHwhZS5pcygnbGlzdEl0ZW0nKSlyZXR1cm4hMTtpZigwPHRoaXMuX2luZGVudEJ5KXtjb25zdCB0PWUuZ2V0QXR0cmlidXRlKCdpbmRlbnQnKSxvPWUuZ2V0QXR0cmlidXRlKCd0eXBlJyk7Zm9yKGxldCBuPWUucHJldmlvdXNTaWJsaW5nO24mJm4uaXMoJ2xpc3RJdGVtJykmJm4uZ2V0QXR0cmlidXRlKCdpbmRlbnQnKT49dDspe2lmKG4uZ2V0QXR0cmlidXRlKCdpbmRlbnQnKT09dClyZXR1cm4gbi5nZXRBdHRyaWJ1dGUoJ3R5cGUnKT09bztuPW4ucHJldmlvdXNTaWJsaW5nfXJldHVybiExfXJldHVybiEwfX1jbGFzcyBEXyBleHRlbmRzIHFme3N0YXRpYyBnZXQgcmVxdWlyZXMoKXtyZXR1cm5bZ2tdfWluaXQoKXtjb25zdCBlPXRoaXMuZWRpdG9yO2UubW9kZWwuc2NoZW1hLnJlZ2lzdGVyKCdsaXN0SXRlbScse2luaGVyaXRBbGxGcm9tOickYmxvY2snLGFsbG93QXR0cmlidXRlczpbJ3R5cGUnLCdpbmRlbnQnXX0pO2NvbnN0IHQ9ZS5kYXRhLG89ZS5lZGl0aW5nO2UubW9kZWwuZG9jdW1lbnQucmVnaXN0ZXJQb3N0Rml4ZXIoKHQpPT5FYShlLm1vZGVsLHQpKSxvLm1hcHBlci5yZWdpc3RlclZpZXdUb01vZGVsTGVuZ3RoKCdsaScsTWEpLHQubWFwcGVyLnJlZ2lzdGVyVmlld1RvTW9kZWxMZW5ndGgoJ2xpJyxNYSksby5tYXBwZXIub24oJ21vZGVsVG9WaWV3UG9zaXRpb24nLFRhKSxvLm1hcHBlci5vbigndmlld1RvTW9kZWxQb3NpdGlvbicsUGEpLHQubWFwcGVyLm9uKCdtb2RlbFRvVmlld1Bvc2l0aW9uJyxUYSksby5kb3duY2FzdERpc3BhdGNoZXIub24oJ2luc2VydCcsdmEse3ByaW9yaXR5OidoaWdoJ30pLG8uZG93bmNhc3REaXNwYXRjaGVyLm9uKCdpbnNlcnQ6bGlzdEl0ZW0nLGJhKSx0LmRvd25jYXN0RGlzcGF0Y2hlci5vbignaW5zZXJ0Jyx2YSx7cHJpb3JpdHk6J2hpZ2gnfSksdC5kb3duY2FzdERpc3BhdGNoZXIub24oJ2luc2VydDpsaXN0SXRlbScsYmEpLG8uZG93bmNhc3REaXNwYXRjaGVyLm9uKCdhdHRyaWJ1dGU6dHlwZTpsaXN0SXRlbScsX2EpLHQuZG93bmNhc3REaXNwYXRjaGVyLm9uKCdhdHRyaWJ1dGU6dHlwZTpsaXN0SXRlbScsX2EpLG8uZG93bmNhc3REaXNwYXRjaGVyLm9uKCdhdHRyaWJ1dGU6aW5kZW50Omxpc3RJdGVtJyx3YSksdC5kb3duY2FzdERpc3BhdGNoZXIub24oJ2F0dHJpYnV0ZTppbmRlbnQ6bGlzdEl0ZW0nLHdhKSxvLmRvd25jYXN0RGlzcGF0Y2hlci5vbigncmVtb3ZlOmxpc3RJdGVtJyxrYSksby5kb3duY2FzdERpc3BhdGNoZXIub24oJ3JlbW92ZScseWEse3ByaW9yaXR5Oidsb3cnfSksdC5kb3duY2FzdERpc3BhdGNoZXIub24oJ3JlbW92ZTpsaXN0SXRlbScsa2EpLHQuZG93bmNhc3REaXNwYXRjaGVyLm9uKCdyZW1vdmUnLHlhLHtwcmlvcml0eTonbG93J30pLHQudXBjYXN0RGlzcGF0Y2hlci5vbignZWxlbWVudDp1bCcsQ2Ese3ByaW9yaXR5OidoaWdoJ30pLHQudXBjYXN0RGlzcGF0Y2hlci5vbignZWxlbWVudDpvbCcsQ2Ese3ByaW9yaXR5OidoaWdoJ30pLHQudXBjYXN0RGlzcGF0Y2hlci5vbignZWxlbWVudDpsaScsQWEse3ByaW9yaXR5OidoaWdoJ30pLHQudXBjYXN0RGlzcGF0Y2hlci5vbignZWxlbWVudDpsaScseGEpLGUubW9kZWwub24oJ2luc2VydENvbnRlbnQnLFNhLHtwcmlvcml0eTonaGlnaCd9KSxlLmNvbW1hbmRzLmFkZCgnbnVtYmVyZWRMaXN0JyxuZXcgTl8oZSwnbnVtYmVyZWQnKSksZS5jb21tYW5kcy5hZGQoJ2J1bGxldGVkTGlzdCcsbmV3IE5fKGUsJ2J1bGxldGVkJykpLGUuY29tbWFuZHMuYWRkKCdpbmRlbnRMaXN0JyxuZXcgTV8oZSwnZm9yd2FyZCcpKSxlLmNvbW1hbmRzLmFkZCgnb3V0ZGVudExpc3QnLG5ldyBNXyhlLCdiYWNrd2FyZCcpKTtjb25zdCBuPXRoaXMuZWRpdG9yLmVkaXRpbmcudmlldy5kb2N1bWVudDt0aGlzLmxpc3RlblRvKG4sJ2VudGVyJywoZSx0KT0+e2NvbnN0IG89dGhpcy5lZGl0b3IubW9kZWwuZG9jdW1lbnQsbj1vLnNlbGVjdGlvbi5nZXRMYXN0UG9zaXRpb24oKS5wYXJlbnQ7by5zZWxlY3Rpb24uaXNDb2xsYXBzZWQmJidsaXN0SXRlbSc9PW4ubmFtZSYmbi5pc0VtcHR5JiYodGhpcy5lZGl0b3IuZXhlY3V0ZSgnb3V0ZGVudExpc3QnKSx0LnByZXZlbnREZWZhdWx0KCksZS5zdG9wKCkpfSksdGhpcy5saXN0ZW5UbyhuLCdkZWxldGUnLChlLHQpPT57aWYoJ2JhY2t3YXJkJz09PXQuZGlyZWN0aW9uKXtjb25zdCBvPXRoaXMuZWRpdG9yLm1vZGVsLmRvY3VtZW50LnNlbGVjdGlvbjtpZihvLmlzQ29sbGFwc2VkKXtjb25zdCBuPW8uZ2V0Rmlyc3RQb3NpdGlvbigpO2lmKG4uaXNBdFN0YXJ0KXtjb25zdCBvPW4ucGFyZW50O2lmKCdsaXN0SXRlbSc9PT1vLm5hbWUpe2NvbnN0IG49by5wcmV2aW91c1NpYmxpbmcmJidsaXN0SXRlbSc9PT1vLnByZXZpb3VzU2libGluZy5uYW1lO258fCh0aGlzLmVkaXRvci5leGVjdXRlKCdvdXRkZW50TGlzdCcpLHQucHJldmVudERlZmF1bHQoKSxlLnN0b3AoKSl9fX19fSx7cHJpb3JpdHk6J2hpZ2gnfSk7Y29uc3QgaT0oZSk9Pih0LG8pPT57Y29uc3Qgbj10aGlzLmVkaXRvci5jb21tYW5kcy5nZXQoZSk7bi5pc0VuYWJsZWQmJih0aGlzLmVkaXRvci5leGVjdXRlKGUpLG8oKSl9O3RoaXMuZWRpdG9yLmtleXN0cm9rZXMuc2V0KCdUYWInLGkoJ2luZGVudExpc3QnKSksdGhpcy5lZGl0b3Iua2V5c3Ryb2tlcy5zZXQoJ1NoaWZ0K1RhYicsaSgnb3V0ZGVudExpc3QnKSl9fXZhciBCXz1vKDgxKSxMXz1vLm4oQl8pLHpfPW8oODIpLGpfPW8ubih6Xyk7Y2xhc3MgcV8gZXh0ZW5kcyBxZntpbml0KCl7Y29uc3QgZT10aGlzLmVkaXRvci50O3RoaXMuX2FkZEJ1dHRvbignbnVtYmVyZWRMaXN0JyxlKCdwJyksTF8uYSksdGhpcy5fYWRkQnV0dG9uKCdidWxsZXRlZExpc3QnLGUoJ3EnKSxqXy5hKX1fYWRkQnV0dG9uKGUsdCxvKXtjb25zdCBuPXRoaXMuZWRpdG9yO24udWkuY29tcG9uZW50RmFjdG9yeS5hZGQoZSwoaSk9Pntjb25zdCByPW4uY29tbWFuZHMuZ2V0KGUpLGE9bmV3IGtoKGkpO3JldHVybiBhLnNldCh7bGFiZWw6dCxpY29uOm8sdG9vbHRpcDohMH0pLGEuYmluZCgnaXNPbicsJ2lzRW5hYmxlZCcpLnRvKHIsJ3ZhbHVlJywnaXNFbmFibGVkJyksdGhpcy5saXN0ZW5UbyhhLCdleGVjdXRlJywoKT0+bi5leGVjdXRlKGUpKSxhfSl9fWNsYXNzIFdfIGV4dGVuZHMgcWZ7c3RhdGljIGdldCByZXF1aXJlcygpe3JldHVybltEXyxxX119c3RhdGljIGdldCBwbHVnaW5OYW1lKCl7cmV0dXJuJ0xpc3QnfX1jbGFzcyBVXyBleHRlbmRzIGpme310WydkZWZhdWx0J109VV8sVV8uYnVpbGQ9e3BsdWdpbnM6W0FoLEloLE1oLFVoLFloLHJiLG1rLERrLFFiLEhrLHNfLGxfLHVrLEZfLFdfLGdrXSxjb25maWc6e3Rvb2xiYXI6e2l0ZW1zOlsnaGVhZGluZycsJ3wnLCdib2xkJywnaXRhbGljJywnbGluaycsJ2J1bGxldGVkTGlzdCcsJ251bWJlcmVkTGlzdCcsJ2ltYWdlVXBsb2FkJywnYmxvY2tRdW90ZScsJ3VuZG8nLCdyZWRvJ119LGltYWdlOnt0b29sYmFyOlsnaW1hZ2VTdHlsZTpmdWxsJywnaW1hZ2VTdHlsZTpzaWRlJywnfCcsJ2ltYWdlVGV4dEFsdGVybmF0aXZlJ119LGxhbmd1YWdlOidlbid9fX0sZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7dD10fHxGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpfHwoMSxldmFsKSgndGhpcycpfWNhdGNoKG8peydvYmplY3QnPT10eXBlb2Ygd2luZG93JiYodD13aW5kb3cpfWUuZXhwb3J0cz10fSxmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt0LmE9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuT2JqZWN0PT09T2JqZWN0P2U6bnVsbH19LGZ1bmN0aW9uKGUsdCxvKXsndXNlIHN0cmljdCc7KGZ1bmN0aW9uKGUpe3ZhciBuPW8oMTApLGk9bygxKSxyPXtmdW5jdGlvbjohMCxvYmplY3Q6ITB9LGE9clt0eXBlb2YgZXhwb3J0c10mJmV4cG9ydHMmJiFleHBvcnRzLm5vZGVUeXBlP2V4cG9ydHM6dm9pZCAwLHM9clt0eXBlb2YgZV0mJmUmJiFlLm5vZGVUeXBlP2U6dm9pZCAwLGw9cyYmcy5leHBvcnRzPT09YT9hOnZvaWQgMCxkPWw/aS5hLkJ1ZmZlcjp2b2lkIDAsYz1kP2Z1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgZH06T2JqZWN0KG4uYSkoITEpO3QuYT1jfSkuY2FsbCh0LG8oMikoZSkpfSxmdW5jdGlvbihlLHQpeyd1c2Ugc3RyaWN0Jzt0LmE9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGV9fX0sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oMTIpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2staGlkZGVue2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmNrLmNrLXJlc2V0LC5jay5jay1yZXNldF9hbGwsLmNrLmNrLXJlc2V0X2FsbCAqe2JveC1zaXppbmc6Ym9yZGVyLWJveDt3aWR0aDphdXRvO2hlaWdodDphdXRvO3Bvc2l0aW9uOnN0YXRpY306cm9vdHstLWNrLXotZGVmYXVsdDoxOy0tY2stei1tb2RhbDo5OTk7LS1jay1jb2xvci1iYXNlLWZvcmVncm91bmQ6I2ZhZmFmYTstLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZDojZmZmOy0tY2stY29sb3ItYmFzZS1ib3JkZXI6I2M0YzRjNDstLWNrLWNvbG9yLWJhc2UtYWN0aW9uOiM2MWIwNDU7LS1jay1jb2xvci1iYXNlLWZvY3VzOiM2Y2I1Zjk7LS1jay1jb2xvci1iYXNlLXRleHQ6IzMzMzstLWNrLWNvbG9yLWJhc2UtYWN0aXZlOiMxOThjZjA7LS1jay1jb2xvci1iYXNlLWFjdGl2ZS1mb2N1czojMGU3ZmUxOy0tY2stY29sb3ItZm9jdXMtYm9yZGVyOiM0N2E0ZjU7LS1jay1jb2xvci1mb2N1cy1zaGFkb3c6Izc3YmFmODstLWNrLWNvbG9yLXRleHQ6dmFyKC0tY2stY29sb3ItYmFzZS10ZXh0KTstLWNrLWNvbG9yLXNoYWRvdy1kcm9wOnJnYmEoMCwwLDAsLjE1KTstLWNrLWNvbG9yLXNoYWRvdy1pbm5lcjpyZ2JhKDAsMCwwLC4xKTstLWNrLWNvbG9yLWJ1dHRvbi1kZWZhdWx0LWJhY2tncm91bmQ6dHJhbnNwYXJlbnQ7LS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1mb2N1cy1iYWNrZ3JvdW5kOiNlNmU2ZTY7LS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1hY3RpdmUtYmFja2dyb3VuZDojZDlkOWQ5Oy0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtYWN0aXZlLXNoYWRvdzojYmZiZmJmOy0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtZGlzYWJsZWQtYmFja2dyb3VuZDp0cmFuc3BhcmVudDstLWNrLWNvbG9yLWJ1dHRvbi1vbi1iYWNrZ3JvdW5kOiNkZWRlZGU7LS1jay1jb2xvci1idXR0b24tb24tZm9jdXMtYmFja2dyb3VuZDojYzRjNGM0Oy0tY2stY29sb3ItYnV0dG9uLW9uLWFjdGl2ZS1iYWNrZ3JvdW5kOiNiYWJhYmE7LS1jay1jb2xvci1idXR0b24tb24tYWN0aXZlLXNoYWRvdzojYTFhMWExOy0tY2stY29sb3ItYnV0dG9uLW9uLWRpc2FibGVkLWJhY2tncm91bmQ6I2RlZGVkZTstLWNrLWNvbG9yLWJ1dHRvbi1hY3Rpb24tYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWFjdGlvbik7LS1jay1jb2xvci1idXR0b24tYWN0aW9uLWZvY3VzLWJhY2tncm91bmQ6IzU3OWUzZDstLWNrLWNvbG9yLWJ1dHRvbi1hY3Rpb24tYWN0aXZlLWJhY2tncm91bmQ6IzUzOTczYjstLWNrLWNvbG9yLWJ1dHRvbi1hY3Rpb24tYWN0aXZlLXNoYWRvdzojNDk4NDMzOy0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1kaXNhYmxlZC1iYWNrZ3JvdW5kOiM3ZWMzNjU7LS1jay1jb2xvci1idXR0b24tYWN0aW9uLXRleHQ6dmFyKC0tY2stY29sb3ItYmFzZS1iYWNrZ3JvdW5kKTstLWNrLWNvbG9yLWJ1dHRvbi1zYXZlOiMwMDhhMDA7LS1jay1jb2xvci1idXR0b24tY2FuY2VsOiNkYjM3MDA7LS1jay1jb2xvci1kcm9wZG93bi1wYW5lbC1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1kcm9wZG93bi1wYW5lbC1ib3JkZXI6dmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpOy0tY2stY29sb3ItaW5wdXQtYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpOy0tY2stY29sb3ItaW5wdXQtYm9yZGVyOiNjN2M3Yzc7LS1jay1jb2xvci1pbnB1dC10ZXh0OnZhcigtLWNrLWNvbG9yLWJhc2UtdGV4dCk7LS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC1iYWNrZ3JvdW5kOiNmMmYyZjI7LS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC1ib3JkZXI6I2M3YzdjNzstLWNrLWNvbG9yLWlucHV0LWRpc2FibGVkLXRleHQ6IzVjNWM1YzstLWNrLWNvbG9yLWxpc3QtYmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpOy0tY2stY29sb3ItbGlzdC1pdGVtLWJhY2tncm91bmQtaG92ZXI6dmFyKC0tY2stY29sb3ItYmFzZS1mb3JlZ3JvdW5kKTstLWNrLWNvbG9yLWxpc3QtaXRlbS1iYWNrZ3JvdW5kLWFjdGl2ZTp2YXIoLS1jay1jb2xvci1iYXNlLWFjdGl2ZSk7LS1jay1jb2xvci1saXN0LWl0ZW0tYmFja2dyb3VuZC1hY3RpdmUtZm9jdXM6dmFyKC0tY2stY29sb3ItYmFzZS1hY3RpdmUtZm9jdXMpOy0tY2stY29sb3ItbGlzdC1pdGVtLXRleHQtYWN0aXZlOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1wYW5lbC1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7LS1jay1jb2xvci1wYW5lbC1ib3JkZXI6dmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpOy0tY2stY29sb3ItdG9vbGJhci1iYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtZm9yZWdyb3VuZCk7LS1jay1jb2xvci10b29sYmFyLWJvcmRlcjp2YXIoLS1jay1jb2xvci1iYXNlLWJvcmRlcik7LS1jay1jb2xvci10b29sdGlwLWJhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYmFzZS10ZXh0KTstLWNrLWNvbG9yLXRvb2x0aXAtdGV4dDp2YXIoLS1jay1jb2xvci1iYXNlLWJhY2tncm91bmQpOy0tY2stY29sb3ItZW5naW5lLXBsYWNlaG9sZGVyLXRleHQ6I2MyYzJjMjstLWNrLWNvbG9yLXVwbG9hZC1iYXItYmFja2dyb3VuZDojNmNiNWY5Oy0tY2stY29sb3ItdXBsb2FkLWluZmluaXRlLWJhY2tncm91bmQ6cmdiYSgwLDAsMCwuMSk7LS1jay1jb2xvci1saW5rLWRlZmF1bHQ6IzAwMDBmMDstLWNrLWNvbG9yLWxpbmstc2VsZWN0ZWQtYmFja2dyb3VuZDojZWJmOGZmOy0tY2stZGlzYWJsZWQtb3BhY2l0eTouNTstLWNrLWZvY3VzLW91dGVyLXNoYWRvdzowIDAgM3B4IHZhcigtLWNrLWNvbG9yLWZvY3VzLXNoYWRvdyk7LS1jay1mb2N1cy1yaW5nOjFweCBzb2xpZCB2YXIoLS1jay1jb2xvci1mb2N1cy1ib3JkZXIpOy0tY2stZm9udC1zaXplLWJhc2U6MTNweDstLWNrLWxpbmUtaGVpZ2h0LWJhc2U6MS44NDYxNTstLWNrLWZvbnQtZmFjZTpIZWx2ZXRpY2EsQXJpYWwsVGFob21hLFZlcmRhbmEsU2Fucy1TZXJpZjstLWNrLWZvbnQtc2l6ZS10aW55OjAuN2VtOy0tY2stZm9udC1zaXplLXNtYWxsOjAuNzVlbTstLWNrLWZvbnQtc2l6ZS1ub3JtYWw6MWVtOy0tY2stZm9udC1zaXplLWJpZzoxLjRlbTstLWNrLWZvbnQtc2l6ZS1sYXJnZToxLjhlbTstLWNrLXVpLWNvbXBvbmVudC1taW4taGVpZ2h0OjIuM2VtfS5jay5jay1yZXNldCwuY2suY2stcmVzZXRfYWxsLC5jay5jay1yZXNldF9hbGwgKnttYXJnaW46MDtwYWRkaW5nOjA7Ym9yZGVyOjA7YmFja2dyb3VuZDp0cmFuc3BhcmVudDt0ZXh0LWRlY29yYXRpb246bm9uZTt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7dHJhbnNpdGlvbjpub25lO3dvcmQtd3JhcDpicmVhay13b3JkfS5jay5jay1yZXNldF9hbGwsLmNrLmNrLXJlc2V0X2FsbCAqe2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTtmb250Om5vcm1hbCBub3JtYWwgbm9ybWFsIHZhcigtLWNrLWZvbnQtc2l6ZS1iYXNlKS92YXIoLS1jay1saW5lLWhlaWdodC1iYXNlKSB2YXIoLS1jay1mb250LWZhY2UpO2NvbG9yOnZhcigtLWNrLWNvbG9yLXRleHQpO3RleHQtYWxpZ246bGVmdDt3aGl0ZS1zcGFjZTpub3dyYXA7Y3Vyc29yOmF1dG87ZmxvYXQ6bm9uZX0uY2suY2stcmVzZXRfYWxsIC5jay1ydGwgKnt0ZXh0LWFsaWduOnJpZ2h0fS5jay5jay1yZXNldF9hbGwgaWZyYW1le3ZlcnRpY2FsLWFsaWduOmluaGVyaXR9LmNrLmNrLXJlc2V0X2FsbCB0ZXh0YXJlYXt3aGl0ZS1zcGFjZTpwcmUtd3JhcH0uY2suY2stcmVzZXRfYWxsIGlucHV0W3R5cGU9cGFzc3dvcmRdLC5jay5jay1yZXNldF9hbGwgaW5wdXRbdHlwZT10ZXh0XSwuY2suY2stcmVzZXRfYWxsIHRleHRhcmVhe2N1cnNvcjp0ZXh0fS5jay5jay1yZXNldF9hbGwgaW5wdXRbdHlwZT1wYXNzd29yZF1bZGlzYWJsZWRdLC5jay5jay1yZXNldF9hbGwgaW5wdXRbdHlwZT10ZXh0XVtkaXNhYmxlZF0sLmNrLmNrLXJlc2V0X2FsbCB0ZXh0YXJlYVtkaXNhYmxlZF17Y3Vyc29yOmRlZmF1bHR9LmNrLmNrLXJlc2V0X2FsbCBmaWVsZHNldHtwYWRkaW5nOjEwcHg7Ym9yZGVyOjJweCBncm9vdmUgI2RmZGVlM30uY2suY2stcmVzZXRfYWxsIGJ1dHRvbjo6LW1vei1mb2N1cy1pbm5lcntwYWRkaW5nOjA7Ym9yZGVyOjB9OnJvb3R7LS1jay1ib3JkZXItcmFkaXVzOjJweDstLWNrLWlubmVyLXNoYWRvdzoycHggMnB4IDNweCB2YXIoLS1jay1jb2xvci1zaGFkb3ctaW5uZXIpIGluc2V0Oy0tY2stZHJvcC1zaGFkb3c6MCAxcHggMnB4IDFweCB2YXIoLS1jay1jb2xvci1zaGFkb3ctZHJvcCk7LS1jay1zcGFjaW5nLXVuaXQ6MC42ZW07LS1jay1zcGFjaW5nLWxhcmdlOmNhbGModmFyKC0tY2stc3BhY2luZy11bml0KSAqIDEuNSk7LS1jay1zcGFjaW5nLXN0YW5kYXJkOnZhcigtLWNrLXNwYWNpbmctdW5pdCk7LS1jay1zcGFjaW5nLW1lZGl1bTpjYWxjKHZhcigtLWNrLXNwYWNpbmctdW5pdCkgKiAwLjgpOy0tY2stc3BhY2luZy1zbWFsbDpjYWxjKHZhcigtLWNrLXNwYWNpbmctdW5pdCkgKiAwLjUpOy0tY2stc3BhY2luZy10aW55OmNhbGModmFyKC0tY2stc3BhY2luZy11bml0KSAqIDAuMyk7LS1jay1zcGFjaW5nLWV4dHJhLXRpbnk6Y2FsYyh2YXIoLS1jay1zcGFjaW5nLXVuaXQpICogMC4xNil9J30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PSd1bmRlZmluZWQnIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubG9jYXRpb247aWYoIXQpdGhyb3cgbmV3IEVycm9yKCdmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvbicpO2lmKCFlfHwnc3RyaW5nJyE9dHlwZW9mIGUpcmV0dXJuIGU7dmFyIG89dC5wcm90b2NvbCsnLy8nK3QuaG9zdCxuPW8rdC5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sJy8nKSxpPWUucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksZnVuY3Rpb24oZSx0KXt2YXIgaT10LnRyaW0oKS5yZXBsYWNlKC9eXCIoLiopXCIkLyxmdW5jdGlvbihlLHQpe3JldHVybiB0fSkucmVwbGFjZSgvXicoLiopJyQvLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9KTtpZigvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KGkpKXJldHVybiBlO3ZhciByO3JldHVybiByPTA9PT1pLmluZGV4T2YoJy8vJyk/aTowPT09aS5pbmRleE9mKCcvJyk/bytpOm4raS5yZXBsYWNlKC9eXFwuXFwvLywnJyksJ3VybCgnK0pTT04uc3RyaW5naWZ5KHIpKycpJ30pO3JldHVybiBpfX0sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oMTUpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKXtib3JkZXItcmFkaXVzOjB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKSwuY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKS5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX0uY2suY2stZWRpdG9yX19lZGl0YWJsZTpub3QoLmNrLWVkaXRvcl9fbmVzdGVkLWVkaXRhYmxlKS5jay1mb2N1c2Vke291dGxpbmU6bm9uZTtib3JkZXI6dmFyKC0tY2stZm9jdXMtcmluZyk7Ym94LXNoYWRvdzp2YXIoLS1jay1pbm5lci1zaGFkb3cpLDAgMH0uY2suY2stZWRpdG9yX19lZGl0YWJsZV9pbmxpbmV7b3ZlcmZsb3c6YXV0bztwYWRkaW5nOjAgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudH0uY2suY2stZWRpdG9yX19lZGl0YWJsZV9pbmxpbmU+OmZpcnN0LWNoaWxke21hcmdpbi10b3A6dmFyKC0tY2stc3BhY2luZy1sYXJnZSl9LmNrLmNrLWVkaXRvcl9fZWRpdGFibGVfaW5saW5lPjpsYXN0LWNoaWxke21hcmdpbi1ib3R0b206dmFyKC0tY2stc3BhY2luZy1sYXJnZSl9LmNrLmNrLXRvb2xiYXItY29udGFpbmVyW2NsYXNzKj1hcnJvd19uXTphZnRlcntib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWNrLWNvbG9yLWJhc2UtZm9yZWdyb3VuZCl9LmNrLmNrLXRvb2xiYXItY29udGFpbmVyW2NsYXNzKj1hcnJvd19zXTphZnRlcntib3JkZXItdG9wLWNvbG9yOnZhcigtLWNrLWNvbG9yLWJhc2UtZm9yZWdyb3VuZCl9J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oMTcpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stbGFiZWx7ZGlzcGxheTpibG9ja30uY2suY2stdm9pY2UtbGFiZWx7ZGlzcGxheTpub25lfS5jay5jay1sYWJlbHtmb250LXdlaWdodDo3MDB9J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oMTkpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stc3RpY2t5LXBhbmVsIC5jay1zdGlja3ktcGFuZWxfX2NvbnRlbnRfc3RpY2t5e3otaW5kZXg6dmFyKC0tY2stei1tb2RhbCk7cG9zaXRpb246Zml4ZWQ7dG9wOjB9LmNrLmNrLXN0aWNreS1wYW5lbCAuY2stc3RpY2t5LXBhbmVsX19jb250ZW50X3N0aWNreV9ib3R0b20tbGltaXR7dG9wOmF1dG87cG9zaXRpb246YWJzb2x1dGV9LmNrLmNrLXN0aWNreS1wYW5lbCAuY2stc3RpY2t5LXBhbmVsX19jb250ZW50X3N0aWNreXtib3gtc2hhZG93OnZhcigtLWNrLWRyb3Atc2hhZG93KSwwIDA7Ym9yZGVyLXdpZHRoOjAgMXB4IDFweDtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MH0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49bygyMSk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay10b29sYmFyey1tb3otdXNlci1zZWxlY3Q6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtkaXNwbGF5OmZsZXg7ZmxleC1mbG93OnJvdyB3cmFwO2FsaWduLWl0ZW1zOmNlbnRlcn0uY2suY2stdG9vbGJhci5jay10b29sYmFyX3ZlcnRpY2Fse2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uY2suY2stdG9vbGJhci5jay10b29sYmFyX2Zsb2F0aW5ne2ZsZXgtd3JhcDpub3dyYXB9LmNrLmNrLXRvb2xiYXJfX3NlcGFyYXRvcntkaXNwbGF5OmlubGluZS1ibG9ja30uY2suY2stdG9vbGJhcl9fbmV3bGluZXtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCV9LmNrLmNrLXRvb2xiYXJ7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLXRvb2xiYXIsLmNrLmNrLXRvb2xiYXIuY2stcm91bmRlZC1jb3JuZXJze2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyl9LmNrLmNrLXRvb2xiYXJ7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci10b29sYmFyLWJhY2tncm91bmQpO3BhZGRpbmc6MCB2YXIoLS1jay1zcGFjaW5nLXNtYWxsKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXRvb2xiYXItYm9yZGVyKX0uY2suY2stdG9vbGJhcj4qe21hcmdpbi1yaWdodDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKTttYXJnaW4tdG9wOnZhcigtLWNrLXNwYWNpbmctc21hbGwpO21hcmdpbi1ib3R0b206dmFyKC0tY2stc3BhY2luZy1zbWFsbCl9LmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl92ZXJ0aWNhbHtwYWRkaW5nOjB9LmNrLmNrLXRvb2xiYXIuY2stdG9vbGJhcl92ZXJ0aWNhbD4qe3dpZHRoOjEwMCU7bWFyZ2luOjA7Ym9yZGVyLXJhZGl1czowO2JvcmRlcjowfS5jay5jay10b29sYmFyPjpsYXN0LWNoaWxke21hcmdpbi1yaWdodDowfS5jay10b29sYmFyLWNvbnRhaW5lciAuY2suY2stdG9vbGJhcntib3JkZXI6MH0uY2suY2stdG9vbGJhcl9fc2VwYXJhdG9ye2FsaWduLXNlbGY6c3RyZXRjaDt3aWR0aDoxcHg7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MDtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLXRvb2xiYXItYm9yZGVyKX0uY2suY2stdG9vbGJhcl9fbmV3bGluZXttYXJnaW46MH0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49bygyMyk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay1lZGl0b3J7cG9zaXRpb246cmVsYXRpdmV9LmNrLmNrLWVkaXRvciAuY2stZWRpdG9yX190b3AgLmNrLXN0aWNreS1wYW5lbCAuY2stdG9vbGJhcnt6LWluZGV4OnZhcigtLWNrLXotbW9kYWwpfS5jay5jay1lZGl0b3JfX3RvcCAuY2stc3RpY2t5LXBhbmVsIC5jay10b29sYmFye2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1lZGl0b3JfX3RvcCAuY2stc3RpY2t5LXBhbmVsIC5jay10b29sYmFyLC5jay5jay1lZGl0b3JfX3RvcCAuY2stc3RpY2t5LXBhbmVsIC5jay10b29sYmFyLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpO2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MDtib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czowfS5jay5jay1lZGl0b3JfX3RvcCAuY2stc3RpY2t5LXBhbmVsIC5jay10b29sYmFye2JvcmRlci1ib3R0b20td2lkdGg6MH0uY2suY2stZWRpdG9yX190b3AgLmNrLXN0aWNreS1wYW5lbCAuY2stc3RpY2t5LXBhbmVsX19jb250ZW50X3N0aWNreSAuY2stdG9vbGJhcntib3JkZXItYm90dG9tLXdpZHRoOjFweDtib3JkZXItcmFkaXVzOjB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stZWRpdG9yX190b3AgLmNrLXN0aWNreS1wYW5lbCAuY2stc3RpY2t5LXBhbmVsX19jb250ZW50X3N0aWNreSAuY2stdG9vbGJhciwuY2suY2stZWRpdG9yX190b3AgLmNrLXN0aWNreS1wYW5lbCAuY2stc3RpY2t5LXBhbmVsX19jb250ZW50X3N0aWNreSAuY2stdG9vbGJhci5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKTtib3JkZXItcmFkaXVzOjB9LmNrLmNrLWVkaXRvcl9fbWFpbj4uY2stZWRpdG9yX19lZGl0YWJsZXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJhc2UtYmFja2dyb3VuZCk7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWVkaXRvcl9fbWFpbj4uY2stZWRpdG9yX19lZGl0YWJsZSwuY2suY2stZWRpdG9yX19tYWluPi5jay1lZGl0b3JfX2VkaXRhYmxlLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpO2JvcmRlci10b3AtbGVmdC1yYWRpdXM6MDtib3JkZXItdG9wLXJpZ2h0LXJhZGl1czowfS5jay5jay1lZGl0b3JfX21haW4+LmNrLWVkaXRvcl9fZWRpdGFibGU6bm90KC5jay1mb2N1c2VkKXtib3JkZXItY29sb3I6dmFyKC0tY2stY29sb3ItYmFzZS1ib3JkZXIpfSd9LGZ1bmN0aW9uKGUsdCxvKXt2YXIgbj1vKDI1KTsnc3RyaW5nJz09dHlwZW9mIG4mJihuPVtbZS5pLG4sJyddXSk7dmFyIGk9e3NpbmdsZXRvbjohMCxobXI6ITB9LHI7aS50cmFuc2Zvcm09cixpLmluc2VydEludG89dm9pZCAwO28oMCkobixpKTtuLmxvY2FscyYmKGUuZXhwb3J0cz1uLmxvY2FscyksITF9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nLmNrLmNrLWljb257dmVydGljYWwtYWxpZ246bWlkZGxlfTpyb290ey0tY2staWNvbi1zaXplOmNhbGModmFyKC0tY2stbGluZS1oZWlnaHQtYmFzZSkgKiB2YXIoLS1jay1mb250LXNpemUtbm9ybWFsKSl9LmNrLmNrLWljb257d2lkdGg6dmFyKC0tY2staWNvbi1zaXplKTtoZWlnaHQ6dmFyKC0tY2staWNvbi1zaXplKTtmb250LXNpemU6LjgzMzMzNTA2OTRlbTt3aWxsLWNoYW5nZTp0cmFuc2Zvcm19LmNrLmNrLWljb24sLmNrLmNrLWljb24gKntjb2xvcjppbmhlcml0O2N1cnNvcjppbmhlcml0fS5jay5jay1pY29uICp7ZmlsbDpjdXJyZW50Q29sb3J9J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oMjcpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stdG9vbHRpcCwuY2suY2stdG9vbHRpcCAuY2stdG9vbHRpcF9fdGV4dDphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtwb2ludGVyLWV2ZW50czpub25lOy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW59LmNrLXRvb2x0aXB7dmlzaWJpbGl0eTpoaWRkZW47b3BhY2l0eTowO2Rpc3BsYXk6bm9uZTt6LWluZGV4OnZhcigtLWNrLXotbW9kYWwpfS5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0e2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0OmFmdGVye2NvbnRlbnQ6XCJcIjt3aWR0aDowO2hlaWdodDowfTpyb290ey0tY2stdG9vbHRpcC1hcnJvdy1zaXplOjVweH0uY2suY2stdG9vbHRpcHtsZWZ0OjUwJX0uY2suY2stdG9vbHRpcC5jay10b29sdGlwX3N7Ym90dG9tOmNhbGMoLTEgKiB2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAlKX0uY2suY2stdG9vbHRpcC5jay10b29sdGlwX3MgLmNrLXRvb2x0aXBfX3RleHQ6YWZ0ZXJ7dG9wOmNhbGMoLTEgKiB2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpKTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKTtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdmFyKC0tY2stY29sb3ItdG9vbHRpcC1iYWNrZ3JvdW5kKTtib3JkZXItd2lkdGg6MCB2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpIHZhcigtLWNrLXRvb2x0aXAtYXJyb3ctc2l6ZSl9LmNrLmNrLXRvb2x0aXAuY2stdG9vbHRpcF9ue3RvcDpjYWxjKC0xICogdmFyKC0tY2stdG9vbHRpcC1hcnJvdy1zaXplKSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTEwMCUpfS5jay5jay10b29sdGlwLmNrLXRvb2x0aXBfbiAuY2stdG9vbHRpcF9fdGV4dDphZnRlcntib3R0b206Y2FsYygtMSAqIHZhcigtLWNrLXRvb2x0aXAtYXJyb3ctc2l6ZSkpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKC01MCUpO2JvcmRlci1jb2xvcjp2YXIoLS1jay1jb2xvci10b29sdGlwLWJhY2tncm91bmQpIHRyYW5zcGFyZW50IHRyYW5zcGFyZW50O2JvcmRlci13aWR0aDp2YXIoLS1jay10b29sdGlwLWFycm93LXNpemUpIHZhcigtLWNrLXRvb2x0aXAtYXJyb3ctc2l6ZSkgMH0uY2suY2stdG9vbHRpcCAuY2stdG9vbHRpcF9fdGV4dHtib3JkZXItcmFkaXVzOjB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stdG9vbHRpcCAuY2stdG9vbHRpcF9fdGV4dCwuY2suY2stdG9vbHRpcCAuY2stdG9vbHRpcF9fdGV4dC5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKX0uY2suY2stdG9vbHRpcCAuY2stdG9vbHRpcF9fdGV4dHtmb250LXNpemU6LjllbTtsaW5lLWhlaWdodDoxLjU7Y29sb3I6dmFyKC0tY2stY29sb3ItdG9vbHRpcC10ZXh0KTtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc21hbGwpIHZhcigtLWNrLXNwYWNpbmctbWVkaXVtKTtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLXRvb2x0aXAtYmFja2dyb3VuZCk7cG9zaXRpb246cmVsYXRpdmU7bGVmdDotNTAlfS5jay5jay10b29sdGlwIC5jay10b29sdGlwX190ZXh0OmFmdGVye2JvcmRlci1zdHlsZTpzb2xpZDtsZWZ0OjUwJX0uY2suY2stdG9vbHRpcCwuY2suY2stdG9vbHRpcCAuY2stdG9vbHRpcF9fdGV4dDphZnRlcnt0cmFuc2l0aW9uOm9wYWNpdHkgLjJzIGVhc2UtaW4tb3V0IC4yc30nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49bygyOSk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay1idXR0b24sYS5jay5jay1idXR0b257LW1vei11c2VyLXNlbGVjdDpub25lOy13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5jay5jay1idXR0b24gLmNrLXRvb2x0aXAsYS5jay5jay1idXR0b24gLmNrLXRvb2x0aXB7ZGlzcGxheTpibG9ja30uY2suY2stYnV0dG9uLGEuY2suY2stYnV0dG9ue3Bvc2l0aW9uOnJlbGF0aXZlfS5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dCAuY2stYnV0dG9uX19sYWJlbCxhLmNrLmNrLWJ1dHRvbi5jay1idXR0b25fd2l0aC10ZXh0IC5jay1idXR0b25fX2xhYmVse2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5jay5jay1idXR0b246aG92ZXIgLmNrLXRvb2x0aXAsYS5jay5jay1idXR0b246aG92ZXIgLmNrLXRvb2x0aXB7dmlzaWJpbGl0eTp2aXNpYmxlO29wYWNpdHk6MX0uY2suY2stYnV0dG9uIC5jay1idXR0b25fX2xhYmVsLC5jay5jay1idXR0b246Zm9jdXM6bm90KDpob3ZlcikgLmNrLXRvb2x0aXAsYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWwsYS5jay5jay1idXR0b246Zm9jdXM6bm90KDpob3ZlcikgLmNrLXRvb2x0aXB7ZGlzcGxheTpub25lfS5jay5jay1idXR0b24sYS5jay5jay1idXR0b257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1iYWNrZ3JvdW5kKX0uY2suY2stYnV0dG9uOm5vdCguY2stZGlzYWJsZWQpOmZvY3VzLC5jay5jay1idXR0b246bm90KC5jay1kaXNhYmxlZCk6aG92ZXIsYS5jay5jay1idXR0b246bm90KC5jay1kaXNhYmxlZCk6Zm9jdXMsYS5jay5jay1idXR0b246bm90KC5jay1kaXNhYmxlZCk6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1mb2N1cy1iYWNrZ3JvdW5kKX0uY2suY2stYnV0dG9uOm5vdCguY2stZGlzYWJsZWQpOmFjdGl2ZSxhLmNrLmNrLWJ1dHRvbjpub3QoLmNrLWRpc2FibGVkKTphY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tZGVmYXVsdC1hY3RpdmUtYmFja2dyb3VuZCk7Ym94LXNoYWRvdzppbnNldCAwIDJweCAycHggdmFyKC0tY2stY29sb3ItYnV0dG9uLWRlZmF1bHQtYWN0aXZlLXNoYWRvdyl9LmNrLmNrLWJ1dHRvbi5jay1kaXNhYmxlZCxhLmNrLmNrLWJ1dHRvbi5jay1kaXNhYmxlZHtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJ1dHRvbi1kZWZhdWx0LWRpc2FibGVkLWJhY2tncm91bmQpfS5jay5jay1idXR0b24sYS5jay5jay1idXR0b257Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWJ1dHRvbiwuY2stcm91bmRlZC1jb3JuZXJzIGEuY2suY2stYnV0dG9uLC5jay5jay1idXR0b24uY2stcm91bmRlZC1jb3JuZXJzLGEuY2suY2stYnV0dG9uLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay1idXR0b24sYS5jay5jay1idXR0b257d2hpdGUtc3BhY2U6bm93cmFwO2N1cnNvcjpkZWZhdWx0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctdGlueSk7dGV4dC1hbGlnbjpjZW50ZXI7bWluLXdpZHRoOnZhcigtLWNrLXVpLWNvbXBvbmVudC1taW4taGVpZ2h0KTttaW4taGVpZ2h0OnZhcigtLWNrLXVpLWNvbXBvbmVudC1taW4taGVpZ2h0KTtsaW5lLWhlaWdodDoxO2ZvbnQtc2l6ZTppbmhlcml0O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnR9LmNrLmNrLWJ1dHRvbjphY3RpdmUsLmNrLmNrLWJ1dHRvbjpmb2N1cyxhLmNrLmNrLWJ1dHRvbjphY3RpdmUsYS5jay5jay1idXR0b246Zm9jdXN7b3V0bGluZTpub25lO2JvcmRlcjp2YXIoLS1jay1mb2N1cy1yaW5nKTtib3gtc2hhZG93OnZhcigtLWNrLWZvY3VzLW91dGVyLXNoYWRvdyksMCAwO2JvcmRlci1jb2xvcjp0cmFuc3BhcmVudH0uY2suY2stYnV0dG9uLmNrLWRpc2FibGVkIC5jay1idXR0b25fX2ljb24sYS5jay5jay1idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9faWNvbntvcGFjaXR5OnZhcigtLWNrLWRpc2FibGVkLW9wYWNpdHkpfS5jay5jay1idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9fbGFiZWwsYS5jay5jay1idXR0b24uY2stZGlzYWJsZWQgLmNrLWJ1dHRvbl9fbGFiZWx7b3BhY2l0eTp2YXIoLS1jay1kaXNhYmxlZC1vcGFjaXR5KX0uY2suY2stYnV0dG9uLmNrLWJ1dHRvbl93aXRoLXRleHQsYS5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dHtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctdGlueSkgdmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCl9LmNrLmNrLWJ1dHRvbi5jay1idXR0b25fd2l0aC10ZXh0IC5jay1idXR0b25fX2ljb24sYS5jay5jay1idXR0b24uY2stYnV0dG9uX3dpdGgtdGV4dCAuY2stYnV0dG9uX19pY29ue21hcmdpbi1sZWZ0OmNhbGMoLTEgKiB2YXIoLS1jay1zcGFjaW5nLXNtYWxsKSk7bWFyZ2luLXJpZ2h0OnZhcigtLWNrLXNwYWNpbmctc21hbGwpfS5jay5jay1idXR0b24uY2stb24sYS5jay5jay1idXR0b24uY2stb257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tb24tYmFja2dyb3VuZCl9LmNrLmNrLWJ1dHRvbi5jay1vbjpub3QoLmNrLWRpc2FibGVkKTpmb2N1cywuY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVyLGEuY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmZvY3VzLGEuY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLW9uLWZvY3VzLWJhY2tncm91bmQpfS5jay5jay1idXR0b24uY2stb246bm90KC5jay1kaXNhYmxlZCk6YWN0aXZlLGEuY2suY2stYnV0dG9uLmNrLW9uOm5vdCguY2stZGlzYWJsZWQpOmFjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWJ1dHRvbi1vbi1hY3RpdmUtYmFja2dyb3VuZCk7Ym94LXNoYWRvdzppbnNldCAwIDJweCAycHggdmFyKC0tY2stY29sb3ItYnV0dG9uLW9uLWFjdGl2ZS1zaGFkb3cpfS5jay5jay1idXR0b24uY2stb24uY2stZGlzYWJsZWQsYS5jay5jay1idXR0b24uY2stb24uY2stZGlzYWJsZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tb24tZGlzYWJsZWQtYmFja2dyb3VuZCl9LmNrLmNrLWJ1dHRvbi5jay1idXR0b24tc2F2ZSxhLmNrLmNrLWJ1dHRvbi5jay1idXR0b24tc2F2ZXtjb2xvcjp2YXIoLS1jay1jb2xvci1idXR0b24tc2F2ZSl9LmNrLmNrLWJ1dHRvbi5jay1idXR0b24tY2FuY2VsLGEuY2suY2stYnV0dG9uLmNrLWJ1dHRvbi1jYW5jZWx7Y29sb3I6dmFyKC0tY2stY29sb3ItYnV0dG9uLWNhbmNlbCl9LmNrLmNrLWJ1dHRvbiAuY2stYnV0dG9uX19pY29uIHVzZSwuY2suY2stYnV0dG9uIC5jay1idXR0b25fX2ljb24gdXNlICosYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9faWNvbiB1c2UsYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9faWNvbiB1c2UgKntjb2xvcjppbmhlcml0fS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWwsYS5jay5jay1idXR0b24gLmNrLWJ1dHRvbl9fbGFiZWx7Zm9udC1zaXplOmluaGVyaXQ7Zm9udC13ZWlnaHQ6aW5oZXJpdDtjb2xvcjppbmhlcml0O2N1cnNvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0uY2suY2stYnV0dG9uLWFjdGlvbixhLmNrLmNrLWJ1dHRvbi1hY3Rpb257YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLWJhY2tncm91bmQpfS5jay5jay1idXR0b24tYWN0aW9uOm5vdCguY2stZGlzYWJsZWQpOmZvY3VzLC5jay5jay1idXR0b24tYWN0aW9uOm5vdCguY2stZGlzYWJsZWQpOmhvdmVyLGEuY2suY2stYnV0dG9uLWFjdGlvbjpub3QoLmNrLWRpc2FibGVkKTpmb2N1cyxhLmNrLmNrLWJ1dHRvbi1hY3Rpb246bm90KC5jay1kaXNhYmxlZCk6aG92ZXJ7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLWZvY3VzLWJhY2tncm91bmQpfS5jay5jay1idXR0b24tYWN0aW9uOm5vdCguY2stZGlzYWJsZWQpOmFjdGl2ZSxhLmNrLmNrLWJ1dHRvbi1hY3Rpb246bm90KC5jay1kaXNhYmxlZCk6YWN0aXZle2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1hY3RpdmUtYmFja2dyb3VuZCk7Ym94LXNoYWRvdzppbnNldCAwIDJweCAycHggdmFyKC0tY2stY29sb3ItYnV0dG9uLWFjdGlvbi1hY3RpdmUtc2hhZG93KX0uY2suY2stYnV0dG9uLWFjdGlvbi5jay1kaXNhYmxlZCxhLmNrLmNrLWJ1dHRvbi1hY3Rpb24uY2stZGlzYWJsZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLWRpc2FibGVkLWJhY2tncm91bmQpfS5jay5jay1idXR0b24tYWN0aW9uLGEuY2suY2stYnV0dG9uLWFjdGlvbntjb2xvcjp2YXIoLS1jay1jb2xvci1idXR0b24tYWN0aW9uLXRleHQpfS5jay5jay1idXR0b24tYm9sZCxhLmNrLmNrLWJ1dHRvbi1ib2xke2ZvbnQtd2VpZ2h0OjcwMH0nfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTUuMDQyIDkuMzY3bDIuMTg5IDEuODM3YS43NS43NSAwIDAgMS0uOTY1IDEuMTQ5bC0zLjc4OC0zLjE4YS43NDcuNzQ3IDAgMCAxLS4yMS0uMjg0Ljc1Ljc1IDAgMCAxIC4xNy0uOTQ1TDYuMjMgNC43NjJhLjc1Ljc1IDAgMSAxIC45NjQgMS4xNUw0Ljg2MyA3Ljg2Nmg4LjkxN0EuNzUuNzUgMCAwIDEgMTQgNy45YTQgNCAwIDEgMS0xLjQ3NyA3LjcxOGwuMzQ0LTEuNDg5YTIuNSAyLjUgMCAxIDAgMS4wOTQtNC43M2wuMDA4LS4wMzJINS4wNDJ6XCIgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPid9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTQuOTU4IDkuMzY3bC0yLjE4OSAxLjgzN2EuNzUuNzUgMCAwIDAgLjk2NSAxLjE0OWwzLjc4OC0zLjE4YS43NDcuNzQ3IDAgMCAwIC4yMS0uMjg0Ljc1Ljc1IDAgMCAwLS4xNy0uOTQ1TDEzLjc3IDQuNzYyYS43NS43NSAwIDEgMC0uOTY0IDEuMTVsMi4zMzEgMS45NTVINi4yMkEuNzUuNzUgMCAwIDAgNiA3LjlhNCA0IDAgMSAwIDEuNDc3IDcuNzE4bC0uMzQ0LTEuNDg5QTIuNSAyLjUgMCAxIDEgNi4wMzkgOS40bC0uMDA4LS4wMzJoOC45Mjd6XCIgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPid9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMC4xODcgMTdINS43NzNjLS42MzcgMC0xLjA5Mi0uMTM4LTEuMzY0LS40MTUtLjI3My0uMjc3LS40MDktLjcxOC0uNDA5LTEuMzIzVjQuNzM4YzAtLjYxNy4xNC0xLjA2Mi40MTktMS4zMzIuMjc5LS4yNy43My0uNDA2IDEuMzU0LS40MDZoNC42OGMuNjkgMCAxLjI4OC4wNDEgMS43OTMuMTI0LjUwNi4wODMuOTYuMjQyIDEuMzYuNDc4LjM0MS4xOTcuNjQ0LjQ0Ny45MDYuNzVhMy4yNjIgMy4yNjIgMCAwIDEgLjgwOCAyLjE2MmMwIDEuNDAxLS43MjIgMi40MjYtMi4xNjcgMy4wNzVDMTUuMDUgMTAuMTc1IDE2IDExLjMxNSAxNiAxMy4wMWEzLjc1NiAzLjc1NiAwIDAgMS0yLjI5NiAzLjUwNCA2LjEgNi4xIDAgMCAxLTEuNTE3LjM3N2MtLjU3MS4wNzMtMS4yMzguMTEtMiAuMTF6bS0uMjE3LTYuMjE3SDd2NC4wODdoMy4wNjljMS45NzcgMCAyLjk2NS0uNjkgMi45NjUtMi4wNzIgMC0uNzA3LS4yNTYtMS4yMi0uNzY4LTEuNTM3LS41MTItLjMxOS0xLjI3Ny0uNDc4LTIuMjk2LS40Nzh6TTcgNS4xM3YzLjYxOWgyLjYwNmMuNzI5IDAgMS4yOTItLjA2NyAxLjY5LS4yYTEuNiAxLjYgMCAwIDAgLjkxLS43NjVjLjE2NS0uMjY3LjI0Ny0uNTY2LjI0Ny0uODk3IDAtLjcwNy0uMjYtMS4xNzYtLjc3OC0xLjQwOS0uNTE5LS4yMzItMS4zMS0uMzQ4LTIuMzc1LS4zNDhIN3pcIiBmaWxsPVwiIzAwMFwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+XFxuJ30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk05LjU4NiAxNC42MzNsLjAyMS4wMDRjLS4wMzYuMzM1LjA5NS42NTUuMzkzLjk2Mi4wODIuMDgzLjE3My4xNS4yNzQuMjAxaDEuNDc0YS42LjYgMCAxIDEgMCAxLjJINS4zMDRhLjYuNiAwIDAgMSAwLTEuMmgxLjE1Yy40NzQtLjA3LjgwOS0uMTgyIDEuMDA1LS4zMzQuMTU3LS4xMjIuMjkxLS4zMi40MDQtLjU5N2wyLjQxNi05LjU1YTEuMDUzIDEuMDUzIDAgMCAwLS4yODEtLjgyMyAxLjEyIDEuMTIgMCAwIDAtLjQ0Mi0uMjk2SDguMTVhLjYuNiAwIDAgMSAwLTEuMmg2LjQ0M2EuNi42IDAgMSAxIDAgMS4yaC0xLjE5NWMtLjM3Ni4wNTYtLjY1LjE1NS0uODIzLjI5Ni0uMjE1LjE3NS0uNDIzLjQzOS0uNjIzLjc5bC0yLjM2NiA5LjM0N3pcIiBmaWxsPVwiIzMzM1wiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+J30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PGcgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+PHBhdGggZD1cIk0zIDEwLjQyM2E2LjUgNi41IDAgMCAxIDYuMDU2LTYuNDA4bC4wMzguNjdDNi40NDggNS40MjMgNS4zNTQgNy42NjMgNS4yMiAxMEg5Yy41NTIgMCAuNS40MzIuNS45ODZ2NC41MTFjMCAuNTU0LS40NDguNTAzLTEgLjUwM2gtNWMtLjU1MiAwLS41LS40NDktLjUtMS4wMDN2LTQuMDExLS41NjN6TTExIDEwLjQyM2E2LjUgNi41IDAgMCAxIDYuMDU2LTYuNDA4bC4wMzguNjdjLTIuNjQ2LjczOS0zLjc0IDIuOTc5LTMuODczIDUuMzE1SDE3Yy41NTIgMCAuNS40MzIuNS45ODZ2NC41MTFjMCAuNTU0LS40NDguNTAzLTEgLjUwM2gtNWMtLjU1MiAwLS41LS40NDktLjUtMS4wMDN2LTQuMDExLS41NjN6XCIvPjwvZz48L3N2Zz5cXG4nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49bygzNik7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay1jb250ZW50IGJsb2NrcXVvdGV7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmctcmlnaHQ6MS41ZW07cGFkZGluZy1sZWZ0OjEuNWVtO21hcmdpbi1sZWZ0OjA7Zm9udC1zdHlsZTppdGFsaWM7Ym9yZGVyLWxlZnQ6NXB4IHNvbGlkICNjY2N9J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oMzgpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc6cm9vdHstLWNrLXdpZGdldC1vdXRsaW5lLXRoaWNrbmVzczozcHg7LS1jay1jb2xvci13aWRnZXQtYm9yZGVyLWJsdXJyZWQ6I2RlZGVkZTstLWNrLWNvbG9yLXdpZGdldC1ib3JkZXItaG92ZXI6I2ZmZDE1YzstLWNrLWNvbG9yLXdpZGdldC1lZGl0YWJsZS1mb2N1c2VkLWJhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItYmFzZS1iYWNrZ3JvdW5kKSx9LmNrIC5jay13aWRnZXR7bWFyZ2luOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpIDA7cGFkZGluZzowfS5jayAuY2std2lkZ2V0LmNrLXdpZGdldF9zZWxlY3RlZCwuY2sgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWQ6aG92ZXJ7b3V0bGluZTp2YXIoLS1jay13aWRnZXQtb3V0bGluZS10aGlja25lc3MpIHNvbGlkIHZhcigtLWNrLWNvbG9yLWZvY3VzLWJvcmRlcil9LmNrLWVkaXRvcl9fZWRpdGFibGUuY2stYmx1cnJlZCAuY2sgLmNrLXdpZGdldC5jay13aWRnZXRfc2VsZWN0ZWR7b3V0bGluZTp2YXIoLS1jay13aWRnZXQtb3V0bGluZS10aGlja25lc3MpIHNvbGlkIHZhcigtLWNrLWNvbG9yLXdpZGdldC1ib3JkZXItYmx1cnJlZCl9LmNrIC5jay13aWRnZXQ6aG92ZXJ7b3V0bGluZTp2YXIoLS1jay13aWRnZXQtb3V0bGluZS10aGlja25lc3MpIHNvbGlkIHZhcigtLWNrLWNvbG9yLXdpZGdldC1ib3JkZXItaG92ZXIpfS5jayAuY2std2lkZ2V0IC5jay1lZGl0b3JfX25lc3RlZC1lZGl0YWJsZXtib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50fS5jayAuY2std2lkZ2V0IC5jay1lZGl0b3JfX25lc3RlZC1lZGl0YWJsZS5jay1lZGl0b3JfX25lc3RlZC1lZGl0YWJsZV9mb2N1c2VkLC5jayAuY2std2lkZ2V0IC5jay1lZGl0b3JfX25lc3RlZC1lZGl0YWJsZTpmb2N1c3tvdXRsaW5lOm5vbmU7Ym9yZGVyOnZhcigtLWNrLWZvY3VzLXJpbmcpO2JveC1zaGFkb3c6dmFyKC0tY2staW5uZXItc2hhZG93KSwwIDA7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1jay1jb2xvci13aWRnZXQtZWRpdGFibGUtZm9jdXNlZC1iYWNrZ3JvdW5kKX0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg0MCk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzpyb290ey0tY2staW5wdXQtdGV4dC13aWR0aDoxOGVtfS5jay5jay1pbnB1dC10ZXh0e2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1pbnB1dC10ZXh0LC5jay5jay1pbnB1dC10ZXh0LmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay1pbnB1dC10ZXh0e2JveC1zaGFkb3c6dmFyKC0tY2staW5uZXItc2hhZG93KSwwIDA7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1pbnB1dC1iYWNrZ3JvdW5kKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWlucHV0LWJvcmRlcik7cGFkZGluZzp2YXIoLS1jay1zcGFjaW5nLWV4dHJhLXRpbnkpIHZhcigtLWNrLXNwYWNpbmctbWVkaXVtKTttaW4td2lkdGg6dmFyKC0tY2staW5wdXQtdGV4dC13aWR0aCk7bWluLWhlaWdodDp2YXIoLS1jay11aS1jb21wb25lbnQtbWluLWhlaWdodCk7dHJhbnNpdGlvbi1wcm9wZXJ0eTpib3gtc2hhZG93LGJvcmRlcjt0cmFuc2l0aW9uOi4ycyBlYXNlLWluLW91dH0uY2suY2staW5wdXQtdGV4dDpmb2N1c3tvdXRsaW5lOm5vbmU7Ym9yZGVyOnZhcigtLWNrLWZvY3VzLXJpbmcpO2JveC1zaGFkb3c6dmFyKC0tY2stZm9jdXMtb3V0ZXItc2hhZG93KSx2YXIoLS1jay1pbm5lci1zaGFkb3cpfS5jay5jay1pbnB1dC10ZXh0W3JlYWRvbmx5XXtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWlucHV0LWRpc2FibGVkLWJvcmRlcik7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC1iYWNrZ3JvdW5kKTtjb2xvcjp2YXIoLS1jay1jb2xvci1pbnB1dC1kaXNhYmxlZC10ZXh0KX0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg0Mik7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm0gLmNrLWxhYmVsZWQtaW5wdXR7ZGlzcGxheTppbmxpbmUtYmxvY2t9LmNrLmNrLXRleHQtYWx0ZXJuYXRpdmUtZm9ybSAuY2stbGFiZWx7ZGlzcGxheTpub25lfS5jay5jay10ZXh0LWFsdGVybmF0aXZlLWZvcm17cGFkZGluZzp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKX0uY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtOmZvY3Vze291dGxpbmU6bm9uZX0uY2suY2stdGV4dC1hbHRlcm5hdGl2ZS1mb3JtPjpub3QoOmZpcnN0LWNoaWxkKXttYXJnaW4tbGVmdDp2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKX0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg0NCk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay1iYWxsb29uLXBhbmVse2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OnZhcigtLWNrLXotbW9kYWwpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfd2l0aC1hcnJvdzphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3c6YmVmb3Jle2NvbnRlbnQ6XCJcIjtwb3NpdGlvbjphYnNvbHV0ZX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3c6YmVmb3Jle3otaW5kZXg6dmFyKC0tY2stei1kZWZhdWx0KX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3dpdGgtYXJyb3c6YWZ0ZXJ7ei1pbmRleDpjYWxjKHZhcigtLWNrLXotZGVmYXVsdCkgKyAxKX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfbl06YmVmb3Jle3otaW5kZXg6dmFyKC0tY2stei1kZWZhdWx0KX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfbl06YWZ0ZXJ7ei1pbmRleDpjYWxjKHZhcigtLWNrLXotZGVmYXVsdCkgKyAxKX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfc106YmVmb3Jle3otaW5kZXg6dmFyKC0tY2stei1kZWZhdWx0KX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfc106YWZ0ZXJ7ei1pbmRleDpjYWxjKHZhcigtLWNrLXotZGVmYXVsdCkgKyAxKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX3Zpc2libGV7ZGlzcGxheTpibG9ja306cm9vdHstLWNrLWJhbGxvb24tYXJyb3ctb2Zmc2V0OjJweDstLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0OjEwcHg7LS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGg6OHB4fS5jay5jay1iYWxsb29uLXBhbmVse2JvcmRlci1yYWRpdXM6MH0uY2stcm91bmRlZC1jb3JuZXJzIC5jay5jay1iYWxsb29uLXBhbmVsLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLXJvdW5kZWQtY29ybmVyc3tib3JkZXItcmFkaXVzOnZhcigtLWNrLWJvcmRlci1yYWRpdXMpfS5jay5jay1iYWxsb29uLXBhbmVse2JveC1zaGFkb3c6dmFyKC0tY2stZHJvcC1zaGFkb3cpLDAgMDttaW4taGVpZ2h0OjE1cHg7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1wYW5lbC1iYWNrZ3JvdW5kKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLXBhbmVsLWJvcmRlcil9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF93aXRoLWFycm93OmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfd2l0aC1hcnJvdzpiZWZvcmV7d2lkdGg6MDtoZWlnaHQ6MDtib3JkZXItc3R5bGU6c29saWR9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X25dOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19uXTpiZWZvcmV7Ym9yZGVyLXdpZHRoOjAgdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSB2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCl9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X25dOmJlZm9yZXtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdmFyKC0tY2stY29sb3ItcGFuZWwtYm9yZGVyKX0uY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfbl06YWZ0ZXJ7Ym9yZGVyLWNvbG9yOnRyYW5zcGFyZW50IHRyYW5zcGFyZW50IHZhcigtLWNrLWNvbG9yLXBhbmVsLWJhY2tncm91bmQpO21hcmdpbi10b3A6dmFyKC0tY2stYmFsbG9vbi1hcnJvdy1vZmZzZXQpfS5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19zXTphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbFtjbGFzcyo9YXJyb3dfc106YmVmb3Jle2JvcmRlci13aWR0aDp2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkgdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSAwfS5jay5jay1iYWxsb29uLXBhbmVsW2NsYXNzKj1hcnJvd19zXTpiZWZvcmV7Ym9yZGVyLWNvbG9yOnZhcigtLWNrLWNvbG9yLXBhbmVsLWJvcmRlcikgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnR9LmNrLmNrLWJhbGxvb24tcGFuZWxbY2xhc3MqPWFycm93X3NdOmFmdGVye2JvcmRlci1jb2xvcjp2YXIoLS1jay1jb2xvci1wYW5lbC1iYWNrZ3JvdW5kKSB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDttYXJnaW4tYm90dG9tOnZhcigtLWNrLWJhbGxvb24tYXJyb3ctb2Zmc2V0KX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X246YWZ0ZXIsLmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19uOmJlZm9yZXtsZWZ0OjUwJTttYXJnaW4tbGVmdDpjYWxjKC0xICogdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7dG9wOmNhbGMoLTEgKiB2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfbnc6YWZ0ZXIsLmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19udzpiZWZvcmV7bGVmdDpjYWxjKDIgKiB2YXIoLS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGgpKTt0b3A6Y2FsYygtMSAqIHZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0KSl9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19uZTphZnRlciwuY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X25lOmJlZm9yZXtyaWdodDpjYWxjKDIgKiB2YXIoLS1jay1iYWxsb29uLWFycm93LWhhbGYtd2lkdGgpKTt0b3A6Y2FsYygtMSAqIHZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGVpZ2h0KSl9LmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19zOmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfczpiZWZvcmV7bGVmdDo1MCU7bWFyZ2luLWxlZnQ6Y2FsYygtMSAqIHZhcigtLWNrLWJhbGxvb24tYXJyb3ctaGFsZi13aWR0aCkpO2JvdHRvbTpjYWxjKC0xICogdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oZWlnaHQpKX0uY2suY2stYmFsbG9vbi1wYW5lbC5jay1iYWxsb29uLXBhbmVsX2Fycm93X3N3OmFmdGVyLC5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfc3c6YmVmb3Jle2xlZnQ6Y2FsYygyICogdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7Ym90dG9tOmNhbGMoLTEgKiB2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkpfS5jay5jay1iYWxsb29uLXBhbmVsLmNrLWJhbGxvb24tcGFuZWxfYXJyb3dfc2U6YWZ0ZXIsLmNrLmNrLWJhbGxvb24tcGFuZWwuY2stYmFsbG9vbi1wYW5lbF9hcnJvd19zZTpiZWZvcmV7cmlnaHQ6Y2FsYygyICogdmFyKC0tY2stYmFsbG9vbi1hcnJvdy1oYWxmLXdpZHRoKSk7Ym90dG9tOmNhbGMoLTEgKiB2YXIoLS1jay1iYWxsb29uLWFycm93LWhlaWdodCkpfSd9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNNS4wODUgNi4yMkwyLjk0MyA0LjA3OGEuNzUuNzUgMCAxIDEgMS4wNi0xLjA2bDIuNTkyIDIuNTlBMTEuMDk0IDExLjA5NCAwIDAgMSAxMCA1LjA2OGM0LjczOCAwIDguNTc4IDMuMTAxIDguNTc4IDUuMDgzIDAgMS4xOTctMS40MDEgMi44MDMtMy41NTUgMy44ODdsMS43MTQgMS43MTNhLjc1Ljc1IDAgMCAxLS4wOSAxLjEzOC40ODguNDg4IDAgMCAxLS4xNS4wODQuNzUuNzUgMCAwIDEtLjgyMS0uMTZMNi4xNyA3LjMwNGMtLjI1OC4xMS0uNTEuMjMzLS43NTcuMzY1bDYuMjM5IDYuMjQtLjAwNi4wMDUuNzguNzhjLS4zODguMDk0LS43OC4xNjYtMS4xNzQuMjE1bC0xLjExLTEuMTFoLjAxMUw0LjU1IDguMTk3YTcuMiA3LjIgMCAwIDAtLjY2NS41MTRsLS4xMTIuMDk4IDQuODk3IDQuODk3LS4wMDUuMDA2IDEuMjc2IDEuMjc2YTEwLjE2NCAxMC4xNjQgMCAwIDEtMS40NzctLjExN2wtLjQ3OS0uNDc5LS4wMDkuMDA5LTQuODYzLTQuODYzLS4wMjIuMDMxYTIuNTYzIDIuNTYzIDAgMCAwLS4xMjQuMmMtLjA0My4wNzctLjA4LjE1OC0uMTA4LjI0MWEuNTM0LjUzNCAwIDAgMC0uMDI4LjEzMy4yOS4yOSAwIDAgMCAuMDA4LjA3Mi45MjcuOTI3IDAgMCAwIC4wODIuMjI2Yy4wNjcuMTMzLjE0NS4yNi4yMzQuMzc5bDMuMjQyIDMuMzY1LjAyNS4wMS41OS42MjNjLTMuMjY1LS45MTgtNS41OS0zLjE1NS01LjU5LTQuNjY4IDAtMS4xOTQgMS40NDgtMi44MzggMy42NjMtMy45M3ptNy4wNy41MzFhNC42MzIgNC42MzIgMCAwIDEgMS4xMDggNS45OTJsLjM0NS4zNDQuMDQ2LS4wMThhOS4zMTMgOS4zMTMgMCAwIDAgMi0xLjExMmMuMjU2LS4xODcuNS0uMzkyLjcyNy0uNjEzLjEzNy0uMTM0LjI3LS4yNzcuMzkyLS40MzEuMDcyLS4wOTEuMTQxLS4xODUuMjAzLS4yODYuMDU3LS4wOTMuMTA3LS4xOS4xNDgtLjI5MmEuNzIuNzIgMCAwIDAgLjAzNi0uMTIuMjkuMjkgMCAwIDAgLjAwOC0uMDcyLjQ5Mi40OTIgMCAwIDAtLjAyOC0uMTMzLjk5OS45OTkgMCAwIDAtLjAzNi0uMDk2IDIuMTY1IDIuMTY1IDAgMCAwLS4wNzEtLjE0NSAyLjkxNyAyLjkxNyAwIDAgMC0uMTI1LS4yIDMuNTkyIDMuNTkyIDAgMCAwLS4yNjMtLjMzNSA1LjQ0NCA1LjQ0NCAwIDAgMC0uNTMtLjUyMyA3Ljk1NSA3Ljk1NSAwIDAgMC0xLjA1NC0uNzY4IDkuNzY2IDkuNzY2IDAgMCAwLTEuODc5LS44OTFjLS4zMzctLjExOC0uNjgtLjIxOS0xLjAyNy0uMzAxem0tMi44NS4yMWwtLjA2OS4wMDJhLjUwOC41MDggMCAwIDAtLjI1NC4wOTcuNDk2LjQ5NiAwIDAgMC0uMTA0LjY3OS40OTguNDk4IDAgMCAwIC4zMjYuMTk5bC4wNDUuMDA1Yy4wOTEuMDAzLjE4MS4wMDMuMjcyLjAxMi45LjA5MyAxLjY3Ni42NzUgMi4wMTcgMS41MTMuMDI0LjA2MS4wNDMuMTI1LjA2OS4xODVhLjQ5NC40OTQgMCAwIDAgLjQ1LjI4N2guMDA4YS40OTYuNDk2IDAgMCAwIC4zNS0uMTU4LjQ4Mi40ODIgMCAwIDAgLjEzLS4zMzUuNjM4LjYzOCAwIDAgMC0uMDQ4LS4yMTkgMy4zNzkgMy4zNzkgMCAwIDAtLjM2LS43MjMgMy40MzggMy40MzggMCAwIDAtMi43OTEtMS41NDNsLS4wMjgtLjAwMWgtLjAxM3pcIiBmaWxsPVwiIzAwMFwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIi8+PC9zdmc+J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oNDcpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2stY29udGVudCAuaW1hZ2V7Y2xlYXI6Ym90aDt0ZXh0LWFsaWduOmNlbnRlcn0uY2stY29udGVudCAuaW1hZ2U+aW1ne2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjAgYXV0bzttYXgtd2lkdGg6MTAwJX0nfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNNi45MSAxMC41NGMuMjYtLjIzLjY0LS4yMS44OC4wM2wzLjM2IDMuMTQgMi4yMy0yLjA2YS42NC42NCAwIDAgMSAuODcgMGwyLjUyIDIuOTdWNC41SDMuMnYxMC4xMmwzLjcxLTQuMDh6bTEwLjI3LTcuNTFjLjYgMCAxLjA5LjQ3IDEuMDkgMS4wNXYxMS44NGMwIC41OS0uNDkgMS4wNi0xLjA5IDEuMDZIMi43OWMtLjYgMC0xLjA5LS40Ny0xLjA5LTEuMDZWNC4wOGMwLS41OC40OS0xLjA1IDEuMS0xLjA1aDE0LjM4em0tNS4yMiA1LjU2YTEuOTYgMS45NiAwIDEgMSAzLjQtMS45NiAxLjk2IDEuOTYgMCAwIDEtMy40IDEuOTZ6XCIgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPlxcbid9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCA3MDAgMjUwXCI+PGcgZmlsbD1cIm5vbmVcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCI+PHJlY3Qgd2lkdGg9XCI3MDBcIiBoZWlnaHQ9XCIyNTBcIiBmaWxsPVwiI0Y3RjdGN1wiIHJ4PVwiNFwiLz48dGV4dCBmaWxsPVwiIzVGNkY3N1wiIGZvbnQtZmFtaWx5PVwiQXJpYWwsc2Fucy1zZXJpZlwiIGZvbnQtc2l6ZT1cIjI0XCI+PHRzcGFuIHg9XCIyNDcuOVwiIHk9XCIxMzVcIj5VcGxvYWRpbmcgaW1hZ2VcXHUyMDI2PC90c3Bhbj48L3RleHQ+PC9nPjwvc3ZnPlxcbid9LGZ1bmN0aW9uKGUsdCxvKXt2YXIgbj1vKDUxKTsnc3RyaW5nJz09dHlwZW9mIG4mJihuPVtbZS5pLG4sJyddXSk7dmFyIGk9e3NpbmdsZXRvbjohMCxobXI6ITB9LHI7aS50cmFuc2Zvcm09cixpLmluc2VydEludG89dm9pZCAwO28oMCkobixpKTtuLmxvY2FscyYmKGUuZXhwb3J0cz1uLmxvY2FscyksITF9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nLmNrLWNvbnRlbnQgLmltYWdle3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbn0uY2stY29udGVudCAuaW1hZ2UuY2staW5maW5pdGUtcHJvZ3Jlc3M6YmVmb3Jle2NvbnRlbnQ6XCJcIjtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDowfS5jay1jb250ZW50IC5pbWFnZSAuY2stcHJvZ3Jlc3MtYmFye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MH06cm9vdHstLWNrLWltYWdlLXVwbG9hZC1wcm9ncmVzcy1saW5lLXdpZHRoOjMwcHh9LmNrLWNvbnRlbnQgLmltYWdlLmNrLWFwcGVhcnthbmltYXRpb246YSAuN3N9LmNrLWNvbnRlbnQgLmltYWdlLmNrLWluZmluaXRlLXByb2dyZXNzOmJlZm9yZXt3aWR0aDp2YXIoLS1jay1pbWFnZS11cGxvYWQtcHJvZ3Jlc3MtbGluZS13aWR0aCk7aGVpZ2h0OjJweDtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLXVwbG9hZC1pbmZpbml0ZS1iYWNrZ3JvdW5kKTthbmltYXRpb24tbmFtZTpiO2FuaW1hdGlvbi1kdXJhdGlvbjoxLjVzO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyfS5jay1jb250ZW50IC5pbWFnZS5jay1pbWFnZS11cGxvYWQtcGxhY2Vob2xkZXI+aW1ne3dpZHRoOjEwMCV9LmNrLWNvbnRlbnQgLmltYWdlIC5jay1wcm9ncmVzcy1iYXJ7aGVpZ2h0OjJweDt3aWR0aDowO2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItdXBsb2FkLWJhci1iYWNrZ3JvdW5kKTt0cmFuc2l0aW9uOndpZHRoIC4xc31Aa2V5ZnJhbWVzIGF7MCV7b3BhY2l0eTowfXRve29wYWNpdHk6MX19QGtleWZyYW1lcyBiezAle3dpZHRoOnZhcigtLWNrLWltYWdlLXVwbG9hZC1wcm9ncmVzcy1saW5lLXdpZHRoKTtyaWdodDowfTUwJXt3aWR0aDpjYWxjKHZhcigtLWNrLWltYWdlLXVwbG9hZC1wcm9ncmVzcy1saW5lLXdpZHRoKSAqIDEuNSl9dG97cmlnaHQ6MTAwJX19J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oNTMpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stZHJvcGRvd257ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmV9LmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fYXJyb3d7cG9pbnRlci1ldmVudHM6bm9uZTt6LWluZGV4OnZhcigtLWNrLXotZGVmYXVsdCk7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwtNTAlLDApfS5jay5jay1kcm9wZG93biAuY2stYnV0dG9uLmNrLWRyb3Bkb3duX19idXR0b257d2lkdGg6MTAwJX0uY2suY2stZHJvcGRvd24gLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9uLmNrLW9uIC5jay10b29sdGlwe2Rpc3BsYXk6bm9uZX0uY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbHstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO2Rpc3BsYXk6bm9uZTt6LWluZGV4OnZhcigtLWNrLXotbW9kYWwpO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwxMDAlLDApfS5jay5jay1kcm9wZG93biAuY2stZHJvcGRvd25fX3BhbmVsLmNrLWRyb3Bkb3duX19wYW5lbC12aXNpYmxle2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpbGwtY2hhbmdlOnRyYW5zZm9ybX06cm9vdHstLWNrLWRyb3Bkb3duLWFycm93LXNpemU6Y2FsYygwLjUgKiB2YXIoLS1jay1pY29uLXNpemUpKX0uY2suY2stZHJvcGRvd257Zm9udC1zaXplOmluaGVyaXR9LmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fYXJyb3d7cmlnaHQ6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCk7d2lkdGg6dmFyKC0tY2stZHJvcGRvd24tYXJyb3ctc2l6ZSl9LmNrLmNrLWRyb3Bkb3duLmNrLWRpc2FibGVkIC5jay1kcm9wZG93bl9fYXJyb3d7b3BhY2l0eTp2YXIoLS1jay1kaXNhYmxlZC1vcGFjaXR5KX0uY2suY2stZHJvcGRvd24gLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9ue3BhZGRpbmctcmlnaHQ6Y2FsYygyLjUgKiB2YXIoLS1jay1zcGFjaW5nLXN0YW5kYXJkKSl9LmNrLmNrLWRyb3Bkb3duIC5jay1idXR0b24uY2stZHJvcGRvd25fX2J1dHRvbjpub3QoLmNrLWJ1dHRvbl93aXRoLXRleHQpe3BhZGRpbmctbGVmdDp2YXIoLS1jay1zcGFjaW5nLXNtYWxsKX0uY2suY2stZHJvcGRvd24gLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9uLmNrLWRpc2FibGVkIC5jay1idXR0b25fX2xhYmVse29wYWNpdHk6dmFyKC0tY2stZGlzYWJsZWQtb3BhY2l0eSl9LmNrLmNrLWRyb3Bkb3duIC5jay1idXR0b24uY2stZHJvcGRvd25fX2J1dHRvbi5jay1vbntib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MH0uY2suY2stZHJvcGRvd24gLmNrLWJ1dHRvbi5jay1kcm9wZG93bl9fYnV0dG9uIC5jay1idXR0b25fX2xhYmVse3dpZHRoOjdlbTtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30uY2suY2stZHJvcGRvd25fX3BhbmVse2JvcmRlci1yYWRpdXM6MDtib3gtc2hhZG93OnZhcigtLWNrLWRyb3Atc2hhZG93KSwwIDB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stZHJvcGRvd25fX3BhbmVsLC5jay5jay1kcm9wZG93bl9fcGFuZWwuY2stcm91bmRlZC1jb3JuZXJze2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyk7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czowfS5jay5jay1kcm9wZG93bl9fcGFuZWx7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1kcm9wZG93bi1wYW5lbC1iYWNrZ3JvdW5kKTtib3JkZXI6MXB4IHNvbGlkIHZhcigtLWNrLWNvbG9yLWRyb3Bkb3duLXBhbmVsLWJvcmRlcik7Ym90dG9tOjA7bWluLXdpZHRoOjEwMCV9J30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMTBcIiBoZWlnaHQ9XCIxMFwiIHZpZXdCb3g9XCIwIDAgMTAgMTBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0uOTQxIDQuNTIzYS43NS43NSAwIDEgMSAxLjA2LTEuMDZsMy4wMDYgMy4wMDUgMy4wMDUtMy4wMDVhLjc1Ljc1IDAgMSAxIDEuMDYgMS4wNmwtMy41NDkgMy41NWEuNzUuNzUgMCAwIDEtMS4xNjgtLjEzNkwuOTQxIDQuNTIzelwiIGZpbGw9XCIjMDAwXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiLz48L3N2Zz4nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg1Nik7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay1saXN0ey1tb3otdXNlci1zZWxlY3Q6bm9uZTstd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7LW1zLXVzZXItc2VsZWN0Om5vbmU7dXNlci1zZWxlY3Q6bm9uZTtvdmVyZmxvdzpoaWRkZW59LmNrLmNrLWxpc3QgLmNrLWxpc3RfX2l0ZW17ZGlzcGxheTpibG9ja30uY2suY2stbGlzdCAuY2stbGlzdF9faXRlbTpmb2N1c3twb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OnZhcigtLWNrLXotZGVmYXVsdCl9LmNrLmNrLWxpc3R7Ym9yZGVyLXJhZGl1czowfS5jay1yb3VuZGVkLWNvcm5lcnMgLmNrLmNrLWxpc3QsLmNrLmNrLWxpc3QuY2stcm91bmRlZC1jb3JuZXJze2JvcmRlci1yYWRpdXM6dmFyKC0tY2stYm9yZGVyLXJhZGl1cyl9LmNrLmNrLWxpc3R7bGlzdC1zdHlsZS10eXBlOm5vbmU7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1saXN0LWJhY2tncm91bmQpfS5jay5jay1saXN0X19pdGVte3BhZGRpbmc6dmFyKC0tY2stc3BhY2luZy1tZWRpdW0pO2N1cnNvcjpkZWZhdWx0O21pbi13aWR0aDoxMmVtfS5jay5jay1saXN0X19pdGVtOmZvY3VzLC5jay5jay1saXN0X19pdGVtOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItbGlzdC1pdGVtLWJhY2tncm91bmQtaG92ZXIpfS5jay5jay1saXN0X19pdGVtOmZvY3Vze2JveC1zaGFkb3c6dmFyKC0tY2stZm9jdXMtb3V0ZXItc2hhZG93KSwwIDA7b3V0bGluZTpub25lfS5jay5jay1saXN0X19pdGVtX2FjdGl2ZXtiYWNrZ3JvdW5kOnZhcigtLWNrLWNvbG9yLWxpc3QtaXRlbS1iYWNrZ3JvdW5kLWFjdGl2ZSk7Y29sb3I6dmFyKC0tY2stY29sb3ItbGlzdC1pdGVtLXRleHQtYWN0aXZlKX0uY2suY2stbGlzdF9faXRlbV9hY3RpdmU6Zm9jdXMsLmNrLmNrLWxpc3RfX2l0ZW1fYWN0aXZlOmhvdmVye2JhY2tncm91bmQ6dmFyKC0tY2stY29sb3ItbGlzdC1pdGVtLWJhY2tncm91bmQtYWN0aXZlLWZvY3VzKX0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg1OCk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay5jay10b29sYmFyLWRyb3Bkb3duIC5jay10b29sYmFye2ZsZXgtd3JhcDpub3dyYXB9LmNrLmNrLXRvb2xiYXItZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbCAuY2stYnV0dG9uOmZvY3Vze3otaW5kZXg6Y2FsYyh2YXIoLS1jay16LWRlZmF1bHQpICsgMSl9LmNrLmNrLXRvb2xiYXItZHJvcGRvd24gLmNrLXRvb2xiYXJ7Ym9yZGVyOjB9J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oNjApOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbCAuY2stbGlzdHtib3JkZXItcmFkaXVzOjB9LmNrLXJvdW5kZWQtY29ybmVycyAuY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbCAuY2stbGlzdCwuY2suY2stZHJvcGRvd24gLmNrLWRyb3Bkb3duX19wYW5lbCAuY2stbGlzdC5jay1yb3VuZGVkLWNvcm5lcnN7Ym9yZGVyLXJhZGl1czp2YXIoLS1jay1ib3JkZXItcmFkaXVzKTtib3JkZXItdG9wLWxlZnQtcmFkaXVzOjB9LmNrLmNrLWRyb3Bkb3duIC5jay1kcm9wZG93bl9fcGFuZWwgLmNrLWxpc3Q+LmNrLWxpc3RfX2l0ZW17bGluZS1oZWlnaHQ6Y2FsYyguOCp2YXIoLS1jay1saW5lLWhlaWdodC1iYXNlKSp2YXIoLS1jay1mb250LXNpemUtYmFzZSkpO3BhZGRpbmc6Y2FsYyguNCp2YXIoLS1jay1saW5lLWhlaWdodC1iYXNlKSp2YXIoLS1jay1mb250LXNpemUtYmFzZSkpfSd9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nLmNrLmNrLWhlYWRpbmdfaGVhZGluZzF7Zm9udC1zaXplOjIwcHh9LmNrLmNrLWhlYWRpbmdfaGVhZGluZzJ7Zm9udC1zaXplOjE3cHh9LmNrLmNrLWhlYWRpbmdfaGVhZGluZzN7Zm9udC1zaXplOjE0cHh9LmNrW2NsYXNzKj1jay1oZWFkaW5nX2hlYWRpbmdde2ZvbnQtd2VpZ2h0OjcwMH0uY2suY2stZHJvcGRvd24uY2staGVhZGluZy1kcm9wZG93biAuY2stZHJvcGRvd25fX2J1dHRvbiAuY2stYnV0dG9uX19sYWJlbHt3aWR0aDo4ZW19J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oNjMpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2suY2stcGxhY2Vob2xkZXI6YmVmb3JlLC5jayAuY2stcGxhY2Vob2xkZXI6YmVmb3Jle2NvbnRlbnQ6YXR0cihkYXRhLXBsYWNlaG9sZGVyKTtwb2ludGVyLWV2ZW50czpub25lO2N1cnNvcjp0ZXh0O2NvbG9yOnZhcigtLWNrLWNvbG9yLWVuZ2luZS1wbGFjZWhvbGRlci10ZXh0KX0nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg2NSk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jy5jay1jb250ZW50IC5pbWFnZT5maWdjYXB0aW9ue2NvbG9yOiMzMzM7YmFja2dyb3VuZC1jb2xvcjojZjdmN2Y3O3BhZGRpbmc6LjZlbTtmb250LXNpemU6Ljc1ZW07b3V0bGluZS1vZmZzZXQ6LTFweH0nfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxnIGZpbGw9XCIjMDAwXCIgZmlsbC1ydWxlPVwibm9uemVyb1wiPjxwYXRoIGQ9XCJNMiA0LjVWM2gxNnYxLjV6TTQuNSA3LjVWMTJoMTFWNy41aC0xMXpNNC4wNjEgNkgxNS45NGMuNTg2IDAgMS4wNjEuNDA3IDEuMDYxLjkxdjUuNjhjMCAuNTAzLS40NzUuOTEtMS4wNjEuOTFINC4wNkMzLjQ3NSAxMy41IDMgMTMuMDkzIDMgMTIuNTlWNi45MUMzIDYuNDA2IDMuNDc1IDYgNC4wNjEgNnpNMiAxNi41VjE1aDE2djEuNXpcIi8+PC9nPjwvc3ZnPlxcbid9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBjbGlwLXJ1bGU9XCJldmVub2RkXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2UtbWl0ZXJsaW1pdD1cIjEuNDE0XCI+PHBhdGggZD1cIk0xOCA0LjVWM0gydjEuNWgxNnptMCAzVjZoLTUuNjc0djEuNUgxOHptMCAzVjloLTUuNjc0djEuNUgxOHptMCAzVjEyaC01LjY3NHYxLjVIMTh6bS04LjUtNlYxMmgtNlY3LjVoNnptLjgxOC0xLjVIMi42ODJDMi4zMDUgNiAyIDYuNDA3IDIgNi45MXY1LjY4YzAgLjUwMy4zMDUuOTEuNjgyLjkxaDcuNjM2Yy4zNzcgMCAuNjgyLS40MDcuNjgyLS45MVY2LjkxYzAtLjUwMy0uMzA1LS45MS0uNjgyLS45MXpNMTggMTYuNVYxNUgydjEuNWgxNnpcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPid9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PGcgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCI+PHBhdGggZD1cIk0yIDQuNVYzaDE2djEuNXpNNi41IDcuNVYxMmg3VjcuNWgtN3pNNS43NTggNmg4LjQ4NGMuNDE5IDAgLjc1OC40MDcuNzU4LjkxdjUuNjgxYzAgLjUwMi0uMzQuOTA5LS43NTguOTA5SDUuNzU4Yy0uNDE5IDAtLjc1OC0uNDA3LS43NTgtLjkxVjYuOTFjMC0uNTAzLjM0LS45MS43NTgtLjkxek0yIDE2LjVWMTVoMTZ2MS41elwiLz48L2c+PC9zdmc+XFxuJ30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48ZyBmaWxsPVwiIzAwMFwiIGZpbGwtcnVsZT1cIm5vbnplcm9cIj48cGF0aCBkPVwiTTIgNC41VjNoMTZ2MS41ek0yIDcuNVY2aDUuNjc0djEuNXpNMiAxMC41VjloNS42NzR2MS41ek0yIDEzLjVWMTJoNS42NzR2MS41ek0xMC41IDcuNVYxMmg2VjcuNWgtNnpNOS42ODIgNmg3LjYzNmMuMzc3IDAgLjY4Mi40MDcuNjgyLjkxdjUuNjhjMCAuNTAzLS4zMDUuOTEtLjY4Mi45MUg5LjY4MmMtLjM3NyAwLS42ODItLjQwNy0uNjgyLS45MVY2LjkxYzAtLjUwMy4zMDUtLjkxLjY4Mi0uOTF6TTIgMTYuNVYxNWgxNnYxLjV6XCIvPjwvZz48L3N2Zz5cXG4nfSxmdW5jdGlvbihlLHQsbyl7dmFyIG49byg3MSk7J3N0cmluZyc9PXR5cGVvZiBuJiYobj1bW2UuaSxuLCcnXV0pO3ZhciBpPXtzaW5nbGV0b246ITAsaG1yOiEwfSxyO2kudHJhbnNmb3JtPXIsaS5pbnNlcnRJbnRvPXZvaWQgMDtvKDApKG4saSk7bi5sb2NhbHMmJihlLmV4cG9ydHM9bi5sb2NhbHMpLCExfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzpyb290ey0tY2staW1hZ2Utc3R5bGUtc3BhY2luZzoxLjVlbX0uY2stY29udGVudCAuaW1hZ2Utc3R5bGUtYWxpZ24tY2VudGVyLC5jay1jb250ZW50IC5pbWFnZS1zdHlsZS1hbGlnbi1sZWZ0LC5jay1jb250ZW50IC5pbWFnZS1zdHlsZS1hbGlnbi1yaWdodCwuY2stY29udGVudCAuaW1hZ2Utc3R5bGUtc2lkZXttYXgtd2lkdGg6NTAlfS5jay1jb250ZW50IC5pbWFnZS1zdHlsZS1zaWRle2Zsb2F0OnJpZ2h0O21hcmdpbi1sZWZ0OnZhcigtLWNrLWltYWdlLXN0eWxlLXNwYWNpbmcpfS5jay1jb250ZW50IC5pbWFnZS1zdHlsZS1hbGlnbi1sZWZ0e2Zsb2F0OmxlZnQ7bWFyZ2luLXJpZ2h0OnZhcigtLWNrLWltYWdlLXN0eWxlLXNwYWNpbmcpfS5jay1jb250ZW50IC5pbWFnZS1zdHlsZS1hbGlnbi1jZW50ZXJ7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0b30uY2stY29udGVudCAuaW1hZ2Utc3R5bGUtYWxpZ24tcmlnaHR7ZmxvYXQ6cmlnaHQ7bWFyZ2luLWxlZnQ6dmFyKC0tY2staW1hZ2Utc3R5bGUtc3BhY2luZyl9J30sZnVuY3Rpb24oZSx0LG8pe3ZhciBuPW8oNzMpOydzdHJpbmcnPT10eXBlb2YgbiYmKG49W1tlLmksbiwnJ11dKTt2YXIgaT17c2luZ2xldG9uOiEwLGhtcjohMH0scjtpLnRyYW5zZm9ybT1yLGkuaW5zZXJ0SW50bz12b2lkIDA7bygwKShuLGkpO24ubG9jYWxzJiYoZS5leHBvcnRzPW4ubG9jYWxzKSwhMX0sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPScuY2sgLmNrLWxpbmtfc2VsZWN0ZWR7YmFja2dyb3VuZDp2YXIoLS1jay1jb2xvci1saW5rLXNlbGVjdGVkLWJhY2tncm91bmQpfSd9LGZ1bmN0aW9uKGUsdCxvKXt2YXIgbj1vKDc1KTsnc3RyaW5nJz09dHlwZW9mIG4mJihuPVtbZS5pLG4sJyddXSk7dmFyIGk9e3NpbmdsZXRvbjohMCxobXI6ITB9LHI7aS50cmFuc2Zvcm09cixpLmluc2VydEludG89dm9pZCAwO28oMCkobixpKTtuLmxvY2FscyYmKGUuZXhwb3J0cz1uLmxvY2FscyksITF9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nLmNrLmNrLWxpbmstZm9ybSAuY2stbGFiZWxlZC1pbnB1dHtkaXNwbGF5OmlubGluZS1ibG9ja30uY2suY2stbGluay1mb3JtIC5jay1sYWJlbHtkaXNwbGF5Om5vbmV9LmNrLmNrLWxpbmstZm9ybXtwYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfS5jay5jay1saW5rLWZvcm06Zm9jdXN7b3V0bGluZTpub25lfS5jay5jay1saW5rLWZvcm0+Om5vdCg6Zmlyc3QtY2hpbGQpe21hcmdpbi1sZWZ0OnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfSd9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxnIGZpbGw9XCIjMDAwXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPjxwYXRoIGQ9XCJNMTEuMDc3IDE1bC45OTEtMS40MTZhLjc1Ljc1IDAgMSAxIDEuMjI5Ljg2bC0xLjE0OCAxLjY0YS43NDguNzQ4IDAgMCAxLS4yMTcuMjA2IDUuMjUxIDUuMjUxIDAgMCAxLTguNTAzLTUuOTU1Yy4wMi0uMDk1LjA2LS4xODkuMTItLjI3NGwxLjE0Ny0xLjYzOWEuNzUuNzUgMCAxIDEgMS4yMjguODZMNC45MzMgMTAuN2wuMDA2LjAwM2EzLjc1IDMuNzUgMCAwIDAgNi4xMzIgNC4yOTRsLjAwNi4wMDR6bTUuNDk0LTUuMzM1YS43NDguNzQ4IDAgMCAxLS4xMi4yNzRsLTEuMTQ3IDEuNjM5YS43NS43NSAwIDEgMS0xLjIyOC0uODZsLjg2LTEuMjNhMy43NSAzLjc1IDAgMCAwLTYuMTQ0LTQuMzAxbC0uODYgMS4yMjlhLjc1Ljc1IDAgMCAxLTEuMjI5LS44NmwxLjE0OC0xLjY0YS43NDguNzQ4IDAgMCAxIC4yMTctLjIwNiA1LjI1MSA1LjI1MSAwIDAgMSA4LjUwMyA1Ljk1NXptLTQuNTYzLTIuNTMyYS43NS43NSAwIDAgMSAuMTg0IDEuMDQ1bC0zLjE1NSA0LjUwNWEuNzUuNzUgMCAxIDEtMS4yMjktLjg2bDMuMTU1LTQuNTA2YS43NS43NSAwIDAgMSAxLjA0NS0uMTg0ek0xNi45MjcgMTcuNjk1bC0xLjQxNCAxLjQxNGEuNzUuNzUgMCAxIDEtMS4wNi0xLjA2bDEuNDE0LTEuNDE1LTEuNDE1LTEuNDE0YS43NS43NSAwIDAgMSAxLjA2MS0xLjA2bDEuNDE0IDEuNDE0IDEuNDE0LTEuNDE1YS43NS43NSAwIDAgMSAxLjA2MSAxLjA2MWwtMS40MTQgMS40MTQgMS40MTQgMS40MTVhLjc1Ljc1IDAgMCAxLTEuMDYgMS4wNmwtMS40MTUtMS40MTR6XCIvPjwvZz48L3N2Zz4nfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTcuMyAxNy4zN2wtLjA2MS4wODhhMS41MTggMS41MTggMCAwIDEtLjkzNC41MzVsLTQuMTc4LjY2My0uODA2LTQuMTUzYTEuNDk1IDEuNDk1IDAgMCAxIC4xODctMS4wNThsLjA1Ni0uMDg2TDguNzcgMi42MzljLjk1OC0xLjM1MSAyLjgwMy0xLjA3NiA0LjI5Ni0uMDMgMS40OTcgMS4wNDcgMi4zODcgMi42OTMgMS40MzMgNC4wNTVMNy4zIDE3LjM3ek05LjE0IDQuNzI4bC01LjU0NSA4LjM0NiAzLjI3NyAyLjI5NCA1LjU0NC04LjM0Nkw5LjE0IDQuNzI4ek02LjA3IDE2LjUxMmwtMy4yNzYtMi4yOTUuNTMgMi43MyAyLjc0Ni0uNDM1ek05Ljk5NCAzLjUwNkwxMy4yNzEgNS44Yy4zMTYtLjQ1Mi0uMTYtMS4zMzMtMS4wNjUtMS45NjYtLjkwNS0uNjM0LTEuODk1LS43OC0yLjIxMi0uMzI4ek04IDE4LjVMOS4zNzUgMTdIMTl2MS41SDh6XCIgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPlxcbid9LGZ1bmN0aW9uKGUsdCxvKXt2YXIgbj1vKDc5KTsnc3RyaW5nJz09dHlwZW9mIG4mJihuPVtbZS5pLG4sJyddXSk7dmFyIGk9e3NpbmdsZXRvbjohMCxobXI6ITB9LHI7aS50cmFuc2Zvcm09cixpLmluc2VydEludG89dm9pZCAwO28oMCkobixpKTtuLmxvY2FscyYmKGUuZXhwb3J0cz1uLmxvY2FscyksITF9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stbGluay1hY3Rpb25zX19wcmV2aWV3e2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWxpbmstYWN0aW9uc19fcHJldmlldyAuY2stYnV0dG9uX19sYWJlbHtvdmVyZmxvdzpoaWRkZW59LmNrLmNrLWxpbmstYWN0aW9uc3twYWRkaW5nOnZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXd7cGFkZGluZy1sZWZ0OjA7cGFkZGluZy1yaWdodDowfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXcsLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldzphY3RpdmUsLmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldzpmb2N1cywuY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b24uY2stbGluay1hY3Rpb25zX19wcmV2aWV3OmhvdmVye2JhY2tncm91bmQ6bm9uZX0uY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b24uY2stbGluay1hY3Rpb25zX19wcmV2aWV3OmFjdGl2ZXtib3gtc2hhZG93Om5vbmV9LmNrLmNrLWxpbmstYWN0aW9ucyAuY2stYnV0dG9uLmNrLWxpbmstYWN0aW9uc19fcHJldmlldzpmb2N1cyAuY2stYnV0dG9uX19sYWJlbHt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lfS5jay5jay1saW5rLWFjdGlvbnMgLmNrLWJ1dHRvbi5jay1saW5rLWFjdGlvbnNfX3ByZXZpZXcgLmNrLWJ1dHRvbl9fbGFiZWx7cGFkZGluZzowIHZhcigtLWNrLXNwYWNpbmctc3RhbmRhcmQpO2NvbG9yOnZhcigtLWNrLWNvbG9yLWxpbmstZGVmYXVsdCk7dGV4dC1vdmVyZmxvdzplbGxpcHNpcztjdXJzb3I6cG9pbnRlcjttYXgtd2lkdGg6dmFyKC0tY2staW5wdXQtdGV4dC13aWR0aCk7bWluLXdpZHRoOjNlbTt0ZXh0LWFsaWduOmNlbnRlcn0uY2suY2stbGluay1hY3Rpb25zIC5jay1idXR0b24uY2stbGluay1hY3Rpb25zX19wcmV2aWV3IC5jay1idXR0b25fX2xhYmVsOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9LmNrLmNrLWxpbmstYWN0aW9uczpmb2N1c3tvdXRsaW5lOm5vbmV9LmNrLmNrLWxpbmstYWN0aW9ucz46bm90KDpmaXJzdC1jaGlsZCl7bWFyZ2luLWxlZnQ6dmFyKC0tY2stc3BhY2luZy1zdGFuZGFyZCl9J30sZnVuY3Rpb24oZSl7ZS5leHBvcnRzPSc8c3ZnIHdpZHRoPVwiMjBcIiBoZWlnaHQ9XCIyMFwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk0xMS4wNzcgMTVsLjk5MS0xLjQxNmEuNzUuNzUgMCAxIDEgMS4yMjkuODZsLTEuMTQ4IDEuNjRhLjc0OC43NDggMCAwIDEtLjIxNy4yMDYgNS4yNTEgNS4yNTEgMCAwIDEtOC41MDMtNS45NTVjLjAyLS4wOTUuMDYtLjE4OS4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6XCIgZmlsbD1cIiMwMDBcIiBmaWxsLXJ1bGU9XCJldmVub2RkXCIvPjwvc3ZnPid9LGZ1bmN0aW9uKGUpe2UuZXhwb3J0cz0nPHN2ZyB3aWR0aD1cIjIwXCIgaGVpZ2h0PVwiMjBcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNNyA1Ljc1YzAgLjQxNC4zMzYuNzUuNzUuNzVoOS41YS43NS43NSAwIDEgMCAwLTEuNWgtOS41YS43NS43NSAwIDAgMC0uNzUuNzV6TTMuNSAzdjVIMlYzLjdIMXYtMWgyLjVWM3pNLjM0MyAxNy44NTdsMi41OS0zLjI1N0gyLjkyYS42LjYgMCAxIDAtMS4wNCAwSC4zMDJhMiAyIDAgMSAxIDMuOTk1IDBoLS4wMDFjLS4wNDguNDA1LS4xNi43MzQtLjMzMy45ODgtLjE3NS4yNTQtLjU5LjY5Mi0xLjI0NCAxLjMxMkg0LjN2MWgtNGwuMDQzLS4wNDN6TTcgMTQuNzVhLjc1Ljc1IDAgMCAxIC43NS0uNzVoOS41YS43NS43NSAwIDEgMSAwIDEuNWgtOS41YS43NS43NSAwIDAgMS0uNzUtLjc1elwiIGZpbGw9XCIjNDU0NTQ1XCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiLz48L3N2Zz4nfSxmdW5jdGlvbihlKXtlLmV4cG9ydHM9Jzxzdmcgd2lkdGg9XCIyMFwiIGhlaWdodD1cIjIwXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTcgNS43NWMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDkuNWEuNzUuNzUgMCAxIDAgMC0xLjVoLTkuNWEuNzUuNzUgMCAwIDAtLjc1Ljc1em0tNiAwQzEgNC43ODQgMS43NzcgNCAyLjc1IDRjLjk2NiAwIDEuNzUuNzc3IDEuNzUgMS43NSAwIC45NjYtLjc3NyAxLjc1LTEuNzUgMS43NUMxLjc4NCA3LjUgMSA2LjcyMyAxIDUuNzV6bTYgOWMwIC40MTQuMzM2Ljc1Ljc1Ljc1aDkuNWEuNzUuNzUgMCAxIDAgMC0xLjVoLTkuNWEuNzUuNzUgMCAwIDAtLjc1Ljc1em0tNiAwYzAtLjk2Ni43NzctMS43NSAxLjc1LTEuNzUuOTY2IDAgMS43NS43NzcgMS43NSAxLjc1IDAgLjk2Ni0uNzc3IDEuNzUtMS43NSAxLjc1LS45NjYgMC0xLjc1LS43NzctMS43NS0xLjc1elwiIGZpbGw9XCIjNDU0NTQ1XCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiLz48L3N2Zz4nfV0pWydkZWZhdWx0J119KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNrZWRpdG9yLmpzLm1hcCIsIi8qIVxuICogQ3JvcHBlciB2NC4wLjBcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9mZW5neXVhbmNoZW4vY3JvcHBlclxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE4IENoZW4gRmVuZ3l1YW5cbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTgtMDQtMDFUMDY6Mjc6MjcuMjY3WlxuICovXG5cbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbnZhciBJTl9CUk9XU0VSID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG52YXIgV0lORE9XID0gSU5fQlJPV1NFUiA/IHdpbmRvdyA6IHt9O1xudmFyIE5BTUVTUEFDRSA9ICdjcm9wcGVyJztcblxuLy8gQWN0aW9uc1xudmFyIEFDVElPTl9BTEwgPSAnYWxsJztcbnZhciBBQ1RJT05fQ1JPUCA9ICdjcm9wJztcbnZhciBBQ1RJT05fTU9WRSA9ICdtb3ZlJztcbnZhciBBQ1RJT05fWk9PTSA9ICd6b29tJztcbnZhciBBQ1RJT05fRUFTVCA9ICdlJztcbnZhciBBQ1RJT05fV0VTVCA9ICd3JztcbnZhciBBQ1RJT05fU09VVEggPSAncyc7XG52YXIgQUNUSU9OX05PUlRIID0gJ24nO1xudmFyIEFDVElPTl9OT1JUSF9FQVNUID0gJ25lJztcbnZhciBBQ1RJT05fTk9SVEhfV0VTVCA9ICdudyc7XG52YXIgQUNUSU9OX1NPVVRIX0VBU1QgPSAnc2UnO1xudmFyIEFDVElPTl9TT1VUSF9XRVNUID0gJ3N3JztcblxuLy8gQ2xhc3Nlc1xudmFyIENMQVNTX0NST1AgPSBOQU1FU1BBQ0UgKyAnLWNyb3AnO1xudmFyIENMQVNTX0RJU0FCTEVEID0gTkFNRVNQQUNFICsgJy1kaXNhYmxlZCc7XG52YXIgQ0xBU1NfSElEREVOID0gTkFNRVNQQUNFICsgJy1oaWRkZW4nO1xudmFyIENMQVNTX0hJREUgPSBOQU1FU1BBQ0UgKyAnLWhpZGUnO1xudmFyIENMQVNTX0lOVklTSUJMRSA9IE5BTUVTUEFDRSArICctaW52aXNpYmxlJztcbnZhciBDTEFTU19NT0RBTCA9IE5BTUVTUEFDRSArICctbW9kYWwnO1xudmFyIENMQVNTX01PVkUgPSBOQU1FU1BBQ0UgKyAnLW1vdmUnO1xuXG4vLyBEYXRhIGtleXNcbnZhciBEQVRBX0FDVElPTiA9ICdhY3Rpb24nO1xudmFyIERBVEFfUFJFVklFVyA9ICdwcmV2aWV3JztcblxuLy8gRHJhZyBtb2Rlc1xudmFyIERSQUdfTU9ERV9DUk9QID0gJ2Nyb3AnO1xudmFyIERSQUdfTU9ERV9NT1ZFID0gJ21vdmUnO1xudmFyIERSQUdfTU9ERV9OT05FID0gJ25vbmUnO1xuXG4vLyBFdmVudHNcbnZhciBFVkVOVF9DUk9QID0gJ2Nyb3AnO1xudmFyIEVWRU5UX0NST1BfRU5EID0gJ2Nyb3BlbmQnO1xudmFyIEVWRU5UX0NST1BfTU9WRSA9ICdjcm9wbW92ZSc7XG52YXIgRVZFTlRfQ1JPUF9TVEFSVCA9ICdjcm9wc3RhcnQnO1xudmFyIEVWRU5UX0RCTENMSUNLID0gJ2RibGNsaWNrJztcbnZhciBFVkVOVF9MT0FEID0gJ2xvYWQnO1xudmFyIEVWRU5UX1BPSU5URVJfRE9XTiA9IFdJTkRPVy5Qb2ludGVyRXZlbnQgPyAncG9pbnRlcmRvd24nIDogJ3RvdWNoc3RhcnQgbW91c2Vkb3duJztcbnZhciBFVkVOVF9QT0lOVEVSX01PVkUgPSBXSU5ET1cuUG9pbnRlckV2ZW50ID8gJ3BvaW50ZXJtb3ZlJyA6ICd0b3VjaG1vdmUgbW91c2Vtb3ZlJztcbnZhciBFVkVOVF9QT0lOVEVSX1VQID0gV0lORE9XLlBvaW50ZXJFdmVudCA/ICdwb2ludGVydXAgcG9pbnRlcmNhbmNlbCcgOiAndG91Y2hlbmQgdG91Y2hjYW5jZWwgbW91c2V1cCc7XG52YXIgRVZFTlRfUkVBRFkgPSAncmVhZHknO1xudmFyIEVWRU5UX1JFU0laRSA9ICdyZXNpemUnO1xudmFyIEVWRU5UX1dIRUVMID0gJ3doZWVsIG1vdXNld2hlZWwgRE9NTW91c2VTY3JvbGwnO1xudmFyIEVWRU5UX1pPT00gPSAnem9vbSc7XG5cbi8vIFJlZ0V4cHNcbnZhciBSRUdFWFBfQUNUSU9OUyA9IC9eKD86ZXx3fHN8bnxzZXxzd3xuZXxud3xhbGx8Y3JvcHxtb3ZlfHpvb20pJC87XG52YXIgUkVHRVhQX0RBVEFfVVJMID0gL15kYXRhOi87XG52YXIgUkVHRVhQX0RBVEFfVVJMX0pQRUcgPSAvXmRhdGE6aW1hZ2VcXC9qcGVnO2Jhc2U2NCwvO1xudmFyIFJFR0VYUF9UQUdfTkFNRSA9IC9eKD86aW1nfGNhbnZhcykkL2k7XG5cbnZhciBERUZBVUxUUyA9IHtcbiAgLy8gRGVmaW5lIHRoZSB2aWV3IG1vZGUgb2YgdGhlIGNyb3BwZXJcbiAgdmlld01vZGU6IDAsIC8vIDAsIDEsIDIsIDNcblxuICAvLyBEZWZpbmUgdGhlIGRyYWdnaW5nIG1vZGUgb2YgdGhlIGNyb3BwZXJcbiAgZHJhZ01vZGU6IERSQUdfTU9ERV9DUk9QLCAvLyAnY3JvcCcsICdtb3ZlJyBvciAnbm9uZSdcblxuICAvLyBEZWZpbmUgdGhlIGFzcGVjdCByYXRpbyBvZiB0aGUgY3JvcCBib3hcbiAgYXNwZWN0UmF0aW86IE5hTixcblxuICAvLyBBbiBvYmplY3Qgd2l0aCB0aGUgcHJldmlvdXMgY3JvcHBpbmcgcmVzdWx0IGRhdGFcbiAgZGF0YTogbnVsbCxcblxuICAvLyBBIHNlbGVjdG9yIGZvciBhZGRpbmcgZXh0cmEgY29udGFpbmVycyB0byBwcmV2aWV3XG4gIHByZXZpZXc6ICcnLFxuXG4gIC8vIFJlLXJlbmRlciB0aGUgY3JvcHBlciB3aGVuIHJlc2l6ZSB0aGUgd2luZG93XG4gIHJlc3BvbnNpdmU6IHRydWUsXG5cbiAgLy8gUmVzdG9yZSB0aGUgY3JvcHBlZCBhcmVhIGFmdGVyIHJlc2l6ZSB0aGUgd2luZG93XG4gIHJlc3RvcmU6IHRydWUsXG5cbiAgLy8gQ2hlY2sgaWYgdGhlIGN1cnJlbnQgaW1hZ2UgaXMgYSBjcm9zcy1vcmlnaW4gaW1hZ2VcbiAgY2hlY2tDcm9zc09yaWdpbjogdHJ1ZSxcblxuICAvLyBDaGVjayB0aGUgY3VycmVudCBpbWFnZSdzIEV4aWYgT3JpZW50YXRpb24gaW5mb3JtYXRpb25cbiAgY2hlY2tPcmllbnRhdGlvbjogdHJ1ZSxcblxuICAvLyBTaG93IHRoZSBibGFjayBtb2RhbFxuICBtb2RhbDogdHJ1ZSxcblxuICAvLyBTaG93IHRoZSBkYXNoZWQgbGluZXMgZm9yIGd1aWRpbmdcbiAgZ3VpZGVzOiB0cnVlLFxuXG4gIC8vIFNob3cgdGhlIGNlbnRlciBpbmRpY2F0b3IgZm9yIGd1aWRpbmdcbiAgY2VudGVyOiB0cnVlLFxuXG4gIC8vIFNob3cgdGhlIHdoaXRlIG1vZGFsIHRvIGhpZ2hsaWdodCB0aGUgY3JvcCBib3hcbiAgaGlnaGxpZ2h0OiB0cnVlLFxuXG4gIC8vIFNob3cgdGhlIGdyaWQgYmFja2dyb3VuZFxuICBiYWNrZ3JvdW5kOiB0cnVlLFxuXG4gIC8vIEVuYWJsZSB0byBjcm9wIHRoZSBpbWFnZSBhdXRvbWF0aWNhbGx5IHdoZW4gaW5pdGlhbGl6ZVxuICBhdXRvQ3JvcDogdHJ1ZSxcblxuICAvLyBEZWZpbmUgdGhlIHBlcmNlbnRhZ2Ugb2YgYXV0b21hdGljIGNyb3BwaW5nIGFyZWEgd2hlbiBpbml0aWFsaXplc1xuICBhdXRvQ3JvcEFyZWE6IDAuOCxcblxuICAvLyBFbmFibGUgdG8gbW92ZSB0aGUgaW1hZ2VcbiAgbW92YWJsZTogdHJ1ZSxcblxuICAvLyBFbmFibGUgdG8gcm90YXRlIHRoZSBpbWFnZVxuICByb3RhdGFibGU6IHRydWUsXG5cbiAgLy8gRW5hYmxlIHRvIHNjYWxlIHRoZSBpbWFnZVxuICBzY2FsYWJsZTogdHJ1ZSxcblxuICAvLyBFbmFibGUgdG8gem9vbSB0aGUgaW1hZ2VcbiAgem9vbWFibGU6IHRydWUsXG5cbiAgLy8gRW5hYmxlIHRvIHpvb20gdGhlIGltYWdlIGJ5IGRyYWdnaW5nIHRvdWNoXG4gIHpvb21PblRvdWNoOiB0cnVlLFxuXG4gIC8vIEVuYWJsZSB0byB6b29tIHRoZSBpbWFnZSBieSB3aGVlbGluZyBtb3VzZVxuICB6b29tT25XaGVlbDogdHJ1ZSxcblxuICAvLyBEZWZpbmUgem9vbSByYXRpbyB3aGVuIHpvb20gdGhlIGltYWdlIGJ5IHdoZWVsaW5nIG1vdXNlXG4gIHdoZWVsWm9vbVJhdGlvOiAwLjEsXG5cbiAgLy8gRW5hYmxlIHRvIG1vdmUgdGhlIGNyb3AgYm94XG4gIGNyb3BCb3hNb3ZhYmxlOiB0cnVlLFxuXG4gIC8vIEVuYWJsZSB0byByZXNpemUgdGhlIGNyb3AgYm94XG4gIGNyb3BCb3hSZXNpemFibGU6IHRydWUsXG5cbiAgLy8gVG9nZ2xlIGRyYWcgbW9kZSBiZXR3ZWVuIFwiY3JvcFwiIGFuZCBcIm1vdmVcIiB3aGVuIGNsaWNrIHR3aWNlIG9uIHRoZSBjcm9wcGVyXG4gIHRvZ2dsZURyYWdNb2RlT25EYmxjbGljazogdHJ1ZSxcblxuICAvLyBTaXplIGxpbWl0YXRpb25cbiAgbWluQ2FudmFzV2lkdGg6IDAsXG4gIG1pbkNhbnZhc0hlaWdodDogMCxcbiAgbWluQ3JvcEJveFdpZHRoOiAwLFxuICBtaW5Dcm9wQm94SGVpZ2h0OiAwLFxuICBtaW5Db250YWluZXJXaWR0aDogMjAwLFxuICBtaW5Db250YWluZXJIZWlnaHQ6IDEwMCxcblxuICAvLyBTaG9ydGN1dHMgb2YgZXZlbnRzXG4gIHJlYWR5OiBudWxsLFxuICBjcm9wc3RhcnQ6IG51bGwsXG4gIGNyb3Btb3ZlOiBudWxsLFxuICBjcm9wZW5kOiBudWxsLFxuICBjcm9wOiBudWxsLFxuICB6b29tOiBudWxsXG59O1xuXG52YXIgVEVNUExBVEUgPSAnPGRpdiBjbGFzcz1cImNyb3BwZXItY29udGFpbmVyXCIgdG91Y2gtYWN0aW9uPVwibm9uZVwiPicgKyAnPGRpdiBjbGFzcz1cImNyb3BwZXItd3JhcC1ib3hcIj4nICsgJzxkaXYgY2xhc3M9XCJjcm9wcGVyLWNhbnZhc1wiPjwvZGl2PicgKyAnPC9kaXY+JyArICc8ZGl2IGNsYXNzPVwiY3JvcHBlci1kcmFnLWJveFwiPjwvZGl2PicgKyAnPGRpdiBjbGFzcz1cImNyb3BwZXItY3JvcC1ib3hcIj4nICsgJzxzcGFuIGNsYXNzPVwiY3JvcHBlci12aWV3LWJveFwiPjwvc3Bhbj4nICsgJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1kYXNoZWQgZGFzaGVkLWhcIj48L3NwYW4+JyArICc8c3BhbiBjbGFzcz1cImNyb3BwZXItZGFzaGVkIGRhc2hlZC12XCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLWNlbnRlclwiPjwvc3Bhbj4nICsgJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1mYWNlXCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLWxpbmUgbGluZS1lXCIgZGF0YS1hY3Rpb249XCJlXCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLWxpbmUgbGluZS1uXCIgZGF0YS1hY3Rpb249XCJuXCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLWxpbmUgbGluZS13XCIgZGF0YS1hY3Rpb249XCJ3XCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLWxpbmUgbGluZS1zXCIgZGF0YS1hY3Rpb249XCJzXCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLXBvaW50IHBvaW50LWVcIiBkYXRhLWFjdGlvbj1cImVcIj48L3NwYW4+JyArICc8c3BhbiBjbGFzcz1cImNyb3BwZXItcG9pbnQgcG9pbnQtblwiIGRhdGEtYWN0aW9uPVwiblwiPjwvc3Bhbj4nICsgJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1wb2ludCBwb2ludC13XCIgZGF0YS1hY3Rpb249XCJ3XCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLXBvaW50IHBvaW50LXNcIiBkYXRhLWFjdGlvbj1cInNcIj48L3NwYW4+JyArICc8c3BhbiBjbGFzcz1cImNyb3BwZXItcG9pbnQgcG9pbnQtbmVcIiBkYXRhLWFjdGlvbj1cIm5lXCI+PC9zcGFuPicgKyAnPHNwYW4gY2xhc3M9XCJjcm9wcGVyLXBvaW50IHBvaW50LW53XCIgZGF0YS1hY3Rpb249XCJud1wiPjwvc3Bhbj4nICsgJzxzcGFuIGNsYXNzPVwiY3JvcHBlci1wb2ludCBwb2ludC1zd1wiIGRhdGEtYWN0aW9uPVwic3dcIj48L3NwYW4+JyArICc8c3BhbiBjbGFzcz1cImNyb3BwZXItcG9pbnQgcG9pbnQtc2VcIiBkYXRhLWFjdGlvbj1cInNlXCI+PC9zcGFuPicgKyAnPC9kaXY+JyArICc8L2Rpdj4nO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xufTtcblxudmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgfTtcbn0oKTtcblxudmFyIHRvQ29uc3VtYWJsZUFycmF5ID0gZnVuY3Rpb24gKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICAgIHJldHVybiBhcnIyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFycik7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIG5vdCBhIG51bWJlci5cbiAqL1xudmFyIGlzTmFOID0gTnVtYmVyLmlzTmFOIHx8IFdJTkRPVy5pc05hTjtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIG51bWJlciwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyB1bmRlZmluZWQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyB1bmRlZmluZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgcGxhaW4gb2JqZWN0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqL1xuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdHJ5IHtcbiAgICB2YXIgX2NvbnN0cnVjdG9yID0gdmFsdWUuY29uc3RydWN0b3I7XG4gICAgdmFyIHByb3RvdHlwZSA9IF9jb25zdHJ1Y3Rvci5wcm90b3R5cGU7XG5cblxuICAgIHJldHVybiBfY29uc3RydWN0b3IgJiYgcHJvdG90eXBlICYmIGhhc093blByb3BlcnR5LmNhbGwocHJvdG90eXBlLCAnaXNQcm90b3R5cGVPZicpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgZnVuY3Rpb24uXG4gKiBAcGFyYW0geyp9IHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBJdGVyYXRlIHRoZSBnaXZlbiBkYXRhLlxuICogQHBhcmFtIHsqfSBkYXRhIC0gVGhlIGRhdGEgdG8gaXRlcmF0ZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIC0gVGhlIHByb2Nlc3MgZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudC5cbiAqIEByZXR1cm5zIHsqfSBUaGUgb3JpZ2luYWwgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoZGF0YSAmJiBpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpIHx8IGlzTnVtYmVyKGRhdGEubGVuZ3RoKSAvKiBhcnJheS1saWtlICovKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBkYXRhLmxlbmd0aDtcblxuICAgICAgICB2YXIgaSA9IHZvaWQgMDtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2suY2FsbChkYXRhLCBkYXRhW2ldLCBpLCBkYXRhKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdChkYXRhKSkge1xuICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwoZGF0YSwgZGF0YVtrZXldLCBrZXksIGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59XG5cbi8qKlxuICogRXh0ZW5kIHRoZSBnaXZlbiBvYmplY3QuXG4gKiBAcGFyYW0geyp9IG9iaiAtIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWQuXG4gKiBAcGFyYW0geyp9IGFyZ3MgLSBUaGUgcmVzdCBvYmplY3RzIHdoaWNoIHdpbGwgYmUgbWVyZ2VkIHRvIHRoZSBmaXJzdCBvYmplY3QuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgZXh0ZW5kZWQgb2JqZWN0LlxuICovXG52YXIgYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBhc3NpZ24ob2JqKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgaWYgKGlzT2JqZWN0KG9iaikgJiYgYXJncy5sZW5ndGggPiAwKSB7XG4gICAgYXJncy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIGlmIChpc09iamVjdChhcmcpKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGFyZykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgb2JqW2tleV0gPSBhcmdba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxudmFyIFJFR0VYUF9ERUNJTUFMUyA9IC9cXC5cXGQqKD86MHw5KXsxMn1cXGQqJC9pO1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBkZWNpbWFsIG51bWJlci5cbiAqIENoZWNrIG91dCB7QGxpbmsgaHR0cDovLzAuMzAwMDAwMDAwMDAwMDAwMDQuY29tL31cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBub3JtYWxpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3RpbWVzPTEwMDAwMDAwMDAwMF0gLSBUaGUgdGltZXMgZm9yIG5vcm1hbGl6aW5nLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbm9ybWFsaXplZCBudW1iZXIuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZURlY2ltYWxOdW1iZXIodmFsdWUpIHtcbiAgdmFyIHRpbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAxMDAwMDAwMDAwMDA7XG5cbiAgcmV0dXJuIFJFR0VYUF9ERUNJTUFMUy50ZXN0KHZhbHVlKSA/IE1hdGgucm91bmQodmFsdWUgKiB0aW1lcykgLyB0aW1lcyA6IHZhbHVlO1xufVxuXG52YXIgUkVHRVhQX1NVRkZJWCA9IC9eKD86d2lkdGh8aGVpZ2h0fGxlZnR8dG9wfG1hcmdpbkxlZnR8bWFyZ2luVG9wKSQvO1xuXG4vKipcbiAqIEFwcGx5IHN0eWxlcyB0byB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIFRoZSB0YXJnZXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdHlsZXMgLSBUaGUgc3R5bGVzIGZvciBhcHBseWluZy5cbiAqL1xuZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgc3R5bGVzKSB7XG4gIHZhciBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7XG5cblxuICBmb3JFYWNoKHN0eWxlcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wZXJ0eSkge1xuICAgIGlmIChSRUdFWFBfU1VGRklYLnRlc3QocHJvcGVydHkpICYmIGlzTnVtYmVyKHZhbHVlKSkge1xuICAgICAgdmFsdWUgKz0gJ3B4JztcbiAgICB9XG5cbiAgICBzdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIGVsZW1lbnQgaGFzIGEgc3BlY2lhbCBjbGFzcy5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGNoZWNrLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVGhlIGNsYXNzIHRvIHNlYXJjaC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lhbCBjbGFzcyB3YXMgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIGhhc0NsYXNzKGVsZW1lbnQsIHZhbHVlKSB7XG4gIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdCA/IGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHZhbHVlKSA6IGVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YodmFsdWUpID4gLTE7XG59XG5cbi8qKlxuICogQWRkIGNsYXNzZXMgdG8gdGhlIGdpdmVuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBUaGUgdGFyZ2V0IGVsZW1lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgY2xhc3NlcyB0byBiZSBhZGRlZC5cbiAqL1xuZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbWVudCwgdmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpc051bWJlcihlbGVtZW50Lmxlbmd0aCkpIHtcbiAgICBmb3JFYWNoKGVsZW1lbnQsIGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICBhZGRDbGFzcyhlbGVtLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0KSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHZhbHVlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUudHJpbSgpO1xuXG4gIGlmICghY2xhc3NOYW1lKSB7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSB2YWx1ZTtcbiAgfSBlbHNlIGlmIChjbGFzc05hbWUuaW5kZXhPZih2YWx1ZSkgPCAwKSB7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnICcgKyB2YWx1ZTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzc2VzIGZyb20gdGhlIGdpdmVuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBUaGUgdGFyZ2V0IGVsZW1lbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgY2xhc3NlcyB0byBiZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50LCB2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGlzTnVtYmVyKGVsZW1lbnQubGVuZ3RoKSkge1xuICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgIHJlbW92ZUNsYXNzKGVsZW0sIHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoZWxlbWVudC5jbGFzc0xpc3QpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodmFsdWUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChlbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKHZhbHVlKSA+PSAwKSB7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKHZhbHVlLCAnJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgb3IgcmVtb3ZlIGNsYXNzZXMgZnJvbSB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIFRoZSB0YXJnZXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIFRoZSBjbGFzc2VzIHRvIGJlIHRvZ2dsZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFkZGVkIC0gQWRkIG9ubHkuXG4gKi9cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsZW1lbnQsIHZhbHVlLCBhZGRlZCkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGlzTnVtYmVyKGVsZW1lbnQubGVuZ3RoKSkge1xuICAgIGZvckVhY2goZWxlbWVudCwgZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgIHRvZ2dsZUNsYXNzKGVsZW0sIHZhbHVlLCBhZGRlZCk7XG4gICAgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSUUxMC0xMSBkb2Vzbid0IHN1cHBvcnQgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgYGNsYXNzTGlzdC50b2dnbGVgXG4gIGlmIChhZGRlZCkge1xuICAgIGFkZENsYXNzKGVsZW1lbnQsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZW1vdmVDbGFzcyhlbGVtZW50LCB2YWx1ZSk7XG4gIH1cbn1cblxudmFyIFJFR0VYUF9IWVBIRU5BVEUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGdpdmVuIHN0cmluZyBmcm9tIGNhbWVsQ2FzZSB0byBrZWJhYi1jYXNlXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBoeXBoZW5hdGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoUkVHRVhQX0hZUEhFTkFURSwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcbn1cblxuLyoqXG4gKiBHZXQgZGF0YSBmcm9tIHRoZSBnaXZlbiBlbGVtZW50LlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gVGhlIHRhcmdldCBlbGVtZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgZGF0YSBrZXkgdG8gZ2V0LlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGRhdGEgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldERhdGEoZWxlbWVudCwgbmFtZSkge1xuICBpZiAoaXNPYmplY3QoZWxlbWVudFtuYW1lXSkpIHtcbiAgICByZXR1cm4gZWxlbWVudFtuYW1lXTtcbiAgfSBlbHNlIGlmIChlbGVtZW50LmRhdGFzZXQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5kYXRhc2V0W25hbWVdO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLScgKyBoeXBoZW5hdGUobmFtZSkpO1xufVxuXG4vKipcbiAqIFNldCBkYXRhIHRvIHRoZSBnaXZlbiBlbGVtZW50LlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gVGhlIHRhcmdldCBlbGVtZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgZGF0YSBrZXkgdG8gc2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IGRhdGEgLSBUaGUgZGF0YSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gc2V0RGF0YShlbGVtZW50LCBuYW1lLCBkYXRhKSB7XG4gIGlmIChpc09iamVjdChkYXRhKSkge1xuICAgIGVsZW1lbnRbbmFtZV0gPSBkYXRhO1xuICB9IGVsc2UgaWYgKGVsZW1lbnQuZGF0YXNldCkge1xuICAgIGVsZW1lbnQuZGF0YXNldFtuYW1lXSA9IGRhdGE7XG4gIH0gZWxzZSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtJyArIGh5cGhlbmF0ZShuYW1lKSwgZGF0YSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZGF0YSBmcm9tIHRoZSBnaXZlbiBlbGVtZW50LlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gVGhlIHRhcmdldCBlbGVtZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgZGF0YSBrZXkgdG8gcmVtb3ZlLlxuICovXG5mdW5jdGlvbiByZW1vdmVEYXRhKGVsZW1lbnQsIG5hbWUpIHtcbiAgaWYgKGlzT2JqZWN0KGVsZW1lbnRbbmFtZV0pKSB7XG4gICAgdHJ5IHtcbiAgICAgIGRlbGV0ZSBlbGVtZW50W25hbWVdO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGVsZW1lbnRbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IGVsc2UgaWYgKGVsZW1lbnQuZGF0YXNldCkge1xuICAgIC8vICMxMjggU2FmYXJpIG5vdCBhbGxvd3MgdG8gZGVsZXRlIGRhdGFzZXQgcHJvcGVydHlcbiAgICB0cnkge1xuICAgICAgZGVsZXRlIGVsZW1lbnQuZGF0YXNldFtuYW1lXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlbGVtZW50LmRhdGFzZXRbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLScgKyBoeXBoZW5hdGUobmFtZSkpO1xuICB9XG59XG5cbnZhciBSRUdFWFBfU1BBQ0VTID0gL1xcc1xccyovO1xudmFyIG9uY2VTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdXBwb3J0ZWQgPSBmYWxzZTtcblxuICBpZiAoSU5fQlJPV1NFUikge1xuICAgIHZhciBvbmNlID0gZmFsc2U7XG4gICAgdmFyIGxpc3RlbmVyID0gZnVuY3Rpb24gbGlzdGVuZXIoKSB7fTtcbiAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ29uY2UnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG9uY2U7XG4gICAgICB9LFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGhpcyBzZXR0ZXIgY2FuIGZpeCBhIGBUeXBlRXJyb3JgIGluIHN0cmljdCBtb2RlXG4gICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvRXJyb3JzL0dldHRlcl9vbmx5fVxuICAgICAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXRcbiAgICAgICAqL1xuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQkJDEodmFsdWUpIHtcbiAgICAgICAgb25jZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgV0lORE9XLmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gICAgV0lORE9XLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gIH1cblxuICByZXR1cm4gc3VwcG9ydGVkO1xufSgpO1xuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBmcm9tIHRoZSB0YXJnZXQgZWxlbWVudC5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIFRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAtIFRoZSBldmVudCB0eXBlKHMpLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgLSBUaGUgZXZlbnQgbGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIFRoZSBldmVudCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihlbGVtZW50LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG5cbiAgdmFyIGhhbmRsZXIgPSBsaXN0ZW5lcjtcblxuICB0eXBlLnRyaW0oKS5zcGxpdChSRUdFWFBfU1BBQ0VTKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmICghb25jZVN1cHBvcnRlZCkge1xuICAgICAgdmFyIGxpc3RlbmVycyA9IGVsZW1lbnQubGlzdGVuZXJzO1xuXG5cbiAgICAgIGlmIChsaXN0ZW5lcnMgJiYgbGlzdGVuZXJzW2V2ZW50XSAmJiBsaXN0ZW5lcnNbZXZlbnRdW2xpc3RlbmVyXSkge1xuICAgICAgICBoYW5kbGVyID0gbGlzdGVuZXJzW2V2ZW50XVtsaXN0ZW5lcl07XG4gICAgICAgIGRlbGV0ZSBsaXN0ZW5lcnNbZXZlbnRdW2xpc3RlbmVyXTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMobGlzdGVuZXJzW2V2ZW50XSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZGVsZXRlIGxpc3RlbmVyc1tldmVudF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMobGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBkZWxldGUgZWxlbWVudC5saXN0ZW5lcnM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBBZGQgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIHRhcmdldCBlbGVtZW50LlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gVGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIC0gVGhlIGV2ZW50IHR5cGUocykuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBldmVudCBsaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gVGhlIGV2ZW50IG9wdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGFkZExpc3RlbmVyKGVsZW1lbnQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuICB2YXIgX2hhbmRsZXIgPSBsaXN0ZW5lcjtcblxuICB0eXBlLnRyaW0oKS5zcGxpdChSRUdFWFBfU1BBQ0VTKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChvcHRpb25zLm9uY2UgJiYgIW9uY2VTdXBwb3J0ZWQpIHtcbiAgICAgIHZhciBfZWxlbWVudCRsaXN0ZW5lcnMgPSBlbGVtZW50Lmxpc3RlbmVycyxcbiAgICAgICAgICBsaXN0ZW5lcnMgPSBfZWxlbWVudCRsaXN0ZW5lcnMgPT09IHVuZGVmaW5lZCA/IHt9IDogX2VsZW1lbnQkbGlzdGVuZXJzO1xuXG5cbiAgICAgIF9oYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcigpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgbGlzdGVuZXJzW2V2ZW50XVtsaXN0ZW5lcl07XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgX2hhbmRsZXIsIG9wdGlvbnMpO1xuICAgICAgICBsaXN0ZW5lci5hcHBseShlbGVtZW50LCBhcmdzKTtcbiAgICAgIH07XG5cbiAgICAgIGlmICghbGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgICBsaXN0ZW5lcnNbZXZlbnRdID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChsaXN0ZW5lcnNbZXZlbnRdW2xpc3RlbmVyXSkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tldmVudF1bbGlzdGVuZXJdLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzW2V2ZW50XVtsaXN0ZW5lcl0gPSBfaGFuZGxlcjtcbiAgICAgIGVsZW1lbnQubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgX2hhbmRsZXIsIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBldmVudCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgLSBUaGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgZXZlbnQgdHlwZShzKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC0gVGhlIGFkZGl0aW9uYWwgZXZlbnQgZGF0YS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBJbmRpY2F0ZSBpZiB0aGUgZXZlbnQgaXMgZGVmYXVsdCBwcmV2ZW50ZWQgb3Igbm90LlxuICovXG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50KGVsZW1lbnQsIHR5cGUsIGRhdGEpIHtcbiAgdmFyIGV2ZW50ID0gdm9pZCAwO1xuXG4gIC8vIEV2ZW50IGFuZCBDdXN0b21FdmVudCBvbiBJRTktMTEgYXJlIGdsb2JhbCBvYmplY3RzLCBub3QgY29uc3RydWN0b3JzXG4gIGlmIChpc0Z1bmN0aW9uKEV2ZW50KSAmJiBpc0Z1bmN0aW9uKEN1c3RvbUV2ZW50KSkge1xuICAgIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KHR5cGUsIHtcbiAgICAgIGRldGFpbDogZGF0YSxcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgICBldmVudC5pbml0Q3VzdG9tRXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSwgZGF0YSk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIG9mZnNldCBiYXNlIG9uIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAtIFRoZSB0YXJnZXQgZWxlbWVudC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSBvZmZzZXQgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0T2Zmc2V0KGVsZW1lbnQpIHtcbiAgdmFyIGJveCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBib3gubGVmdCArICh3aW5kb3cucGFnZVhPZmZzZXQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50TGVmdCksXG4gICAgdG9wOiBib3gudG9wICsgKHdpbmRvdy5wYWdlWU9mZnNldCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3ApXG4gIH07XG59XG5cbnZhciBsb2NhdGlvbiA9IFdJTkRPVy5sb2NhdGlvbjtcblxudmFyIFJFR0VYUF9PUklHSU5TID0gL14oaHR0cHM/OilcXC9cXC8oW146Lz8jXSspOj8oXFxkKikvaTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZ2l2ZW4gVVJMIGlzIGEgY3Jvc3Mgb3JpZ2luIFVSTC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgdGFyZ2V0IFVSTC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gVVJMIGlzIGEgY3Jvc3Mgb3JpZ2luIFVSTCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0Nyb3NzT3JpZ2luVVJMKHVybCkge1xuICB2YXIgcGFydHMgPSB1cmwubWF0Y2goUkVHRVhQX09SSUdJTlMpO1xuXG4gIHJldHVybiBwYXJ0cyAmJiAocGFydHNbMV0gIT09IGxvY2F0aW9uLnByb3RvY29sIHx8IHBhcnRzWzJdICE9PSBsb2NhdGlvbi5ob3N0bmFtZSB8fCBwYXJ0c1szXSAhPT0gbG9jYXRpb24ucG9ydCk7XG59XG5cbi8qKlxuICogQWRkIHRpbWVzdGFtcCB0byB0aGUgZ2l2ZW4gVVJMLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSB0YXJnZXQgVVJMLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHJlc3VsdCBVUkwuXG4gKi9cbmZ1bmN0aW9uIGFkZFRpbWVzdGFtcCh1cmwpIHtcbiAgdmFyIHRpbWVzdGFtcCA9ICd0aW1lc3RhbXA9JyArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gIHJldHVybiB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgdGltZXN0YW1wO1xufVxuXG4vKipcbiAqIEdldCB0cmFuc2Zvcm1zIGJhc2Ugb24gdGhlIGdpdmVuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBUaGUgdGFyZ2V0IG9iamVjdC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IEEgc3RyaW5nIGNvbnRhaW5zIHRyYW5zZm9ybSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGdldFRyYW5zZm9ybXMoX3JlZikge1xuICB2YXIgcm90YXRlID0gX3JlZi5yb3RhdGUsXG4gICAgICBzY2FsZVggPSBfcmVmLnNjYWxlWCxcbiAgICAgIHNjYWxlWSA9IF9yZWYuc2NhbGVZLFxuICAgICAgdHJhbnNsYXRlWCA9IF9yZWYudHJhbnNsYXRlWCxcbiAgICAgIHRyYW5zbGF0ZVkgPSBfcmVmLnRyYW5zbGF0ZVk7XG5cbiAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gIGlmIChpc051bWJlcih0cmFuc2xhdGVYKSAmJiB0cmFuc2xhdGVYICE9PSAwKSB7XG4gICAgdmFsdWVzLnB1c2goJ3RyYW5zbGF0ZVgoJyArIHRyYW5zbGF0ZVggKyAncHgpJyk7XG4gIH1cblxuICBpZiAoaXNOdW1iZXIodHJhbnNsYXRlWSkgJiYgdHJhbnNsYXRlWSAhPT0gMCkge1xuICAgIHZhbHVlcy5wdXNoKCd0cmFuc2xhdGVZKCcgKyB0cmFuc2xhdGVZICsgJ3B4KScpO1xuICB9XG5cbiAgLy8gUm90YXRlIHNob3VsZCBjb21lIGZpcnN0IGJlZm9yZSBzY2FsZSB0byBtYXRjaCBvcmllbnRhdGlvbiB0cmFuc2Zvcm1cbiAgaWYgKGlzTnVtYmVyKHJvdGF0ZSkgJiYgcm90YXRlICE9PSAwKSB7XG4gICAgdmFsdWVzLnB1c2goJ3JvdGF0ZSgnICsgcm90YXRlICsgJ2RlZyknKTtcbiAgfVxuXG4gIGlmIChpc051bWJlcihzY2FsZVgpICYmIHNjYWxlWCAhPT0gMSkge1xuICAgIHZhbHVlcy5wdXNoKCdzY2FsZVgoJyArIHNjYWxlWCArICcpJyk7XG4gIH1cblxuICBpZiAoaXNOdW1iZXIoc2NhbGVZKSAmJiBzY2FsZVkgIT09IDEpIHtcbiAgICB2YWx1ZXMucHVzaCgnc2NhbGVZKCcgKyBzY2FsZVkgKyAnKScpO1xuICB9XG5cbiAgdmFyIHRyYW5zZm9ybSA9IHZhbHVlcy5sZW5ndGggPyB2YWx1ZXMuam9pbignICcpIDogJ25vbmUnO1xuXG4gIHJldHVybiB7XG4gICAgV2Via2l0VHJhbnNmb3JtOiB0cmFuc2Zvcm0sXG4gICAgbXNUcmFuc2Zvcm06IHRyYW5zZm9ybSxcbiAgICB0cmFuc2Zvcm06IHRyYW5zZm9ybVxuICB9O1xufVxuXG4vKipcbiAqIEdldCB0aGUgbWF4IHJhdGlvIG9mIGEgZ3JvdXAgb2YgcG9pbnRlcnMuXG4gKiBAcGFyYW0ge3N0cmluZ30gcG9pbnRlcnMgLSBUaGUgdGFyZ2V0IHBvaW50ZXJzLlxuICogQHJldHVybnMge251bWJlcn0gVGhlIHJlc3VsdCByYXRpby5cbiAqL1xuZnVuY3Rpb24gZ2V0TWF4Wm9vbVJhdGlvKHBvaW50ZXJzKSB7XG4gIHZhciBwb2ludGVyczIgPSBhc3NpZ24oe30sIHBvaW50ZXJzKTtcbiAgdmFyIHJhdGlvcyA9IFtdO1xuXG4gIGZvckVhY2gocG9pbnRlcnMsIGZ1bmN0aW9uIChwb2ludGVyLCBwb2ludGVySWQpIHtcbiAgICBkZWxldGUgcG9pbnRlcnMyW3BvaW50ZXJJZF07XG5cbiAgICBmb3JFYWNoKHBvaW50ZXJzMiwgZnVuY3Rpb24gKHBvaW50ZXIyKSB7XG4gICAgICB2YXIgeDEgPSBNYXRoLmFicyhwb2ludGVyLnN0YXJ0WCAtIHBvaW50ZXIyLnN0YXJ0WCk7XG4gICAgICB2YXIgeTEgPSBNYXRoLmFicyhwb2ludGVyLnN0YXJ0WSAtIHBvaW50ZXIyLnN0YXJ0WSk7XG4gICAgICB2YXIgeDIgPSBNYXRoLmFicyhwb2ludGVyLmVuZFggLSBwb2ludGVyMi5lbmRYKTtcbiAgICAgIHZhciB5MiA9IE1hdGguYWJzKHBvaW50ZXIuZW5kWSAtIHBvaW50ZXIyLmVuZFkpO1xuICAgICAgdmFyIHoxID0gTWF0aC5zcXJ0KHgxICogeDEgKyB5MSAqIHkxKTtcbiAgICAgIHZhciB6MiA9IE1hdGguc3FydCh4MiAqIHgyICsgeTIgKiB5Mik7XG4gICAgICB2YXIgcmF0aW8gPSAoejIgLSB6MSkgLyB6MTtcblxuICAgICAgcmF0aW9zLnB1c2gocmF0aW8pO1xuICAgIH0pO1xuICB9KTtcblxuICByYXRpb3Muc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBNYXRoLmFicyhhKSA8IE1hdGguYWJzKGIpO1xuICB9KTtcblxuICByZXR1cm4gcmF0aW9zWzBdO1xufVxuXG4vKipcbiAqIEdldCBhIHBvaW50ZXIgZnJvbSBhbiBldmVudCBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnQgLSBUaGUgdGFyZ2V0IGV2ZW50IG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5kT25seSAtIEluZGljYXRlcyBpZiBvbmx5IHJldHVybnMgdGhlIGVuZCBwb2ludCBjb29yZGluYXRlIG9yIG5vdC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSByZXN1bHQgcG9pbnRlciBjb250YWlucyBzdGFydCBhbmQvb3IgZW5kIHBvaW50IGNvb3JkaW5hdGVzLlxuICovXG5mdW5jdGlvbiBnZXRQb2ludGVyKF9yZWYyLCBlbmRPbmx5KSB7XG4gIHZhciBwYWdlWCA9IF9yZWYyLnBhZ2VYLFxuICAgICAgcGFnZVkgPSBfcmVmMi5wYWdlWTtcblxuICB2YXIgZW5kID0ge1xuICAgIGVuZFg6IHBhZ2VYLFxuICAgIGVuZFk6IHBhZ2VZXG4gIH07XG5cbiAgcmV0dXJuIGVuZE9ubHkgPyBlbmQgOiBhc3NpZ24oe1xuICAgIHN0YXJ0WDogcGFnZVgsXG4gICAgc3RhcnRZOiBwYWdlWVxuICB9LCBlbmQpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY2VudGVyIHBvaW50IGNvb3JkaW5hdGUgb2YgYSBncm91cCBvZiBwb2ludGVycy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBwb2ludGVycyAtIFRoZSB0YXJnZXQgcG9pbnRlcnMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgY2VudGVyIHBvaW50IGNvb3JkaW5hdGUuXG4gKi9cbmZ1bmN0aW9uIGdldFBvaW50ZXJzQ2VudGVyKHBvaW50ZXJzKSB7XG4gIHZhciBwYWdlWCA9IDA7XG4gIHZhciBwYWdlWSA9IDA7XG4gIHZhciBjb3VudCA9IDA7XG5cbiAgZm9yRWFjaChwb2ludGVycywgZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgdmFyIHN0YXJ0WCA9IF9yZWYzLnN0YXJ0WCxcbiAgICAgICAgc3RhcnRZID0gX3JlZjMuc3RhcnRZO1xuXG4gICAgcGFnZVggKz0gc3RhcnRYO1xuICAgIHBhZ2VZICs9IHN0YXJ0WTtcbiAgICBjb3VudCArPSAxO1xuICB9KTtcblxuICBwYWdlWCAvPSBjb3VudDtcbiAgcGFnZVkgLz0gY291bnQ7XG5cbiAgcmV0dXJuIHtcbiAgICBwYWdlWDogcGFnZVgsXG4gICAgcGFnZVk6IHBhZ2VZXG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgZmluaXRlIG51bWJlci5cbiAqL1xudmFyIGlzRmluaXRlID0gTnVtYmVyLmlzRmluaXRlIHx8IFdJTkRPVy5pc0Zpbml0ZTtcblxuLyoqXG4gKiBHZXQgdGhlIG1heCBzaXplcyBpbiBhIHJlY3RhbmdsZSB1bmRlciB0aGUgZ2l2ZW4gYXNwZWN0IHJhdGlvLlxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBUaGUgb3JpZ2luYWwgc2l6ZXMuXG4gKiBAcGFyYW0ge3N0cmluZ30gW3R5cGU9J2NvbnRhaW4nXSAtIFRoZSBhZGp1c3QgdHlwZS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSByZXN1bHQgc2l6ZXMuXG4gKi9cbmZ1bmN0aW9uIGdldEFkanVzdGVkU2l6ZXMoX3JlZjQpIC8vIG9yICdjb3ZlcidcbntcbiAgdmFyIGFzcGVjdFJhdGlvID0gX3JlZjQuYXNwZWN0UmF0aW8sXG4gICAgICBoZWlnaHQgPSBfcmVmNC5oZWlnaHQsXG4gICAgICB3aWR0aCA9IF9yZWY0LndpZHRoO1xuICB2YXIgdHlwZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2NvbnRhaW4nO1xuXG4gIHZhciBpc1ZhbGlkTnVtYmVyID0gZnVuY3Rpb24gaXNWYWxpZE51bWJlcih2YWx1ZSkge1xuICAgIHJldHVybiBpc0Zpbml0ZSh2YWx1ZSkgJiYgdmFsdWUgPiAwO1xuICB9O1xuXG4gIGlmIChpc1ZhbGlkTnVtYmVyKHdpZHRoKSAmJiBpc1ZhbGlkTnVtYmVyKGhlaWdodCkpIHtcbiAgICB2YXIgYWRqdXN0ZWRXaWR0aCA9IGhlaWdodCAqIGFzcGVjdFJhdGlvO1xuXG4gICAgaWYgKHR5cGUgPT09ICdjb250YWluJyAmJiBhZGp1c3RlZFdpZHRoID4gd2lkdGggfHwgdHlwZSA9PT0gJ2NvdmVyJyAmJiBhZGp1c3RlZFdpZHRoIDwgd2lkdGgpIHtcbiAgICAgIGhlaWdodCA9IHdpZHRoIC8gYXNwZWN0UmF0aW87XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpZHRoID0gaGVpZ2h0ICogYXNwZWN0UmF0aW87XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzVmFsaWROdW1iZXIod2lkdGgpKSB7XG4gICAgaGVpZ2h0ID0gd2lkdGggLyBhc3BlY3RSYXRpbztcbiAgfSBlbHNlIGlmIChpc1ZhbGlkTnVtYmVyKGhlaWdodCkpIHtcbiAgICB3aWR0aCA9IGhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogd2lkdGgsXG4gICAgaGVpZ2h0OiBoZWlnaHRcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIG5ldyBzaXplcyBvZiBhIHJlY3RhbmdsZSBhZnRlciByb3RhdGVkLlxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBUaGUgb3JpZ2luYWwgc2l6ZXMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcmVzdWx0IHNpemVzLlxuICovXG5mdW5jdGlvbiBnZXRSb3RhdGVkU2l6ZXMoX3JlZjUpIHtcbiAgdmFyIHdpZHRoID0gX3JlZjUud2lkdGgsXG4gICAgICBoZWlnaHQgPSBfcmVmNS5oZWlnaHQsXG4gICAgICBkZWdyZWUgPSBfcmVmNS5kZWdyZWU7XG5cbiAgZGVncmVlID0gTWF0aC5hYnMoZGVncmVlKSAlIDE4MDtcblxuICBpZiAoZGVncmVlID09PSA5MCkge1xuICAgIHJldHVybiB7XG4gICAgICB3aWR0aDogaGVpZ2h0LFxuICAgICAgaGVpZ2h0OiB3aWR0aFxuICAgIH07XG4gIH1cblxuICB2YXIgYXJjID0gZGVncmVlICUgOTAgKiBNYXRoLlBJIC8gMTgwO1xuICB2YXIgc2luQXJjID0gTWF0aC5zaW4oYXJjKTtcbiAgdmFyIGNvc0FyYyA9IE1hdGguY29zKGFyYyk7XG4gIHZhciBuZXdXaWR0aCA9IHdpZHRoICogY29zQXJjICsgaGVpZ2h0ICogc2luQXJjO1xuICB2YXIgbmV3SGVpZ2h0ID0gd2lkdGggKiBzaW5BcmMgKyBoZWlnaHQgKiBjb3NBcmM7XG5cbiAgcmV0dXJuIGRlZ3JlZSA+IDkwID8ge1xuICAgIHdpZHRoOiBuZXdIZWlnaHQsXG4gICAgaGVpZ2h0OiBuZXdXaWR0aFxuICB9IDoge1xuICAgIHdpZHRoOiBuZXdXaWR0aCxcbiAgICBoZWlnaHQ6IG5ld0hlaWdodFxuICB9O1xufVxuXG4vKipcbiAqIEdldCBhIGNhbnZhcyB3aGljaCBkcmV3IHRoZSBnaXZlbiBpbWFnZS5cbiAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudH0gaW1hZ2UgLSBUaGUgaW1hZ2UgZm9yIGRyYXdpbmcuXG4gKiBAcGFyYW0ge09iamVjdH0gaW1hZ2VEYXRhIC0gVGhlIGltYWdlIGRhdGEuXG4gKiBAcGFyYW0ge09iamVjdH0gY2FudmFzRGF0YSAtIFRoZSBjYW52YXMgZGF0YS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gVGhlIG9wdGlvbnMuXG4gKiBAcmV0dXJucyB7SFRNTENhbnZhc0VsZW1lbnR9IFRoZSByZXN1bHQgY2FudmFzLlxuICovXG5mdW5jdGlvbiBnZXRTb3VyY2VDYW52YXMoaW1hZ2UsIF9yZWY2LCBfcmVmNywgX3JlZjgpIHtcbiAgdmFyIGltYWdlQXNwZWN0UmF0aW8gPSBfcmVmNi5hc3BlY3RSYXRpbyxcbiAgICAgIGltYWdlTmF0dXJhbFdpZHRoID0gX3JlZjYubmF0dXJhbFdpZHRoLFxuICAgICAgaW1hZ2VOYXR1cmFsSGVpZ2h0ID0gX3JlZjYubmF0dXJhbEhlaWdodCxcbiAgICAgIF9yZWY2JHJvdGF0ZSA9IF9yZWY2LnJvdGF0ZSxcbiAgICAgIHJvdGF0ZSA9IF9yZWY2JHJvdGF0ZSA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWY2JHJvdGF0ZSxcbiAgICAgIF9yZWY2JHNjYWxlWCA9IF9yZWY2LnNjYWxlWCxcbiAgICAgIHNjYWxlWCA9IF9yZWY2JHNjYWxlWCA9PT0gdW5kZWZpbmVkID8gMSA6IF9yZWY2JHNjYWxlWCxcbiAgICAgIF9yZWY2JHNjYWxlWSA9IF9yZWY2LnNjYWxlWSxcbiAgICAgIHNjYWxlWSA9IF9yZWY2JHNjYWxlWSA9PT0gdW5kZWZpbmVkID8gMSA6IF9yZWY2JHNjYWxlWTtcbiAgdmFyIGFzcGVjdFJhdGlvID0gX3JlZjcuYXNwZWN0UmF0aW8sXG4gICAgICBuYXR1cmFsV2lkdGggPSBfcmVmNy5uYXR1cmFsV2lkdGgsXG4gICAgICBuYXR1cmFsSGVpZ2h0ID0gX3JlZjcubmF0dXJhbEhlaWdodDtcbiAgdmFyIF9yZWY4JGZpbGxDb2xvciA9IF9yZWY4LmZpbGxDb2xvcixcbiAgICAgIGZpbGxDb2xvciA9IF9yZWY4JGZpbGxDb2xvciA9PT0gdW5kZWZpbmVkID8gJ3RyYW5zcGFyZW50JyA6IF9yZWY4JGZpbGxDb2xvcixcbiAgICAgIF9yZWY4JGltYWdlU21vb3RoaW5nRSA9IF9yZWY4LmltYWdlU21vb3RoaW5nRW5hYmxlZCxcbiAgICAgIGltYWdlU21vb3RoaW5nRW5hYmxlZCA9IF9yZWY4JGltYWdlU21vb3RoaW5nRSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IF9yZWY4JGltYWdlU21vb3RoaW5nRSxcbiAgICAgIF9yZWY4JGltYWdlU21vb3RoaW5nUSA9IF9yZWY4LmltYWdlU21vb3RoaW5nUXVhbGl0eSxcbiAgICAgIGltYWdlU21vb3RoaW5nUXVhbGl0eSA9IF9yZWY4JGltYWdlU21vb3RoaW5nUSA9PT0gdW5kZWZpbmVkID8gJ2xvdycgOiBfcmVmOCRpbWFnZVNtb290aGluZ1EsXG4gICAgICBfcmVmOCRtYXhXaWR0aCA9IF9yZWY4Lm1heFdpZHRoLFxuICAgICAgbWF4V2lkdGggPSBfcmVmOCRtYXhXaWR0aCA9PT0gdW5kZWZpbmVkID8gSW5maW5pdHkgOiBfcmVmOCRtYXhXaWR0aCxcbiAgICAgIF9yZWY4JG1heEhlaWdodCA9IF9yZWY4Lm1heEhlaWdodCxcbiAgICAgIG1heEhlaWdodCA9IF9yZWY4JG1heEhlaWdodCA9PT0gdW5kZWZpbmVkID8gSW5maW5pdHkgOiBfcmVmOCRtYXhIZWlnaHQsXG4gICAgICBfcmVmOCRtaW5XaWR0aCA9IF9yZWY4Lm1pbldpZHRoLFxuICAgICAgbWluV2lkdGggPSBfcmVmOCRtaW5XaWR0aCA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWY4JG1pbldpZHRoLFxuICAgICAgX3JlZjgkbWluSGVpZ2h0ID0gX3JlZjgubWluSGVpZ2h0LFxuICAgICAgbWluSGVpZ2h0ID0gX3JlZjgkbWluSGVpZ2h0ID09PSB1bmRlZmluZWQgPyAwIDogX3JlZjgkbWluSGVpZ2h0O1xuXG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgdmFyIG1heFNpemVzID0gZ2V0QWRqdXN0ZWRTaXplcyh7XG4gICAgYXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvLFxuICAgIHdpZHRoOiBtYXhXaWR0aCxcbiAgICBoZWlnaHQ6IG1heEhlaWdodFxuICB9KTtcbiAgdmFyIG1pblNpemVzID0gZ2V0QWRqdXN0ZWRTaXplcyh7XG4gICAgYXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvLFxuICAgIHdpZHRoOiBtaW5XaWR0aCxcbiAgICBoZWlnaHQ6IG1pbkhlaWdodFxuICB9LCAnY292ZXInKTtcbiAgdmFyIHdpZHRoID0gTWF0aC5taW4obWF4U2l6ZXMud2lkdGgsIE1hdGgubWF4KG1pblNpemVzLndpZHRoLCBuYXR1cmFsV2lkdGgpKTtcbiAgdmFyIGhlaWdodCA9IE1hdGgubWluKG1heFNpemVzLmhlaWdodCwgTWF0aC5tYXgobWluU2l6ZXMuaGVpZ2h0LCBuYXR1cmFsSGVpZ2h0KSk7XG5cbiAgLy8gTm90ZTogc2hvdWxkIGFsd2F5cyB1c2UgaW1hZ2UncyBuYXR1cmFsIHNpemVzIGZvciBkcmF3aW5nIGFzXG4gIC8vIGltYWdlRGF0YS5uYXR1cmFsV2lkdGggPT09IGNhbnZhc0RhdGEubmF0dXJhbEhlaWdodCB3aGVuIHJvdGF0ZSAlIDE4MCA9PT0gOTBcbiAgdmFyIGRlc3RNYXhTaXplcyA9IGdldEFkanVzdGVkU2l6ZXMoe1xuICAgIGFzcGVjdFJhdGlvOiBpbWFnZUFzcGVjdFJhdGlvLFxuICAgIHdpZHRoOiBtYXhXaWR0aCxcbiAgICBoZWlnaHQ6IG1heEhlaWdodFxuICB9KTtcbiAgdmFyIGRlc3RNaW5TaXplcyA9IGdldEFkanVzdGVkU2l6ZXMoe1xuICAgIGFzcGVjdFJhdGlvOiBpbWFnZUFzcGVjdFJhdGlvLFxuICAgIHdpZHRoOiBtaW5XaWR0aCxcbiAgICBoZWlnaHQ6IG1pbkhlaWdodFxuICB9LCAnY292ZXInKTtcbiAgdmFyIGRlc3RXaWR0aCA9IE1hdGgubWluKGRlc3RNYXhTaXplcy53aWR0aCwgTWF0aC5tYXgoZGVzdE1pblNpemVzLndpZHRoLCBpbWFnZU5hdHVyYWxXaWR0aCkpO1xuICB2YXIgZGVzdEhlaWdodCA9IE1hdGgubWluKGRlc3RNYXhTaXplcy5oZWlnaHQsIE1hdGgubWF4KGRlc3RNaW5TaXplcy5oZWlnaHQsIGltYWdlTmF0dXJhbEhlaWdodCkpO1xuICB2YXIgcGFyYW1zID0gWy1kZXN0V2lkdGggLyAyLCAtZGVzdEhlaWdodCAvIDIsIGRlc3RXaWR0aCwgZGVzdEhlaWdodF07XG5cbiAgY2FudmFzLndpZHRoID0gbm9ybWFsaXplRGVjaW1hbE51bWJlcih3aWR0aCk7XG4gIGNhbnZhcy5oZWlnaHQgPSBub3JtYWxpemVEZWNpbWFsTnVtYmVyKGhlaWdodCk7XG4gIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbENvbG9yO1xuICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICBjb250ZXh0LnNhdmUoKTtcbiAgY29udGV4dC50cmFuc2xhdGUod2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgY29udGV4dC5yb3RhdGUocm90YXRlICogTWF0aC5QSSAvIDE4MCk7XG4gIGNvbnRleHQuc2NhbGUoc2NhbGVYLCBzY2FsZVkpO1xuICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGltYWdlU21vb3RoaW5nRW5hYmxlZDtcbiAgY29udGV4dC5pbWFnZVNtb290aGluZ1F1YWxpdHkgPSBpbWFnZVNtb290aGluZ1F1YWxpdHk7XG4gIGNvbnRleHQuZHJhd0ltYWdlLmFwcGx5KGNvbnRleHQsIFtpbWFnZV0uY29uY2F0KHRvQ29uc3VtYWJsZUFycmF5KHBhcmFtcy5tYXAoZnVuY3Rpb24gKHBhcmFtKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3Iobm9ybWFsaXplRGVjaW1hbE51bWJlcihwYXJhbSkpO1xuICB9KSkpKTtcbiAgY29udGV4dC5yZXN0b3JlKCk7XG4gIHJldHVybiBjYW52YXM7XG59XG5cbnZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXG4vKipcbiAqIEdldCBzdHJpbmcgZnJvbSBjaGFyIGNvZGUgaW4gZGF0YSB2aWV3LlxuICogQHBhcmFtIHtEYXRhVmlld30gZGF0YVZpZXcgLSBUaGUgZGF0YSB2aWV3IGZvciByZWFkLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gVGhlIHN0YXJ0IGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCAtIFRoZSByZWFkIGxlbmd0aC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSByZWFkIHJlc3VsdC5cbiAqL1xuXG5mdW5jdGlvbiBnZXRTdHJpbmdGcm9tQ2hhckNvZGUoZGF0YVZpZXcsIHN0YXJ0LCBsZW5ndGgpIHtcbiAgdmFyIHN0ciA9ICcnO1xuICB2YXIgaSA9IHZvaWQgMDtcblxuICBsZW5ndGggKz0gc3RhcnQ7XG5cbiAgZm9yIChpID0gc3RhcnQ7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHN0ciArPSBmcm9tQ2hhckNvZGUoZGF0YVZpZXcuZ2V0VWludDgoaSkpO1xuICB9XG5cbiAgcmV0dXJuIHN0cjtcbn1cblxudmFyIFJFR0VYUF9EQVRBX1VSTF9IRUFEID0gL15kYXRhOi4qLC87XG5cbi8qKlxuICogVHJhbnNmb3JtIERhdGEgVVJMIHRvIGFycmF5IGJ1ZmZlci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhVVJMIC0gVGhlIERhdGEgVVJMIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm5zIHtBcnJheUJ1ZmZlcn0gVGhlIHJlc3VsdCBhcnJheSBidWZmZXIuXG4gKi9cbmZ1bmN0aW9uIGRhdGFVUkxUb0FycmF5QnVmZmVyKGRhdGFVUkwpIHtcbiAgdmFyIGJhc2U2NCA9IGRhdGFVUkwucmVwbGFjZShSRUdFWFBfREFUQV9VUkxfSEVBRCwgJycpO1xuICB2YXIgYmluYXJ5ID0gYXRvYihiYXNlNjQpO1xuICB2YXIgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYmluYXJ5Lmxlbmd0aCk7XG4gIHZhciB1aW50OCA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcblxuICBmb3JFYWNoKHVpbnQ4LCBmdW5jdGlvbiAodmFsdWUsIGkpIHtcbiAgICB1aW50OFtpXSA9IGJpbmFyeS5jaGFyQ29kZUF0KGkpO1xuICB9KTtcblxuICByZXR1cm4gYXJyYXlCdWZmZXI7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtIGFycmF5IGJ1ZmZlciB0byBEYXRhIFVSTC5cbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyIC0gVGhlIGFycmF5IGJ1ZmZlciB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge3N0cmluZ30gbWltZVR5cGUgLSBUaGUgbWltZSB0eXBlIG9mIHRoZSBEYXRhIFVSTC5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSByZXN1bHQgRGF0YSBVUkwuXG4gKi9cbmZ1bmN0aW9uIGFycmF5QnVmZmVyVG9EYXRhVVJMKGFycmF5QnVmZmVyLCBtaW1lVHlwZSkge1xuICB2YXIgdWludDggPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XG4gIHZhciBkYXRhID0gJyc7XG5cbiAgLy8gVHlwZWRBcnJheS5wcm90b3R5cGUuZm9yRWFjaCBpcyBub3Qgc3VwcG9ydGVkIGluIHNvbWUgYnJvd3NlcnMuXG4gIGZvckVhY2godWludDgsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGRhdGEgKz0gZnJvbUNoYXJDb2RlKHZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuICdkYXRhOicgKyBtaW1lVHlwZSArICc7YmFzZTY0LCcgKyBidG9hKGRhdGEpO1xufVxuXG4vKipcbiAqIEdldCBvcmllbnRhdGlvbiB2YWx1ZSBmcm9tIGdpdmVuIGFycmF5IGJ1ZmZlci5cbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyIC0gVGhlIGFycmF5IGJ1ZmZlciB0byByZWFkLlxuICogQHJldHVybnMge251bWJlcn0gVGhlIHJlYWQgb3JpZW50YXRpb24gdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldE9yaWVudGF0aW9uKGFycmF5QnVmZmVyKSB7XG4gIHZhciBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhhcnJheUJ1ZmZlcik7XG4gIHZhciBvcmllbnRhdGlvbiA9IHZvaWQgMDtcbiAgdmFyIGxpdHRsZUVuZGlhbiA9IHZvaWQgMDtcbiAgdmFyIGFwcDFTdGFydCA9IHZvaWQgMDtcbiAgdmFyIGlmZFN0YXJ0ID0gdm9pZCAwO1xuXG4gIC8vIE9ubHkgaGFuZGxlIEpQRUcgaW1hZ2UgKHN0YXJ0IGJ5IDB4RkZEOClcbiAgaWYgKGRhdGFWaWV3LmdldFVpbnQ4KDApID09PSAweEZGICYmIGRhdGFWaWV3LmdldFVpbnQ4KDEpID09PSAweEQ4KSB7XG4gICAgdmFyIGxlbmd0aCA9IGRhdGFWaWV3LmJ5dGVMZW5ndGg7XG4gICAgdmFyIG9mZnNldCA9IDI7XG5cbiAgICB3aGlsZSAob2Zmc2V0IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0KSA9PT0gMHhGRiAmJiBkYXRhVmlldy5nZXRVaW50OChvZmZzZXQgKyAxKSA9PT0gMHhFMSkge1xuICAgICAgICBhcHAxU3RhcnQgPSBvZmZzZXQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBvZmZzZXQgKz0gMTtcbiAgICB9XG4gIH1cblxuICBpZiAoYXBwMVN0YXJ0KSB7XG4gICAgdmFyIGV4aWZJRENvZGUgPSBhcHAxU3RhcnQgKyA0O1xuICAgIHZhciB0aWZmT2Zmc2V0ID0gYXBwMVN0YXJ0ICsgMTA7XG5cbiAgICBpZiAoZ2V0U3RyaW5nRnJvbUNoYXJDb2RlKGRhdGFWaWV3LCBleGlmSURDb2RlLCA0KSA9PT0gJ0V4aWYnKSB7XG4gICAgICB2YXIgZW5kaWFubmVzcyA9IGRhdGFWaWV3LmdldFVpbnQxNih0aWZmT2Zmc2V0KTtcblxuICAgICAgbGl0dGxlRW5kaWFuID0gZW5kaWFubmVzcyA9PT0gMHg0OTQ5O1xuXG4gICAgICBpZiAobGl0dGxlRW5kaWFuIHx8IGVuZGlhbm5lc3MgPT09IDB4NEQ0RCAvKiBiaWdFbmRpYW4gKi8pIHtcbiAgICAgICAgICBpZiAoZGF0YVZpZXcuZ2V0VWludDE2KHRpZmZPZmZzZXQgKyAyLCBsaXR0bGVFbmRpYW4pID09PSAweDAwMkEpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdElGRE9mZnNldCA9IGRhdGFWaWV3LmdldFVpbnQzMih0aWZmT2Zmc2V0ICsgNCwgbGl0dGxlRW5kaWFuKTtcblxuICAgICAgICAgICAgaWYgKGZpcnN0SUZET2Zmc2V0ID49IDB4MDAwMDAwMDgpIHtcbiAgICAgICAgICAgICAgaWZkU3RhcnQgPSB0aWZmT2Zmc2V0ICsgZmlyc3RJRkRPZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGlmZFN0YXJ0KSB7XG4gICAgdmFyIF9sZW5ndGggPSBkYXRhVmlldy5nZXRVaW50MTYoaWZkU3RhcnQsIGxpdHRsZUVuZGlhbik7XG4gICAgdmFyIF9vZmZzZXQgPSB2b2lkIDA7XG4gICAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgX2xlbmd0aDsgaSArPSAxKSB7XG4gICAgICBfb2Zmc2V0ID0gaWZkU3RhcnQgKyBpICogMTIgKyAyO1xuXG4gICAgICBpZiAoZGF0YVZpZXcuZ2V0VWludDE2KF9vZmZzZXQsIGxpdHRsZUVuZGlhbikgPT09IDB4MDExMiAvKiBPcmllbnRhdGlvbiAqLykge1xuICAgICAgICAgIC8vIDggaXMgdGhlIG9mZnNldCBvZiB0aGUgY3VycmVudCB0YWcncyB2YWx1ZVxuICAgICAgICAgIF9vZmZzZXQgKz0gODtcblxuICAgICAgICAgIC8vIEdldCB0aGUgb3JpZ2luYWwgb3JpZW50YXRpb24gdmFsdWVcbiAgICAgICAgICBvcmllbnRhdGlvbiA9IGRhdGFWaWV3LmdldFVpbnQxNihfb2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuXG4gICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIG9yaWVudGF0aW9uIHdpdGggaXRzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICBkYXRhVmlldy5zZXRVaW50MTYoX29mZnNldCwgMSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvcmllbnRhdGlvbjtcbn1cblxuLyoqXG4gKiBQYXJzZSBFeGlmIE9yaWVudGF0aW9uIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IG9yaWVudGF0aW9uIC0gVGhlIG9yaWVudGF0aW9uIHRvIHBhcnNlLlxuICogQHJldHVybnMge09iamVjdH0gVGhlIHBhcnNlZCByZXN1bHQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlT3JpZW50YXRpb24ob3JpZW50YXRpb24pIHtcbiAgdmFyIHJvdGF0ZSA9IDA7XG4gIHZhciBzY2FsZVggPSAxO1xuICB2YXIgc2NhbGVZID0gMTtcblxuICBzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XG4gICAgLy8gRmxpcCBob3Jpem9udGFsXG4gICAgY2FzZSAyOlxuICAgICAgc2NhbGVYID0gLTE7XG4gICAgICBicmVhaztcblxuICAgIC8vIFJvdGF0ZSBsZWZ0IDE4MMKwXG4gICAgY2FzZSAzOlxuICAgICAgcm90YXRlID0gLTE4MDtcbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gRmxpcCB2ZXJ0aWNhbFxuICAgIGNhc2UgNDpcbiAgICAgIHNjYWxlWSA9IC0xO1xuICAgICAgYnJlYWs7XG5cbiAgICAvLyBGbGlwIHZlcnRpY2FsIGFuZCByb3RhdGUgcmlnaHQgOTDCsFxuICAgIGNhc2UgNTpcbiAgICAgIHJvdGF0ZSA9IDkwO1xuICAgICAgc2NhbGVZID0gLTE7XG4gICAgICBicmVhaztcblxuICAgIC8vIFJvdGF0ZSByaWdodCA5MMKwXG4gICAgY2FzZSA2OlxuICAgICAgcm90YXRlID0gOTA7XG4gICAgICBicmVhaztcblxuICAgIC8vIEZsaXAgaG9yaXpvbnRhbCBhbmQgcm90YXRlIHJpZ2h0IDkwwrBcbiAgICBjYXNlIDc6XG4gICAgICByb3RhdGUgPSA5MDtcbiAgICAgIHNjYWxlWCA9IC0xO1xuICAgICAgYnJlYWs7XG5cbiAgICAvLyBSb3RhdGUgbGVmdCA5MMKwXG4gICAgY2FzZSA4OlxuICAgICAgcm90YXRlID0gLTkwO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByb3RhdGU6IHJvdGF0ZSxcbiAgICBzY2FsZVg6IHNjYWxlWCxcbiAgICBzY2FsZVk6IHNjYWxlWVxuICB9O1xufVxuXG52YXIgcmVuZGVyID0ge1xuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB0aGlzLmluaXRDb250YWluZXIoKTtcbiAgICB0aGlzLmluaXRDYW52YXMoKTtcbiAgICB0aGlzLmluaXRDcm9wQm94KCk7XG4gICAgdGhpcy5yZW5kZXJDYW52YXMoKTtcblxuICAgIGlmICh0aGlzLmNyb3BwZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyQ3JvcEJveCgpO1xuICAgIH1cbiAgfSxcbiAgaW5pdENvbnRhaW5lcjogZnVuY3Rpb24gaW5pdENvbnRhaW5lcigpIHtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudCxcbiAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIsXG4gICAgICAgIGNyb3BwZXIgPSB0aGlzLmNyb3BwZXI7XG5cblxuICAgIGFkZENsYXNzKGNyb3BwZXIsIENMQVNTX0hJRERFTik7XG4gICAgcmVtb3ZlQ2xhc3MoZWxlbWVudCwgQ0xBU1NfSElEREVOKTtcblxuICAgIHZhciBjb250YWluZXJEYXRhID0ge1xuICAgICAgd2lkdGg6IE1hdGgubWF4KGNvbnRhaW5lci5vZmZzZXRXaWR0aCwgTnVtYmVyKG9wdGlvbnMubWluQ29udGFpbmVyV2lkdGgpIHx8IDIwMCksXG4gICAgICBoZWlnaHQ6IE1hdGgubWF4KGNvbnRhaW5lci5vZmZzZXRIZWlnaHQsIE51bWJlcihvcHRpb25zLm1pbkNvbnRhaW5lckhlaWdodCkgfHwgMTAwKVxuICAgIH07XG5cbiAgICB0aGlzLmNvbnRhaW5lckRhdGEgPSBjb250YWluZXJEYXRhO1xuXG4gICAgc2V0U3R5bGUoY3JvcHBlciwge1xuICAgICAgd2lkdGg6IGNvbnRhaW5lckRhdGEud2lkdGgsXG4gICAgICBoZWlnaHQ6IGNvbnRhaW5lckRhdGEuaGVpZ2h0XG4gICAgfSk7XG5cbiAgICBhZGRDbGFzcyhlbGVtZW50LCBDTEFTU19ISURERU4pO1xuICAgIHJlbW92ZUNsYXNzKGNyb3BwZXIsIENMQVNTX0hJRERFTik7XG4gIH0sXG5cblxuICAvLyBDYW52YXMgKGltYWdlIHdyYXBwZXIpXG4gIGluaXRDYW52YXM6IGZ1bmN0aW9uIGluaXRDYW52YXMoKSB7XG4gICAgdmFyIGNvbnRhaW5lckRhdGEgPSB0aGlzLmNvbnRhaW5lckRhdGEsXG4gICAgICAgIGltYWdlRGF0YSA9IHRoaXMuaW1hZ2VEYXRhO1xuICAgIHZhciB2aWV3TW9kZSA9IHRoaXMub3B0aW9ucy52aWV3TW9kZTtcblxuICAgIHZhciByb3RhdGVkID0gTWF0aC5hYnMoaW1hZ2VEYXRhLnJvdGF0ZSkgJSAxODAgPT09IDkwO1xuICAgIHZhciBuYXR1cmFsV2lkdGggPSByb3RhdGVkID8gaW1hZ2VEYXRhLm5hdHVyYWxIZWlnaHQgOiBpbWFnZURhdGEubmF0dXJhbFdpZHRoO1xuICAgIHZhciBuYXR1cmFsSGVpZ2h0ID0gcm90YXRlZCA/IGltYWdlRGF0YS5uYXR1cmFsV2lkdGggOiBpbWFnZURhdGEubmF0dXJhbEhlaWdodDtcbiAgICB2YXIgYXNwZWN0UmF0aW8gPSBuYXR1cmFsV2lkdGggLyBuYXR1cmFsSGVpZ2h0O1xuICAgIHZhciBjYW52YXNXaWR0aCA9IGNvbnRhaW5lckRhdGEud2lkdGg7XG4gICAgdmFyIGNhbnZhc0hlaWdodCA9IGNvbnRhaW5lckRhdGEuaGVpZ2h0O1xuXG4gICAgaWYgKGNvbnRhaW5lckRhdGEuaGVpZ2h0ICogYXNwZWN0UmF0aW8gPiBjb250YWluZXJEYXRhLndpZHRoKSB7XG4gICAgICBpZiAodmlld01vZGUgPT09IDMpIHtcbiAgICAgICAgY2FudmFzV2lkdGggPSBjb250YWluZXJEYXRhLmhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FudmFzSGVpZ2h0ID0gY29udGFpbmVyRGF0YS53aWR0aCAvIGFzcGVjdFJhdGlvO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodmlld01vZGUgPT09IDMpIHtcbiAgICAgIGNhbnZhc0hlaWdodCA9IGNvbnRhaW5lckRhdGEud2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICB9IGVsc2Uge1xuICAgICAgY2FudmFzV2lkdGggPSBjb250YWluZXJEYXRhLmhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgIH1cblxuICAgIHZhciBjYW52YXNEYXRhID0ge1xuICAgICAgYXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvLFxuICAgICAgbmF0dXJhbFdpZHRoOiBuYXR1cmFsV2lkdGgsXG4gICAgICBuYXR1cmFsSGVpZ2h0OiBuYXR1cmFsSGVpZ2h0LFxuICAgICAgd2lkdGg6IGNhbnZhc1dpZHRoLFxuICAgICAgaGVpZ2h0OiBjYW52YXNIZWlnaHRcbiAgICB9O1xuXG4gICAgY2FudmFzRGF0YS5sZWZ0ID0gKGNvbnRhaW5lckRhdGEud2lkdGggLSBjYW52YXNXaWR0aCkgLyAyO1xuICAgIGNhbnZhc0RhdGEudG9wID0gKGNvbnRhaW5lckRhdGEuaGVpZ2h0IC0gY2FudmFzSGVpZ2h0KSAvIDI7XG4gICAgY2FudmFzRGF0YS5vbGRMZWZ0ID0gY2FudmFzRGF0YS5sZWZ0O1xuICAgIGNhbnZhc0RhdGEub2xkVG9wID0gY2FudmFzRGF0YS50b3A7XG5cbiAgICB0aGlzLmNhbnZhc0RhdGEgPSBjYW52YXNEYXRhO1xuICAgIHRoaXMubGltaXRlZCA9IHZpZXdNb2RlID09PSAxIHx8IHZpZXdNb2RlID09PSAyO1xuICAgIHRoaXMubGltaXRDYW52YXModHJ1ZSwgdHJ1ZSk7XG4gICAgdGhpcy5pbml0aWFsSW1hZ2VEYXRhID0gYXNzaWduKHt9LCBpbWFnZURhdGEpO1xuICAgIHRoaXMuaW5pdGlhbENhbnZhc0RhdGEgPSBhc3NpZ24oe30sIGNhbnZhc0RhdGEpO1xuICB9LFxuICBsaW1pdENhbnZhczogZnVuY3Rpb24gbGltaXRDYW52YXMoc2l6ZUxpbWl0ZWQsIHBvc2l0aW9uTGltaXRlZCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjb250YWluZXJEYXRhID0gdGhpcy5jb250YWluZXJEYXRhLFxuICAgICAgICBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhLFxuICAgICAgICBjcm9wQm94RGF0YSA9IHRoaXMuY3JvcEJveERhdGE7XG4gICAgdmFyIHZpZXdNb2RlID0gb3B0aW9ucy52aWV3TW9kZTtcbiAgICB2YXIgYXNwZWN0UmF0aW8gPSBjYW52YXNEYXRhLmFzcGVjdFJhdGlvO1xuXG4gICAgdmFyIGNyb3BwZWQgPSB0aGlzLmNyb3BwZWQgJiYgY3JvcEJveERhdGE7XG5cbiAgICBpZiAoc2l6ZUxpbWl0ZWQpIHtcbiAgICAgIHZhciBtaW5DYW52YXNXaWR0aCA9IE51bWJlcihvcHRpb25zLm1pbkNhbnZhc1dpZHRoKSB8fCAwO1xuICAgICAgdmFyIG1pbkNhbnZhc0hlaWdodCA9IE51bWJlcihvcHRpb25zLm1pbkNhbnZhc0hlaWdodCkgfHwgMDtcblxuICAgICAgaWYgKHZpZXdNb2RlID4gMSkge1xuICAgICAgICBtaW5DYW52YXNXaWR0aCA9IE1hdGgubWF4KG1pbkNhbnZhc1dpZHRoLCBjb250YWluZXJEYXRhLndpZHRoKTtcbiAgICAgICAgbWluQ2FudmFzSGVpZ2h0ID0gTWF0aC5tYXgobWluQ2FudmFzSGVpZ2h0LCBjb250YWluZXJEYXRhLmhlaWdodCk7XG5cbiAgICAgICAgaWYgKHZpZXdNb2RlID09PSAzKSB7XG4gICAgICAgICAgaWYgKG1pbkNhbnZhc0hlaWdodCAqIGFzcGVjdFJhdGlvID4gbWluQ2FudmFzV2lkdGgpIHtcbiAgICAgICAgICAgIG1pbkNhbnZhc1dpZHRoID0gbWluQ2FudmFzSGVpZ2h0ICogYXNwZWN0UmF0aW87XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1pbkNhbnZhc0hlaWdodCA9IG1pbkNhbnZhc1dpZHRoIC8gYXNwZWN0UmF0aW87XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHZpZXdNb2RlID4gMCkge1xuICAgICAgICBpZiAobWluQ2FudmFzV2lkdGgpIHtcbiAgICAgICAgICBtaW5DYW52YXNXaWR0aCA9IE1hdGgubWF4KG1pbkNhbnZhc1dpZHRoLCBjcm9wcGVkID8gY3JvcEJveERhdGEud2lkdGggOiAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChtaW5DYW52YXNIZWlnaHQpIHtcbiAgICAgICAgICBtaW5DYW52YXNIZWlnaHQgPSBNYXRoLm1heChtaW5DYW52YXNIZWlnaHQsIGNyb3BwZWQgPyBjcm9wQm94RGF0YS5oZWlnaHQgOiAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChjcm9wcGVkKSB7XG4gICAgICAgICAgbWluQ2FudmFzV2lkdGggPSBjcm9wQm94RGF0YS53aWR0aDtcbiAgICAgICAgICBtaW5DYW52YXNIZWlnaHQgPSBjcm9wQm94RGF0YS5oZWlnaHQ7XG5cbiAgICAgICAgICBpZiAobWluQ2FudmFzSGVpZ2h0ICogYXNwZWN0UmF0aW8gPiBtaW5DYW52YXNXaWR0aCkge1xuICAgICAgICAgICAgbWluQ2FudmFzV2lkdGggPSBtaW5DYW52YXNIZWlnaHQgKiBhc3BlY3RSYXRpbztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWluQ2FudmFzSGVpZ2h0ID0gbWluQ2FudmFzV2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIF9nZXRBZGp1c3RlZFNpemVzID0gZ2V0QWRqdXN0ZWRTaXplcyh7XG4gICAgICAgIGFzcGVjdFJhdGlvOiBhc3BlY3RSYXRpbyxcbiAgICAgICAgd2lkdGg6IG1pbkNhbnZhc1dpZHRoLFxuICAgICAgICBoZWlnaHQ6IG1pbkNhbnZhc0hlaWdodFxuICAgICAgfSk7XG5cbiAgICAgIG1pbkNhbnZhc1dpZHRoID0gX2dldEFkanVzdGVkU2l6ZXMud2lkdGg7XG4gICAgICBtaW5DYW52YXNIZWlnaHQgPSBfZ2V0QWRqdXN0ZWRTaXplcy5oZWlnaHQ7XG5cblxuICAgICAgY2FudmFzRGF0YS5taW5XaWR0aCA9IG1pbkNhbnZhc1dpZHRoO1xuICAgICAgY2FudmFzRGF0YS5taW5IZWlnaHQgPSBtaW5DYW52YXNIZWlnaHQ7XG4gICAgICBjYW52YXNEYXRhLm1heFdpZHRoID0gSW5maW5pdHk7XG4gICAgICBjYW52YXNEYXRhLm1heEhlaWdodCA9IEluZmluaXR5O1xuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbkxpbWl0ZWQpIHtcbiAgICAgIGlmICh2aWV3TW9kZSkge1xuICAgICAgICB2YXIgbmV3Q2FudmFzTGVmdCA9IGNvbnRhaW5lckRhdGEud2lkdGggLSBjYW52YXNEYXRhLndpZHRoO1xuICAgICAgICB2YXIgbmV3Q2FudmFzVG9wID0gY29udGFpbmVyRGF0YS5oZWlnaHQgLSBjYW52YXNEYXRhLmhlaWdodDtcblxuICAgICAgICBjYW52YXNEYXRhLm1pbkxlZnQgPSBNYXRoLm1pbigwLCBuZXdDYW52YXNMZWZ0KTtcbiAgICAgICAgY2FudmFzRGF0YS5taW5Ub3AgPSBNYXRoLm1pbigwLCBuZXdDYW52YXNUb3ApO1xuICAgICAgICBjYW52YXNEYXRhLm1heExlZnQgPSBNYXRoLm1heCgwLCBuZXdDYW52YXNMZWZ0KTtcbiAgICAgICAgY2FudmFzRGF0YS5tYXhUb3AgPSBNYXRoLm1heCgwLCBuZXdDYW52YXNUb3ApO1xuXG4gICAgICAgIGlmIChjcm9wcGVkICYmIHRoaXMubGltaXRlZCkge1xuICAgICAgICAgIGNhbnZhc0RhdGEubWluTGVmdCA9IE1hdGgubWluKGNyb3BCb3hEYXRhLmxlZnQsIGNyb3BCb3hEYXRhLmxlZnQgKyAoY3JvcEJveERhdGEud2lkdGggLSBjYW52YXNEYXRhLndpZHRoKSk7XG4gICAgICAgICAgY2FudmFzRGF0YS5taW5Ub3AgPSBNYXRoLm1pbihjcm9wQm94RGF0YS50b3AsIGNyb3BCb3hEYXRhLnRvcCArIChjcm9wQm94RGF0YS5oZWlnaHQgLSBjYW52YXNEYXRhLmhlaWdodCkpO1xuICAgICAgICAgIGNhbnZhc0RhdGEubWF4TGVmdCA9IGNyb3BCb3hEYXRhLmxlZnQ7XG4gICAgICAgICAgY2FudmFzRGF0YS5tYXhUb3AgPSBjcm9wQm94RGF0YS50b3A7XG5cbiAgICAgICAgICBpZiAodmlld01vZGUgPT09IDIpIHtcbiAgICAgICAgICAgIGlmIChjYW52YXNEYXRhLndpZHRoID49IGNvbnRhaW5lckRhdGEud2lkdGgpIHtcbiAgICAgICAgICAgICAgY2FudmFzRGF0YS5taW5MZWZ0ID0gTWF0aC5taW4oMCwgbmV3Q2FudmFzTGVmdCk7XG4gICAgICAgICAgICAgIGNhbnZhc0RhdGEubWF4TGVmdCA9IE1hdGgubWF4KDAsIG5ld0NhbnZhc0xlZnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2FudmFzRGF0YS5oZWlnaHQgPj0gY29udGFpbmVyRGF0YS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgY2FudmFzRGF0YS5taW5Ub3AgPSBNYXRoLm1pbigwLCBuZXdDYW52YXNUb3ApO1xuICAgICAgICAgICAgICBjYW52YXNEYXRhLm1heFRvcCA9IE1hdGgubWF4KDAsIG5ld0NhbnZhc1RvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYW52YXNEYXRhLm1pbkxlZnQgPSAtY2FudmFzRGF0YS53aWR0aDtcbiAgICAgICAgY2FudmFzRGF0YS5taW5Ub3AgPSAtY2FudmFzRGF0YS5oZWlnaHQ7XG4gICAgICAgIGNhbnZhc0RhdGEubWF4TGVmdCA9IGNvbnRhaW5lckRhdGEud2lkdGg7XG4gICAgICAgIGNhbnZhc0RhdGEubWF4VG9wID0gY29udGFpbmVyRGF0YS5oZWlnaHQ7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICByZW5kZXJDYW52YXM6IGZ1bmN0aW9uIHJlbmRlckNhbnZhcyhjaGFuZ2VkLCB0cmFuc2Zvcm1lZCkge1xuICAgIHZhciBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhLFxuICAgICAgICBpbWFnZURhdGEgPSB0aGlzLmltYWdlRGF0YTtcblxuXG4gICAgaWYgKHRyYW5zZm9ybWVkKSB7XG4gICAgICB2YXIgX2dldFJvdGF0ZWRTaXplcyA9IGdldFJvdGF0ZWRTaXplcyh7XG4gICAgICAgIHdpZHRoOiBpbWFnZURhdGEubmF0dXJhbFdpZHRoICogTWF0aC5hYnMoaW1hZ2VEYXRhLnNjYWxlWCB8fCAxKSxcbiAgICAgICAgaGVpZ2h0OiBpbWFnZURhdGEubmF0dXJhbEhlaWdodCAqIE1hdGguYWJzKGltYWdlRGF0YS5zY2FsZVkgfHwgMSksXG4gICAgICAgIGRlZ3JlZTogaW1hZ2VEYXRhLnJvdGF0ZSB8fCAwXG4gICAgICB9KSxcbiAgICAgICAgICBuYXR1cmFsV2lkdGggPSBfZ2V0Um90YXRlZFNpemVzLndpZHRoLFxuICAgICAgICAgIG5hdHVyYWxIZWlnaHQgPSBfZ2V0Um90YXRlZFNpemVzLmhlaWdodDtcblxuICAgICAgdmFyIHdpZHRoID0gY2FudmFzRGF0YS53aWR0aCAqIChuYXR1cmFsV2lkdGggLyBjYW52YXNEYXRhLm5hdHVyYWxXaWR0aCk7XG4gICAgICB2YXIgaGVpZ2h0ID0gY2FudmFzRGF0YS5oZWlnaHQgKiAobmF0dXJhbEhlaWdodCAvIGNhbnZhc0RhdGEubmF0dXJhbEhlaWdodCk7XG5cbiAgICAgIGNhbnZhc0RhdGEubGVmdCAtPSAod2lkdGggLSBjYW52YXNEYXRhLndpZHRoKSAvIDI7XG4gICAgICBjYW52YXNEYXRhLnRvcCAtPSAoaGVpZ2h0IC0gY2FudmFzRGF0YS5oZWlnaHQpIC8gMjtcbiAgICAgIGNhbnZhc0RhdGEud2lkdGggPSB3aWR0aDtcbiAgICAgIGNhbnZhc0RhdGEuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgY2FudmFzRGF0YS5hc3BlY3RSYXRpbyA9IG5hdHVyYWxXaWR0aCAvIG5hdHVyYWxIZWlnaHQ7XG4gICAgICBjYW52YXNEYXRhLm5hdHVyYWxXaWR0aCA9IG5hdHVyYWxXaWR0aDtcbiAgICAgIGNhbnZhc0RhdGEubmF0dXJhbEhlaWdodCA9IG5hdHVyYWxIZWlnaHQ7XG4gICAgICB0aGlzLmxpbWl0Q2FudmFzKHRydWUsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoY2FudmFzRGF0YS53aWR0aCA+IGNhbnZhc0RhdGEubWF4V2lkdGggfHwgY2FudmFzRGF0YS53aWR0aCA8IGNhbnZhc0RhdGEubWluV2lkdGgpIHtcbiAgICAgIGNhbnZhc0RhdGEubGVmdCA9IGNhbnZhc0RhdGEub2xkTGVmdDtcbiAgICB9XG5cbiAgICBpZiAoY2FudmFzRGF0YS5oZWlnaHQgPiBjYW52YXNEYXRhLm1heEhlaWdodCB8fCBjYW52YXNEYXRhLmhlaWdodCA8IGNhbnZhc0RhdGEubWluSGVpZ2h0KSB7XG4gICAgICBjYW52YXNEYXRhLnRvcCA9IGNhbnZhc0RhdGEub2xkVG9wO1xuICAgIH1cblxuICAgIGNhbnZhc0RhdGEud2lkdGggPSBNYXRoLm1pbihNYXRoLm1heChjYW52YXNEYXRhLndpZHRoLCBjYW52YXNEYXRhLm1pbldpZHRoKSwgY2FudmFzRGF0YS5tYXhXaWR0aCk7XG4gICAgY2FudmFzRGF0YS5oZWlnaHQgPSBNYXRoLm1pbihNYXRoLm1heChjYW52YXNEYXRhLmhlaWdodCwgY2FudmFzRGF0YS5taW5IZWlnaHQpLCBjYW52YXNEYXRhLm1heEhlaWdodCk7XG5cbiAgICB0aGlzLmxpbWl0Q2FudmFzKGZhbHNlLCB0cnVlKTtcblxuICAgIGNhbnZhc0RhdGEubGVmdCA9IE1hdGgubWluKE1hdGgubWF4KGNhbnZhc0RhdGEubGVmdCwgY2FudmFzRGF0YS5taW5MZWZ0KSwgY2FudmFzRGF0YS5tYXhMZWZ0KTtcbiAgICBjYW52YXNEYXRhLnRvcCA9IE1hdGgubWluKE1hdGgubWF4KGNhbnZhc0RhdGEudG9wLCBjYW52YXNEYXRhLm1pblRvcCksIGNhbnZhc0RhdGEubWF4VG9wKTtcbiAgICBjYW52YXNEYXRhLm9sZExlZnQgPSBjYW52YXNEYXRhLmxlZnQ7XG4gICAgY2FudmFzRGF0YS5vbGRUb3AgPSBjYW52YXNEYXRhLnRvcDtcblxuICAgIHNldFN0eWxlKHRoaXMuY2FudmFzLCBhc3NpZ24oe1xuICAgICAgd2lkdGg6IGNhbnZhc0RhdGEud2lkdGgsXG4gICAgICBoZWlnaHQ6IGNhbnZhc0RhdGEuaGVpZ2h0XG4gICAgfSwgZ2V0VHJhbnNmb3Jtcyh7XG4gICAgICB0cmFuc2xhdGVYOiBjYW52YXNEYXRhLmxlZnQsXG4gICAgICB0cmFuc2xhdGVZOiBjYW52YXNEYXRhLnRvcFxuICAgIH0pKSk7XG5cbiAgICB0aGlzLnJlbmRlckltYWdlKGNoYW5nZWQpO1xuXG4gICAgaWYgKHRoaXMuY3JvcHBlZCAmJiB0aGlzLmxpbWl0ZWQpIHtcbiAgICAgIHRoaXMubGltaXRDcm9wQm94KHRydWUsIHRydWUpO1xuICAgIH1cbiAgfSxcbiAgcmVuZGVySW1hZ2U6IGZ1bmN0aW9uIHJlbmRlckltYWdlKGNoYW5nZWQpIHtcbiAgICB2YXIgY2FudmFzRGF0YSA9IHRoaXMuY2FudmFzRGF0YSxcbiAgICAgICAgaW1hZ2VEYXRhID0gdGhpcy5pbWFnZURhdGE7XG5cbiAgICB2YXIgd2lkdGggPSBpbWFnZURhdGEubmF0dXJhbFdpZHRoICogKGNhbnZhc0RhdGEud2lkdGggLyBjYW52YXNEYXRhLm5hdHVyYWxXaWR0aCk7XG4gICAgdmFyIGhlaWdodCA9IGltYWdlRGF0YS5uYXR1cmFsSGVpZ2h0ICogKGNhbnZhc0RhdGEuaGVpZ2h0IC8gY2FudmFzRGF0YS5uYXR1cmFsSGVpZ2h0KTtcblxuICAgIGFzc2lnbihpbWFnZURhdGEsIHtcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgbGVmdDogKGNhbnZhc0RhdGEud2lkdGggLSB3aWR0aCkgLyAyLFxuICAgICAgdG9wOiAoY2FudmFzRGF0YS5oZWlnaHQgLSBoZWlnaHQpIC8gMlxuICAgIH0pO1xuICAgIHNldFN0eWxlKHRoaXMuaW1hZ2UsIGFzc2lnbih7XG4gICAgICB3aWR0aDogaW1hZ2VEYXRhLndpZHRoLFxuICAgICAgaGVpZ2h0OiBpbWFnZURhdGEuaGVpZ2h0XG4gICAgfSwgZ2V0VHJhbnNmb3Jtcyhhc3NpZ24oe1xuICAgICAgdHJhbnNsYXRlWDogaW1hZ2VEYXRhLmxlZnQsXG4gICAgICB0cmFuc2xhdGVZOiBpbWFnZURhdGEudG9wXG4gICAgfSwgaW1hZ2VEYXRhKSkpKTtcblxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLm91dHB1dCgpO1xuICAgIH1cbiAgfSxcbiAgaW5pdENyb3BCb3g6IGZ1bmN0aW9uIGluaXRDcm9wQm94KCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhO1xuICAgIHZhciBhc3BlY3RSYXRpbyA9IG9wdGlvbnMuYXNwZWN0UmF0aW87XG5cbiAgICB2YXIgYXV0b0Nyb3BBcmVhID0gTnVtYmVyKG9wdGlvbnMuYXV0b0Nyb3BBcmVhKSB8fCAwLjg7XG4gICAgdmFyIGNyb3BCb3hEYXRhID0ge1xuICAgICAgd2lkdGg6IGNhbnZhc0RhdGEud2lkdGgsXG4gICAgICBoZWlnaHQ6IGNhbnZhc0RhdGEuaGVpZ2h0XG4gICAgfTtcblxuICAgIGlmIChhc3BlY3RSYXRpbykge1xuICAgICAgaWYgKGNhbnZhc0RhdGEuaGVpZ2h0ICogYXNwZWN0UmF0aW8gPiBjYW52YXNEYXRhLndpZHRoKSB7XG4gICAgICAgIGNyb3BCb3hEYXRhLmhlaWdodCA9IGNyb3BCb3hEYXRhLndpZHRoIC8gYXNwZWN0UmF0aW87XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjcm9wQm94RGF0YS53aWR0aCA9IGNyb3BCb3hEYXRhLmhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY3JvcEJveERhdGEgPSBjcm9wQm94RGF0YTtcbiAgICB0aGlzLmxpbWl0Q3JvcEJveCh0cnVlLCB0cnVlKTtcblxuICAgIC8vIEluaXRpYWxpemUgYXV0byBjcm9wIGFyZWFcbiAgICBjcm9wQm94RGF0YS53aWR0aCA9IE1hdGgubWluKE1hdGgubWF4KGNyb3BCb3hEYXRhLndpZHRoLCBjcm9wQm94RGF0YS5taW5XaWR0aCksIGNyb3BCb3hEYXRhLm1heFdpZHRoKTtcbiAgICBjcm9wQm94RGF0YS5oZWlnaHQgPSBNYXRoLm1pbihNYXRoLm1heChjcm9wQm94RGF0YS5oZWlnaHQsIGNyb3BCb3hEYXRhLm1pbkhlaWdodCksIGNyb3BCb3hEYXRhLm1heEhlaWdodCk7XG5cbiAgICAvLyBUaGUgd2lkdGgvaGVpZ2h0IG9mIGF1dG8gY3JvcCBhcmVhIG11c3QgbGFyZ2UgdGhhbiBcIm1pbldpZHRoL0hlaWdodFwiXG4gICAgY3JvcEJveERhdGEud2lkdGggPSBNYXRoLm1heChjcm9wQm94RGF0YS5taW5XaWR0aCwgY3JvcEJveERhdGEud2lkdGggKiBhdXRvQ3JvcEFyZWEpO1xuICAgIGNyb3BCb3hEYXRhLmhlaWdodCA9IE1hdGgubWF4KGNyb3BCb3hEYXRhLm1pbkhlaWdodCwgY3JvcEJveERhdGEuaGVpZ2h0ICogYXV0b0Nyb3BBcmVhKTtcbiAgICBjcm9wQm94RGF0YS5sZWZ0ID0gY2FudmFzRGF0YS5sZWZ0ICsgKGNhbnZhc0RhdGEud2lkdGggLSBjcm9wQm94RGF0YS53aWR0aCkgLyAyO1xuICAgIGNyb3BCb3hEYXRhLnRvcCA9IGNhbnZhc0RhdGEudG9wICsgKGNhbnZhc0RhdGEuaGVpZ2h0IC0gY3JvcEJveERhdGEuaGVpZ2h0KSAvIDI7XG4gICAgY3JvcEJveERhdGEub2xkTGVmdCA9IGNyb3BCb3hEYXRhLmxlZnQ7XG4gICAgY3JvcEJveERhdGEub2xkVG9wID0gY3JvcEJveERhdGEudG9wO1xuXG4gICAgdGhpcy5pbml0aWFsQ3JvcEJveERhdGEgPSBhc3NpZ24oe30sIGNyb3BCb3hEYXRhKTtcbiAgfSxcbiAgbGltaXRDcm9wQm94OiBmdW5jdGlvbiBsaW1pdENyb3BCb3goc2l6ZUxpbWl0ZWQsIHBvc2l0aW9uTGltaXRlZCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjb250YWluZXJEYXRhID0gdGhpcy5jb250YWluZXJEYXRhLFxuICAgICAgICBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhLFxuICAgICAgICBjcm9wQm94RGF0YSA9IHRoaXMuY3JvcEJveERhdGEsXG4gICAgICAgIGxpbWl0ZWQgPSB0aGlzLmxpbWl0ZWQ7XG4gICAgdmFyIGFzcGVjdFJhdGlvID0gb3B0aW9ucy5hc3BlY3RSYXRpbztcblxuXG4gICAgaWYgKHNpemVMaW1pdGVkKSB7XG4gICAgICB2YXIgbWluQ3JvcEJveFdpZHRoID0gTnVtYmVyKG9wdGlvbnMubWluQ3JvcEJveFdpZHRoKSB8fCAwO1xuICAgICAgdmFyIG1pbkNyb3BCb3hIZWlnaHQgPSBOdW1iZXIob3B0aW9ucy5taW5Dcm9wQm94SGVpZ2h0KSB8fCAwO1xuICAgICAgdmFyIG1heENyb3BCb3hXaWR0aCA9IE1hdGgubWluKGNvbnRhaW5lckRhdGEud2lkdGgsIGxpbWl0ZWQgPyBjYW52YXNEYXRhLndpZHRoIDogY29udGFpbmVyRGF0YS53aWR0aCk7XG4gICAgICB2YXIgbWF4Q3JvcEJveEhlaWdodCA9IE1hdGgubWluKGNvbnRhaW5lckRhdGEuaGVpZ2h0LCBsaW1pdGVkID8gY2FudmFzRGF0YS5oZWlnaHQgOiBjb250YWluZXJEYXRhLmhlaWdodCk7XG5cbiAgICAgIC8vIFRoZSBtaW4vbWF4Q3JvcEJveFdpZHRoL0hlaWdodCBtdXN0IGJlIGxlc3MgdGhhbiBjb250YWluZXIncyB3aWR0aC9oZWlnaHRcbiAgICAgIG1pbkNyb3BCb3hXaWR0aCA9IE1hdGgubWluKG1pbkNyb3BCb3hXaWR0aCwgY29udGFpbmVyRGF0YS53aWR0aCk7XG4gICAgICBtaW5Dcm9wQm94SGVpZ2h0ID0gTWF0aC5taW4obWluQ3JvcEJveEhlaWdodCwgY29udGFpbmVyRGF0YS5oZWlnaHQpO1xuXG4gICAgICBpZiAoYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgaWYgKG1pbkNyb3BCb3hXaWR0aCAmJiBtaW5Dcm9wQm94SGVpZ2h0KSB7XG4gICAgICAgICAgaWYgKG1pbkNyb3BCb3hIZWlnaHQgKiBhc3BlY3RSYXRpbyA+IG1pbkNyb3BCb3hXaWR0aCkge1xuICAgICAgICAgICAgbWluQ3JvcEJveEhlaWdodCA9IG1pbkNyb3BCb3hXaWR0aCAvIGFzcGVjdFJhdGlvO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtaW5Dcm9wQm94V2lkdGggPSBtaW5Dcm9wQm94SGVpZ2h0ICogYXNwZWN0UmF0aW87XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG1pbkNyb3BCb3hXaWR0aCkge1xuICAgICAgICAgIG1pbkNyb3BCb3hIZWlnaHQgPSBtaW5Dcm9wQm94V2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgfSBlbHNlIGlmIChtaW5Dcm9wQm94SGVpZ2h0KSB7XG4gICAgICAgICAgbWluQ3JvcEJveFdpZHRoID0gbWluQ3JvcEJveEhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1heENyb3BCb3hIZWlnaHQgKiBhc3BlY3RSYXRpbyA+IG1heENyb3BCb3hXaWR0aCkge1xuICAgICAgICAgIG1heENyb3BCb3hIZWlnaHQgPSBtYXhDcm9wQm94V2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXhDcm9wQm94V2lkdGggPSBtYXhDcm9wQm94SGVpZ2h0ICogYXNwZWN0UmF0aW87XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVGhlIG1pbldpZHRoL0hlaWdodCBtdXN0IGJlIGxlc3MgdGhhbiBtYXhXaWR0aC9IZWlnaHRcbiAgICAgIGNyb3BCb3hEYXRhLm1pbldpZHRoID0gTWF0aC5taW4obWluQ3JvcEJveFdpZHRoLCBtYXhDcm9wQm94V2lkdGgpO1xuICAgICAgY3JvcEJveERhdGEubWluSGVpZ2h0ID0gTWF0aC5taW4obWluQ3JvcEJveEhlaWdodCwgbWF4Q3JvcEJveEhlaWdodCk7XG4gICAgICBjcm9wQm94RGF0YS5tYXhXaWR0aCA9IG1heENyb3BCb3hXaWR0aDtcbiAgICAgIGNyb3BCb3hEYXRhLm1heEhlaWdodCA9IG1heENyb3BCb3hIZWlnaHQ7XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uTGltaXRlZCkge1xuICAgICAgaWYgKGxpbWl0ZWQpIHtcbiAgICAgICAgY3JvcEJveERhdGEubWluTGVmdCA9IE1hdGgubWF4KDAsIGNhbnZhc0RhdGEubGVmdCk7XG4gICAgICAgIGNyb3BCb3hEYXRhLm1pblRvcCA9IE1hdGgubWF4KDAsIGNhbnZhc0RhdGEudG9wKTtcbiAgICAgICAgY3JvcEJveERhdGEubWF4TGVmdCA9IE1hdGgubWluKGNvbnRhaW5lckRhdGEud2lkdGgsIGNhbnZhc0RhdGEubGVmdCArIGNhbnZhc0RhdGEud2lkdGgpIC0gY3JvcEJveERhdGEud2lkdGg7XG4gICAgICAgIGNyb3BCb3hEYXRhLm1heFRvcCA9IE1hdGgubWluKGNvbnRhaW5lckRhdGEuaGVpZ2h0LCBjYW52YXNEYXRhLnRvcCArIGNhbnZhc0RhdGEuaGVpZ2h0KSAtIGNyb3BCb3hEYXRhLmhlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNyb3BCb3hEYXRhLm1pbkxlZnQgPSAwO1xuICAgICAgICBjcm9wQm94RGF0YS5taW5Ub3AgPSAwO1xuICAgICAgICBjcm9wQm94RGF0YS5tYXhMZWZ0ID0gY29udGFpbmVyRGF0YS53aWR0aCAtIGNyb3BCb3hEYXRhLndpZHRoO1xuICAgICAgICBjcm9wQm94RGF0YS5tYXhUb3AgPSBjb250YWluZXJEYXRhLmhlaWdodCAtIGNyb3BCb3hEYXRhLmhlaWdodDtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHJlbmRlckNyb3BCb3g6IGZ1bmN0aW9uIHJlbmRlckNyb3BCb3goKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIGNvbnRhaW5lckRhdGEgPSB0aGlzLmNvbnRhaW5lckRhdGEsXG4gICAgICAgIGNyb3BCb3hEYXRhID0gdGhpcy5jcm9wQm94RGF0YTtcblxuXG4gICAgaWYgKGNyb3BCb3hEYXRhLndpZHRoID4gY3JvcEJveERhdGEubWF4V2lkdGggfHwgY3JvcEJveERhdGEud2lkdGggPCBjcm9wQm94RGF0YS5taW5XaWR0aCkge1xuICAgICAgY3JvcEJveERhdGEubGVmdCA9IGNyb3BCb3hEYXRhLm9sZExlZnQ7XG4gICAgfVxuXG4gICAgaWYgKGNyb3BCb3hEYXRhLmhlaWdodCA+IGNyb3BCb3hEYXRhLm1heEhlaWdodCB8fCBjcm9wQm94RGF0YS5oZWlnaHQgPCBjcm9wQm94RGF0YS5taW5IZWlnaHQpIHtcbiAgICAgIGNyb3BCb3hEYXRhLnRvcCA9IGNyb3BCb3hEYXRhLm9sZFRvcDtcbiAgICB9XG5cbiAgICBjcm9wQm94RGF0YS53aWR0aCA9IE1hdGgubWluKE1hdGgubWF4KGNyb3BCb3hEYXRhLndpZHRoLCBjcm9wQm94RGF0YS5taW5XaWR0aCksIGNyb3BCb3hEYXRhLm1heFdpZHRoKTtcbiAgICBjcm9wQm94RGF0YS5oZWlnaHQgPSBNYXRoLm1pbihNYXRoLm1heChjcm9wQm94RGF0YS5oZWlnaHQsIGNyb3BCb3hEYXRhLm1pbkhlaWdodCksIGNyb3BCb3hEYXRhLm1heEhlaWdodCk7XG5cbiAgICB0aGlzLmxpbWl0Q3JvcEJveChmYWxzZSwgdHJ1ZSk7XG5cbiAgICBjcm9wQm94RGF0YS5sZWZ0ID0gTWF0aC5taW4oTWF0aC5tYXgoY3JvcEJveERhdGEubGVmdCwgY3JvcEJveERhdGEubWluTGVmdCksIGNyb3BCb3hEYXRhLm1heExlZnQpO1xuICAgIGNyb3BCb3hEYXRhLnRvcCA9IE1hdGgubWluKE1hdGgubWF4KGNyb3BCb3hEYXRhLnRvcCwgY3JvcEJveERhdGEubWluVG9wKSwgY3JvcEJveERhdGEubWF4VG9wKTtcbiAgICBjcm9wQm94RGF0YS5vbGRMZWZ0ID0gY3JvcEJveERhdGEubGVmdDtcbiAgICBjcm9wQm94RGF0YS5vbGRUb3AgPSBjcm9wQm94RGF0YS50b3A7XG5cbiAgICBpZiAob3B0aW9ucy5tb3ZhYmxlICYmIG9wdGlvbnMuY3JvcEJveE1vdmFibGUpIHtcbiAgICAgIC8vIFR1cm4gdG8gbW92ZSB0aGUgY2FudmFzIHdoZW4gdGhlIGNyb3AgYm94IGlzIGVxdWFsIHRvIHRoZSBjb250YWluZXJcbiAgICAgIHNldERhdGEodGhpcy5mYWNlLCBEQVRBX0FDVElPTiwgY3JvcEJveERhdGEud2lkdGggPj0gY29udGFpbmVyRGF0YS53aWR0aCAmJiBjcm9wQm94RGF0YS5oZWlnaHQgPj0gY29udGFpbmVyRGF0YS5oZWlnaHQgPyBBQ1RJT05fTU9WRSA6IEFDVElPTl9BTEwpO1xuICAgIH1cblxuICAgIHNldFN0eWxlKHRoaXMuY3JvcEJveCwgYXNzaWduKHtcbiAgICAgIHdpZHRoOiBjcm9wQm94RGF0YS53aWR0aCxcbiAgICAgIGhlaWdodDogY3JvcEJveERhdGEuaGVpZ2h0XG4gICAgfSwgZ2V0VHJhbnNmb3Jtcyh7XG4gICAgICB0cmFuc2xhdGVYOiBjcm9wQm94RGF0YS5sZWZ0LFxuICAgICAgdHJhbnNsYXRlWTogY3JvcEJveERhdGEudG9wXG4gICAgfSkpKTtcblxuICAgIGlmICh0aGlzLmNyb3BwZWQgJiYgdGhpcy5saW1pdGVkKSB7XG4gICAgICB0aGlzLmxpbWl0Q2FudmFzKHRydWUsIHRydWUpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5vdXRwdXQoKTtcbiAgICB9XG4gIH0sXG4gIG91dHB1dDogZnVuY3Rpb24gb3V0cHV0KCkge1xuICAgIHRoaXMucHJldmlldygpO1xuICAgIGRpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LCBFVkVOVF9DUk9QLCB0aGlzLmdldERhdGEoKSk7XG4gIH1cbn07XG5cbnZhciBwcmV2aWV3ID0ge1xuICBpbml0UHJldmlldzogZnVuY3Rpb24gaW5pdFByZXZpZXcoKSB7XG4gICAgdmFyIGNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbjtcbiAgICB2YXIgcHJldmlldyA9IHRoaXMub3B0aW9ucy5wcmV2aWV3O1xuXG4gICAgdmFyIHVybCA9IGNyb3NzT3JpZ2luID8gdGhpcy5jcm9zc09yaWdpblVybCA6IHRoaXMudXJsO1xuICAgIHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXG4gICAgaWYgKGNyb3NzT3JpZ2luKSB7XG4gICAgICBpbWFnZS5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgIH1cblxuICAgIGltYWdlLnNyYyA9IHVybDtcbiAgICB0aGlzLnZpZXdCb3guYXBwZW5kQ2hpbGQoaW1hZ2UpO1xuICAgIHRoaXMudmlld0JveEltYWdlID0gaW1hZ2U7XG5cbiAgICBpZiAoIXByZXZpZXcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcHJldmlld3MgPSBwcmV2aWV3O1xuXG4gICAgaWYgKHR5cGVvZiBwcmV2aWV3ID09PSAnc3RyaW5nJykge1xuICAgICAgcHJldmlld3MgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHByZXZpZXcpO1xuICAgIH0gZWxzZSBpZiAocHJldmlldy5xdWVyeVNlbGVjdG9yKSB7XG4gICAgICBwcmV2aWV3cyA9IFtwcmV2aWV3XTtcbiAgICB9XG5cbiAgICB0aGlzLnByZXZpZXdzID0gcHJldmlld3M7XG5cbiAgICBmb3JFYWNoKHByZXZpZXdzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblxuICAgICAgLy8gU2F2ZSB0aGUgb3JpZ2luYWwgc2l6ZSBmb3IgcmVjb3ZlclxuICAgICAgc2V0RGF0YShlbCwgREFUQV9QUkVWSUVXLCB7XG4gICAgICAgIHdpZHRoOiBlbC5vZmZzZXRXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBlbC5vZmZzZXRIZWlnaHQsXG4gICAgICAgIGh0bWw6IGVsLmlubmVySFRNTFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgICBpbWcuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgIH1cblxuICAgICAgaW1nLnNyYyA9IHVybDtcblxuICAgICAgLyoqXG4gICAgICAgKiBPdmVycmlkZSBpbWcgZWxlbWVudCBzdHlsZXNcbiAgICAgICAqIEFkZCBgZGlzcGxheTpibG9ja2AgdG8gYXZvaWQgbWFyZ2luIHRvcCBpc3N1ZVxuICAgICAgICogQWRkIGBoZWlnaHQ6YXV0b2AgdG8gb3ZlcnJpZGUgYGhlaWdodGAgYXR0cmlidXRlIG9uIElFOFxuICAgICAgICogKE9jY3VyIG9ubHkgd2hlbiBtYXJnaW4tdG9wIDw9IC1oZWlnaHQpXG4gICAgICAgKi9cbiAgICAgIGltZy5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6YmxvY2s7JyArICd3aWR0aDoxMDAlOycgKyAnaGVpZ2h0OmF1dG87JyArICdtaW4td2lkdGg6MCFpbXBvcnRhbnQ7JyArICdtaW4taGVpZ2h0OjAhaW1wb3J0YW50OycgKyAnbWF4LXdpZHRoOm5vbmUhaW1wb3J0YW50OycgKyAnbWF4LWhlaWdodDpub25lIWltcG9ydGFudDsnICsgJ2ltYWdlLW9yaWVudGF0aW9uOjBkZWchaW1wb3J0YW50O1wiJztcblxuICAgICAgZWwuaW5uZXJIVE1MID0gJyc7XG4gICAgICBlbC5hcHBlbmRDaGlsZChpbWcpO1xuICAgIH0pO1xuICB9LFxuICByZXNldFByZXZpZXc6IGZ1bmN0aW9uIHJlc2V0UHJldmlldygpIHtcbiAgICBmb3JFYWNoKHRoaXMucHJldmlld3MsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgZGF0YSA9IGdldERhdGEoZWxlbWVudCwgREFUQV9QUkVWSUVXKTtcblxuICAgICAgc2V0U3R5bGUoZWxlbWVudCwge1xuICAgICAgICB3aWR0aDogZGF0YS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBkYXRhLmhlaWdodFxuICAgICAgfSk7XG5cbiAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gZGF0YS5odG1sO1xuICAgICAgcmVtb3ZlRGF0YShlbGVtZW50LCBEQVRBX1BSRVZJRVcpO1xuICAgIH0pO1xuICB9LFxuICBwcmV2aWV3OiBmdW5jdGlvbiBwcmV2aWV3KCkge1xuICAgIHZhciBpbWFnZURhdGEgPSB0aGlzLmltYWdlRGF0YSxcbiAgICAgICAgY2FudmFzRGF0YSA9IHRoaXMuY2FudmFzRGF0YSxcbiAgICAgICAgY3JvcEJveERhdGEgPSB0aGlzLmNyb3BCb3hEYXRhO1xuICAgIHZhciBjcm9wQm94V2lkdGggPSBjcm9wQm94RGF0YS53aWR0aCxcbiAgICAgICAgY3JvcEJveEhlaWdodCA9IGNyb3BCb3hEYXRhLmhlaWdodDtcbiAgICB2YXIgd2lkdGggPSBpbWFnZURhdGEud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IGltYWdlRGF0YS5oZWlnaHQ7XG5cbiAgICB2YXIgbGVmdCA9IGNyb3BCb3hEYXRhLmxlZnQgLSBjYW52YXNEYXRhLmxlZnQgLSBpbWFnZURhdGEubGVmdDtcbiAgICB2YXIgdG9wID0gY3JvcEJveERhdGEudG9wIC0gY2FudmFzRGF0YS50b3AgLSBpbWFnZURhdGEudG9wO1xuXG4gICAgaWYgKCF0aGlzLmNyb3BwZWQgfHwgdGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldFN0eWxlKHRoaXMudmlld0JveEltYWdlLCBhc3NpZ24oe1xuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICB9LCBnZXRUcmFuc2Zvcm1zKGFzc2lnbih7XG4gICAgICB0cmFuc2xhdGVYOiAtbGVmdCxcbiAgICAgIHRyYW5zbGF0ZVk6IC10b3BcbiAgICB9LCBpbWFnZURhdGEpKSkpO1xuXG4gICAgZm9yRWFjaCh0aGlzLnByZXZpZXdzLCBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgdmFyIGRhdGEgPSBnZXREYXRhKGVsZW1lbnQsIERBVEFfUFJFVklFVyk7XG4gICAgICB2YXIgb3JpZ2luYWxXaWR0aCA9IGRhdGEud2lkdGg7XG4gICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBkYXRhLmhlaWdodDtcbiAgICAgIHZhciBuZXdXaWR0aCA9IG9yaWdpbmFsV2lkdGg7XG4gICAgICB2YXIgbmV3SGVpZ2h0ID0gb3JpZ2luYWxIZWlnaHQ7XG4gICAgICB2YXIgcmF0aW8gPSAxO1xuXG4gICAgICBpZiAoY3JvcEJveFdpZHRoKSB7XG4gICAgICAgIHJhdGlvID0gb3JpZ2luYWxXaWR0aCAvIGNyb3BCb3hXaWR0aDtcbiAgICAgICAgbmV3SGVpZ2h0ID0gY3JvcEJveEhlaWdodCAqIHJhdGlvO1xuICAgICAgfVxuXG4gICAgICBpZiAoY3JvcEJveEhlaWdodCAmJiBuZXdIZWlnaHQgPiBvcmlnaW5hbEhlaWdodCkge1xuICAgICAgICByYXRpbyA9IG9yaWdpbmFsSGVpZ2h0IC8gY3JvcEJveEhlaWdodDtcbiAgICAgICAgbmV3V2lkdGggPSBjcm9wQm94V2lkdGggKiByYXRpbztcbiAgICAgICAgbmV3SGVpZ2h0ID0gb3JpZ2luYWxIZWlnaHQ7XG4gICAgICB9XG5cbiAgICAgIHNldFN0eWxlKGVsZW1lbnQsIHtcbiAgICAgICAgd2lkdGg6IG5ld1dpZHRoLFxuICAgICAgICBoZWlnaHQ6IG5ld0hlaWdodFxuICAgICAgfSk7XG5cbiAgICAgIHNldFN0eWxlKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpWzBdLCBhc3NpZ24oe1xuICAgICAgICB3aWR0aDogd2lkdGggKiByYXRpbyxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQgKiByYXRpb1xuICAgICAgfSwgZ2V0VHJhbnNmb3Jtcyhhc3NpZ24oe1xuICAgICAgICB0cmFuc2xhdGVYOiAtbGVmdCAqIHJhdGlvLFxuICAgICAgICB0cmFuc2xhdGVZOiAtdG9wICogcmF0aW9cbiAgICAgIH0sIGltYWdlRGF0YSkpKSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbnZhciBldmVudHMgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXG4gICAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIGNyb3BwZXIgPSB0aGlzLmNyb3BwZXI7XG5cblxuICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbnMuY3JvcHN0YXJ0KSkge1xuICAgICAgYWRkTGlzdGVuZXIoZWxlbWVudCwgRVZFTlRfQ1JPUF9TVEFSVCwgb3B0aW9ucy5jcm9wc3RhcnQpO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbnMuY3JvcG1vdmUpKSB7XG4gICAgICBhZGRMaXN0ZW5lcihlbGVtZW50LCBFVkVOVF9DUk9QX01PVkUsIG9wdGlvbnMuY3JvcG1vdmUpO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbnMuY3JvcGVuZCkpIHtcbiAgICAgIGFkZExpc3RlbmVyKGVsZW1lbnQsIEVWRU5UX0NST1BfRU5ELCBvcHRpb25zLmNyb3BlbmQpO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbnMuY3JvcCkpIHtcbiAgICAgIGFkZExpc3RlbmVyKGVsZW1lbnQsIEVWRU5UX0NST1AsIG9wdGlvbnMuY3JvcCk7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucy56b29tKSkge1xuICAgICAgYWRkTGlzdGVuZXIoZWxlbWVudCwgRVZFTlRfWk9PTSwgb3B0aW9ucy56b29tKTtcbiAgICB9XG5cbiAgICBhZGRMaXN0ZW5lcihjcm9wcGVyLCBFVkVOVF9QT0lOVEVSX0RPV04sIHRoaXMub25Dcm9wU3RhcnQgPSB0aGlzLmNyb3BTdGFydC5iaW5kKHRoaXMpKTtcblxuICAgIGlmIChvcHRpb25zLnpvb21hYmxlICYmIG9wdGlvbnMuem9vbU9uV2hlZWwpIHtcbiAgICAgIGFkZExpc3RlbmVyKGNyb3BwZXIsIEVWRU5UX1dIRUVMLCB0aGlzLm9uV2hlZWwgPSB0aGlzLndoZWVsLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRvZ2dsZURyYWdNb2RlT25EYmxjbGljaykge1xuICAgICAgYWRkTGlzdGVuZXIoY3JvcHBlciwgRVZFTlRfREJMQ0xJQ0ssIHRoaXMub25EYmxjbGljayA9IHRoaXMuZGJsY2xpY2suYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgYWRkTGlzdGVuZXIoZWxlbWVudC5vd25lckRvY3VtZW50LCBFVkVOVF9QT0lOVEVSX01PVkUsIHRoaXMub25Dcm9wTW92ZSA9IHRoaXMuY3JvcE1vdmUuYmluZCh0aGlzKSk7XG4gICAgYWRkTGlzdGVuZXIoZWxlbWVudC5vd25lckRvY3VtZW50LCBFVkVOVF9QT0lOVEVSX1VQLCB0aGlzLm9uQ3JvcEVuZCA9IHRoaXMuY3JvcEVuZC5iaW5kKHRoaXMpKTtcblxuICAgIGlmIChvcHRpb25zLnJlc3BvbnNpdmUpIHtcbiAgICAgIGFkZExpc3RlbmVyKHdpbmRvdywgRVZFTlRfUkVTSVpFLCB0aGlzLm9uUmVzaXplID0gdGhpcy5yZXNpemUuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LFxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudCxcbiAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgY3JvcHBlciA9IHRoaXMuY3JvcHBlcjtcblxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wc3RhcnQpKSB7XG4gICAgICByZW1vdmVMaXN0ZW5lcihlbGVtZW50LCBFVkVOVF9DUk9QX1NUQVJULCBvcHRpb25zLmNyb3BzdGFydCk7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wbW92ZSkpIHtcbiAgICAgIHJlbW92ZUxpc3RlbmVyKGVsZW1lbnQsIEVWRU5UX0NST1BfTU9WRSwgb3B0aW9ucy5jcm9wbW92ZSk7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wZW5kKSkge1xuICAgICAgcmVtb3ZlTGlzdGVuZXIoZWxlbWVudCwgRVZFTlRfQ1JPUF9FTkQsIG9wdGlvbnMuY3JvcGVuZCk7XG4gICAgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucy5jcm9wKSkge1xuICAgICAgcmVtb3ZlTGlzdGVuZXIoZWxlbWVudCwgRVZFTlRfQ1JPUCwgb3B0aW9ucy5jcm9wKTtcbiAgICB9XG5cbiAgICBpZiAoaXNGdW5jdGlvbihvcHRpb25zLnpvb20pKSB7XG4gICAgICByZW1vdmVMaXN0ZW5lcihlbGVtZW50LCBFVkVOVF9aT09NLCBvcHRpb25zLnpvb20pO1xuICAgIH1cblxuICAgIHJlbW92ZUxpc3RlbmVyKGNyb3BwZXIsIEVWRU5UX1BPSU5URVJfRE9XTiwgdGhpcy5vbkNyb3BTdGFydCk7XG5cbiAgICBpZiAob3B0aW9ucy56b29tYWJsZSAmJiBvcHRpb25zLnpvb21PbldoZWVsKSB7XG4gICAgICByZW1vdmVMaXN0ZW5lcihjcm9wcGVyLCBFVkVOVF9XSEVFTCwgdGhpcy5vbldoZWVsKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50b2dnbGVEcmFnTW9kZU9uRGJsY2xpY2spIHtcbiAgICAgIHJlbW92ZUxpc3RlbmVyKGNyb3BwZXIsIEVWRU5UX0RCTENMSUNLLCB0aGlzLm9uRGJsY2xpY2spO1xuICAgIH1cblxuICAgIHJlbW92ZUxpc3RlbmVyKGVsZW1lbnQub3duZXJEb2N1bWVudCwgRVZFTlRfUE9JTlRFUl9NT1ZFLCB0aGlzLm9uQ3JvcE1vdmUpO1xuICAgIHJlbW92ZUxpc3RlbmVyKGVsZW1lbnQub3duZXJEb2N1bWVudCwgRVZFTlRfUE9JTlRFUl9VUCwgdGhpcy5vbkNyb3BFbmQpO1xuXG4gICAgaWYgKG9wdGlvbnMucmVzcG9uc2l2ZSkge1xuICAgICAgcmVtb3ZlTGlzdGVuZXIod2luZG93LCBFVkVOVF9SRVNJWkUsIHRoaXMub25SZXNpemUpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGhhbmRsZXJzID0ge1xuICByZXNpemU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgY29udGFpbmVyID0gdGhpcy5jb250YWluZXIsXG4gICAgICAgIGNvbnRhaW5lckRhdGEgPSB0aGlzLmNvbnRhaW5lckRhdGE7XG5cbiAgICB2YXIgbWluQ29udGFpbmVyV2lkdGggPSBOdW1iZXIob3B0aW9ucy5taW5Db250YWluZXJXaWR0aCkgfHwgMjAwO1xuICAgIHZhciBtaW5Db250YWluZXJIZWlnaHQgPSBOdW1iZXIob3B0aW9ucy5taW5Db250YWluZXJIZWlnaHQpIHx8IDEwMDtcblxuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IGNvbnRhaW5lckRhdGEud2lkdGggPD0gbWluQ29udGFpbmVyV2lkdGggfHwgY29udGFpbmVyRGF0YS5oZWlnaHQgPD0gbWluQ29udGFpbmVySGVpZ2h0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJhdGlvID0gY29udGFpbmVyLm9mZnNldFdpZHRoIC8gY29udGFpbmVyRGF0YS53aWR0aDtcblxuICAgIC8vIFJlc2l6ZSB3aGVuIHdpZHRoIGNoYW5nZWQgb3IgaGVpZ2h0IGNoYW5nZWRcbiAgICBpZiAocmF0aW8gIT09IDEgfHwgY29udGFpbmVyLm9mZnNldEhlaWdodCAhPT0gY29udGFpbmVyRGF0YS5oZWlnaHQpIHtcbiAgICAgIHZhciBjYW52YXNEYXRhID0gdm9pZCAwO1xuICAgICAgdmFyIGNyb3BCb3hEYXRhID0gdm9pZCAwO1xuXG4gICAgICBpZiAob3B0aW9ucy5yZXN0b3JlKSB7XG4gICAgICAgIGNhbnZhc0RhdGEgPSB0aGlzLmdldENhbnZhc0RhdGEoKTtcbiAgICAgICAgY3JvcEJveERhdGEgPSB0aGlzLmdldENyb3BCb3hEYXRhKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVuZGVyKCk7XG5cbiAgICAgIGlmIChvcHRpb25zLnJlc3RvcmUpIHtcbiAgICAgICAgdGhpcy5zZXRDYW52YXNEYXRhKGZvckVhY2goY2FudmFzRGF0YSwgZnVuY3Rpb24gKG4sIGkpIHtcbiAgICAgICAgICBjYW52YXNEYXRhW2ldID0gbiAqIHJhdGlvO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc2V0Q3JvcEJveERhdGEoZm9yRWFjaChjcm9wQm94RGF0YSwgZnVuY3Rpb24gKG4sIGkpIHtcbiAgICAgICAgICBjcm9wQm94RGF0YVtpXSA9IG4gKiByYXRpbztcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgZGJsY2xpY2s6IGZ1bmN0aW9uIGRibGNsaWNrKCkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRoaXMub3B0aW9ucy5kcmFnTW9kZSA9PT0gRFJBR19NT0RFX05PTkUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldERyYWdNb2RlKGhhc0NsYXNzKHRoaXMuZHJhZ0JveCwgQ0xBU1NfQ1JPUCkgPyBEUkFHX01PREVfTU9WRSA6IERSQUdfTU9ERV9DUk9QKTtcbiAgfSxcbiAgd2hlZWw6IGZ1bmN0aW9uIHdoZWVsKGUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHJhdGlvID0gTnVtYmVyKHRoaXMub3B0aW9ucy53aGVlbFpvb21SYXRpbykgfHwgMC4xO1xuICAgIHZhciBkZWx0YSA9IDE7XG5cbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIC8vIExpbWl0IHdoZWVsIHNwZWVkIHRvIHByZXZlbnQgem9vbSB0b28gZmFzdCAoIzIxKVxuICAgIGlmICh0aGlzLndoZWVsaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy53aGVlbGluZyA9IHRydWU7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzLndoZWVsaW5nID0gZmFsc2U7XG4gICAgfSwgNTApO1xuXG4gICAgaWYgKGUuZGVsdGFZKSB7XG4gICAgICBkZWx0YSA9IGUuZGVsdGFZID4gMCA/IDEgOiAtMTtcbiAgICB9IGVsc2UgaWYgKGUud2hlZWxEZWx0YSkge1xuICAgICAgZGVsdGEgPSAtZS53aGVlbERlbHRhIC8gMTIwO1xuICAgIH0gZWxzZSBpZiAoZS5kZXRhaWwpIHtcbiAgICAgIGRlbHRhID0gZS5kZXRhaWwgPiAwID8gMSA6IC0xO1xuICAgIH1cblxuICAgIHRoaXMuem9vbSgtZGVsdGEgKiByYXRpbywgZSk7XG4gIH0sXG4gIGNyb3BTdGFydDogZnVuY3Rpb24gY3JvcFN0YXJ0KGUpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBwb2ludGVycyA9IHRoaXMucG9pbnRlcnM7XG5cbiAgICB2YXIgYWN0aW9uID0gdm9pZCAwO1xuXG4gICAgaWYgKGUuY2hhbmdlZFRvdWNoZXMpIHtcbiAgICAgIC8vIEhhbmRsZSB0b3VjaCBldmVudFxuICAgICAgZm9yRWFjaChlLmNoYW5nZWRUb3VjaGVzLCBmdW5jdGlvbiAodG91Y2gpIHtcbiAgICAgICAgcG9pbnRlcnNbdG91Y2guaWRlbnRpZmllcl0gPSBnZXRQb2ludGVyKHRvdWNoKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBIYW5kbGUgbW91c2UgZXZlbnQgYW5kIHBvaW50ZXIgZXZlbnRcbiAgICAgIHBvaW50ZXJzW2UucG9pbnRlcklkIHx8IDBdID0gZ2V0UG9pbnRlcihlKTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMocG9pbnRlcnMpLmxlbmd0aCA+IDEgJiYgb3B0aW9ucy56b29tYWJsZSAmJiBvcHRpb25zLnpvb21PblRvdWNoKSB7XG4gICAgICBhY3Rpb24gPSBBQ1RJT05fWk9PTTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0aW9uID0gZ2V0RGF0YShlLnRhcmdldCwgREFUQV9BQ1RJT04pO1xuICAgIH1cblxuICAgIGlmICghUkVHRVhQX0FDVElPTlMudGVzdChhY3Rpb24pKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LCBFVkVOVF9DUk9QX1NUQVJULCB7XG4gICAgICBvcmlnaW5hbEV2ZW50OiBlLFxuICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICB9KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB0aGlzLmFjdGlvbiA9IGFjdGlvbjtcbiAgICB0aGlzLmNyb3BwaW5nID0gZmFsc2U7XG5cbiAgICBpZiAoYWN0aW9uID09PSBBQ1RJT05fQ1JPUCkge1xuICAgICAgdGhpcy5jcm9wcGluZyA9IHRydWU7XG4gICAgICBhZGRDbGFzcyh0aGlzLmRyYWdCb3gsIENMQVNTX01PREFMKTtcbiAgICB9XG4gIH0sXG4gIGNyb3BNb3ZlOiBmdW5jdGlvbiBjcm9wTW92ZShlKSB7XG4gICAgdmFyIGFjdGlvbiA9IHRoaXMuYWN0aW9uO1xuXG5cbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhYWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHBvaW50ZXJzID0gdGhpcy5wb2ludGVycztcblxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaWYgKGRpc3BhdGNoRXZlbnQodGhpcy5lbGVtZW50LCBFVkVOVF9DUk9QX01PVkUsIHtcbiAgICAgIG9yaWdpbmFsRXZlbnQ6IGUsXG4gICAgICBhY3Rpb246IGFjdGlvblxuICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICBmb3JFYWNoKGUuY2hhbmdlZFRvdWNoZXMsIGZ1bmN0aW9uICh0b3VjaCkge1xuICAgICAgICBhc3NpZ24ocG9pbnRlcnNbdG91Y2guaWRlbnRpZmllcl0sIGdldFBvaW50ZXIodG91Y2gsIHRydWUpKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NpZ24ocG9pbnRlcnNbZS5wb2ludGVySWQgfHwgMF0sIGdldFBvaW50ZXIoZSwgdHJ1ZSkpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlKGUpO1xuICB9LFxuICBjcm9wRW5kOiBmdW5jdGlvbiBjcm9wRW5kKGUpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBhY3Rpb24gPSB0aGlzLmFjdGlvbixcbiAgICAgICAgcG9pbnRlcnMgPSB0aGlzLnBvaW50ZXJzO1xuXG5cbiAgICBpZiAoZS5jaGFuZ2VkVG91Y2hlcykge1xuICAgICAgZm9yRWFjaChlLmNoYW5nZWRUb3VjaGVzLCBmdW5jdGlvbiAodG91Y2gpIHtcbiAgICAgICAgZGVsZXRlIHBvaW50ZXJzW3RvdWNoLmlkZW50aWZpZXJdO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSBwb2ludGVyc1tlLnBvaW50ZXJJZCB8fCAwXTtcbiAgICB9XG5cbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICghT2JqZWN0LmtleXMocG9pbnRlcnMpLmxlbmd0aCkge1xuICAgICAgdGhpcy5hY3Rpb24gPSAnJztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jcm9wcGluZykge1xuICAgICAgdGhpcy5jcm9wcGluZyA9IGZhbHNlO1xuICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5kcmFnQm94LCBDTEFTU19NT0RBTCwgdGhpcy5jcm9wcGVkICYmIHRoaXMub3B0aW9ucy5tb2RhbCk7XG4gICAgfVxuXG4gICAgZGlzcGF0Y2hFdmVudCh0aGlzLmVsZW1lbnQsIEVWRU5UX0NST1BfRU5ELCB7XG4gICAgICBvcmlnaW5hbEV2ZW50OiBlLFxuICAgICAgYWN0aW9uOiBhY3Rpb25cbiAgICB9KTtcbiAgfVxufTtcblxudmFyIGNoYW5nZSA9IHtcbiAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoZSkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhLFxuICAgICAgICBjb250YWluZXJEYXRhID0gdGhpcy5jb250YWluZXJEYXRhLFxuICAgICAgICBjcm9wQm94RGF0YSA9IHRoaXMuY3JvcEJveERhdGEsXG4gICAgICAgIHBvaW50ZXJzID0gdGhpcy5wb2ludGVycztcbiAgICB2YXIgYWN0aW9uID0gdGhpcy5hY3Rpb247XG4gICAgdmFyIGFzcGVjdFJhdGlvID0gb3B0aW9ucy5hc3BlY3RSYXRpbztcbiAgICB2YXIgbGVmdCA9IGNyb3BCb3hEYXRhLmxlZnQsXG4gICAgICAgIHRvcCA9IGNyb3BCb3hEYXRhLnRvcCxcbiAgICAgICAgd2lkdGggPSBjcm9wQm94RGF0YS53aWR0aCxcbiAgICAgICAgaGVpZ2h0ID0gY3JvcEJveERhdGEuaGVpZ2h0O1xuXG4gICAgdmFyIHJpZ2h0ID0gbGVmdCArIHdpZHRoO1xuICAgIHZhciBib3R0b20gPSB0b3AgKyBoZWlnaHQ7XG4gICAgdmFyIG1pbkxlZnQgPSAwO1xuICAgIHZhciBtaW5Ub3AgPSAwO1xuICAgIHZhciBtYXhXaWR0aCA9IGNvbnRhaW5lckRhdGEud2lkdGg7XG4gICAgdmFyIG1heEhlaWdodCA9IGNvbnRhaW5lckRhdGEuaGVpZ2h0O1xuICAgIHZhciByZW5kZXJhYmxlID0gdHJ1ZTtcbiAgICB2YXIgb2Zmc2V0ID0gdm9pZCAwO1xuXG4gICAgLy8gTG9ja2luZyBhc3BlY3QgcmF0aW8gaW4gXCJmcmVlIG1vZGVcIiBieSBob2xkaW5nIHNoaWZ0IGtleVxuICAgIGlmICghYXNwZWN0UmF0aW8gJiYgZS5zaGlmdEtleSkge1xuICAgICAgYXNwZWN0UmF0aW8gPSB3aWR0aCAmJiBoZWlnaHQgPyB3aWR0aCAvIGhlaWdodCA6IDE7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubGltaXRlZCkge1xuICAgICAgbWluTGVmdCA9IGNyb3BCb3hEYXRhLm1pbkxlZnQ7XG4gICAgICBtaW5Ub3AgPSBjcm9wQm94RGF0YS5taW5Ub3A7XG5cbiAgICAgIG1heFdpZHRoID0gbWluTGVmdCArIE1hdGgubWluKGNvbnRhaW5lckRhdGEud2lkdGgsIGNhbnZhc0RhdGEud2lkdGgsIGNhbnZhc0RhdGEubGVmdCArIGNhbnZhc0RhdGEud2lkdGgpO1xuICAgICAgbWF4SGVpZ2h0ID0gbWluVG9wICsgTWF0aC5taW4oY29udGFpbmVyRGF0YS5oZWlnaHQsIGNhbnZhc0RhdGEuaGVpZ2h0LCBjYW52YXNEYXRhLnRvcCArIGNhbnZhc0RhdGEuaGVpZ2h0KTtcbiAgICB9XG5cbiAgICB2YXIgcG9pbnRlciA9IHBvaW50ZXJzW09iamVjdC5rZXlzKHBvaW50ZXJzKVswXV07XG4gICAgdmFyIHJhbmdlID0ge1xuICAgICAgeDogcG9pbnRlci5lbmRYIC0gcG9pbnRlci5zdGFydFgsXG4gICAgICB5OiBwb2ludGVyLmVuZFkgLSBwb2ludGVyLnN0YXJ0WVxuICAgIH07XG4gICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gY2hlY2soc2lkZSkge1xuICAgICAgc3dpdGNoIChzaWRlKSB7XG4gICAgICAgIGNhc2UgQUNUSU9OX0VBU1Q6XG4gICAgICAgICAgaWYgKHJpZ2h0ICsgcmFuZ2UueCA+IG1heFdpZHRoKSB7XG4gICAgICAgICAgICByYW5nZS54ID0gbWF4V2lkdGggLSByaWdodDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEFDVElPTl9XRVNUOlxuICAgICAgICAgIGlmIChsZWZ0ICsgcmFuZ2UueCA8IG1pbkxlZnQpIHtcbiAgICAgICAgICAgIHJhbmdlLnggPSBtaW5MZWZ0IC0gbGVmdDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEFDVElPTl9OT1JUSDpcbiAgICAgICAgICBpZiAodG9wICsgcmFuZ2UueSA8IG1pblRvcCkge1xuICAgICAgICAgICAgcmFuZ2UueSA9IG1pblRvcCAtIHRvcDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIEFDVElPTl9TT1VUSDpcbiAgICAgICAgICBpZiAoYm90dG9tICsgcmFuZ2UueSA+IG1heEhlaWdodCkge1xuICAgICAgICAgICAgcmFuZ2UueSA9IG1heEhlaWdodCAtIGJvdHRvbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgfVxuICAgIH07XG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgLy8gTW92ZSBjcm9wIGJveFxuICAgICAgY2FzZSBBQ1RJT05fQUxMOlxuICAgICAgICBsZWZ0ICs9IHJhbmdlLng7XG4gICAgICAgIHRvcCArPSByYW5nZS55O1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gUmVzaXplIGNyb3AgYm94XG4gICAgICBjYXNlIEFDVElPTl9FQVNUOlxuICAgICAgICBpZiAocmFuZ2UueCA+PSAwICYmIChyaWdodCA+PSBtYXhXaWR0aCB8fCBhc3BlY3RSYXRpbyAmJiAodG9wIDw9IG1pblRvcCB8fCBib3R0b20gPj0gbWF4SGVpZ2h0KSkpIHtcbiAgICAgICAgICByZW5kZXJhYmxlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjaGVjayhBQ1RJT05fRUFTVCk7XG4gICAgICAgIHdpZHRoICs9IHJhbmdlLng7XG5cbiAgICAgICAgaWYgKGFzcGVjdFJhdGlvKSB7XG4gICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgICB0b3AgLT0gcmFuZ2UueCAvIGFzcGVjdFJhdGlvIC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aWR0aCA8IDApIHtcbiAgICAgICAgICBhY3Rpb24gPSBBQ1RJT05fV0VTVDtcbiAgICAgICAgICB3aWR0aCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBQ1RJT05fTk9SVEg6XG4gICAgICAgIGlmIChyYW5nZS55IDw9IDAgJiYgKHRvcCA8PSBtaW5Ub3AgfHwgYXNwZWN0UmF0aW8gJiYgKGxlZnQgPD0gbWluTGVmdCB8fCByaWdodCA+PSBtYXhXaWR0aCkpKSB7XG4gICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hlY2soQUNUSU9OX05PUlRIKTtcbiAgICAgICAgaGVpZ2h0IC09IHJhbmdlLnk7XG4gICAgICAgIHRvcCArPSByYW5nZS55O1xuXG4gICAgICAgIGlmIChhc3BlY3RSYXRpbykge1xuICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogYXNwZWN0UmF0aW87XG4gICAgICAgICAgbGVmdCArPSByYW5nZS55ICogYXNwZWN0UmF0aW8gLyAyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA8IDApIHtcbiAgICAgICAgICBhY3Rpb24gPSBBQ1RJT05fU09VVEg7XG4gICAgICAgICAgaGVpZ2h0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEFDVElPTl9XRVNUOlxuICAgICAgICBpZiAocmFuZ2UueCA8PSAwICYmIChsZWZ0IDw9IG1pbkxlZnQgfHwgYXNwZWN0UmF0aW8gJiYgKHRvcCA8PSBtaW5Ub3AgfHwgYm90dG9tID49IG1heEhlaWdodCkpKSB7XG4gICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hlY2soQUNUSU9OX1dFU1QpO1xuICAgICAgICB3aWR0aCAtPSByYW5nZS54O1xuICAgICAgICBsZWZ0ICs9IHJhbmdlLng7XG5cbiAgICAgICAgaWYgKGFzcGVjdFJhdGlvKSB7XG4gICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgICB0b3AgKz0gcmFuZ2UueCAvIGFzcGVjdFJhdGlvIC8gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aWR0aCA8IDApIHtcbiAgICAgICAgICBhY3Rpb24gPSBBQ1RJT05fRUFTVDtcbiAgICAgICAgICB3aWR0aCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBBQ1RJT05fU09VVEg6XG4gICAgICAgIGlmIChyYW5nZS55ID49IDAgJiYgKGJvdHRvbSA+PSBtYXhIZWlnaHQgfHwgYXNwZWN0UmF0aW8gJiYgKGxlZnQgPD0gbWluTGVmdCB8fCByaWdodCA+PSBtYXhXaWR0aCkpKSB7XG4gICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hlY2soQUNUSU9OX1NPVVRIKTtcbiAgICAgICAgaGVpZ2h0ICs9IHJhbmdlLnk7XG5cbiAgICAgICAgaWYgKGFzcGVjdFJhdGlvKSB7XG4gICAgICAgICAgd2lkdGggPSBoZWlnaHQgKiBhc3BlY3RSYXRpbztcbiAgICAgICAgICBsZWZ0IC09IHJhbmdlLnkgKiBhc3BlY3RSYXRpbyAvIDI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0IDwgMCkge1xuICAgICAgICAgIGFjdGlvbiA9IEFDVElPTl9OT1JUSDtcbiAgICAgICAgICBoZWlnaHQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQUNUSU9OX05PUlRIX0VBU1Q6XG4gICAgICAgIGlmIChhc3BlY3RSYXRpbykge1xuICAgICAgICAgIGlmIChyYW5nZS55IDw9IDAgJiYgKHRvcCA8PSBtaW5Ub3AgfHwgcmlnaHQgPj0gbWF4V2lkdGgpKSB7XG4gICAgICAgICAgICByZW5kZXJhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjaGVjayhBQ1RJT05fTk9SVEgpO1xuICAgICAgICAgIGhlaWdodCAtPSByYW5nZS55O1xuICAgICAgICAgIHRvcCArPSByYW5nZS55O1xuICAgICAgICAgIHdpZHRoID0gaGVpZ2h0ICogYXNwZWN0UmF0aW87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2soQUNUSU9OX05PUlRIKTtcbiAgICAgICAgICBjaGVjayhBQ1RJT05fRUFTVCk7XG5cbiAgICAgICAgICBpZiAocmFuZ2UueCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAocmlnaHQgPCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICB3aWR0aCArPSByYW5nZS54O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyYW5nZS55IDw9IDAgJiYgdG9wIDw9IG1pblRvcCkge1xuICAgICAgICAgICAgICByZW5kZXJhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpZHRoICs9IHJhbmdlLng7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJhbmdlLnkgPD0gMCkge1xuICAgICAgICAgICAgaWYgKHRvcCA+IG1pblRvcCkge1xuICAgICAgICAgICAgICBoZWlnaHQgLT0gcmFuZ2UueTtcbiAgICAgICAgICAgICAgdG9wICs9IHJhbmdlLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlaWdodCAtPSByYW5nZS55O1xuICAgICAgICAgICAgdG9wICs9IHJhbmdlLnk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdpZHRoIDwgMCAmJiBoZWlnaHQgPCAwKSB7XG4gICAgICAgICAgYWN0aW9uID0gQUNUSU9OX1NPVVRIX1dFU1Q7XG4gICAgICAgICAgaGVpZ2h0ID0gMDtcbiAgICAgICAgICB3aWR0aCA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAod2lkdGggPCAwKSB7XG4gICAgICAgICAgYWN0aW9uID0gQUNUSU9OX05PUlRIX1dFU1Q7XG4gICAgICAgICAgd2lkdGggPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGhlaWdodCA8IDApIHtcbiAgICAgICAgICBhY3Rpb24gPSBBQ1RJT05fU09VVEhfRUFTVDtcbiAgICAgICAgICBoZWlnaHQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQUNUSU9OX05PUlRIX1dFU1Q6XG4gICAgICAgIGlmIChhc3BlY3RSYXRpbykge1xuICAgICAgICAgIGlmIChyYW5nZS55IDw9IDAgJiYgKHRvcCA8PSBtaW5Ub3AgfHwgbGVmdCA8PSBtaW5MZWZ0KSkge1xuICAgICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2hlY2soQUNUSU9OX05PUlRIKTtcbiAgICAgICAgICBoZWlnaHQgLT0gcmFuZ2UueTtcbiAgICAgICAgICB0b3AgKz0gcmFuZ2UueTtcbiAgICAgICAgICB3aWR0aCA9IGhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgICAgICAgIGxlZnQgKz0gcmFuZ2UueSAqIGFzcGVjdFJhdGlvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrKEFDVElPTl9OT1JUSCk7XG4gICAgICAgICAgY2hlY2soQUNUSU9OX1dFU1QpO1xuXG4gICAgICAgICAgaWYgKHJhbmdlLnggPD0gMCkge1xuICAgICAgICAgICAgaWYgKGxlZnQgPiBtaW5MZWZ0KSB7XG4gICAgICAgICAgICAgIHdpZHRoIC09IHJhbmdlLng7XG4gICAgICAgICAgICAgIGxlZnQgKz0gcmFuZ2UueDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2UueSA8PSAwICYmIHRvcCA8PSBtaW5Ub3ApIHtcbiAgICAgICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aWR0aCAtPSByYW5nZS54O1xuICAgICAgICAgICAgbGVmdCArPSByYW5nZS54O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyYW5nZS55IDw9IDApIHtcbiAgICAgICAgICAgIGlmICh0b3AgPiBtaW5Ub3ApIHtcbiAgICAgICAgICAgICAgaGVpZ2h0IC09IHJhbmdlLnk7XG4gICAgICAgICAgICAgIHRvcCArPSByYW5nZS55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWlnaHQgLT0gcmFuZ2UueTtcbiAgICAgICAgICAgIHRvcCArPSByYW5nZS55O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aWR0aCA8IDAgJiYgaGVpZ2h0IDwgMCkge1xuICAgICAgICAgIGFjdGlvbiA9IEFDVElPTl9TT1VUSF9FQVNUO1xuICAgICAgICAgIGhlaWdodCA9IDA7XG4gICAgICAgICAgd2lkdGggPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHdpZHRoIDwgMCkge1xuICAgICAgICAgIGFjdGlvbiA9IEFDVElPTl9OT1JUSF9FQVNUO1xuICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChoZWlnaHQgPCAwKSB7XG4gICAgICAgICAgYWN0aW9uID0gQUNUSU9OX1NPVVRIX1dFU1Q7XG4gICAgICAgICAgaGVpZ2h0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEFDVElPTl9TT1VUSF9XRVNUOlxuICAgICAgICBpZiAoYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICBpZiAocmFuZ2UueCA8PSAwICYmIChsZWZ0IDw9IG1pbkxlZnQgfHwgYm90dG9tID49IG1heEhlaWdodCkpIHtcbiAgICAgICAgICAgIHJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNoZWNrKEFDVElPTl9XRVNUKTtcbiAgICAgICAgICB3aWR0aCAtPSByYW5nZS54O1xuICAgICAgICAgIGxlZnQgKz0gcmFuZ2UueDtcbiAgICAgICAgICBoZWlnaHQgPSB3aWR0aCAvIGFzcGVjdFJhdGlvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrKEFDVElPTl9TT1VUSCk7XG4gICAgICAgICAgY2hlY2soQUNUSU9OX1dFU1QpO1xuXG4gICAgICAgICAgaWYgKHJhbmdlLnggPD0gMCkge1xuICAgICAgICAgICAgaWYgKGxlZnQgPiBtaW5MZWZ0KSB7XG4gICAgICAgICAgICAgIHdpZHRoIC09IHJhbmdlLng7XG4gICAgICAgICAgICAgIGxlZnQgKz0gcmFuZ2UueDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmFuZ2UueSA+PSAwICYmIGJvdHRvbSA+PSBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aWR0aCAtPSByYW5nZS54O1xuICAgICAgICAgICAgbGVmdCArPSByYW5nZS54O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChyYW5nZS55ID49IDApIHtcbiAgICAgICAgICAgIGlmIChib3R0b20gPCBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgICAgaGVpZ2h0ICs9IHJhbmdlLnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlaWdodCArPSByYW5nZS55O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh3aWR0aCA8IDAgJiYgaGVpZ2h0IDwgMCkge1xuICAgICAgICAgIGFjdGlvbiA9IEFDVElPTl9OT1JUSF9FQVNUO1xuICAgICAgICAgIGhlaWdodCA9IDA7XG4gICAgICAgICAgd2lkdGggPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHdpZHRoIDwgMCkge1xuICAgICAgICAgIGFjdGlvbiA9IEFDVElPTl9TT1VUSF9FQVNUO1xuICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChoZWlnaHQgPCAwKSB7XG4gICAgICAgICAgYWN0aW9uID0gQUNUSU9OX05PUlRIX1dFU1Q7XG4gICAgICAgICAgaGVpZ2h0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEFDVElPTl9TT1VUSF9FQVNUOlxuICAgICAgICBpZiAoYXNwZWN0UmF0aW8pIHtcbiAgICAgICAgICBpZiAocmFuZ2UueCA+PSAwICYmIChyaWdodCA+PSBtYXhXaWR0aCB8fCBib3R0b20gPj0gbWF4SGVpZ2h0KSkge1xuICAgICAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY2hlY2soQUNUSU9OX0VBU1QpO1xuICAgICAgICAgIHdpZHRoICs9IHJhbmdlLng7XG4gICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVjayhBQ1RJT05fU09VVEgpO1xuICAgICAgICAgIGNoZWNrKEFDVElPTl9FQVNUKTtcblxuICAgICAgICAgIGlmIChyYW5nZS54ID49IDApIHtcbiAgICAgICAgICAgIGlmIChyaWdodCA8IG1heFdpZHRoKSB7XG4gICAgICAgICAgICAgIHdpZHRoICs9IHJhbmdlLng7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJhbmdlLnkgPj0gMCAmJiBib3R0b20gPj0gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgIHJlbmRlcmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2lkdGggKz0gcmFuZ2UueDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAocmFuZ2UueSA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoYm90dG9tIDwgbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGhlaWdodCArPSByYW5nZS55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWlnaHQgKz0gcmFuZ2UueTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAod2lkdGggPCAwICYmIGhlaWdodCA8IDApIHtcbiAgICAgICAgICBhY3Rpb24gPSBBQ1RJT05fTk9SVEhfV0VTVDtcbiAgICAgICAgICBoZWlnaHQgPSAwO1xuICAgICAgICAgIHdpZHRoID0gMDtcbiAgICAgICAgfSBlbHNlIGlmICh3aWR0aCA8IDApIHtcbiAgICAgICAgICBhY3Rpb24gPSBBQ1RJT05fU09VVEhfV0VTVDtcbiAgICAgICAgICB3aWR0aCA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoaGVpZ2h0IDwgMCkge1xuICAgICAgICAgIGFjdGlvbiA9IEFDVElPTl9OT1JUSF9FQVNUO1xuICAgICAgICAgIGhlaWdodCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgLy8gTW92ZSBjYW52YXNcbiAgICAgIGNhc2UgQUNUSU9OX01PVkU6XG4gICAgICAgIHRoaXMubW92ZShyYW5nZS54LCByYW5nZS55KTtcbiAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gWm9vbSBjYW52YXNcbiAgICAgIGNhc2UgQUNUSU9OX1pPT006XG4gICAgICAgIHRoaXMuem9vbShnZXRNYXhab29tUmF0aW8ocG9pbnRlcnMpLCBlKTtcbiAgICAgICAgcmVuZGVyYWJsZSA9IGZhbHNlO1xuICAgICAgICBicmVhaztcblxuICAgICAgLy8gQ3JlYXRlIGNyb3AgYm94XG4gICAgICBjYXNlIEFDVElPTl9DUk9QOlxuICAgICAgICBpZiAoIXJhbmdlLnggfHwgIXJhbmdlLnkpIHtcbiAgICAgICAgICByZW5kZXJhYmxlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBvZmZzZXQgPSBnZXRPZmZzZXQodGhpcy5jcm9wcGVyKTtcbiAgICAgICAgbGVmdCA9IHBvaW50ZXIuc3RhcnRYIC0gb2Zmc2V0LmxlZnQ7XG4gICAgICAgIHRvcCA9IHBvaW50ZXIuc3RhcnRZIC0gb2Zmc2V0LnRvcDtcbiAgICAgICAgd2lkdGggPSBjcm9wQm94RGF0YS5taW5XaWR0aDtcbiAgICAgICAgaGVpZ2h0ID0gY3JvcEJveERhdGEubWluSGVpZ2h0O1xuXG4gICAgICAgIGlmIChyYW5nZS54ID4gMCkge1xuICAgICAgICAgIGFjdGlvbiA9IHJhbmdlLnkgPiAwID8gQUNUSU9OX1NPVVRIX0VBU1QgOiBBQ1RJT05fTk9SVEhfRUFTVDtcbiAgICAgICAgfSBlbHNlIGlmIChyYW5nZS54IDwgMCkge1xuICAgICAgICAgIGxlZnQgLT0gd2lkdGg7XG4gICAgICAgICAgYWN0aW9uID0gcmFuZ2UueSA+IDAgPyBBQ1RJT05fU09VVEhfV0VTVCA6IEFDVElPTl9OT1JUSF9XRVNUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJhbmdlLnkgPCAwKSB7XG4gICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3cgdGhlIGNyb3AgYm94IGlmIGlzIGhpZGRlblxuICAgICAgICBpZiAoIXRoaXMuY3JvcHBlZCkge1xuICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMuY3JvcEJveCwgQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICB0aGlzLmNyb3BwZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKHRoaXMubGltaXRlZCkge1xuICAgICAgICAgICAgdGhpcy5saW1pdENyb3BCb3godHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuXG4gICAgaWYgKHJlbmRlcmFibGUpIHtcbiAgICAgIGNyb3BCb3hEYXRhLndpZHRoID0gd2lkdGg7XG4gICAgICBjcm9wQm94RGF0YS5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICBjcm9wQm94RGF0YS5sZWZ0ID0gbGVmdDtcbiAgICAgIGNyb3BCb3hEYXRhLnRvcCA9IHRvcDtcbiAgICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgICAgdGhpcy5yZW5kZXJDcm9wQm94KCk7XG4gICAgfVxuXG4gICAgLy8gT3ZlcnJpZGVcbiAgICBmb3JFYWNoKHBvaW50ZXJzLCBmdW5jdGlvbiAocCkge1xuICAgICAgcC5zdGFydFggPSBwLmVuZFg7XG4gICAgICBwLnN0YXJ0WSA9IHAuZW5kWTtcbiAgICB9KTtcbiAgfVxufTtcblxudmFyIG1ldGhvZHMgPSB7XG4gIC8vIFNob3cgdGhlIGNyb3AgYm94IG1hbnVhbGx5XG4gIGNyb3A6IGZ1bmN0aW9uIGNyb3AoKSB7XG4gICAgaWYgKHRoaXMucmVhZHkgJiYgIXRoaXMuY3JvcHBlZCAmJiAhdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5jcm9wcGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMubGltaXRDcm9wQm94KHRydWUsIHRydWUpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1vZGFsKSB7XG4gICAgICAgIGFkZENsYXNzKHRoaXMuZHJhZ0JveCwgQ0xBU1NfTU9EQUwpO1xuICAgICAgfVxuXG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmNyb3BCb3gsIENMQVNTX0hJRERFTik7XG4gICAgICB0aGlzLnNldENyb3BCb3hEYXRhKHRoaXMuaW5pdGlhbENyb3BCb3hEYXRhKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8vIFJlc2V0IHRoZSBpbWFnZSBhbmQgY3JvcCBib3ggdG8gdGhlaXIgaW5pdGlhbCBzdGF0ZXNcbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLnJlYWR5ICYmICF0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmltYWdlRGF0YSA9IGFzc2lnbih7fSwgdGhpcy5pbml0aWFsSW1hZ2VEYXRhKTtcbiAgICAgIHRoaXMuY2FudmFzRGF0YSA9IGFzc2lnbih7fSwgdGhpcy5pbml0aWFsQ2FudmFzRGF0YSk7XG4gICAgICB0aGlzLmNyb3BCb3hEYXRhID0gYXNzaWduKHt9LCB0aGlzLmluaXRpYWxDcm9wQm94RGF0YSk7XG4gICAgICB0aGlzLnJlbmRlckNhbnZhcygpO1xuXG4gICAgICBpZiAodGhpcy5jcm9wcGVkKSB7XG4gICAgICAgIHRoaXMucmVuZGVyQ3JvcEJveCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLy8gQ2xlYXIgdGhlIGNyb3AgYm94XG4gIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBpZiAodGhpcy5jcm9wcGVkICYmICF0aGlzLmRpc2FibGVkKSB7XG4gICAgICBhc3NpZ24odGhpcy5jcm9wQm94RGF0YSwge1xuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDBcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLmNyb3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVuZGVyQ3JvcEJveCgpO1xuICAgICAgdGhpcy5saW1pdENhbnZhcyh0cnVlLCB0cnVlKTtcblxuICAgICAgLy8gUmVuZGVyIGNhbnZhcyBhZnRlciBjcm9wIGJveCByZW5kZXJlZFxuICAgICAgdGhpcy5yZW5kZXJDYW52YXMoKTtcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZHJhZ0JveCwgQ0xBU1NfTU9EQUwpO1xuICAgICAgYWRkQ2xhc3ModGhpcy5jcm9wQm94LCBDTEFTU19ISURERU4pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIFJlcGxhY2UgdGhlIGltYWdlJ3Mgc3JjIGFuZCByZWJ1aWxkIHRoZSBjcm9wcGVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgbmV3IFVSTC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbaGFzU2FtZVNpemVdIC0gSW5kaWNhdGUgaWYgdGhlIG5ldyBpbWFnZSBoYXMgdGhlIHNhbWUgc2l6ZSBhcyB0aGUgb2xkIG9uZS5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHJlcGxhY2U6IGZ1bmN0aW9uIHJlcGxhY2UodXJsKSB7XG4gICAgdmFyIGhhc1NhbWVTaXplID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTtcblxuICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiB1cmwpIHtcbiAgICAgIGlmICh0aGlzLmlzSW1nKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zcmMgPSB1cmw7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNTYW1lU2l6ZSkge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSB1cmw7XG5cbiAgICAgICAgaWYgKHRoaXMucmVhZHkpIHtcbiAgICAgICAgICB0aGlzLnZpZXdCb3hJbWFnZS5zcmMgPSB1cmw7XG5cbiAgICAgICAgICBmb3JFYWNoKHRoaXMucHJldmlld3MsIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbWcnKVswXS5zcmMgPSB1cmw7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmlzSW1nKSB7XG4gICAgICAgICAgdGhpcy5yZXBsYWNlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMudW5jcmVhdGUoKTtcbiAgICAgICAgdGhpcy5sb2FkKHVybCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvLyBFbmFibGUgKHVuZnJlZXplKSB0aGUgY3JvcHBlclxuICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcbiAgICBpZiAodGhpcy5yZWFkeSAmJiB0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmNyb3BwZXIsIENMQVNTX0RJU0FCTEVEKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8vIERpc2FibGUgKGZyZWV6ZSkgdGhlIGNyb3BwZXJcbiAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICBpZiAodGhpcy5yZWFkeSAmJiAhdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBhZGRDbGFzcyh0aGlzLmNyb3BwZXIsIENMQVNTX0RJU0FCTEVEKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBjcm9wcGVyIGFuZCByZW1vdmUgdGhlIGluc3RhbmNlIGZyb20gdGhlIGltYWdlXG4gICAqIEByZXR1cm5zIHtDcm9wcGVyfSB0aGlzXG4gICAqL1xuICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuXG5cbiAgICBpZiAoIWdldERhdGEoZWxlbWVudCwgTkFNRVNQQUNFKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNJbWcgJiYgdGhpcy5yZXBsYWNlZCkge1xuICAgICAgZWxlbWVudC5zcmMgPSB0aGlzLm9yaWdpbmFsVXJsO1xuICAgIH1cblxuICAgIHRoaXMudW5jcmVhdGUoKTtcbiAgICByZW1vdmVEYXRhKGVsZW1lbnQsIE5BTUVTUEFDRSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBjYW52YXMgd2l0aCByZWxhdGl2ZSBvZmZzZXRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIC0gVGhlIHJlbGF0aXZlIG9mZnNldCBkaXN0YW5jZSBvbiB0aGUgeC1heGlzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldFk9b2Zmc2V0WF0gLSBUaGUgcmVsYXRpdmUgb2Zmc2V0IGRpc3RhbmNlIG9uIHRoZSB5LWF4aXMuXG4gICAqIEByZXR1cm5zIHtDcm9wcGVyfSB0aGlzXG4gICAqL1xuICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKG9mZnNldFgpIHtcbiAgICB2YXIgb2Zmc2V0WSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogb2Zmc2V0WDtcbiAgICB2YXIgX2NhbnZhc0RhdGEgPSB0aGlzLmNhbnZhc0RhdGEsXG4gICAgICAgIGxlZnQgPSBfY2FudmFzRGF0YS5sZWZ0LFxuICAgICAgICB0b3AgPSBfY2FudmFzRGF0YS50b3A7XG5cblxuICAgIHJldHVybiB0aGlzLm1vdmVUbyhpc1VuZGVmaW5lZChvZmZzZXRYKSA/IG9mZnNldFggOiBsZWZ0ICsgTnVtYmVyKG9mZnNldFgpLCBpc1VuZGVmaW5lZChvZmZzZXRZKSA/IG9mZnNldFkgOiB0b3AgKyBOdW1iZXIob2Zmc2V0WSkpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIE1vdmUgdGhlIGNhbnZhcyB0byBhbiBhYnNvbHV0ZSBwb2ludFxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtIFRoZSB4LWF4aXMgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5PXhdIC0gVGhlIHktYXhpcyBjb29yZGluYXRlLlxuICAgKiBAcmV0dXJucyB7Q3JvcHBlcn0gdGhpc1xuICAgKi9cbiAgbW92ZVRvOiBmdW5jdGlvbiBtb3ZlVG8oeCkge1xuICAgIHZhciB5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB4O1xuICAgIHZhciBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhO1xuXG4gICAgdmFyIGNoYW5nZWQgPSBmYWxzZTtcblxuICAgIHggPSBOdW1iZXIoeCk7XG4gICAgeSA9IE51bWJlcih5KTtcblxuICAgIGlmICh0aGlzLnJlYWR5ICYmICF0aGlzLmRpc2FibGVkICYmIHRoaXMub3B0aW9ucy5tb3ZhYmxlKSB7XG4gICAgICBpZiAoaXNOdW1iZXIoeCkpIHtcbiAgICAgICAgY2FudmFzRGF0YS5sZWZ0ID0geDtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc051bWJlcih5KSkge1xuICAgICAgICBjYW52YXNEYXRhLnRvcCA9IHk7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB0aGlzLnJlbmRlckNhbnZhcyh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBab29tIHRoZSBjYW52YXMgd2l0aCBhIHJlbGF0aXZlIHJhdGlvXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyAtIFRoZSB0YXJnZXQgcmF0aW8uXG4gICAqIEBwYXJhbSB7RXZlbnR9IF9vcmlnaW5hbEV2ZW50IC0gVGhlIG9yaWdpbmFsIGV2ZW50IGlmIGFueS5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHpvb206IGZ1bmN0aW9uIHpvb20ocmF0aW8sIF9vcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGNhbnZhc0RhdGEgPSB0aGlzLmNhbnZhc0RhdGE7XG5cblxuICAgIHJhdGlvID0gTnVtYmVyKHJhdGlvKTtcblxuICAgIGlmIChyYXRpbyA8IDApIHtcbiAgICAgIHJhdGlvID0gMSAvICgxIC0gcmF0aW8pO1xuICAgIH0gZWxzZSB7XG4gICAgICByYXRpbyA9IDEgKyByYXRpbztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy56b29tVG8oY2FudmFzRGF0YS53aWR0aCAqIHJhdGlvIC8gY2FudmFzRGF0YS5uYXR1cmFsV2lkdGgsIG51bGwsIF9vcmlnaW5hbEV2ZW50KTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBab29tIHRoZSBjYW52YXMgdG8gYW4gYWJzb2x1dGUgcmF0aW9cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIC0gVGhlIHRhcmdldCByYXRpby5cbiAgICogQHBhcmFtIHtPYmplY3R9IHBpdm90IC0gVGhlIHpvb20gcGl2b3QgcG9pbnQgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtFdmVudH0gX29yaWdpbmFsRXZlbnQgLSBUaGUgb3JpZ2luYWwgZXZlbnQgaWYgYW55LlxuICAgKiBAcmV0dXJucyB7Q3JvcHBlcn0gdGhpc1xuICAgKi9cbiAgem9vbVRvOiBmdW5jdGlvbiB6b29tVG8ocmF0aW8sIHBpdm90LCBfb3JpZ2luYWxFdmVudCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhO1xuICAgIHZhciB3aWR0aCA9IGNhbnZhc0RhdGEud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IGNhbnZhc0RhdGEuaGVpZ2h0LFxuICAgICAgICBuYXR1cmFsV2lkdGggPSBjYW52YXNEYXRhLm5hdHVyYWxXaWR0aCxcbiAgICAgICAgbmF0dXJhbEhlaWdodCA9IGNhbnZhc0RhdGEubmF0dXJhbEhlaWdodDtcblxuXG4gICAgcmF0aW8gPSBOdW1iZXIocmF0aW8pO1xuXG4gICAgaWYgKHJhdGlvID49IDAgJiYgdGhpcy5yZWFkeSAmJiAhdGhpcy5kaXNhYmxlZCAmJiBvcHRpb25zLnpvb21hYmxlKSB7XG4gICAgICB2YXIgbmV3V2lkdGggPSBuYXR1cmFsV2lkdGggKiByYXRpbztcbiAgICAgIHZhciBuZXdIZWlnaHQgPSBuYXR1cmFsSGVpZ2h0ICogcmF0aW87XG5cbiAgICAgIGlmIChkaXNwYXRjaEV2ZW50KHRoaXMuZWxlbWVudCwgRVZFTlRfWk9PTSwge1xuICAgICAgICBvcmlnaW5hbEV2ZW50OiBfb3JpZ2luYWxFdmVudCxcbiAgICAgICAgb2xkUmF0aW86IHdpZHRoIC8gbmF0dXJhbFdpZHRoLFxuICAgICAgICByYXRpbzogbmV3V2lkdGggLyBuYXR1cmFsV2lkdGhcbiAgICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgaWYgKF9vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgIHZhciBwb2ludGVycyA9IHRoaXMucG9pbnRlcnM7XG5cbiAgICAgICAgdmFyIG9mZnNldCA9IGdldE9mZnNldCh0aGlzLmNyb3BwZXIpO1xuICAgICAgICB2YXIgY2VudGVyID0gcG9pbnRlcnMgJiYgT2JqZWN0LmtleXMocG9pbnRlcnMpLmxlbmd0aCA/IGdldFBvaW50ZXJzQ2VudGVyKHBvaW50ZXJzKSA6IHtcbiAgICAgICAgICBwYWdlWDogX29yaWdpbmFsRXZlbnQucGFnZVgsXG4gICAgICAgICAgcGFnZVk6IF9vcmlnaW5hbEV2ZW50LnBhZ2VZXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gWm9vbSBmcm9tIHRoZSB0cmlnZ2VyaW5nIHBvaW50IG9mIHRoZSBldmVudFxuICAgICAgICBjYW52YXNEYXRhLmxlZnQgLT0gKG5ld1dpZHRoIC0gd2lkdGgpICogKChjZW50ZXIucGFnZVggLSBvZmZzZXQubGVmdCAtIGNhbnZhc0RhdGEubGVmdCkgLyB3aWR0aCk7XG4gICAgICAgIGNhbnZhc0RhdGEudG9wIC09IChuZXdIZWlnaHQgLSBoZWlnaHQpICogKChjZW50ZXIucGFnZVkgLSBvZmZzZXQudG9wIC0gY2FudmFzRGF0YS50b3ApIC8gaGVpZ2h0KTtcbiAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwaXZvdCkgJiYgaXNOdW1iZXIocGl2b3QueCkgJiYgaXNOdW1iZXIocGl2b3QueSkpIHtcbiAgICAgICAgY2FudmFzRGF0YS5sZWZ0IC09IChuZXdXaWR0aCAtIHdpZHRoKSAqICgocGl2b3QueCAtIGNhbnZhc0RhdGEubGVmdCkgLyB3aWR0aCk7XG4gICAgICAgIGNhbnZhc0RhdGEudG9wIC09IChuZXdIZWlnaHQgLSBoZWlnaHQpICogKChwaXZvdC55IC0gY2FudmFzRGF0YS50b3ApIC8gaGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFpvb20gZnJvbSB0aGUgY2VudGVyIG9mIHRoZSBjYW52YXNcbiAgICAgICAgY2FudmFzRGF0YS5sZWZ0IC09IChuZXdXaWR0aCAtIHdpZHRoKSAvIDI7XG4gICAgICAgIGNhbnZhc0RhdGEudG9wIC09IChuZXdIZWlnaHQgLSBoZWlnaHQpIC8gMjtcbiAgICAgIH1cblxuICAgICAgY2FudmFzRGF0YS53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgY2FudmFzRGF0YS5oZWlnaHQgPSBuZXdIZWlnaHQ7XG4gICAgICB0aGlzLnJlbmRlckNhbnZhcyh0cnVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIGNhbnZhcyB3aXRoIGEgcmVsYXRpdmUgZGVncmVlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWUgLSBUaGUgcm90YXRlIGRlZ3JlZS5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHJvdGF0ZTogZnVuY3Rpb24gcm90YXRlKGRlZ3JlZSkge1xuICAgIHJldHVybiB0aGlzLnJvdGF0ZVRvKCh0aGlzLmltYWdlRGF0YS5yb3RhdGUgfHwgMCkgKyBOdW1iZXIoZGVncmVlKSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogUm90YXRlIHRoZSBjYW52YXMgdG8gYW4gYWJzb2x1dGUgZGVncmVlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWUgLSBUaGUgcm90YXRlIGRlZ3JlZS5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHJvdGF0ZVRvOiBmdW5jdGlvbiByb3RhdGVUbyhkZWdyZWUpIHtcbiAgICBkZWdyZWUgPSBOdW1iZXIoZGVncmVlKTtcblxuICAgIGlmIChpc051bWJlcihkZWdyZWUpICYmIHRoaXMucmVhZHkgJiYgIXRoaXMuZGlzYWJsZWQgJiYgdGhpcy5vcHRpb25zLnJvdGF0YWJsZSkge1xuICAgICAgdGhpcy5pbWFnZURhdGEucm90YXRlID0gZGVncmVlICUgMzYwO1xuICAgICAgdGhpcy5yZW5kZXJDYW52YXModHJ1ZSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2NhbGUgdGhlIGltYWdlIG9uIHRoZSB4LWF4aXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZVggLSBUaGUgc2NhbGUgcmF0aW8gb24gdGhlIHgtYXhpcy5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHNjYWxlWDogZnVuY3Rpb24gc2NhbGVYKF9zY2FsZVgpIHtcbiAgICB2YXIgc2NhbGVZID0gdGhpcy5pbWFnZURhdGEuc2NhbGVZO1xuXG5cbiAgICByZXR1cm4gdGhpcy5zY2FsZShfc2NhbGVYLCBpc051bWJlcihzY2FsZVkpID8gc2NhbGVZIDogMSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2NhbGUgdGhlIGltYWdlIG9uIHRoZSB5LWF4aXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZVkgLSBUaGUgc2NhbGUgcmF0aW8gb24gdGhlIHktYXhpcy5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHNjYWxlWTogZnVuY3Rpb24gc2NhbGVZKF9zY2FsZVkpIHtcbiAgICB2YXIgc2NhbGVYID0gdGhpcy5pbWFnZURhdGEuc2NhbGVYO1xuXG5cbiAgICByZXR1cm4gdGhpcy5zY2FsZShpc051bWJlcihzY2FsZVgpID8gc2NhbGVYIDogMSwgX3NjYWxlWSk7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2NhbGUgdGhlIGltYWdlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZVggLSBUaGUgc2NhbGUgcmF0aW8gb24gdGhlIHgtYXhpcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzY2FsZVk9c2NhbGVYXSAtIFRoZSBzY2FsZSByYXRpbyBvbiB0aGUgeS1heGlzLlxuICAgKiBAcmV0dXJucyB7Q3JvcHBlcn0gdGhpc1xuICAgKi9cbiAgc2NhbGU6IGZ1bmN0aW9uIHNjYWxlKHNjYWxlWCkge1xuICAgIHZhciBzY2FsZVkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHNjYWxlWDtcbiAgICB2YXIgaW1hZ2VEYXRhID0gdGhpcy5pbWFnZURhdGE7XG5cbiAgICB2YXIgdHJhbnNmb3JtZWQgPSBmYWxzZTtcblxuICAgIHNjYWxlWCA9IE51bWJlcihzY2FsZVgpO1xuICAgIHNjYWxlWSA9IE51bWJlcihzY2FsZVkpO1xuXG4gICAgaWYgKHRoaXMucmVhZHkgJiYgIXRoaXMuZGlzYWJsZWQgJiYgdGhpcy5vcHRpb25zLnNjYWxhYmxlKSB7XG4gICAgICBpZiAoaXNOdW1iZXIoc2NhbGVYKSkge1xuICAgICAgICBpbWFnZURhdGEuc2NhbGVYID0gc2NhbGVYO1xuICAgICAgICB0cmFuc2Zvcm1lZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc051bWJlcihzY2FsZVkpKSB7XG4gICAgICAgIGltYWdlRGF0YS5zY2FsZVkgPSBzY2FsZVk7XG4gICAgICAgIHRyYW5zZm9ybWVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRyYW5zZm9ybWVkKSB7XG4gICAgICAgIHRoaXMucmVuZGVyQ2FudmFzKHRydWUsIHRydWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3JvcHBlZCBhcmVhIHBvc2l0aW9uIGFuZCBzaXplIGRhdGEgKGJhc2Ugb24gdGhlIG9yaWdpbmFsIGltYWdlKVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtyb3VuZGVkPWZhbHNlXSAtIEluZGljYXRlIGlmIHJvdW5kIHRoZSBkYXRhIHZhbHVlcyBvciBub3QuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSByZXN1bHQgY3JvcHBlZCBkYXRhLlxuICAgKi9cbiAgZ2V0RGF0YTogZnVuY3Rpb24gZ2V0RGF0YSQkMSgpIHtcbiAgICB2YXIgcm91bmRlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIGltYWdlRGF0YSA9IHRoaXMuaW1hZ2VEYXRhLFxuICAgICAgICBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhLFxuICAgICAgICBjcm9wQm94RGF0YSA9IHRoaXMuY3JvcEJveERhdGE7XG5cbiAgICB2YXIgZGF0YSA9IHZvaWQgMDtcblxuICAgIGlmICh0aGlzLnJlYWR5ICYmIHRoaXMuY3JvcHBlZCkge1xuICAgICAgZGF0YSA9IHtcbiAgICAgICAgeDogY3JvcEJveERhdGEubGVmdCAtIGNhbnZhc0RhdGEubGVmdCxcbiAgICAgICAgeTogY3JvcEJveERhdGEudG9wIC0gY2FudmFzRGF0YS50b3AsXG4gICAgICAgIHdpZHRoOiBjcm9wQm94RGF0YS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBjcm9wQm94RGF0YS5oZWlnaHRcbiAgICAgIH07XG5cbiAgICAgIHZhciByYXRpbyA9IGltYWdlRGF0YS53aWR0aCAvIGltYWdlRGF0YS5uYXR1cmFsV2lkdGg7XG5cbiAgICAgIGZvckVhY2goZGF0YSwgZnVuY3Rpb24gKG4sIGkpIHtcbiAgICAgICAgbiAvPSByYXRpbztcbiAgICAgICAgZGF0YVtpXSA9IHJvdW5kZWQgPyBNYXRoLnJvdW5kKG4pIDogbjtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICB4OiAwLFxuICAgICAgICB5OiAwLFxuICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgaGVpZ2h0OiAwXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnJvdGF0YWJsZSkge1xuICAgICAgZGF0YS5yb3RhdGUgPSBpbWFnZURhdGEucm90YXRlIHx8IDA7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc2NhbGFibGUpIHtcbiAgICAgIGRhdGEuc2NhbGVYID0gaW1hZ2VEYXRhLnNjYWxlWCB8fCAxO1xuICAgICAgZGF0YS5zY2FsZVkgPSBpbWFnZURhdGEuc2NhbGVZIHx8IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBjcm9wcGVkIGFyZWEgcG9zaXRpb24gYW5kIHNpemUgd2l0aCBuZXcgZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAtIFRoZSBuZXcgZGF0YS5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHNldERhdGE6IGZ1bmN0aW9uIHNldERhdGEkJDEoZGF0YSkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBpbWFnZURhdGEgPSB0aGlzLmltYWdlRGF0YSxcbiAgICAgICAgY2FudmFzRGF0YSA9IHRoaXMuY2FudmFzRGF0YTtcblxuICAgIHZhciBjcm9wQm94RGF0YSA9IHt9O1xuXG4gICAgaWYgKHRoaXMucmVhZHkgJiYgIXRoaXMuZGlzYWJsZWQgJiYgaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgdmFyIHRyYW5zZm9ybWVkID0gZmFsc2U7XG5cbiAgICAgIGlmIChvcHRpb25zLnJvdGF0YWJsZSkge1xuICAgICAgICBpZiAoaXNOdW1iZXIoZGF0YS5yb3RhdGUpICYmIGRhdGEucm90YXRlICE9PSBpbWFnZURhdGEucm90YXRlKSB7XG4gICAgICAgICAgaW1hZ2VEYXRhLnJvdGF0ZSA9IGRhdGEucm90YXRlO1xuICAgICAgICAgIHRyYW5zZm9ybWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5zY2FsYWJsZSkge1xuICAgICAgICBpZiAoaXNOdW1iZXIoZGF0YS5zY2FsZVgpICYmIGRhdGEuc2NhbGVYICE9PSBpbWFnZURhdGEuc2NhbGVYKSB7XG4gICAgICAgICAgaW1hZ2VEYXRhLnNjYWxlWCA9IGRhdGEuc2NhbGVYO1xuICAgICAgICAgIHRyYW5zZm9ybWVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc051bWJlcihkYXRhLnNjYWxlWSkgJiYgZGF0YS5zY2FsZVkgIT09IGltYWdlRGF0YS5zY2FsZVkpIHtcbiAgICAgICAgICBpbWFnZURhdGEuc2NhbGVZID0gZGF0YS5zY2FsZVk7XG4gICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0cmFuc2Zvcm1lZCkge1xuICAgICAgICB0aGlzLnJlbmRlckNhbnZhcyh0cnVlLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJhdGlvID0gaW1hZ2VEYXRhLndpZHRoIC8gaW1hZ2VEYXRhLm5hdHVyYWxXaWR0aDtcblxuICAgICAgaWYgKGlzTnVtYmVyKGRhdGEueCkpIHtcbiAgICAgICAgY3JvcEJveERhdGEubGVmdCA9IGRhdGEueCAqIHJhdGlvICsgY2FudmFzRGF0YS5sZWZ0O1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNOdW1iZXIoZGF0YS55KSkge1xuICAgICAgICBjcm9wQm94RGF0YS50b3AgPSBkYXRhLnkgKiByYXRpbyArIGNhbnZhc0RhdGEudG9wO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNOdW1iZXIoZGF0YS53aWR0aCkpIHtcbiAgICAgICAgY3JvcEJveERhdGEud2lkdGggPSBkYXRhLndpZHRoICogcmF0aW87XG4gICAgICB9XG5cbiAgICAgIGlmIChpc051bWJlcihkYXRhLmhlaWdodCkpIHtcbiAgICAgICAgY3JvcEJveERhdGEuaGVpZ2h0ID0gZGF0YS5oZWlnaHQgKiByYXRpbztcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRDcm9wQm94RGF0YShjcm9wQm94RGF0YSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogR2V0IHRoZSBjb250YWluZXIgc2l6ZSBkYXRhLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcmVzdWx0IGNvbnRhaW5lciBkYXRhLlxuICAgKi9cbiAgZ2V0Q29udGFpbmVyRGF0YTogZnVuY3Rpb24gZ2V0Q29udGFpbmVyRGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWFkeSA/IGFzc2lnbih7fSwgdGhpcy5jb250YWluZXJEYXRhKSA6IHt9O1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW1hZ2UgcG9zaXRpb24gYW5kIHNpemUgZGF0YS5cbiAgICogQHJldHVybnMge09iamVjdH0gVGhlIHJlc3VsdCBpbWFnZSBkYXRhLlxuICAgKi9cbiAgZ2V0SW1hZ2VEYXRhOiBmdW5jdGlvbiBnZXRJbWFnZURhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZWQgPyBhc3NpZ24oe30sIHRoaXMuaW1hZ2VEYXRhKSA6IHt9O1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2FudmFzIHBvc2l0aW9uIGFuZCBzaXplIGRhdGEuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFRoZSByZXN1bHQgY2FudmFzIGRhdGEuXG4gICAqL1xuICBnZXRDYW52YXNEYXRhOiBmdW5jdGlvbiBnZXRDYW52YXNEYXRhKCkge1xuICAgIHZhciBjYW52YXNEYXRhID0gdGhpcy5jYW52YXNEYXRhO1xuXG4gICAgdmFyIGRhdGEgPSB7fTtcblxuICAgIGlmICh0aGlzLnJlYWR5KSB7XG4gICAgICBmb3JFYWNoKFsnbGVmdCcsICd0b3AnLCAnd2lkdGgnLCAnaGVpZ2h0JywgJ25hdHVyYWxXaWR0aCcsICduYXR1cmFsSGVpZ2h0J10sIGZ1bmN0aW9uIChuKSB7XG4gICAgICAgIGRhdGFbbl0gPSBjYW52YXNEYXRhW25dO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sXG5cblxuICAvKipcbiAgICogU2V0IHRoZSBjYW52YXMgcG9zaXRpb24gYW5kIHNpemUgd2l0aCBuZXcgZGF0YS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBUaGUgbmV3IGNhbnZhcyBkYXRhLlxuICAgKiBAcmV0dXJucyB7Q3JvcHBlcn0gdGhpc1xuICAgKi9cbiAgc2V0Q2FudmFzRGF0YTogZnVuY3Rpb24gc2V0Q2FudmFzRGF0YShkYXRhKSB7XG4gICAgdmFyIGNhbnZhc0RhdGEgPSB0aGlzLmNhbnZhc0RhdGE7XG4gICAgdmFyIGFzcGVjdFJhdGlvID0gY2FudmFzRGF0YS5hc3BlY3RSYXRpbztcblxuXG4gICAgaWYgKHRoaXMucmVhZHkgJiYgIXRoaXMuZGlzYWJsZWQgJiYgaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgaWYgKGlzTnVtYmVyKGRhdGEubGVmdCkpIHtcbiAgICAgICAgY2FudmFzRGF0YS5sZWZ0ID0gZGF0YS5sZWZ0O1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNOdW1iZXIoZGF0YS50b3ApKSB7XG4gICAgICAgIGNhbnZhc0RhdGEudG9wID0gZGF0YS50b3A7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc051bWJlcihkYXRhLndpZHRoKSkge1xuICAgICAgICBjYW52YXNEYXRhLndpZHRoID0gZGF0YS53aWR0aDtcbiAgICAgICAgY2FudmFzRGF0YS5oZWlnaHQgPSBkYXRhLndpZHRoIC8gYXNwZWN0UmF0aW87XG4gICAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKGRhdGEuaGVpZ2h0KSkge1xuICAgICAgICBjYW52YXNEYXRhLmhlaWdodCA9IGRhdGEuaGVpZ2h0O1xuICAgICAgICBjYW52YXNEYXRhLndpZHRoID0gZGF0YS5oZWlnaHQgKiBhc3BlY3RSYXRpbztcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZW5kZXJDYW52YXModHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogR2V0IHRoZSBjcm9wIGJveCBwb3NpdGlvbiBhbmQgc2l6ZSBkYXRhLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgcmVzdWx0IGNyb3AgYm94IGRhdGEuXG4gICAqL1xuICBnZXRDcm9wQm94RGF0YTogZnVuY3Rpb24gZ2V0Q3JvcEJveERhdGEoKSB7XG4gICAgdmFyIGNyb3BCb3hEYXRhID0gdGhpcy5jcm9wQm94RGF0YTtcblxuICAgIHZhciBkYXRhID0gdm9pZCAwO1xuXG4gICAgaWYgKHRoaXMucmVhZHkgJiYgdGhpcy5jcm9wcGVkKSB7XG4gICAgICBkYXRhID0ge1xuICAgICAgICBsZWZ0OiBjcm9wQm94RGF0YS5sZWZ0LFxuICAgICAgICB0b3A6IGNyb3BCb3hEYXRhLnRvcCxcbiAgICAgICAgd2lkdGg6IGNyb3BCb3hEYXRhLndpZHRoLFxuICAgICAgICBoZWlnaHQ6IGNyb3BCb3hEYXRhLmhlaWdodFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YSB8fCB7fTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNyb3AgYm94IHBvc2l0aW9uIGFuZCBzaXplIHdpdGggbmV3IGRhdGEuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIC0gVGhlIG5ldyBjcm9wIGJveCBkYXRhLlxuICAgKiBAcmV0dXJucyB7Q3JvcHBlcn0gdGhpc1xuICAgKi9cbiAgc2V0Q3JvcEJveERhdGE6IGZ1bmN0aW9uIHNldENyb3BCb3hEYXRhKGRhdGEpIHtcbiAgICB2YXIgY3JvcEJveERhdGEgPSB0aGlzLmNyb3BCb3hEYXRhO1xuICAgIHZhciBhc3BlY3RSYXRpbyA9IHRoaXMub3B0aW9ucy5hc3BlY3RSYXRpbztcblxuICAgIHZhciB3aWR0aENoYW5nZWQgPSB2b2lkIDA7XG4gICAgdmFyIGhlaWdodENoYW5nZWQgPSB2b2lkIDA7XG5cbiAgICBpZiAodGhpcy5yZWFkeSAmJiB0aGlzLmNyb3BwZWQgJiYgIXRoaXMuZGlzYWJsZWQgJiYgaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgaWYgKGlzTnVtYmVyKGRhdGEubGVmdCkpIHtcbiAgICAgICAgY3JvcEJveERhdGEubGVmdCA9IGRhdGEubGVmdDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTnVtYmVyKGRhdGEudG9wKSkge1xuICAgICAgICBjcm9wQm94RGF0YS50b3AgPSBkYXRhLnRvcDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTnVtYmVyKGRhdGEud2lkdGgpICYmIGRhdGEud2lkdGggIT09IGNyb3BCb3hEYXRhLndpZHRoKSB7XG4gICAgICAgIHdpZHRoQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgIGNyb3BCb3hEYXRhLndpZHRoID0gZGF0YS53aWR0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzTnVtYmVyKGRhdGEuaGVpZ2h0KSAmJiBkYXRhLmhlaWdodCAhPT0gY3JvcEJveERhdGEuaGVpZ2h0KSB7XG4gICAgICAgIGhlaWdodENoYW5nZWQgPSB0cnVlO1xuICAgICAgICBjcm9wQm94RGF0YS5oZWlnaHQgPSBkYXRhLmhlaWdodDtcbiAgICAgIH1cblxuICAgICAgaWYgKGFzcGVjdFJhdGlvKSB7XG4gICAgICAgIGlmICh3aWR0aENoYW5nZWQpIHtcbiAgICAgICAgICBjcm9wQm94RGF0YS5oZWlnaHQgPSBjcm9wQm94RGF0YS53aWR0aCAvIGFzcGVjdFJhdGlvO1xuICAgICAgICB9IGVsc2UgaWYgKGhlaWdodENoYW5nZWQpIHtcbiAgICAgICAgICBjcm9wQm94RGF0YS53aWR0aCA9IGNyb3BCb3hEYXRhLmhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVuZGVyQ3JvcEJveCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIEdldCBhIGNhbnZhcyBkcmF3biB0aGUgY3JvcHBlZCBpbWFnZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSAtIFRoZSBjb25maWcgb3B0aW9ucy5cbiAgICogQHJldHVybnMge0hUTUxDYW52YXNFbGVtZW50fSAtIFRoZSByZXN1bHQgY2FudmFzLlxuICAgKi9cbiAgZ2V0Q3JvcHBlZENhbnZhczogZnVuY3Rpb24gZ2V0Q3JvcHBlZENhbnZhcygpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICBpZiAoIXRoaXMucmVhZHkgfHwgIXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGNhbnZhc0RhdGEgPSB0aGlzLmNhbnZhc0RhdGE7XG5cbiAgICB2YXIgc291cmNlID0gZ2V0U291cmNlQ2FudmFzKHRoaXMuaW1hZ2UsIHRoaXMuaW1hZ2VEYXRhLCBjYW52YXNEYXRhLCBvcHRpb25zKTtcblxuICAgIC8vIFJldHVybnMgdGhlIHNvdXJjZSBjYW52YXMgaWYgaXQgaXMgbm90IGNyb3BwZWQuXG4gICAgaWYgKCF0aGlzLmNyb3BwZWQpIHtcbiAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuXG4gICAgdmFyIF9nZXREYXRhID0gdGhpcy5nZXREYXRhKCksXG4gICAgICAgIGluaXRpYWxYID0gX2dldERhdGEueCxcbiAgICAgICAgaW5pdGlhbFkgPSBfZ2V0RGF0YS55LFxuICAgICAgICBpbml0aWFsV2lkdGggPSBfZ2V0RGF0YS53aWR0aCxcbiAgICAgICAgaW5pdGlhbEhlaWdodCA9IF9nZXREYXRhLmhlaWdodDtcblxuICAgIHZhciByYXRpbyA9IHNvdXJjZS53aWR0aCAvIE1hdGguZmxvb3IoY2FudmFzRGF0YS5uYXR1cmFsV2lkdGgpO1xuXG4gICAgaWYgKHJhdGlvICE9PSAxKSB7XG4gICAgICBpbml0aWFsWCAqPSByYXRpbztcbiAgICAgIGluaXRpYWxZICo9IHJhdGlvO1xuICAgICAgaW5pdGlhbFdpZHRoICo9IHJhdGlvO1xuICAgICAgaW5pdGlhbEhlaWdodCAqPSByYXRpbztcbiAgICB9XG5cbiAgICB2YXIgYXNwZWN0UmF0aW8gPSBpbml0aWFsV2lkdGggLyBpbml0aWFsSGVpZ2h0O1xuICAgIHZhciBtYXhTaXplcyA9IGdldEFkanVzdGVkU2l6ZXMoe1xuICAgICAgYXNwZWN0UmF0aW86IGFzcGVjdFJhdGlvLFxuICAgICAgd2lkdGg6IG9wdGlvbnMubWF4V2lkdGggfHwgSW5maW5pdHksXG4gICAgICBoZWlnaHQ6IG9wdGlvbnMubWF4SGVpZ2h0IHx8IEluZmluaXR5XG4gICAgfSk7XG4gICAgdmFyIG1pblNpemVzID0gZ2V0QWRqdXN0ZWRTaXplcyh7XG4gICAgICBhc3BlY3RSYXRpbzogYXNwZWN0UmF0aW8sXG4gICAgICB3aWR0aDogb3B0aW9ucy5taW5XaWR0aCB8fCAwLFxuICAgICAgaGVpZ2h0OiBvcHRpb25zLm1pbkhlaWdodCB8fCAwXG4gICAgfSwgJ2NvdmVyJyk7XG5cbiAgICB2YXIgX2dldEFkanVzdGVkU2l6ZXMgPSBnZXRBZGp1c3RlZFNpemVzKHtcbiAgICAgIGFzcGVjdFJhdGlvOiBhc3BlY3RSYXRpbyxcbiAgICAgIHdpZHRoOiBvcHRpb25zLndpZHRoIHx8IChyYXRpbyAhPT0gMSA/IHNvdXJjZS53aWR0aCA6IGluaXRpYWxXaWR0aCksXG4gICAgICBoZWlnaHQ6IG9wdGlvbnMuaGVpZ2h0IHx8IChyYXRpbyAhPT0gMSA/IHNvdXJjZS5oZWlnaHQgOiBpbml0aWFsSGVpZ2h0KVxuICAgIH0pLFxuICAgICAgICB3aWR0aCA9IF9nZXRBZGp1c3RlZFNpemVzLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSBfZ2V0QWRqdXN0ZWRTaXplcy5oZWlnaHQ7XG5cbiAgICB3aWR0aCA9IE1hdGgubWluKG1heFNpemVzLndpZHRoLCBNYXRoLm1heChtaW5TaXplcy53aWR0aCwgd2lkdGgpKTtcbiAgICBoZWlnaHQgPSBNYXRoLm1pbihtYXhTaXplcy5oZWlnaHQsIE1hdGgubWF4KG1pblNpemVzLmhlaWdodCwgaGVpZ2h0KSk7XG5cbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIGNhbnZhcy53aWR0aCA9IG5vcm1hbGl6ZURlY2ltYWxOdW1iZXIod2lkdGgpO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBub3JtYWxpemVEZWNpbWFsTnVtYmVyKGhlaWdodCk7XG5cbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9wdGlvbnMuZmlsbENvbG9yIHx8ICd0cmFuc3BhcmVudCc7XG4gICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHZhciBfb3B0aW9ucyRpbWFnZVNtb290aGkgPSBvcHRpb25zLmltYWdlU21vb3RoaW5nRW5hYmxlZCxcbiAgICAgICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gX29wdGlvbnMkaW1hZ2VTbW9vdGhpID09PSB1bmRlZmluZWQgPyB0cnVlIDogX29wdGlvbnMkaW1hZ2VTbW9vdGhpLFxuICAgICAgICBpbWFnZVNtb290aGluZ1F1YWxpdHkgPSBvcHRpb25zLmltYWdlU21vb3RoaW5nUXVhbGl0eTtcblxuXG4gICAgY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBpbWFnZVNtb290aGluZ0VuYWJsZWQ7XG5cbiAgICBpZiAoaW1hZ2VTbW9vdGhpbmdRdWFsaXR5KSB7XG4gICAgICBjb250ZXh0LmltYWdlU21vb3RoaW5nUXVhbGl0eSA9IGltYWdlU21vb3RoaW5nUXVhbGl0eTtcbiAgICB9XG5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELmRyYXdJbWFnZVxuICAgIHZhciBzb3VyY2VXaWR0aCA9IHNvdXJjZS53aWR0aDtcbiAgICB2YXIgc291cmNlSGVpZ2h0ID0gc291cmNlLmhlaWdodDtcblxuICAgIC8vIFNvdXJjZSBjYW52YXMgcGFyYW1ldGVyc1xuICAgIHZhciBzcmNYID0gaW5pdGlhbFg7XG4gICAgdmFyIHNyY1kgPSBpbml0aWFsWTtcbiAgICB2YXIgc3JjV2lkdGggPSB2b2lkIDA7XG4gICAgdmFyIHNyY0hlaWdodCA9IHZvaWQgMDtcblxuICAgIC8vIERlc3RpbmF0aW9uIGNhbnZhcyBwYXJhbWV0ZXJzXG4gICAgdmFyIGRzdFggPSB2b2lkIDA7XG4gICAgdmFyIGRzdFkgPSB2b2lkIDA7XG4gICAgdmFyIGRzdFdpZHRoID0gdm9pZCAwO1xuICAgIHZhciBkc3RIZWlnaHQgPSB2b2lkIDA7XG5cbiAgICBpZiAoc3JjWCA8PSAtaW5pdGlhbFdpZHRoIHx8IHNyY1ggPiBzb3VyY2VXaWR0aCkge1xuICAgICAgc3JjWCA9IDA7XG4gICAgICBzcmNXaWR0aCA9IDA7XG4gICAgICBkc3RYID0gMDtcbiAgICAgIGRzdFdpZHRoID0gMDtcbiAgICB9IGVsc2UgaWYgKHNyY1ggPD0gMCkge1xuICAgICAgZHN0WCA9IC1zcmNYO1xuICAgICAgc3JjWCA9IDA7XG4gICAgICBzcmNXaWR0aCA9IE1hdGgubWluKHNvdXJjZVdpZHRoLCBpbml0aWFsV2lkdGggKyBzcmNYKTtcbiAgICAgIGRzdFdpZHRoID0gc3JjV2lkdGg7XG4gICAgfSBlbHNlIGlmIChzcmNYIDw9IHNvdXJjZVdpZHRoKSB7XG4gICAgICBkc3RYID0gMDtcbiAgICAgIHNyY1dpZHRoID0gTWF0aC5taW4oaW5pdGlhbFdpZHRoLCBzb3VyY2VXaWR0aCAtIHNyY1gpO1xuICAgICAgZHN0V2lkdGggPSBzcmNXaWR0aDtcbiAgICB9XG5cbiAgICBpZiAoc3JjV2lkdGggPD0gMCB8fCBzcmNZIDw9IC1pbml0aWFsSGVpZ2h0IHx8IHNyY1kgPiBzb3VyY2VIZWlnaHQpIHtcbiAgICAgIHNyY1kgPSAwO1xuICAgICAgc3JjSGVpZ2h0ID0gMDtcbiAgICAgIGRzdFkgPSAwO1xuICAgICAgZHN0SGVpZ2h0ID0gMDtcbiAgICB9IGVsc2UgaWYgKHNyY1kgPD0gMCkge1xuICAgICAgZHN0WSA9IC1zcmNZO1xuICAgICAgc3JjWSA9IDA7XG4gICAgICBzcmNIZWlnaHQgPSBNYXRoLm1pbihzb3VyY2VIZWlnaHQsIGluaXRpYWxIZWlnaHQgKyBzcmNZKTtcbiAgICAgIGRzdEhlaWdodCA9IHNyY0hlaWdodDtcbiAgICB9IGVsc2UgaWYgKHNyY1kgPD0gc291cmNlSGVpZ2h0KSB7XG4gICAgICBkc3RZID0gMDtcbiAgICAgIHNyY0hlaWdodCA9IE1hdGgubWluKGluaXRpYWxIZWlnaHQsIHNvdXJjZUhlaWdodCAtIHNyY1kpO1xuICAgICAgZHN0SGVpZ2h0ID0gc3JjSGVpZ2h0O1xuICAgIH1cblxuICAgIHZhciBwYXJhbXMgPSBbc3JjWCwgc3JjWSwgc3JjV2lkdGgsIHNyY0hlaWdodF07XG5cbiAgICAvLyBBdm9pZCBcIkluZGV4U2l6ZUVycm9yXCJcbiAgICBpZiAoZHN0V2lkdGggPiAwICYmIGRzdEhlaWdodCA+IDApIHtcbiAgICAgIHZhciBzY2FsZSA9IHdpZHRoIC8gaW5pdGlhbFdpZHRoO1xuXG4gICAgICBwYXJhbXMucHVzaChkc3RYICogc2NhbGUsIGRzdFkgKiBzY2FsZSwgZHN0V2lkdGggKiBzY2FsZSwgZHN0SGVpZ2h0ICogc2NhbGUpO1xuICAgIH1cblxuICAgIC8vIEFsbCB0aGUgbnVtZXJpY2FsIHBhcmFtZXRlcnMgc2hvdWxkIGJlIGludGVnZXIgZm9yIGBkcmF3SW1hZ2VgXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2Zlbmd5dWFuY2hlbi9jcm9wcGVyL2lzc3Vlcy80NzZcbiAgICBjb250ZXh0LmRyYXdJbWFnZS5hcHBseShjb250ZXh0LCBbc291cmNlXS5jb25jYXQodG9Db25zdW1hYmxlQXJyYXkocGFyYW1zLm1hcChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKG5vcm1hbGl6ZURlY2ltYWxOdW1iZXIocGFyYW0pKTtcbiAgICB9KSkpKTtcblxuICAgIHJldHVybiBjYW52YXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIGNyb3AgYm94LlxuICAgKiBAcGFyYW0ge251bWJlcn0gYXNwZWN0UmF0aW8gLSBUaGUgbmV3IGFzcGVjdCByYXRpby5cbiAgICogQHJldHVybnMge0Nyb3BwZXJ9IHRoaXNcbiAgICovXG4gIHNldEFzcGVjdFJhdGlvOiBmdW5jdGlvbiBzZXRBc3BlY3RSYXRpbyhhc3BlY3RSYXRpbykge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zO1xuXG5cbiAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIWlzVW5kZWZpbmVkKGFzcGVjdFJhdGlvKSkge1xuICAgICAgLy8gMCAtPiBOYU5cbiAgICAgIG9wdGlvbnMuYXNwZWN0UmF0aW8gPSBNYXRoLm1heCgwLCBhc3BlY3RSYXRpbykgfHwgTmFOO1xuXG4gICAgICBpZiAodGhpcy5yZWFkeSkge1xuICAgICAgICB0aGlzLmluaXRDcm9wQm94KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY3JvcHBlZCkge1xuICAgICAgICAgIHRoaXMucmVuZGVyQ3JvcEJveCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cblxuICAvKipcbiAgICogQ2hhbmdlIHRoZSBkcmFnIG1vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlIC0gVGhlIG5ldyBkcmFnIG1vZGUuXG4gICAqIEByZXR1cm5zIHtDcm9wcGVyfSB0aGlzXG4gICAqL1xuICBzZXREcmFnTW9kZTogZnVuY3Rpb24gc2V0RHJhZ01vZGUobW9kZSkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBkcmFnQm94ID0gdGhpcy5kcmFnQm94LFxuICAgICAgICBmYWNlID0gdGhpcy5mYWNlO1xuXG5cbiAgICBpZiAodGhpcy5yZWFkeSAmJiAhdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdmFyIGNyb3BwYWJsZSA9IG1vZGUgPT09IERSQUdfTU9ERV9DUk9QO1xuICAgICAgdmFyIG1vdmFibGUgPSBvcHRpb25zLm1vdmFibGUgJiYgbW9kZSA9PT0gRFJBR19NT0RFX01PVkU7XG5cbiAgICAgIG1vZGUgPSBjcm9wcGFibGUgfHwgbW92YWJsZSA/IG1vZGUgOiBEUkFHX01PREVfTk9ORTtcblxuICAgICAgb3B0aW9ucy5kcmFnTW9kZSA9IG1vZGU7XG4gICAgICBzZXREYXRhKGRyYWdCb3gsIERBVEFfQUNUSU9OLCBtb2RlKTtcbiAgICAgIHRvZ2dsZUNsYXNzKGRyYWdCb3gsIENMQVNTX0NST1AsIGNyb3BwYWJsZSk7XG4gICAgICB0b2dnbGVDbGFzcyhkcmFnQm94LCBDTEFTU19NT1ZFLCBtb3ZhYmxlKTtcblxuICAgICAgaWYgKCFvcHRpb25zLmNyb3BCb3hNb3ZhYmxlKSB7XG4gICAgICAgIC8vIFN5bmMgZHJhZyBtb2RlIHRvIGNyb3AgYm94IHdoZW4gaXQgaXMgbm90IG1vdmFibGVcbiAgICAgICAgc2V0RGF0YShmYWNlLCBEQVRBX0FDVElPTiwgbW9kZSk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKGZhY2UsIENMQVNTX0NST1AsIGNyb3BwYWJsZSk7XG4gICAgICAgIHRvZ2dsZUNsYXNzKGZhY2UsIENMQVNTX01PVkUsIG1vdmFibGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG52YXIgQW5vdGhlckNyb3BwZXIgPSBXSU5ET1cuQ3JvcHBlcjtcblxudmFyIENyb3BwZXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQ3JvcHBlci5cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50IC0gVGhlIHRhcmdldCBlbGVtZW50IGZvciBjcm9wcGluZy5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSAtIFRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAqL1xuICBmdW5jdGlvbiBDcm9wcGVyKGVsZW1lbnQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgQ3JvcHBlcik7XG5cbiAgICBpZiAoIWVsZW1lbnQgfHwgIVJFR0VYUF9UQUdfTkFNRS50ZXN0KGVsZW1lbnQudGFnTmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGZpcnN0IGFyZ3VtZW50IGlzIHJlcXVpcmVkIGFuZCBtdXN0IGJlIGFuIDxpbWc+IG9yIDxjYW52YXM+IGVsZW1lbnQuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBhc3NpZ24oe30sIERFRkFVTFRTLCBpc1BsYWluT2JqZWN0KG9wdGlvbnMpICYmIG9wdGlvbnMpO1xuICAgIHRoaXMuY3JvcHBlZCA9IGZhbHNlO1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB0aGlzLnBvaW50ZXJzID0ge307XG4gICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xuICAgIHRoaXMucmVsb2FkaW5nID0gZmFsc2U7XG4gICAgdGhpcy5yZXBsYWNlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2l6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNpemluZyA9IGZhbHNlO1xuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgY3JlYXRlQ2xhc3MoQ3JvcHBlciwgW3tcbiAgICBrZXk6ICdpbml0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuXG4gICAgICB2YXIgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFyIHVybCA9IHZvaWQgMDtcblxuICAgICAgaWYgKGdldERhdGEoZWxlbWVudCwgTkFNRVNQQUNFKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldERhdGEoZWxlbWVudCwgTkFNRVNQQUNFLCB0aGlzKTtcblxuICAgICAgaWYgKHRhZ05hbWUgPT09ICdpbWcnKSB7XG4gICAgICAgIHRoaXMuaXNJbWcgPSB0cnVlO1xuXG4gICAgICAgIC8vIGUuZy46IFwiaW1nL3BpY3R1cmUuanBnXCJcbiAgICAgICAgdXJsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3NyYycpIHx8ICcnO1xuICAgICAgICB0aGlzLm9yaWdpbmFsVXJsID0gdXJsO1xuXG4gICAgICAgIC8vIFN0b3Agd2hlbiBpdCdzIGEgYmxhbmsgaW1hZ2VcbiAgICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBlLmcuOiBcImh0dHA6Ly9leGFtcGxlLmNvbS9pbWcvcGljdHVyZS5qcGdcIlxuICAgICAgICB1cmwgPSBlbGVtZW50LnNyYztcbiAgICAgIH0gZWxzZSBpZiAodGFnTmFtZSA9PT0gJ2NhbnZhcycgJiYgd2luZG93LkhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgIHVybCA9IGVsZW1lbnQudG9EYXRhVVJMKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubG9hZCh1cmwpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xvYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKHVybCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnVybCA9IHVybDtcbiAgICAgIHRoaXMuaW1hZ2VEYXRhID0ge307XG5cbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LFxuICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG5cblxuICAgICAgaWYgKCFvcHRpb25zLmNoZWNrT3JpZW50YXRpb24gfHwgIXdpbmRvdy5BcnJheUJ1ZmZlcikge1xuICAgICAgICB0aGlzLmNsb25lKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gWE1MSHR0cFJlcXVlc3QgZGlzYWxsb3dzIHRvIG9wZW4gYSBEYXRhIFVSTCBpbiBzb21lIGJyb3dzZXJzIGxpa2UgSUUxMSBhbmQgU2FmYXJpXG4gICAgICBpZiAoUkVHRVhQX0RBVEFfVVJMLnRlc3QodXJsKSkge1xuICAgICAgICBpZiAoUkVHRVhQX0RBVEFfVVJMX0pQRUcudGVzdCh1cmwpKSB7XG4gICAgICAgICAgdGhpcy5yZWFkKGRhdGFVUkxUb0FycmF5QnVmZmVyKHVybCkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2xvbmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICB0aGlzLnJlbG9hZGluZyA9IHRydWU7XG4gICAgICB0aGlzLnhociA9IHhocjtcblxuICAgICAgdmFyIGRvbmUgPSBmdW5jdGlvbiBkb25lKCkge1xuICAgICAgICBfdGhpcy5yZWxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMueGhyID0gbnVsbDtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbnRpbWVvdXQgPSBkb25lO1xuICAgICAgeGhyLm9uYWJvcnQgPSBkb25lO1xuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgICAgX3RoaXMuY2xvbmUoKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbmUoKTtcbiAgICAgICAgX3RoaXMucmVhZCh4aHIucmVzcG9uc2UpO1xuICAgICAgfTtcblxuICAgICAgLy8gQnVzdCBjYWNoZSB3aGVuIHRoZXJlIGlzIGEgXCJjcm9zc09yaWdpblwiIHByb3BlcnR5XG4gICAgICBpZiAob3B0aW9ucy5jaGVja0Nyb3NzT3JpZ2luICYmIGlzQ3Jvc3NPcmlnaW5VUkwodXJsKSAmJiBlbGVtZW50LmNyb3NzT3JpZ2luKSB7XG4gICAgICAgIHVybCA9IGFkZFRpbWVzdGFtcCh1cmwpO1xuICAgICAgfVxuXG4gICAgICB4aHIub3BlbignZ2V0JywgdXJsKTtcbiAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGVsZW1lbnQuY3Jvc3NPcmlnaW4gPT09ICd1c2UtY3JlZGVudGlhbHMnO1xuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZWFkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZChhcnJheUJ1ZmZlcikge1xuICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgaW1hZ2VEYXRhID0gdGhpcy5pbWFnZURhdGE7XG5cbiAgICAgIHZhciBvcmllbnRhdGlvbiA9IGdldE9yaWVudGF0aW9uKGFycmF5QnVmZmVyKTtcbiAgICAgIHZhciByb3RhdGUgPSAwO1xuICAgICAgdmFyIHNjYWxlWCA9IDE7XG4gICAgICB2YXIgc2NhbGVZID0gMTtcblxuICAgICAgaWYgKG9yaWVudGF0aW9uID4gMSkge1xuICAgICAgICB0aGlzLnVybCA9IGFycmF5QnVmZmVyVG9EYXRhVVJMKGFycmF5QnVmZmVyLCAnaW1hZ2UvanBlZycpO1xuXG4gICAgICAgIHZhciBfcGFyc2VPcmllbnRhdGlvbiA9IHBhcnNlT3JpZW50YXRpb24ob3JpZW50YXRpb24pO1xuXG4gICAgICAgIHJvdGF0ZSA9IF9wYXJzZU9yaWVudGF0aW9uLnJvdGF0ZTtcbiAgICAgICAgc2NhbGVYID0gX3BhcnNlT3JpZW50YXRpb24uc2NhbGVYO1xuICAgICAgICBzY2FsZVkgPSBfcGFyc2VPcmllbnRhdGlvbi5zY2FsZVk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLnJvdGF0YWJsZSkge1xuICAgICAgICBpbWFnZURhdGEucm90YXRlID0gcm90YXRlO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5zY2FsYWJsZSkge1xuICAgICAgICBpbWFnZURhdGEuc2NhbGVYID0gc2NhbGVYO1xuICAgICAgICBpbWFnZURhdGEuc2NhbGVZID0gc2NhbGVZO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNsb25lKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xvbmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9uZSgpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50LFxuICAgICAgICAgIHVybCA9IHRoaXMudXJsO1xuXG4gICAgICB2YXIgY3Jvc3NPcmlnaW4gPSB2b2lkIDA7XG4gICAgICB2YXIgY3Jvc3NPcmlnaW5VcmwgPSB2b2lkIDA7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2hlY2tDcm9zc09yaWdpbiAmJiBpc0Nyb3NzT3JpZ2luVVJMKHVybCkpIHtcbiAgICAgICAgY3Jvc3NPcmlnaW4gPSBlbGVtZW50LmNyb3NzT3JpZ2luO1xuXG5cbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luKSB7XG4gICAgICAgICAgY3Jvc3NPcmlnaW5VcmwgPSB1cmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcblxuICAgICAgICAgIC8vIEJ1c3QgY2FjaGUgd2hlbiB0aGVyZSBpcyBub3QgYSBcImNyb3NzT3JpZ2luXCIgcHJvcGVydHlcbiAgICAgICAgICBjcm9zc09yaWdpblVybCA9IGFkZFRpbWVzdGFtcCh1cmwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgIHRoaXMuY3Jvc3NPcmlnaW5VcmwgPSBjcm9zc09yaWdpblVybDtcblxuICAgICAgdmFyIGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgICBpbWFnZS5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgfVxuXG4gICAgICBpbWFnZS5zcmMgPSBjcm9zc09yaWdpblVybCB8fCB1cmw7XG5cbiAgICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKTtcbiAgICAgIHZhciBzdG9wID0gdGhpcy5zdG9wLmJpbmQodGhpcyk7XG5cbiAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTtcbiAgICAgIHRoaXMub25TdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5vblN0b3AgPSBzdG9wO1xuXG4gICAgICBpZiAodGhpcy5pc0ltZykge1xuICAgICAgICBpZiAoZWxlbWVudC5jb21wbGV0ZSkge1xuICAgICAgICAgIC8vIHN0YXJ0IGFzeW5jaHJvbm91c2x5IHRvIGtlZXAgYHRoaXMuY3JvcHBlcmAgaXMgYWNjZXNzaWJsZSBpbiBgcmVhZHlgIGV2ZW50IGhhbmRsZXIuXG4gICAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dChzdGFydCwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWRkTGlzdGVuZXIoZWxlbWVudCwgRVZFTlRfTE9BRCwgc3RhcnQsIHtcbiAgICAgICAgICAgIG9uY2U6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW1hZ2Uub25sb2FkID0gc3RhcnQ7XG4gICAgICAgIGltYWdlLm9uZXJyb3IgPSBzdG9wO1xuICAgICAgICBhZGRDbGFzcyhpbWFnZSwgQ0xBU1NfSElERSk7XG4gICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaW1hZ2UsIGVsZW1lbnQubmV4dFNpYmxpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3N0YXJ0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoZXZlbnQpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgaW1hZ2UgPSB0aGlzLmlzSW1nID8gdGhpcy5lbGVtZW50IDogdGhpcy5pbWFnZTtcblxuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9IG51bGw7XG4gICAgICAgIGltYWdlLm9uZXJyb3IgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNpemluZyA9IHRydWU7XG5cbiAgICAgIHZhciBJU19TQUZBUkkgPSBXSU5ET1cubmF2aWdhdG9yICYmIC8oTWFjaW50b3NofGlQaG9uZXxpUG9kfGlQYWQpLipBcHBsZVdlYktpdC9pLnRlc3QoV0lORE9XLm5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgdmFyIGRvbmUgPSBmdW5jdGlvbiBkb25lKG5hdHVyYWxXaWR0aCwgbmF0dXJhbEhlaWdodCkge1xuICAgICAgICBhc3NpZ24oX3RoaXMyLmltYWdlRGF0YSwge1xuICAgICAgICAgIG5hdHVyYWxXaWR0aDogbmF0dXJhbFdpZHRoLFxuICAgICAgICAgIG5hdHVyYWxIZWlnaHQ6IG5hdHVyYWxIZWlnaHQsXG4gICAgICAgICAgYXNwZWN0UmF0aW86IG5hdHVyYWxXaWR0aCAvIG5hdHVyYWxIZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICAgIF90aGlzMi5zaXppbmcgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMyLnNpemVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMyLmJ1aWxkKCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBNb2Rlcm4gYnJvd3NlcnMgKGV4Y2VwdCBTYWZhcmkpXG4gICAgICBpZiAoaW1hZ2UubmF0dXJhbFdpZHRoICYmICFJU19TQUZBUkkpIHtcbiAgICAgICAgZG9uZShpbWFnZS5uYXR1cmFsV2lkdGgsIGltYWdlLm5hdHVyYWxIZWlnaHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBzaXppbmdJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgdGhpcy5zaXppbmdJbWFnZSA9IHNpemluZ0ltYWdlO1xuXG4gICAgICBzaXppbmdJbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbmUoc2l6aW5nSW1hZ2Uud2lkdGgsIHNpemluZ0ltYWdlLmhlaWdodCk7XG5cbiAgICAgICAgaWYgKCFJU19TQUZBUkkpIHtcbiAgICAgICAgICBib2R5LnJlbW92ZUNoaWxkKHNpemluZ0ltYWdlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgc2l6aW5nSW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjO1xuXG4gICAgICAvLyBpT1MgU2FmYXJpIHdpbGwgY29udmVydCB0aGUgaW1hZ2UgYXV0b21hdGljYWxseVxuICAgICAgLy8gd2l0aCBpdHMgb3JpZW50YXRpb24gb25jZSBhcHBlbmQgaXQgaW50byBET00gKCMyNzkpXG4gICAgICBpZiAoIUlTX1NBRkFSSSkge1xuICAgICAgICBzaXppbmdJbWFnZS5zdHlsZS5jc3NUZXh0ID0gJ2xlZnQ6MDsnICsgJ21heC1oZWlnaHQ6bm9uZSFpbXBvcnRhbnQ7JyArICdtYXgtd2lkdGg6bm9uZSFpbXBvcnRhbnQ7JyArICdtaW4taGVpZ2h0OjAhaW1wb3J0YW50OycgKyAnbWluLXdpZHRoOjAhaW1wb3J0YW50OycgKyAnb3BhY2l0eTowOycgKyAncG9zaXRpb246YWJzb2x1dGU7JyArICd0b3A6MDsnICsgJ3otaW5kZXg6LTE7JztcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChzaXppbmdJbWFnZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc3RvcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlO1xuXG5cbiAgICAgIGltYWdlLm9ubG9hZCA9IG51bGw7XG4gICAgICBpbWFnZS5vbmVycm9yID0gbnVsbDtcbiAgICAgIGltYWdlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW1hZ2UpO1xuICAgICAgdGhpcy5pbWFnZSA9IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnYnVpbGQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZCgpIHtcbiAgICAgIGlmICghdGhpcy5zaXplZCB8fCB0aGlzLnJlYWR5KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICBpbWFnZSA9IHRoaXMuaW1hZ2U7XG5cbiAgICAgIC8vIENyZWF0ZSBjcm9wcGVyIGVsZW1lbnRzXG5cbiAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gVEVNUExBVEU7XG5cbiAgICAgIHZhciBjcm9wcGVyID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvcignLicgKyBOQU1FU1BBQ0UgKyAnLWNvbnRhaW5lcicpO1xuICAgICAgdmFyIGNhbnZhcyA9IGNyb3BwZXIucXVlcnlTZWxlY3RvcignLicgKyBOQU1FU1BBQ0UgKyAnLWNhbnZhcycpO1xuICAgICAgdmFyIGRyYWdCb3ggPSBjcm9wcGVyLnF1ZXJ5U2VsZWN0b3IoJy4nICsgTkFNRVNQQUNFICsgJy1kcmFnLWJveCcpO1xuICAgICAgdmFyIGNyb3BCb3ggPSBjcm9wcGVyLnF1ZXJ5U2VsZWN0b3IoJy4nICsgTkFNRVNQQUNFICsgJy1jcm9wLWJveCcpO1xuICAgICAgdmFyIGZhY2UgPSBjcm9wQm94LnF1ZXJ5U2VsZWN0b3IoJy4nICsgTkFNRVNQQUNFICsgJy1mYWNlJyk7XG5cbiAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgdGhpcy5jcm9wcGVyID0gY3JvcHBlcjtcbiAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgdGhpcy5kcmFnQm94ID0gZHJhZ0JveDtcbiAgICAgIHRoaXMuY3JvcEJveCA9IGNyb3BCb3g7XG4gICAgICB0aGlzLnZpZXdCb3ggPSBjcm9wcGVyLnF1ZXJ5U2VsZWN0b3IoJy4nICsgTkFNRVNQQUNFICsgJy12aWV3LWJveCcpO1xuICAgICAgdGhpcy5mYWNlID0gZmFjZTtcblxuICAgICAgY2FudmFzLmFwcGVuZENoaWxkKGltYWdlKTtcblxuICAgICAgLy8gSGlkZSB0aGUgb3JpZ2luYWwgaW1hZ2VcbiAgICAgIGFkZENsYXNzKGVsZW1lbnQsIENMQVNTX0hJRERFTik7XG5cbiAgICAgIC8vIEluc2VydHMgdGhlIGNyb3BwZXIgYWZ0ZXIgdG8gdGhlIGN1cnJlbnQgaW1hZ2VcbiAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoY3JvcHBlciwgZWxlbWVudC5uZXh0U2libGluZyk7XG5cbiAgICAgIC8vIFNob3cgdGhlIGltYWdlIGlmIGlzIGhpZGRlblxuICAgICAgaWYgKCF0aGlzLmlzSW1nKSB7XG4gICAgICAgIHJlbW92ZUNsYXNzKGltYWdlLCBDTEFTU19ISURFKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pbml0UHJldmlldygpO1xuICAgICAgdGhpcy5iaW5kKCk7XG5cbiAgICAgIG9wdGlvbnMuYXNwZWN0UmF0aW8gPSBNYXRoLm1heCgwLCBvcHRpb25zLmFzcGVjdFJhdGlvKSB8fCBOYU47XG4gICAgICBvcHRpb25zLnZpZXdNb2RlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMywgTWF0aC5yb3VuZChvcHRpb25zLnZpZXdNb2RlKSkpIHx8IDA7XG5cbiAgICAgIGFkZENsYXNzKGNyb3BCb3gsIENMQVNTX0hJRERFTik7XG5cbiAgICAgIGlmICghb3B0aW9ucy5ndWlkZXMpIHtcbiAgICAgICAgYWRkQ2xhc3MoY3JvcEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKE5BTUVTUEFDRSArICctZGFzaGVkJyksIENMQVNTX0hJRERFTik7XG4gICAgICB9XG5cbiAgICAgIGlmICghb3B0aW9ucy5jZW50ZXIpIHtcbiAgICAgICAgYWRkQ2xhc3MoY3JvcEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKE5BTUVTUEFDRSArICctY2VudGVyJyksIENMQVNTX0hJRERFTik7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmJhY2tncm91bmQpIHtcbiAgICAgICAgYWRkQ2xhc3MoY3JvcHBlciwgTkFNRVNQQUNFICsgJy1iZycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW9wdGlvbnMuaGlnaGxpZ2h0KSB7XG4gICAgICAgIGFkZENsYXNzKGZhY2UsIENMQVNTX0lOVklTSUJMRSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvcHRpb25zLmNyb3BCb3hNb3ZhYmxlKSB7XG4gICAgICAgIGFkZENsYXNzKGZhY2UsIENMQVNTX01PVkUpO1xuICAgICAgICBzZXREYXRhKGZhY2UsIERBVEFfQUNUSU9OLCBBQ1RJT05fQUxMKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFvcHRpb25zLmNyb3BCb3hSZXNpemFibGUpIHtcbiAgICAgICAgYWRkQ2xhc3MoY3JvcEJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKE5BTUVTUEFDRSArICctbGluZScpLCBDTEFTU19ISURERU4pO1xuICAgICAgICBhZGRDbGFzcyhjcm9wQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoTkFNRVNQQUNFICsgJy1wb2ludCcpLCBDTEFTU19ISURERU4pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgdGhpcy5yZWFkeSA9IHRydWU7XG4gICAgICB0aGlzLnNldERyYWdNb2RlKG9wdGlvbnMuZHJhZ01vZGUpO1xuXG4gICAgICBpZiAob3B0aW9ucy5hdXRvQ3JvcCkge1xuICAgICAgICB0aGlzLmNyb3AoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXREYXRhKG9wdGlvbnMuZGF0YSk7XG5cbiAgICAgIGlmIChpc0Z1bmN0aW9uKG9wdGlvbnMucmVhZHkpKSB7XG4gICAgICAgIGFkZExpc3RlbmVyKGVsZW1lbnQsIEVWRU5UX1JFQURZLCBvcHRpb25zLnJlYWR5LCB7XG4gICAgICAgICAgb25jZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZGlzcGF0Y2hFdmVudChlbGVtZW50LCBFVkVOVF9SRUFEWSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndW5idWlsZCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVuYnVpbGQoKSB7XG4gICAgICBpZiAoIXRoaXMucmVhZHkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgICB0aGlzLnVuYmluZCgpO1xuICAgICAgdGhpcy5yZXNldFByZXZpZXcoKTtcbiAgICAgIHRoaXMuY3JvcHBlci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY3JvcHBlcik7XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnQsIENMQVNTX0hJRERFTik7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAndW5jcmVhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1bmNyZWF0ZSgpIHtcbiAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuXG5cbiAgICAgIGlmICh0aGlzLnJlYWR5KSB7XG4gICAgICAgIHRoaXMudW5idWlsZCgpO1xuICAgICAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3JvcHBlZCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnNpemluZykge1xuICAgICAgICB0aGlzLnNpemluZ0ltYWdlLm9ubG9hZCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2l6aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2l6ZWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5yZWxvYWRpbmcpIHtcbiAgICAgICAgdGhpcy54aHIuYWJvcnQoKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0ltZykge1xuICAgICAgICBpZiAoZWxlbWVudC5jb21wbGV0ZSkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKGVsZW1lbnQsIEVWRU5UX0xPQUQsIHRoaXMub25TdGFydCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pbWFnZSkge1xuICAgICAgICB0aGlzLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG5vIGNvbmZsaWN0IGNyb3BwZXIgY2xhc3MuXG4gICAgICogQHJldHVybnMge0Nyb3BwZXJ9IFRoZSBjcm9wcGVyIGNsYXNzLlxuICAgICAqL1xuXG4gIH1dLCBbe1xuICAgIGtleTogJ25vQ29uZmxpY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgd2luZG93LkNyb3BwZXIgPSBBbm90aGVyQ3JvcHBlcjtcbiAgICAgIHJldHVybiBDcm9wcGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZSB0aGUgZGVmYXVsdCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gVGhlIG5ldyBkZWZhdWx0IG9wdGlvbnMuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ3NldERlZmF1bHRzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGVmYXVsdHMob3B0aW9ucykge1xuICAgICAgYXNzaWduKERFRkFVTFRTLCBpc1BsYWluT2JqZWN0KG9wdGlvbnMpICYmIG9wdGlvbnMpO1xuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQ3JvcHBlcjtcbn0oKTtcblxuYXNzaWduKENyb3BwZXIucHJvdG90eXBlLCByZW5kZXIsIHByZXZpZXcsIGV2ZW50cywgaGFuZGxlcnMsIGNoYW5nZSwgbWV0aG9kcyk7XG5cbmlmICgkLmZuKSB7XG4gIHZhciBBbm90aGVyQ3JvcHBlciQxID0gJC5mbi5jcm9wcGVyO1xuICB2YXIgTkFNRVNQQUNFJDEgPSAnY3JvcHBlcic7XG5cbiAgJC5mbi5jcm9wcGVyID0gZnVuY3Rpb24galF1ZXJ5Q3JvcHBlcihvcHRpb24pIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG5cbiAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGksIGVsZW1lbnQpIHtcbiAgICAgIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gICAgICB2YXIgaXNEZXN0cm95ID0gb3B0aW9uID09PSAnZGVzdHJveSc7XG4gICAgICB2YXIgY3JvcHBlciA9ICRlbGVtZW50LmRhdGEoTkFNRVNQQUNFJDEpO1xuXG4gICAgICBpZiAoIWNyb3BwZXIpIHtcbiAgICAgICAgaWYgKGlzRGVzdHJveSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe30sICRlbGVtZW50LmRhdGEoKSwgJC5pc1BsYWluT2JqZWN0KG9wdGlvbikgJiYgb3B0aW9uKTtcblxuICAgICAgICBjcm9wcGVyID0gbmV3IENyb3BwZXIoZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgICAgICRlbGVtZW50LmRhdGEoTkFNRVNQQUNFJDEsIGNyb3BwZXIpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFyIGZuID0gY3JvcHBlcltvcHRpb25dO1xuXG4gICAgICAgIGlmICgkLmlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZm4uYXBwbHkoY3JvcHBlciwgYXJncyk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBjcm9wcGVyKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGlzRGVzdHJveSkge1xuICAgICAgICAgICAgJGVsZW1lbnQucmVtb3ZlRGF0YShOQU1FU1BBQ0UkMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0ICE9PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0aGlzO1xuICB9O1xuXG4gICQuZm4uY3JvcHBlci5Db25zdHJ1Y3RvciA9IENyb3BwZXI7XG4gICQuZm4uY3JvcHBlci5zZXREZWZhdWx0cyA9IENyb3BwZXIuc2V0RGVmYXVsdHM7XG4gICQuZm4uY3JvcHBlci5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICAkLmZuLmNyb3BwZXIgPSBBbm90aGVyQ3JvcHBlciQxO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xufVxuIiwiLyohXG4gKiBqUXVlcnkgSmF2YVNjcmlwdCBMaWJyYXJ5IHYzLjMuMVxuICogaHR0cHM6Ly9qcXVlcnkuY29tL1xuICpcbiAqIEluY2x1ZGVzIFNpenpsZS5qc1xuICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwczovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTgtMDEtMjBUMTc6MjRaXG4gKi9cbiggZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSApKCB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIEVkZ2UgPD0gMTIgLSAxMyssIEZpcmVmb3ggPD0xOCAtIDQ1KywgSUUgMTAgLSAxMSwgU2FmYXJpIDUuMSAtIDkrLCBpT1MgNiAtIDkuMVxuLy8gdGhyb3cgZXhjZXB0aW9ucyB3aGVuIG5vbi1zdHJpY3QgY29kZSAoZS5nLiwgQVNQLk5FVCA0LjUpIGFjY2Vzc2VzIHN0cmljdCBtb2RlXG4vLyBhcmd1bWVudHMuY2FsbGVlLmNhbGxlciAodHJhYy0xMzMzNSkuIEJ1dCBhcyBvZiBqUXVlcnkgMy4wICgyMDE2KSwgc3RyaWN0IG1vZGUgc2hvdWxkIGJlIGNvbW1vblxuLy8gZW5vdWdoIHRoYXQgYWxsIHN1Y2ggYXR0ZW1wdHMgYXJlIGd1YXJkZWQgaW4gYSB0cnkgYmxvY2suXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGFyciA9IFtdO1xuXG52YXIgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7XG5cbnZhciBnZXRQcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBmblRvU3RyaW5nID0gaGFzT3duLnRvU3RyaW5nO1xuXG52YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmcgPSBmblRvU3RyaW5nLmNhbGwoIE9iamVjdCApO1xuXG52YXIgc3VwcG9ydCA9IHt9O1xuXG52YXIgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIGlzRnVuY3Rpb24oIG9iaiApIHtcblxuICAgICAgLy8gU3VwcG9ydDogQ2hyb21lIDw9NTcsIEZpcmVmb3ggPD01MlxuICAgICAgLy8gSW4gc29tZSBicm93c2VycywgdHlwZW9mIHJldHVybnMgXCJmdW5jdGlvblwiIGZvciBIVE1MIDxvYmplY3Q+IGVsZW1lbnRzXG4gICAgICAvLyAoaS5lLiwgYHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9iamVjdFwiICkgPT09IFwiZnVuY3Rpb25cImApLlxuICAgICAgLy8gV2UgZG9uJ3Qgd2FudCB0byBjbGFzc2lmeSAqYW55KiBET00gbm9kZSBhcyBhIGZ1bmN0aW9uLlxuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2Ygb2JqLm5vZGVUeXBlICE9PSBcIm51bWJlclwiO1xuICB9O1xuXG5cbnZhciBpc1dpbmRvdyA9IGZ1bmN0aW9uIGlzV2luZG93KCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fTtcblxuXG5cblxuXHR2YXIgcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyA9IHtcblx0XHR0eXBlOiB0cnVlLFxuXHRcdHNyYzogdHJ1ZSxcblx0XHRub01vZHVsZTogdHJ1ZVxuXHR9O1xuXG5cdGZ1bmN0aW9uIERPTUV2YWwoIGNvZGUsIGRvYywgbm9kZSApIHtcblx0XHRkb2MgPSBkb2MgfHwgZG9jdW1lbnQ7XG5cblx0XHR2YXIgaSxcblx0XHRcdHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcInNjcmlwdFwiICk7XG5cblx0XHRzY3JpcHQudGV4dCA9IGNvZGU7XG5cdFx0aWYgKCBub2RlICkge1xuXHRcdFx0Zm9yICggaSBpbiBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzICkge1xuXHRcdFx0XHRpZiAoIG5vZGVbIGkgXSApIHtcblx0XHRcdFx0XHRzY3JpcHRbIGkgXSA9IG5vZGVbIGkgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRkb2MuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0ICkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG5cdH1cblxuXG5mdW5jdGlvbiB0b1R5cGUoIG9iaiApIHtcblx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRyZXR1cm4gb2JqICsgXCJcIjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seSAoZnVuY3Rpb25pc2ggUmVnRXhwKVxuXHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdGNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwoIG9iaiApIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0dHlwZW9mIG9iajtcbn1cbi8qIGdsb2JhbCBTeW1ib2wgKi9cbi8vIERlZmluaW5nIHRoaXMgZ2xvYmFsIGluIC5lc2xpbnRyYy5qc29uIHdvdWxkIGNyZWF0ZSBhIGRhbmdlciBvZiB1c2luZyB0aGUgZ2xvYmFsXG4vLyB1bmd1YXJkZWQgaW4gYW5vdGhlciBwbGFjZSwgaXQgc2VlbXMgc2FmZXIgdG8gZGVmaW5lIGdsb2JhbCBvbmx5IGZvciB0aGlzIG1vZHVsZVxuXG5cblxudmFyXG5cdHZlcnNpb24gPSBcIjMuMy4xXCIsXG5cblx0Ly8gRGVmaW5lIGEgbG9jYWwgY29weSBvZiBqUXVlcnlcblx0alF1ZXJ5ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXG5cdFx0Ly8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnXG5cdFx0Ly8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZClcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5mbi5pbml0KCBzZWxlY3RvciwgY29udGV4dCApO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seVxuXHQvLyBNYWtlIHN1cmUgd2UgdHJpbSBCT00gYW5kIE5CU1Bcblx0cnRyaW0gPSAvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2c7XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cblx0Ly8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZFxuXHRqcXVlcnk6IHZlcnNpb24sXG5cblx0Y29uc3RydWN0b3I6IGpRdWVyeSxcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cblx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0aWYgKCBudW0gPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdHJldHVybiBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdO1xuXHR9LFxuXG5cdC8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2tcblx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdHB1c2hTdGFjazogZnVuY3Rpb24oIGVsZW1zICkge1xuXG5cdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHR2YXIgcmV0ID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmNvbnN0cnVjdG9yKCksIGVsZW1zICk7XG5cblx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdHJldC5wcmV2T2JqZWN0ID0gdGhpcztcblxuXHRcdC8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHQvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LlxuXHRlYWNoOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5lYWNoKCB0aGlzLCBjYWxsYmFjayApO1xuXHR9LFxuXG5cdG1hcDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCggdGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0gKSApO1xuXHR9LFxuXG5cdHNsaWNlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHNsaWNlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSApO1xuXHR9LFxuXG5cdGZpcnN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggMCApO1xuXHR9LFxuXG5cdGxhc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAtMSApO1xuXHR9LFxuXG5cdGVxOiBmdW5jdGlvbiggaSApIHtcblx0XHR2YXIgbGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggaiA+PSAwICYmIGogPCBsZW4gPyBbIHRoaXNbIGogXSBdIDogW10gKTtcblx0fSxcblxuXHRlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcigpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIDAgXSB8fCB7fSxcblx0XHRpID0gMSxcblx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdGRlZXAgPSBmYWxzZTtcblxuXHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdGlmICggdHlwZW9mIHRhcmdldCA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0ZGVlcCA9IHRhcmdldDtcblxuXHRcdC8vIFNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbIGkgXSB8fCB7fTtcblx0XHRpKys7XG5cdH1cblxuXHQvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSlcblx0aWYgKCB0eXBlb2YgdGFyZ2V0ICE9PSBcIm9iamVjdFwiICYmICFpc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXG5cdFx0Ly8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuXHRcdGlmICggKCBvcHRpb25zID0gYXJndW1lbnRzWyBpIF0gKSAhPSBudWxsICkge1xuXG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29weSApIHx8XG5cdFx0XHRcdFx0KCBjb3B5SXNBcnJheSA9IEFycmF5LmlzQXJyYXkoIGNvcHkgKSApICkgKSB7XG5cblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICkge1xuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIEFycmF5LmlzQXJyYXkoIHNyYyApID8gc3JjIDogW107XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApID8gc3JjIDoge307XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XHR2YXIgcHJvdG8sIEN0b3I7XG5cblx0XHQvLyBEZXRlY3Qgb2J2aW91cyBuZWdhdGl2ZXNcblx0XHQvLyBVc2UgdG9TdHJpbmcgaW5zdGVhZCBvZiBqUXVlcnkudHlwZSB0byBjYXRjaCBob3N0IG9iamVjdHNcblx0XHRpZiAoICFvYmogfHwgdG9TdHJpbmcuY2FsbCggb2JqICkgIT09IFwiW29iamVjdCBPYmplY3RdXCIgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cHJvdG8gPSBnZXRQcm90byggb2JqICk7XG5cblx0XHQvLyBPYmplY3RzIHdpdGggbm8gcHJvdG90eXBlIChlLmcuLCBgT2JqZWN0LmNyZWF0ZSggbnVsbCApYCkgYXJlIHBsYWluXG5cdFx0aWYgKCAhcHJvdG8gKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBPYmplY3RzIHdpdGggcHJvdG90eXBlIGFyZSBwbGFpbiBpZmYgdGhleSB3ZXJlIGNvbnN0cnVjdGVkIGJ5IGEgZ2xvYmFsIE9iamVjdCBmdW5jdGlvblxuXHRcdEN0b3IgPSBoYXNPd24uY2FsbCggcHJvdG8sIFwiY29uc3RydWN0b3JcIiApICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuXHRcdHJldHVybiB0eXBlb2YgQ3RvciA9PT0gXCJmdW5jdGlvblwiICYmIGZuVG9TdHJpbmcuY2FsbCggQ3RvciApID09PSBPYmplY3RGdW5jdGlvblN0cmluZztcblx0fSxcblxuXHRpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXG5cdFx0LyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cblx0XHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VzbGludC9lc2xpbnQvaXNzdWVzLzYxMjVcblx0XHR2YXIgbmFtZTtcblxuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuXHRnbG9iYWxFdmFsOiBmdW5jdGlvbiggY29kZSApIHtcblx0XHRET01FdmFsKCBjb2RlICk7XG5cdH0sXG5cblx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2sgKSB7XG5cdFx0dmFyIGxlbmd0aCwgaSA9IDA7XG5cblx0XHRpZiAoIGlzQXJyYXlMaWtlKCBvYmogKSApIHtcblx0XHRcdGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBvYmogKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9iajtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcblx0dHJpbTogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0cmV0dXJuIHRleHQgPT0gbnVsbCA/XG5cdFx0XHRcIlwiIDpcblx0XHRcdCggdGV4dCArIFwiXCIgKS5yZXBsYWNlKCBydHJpbSwgXCJcIiApO1xuXHR9LFxuXG5cdC8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkge1xuXHRcdHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xuXG5cdFx0aWYgKCBhcnIgIT0gbnVsbCApIHtcblx0XHRcdGlmICggaXNBcnJheUxpa2UoIE9iamVjdCggYXJyICkgKSApIHtcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0WyBhcnIgXSA6IGFyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5jYWxsKCByZXQsIGFyciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcblx0XHRcdGogPSAwLFxuXHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0fVxuXG5cdFx0Zmlyc3QubGVuZ3RoID0gaTtcblxuXHRcdHJldHVybiBmaXJzdDtcblx0fSxcblxuXHRncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7XG5cdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdG1hdGNoZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0Y2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0O1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdGlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHtcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBlbGVtc1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH0sXG5cblx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciBsZW5ndGgsIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggZWxlbXMgKSApIHtcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsXG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gZWxlbXMgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRyZXR1cm4gY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7XG5cdH0sXG5cblx0Ly8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG5cdGd1aWQ6IDEsXG5cblx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG5cdHN1cHBvcnQ6IHN1cHBvcnRcbn0gKTtcblxuaWYgKCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdGpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBhcnJbIFN5bWJvbC5pdGVyYXRvciBdO1xufVxuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKCBcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoIFwiIFwiICksXG5mdW5jdGlvbiggaSwgbmFtZSApIHtcblx0Y2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG59ICk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogcmVhbCBpT1MgOC4yIG9ubHkgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuXHQvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpXG5cdC8vIGhhc093biBpc24ndCB1c2VkIGhlcmUgZHVlIHRvIGZhbHNlIG5lZ2F0aXZlc1xuXHQvLyByZWdhcmRpbmcgTm9kZWxpc3QgbGVuZ3RoIGluIElFXG5cdHZhciBsZW5ndGggPSAhIW9iaiAmJiBcImxlbmd0aFwiIGluIG9iaiAmJiBvYmoubGVuZ3RoLFxuXHRcdHR5cGUgPSB0b1R5cGUoIG9iaiApO1xuXG5cdGlmICggaXNGdW5jdGlvbiggb2JqICkgfHwgaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4zLjNcbiAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE2LTA4LTA4XG4gKi9cbihmdW5jdGlvbiggd2luZG93ICkge1xuXG52YXIgaSxcblx0c3VwcG9ydCxcblx0RXhwcixcblx0Z2V0VGV4dCxcblx0aXNYTUwsXG5cdHRva2VuaXplLFxuXHRjb21waWxlLFxuXHRzZWxlY3QsXG5cdG91dGVybW9zdENvbnRleHQsXG5cdHNvcnRJbnB1dCxcblx0aGFzRHVwbGljYXRlLFxuXG5cdC8vIExvY2FsIGRvY3VtZW50IHZhcnNcblx0c2V0RG9jdW1lbnQsXG5cdGRvY3VtZW50LFxuXHRkb2NFbGVtLFxuXHRkb2N1bWVudElzSFRNTCxcblx0cmJ1Z2d5UVNBLFxuXHRyYnVnZ3lNYXRjaGVzLFxuXHRtYXRjaGVzLFxuXHRjb250YWlucyxcblxuXHQvLyBJbnN0YW5jZS1zcGVjaWZpYyBkYXRhXG5cdGV4cGFuZG8gPSBcInNpenpsZVwiICsgMSAqIG5ldyBEYXRlKCksXG5cdHByZWZlcnJlZERvYyA9IHdpbmRvdy5kb2N1bWVudCxcblx0ZGlycnVucyA9IDAsXG5cdGRvbmUgPSAwLFxuXHRjbGFzc0NhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0dG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdGNvbXBpbGVyQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRzb3J0T3JkZXIgPSBmdW5jdGlvbiggYSwgYiApIHtcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gMDtcblx0fSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cHM6Ly9qc3BlcmYuY29tL3Rob3ItaW5kZXhvZi12cy1mb3IvNVxuXHRpbmRleE9mID0gZnVuY3Rpb24oIGxpc3QsIGVsZW0gKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bGVuID0gbGlzdC5sZW5ndGg7XG5cdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gLTE7XG5cdH0sXG5cblx0Ym9vbGVhbnMgPSBcImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsXG5cblx0Ly8gUmVndWxhciBleHByZXNzaW9uc1xuXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI3ZhbHVlLWRlZi1pZGVudGlmaWVyXG5cdGlkZW50aWZpZXIgPSBcIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcMC1cXFxceGEwXSkrXCIsXG5cblx0Ly8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG5cdGF0dHJpYnV0ZXMgPSBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFwiICsgaWRlbnRpZmllciArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcXFxcKChcIiArXG5cdFx0Ly8gVG8gcmVkdWNlIHRoZSBudW1iZXIgb2Ygc2VsZWN0b3JzIG5lZWRpbmcgdG9rZW5pemUgaW4gdGhlIHByZUZpbHRlciwgcHJlZmVyIGFyZ3VtZW50czpcblx0XHQvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSlcblx0XHRcIignKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfFwiICtcblx0XHQvLyAyLiBzaW1wbGUgKGNhcHR1cmUgNilcblx0XHRcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIGF0dHJpYnV0ZXMgKyBcIikqKXxcIiArXG5cdFx0Ly8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKVxuXHRcdFwiLipcIiArXG5cdFx0XCIpXFxcXCl8KVwiLFxuXG5cdC8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXJcblx0cndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIrXCIsIFwiZ1wiICksXG5cdHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuXHRyY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0cmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cblx0cmF0dHJpYnV0ZVF1b3RlcyA9IG5ldyBSZWdFeHAoIFwiPVwiICsgd2hpdGVzcGFjZSArIFwiKihbXlxcXFxdJ1xcXCJdKj8pXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXF1cIiwgXCJnXCIgKSxcblxuXHRycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLFxuXHRyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cblx0bWF0Y2hFeHByID0ge1xuXHRcdFwiSURcIjogbmV3IFJlZ0V4cCggXCJeIyhcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFwiQ0xBU1NcIjogbmV3IFJlZ0V4cCggXCJeXFxcXC4oXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBpZGVudGlmaWVyICsgXCJ8WypdKVwiICksXG5cdFx0XCJBVFRSXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgYXR0cmlidXRlcyApLFxuXHRcdFwiUFNFVURPXCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgcHNldWRvcyApLFxuXHRcdFwiQ0hJTERcIjogbmV3IFJlZ0V4cCggXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKFxcXFxkKyl8KSlcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpXCIsIFwiaVwiICksXG5cdFx0XCJib29sXCI6IG5ldyBSZWdFeHAoIFwiXig/OlwiICsgYm9vbGVhbnMgKyBcIikkXCIsIFwiaVwiICksXG5cdFx0Ly8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpXG5cdFx0Ly8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YFxuXHRcdFwibmVlZHNDb250ZXh0XCI6IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFxcXChcIiArXG5cdFx0XHR3aGl0ZXNwYWNlICsgXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfCkoPz1bXi1dfCQpXCIsIFwiaVwiIClcblx0fSxcblxuXHRyaW5wdXRzID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0cmhlYWRlciA9IC9eaFxcZCQvaSxcblxuXHRybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxcblxuXHQvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnNcblx0cnF1aWNrRXhwciA9IC9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLFxuXG5cdHJzaWJsaW5nID0gL1srfl0vLFxuXG5cdC8vIENTUyBlc2NhcGVzXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnNcblx0cnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIiArIHdoaXRlc3BhY2UgKyBcIj98KFwiICsgd2hpdGVzcGFjZSArIFwiKXwuKVwiLCBcImlnXCIgKSxcblx0ZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkge1xuXHRcdHZhciBoaWdoID0gXCIweFwiICsgZXNjYXBlZCAtIDB4MTAwMDA7XG5cdFx0Ly8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnRcblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI0XG5cdFx0Ly8gV29ya2Fyb3VuZCBlcnJvbmVvdXMgbnVtZXJpYyBpbnRlcnByZXRhdGlvbiBvZiArXCIweFwiXG5cdFx0cmV0dXJuIGhpZ2ggIT09IGhpZ2ggfHwgZXNjYXBlZFdoaXRlc3BhY2UgP1xuXHRcdFx0ZXNjYXBlZCA6XG5cdFx0XHRoaWdoIDwgMCA/XG5cdFx0XHRcdC8vIEJNUCBjb2RlcG9pbnRcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCArIDB4MTAwMDAgKSA6XG5cdFx0XHRcdC8vIFN1cHBsZW1lbnRhbCBQbGFuZSBjb2RlcG9pbnQgKHN1cnJvZ2F0ZSBwYWlyKVxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcblx0fSxcblxuXHQvLyBDU1Mgc3RyaW5nL2lkZW50aWZpZXIgc2VyaWFsaXphdGlvblxuXHQvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI2NvbW1vbi1zZXJpYWxpemluZy1pZGlvbXNcblx0cmNzc2VzY2FwZSA9IC8oW1xcMC1cXHgxZlxceDdmXXxeLT9cXGQpfF4tJHxbXlxcMC1cXHgxZlxceDdmLVxcdUZGRkZcXHctXS9nLFxuXHRmY3NzZXNjYXBlID0gZnVuY3Rpb24oIGNoLCBhc0NvZGVQb2ludCApIHtcblx0XHRpZiAoIGFzQ29kZVBvaW50ICkge1xuXG5cdFx0XHQvLyBVKzAwMDAgTlVMTCBiZWNvbWVzIFUrRkZGRCBSRVBMQUNFTUVOVCBDSEFSQUNURVJcblx0XHRcdGlmICggY2ggPT09IFwiXFwwXCIgKSB7XG5cdFx0XHRcdHJldHVybiBcIlxcdUZGRkRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udHJvbCBjaGFyYWN0ZXJzIGFuZCAoZGVwZW5kZW50IHVwb24gcG9zaXRpb24pIG51bWJlcnMgZ2V0IGVzY2FwZWQgYXMgY29kZSBwb2ludHNcblx0XHRcdHJldHVybiBjaC5zbGljZSggMCwgLTEgKSArIFwiXFxcXFwiICsgY2guY2hhckNvZGVBdCggY2gubGVuZ3RoIC0gMSApLnRvU3RyaW5nKCAxNiApICsgXCIgXCI7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXIgcG90ZW50aWFsbHktc3BlY2lhbCBBU0NJSSBjaGFyYWN0ZXJzIGdldCBiYWNrc2xhc2gtZXNjYXBlZFxuXHRcdHJldHVybiBcIlxcXFxcIiArIGNoO1xuXHR9LFxuXG5cdC8vIFVzZWQgZm9yIGlmcmFtZXNcblx0Ly8gU2VlIHNldERvY3VtZW50KClcblx0Ly8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgXCJQZXJtaXNzaW9uIERlbmllZFwiXG5cdC8vIGVycm9yIGluIElFXG5cdHVubG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcblx0XHRzZXREb2N1bWVudCgpO1xuXHR9LFxuXG5cdGRpc2FibGVkQW5jZXN0b3IgPSBhZGRDb21iaW5hdG9yKFxuXHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWUgJiYgKFwiZm9ybVwiIGluIGVsZW0gfHwgXCJsYWJlbFwiIGluIGVsZW0pO1xuXHRcdH0sXG5cdFx0eyBkaXI6IFwicGFyZW50Tm9kZVwiLCBuZXh0OiBcImxlZ2VuZFwiIH1cblx0KTtcblxuLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0IClcbnRyeSB7XG5cdHB1c2guYXBwbHkoXG5cdFx0KGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLFxuXHRcdHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG5cdCk7XG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcblx0YXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTtcbn0gY2F0Y2ggKCBlICkge1xuXHRwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/XG5cblx0XHQvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApO1xuXHRcdH0gOlxuXG5cdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdC8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHlcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHR2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0Ly8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG5cdFx0XHR3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9XG5cdFx0XHR0YXJnZXQubGVuZ3RoID0gaiAtIDE7XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHR2YXIgbSwgaSwgZWxlbSwgbmlkLCBtYXRjaCwgZ3JvdXBzLCBuZXdTZWxlY3Rvcixcblx0XHRuZXdDb250ZXh0ID0gY29udGV4dCAmJiBjb250ZXh0Lm93bmVyRG9jdW1lbnQsXG5cblx0XHQvLyBub2RlVHlwZSBkZWZhdWx0cyB0byA5LCBzaW5jZSBjb250ZXh0IGRlZmF1bHRzIHRvIGRvY3VtZW50XG5cdFx0bm9kZVR5cGUgPSBjb250ZXh0ID8gY29udGV4dC5ub2RlVHlwZSA6IDk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gUmV0dXJuIGVhcmx5IGZyb20gY2FsbHMgd2l0aCBpbnZhbGlkIHNlbGVjdG9yIG9yIGNvbnRleHRcblx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgfHwgIXNlbGVjdG9yIHx8XG5cdFx0bm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgJiYgbm9kZVR5cGUgIT09IDExICkge1xuXG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cblxuXHQvLyBUcnkgdG8gc2hvcnRjdXQgZmluZCBvcGVyYXRpb25zIChhcyBvcHBvc2VkIHRvIGZpbHRlcnMpIGluIEhUTUwgZG9jdW1lbnRzXG5cdGlmICggIXNlZWQgKSB7XG5cblx0XHRpZiAoICggY29udGV4dCA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogcHJlZmVycmVkRG9jICkgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0XHR9XG5cdFx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0XHRpZiAoIGRvY3VtZW50SXNIVE1MICkge1xuXG5cdFx0XHQvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgXCJnZXQqQnkqXCIgRE9NIG1ldGhvZFxuXHRcdFx0Ly8gKGV4Y2VwdGluZyBEb2N1bWVudEZyYWdtZW50IGNvbnRleHQsIHdoZXJlIHRoZSBtZXRob2RzIGRvbid0IGV4aXN0KVxuXHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblxuXHRcdFx0XHQvLyBJRCBzZWxlY3RvclxuXHRcdFx0XHRpZiAoIChtID0gbWF0Y2hbMV0pICkge1xuXG5cdFx0XHRcdFx0Ly8gRG9jdW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdFxuXHRcdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRcdGlmICggZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBFbGVtZW50IGNvbnRleHRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdFxuXHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdGlmICggbmV3Q29udGV4dCAmJiAoZWxlbSA9IG5ld0NvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdFx0Y29udGFpbnMoIGNvbnRleHQsIGVsZW0gKSAmJlxuXHRcdFx0XHRcdFx0XHRlbGVtLmlkID09PSBtICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHlwZSBzZWxlY3RvclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtYXRjaFsyXSApIHtcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdFx0Ly8gQ2xhc3Mgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggKG0gPSBtYXRjaFszXSkgJiYgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmXG5cdFx0XHRcdFx0Y29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkge1xuXG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBtICkgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUYWtlIGFkdmFudGFnZSBvZiBxdWVyeVNlbGVjdG9yQWxsXG5cdFx0XHRpZiAoIHN1cHBvcnQucXNhICYmXG5cdFx0XHRcdCFjb21waWxlckNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF0gJiZcblx0XHRcdFx0KCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSApIHtcblxuXHRcdFx0XHRpZiAoIG5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0XHRcdG5ld1NlbGVjdG9yID0gc2VsZWN0b3I7XG5cblx0XHRcdFx0Ly8gcVNBIGxvb2tzIG91dHNpZGUgRWxlbWVudCBjb250ZXh0LCB3aGljaCBpcyBub3Qgd2hhdCB3ZSB3YW50XG5cdFx0XHRcdC8vIFRoYW5rcyB0byBBbmRyZXcgRHVwb250IGZvciB0aGlzIHdvcmthcm91bmQgdGVjaG5pcXVlXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OFxuXHRcdFx0XHQvLyBFeGNsdWRlIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHRcdFx0XHQvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdGlmICggKG5pZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKCBcImlkXCIgKSkgKSB7XG5cdFx0XHRcdFx0XHRuaWQgPSBuaWQucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0LnNldEF0dHJpYnV0ZSggXCJpZFwiLCAobmlkID0gZXhwYW5kbykgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmVmaXggZXZlcnkgc2VsZWN0b3IgaW4gdGhlIGxpc3Rcblx0XHRcdFx0XHRncm91cHMgPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblx0XHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGdyb3Vwc1tpXSA9IFwiI1wiICsgbmlkICsgXCIgXCIgKyB0b1NlbGVjdG9yKCBncm91cHNbaV0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bmV3U2VsZWN0b3IgPSBncm91cHMuam9pbiggXCIsXCIgKTtcblxuXHRcdFx0XHRcdC8vIEV4cGFuZCBjb250ZXh0IGZvciBzaWJsaW5nIHNlbGVjdG9yc1xuXHRcdFx0XHRcdG5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fFxuXHRcdFx0XHRcdFx0Y29udGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggbmV3U2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsXG5cdFx0XHRcdFx0XHRcdG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbCggbmV3U2VsZWN0b3IgKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKCBxc2FFcnJvciApIHtcblx0XHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdFx0aWYgKCBuaWQgPT09IGV4cGFuZG8gKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKCBcImlkXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBbGwgb3RoZXJzXG5cdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuICogQHJldHVybnMge2Z1bmN0aW9uKHN0cmluZywgb2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG4gKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0dmFyIGtleXMgPSBbXTtcblxuXHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gY2FjaGU7XG59XG5cbi8qKlxuICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG4gKi9cbmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRyZXR1cm4gZm47XG59XG5cbi8qKlxuICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBlbGVtZW50IGFuZCByZXR1cm5zIGEgYm9vbGVhbiByZXN1bHRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHtcblx0dmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO1xuXG5cdHRyeSB7XG5cdFx0cmV0dXJuICEhZm4oIGVsICk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0gZmluYWxseSB7XG5cdFx0Ly8gUmVtb3ZlIGZyb20gaXRzIHBhcmVudCBieSBkZWZhdWx0XG5cdFx0aWYgKCBlbC5wYXJlbnROb2RlICkge1xuXHRcdFx0ZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZWwgKTtcblx0XHR9XG5cdFx0Ly8gcmVsZWFzZSBtZW1vcnkgaW4gSUVcblx0XHRlbCA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcblx0XHRpID0gYXJyLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRFeHByLmF0dHJIYW5kbGVbIGFycltpXSBdID0gaGFuZGxlcjtcblx0fVxufVxuXG4vKipcbiAqIENoZWNrcyBkb2N1bWVudCBvcmRlciBvZiB0d28gc2libGluZ3NcbiAqIEBwYXJhbSB7RWxlbWVudH0gYVxuICogQHBhcmFtIHtFbGVtZW50fSBiXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIGxlc3MgdGhhbiAwIGlmIGEgcHJlY2VkZXMgYiwgZ3JlYXRlciB0aGFuIDAgaWYgYSBmb2xsb3dzIGJcbiAqL1xuZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkge1xuXHR2YXIgY3VyID0gYiAmJiBhLFxuXHRcdGRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRhLnNvdXJjZUluZGV4IC0gYi5zb3VyY2VJbmRleDtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIDplbmFibGVkLzpkaXNhYmxlZFxuICogQHBhcmFtIHtCb29sZWFufSBkaXNhYmxlZCB0cnVlIGZvciA6ZGlzYWJsZWQ7IGZhbHNlIGZvciA6ZW5hYmxlZFxuICovXG5mdW5jdGlvbiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZGlzYWJsZWQgKSB7XG5cblx0Ly8gS25vd24gOmRpc2FibGVkIGZhbHNlIHBvc2l0aXZlczogZmllbGRzZXRbZGlzYWJsZWRdID4gbGVnZW5kOm50aC1vZi10eXBlKG4rMikgOmNhbi1kaXNhYmxlXG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE9ubHkgY2VydGFpbiBlbGVtZW50cyBjYW4gbWF0Y2ggOmVuYWJsZWQgb3IgOmRpc2FibGVkXG5cdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2NyaXB0aW5nLmh0bWwjc2VsZWN0b3ItZW5hYmxlZFxuXHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NjcmlwdGluZy5odG1sI3NlbGVjdG9yLWRpc2FibGVkXG5cdFx0aWYgKCBcImZvcm1cIiBpbiBlbGVtICkge1xuXG5cdFx0XHQvLyBDaGVjayBmb3IgaW5oZXJpdGVkIGRpc2FibGVkbmVzcyBvbiByZWxldmFudCBub24tZGlzYWJsZWQgZWxlbWVudHM6XG5cdFx0XHQvLyAqIGxpc3RlZCBmb3JtLWFzc29jaWF0ZWQgZWxlbWVudHMgaW4gYSBkaXNhYmxlZCBmaWVsZHNldFxuXHRcdFx0Ly8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NhdGVnb3J5LWxpc3RlZFxuXHRcdFx0Ly8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NvbmNlcHQtZmUtZGlzYWJsZWRcblx0XHRcdC8vICogb3B0aW9uIGVsZW1lbnRzIGluIGEgZGlzYWJsZWQgb3B0Z3JvdXBcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjb25jZXB0LW9wdGlvbi1kaXNhYmxlZFxuXHRcdFx0Ly8gQWxsIHN1Y2ggZWxlbWVudHMgaGF2ZSBhIFwiZm9ybVwiIHByb3BlcnR5LlxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgJiYgZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0Ly8gT3B0aW9uIGVsZW1lbnRzIGRlZmVyIHRvIGEgcGFyZW50IG9wdGdyb3VwIGlmIHByZXNlbnRcblx0XHRcdFx0aWYgKCBcImxhYmVsXCIgaW4gZWxlbSApIHtcblx0XHRcdFx0XHRpZiAoIFwibGFiZWxcIiBpbiBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5wYXJlbnROb2RlLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDYgLSAxMVxuXHRcdFx0XHQvLyBVc2UgdGhlIGlzRGlzYWJsZWQgc2hvcnRjdXQgcHJvcGVydHkgdG8gY2hlY2sgZm9yIGRpc2FibGVkIGZpZWxkc2V0IGFuY2VzdG9yc1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5pc0Rpc2FibGVkID09PSBkaXNhYmxlZCB8fFxuXG5cdFx0XHRcdFx0Ly8gV2hlcmUgdGhlcmUgaXMgbm8gaXNEaXNhYmxlZCwgY2hlY2sgbWFudWFsbHlcblx0XHRcdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdFx0XHRlbGVtLmlzRGlzYWJsZWQgIT09ICFkaXNhYmxlZCAmJlxuXHRcdFx0XHRcdFx0ZGlzYWJsZWRBbmNlc3RvciggZWxlbSApID09PSBkaXNhYmxlZDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXG5cdFx0Ly8gVHJ5IHRvIHdpbm5vdyBvdXQgZWxlbWVudHMgdGhhdCBjYW4ndCBiZSBkaXNhYmxlZCBiZWZvcmUgdHJ1c3RpbmcgdGhlIGRpc2FibGVkIHByb3BlcnR5LlxuXHRcdC8vIFNvbWUgdmljdGltcyBnZXQgY2F1Z2h0IGluIG91ciBuZXQgKGxhYmVsLCBsZWdlbmQsIG1lbnUsIHRyYWNrKSwgYnV0IGl0IHNob3VsZG4ndFxuXHRcdC8vIGV2ZW4gZXhpc3Qgb24gdGhlbSwgbGV0IGFsb25lIGhhdmUgYSBib29sZWFuIHZhbHVlLlxuXHRcdH0gZWxzZSBpZiAoIFwibGFiZWxcIiBpbiBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdH1cblxuXHRcdC8vIFJlbWFpbmluZyBlbGVtZW50cyBhcmUgbmVpdGhlciA6ZW5hYmxlZCBub3IgOmRpc2FibGVkXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRhcmd1bWVudCA9ICthcmd1bWVudDtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0dmFyIGosXG5cdFx0XHRcdG1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksXG5cdFx0XHRcdGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXG5cdFx0XHQvLyBNYXRjaCBlbGVtZW50cyBmb3VuZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXNcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkge1xuXHRcdFx0XHRcdHNlZWRbal0gPSAhKG1hdGNoZXNbal0gPSBzZWVkW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dFxuICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkge1xuXHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xufVxuXG4vLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cbi8qKlxuICogRGV0ZWN0cyBYTUwgbm9kZXNcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG4gKi9cbmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIGRvY3VtZW50RWxlbWVudCBpcyB2ZXJpZmllZCBmb3IgY2FzZXMgd2hlcmUgaXQgZG9lc24ndCB5ZXQgZXhpc3Rcblx0Ly8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpXG5cdHZhciBkb2N1bWVudEVsZW1lbnQgPSBlbGVtICYmIChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSkuZG9jdW1lbnRFbGVtZW50O1xuXHRyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSBcIkhUTUxcIiA6IGZhbHNlO1xufTtcblxuLyoqXG4gKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKi9cbnNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7XG5cdHZhciBoYXNDb21wYXJlLCBzdWJXaW5kb3csXG5cdFx0ZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jO1xuXG5cdC8vIFJldHVybiBlYXJseSBpZiBkb2MgaXMgaW52YWxpZCBvciBhbHJlYWR5IHNlbGVjdGVkXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gVXBkYXRlIGdsb2JhbCB2YXJpYWJsZXNcblx0ZG9jdW1lbnQgPSBkb2M7XG5cdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2N1bWVudCApO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2Vcblx0Ly8gQWNjZXNzaW5nIGlmcmFtZSBkb2N1bWVudHMgYWZ0ZXIgdW5sb2FkIHRocm93cyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KVxuXHRpZiAoIHByZWZlcnJlZERvYyAhPT0gZG9jdW1lbnQgJiZcblx0XHQoc3ViV2luZG93ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHN1YldpbmRvdy50b3AgIT09IHN1YldpbmRvdyApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDExLCBFZGdlXG5cdFx0aWYgKCBzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcInVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSApO1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDEwIG9ubHlcblx0XHR9IGVsc2UgaWYgKCBzdWJXaW5kb3cuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRzdWJXaW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIEF0dHJpYnV0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdC8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuXHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmNsYXNzTmFtZSA9IFwiaVwiO1xuXHRcdHJldHVybiAhZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpO1xuXHR9KTtcblxuXHQvKiBnZXRFbGVtZW50KHMpQnkqXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpICk7XG5cdFx0cmV0dXJuICFlbC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDEwXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZVxuXHQvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pZCA9IGV4cGFuZG87XG5cdFx0cmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7XG5cdH0pO1xuXG5cdC8vIElEIGZpbHRlciBhbmQgZmluZFxuXHRpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHtcblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdHJldHVybiBlbGVtID8gWyBlbGVtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSAgZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuXHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA2IC0gNyBvbmx5XG5cdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgaXMgbm90IHJlbGlhYmxlIGFzIGEgZmluZCBzaG9ydGN1dFxuXHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIG5vZGUsIGksIGVsZW1zLFxuXHRcdFx0XHRcdGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXG5cdFx0XHRcdGlmICggZWxlbSApIHtcblxuXHRcdFx0XHRcdC8vIFZlcmlmeSB0aGUgaWQgYXR0cmlidXRlXG5cdFx0XHRcdFx0bm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRcdGlmICggbm9kZSAmJiBub2RlLnZhbHVlID09PSBpZCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBbIGVsZW0gXTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBGYWxsIGJhY2sgb24gZ2V0RWxlbWVudHNCeU5hbWVcblx0XHRcdFx0XHRlbGVtcyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeU5hbWUoIGlkICk7XG5cdFx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1zW2krK10pICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRcdFx0aWYgKCBub2RlICYmIG5vZGUudmFsdWUgPT09IGlkICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gWyBlbGVtIF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvLyBUYWdcblx0RXhwci5maW5kW1wiVEFHXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/XG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRG9jdW1lbnRGcmFnbWVudCBub2RlcyBkb24ndCBoYXZlIGdFQlROXG5cdFx0XHR9IGVsc2UgaWYgKCBzdXBwb3J0LnFzYSApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdHRtcCA9IFtdLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0Ly8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvb1xuXHRcdFx0XHRyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcblx0XHRcdGlmICggdGFnID09PSBcIipcIiApIHtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0dG1wLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdG1wO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fTtcblxuXHQvLyBDbGFzc1xuXHRFeHByLmZpbmRbXCJDTEFTU1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkge1xuXHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0cmJ1Z2d5UVNBID0gW107XG5cblx0aWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHQvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG5cdFx0XHQvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcblx0XHRcdC8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLFxuXHRcdFx0Ly8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pbm5lckhUTUwgPSBcIjxhIGlkPSdcIiArIGV4cGFuZG8gKyBcIic+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGlkPSdcIiArIGV4cGFuZG8gKyBcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz5cIiArXG5cdFx0XHRcdFwiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNlxuXHRcdFx0Ly8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPVxuXHRcdFx0Ly8gVGhlIHRlc3QgYXR0cmlidXRlIG11c3QgYmUgdW5rbm93biBpbiBPcGVyYSBidXQgXCJzYWZlXCIgZm9yIFdpblJUXG5cdFx0XHQvLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiWypeJF09XCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86dmFsdWV8XCIgKyBib29sZWFucyArIFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44K1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCJbaWR+PVwiICsgZXhwYW5kbyArIFwiLV1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCJ+PVwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCI6Y2hlY2tlZFwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCtcblx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTFcblx0XHRcdC8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmxpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiYSNcIiArIGV4cGFuZG8gKyBcIisqXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiLiMuK1srfl1cIik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0ZWwuaW5uZXJIVE1MID0gXCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwc1xuXHRcdFx0Ly8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG5cdFx0XHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRlbC5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcIkRcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZVxuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIElFJ3MgOmRpc2FibGVkIHNlbGVjdG9yIGRvZXMgbm90IHBpY2sgdXAgdGhlIGNoaWxkcmVuIG9mIGRpc2FibGVkIGZpZWxkc2V0c1xuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZGlzYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zXG5cdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcblx0XHRcdHJidWdneVFTQS5wdXNoKFwiLC4qOlwiKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuXHRcdGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBlbCwgXCIqXCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBlbCwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHR9KTtcblx0fVxuXG5cdHJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oXCJ8XCIpICk7XG5cdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oXCJ8XCIpICk7XG5cblx0LyogQ29udGFpbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cblx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdC8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZVxuXHQvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuXHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0dmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcblx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0YWRvd24uY29udGFpbnMgP1xuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHQpKTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdGlmICggYiApIHtcblx0XHRcdFx0d2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHQvKiBTb3J0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHR2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG5cdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdGNvbXBhcmUgPSAoIGEub3duZXJEb2N1bWVudCB8fCBhICkgPT09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG5cdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcblx0XHRcdDE7XG5cblx0XHQvLyBEaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHQoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cblx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0aWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlclxuXHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG5cdH0gOlxuXHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHQvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdGJ1cCA9IGIucGFyZW50Tm9kZSxcblx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRicCA9IFsgYiBdO1xuXG5cdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblx0XHRcdHJldHVybiBhID09PSBkb2N1bWVudCA/IC0xIDpcblx0XHRcdFx0YiA9PT0gZG9jdW1lbnQgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2N1bWVudDtcbn07XG5cblNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkge1xuXHRyZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApO1xufTtcblxuU2l6emxlLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBlbGVtLCBleHByICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHQvLyBNYWtlIHN1cmUgdGhhdCBhdHRyaWJ1dGUgc2VsZWN0b3JzIGFyZSBxdW90ZWRcblx0ZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgXCI9JyQxJ11cIiApO1xuXG5cdGlmICggc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHQhY29tcGlsZXJDYWNoZVsgZXhwciArIFwiIFwiIF0gJiZcblx0XHQoICFyYnVnZ3lNYXRjaGVzIHx8ICFyYnVnZ3lNYXRjaGVzLnRlc3QoIGV4cHIgKSApICYmXG5cdFx0KCAhcmJ1Z2d5UVNBICAgICB8fCAhcmJ1Z2d5UVNBLnRlc3QoIGV4cHIgKSApICkge1xuXG5cdFx0dHJ5IHtcblx0XHRcdHZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTtcblxuXHRcdFx0Ly8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0aWYgKCByZXQgfHwgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCB8fFxuXHRcdFx0XHRcdC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG5cdFx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge31cblx0fVxuXG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0dmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcblx0XHQvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcblx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0dW5kZWZpbmVkO1xuXG5cdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0dmFsIDpcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG59O1xuXG5TaXp6bGUuZXNjYXBlID0gZnVuY3Rpb24oIHNlbCApIHtcblx0cmV0dXJuIChzZWwgKyBcIlwiKS5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcblx0dmFyIGVsZW0sXG5cdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdGogPSAwLFxuXHRcdGkgPSAwO1xuXG5cdC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2Vcblx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cblx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcblx0XHRcdFx0aiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdHJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuXHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcblx0c29ydElucHV0ID0gbnVsbDtcblxuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXNcbiAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICovXG5nZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0dmFyIG5vZGUsXG5cdFx0cmV0ID0gXCJcIixcblx0XHRpID0gMCxcblx0XHRub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0aWYgKCAhbm9kZVR5cGUgKSB7XG5cdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHR3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcblx0XHRcdC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG5cdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuXHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0cmV0ICs9IGdldFRleHQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcblx0fVxuXHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuXHRyZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cblx0Ly8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG5cdGNhY2hlTGVuZ3RoOiA1MCxcblxuXHRjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuXHRtYXRjaDogbWF0Y2hFeHByLFxuXG5cdGF0dHJIYW5kbGU6IHt9LFxuXG5cdGZpbmQ6IHt9LFxuXG5cdHJlbGF0aXZlOiB7XG5cdFx0XCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG5cdH0sXG5cblx0cHJlRmlsdGVyOiB7XG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0Ly8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcblx0XHRcdG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0LyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG5cdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG5cdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDYgeCBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0Ki9cblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuXHRcdFx0XHQvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuXHRcdFx0XHRpZiAoICFtYXRjaFszXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcblx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRtYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICk7XG5cblx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHR2YXIgZXhjZXNzLFxuXHRcdFx0XHR1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTtcblxuXHRcdFx0aWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcblx0XHRcdGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblxuXHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXHRcdFx0XHQvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KVxuXHRcdFx0XHQoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG5cdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHtcblxuXHRcdFx0XHQvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuXHRcdFx0XHRtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdFx0bWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG5cdFx0fVxuXHR9LFxuXG5cdGZpbHRlcjoge1xuXG5cdFx0XCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG5cdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuXHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0KHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuXHRcdFx0XHRjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG5cdFx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdFx0aWYgKCByZXN1bHQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiIT1cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFvcGVyYXRvciApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCArPSBcIlwiO1xuXG5cdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiXj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifj1cIiA/ICggXCIgXCIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsIFwiIFwiICkgKyBcIiBcIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuXHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRvZlR5cGUgPSB3aGF0ID09PSBcIm9mLXR5cGVcIjtcblxuXHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG5cdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHR9IDpcblxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBjYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSxcblx0XHRcdFx0XHRcdGRpZmYgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblxuXHRcdFx0XHRcdFx0Ly8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcblx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXg7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyB4bWwgOm50aC1jaGlsZCguLi4pXG5cdFx0XHRcdFx0XHRcdC8vIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdFx0aWYgKCBkaWZmID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQrK2RpZmYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0ZGlmZiAtPSBsYXN0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcblx0XHRcdC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0Ly8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnNcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3Ncblx0XHRcdHZhciBhcmdzLFxuXHRcdFx0XHRmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblxuXHRcdFx0Ly8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuXHRcdFx0Ly8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cblx0XHRcdC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcblx0XHRcdGlmICggZm5bIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0cmV0dXJuIGZuKCBhcmd1bWVudCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcblx0XHRcdGlmICggZm4ubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0YXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sIFwiXCIsIGFyZ3VtZW50IF07XG5cdFx0XHRcdHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdHZhciBpZHgsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0c2VlZFsgaWR4IF0gPSAhKCBtYXRjaGVzWyBpZHggXSA9IG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZm47XG5cdFx0fVxuXHR9LFxuXG5cdHBzZXVkb3M6IHtcblx0XHQvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3Ncblx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG5cdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRyZXN1bHRzID0gW10sXG5cdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/XG5cdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0dW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLFxuXHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYFxuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdHNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pIDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRpbnB1dFswXSA9IGVsZW07XG5cdFx0XHRcdFx0bWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApO1xuXHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiAhcmVzdWx0cy5wb3AoKTtcblx0XHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG5cdFx0Ly8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWVcblx0XHQvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuXHRcdC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG5cdFx0Ly8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuXG5cdFx0Ly8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cblx0XHRcImxhbmdcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHtcblx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCBcIlwiKSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbGFuZyApO1xuXHRcdFx0fVxuXHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cblx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gTWlzY2VsbGFuZW91c1xuXHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG5cdFx0fSxcblxuXHRcdFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdH0sXG5cblx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTtcblx0XHR9LFxuXG5cdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XCJlbmFibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCBmYWxzZSApLFxuXHRcdFwiZGlzYWJsZWRcIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIHRydWUgKSxcblxuXHRcdFwiY2hlY2tlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEluIENTUzMsIDpjaGVja2VkIHNob3VsZCByZXR1cm4gYm90aCBjaGVja2VkIGFuZCBzZWxlY3RlZCBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAobm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSBcIm9wdGlvblwiICYmICEhZWxlbS5zZWxlY3RlZCk7XG5cdFx0fSxcblxuXHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHQvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5XG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdH0sXG5cblx0XHQvLyBDb250ZW50c1xuXHRcdFwiZW1wdHlcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkb1xuXHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0Ly8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLilcblx0XHRcdC8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdH0sXG5cblx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XCJoZWFkZXJcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiaW5wdXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gXCJidXR0b25cIiB8fCBuYW1lID09PSBcImJ1dHRvblwiO1xuXHRcdH0sXG5cblx0XHRcInRleHRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgYXR0cjtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiAmJlxuXHRcdFx0XHRlbGVtLnR5cGUgPT09IFwidGV4dFwiICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OFxuXHRcdFx0XHQvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgXCJzZWFyY2hcIikgYXBwZWFyIHdpdGggZWxlbS50eXBlID09PSBcInRleHRcIlxuXHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHR9LFxuXG5cdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbIDAgXTtcblx0XHR9KSxcblxuXHRcdFwibGFzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHR9KSxcblxuXHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0cmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJldmVuXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDE7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgLS1pID49IDA7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwiZ3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KVxuXHR9XG59O1xuXG5FeHByLnBzZXVkb3NbXCJudGhcIl0gPSBFeHByLnBzZXVkb3NbXCJlcVwiXTtcblxuLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3NcbmZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG59XG5mb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xufVxuXG4vLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcbmZ1bmN0aW9uIHNldEZpbHRlcnMoKSB7fVxuc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7XG5FeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXG50b2tlbml6ZSA9IFNpenpsZS50b2tlbml6ZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkge1xuXHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLFxuXHRcdGNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoIGNhY2hlZCApIHtcblx0XHRyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApO1xuXHR9XG5cblx0c29GYXIgPSBzZWxlY3Rvcjtcblx0Z3JvdXBzID0gW107XG5cdHByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjtcblxuXHR3aGlsZSAoIHNvRmFyICkge1xuXG5cdFx0Ly8gQ29tbWEgYW5kIGZpcnN0IHJ1blxuXHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdFx0Ly8gRG9uJ3QgY29uc3VtZSB0cmFpbGluZyBjb21tYXMgYXMgdmFsaWRcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHR9XG5cdFx0XHRncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApO1xuXHRcdH1cblxuXHRcdG1hdGNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIENvbWJpbmF0b3JzXG5cdFx0aWYgKCAobWF0Y2ggPSByY29tYmluYXRvcnMuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHR0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgXCIgXCIgKVxuXHRcdFx0fSk7XG5cdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZpbHRlcnNcblx0XHRmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuXHRcdFx0aWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fFxuXHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG1hdGNoZXM6IG1hdGNoXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggIW1hdGNoZWQgKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3Ncblx0Ly8gaWYgd2UncmUganVzdCBwYXJzaW5nXG5cdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRyZXR1cm4gcGFyc2VPbmx5ID9cblx0XHRzb0Zhci5sZW5ndGggOlxuXHRcdHNvRmFyID9cblx0XHRcdFNpenpsZS5lcnJvciggc2VsZWN0b3IgKSA6XG5cdFx0XHQvLyBDYWNoZSB0aGUgdG9rZW5zXG5cdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcbn07XG5cbmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7XG5cdH1cblx0cmV0dXJuIHNlbGVjdG9yO1xufVxuXG5mdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuXHR2YXIgZGlyID0gY29tYmluYXRvci5kaXIsXG5cdFx0c2tpcCA9IGNvbWJpbmF0b3IubmV4dCxcblx0XHRrZXkgPSBza2lwIHx8IGRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBrZXkgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSxcblx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cblx0XHRcdC8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZ1xuXHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0aWYgKCBza2lwICYmIHNraXAgPT09IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0ZWxlbSA9IGVsZW1bIGRpciBdIHx8IGVsZW07XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCAob2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsga2V5IF0pICYmXG5cdFx0XHRcdFx0XHRcdG9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyBrZXkgXSA9IG5ld0NhY2hlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuXHRcdFx0XHRcdFx0XHRpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuXHRyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gOlxuXHRcdG1hdGNoZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG5cdHZhciBlbGVtLFxuXHRcdG5ld1VubWF0Y2hlZCA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG5cdFx0bWFwcGVkID0gbWFwICE9IG51bGw7XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0aWYgKCBtYXBwZWQgKSB7XG5cdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcblx0fVxuXHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG5cdH1cblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciB0ZW1wLCBpLCBlbGVtLFxuXHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0ZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8IFwiKlwiLCBjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLFxuXG5cdFx0XHQvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cblx0XHRcdG1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgP1xuXHRcdFx0XHRjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdGVsZW1zLFxuXG5cdFx0XHRtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuXHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFtdIDpcblxuXHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdHJlc3VsdHMgOlxuXHRcdFx0XHRtYXRjaGVySW47XG5cblx0XHQvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuXHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdGlmICggcG9zdEZpbHRlciApIHtcblx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG5cdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuXHRcdFx0XHRcdG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggc2VlZCApIHtcblx0XHRcdGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuXHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuXHRcdFx0XHRcdFx0KHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXG5cdFx0XHRcdFx0XHRzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cblx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdCk7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLFxuXHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVtcIiBcIl0sXG5cdFx0aSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLFxuXG5cdFx0Ly8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcblx0XHRtYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoXG5cdFx0XHRcdChjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0bWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRjaGVja0NvbnRleHQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9IF07XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuXHRcdFx0bWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHQvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcblx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXRNYXRjaGVyKFxuXHRcdFx0XHRcdGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuXHRcdFx0XHRcdGkgPiAxICYmIHRvU2VsZWN0b3IoXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuXHRcdFx0XHRcdFx0dG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcblx0XHRcdFx0XHQpLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcblx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG5cdHZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0YnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0c3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuXHRcdFx0dmFyIGVsZW0sIGosIG1hdGNoZXIsXG5cdFx0XHRcdG1hdGNoZWRDb3VudCA9IDAsXG5cdFx0XHRcdGkgPSBcIjBcIixcblx0XHRcdFx0dW5tYXRjaGVkID0gc2VlZCAmJiBbXSxcblx0XHRcdFx0c2V0TWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcblx0XHRcdFx0Ly8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuXHRcdFx0XHQvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuXHRcdFx0XHRkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSxcblx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gU3VwcG9ydDogSUU8OSwgU2FmYXJpXG5cdFx0XHQvLyBUb2xlcmF0ZSBOb2RlTGlzdCBwcm9wZXJ0aWVzIChJRTogXCJsZW5ndGhcIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWRcblx0XHRcdGZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHRpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdFx0XHRcdFx0eG1sID0gIWRvY3VtZW50SXNIVE1MO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwpICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gYGlgIGlzIG5vdyB0aGUgY291bnQgb2YgZWxlbWVudHMgdmlzaXRlZCBhYm92ZSwgYW5kIGFkZGluZyBpdCB0byBgbWF0Y2hlZENvdW50YFxuXHRcdFx0Ly8gbWFrZXMgdGhlIGxhdHRlciBub25uZWdhdGl2ZS5cblx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXG5cdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdC8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZVxuXHRcdFx0Ly8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC5cblx0XHRcdC8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nIFwiMFwiIGBpYCBhbGxvd3MgYGlgIHRvIHJlbWFpbiBhIHN0cmluZyBvbmx5IGluIHRoYXRcblx0XHRcdC8vIGNhc2UsIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgXCIwMFwiIGBtYXRjaGVkQ291bnRgIHRoYXQgZGlmZmVycyBmcm9tIGBpYCBidXQgaXMgYWxzb1xuXHRcdFx0Ly8gbnVtZXJpY2FsbHkgemVyby5cblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBzZWxlY3RvciBpbiB0aGUgbGlzdCBhbmQgbm8gc2VlZFxuXHQvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpXG5cdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG5cdFx0Ly8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSURcblx0XHR0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG5cdFx0aWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09IFwiSURcIiAmJlxuXHRcdFx0XHRjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmIEV4cHIucmVsYXRpdmVbIHRva2Vuc1sxXS50eXBlIF0gKSB7XG5cblx0XHRcdGNvbnRleHQgPSAoIEV4cHIuZmluZFtcIklEXCJdKCB0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLCBmdW5lc2NhcGUpLCBjb250ZXh0ICkgfHwgW10gKVswXTtcblx0XHRcdGlmICggIWNvbnRleHQgKSB7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBQcmVjb21waWxlZCBtYXRjaGVycyB3aWxsIHN0aWxsIHZlcmlmeSBhbmNlc3RyeSwgc28gc3RlcCB1cCBhIGxldmVsXG5cdFx0XHR9IGVsc2UgaWYgKCBjb21waWxlZCApIHtcblx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQucGFyZW50Tm9kZTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5zbGljZSggdG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmV0Y2ggYSBzZWVkIHNldCBmb3IgcmlnaHQtdG8tbGVmdCBtYXRjaGluZ1xuXHRcdGkgPSBtYXRjaEV4cHJbXCJuZWVkc0NvbnRleHRcIl0udGVzdCggc2VsZWN0b3IgKSA/IDAgOiB0b2tlbnMubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG9rZW4gPSB0b2tlbnNbaV07XG5cblx0XHRcdC8vIEFib3J0IGlmIHdlIGhpdCBhIGNvbWJpbmF0b3Jcblx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgKHR5cGUgPSB0b2tlbi50eXBlKSBdICkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdC8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9yc1xuXHRcdFx0XHRpZiAoIChzZWVkID0gZmluZChcblx0XHRcdFx0XHR0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksXG5cdFx0XHRcdFx0cnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHRcdFx0XHQpKSApIHtcblxuXHRcdFx0XHRcdC8vIElmIHNlZWQgaXMgZW1wdHkgb3Igbm8gdG9rZW5zIHJlbWFpbiwgd2UgY2FuIHJldHVybiBlYXJseVxuXHRcdFx0XHRcdHRva2Vucy5zcGxpY2UoIGksIDEgKTtcblx0XHRcdFx0XHRzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApO1xuXHRcdFx0XHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2VlZCApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWRcblx0Ly8gUHJvdmlkZSBgbWF0Y2hgIHRvIGF2b2lkIHJldG9rZW5pemF0aW9uIGlmIHdlIG1vZGlmaWVkIHRoZSBzZWxlY3RvciBhYm92ZVxuXHQoIGNvbXBpbGVkIHx8IGNvbXBpbGUoIHNlbGVjdG9yLCBtYXRjaCApICkoXG5cdFx0c2VlZCxcblx0XHRjb250ZXh0LFxuXHRcdCFkb2N1bWVudElzSFRNTCxcblx0XHRyZXN1bHRzLFxuXHRcdCFjb250ZXh0IHx8IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0KTtcblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vLyBPbmUtdGltZSBhc3NpZ25tZW50c1xuXG4vLyBTb3J0IHN0YWJpbGl0eVxuc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdChcIlwiKS5zb3J0KCBzb3J0T3JkZXIgKS5qb2luKFwiXCIpID09PSBleHBhbmRvO1xuXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrXG4vLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uXG5zdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTtcblxuLy8gSW5pdGlhbGl6ZSBhZ2FpbnN0IHRoZSBkZWZhdWx0IGRvY3VtZW50XG5zZXREb2N1bWVudCgpO1xuXG4vLyBTdXBwb3J0OiBXZWJraXQ8NTM3LjMyIC0gU2FmYXJpIDYuMC4zL0Nocm9tZSAyNSAoZml4ZWQgaW4gQ2hyb21lIDI3KVxuLy8gRGV0YWNoZWQgbm9kZXMgY29uZm91bmRpbmdseSBmb2xsb3cgKmVhY2ggb3RoZXIqXG5zdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdC8vIFNob3VsZCByZXR1cm4gMSwgYnV0IHJldHVybnMgNCAoZm9sbG93aW5nKVxuXHRyZXR1cm4gZWwuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKSApICYgMTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBJRTw4XG4vLyBQcmV2ZW50IGF0dHJpYnV0ZS9wcm9wZXJ0eSBcImludGVycG9sYXRpb25cIlxuLy8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdGVsLmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuXHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdGVsLmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIjtcblx0ZWwuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ2YWx1ZVwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0cmV0dXJuIGVsLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5cbi8vIERlcHJlY2F0ZWRcbmpRdWVyeS5leHByWyBcIjpcIiBdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbmpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcbmpRdWVyeS5lc2NhcGVTZWxlY3RvciA9IFNpenpsZS5lc2NhcGU7XG5cblxuXG5cbnZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHtcblx0dmFyIG1hdGNoZWQgPSBbXSxcblx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0d2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0aWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHR2YXIgbWF0Y2hlZCA9IFtdO1xuXG5cdGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7XG5cdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRtYXRjaGVkLnB1c2goIG4gKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlZDtcbn07XG5cblxudmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7XG5cblxuXG5mdW5jdGlvbiBub2RlTmFtZSggZWxlbSwgbmFtZSApIHtcblxuICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcblxufTtcbnZhciByc2luZ2xlVGFnID0gKCAvXjwoW2Etel1bXlxcL1xcMD46XFx4MjBcXHRcXHJcXG5cXGZdKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcLz8+KD86PFxcL1xcMT58KSQvaSApO1xuXG5cblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGlzRnVuY3Rpb24oIHF1YWxpZmllciApICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIFNpbmdsZSBlbGVtZW50XG5cdGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBBcnJheWxpa2Ugb2YgZWxlbWVudHMgKGpRdWVyeSwgYXJndW1lbnRzLCBBcnJheSlcblx0aWYgKCB0eXBlb2YgcXVhbGlmaWVyICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBGaWx0ZXJlZCBkaXJlY3RseSBmb3IgYm90aCBzaW1wbGUgYW5kIGNvbXBsZXggc2VsZWN0b3JzXG5cdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdGlmICggZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHR9ICkgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBpLCByZXQsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeSggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSApICk7XG5cdFx0fVxuXG5cdFx0cmV0ID0gdGhpcy5wdXNoU3RhY2soIFtdICk7XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIHJldCApIDogcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIGZhbHNlICkgKTtcblx0fSxcblx0bm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlICkgKTtcblx0fSxcblx0aXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gISF3aW5ub3coXG5cdFx0XHR0aGlzLFxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgcG9zaXRpb25hbC9yZWxhdGl2ZSBzZWxlY3RvciwgY2hlY2sgbWVtYmVyc2hpcCBpbiB0aGUgcmV0dXJuZWQgc2V0XG5cdFx0XHQvLyBzbyAkKFwicDpmaXJzdFwiKS5pcyhcInA6bGFzdFwiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gXCJwXCIuXG5cdFx0XHR0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvciApIDpcblx0XHRcdFx0c2VsZWN0b3IgfHwgW10sXG5cdFx0XHRmYWxzZVxuXHRcdCkubGVuZ3RoO1xuXHR9XG59ICk7XG5cblxuLy8gSW5pdGlhbGl6ZSBhIGpRdWVyeSBvYmplY3RcblxuXG4vLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudClcbnZhciByb290alF1ZXJ5LFxuXG5cdC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG5cdC8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSlcblx0Ly8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG5cdC8vIFNob3J0Y3V0IHNpbXBsZSAjaWQgY2FzZSBmb3Igc3BlZWRcblx0cnF1aWNrRXhwciA9IC9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSspKSQvLFxuXG5cdGluaXQgPSBqUXVlcnkuZm4uaW5pdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcm9vdCApIHtcblx0XHR2YXIgbWF0Y2gsIGVsZW07XG5cblx0XHQvLyBIQU5ETEU6ICQoXCJcIiksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSlcblx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8vIE1ldGhvZCBpbml0KCkgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeVxuXHRcdC8vIHNvIG1pZ3JhdGUgY2FuIHN1cHBvcnQgalF1ZXJ5LnN1YiAoZ2gtMjEwMSlcblx0XHRyb290ID0gcm9vdCB8fCByb290alF1ZXJ5O1xuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclsgMCBdID09PSBcIjxcIiAmJlxuXHRcdFx0XHRzZWxlY3Rvclsgc2VsZWN0b3IubGVuZ3RoIC0gMSBdID09PSBcIj5cIiAmJlxuXHRcdFx0XHRzZWxlY3Rvci5sZW5ndGggPj0gMyApIHtcblxuXHRcdFx0XHQvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVja1xuXHRcdFx0XHRtYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWRcblx0XHRcdGlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwpIC0+ICQoYXJyYXkpXG5cdFx0XHRcdGlmICggbWF0Y2hbIDEgXSApIHtcblx0XHRcdFx0XHRjb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbIDAgXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWyAxIF0sXG5cdFx0XHRcdFx0XHRjb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IGRvY3VtZW50LFxuXHRcdFx0XHRcdFx0dHJ1ZVxuXHRcdFx0XHRcdCkgKTtcblxuXHRcdFx0XHRcdC8vIEhBTkRMRTogJChodG1sLCBwcm9wcylcblx0XHRcdFx0XHRpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCBtYXRjaCBpbiBjb250ZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbIDIgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0dGhpc1sgMCBdID0gZWxlbTtcblx0XHRcdFx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3QgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzWyAwIF0gPSBzZWxlY3Rvcjtcblx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0Ly8gSEFORExFOiAkKGZ1bmN0aW9uKVxuXHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdH0gZWxzZSBpZiAoIGlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRyZXR1cm4gcm9vdC5yZWFkeSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0cm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRzZWxlY3RvciggalF1ZXJ5ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoIHNlbGVjdG9yLCB0aGlzICk7XG5cdH07XG5cbi8vIEdpdmUgdGhlIGluaXQgZnVuY3Rpb24gdGhlIGpRdWVyeSBwcm90b3R5cGUgZm9yIGxhdGVyIGluc3RhbnRpYXRpb25cbmluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xuXG4vLyBJbml0aWFsaXplIGNlbnRyYWwgcmVmZXJlbmNlXG5yb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApO1xuXG5cbnZhciBycGFyZW50c3ByZXYgPSAvXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxcblxuXHQvLyBNZXRob2RzIGd1YXJhbnRlZWQgdG8gcHJvZHVjZSBhIHVuaXF1ZSBzZXQgd2hlbiBzdGFydGluZyBmcm9tIGEgdW5pcXVlIHNldFxuXHRndWFyYW50ZWVkVW5pcXVlID0ge1xuXHRcdGNoaWxkcmVuOiB0cnVlLFxuXHRcdGNvbnRlbnRzOiB0cnVlLFxuXHRcdG5leHQ6IHRydWUsXG5cdFx0cHJldjogdHJ1ZVxuXHR9O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1sgaSBdICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0Y2xvc2VzdDogZnVuY3Rpb24oIHNlbGVjdG9ycywgY29udGV4dCApIHtcblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRtYXRjaGVkID0gW10sXG5cdFx0XHR0YXJnZXRzID0gdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiAmJiBqUXVlcnkoIHNlbGVjdG9ycyApO1xuXG5cdFx0Ly8gUG9zaXRpb25hbCBzZWxlY3RvcnMgbmV2ZXIgbWF0Y2gsIHNpbmNlIHRoZXJlJ3Mgbm8gX3NlbGVjdGlvbl8gY29udGV4dFxuXHRcdGlmICggIXJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgKSB7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA8IDExICYmICggdGFyZ2V0cyA/XG5cdFx0XHRcdFx0XHR0YXJnZXRzLmluZGV4KCBjdXIgKSA+IC0xIDpcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcGFzcyBub24tZWxlbWVudHMgdG8gU2l6emxlXG5cdFx0XHRcdFx0XHRjdXIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7XG5cblx0XHRcdFx0XHRcdG1hdGNoZWQucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQubGVuZ3RoID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApXG5cdFx0XHQpXG5cdFx0KTtcblx0fSxcblxuXHRhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cblx0XHRcdHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoIHNlbGVjdG9yIClcblx0XHQpO1xuXHR9XG59ICk7XG5cbmZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkge1xuXHR3aGlsZSAoICggY3VyID0gY3VyWyBkaXIgXSApICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApIHt9XG5cdHJldHVybiBjdXI7XG59XG5cbmpRdWVyeS5lYWNoKCB7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuXHR9LFxuXHRwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiwgdW50aWwgKTtcblx0fSxcblx0bmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHR9LFxuXHRwcmV2OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHByZXZVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZ3MoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICBpZiAoIG5vZGVOYW1lKCBlbGVtLCBcImlmcmFtZVwiICkgKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbS5jb250ZW50RG9jdW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdXBwb3J0OiBJRSA5IC0gMTEgb25seSwgaU9TIDcgb25seSwgQW5kcm9pZCBCcm93c2VyIDw9NC4zIG9ubHlcbiAgICAgICAgLy8gVHJlYXQgdGhlIHRlbXBsYXRlIGVsZW1lbnQgYXMgYSByZWd1bGFyIG9uZSBpbiBicm93c2VycyB0aGF0XG4gICAgICAgIC8vIGRvbid0IHN1cHBvcnQgaXQuXG4gICAgICAgIGlmICggbm9kZU5hbWUoIGVsZW0sIFwidGVtcGxhdGVcIiApICkge1xuICAgICAgICAgICAgZWxlbSA9IGVsZW0uY29udGVudCB8fCBlbGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIGVsZW0uY2hpbGROb2RlcyApO1xuXHR9XG59LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXG5cdFx0aWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSBcIlVudGlsXCIgKSB7XG5cdFx0XHRzZWxlY3RvciA9IHVudGlsO1xuXHRcdH1cblxuXHRcdGlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0bWF0Y2hlZCA9IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBtYXRjaGVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBkdXBsaWNhdGVzXG5cdFx0XHRpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzXG5cdFx0XHRpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7XG5cdFx0XHRcdG1hdGNoZWQucmV2ZXJzZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZCApO1xuXHR9O1xufSApO1xudmFyIHJub3RodG1sd2hpdGUgPSAoIC9bXlxceDIwXFx0XFxyXFxuXFxmXSsvZyApO1xuXG5cblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXNcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7XG5cdHZhciBvYmplY3QgPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7XG5cdFx0b2JqZWN0WyBmbGFnIF0gPSB0cnVlO1xuXHR9ICk7XG5cdHJldHVybiBvYmplY3Q7XG59XG5cbi8qXG4gKiBDcmVhdGUgYSBjYWxsYmFjayBsaXN0IHVzaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAqXG4gKlx0b3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvd1xuICpcdFx0XHR0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0XG4gKlxuICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmVcbiAqIFwiZmlyZWRcIiBtdWx0aXBsZSB0aW1lcy5cbiAqXG4gKiBQb3NzaWJsZSBvcHRpb25zOlxuICpcbiAqXHRvbmNlOlx0XHRcdHdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0bWVtb3J5Olx0XHRcdHdpbGwga2VlcCB0cmFjayBvZiBwcmV2aW91cyB2YWx1ZXMgYW5kIHdpbGwgY2FsbCBhbnkgY2FsbGJhY2sgYWRkZWRcbiAqXHRcdFx0XHRcdGFmdGVyIHRoZSBsaXN0IGhhcyBiZWVuIGZpcmVkIHJpZ2h0IGF3YXkgd2l0aCB0aGUgbGF0ZXN0IFwibWVtb3JpemVkXCJcbiAqXHRcdFx0XHRcdHZhbHVlcyAobGlrZSBhIERlZmVycmVkKVxuICpcbiAqXHR1bmlxdWU6XHRcdFx0d2lsbCBlbnN1cmUgYSBjYWxsYmFjayBjYW4gb25seSBiZSBhZGRlZCBvbmNlIChubyBkdXBsaWNhdGUgaW4gdGhlIGxpc3QpXG4gKlxuICpcdHN0b3BPbkZhbHNlOlx0aW50ZXJydXB0IGNhbGxpbmdzIHdoZW4gYSBjYWxsYmFjayByZXR1cm5zIGZhbHNlXG4gKlxuICovXG5qUXVlcnkuQ2FsbGJhY2tzID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cblx0Ly8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZFxuXHQvLyAod2UgY2hlY2sgaW4gY2FjaGUgZmlyc3QpXG5cdG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0Y3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIDpcblx0XHRqUXVlcnkuZXh0ZW5kKCB7fSwgb3B0aW9ucyApO1xuXG5cdHZhciAvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXG5cdFx0Ly8gTGFzdCBmaXJlIHZhbHVlIGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHNcblx0XHRtZW1vcnksXG5cblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuXHRcdGZpcmVkLFxuXG5cdFx0Ly8gRmxhZyB0byBwcmV2ZW50IGZpcmluZ1xuXHRcdGxvY2tlZCxcblxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXG5cdFx0Ly8gUXVldWUgb2YgZXhlY3V0aW9uIGRhdGEgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRxdWV1ZSA9IFtdLFxuXG5cdFx0Ly8gSW5kZXggb2YgY3VycmVudGx5IGZpcmluZyBjYWxsYmFjayAobW9kaWZpZWQgYnkgYWRkL3JlbW92ZSBhcyBuZWVkZWQpXG5cdFx0ZmlyaW5nSW5kZXggPSAtMSxcblxuXHRcdC8vIEZpcmUgY2FsbGJhY2tzXG5cdFx0ZmlyZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBFbmZvcmNlIHNpbmdsZS1maXJpbmdcblx0XHRcdGxvY2tlZCA9IGxvY2tlZCB8fCBvcHRpb25zLm9uY2U7XG5cblx0XHRcdC8vIEV4ZWN1dGUgY2FsbGJhY2tzIGZvciBhbGwgcGVuZGluZyBleGVjdXRpb25zLFxuXHRcdFx0Ly8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlc1xuXHRcdFx0ZmlyZWQgPSBmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBxdWV1ZS5sZW5ndGg7IGZpcmluZ0luZGV4ID0gLTEgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdHdoaWxlICggKytmaXJpbmdJbmRleCA8IGxpc3QubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0Ly8gUnVuIGNhbGxiYWNrIGFuZCBjaGVjayBmb3IgZWFybHkgdGVybWluYXRpb25cblx0XHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJlxuXHRcdFx0XHRcdFx0b3B0aW9ucy5zdG9wT25GYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSnVtcCB0byBlbmQgYW5kIGZvcmdldCB0aGUgZGF0YSBzbyAuYWRkIGRvZXNuJ3QgcmUtZmlyZVxuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3JnZXQgdGhlIGRhdGEgaWYgd2UncmUgZG9uZSB3aXRoIGl0XG5cdFx0XHRpZiAoICFvcHRpb25zLm1lbW9yeSApIHtcblx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGZpcmluZyA9IGZhbHNlO1xuXG5cdFx0XHQvLyBDbGVhbiB1cCBpZiB3ZSdyZSBkb25lIGZpcmluZyBmb3IgZ29vZFxuXHRcdFx0aWYgKCBsb2NrZWQgKSB7XG5cblx0XHRcdFx0Ly8gS2VlcCBhbiBlbXB0eSBsaXN0IGlmIHdlIGhhdmUgZGF0YSBmb3IgZnV0dXJlIGFkZCBjYWxsc1xuXHRcdFx0XHRpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxpc3QgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0XG5cdFx0c2VsZiA9IHtcblxuXHRcdFx0Ly8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdFxuXHRcdFx0YWRkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmdcblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBtZW1vcnkgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQoIGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24oIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggIW9wdGlvbnMudW5pcXVlIHx8ICFzZWxmLmhhcyggYXJnICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsaXN0LnB1c2goIGFyZyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggYXJnICYmIGFyZy5sZW5ndGggJiYgdG9UeXBlKCBhcmcgKSAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fSApKCBhcmd1bWVudHMgKTtcblxuXHRcdFx0XHRcdGlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHR2YXIgaW5kZXg7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRpZiAoIGluZGV4IDw9IGZpcmluZ0luZGV4ICkge1xuXHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gP1xuXHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBmbiwgbGlzdCApID4gLTEgOlxuXHRcdFx0XHRcdGxpc3QubGVuZ3RoID4gMDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3Rcblx0XHRcdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmUgYW5kIC5hZGRcblx0XHRcdC8vIEFib3J0IGFueSBjdXJyZW50L3BlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0Ly8gQ2xlYXIgYWxsIGNhbGxiYWNrcyBhbmQgdmFsdWVzXG5cdFx0XHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFsaXN0O1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRGlzYWJsZSAuZmlyZVxuXHRcdFx0Ly8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdClcblx0XHRcdC8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdGxvY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsb2NrZWQgPSBxdWV1ZSA9IFtdO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRsaXN0ID0gbWVtb3J5ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRsb2NrZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gISFsb2NrZWQ7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggIWxvY2tlZCApIHtcblx0XHRcdFx0XHRhcmdzID0gYXJncyB8fCBbXTtcblx0XHRcdFx0XHRhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdO1xuXHRcdFx0XHRcdHF1ZXVlLnB1c2goIGFyZ3MgKTtcblx0XHRcdFx0XHRpZiAoICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2Vcblx0XHRcdGZpcmVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhZmlyZWQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRyZXR1cm4gc2VsZjtcbn07XG5cblxuZnVuY3Rpb24gSWRlbnRpdHkoIHYgKSB7XG5cdHJldHVybiB2O1xufVxuZnVuY3Rpb24gVGhyb3dlciggZXggKSB7XG5cdHRocm93IGV4O1xufVxuXG5mdW5jdGlvbiBhZG9wdFZhbHVlKCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0LCBub1ZhbHVlICkge1xuXHR2YXIgbWV0aG9kO1xuXG5cdHRyeSB7XG5cblx0XHQvLyBDaGVjayBmb3IgcHJvbWlzZSBhc3BlY3QgZmlyc3QgdG8gcHJpdmlsZWdlIHN5bmNocm9ub3VzIGJlaGF2aW9yXG5cdFx0aWYgKCB2YWx1ZSAmJiBpc0Z1bmN0aW9uKCAoIG1ldGhvZCA9IHZhbHVlLnByb21pc2UgKSApICkge1xuXHRcdFx0bWV0aG9kLmNhbGwoIHZhbHVlICkuZG9uZSggcmVzb2x2ZSApLmZhaWwoIHJlamVjdCApO1xuXG5cdFx0Ly8gT3RoZXIgdGhlbmFibGVzXG5cdFx0fSBlbHNlIGlmICggdmFsdWUgJiYgaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS50aGVuICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0ICk7XG5cblx0XHQvLyBPdGhlciBub24tdGhlbmFibGVzXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gQ29udHJvbCBgcmVzb2x2ZWAgYXJndW1lbnRzIGJ5IGxldHRpbmcgQXJyYXkjc2xpY2UgY2FzdCBib29sZWFuIGBub1ZhbHVlYCB0byBpbnRlZ2VyOlxuXHRcdFx0Ly8gKiBmYWxzZTogWyB2YWx1ZSBdLnNsaWNlKCAwICkgPT4gcmVzb2x2ZSggdmFsdWUgKVxuXHRcdFx0Ly8gKiB0cnVlOiBbIHZhbHVlIF0uc2xpY2UoIDEgKSA9PiByZXNvbHZlKClcblx0XHRcdHJlc29sdmUuYXBwbHkoIHVuZGVmaW5lZCwgWyB2YWx1ZSBdLnNsaWNlKCBub1ZhbHVlICkgKTtcblx0XHR9XG5cblx0Ly8gRm9yIFByb21pc2VzL0ErLCBjb252ZXJ0IGV4Y2VwdGlvbnMgaW50byByZWplY3Rpb25zXG5cdC8vIFNpbmNlIGpRdWVyeS53aGVuIGRvZXNuJ3QgdW53cmFwIHRoZW5hYmxlcywgd2UgY2FuIHNraXAgdGhlIGV4dHJhIGNoZWNrcyBhcHBlYXJpbmcgaW5cblx0Ly8gRGVmZXJyZWQjdGhlbiB0byBjb25kaXRpb25hbGx5IHN1cHByZXNzIHJlamVjdGlvbi5cblx0fSBjYXRjaCAoIHZhbHVlICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgb25seVxuXHRcdC8vIFN0cmljdCBtb2RlIGZ1bmN0aW9ucyBpbnZva2VkIHdpdGhvdXQgLmNhbGwvLmFwcGx5IGdldCBnbG9iYWwtb2JqZWN0IGNvbnRleHRcblx0XHRyZWplY3QuYXBwbHkoIHVuZGVmaW5lZCwgWyB2YWx1ZSBdICk7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXG5cdFx0XHRcdC8vIGFjdGlvbiwgYWRkIGxpc3RlbmVyLCBjYWxsYmFja3MsXG5cdFx0XHRcdC8vIC4uLiAudGhlbiBoYW5kbGVycywgYXJndW1lbnQgaW5kZXgsIFtmaW5hbCBzdGF0ZV1cblx0XHRcdFx0WyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksIDIgXSxcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAwLCBcInJlc29sdmVkXCIgXSxcblx0XHRcdFx0WyBcInJlamVjdFwiLCBcImZhaWxcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksIDEsIFwicmVqZWN0ZWRcIiBdXG5cdFx0XHRdLFxuXHRcdFx0c3RhdGUgPSBcInBlbmRpbmdcIixcblx0XHRcdHByb21pc2UgPSB7XG5cdFx0XHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc3RhdGU7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsd2F5czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiY2F0Y2hcIjogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLnRoZW4oIG51bGwsIGZuICk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdFx0XHRwaXBlOiBmdW5jdGlvbiggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8gKSB7XG5cdFx0XHRcdFx0dmFyIGZucyA9IGFyZ3VtZW50cztcblxuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBNYXAgdHVwbGVzIChwcm9ncmVzcywgZG9uZSwgZmFpbCkgdG8gYXJndW1lbnRzIChkb25lLCBmYWlsLCBwcm9ncmVzcylcblx0XHRcdFx0XHRcdFx0dmFyIGZuID0gaXNGdW5jdGlvbiggZm5zWyB0dXBsZVsgNCBdIF0gKSAmJiBmbnNbIHR1cGxlWyA0IF0gXTtcblxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5wcm9ncmVzcyhmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5ub3RpZnkgfSlcblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLmZhaWwoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVqZWN0IH0pXG5cdFx0XHRcdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMSBdIF0oIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkICYmIGlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhaWwoIG5ld0RlZmVyLnJlamVjdCApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0Zm5zID0gbnVsbDtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aGVuOiBmdW5jdGlvbiggb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdFx0dmFyIG1heERlcHRoID0gMDtcblx0XHRcdFx0XHRmdW5jdGlvbiByZXNvbHZlKCBkZXB0aCwgZGVmZXJyZWQsIGhhbmRsZXIsIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdFx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzLFxuXHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3cgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCwgdGhlbjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjNcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU5XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgZG91YmxlLXJlc29sdXRpb24gYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggPCBtYXhEZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCA9IGhhbmRsZXIuYXBwbHkoIHRoYXQsIGFyZ3MgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNDhcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgPT09IGRlZmVycmVkLnByb21pc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvciggXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9ucyAyLjMuMy4xLCAzLjVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC03NVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmV0cmlldmUgYHRoZW5gIG9ubHkgb25jZVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhlbiA9IHJldHVybmVkICYmXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuNFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02NFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGNoZWNrIG9iamVjdHMgYW5kIGZ1bmN0aW9ucyBmb3IgdGhlbmFiaWxpdHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCB0eXBlb2YgcmV0dXJuZWQgPT09IFwib2JqZWN0XCIgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgcmV0dXJuZWQgPT09IFwiZnVuY3Rpb25cIiApICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhIHJldHVybmVkIHRoZW5hYmxlXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24oIHRoZW4gKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTcGVjaWFsIHByb2Nlc3NvcnMgKG5vdGlmeSkganVzdCB3YWl0IGZvciByZXNvbHV0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGVuLmNhbGwoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgVGhyb3dlciwgc3BlY2lhbCApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBOb3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgYWxzbyBob29rIGludG8gcHJvZ3Jlc3Ncblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBkaXNyZWdhcmQgb2xkZXIgcmVzb2x1dGlvbiB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXhEZXB0aCsrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGggKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGFsbCBvdGhlciByZXR1cm5lZCB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmQgbXVsdGlwbGUgdmFsdWVzIChub24tc3BlYyBiZWhhdmlvcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBoYW5kbGVyICE9PSBJZGVudGl0eSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGF0ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIHJldHVybmVkIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQcm9jZXNzIHRoZSB2YWx1ZShzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZhdWx0IHByb2Nlc3MgaXMgcmVzb2x2ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoIHNwZWNpYWwgfHwgZGVmZXJyZWQucmVzb2x2ZVdpdGggKSggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IG5vcm1hbCBwcm9jZXNzb3JzIChyZXNvbHZlKSBjYXRjaCBhbmQgcmVqZWN0IGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzID0gc3BlY2lhbCA/XG5cdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93IDpcblx0XHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3coKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2soIGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByb2Nlc3Muc3RhY2tUcmFjZSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy40LjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02MVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElnbm9yZSBwb3N0LXJlc29sdXRpb24gZXhjZXB0aW9uc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKyAxID49IG1heERlcHRoICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHN1YnN0aXR1dGUgaGFuZGxlcnMgcGFzcyBvbiBjb250ZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmQgbXVsdGlwbGUgdmFsdWVzIChub24tc3BlYyBiZWhhdmlvcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gVGhyb3dlciApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncyA9IFsgZSBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCB0aGF0LCBhcmdzICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4xXG5cdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU3XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlc29sdmUgcHJvbWlzZXMgaW1tZWRpYXRlbHkgdG8gZG9kZ2UgZmFsc2UgcmVqZWN0aW9uIGZyb21cblx0XHRcdFx0XHRcdFx0Ly8gc3Vic2VxdWVudCBlcnJvcnNcblx0XHRcdFx0XHRcdFx0aWYgKCBkZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzKCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDYWxsIGFuIG9wdGlvbmFsIGhvb2sgdG8gcmVjb3JkIHRoZSBzdGFjaywgaW4gY2FzZSBvZiBleGNlcHRpb25cblx0XHRcdFx0XHRcdFx0XHQvLyBzaW5jZSBpdCdzIG90aGVyd2lzZSBsb3N0IHdoZW4gZXhlY3V0aW9uIGdvZXMgYXN5bmNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgPSBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBwcm9jZXNzICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuXG5cdFx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uUHJvZ3Jlc3MgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvblByb2dyZXNzIDpcblx0XHRcdFx0XHRcdFx0XHRcdElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLm5vdGlmeVdpdGhcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmFkZCggLi4uIClcblx0XHRcdFx0XHRcdHR1cGxlc1sgMSBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0aXNGdW5jdGlvbiggb25GdWxmaWxsZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvbkZ1bGZpbGxlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDIgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uUmVqZWN0ZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvblJlamVjdGVkIDpcblx0XHRcdFx0XHRcdFx0XHRcdFRocm93ZXJcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWRcblx0XHRcdFx0Ly8gSWYgb2JqIGlzIHByb3ZpZGVkLCB0aGUgcHJvbWlzZSBhc3BlY3QgaXMgYWRkZWQgdG8gdGhlIG9iamVjdFxuXHRcdFx0XHRwcm9taXNlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0XHRcdHJldHVybiBvYmogIT0gbnVsbCA/IGpRdWVyeS5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlZmVycmVkID0ge307XG5cblx0XHQvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzXG5cdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0dmFyIGxpc3QgPSB0dXBsZVsgMiBdLFxuXHRcdFx0XHRzdGF0ZVN0cmluZyA9IHR1cGxlWyA1IF07XG5cblx0XHRcdC8vIHByb21pc2UucHJvZ3Jlc3MgPSBsaXN0LmFkZFxuXHRcdFx0Ly8gcHJvbWlzZS5kb25lID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZmFpbCA9IGxpc3QuYWRkXG5cdFx0XHRwcm9taXNlWyB0dXBsZVsgMSBdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChcblx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gc3RhdGUgPSBcInJlc29sdmVkXCIgKGkuZS4sIGZ1bGZpbGxlZClcblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZWplY3RlZFwiXG5cdFx0XHRcdFx0XHRzdGF0ZSA9IHN0YXRlU3RyaW5nO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyByZWplY3RlZF9jYWxsYmFja3MuZGlzYWJsZVxuXHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9jYWxsYmFja3MuZGlzYWJsZVxuXHRcdFx0XHRcdHR1cGxlc1sgMyAtIGkgXVsgMiBdLmRpc2FibGUsXG5cblx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5kaXNhYmxlXG5cdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDMgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfY2FsbGJhY2tzLmxvY2tcblx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMiBdLmxvY2ssXG5cblx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5sb2NrXG5cdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5sb2NrXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHByb2dyZXNzX2hhbmRsZXJzLmZpcmVcblx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5maXJlXG5cdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5maXJlXG5cdFx0XHRsaXN0LmFkZCggdHVwbGVbIDMgXS5maXJlICk7XG5cblx0XHRcdC8vIGRlZmVycmVkLm5vdGlmeSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5ub3RpZnlXaXRoKC4uLikgfVxuXHRcdFx0Ly8gZGVmZXJyZWQucmVzb2x2ZSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZXNvbHZlV2l0aCguLi4pIH1cblx0XHRcdC8vIGRlZmVycmVkLnJlamVjdCA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZWplY3RXaXRoKC4uLikgfVxuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gdW5kZWZpbmVkIDogdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gZGVmZXJyZWQubm90aWZ5V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdC8vIGRlZmVycmVkLnJlc29sdmVXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSApO1xuXG5cdFx0Ly8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlXG5cdFx0cHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXG5cdFx0Ly8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueVxuXHRcdGlmICggZnVuYyApIHtcblx0XHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGRvbmUhXG5cdFx0cmV0dXJuIGRlZmVycmVkO1xuXHR9LFxuXG5cdC8vIERlZmVycmVkIGhlbHBlclxuXHR3aGVuOiBmdW5jdGlvbiggc2luZ2xlVmFsdWUgKSB7XG5cdFx0dmFyXG5cblx0XHRcdC8vIGNvdW50IG9mIHVuY29tcGxldGVkIHN1Ym9yZGluYXRlc1xuXHRcdFx0cmVtYWluaW5nID0gYXJndW1lbnRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gY291bnQgb2YgdW5wcm9jZXNzZWQgYXJndW1lbnRzXG5cdFx0XHRpID0gcmVtYWluaW5nLFxuXG5cdFx0XHQvLyBzdWJvcmRpbmF0ZSBmdWxmaWxsbWVudCBkYXRhXG5cdFx0XHRyZXNvbHZlQ29udGV4dHMgPSBBcnJheSggaSApLFxuXHRcdFx0cmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkXG5cdFx0XHRtYXN0ZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gc3Vib3JkaW5hdGUgY2FsbGJhY2sgZmFjdG9yeVxuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJlc29sdmVDb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7XG5cdFx0XHRcdFx0aWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0bWFzdGVyLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0Ly8gU2luZ2xlLSBhbmQgZW1wdHkgYXJndW1lbnRzIGFyZSBhZG9wdGVkIGxpa2UgUHJvbWlzZS5yZXNvbHZlXG5cdFx0aWYgKCByZW1haW5pbmcgPD0gMSApIHtcblx0XHRcdGFkb3B0VmFsdWUoIHNpbmdsZVZhbHVlLCBtYXN0ZXIuZG9uZSggdXBkYXRlRnVuYyggaSApICkucmVzb2x2ZSwgbWFzdGVyLnJlamVjdCxcblx0XHRcdFx0IXJlbWFpbmluZyApO1xuXG5cdFx0XHQvLyBVc2UgLnRoZW4oKSB0byB1bndyYXAgc2Vjb25kYXJ5IHRoZW5hYmxlcyAoY2YuIGdoLTMwMDApXG5cdFx0XHRpZiAoIG1hc3Rlci5zdGF0ZSgpID09PSBcInBlbmRpbmdcIiB8fFxuXHRcdFx0XHRpc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgcmVzb2x2ZVZhbHVlc1sgaSBdLnRoZW4gKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gbWFzdGVyLnRoZW4oKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBNdWx0aXBsZSBhcmd1bWVudHMgYXJlIGFnZ3JlZ2F0ZWQgbGlrZSBQcm9taXNlLmFsbCBhcnJheSBlbGVtZW50c1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0YWRvcHRWYWx1ZSggcmVzb2x2ZVZhbHVlc1sgaSBdLCB1cGRhdGVGdW5jKCBpICksIG1hc3Rlci5yZWplY3QgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWFzdGVyLnByb21pc2UoKTtcblx0fVxufSApO1xuXG5cbi8vIFRoZXNlIHVzdWFsbHkgaW5kaWNhdGUgYSBwcm9ncmFtbWVyIG1pc3Rha2UgZHVyaW5nIGRldmVsb3BtZW50LFxuLy8gd2FybiBhYm91dCB0aGVtIEFTQVAgcmF0aGVyIHRoYW4gc3dhbGxvd2luZyB0aGVtIGJ5IGRlZmF1bHQuXG52YXIgcmVycm9yTmFtZXMgPSAvXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztcblxualF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgPSBmdW5jdGlvbiggZXJyb3IsIHN0YWNrICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDggLSA5IG9ubHlcblx0Ly8gQ29uc29sZSBleGlzdHMgd2hlbiBkZXYgdG9vbHMgYXJlIG9wZW4sIHdoaWNoIGNhbiBoYXBwZW4gYXQgYW55IHRpbWVcblx0aWYgKCB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS53YXJuICYmIGVycm9yICYmIHJlcnJvck5hbWVzLnRlc3QoIGVycm9yLm5hbWUgKSApIHtcblx0XHR3aW5kb3cuY29uc29sZS53YXJuKCBcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiICsgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2ssIHN0YWNrICk7XG5cdH1cbn07XG5cblxuXG5cbmpRdWVyeS5yZWFkeUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCBlcnJvciApIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdHRocm93IGVycm9yO1xuXHR9ICk7XG59O1xuXG5cblxuXG4vLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbnZhciByZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTtcblxualF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkge1xuXG5cdHJlYWR5TGlzdFxuXHRcdC50aGVuKCBmbiApXG5cblx0XHQvLyBXcmFwIGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiBpbiBhIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIGxvb2t1cFxuXHRcdC8vIGhhcHBlbnMgYXQgdGhlIHRpbWUgb2YgZXJyb3IgaGFuZGxpbmcgaW5zdGVhZCBvZiBjYWxsYmFja1xuXHRcdC8vIHJlZ2lzdHJhdGlvbi5cblx0XHQuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHtcblx0XHRcdGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiggZXJyb3IgKTtcblx0XHR9ICk7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0aXNSZWFkeTogZmFsc2UsXG5cblx0Ly8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuXHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRyZWFkeVdhaXQ6IDEsXG5cblx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7XG5cblx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0aWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG5cdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXG5cdFx0Ly8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmVcblx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlXG5cdFx0cmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5yZWFkeS50aGVuID0gcmVhZHlMaXN0LnRoZW47XG5cbi8vIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kXG5mdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbi8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkXG4vLyBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDEwIG9ubHlcbi8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzIFwiaW50ZXJhY3RpdmVcIiB0b28gc29vblxuaWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHxcblx0KCBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIiAmJiAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICkgKSB7XG5cblx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxufSBlbHNlIHtcblxuXHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblxuXHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xufVxuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGVsZW1zLmxlbmd0aCxcblx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cblx0Ly8gU2V0cyBtYW55IHZhbHVlc1xuXHRpZiAoIHRvVHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGFjY2VzcyggZWxlbXMsIGZuLCBpLCBrZXlbIGkgXSwgdHJ1ZSwgZW1wdHlHZXQsIHJhdyApO1xuXHRcdH1cblxuXHQvLyBTZXRzIG9uZSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cblx0XHRpZiAoICFpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cblx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0aWYgKCByYXcgKSB7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRmbiA9IG51bGw7XG5cblx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1bGsgPSBmbjtcblx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGZuKFxuXHRcdFx0XHRcdGVsZW1zWyBpIF0sIGtleSwgcmF3ID9cblx0XHRcdFx0XHR2YWx1ZSA6XG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIGNoYWluYWJsZSApIHtcblx0XHRyZXR1cm4gZWxlbXM7XG5cdH1cblxuXHQvLyBHZXRzXG5cdGlmICggYnVsayApIHtcblx0XHRyZXR1cm4gZm4uY2FsbCggZWxlbXMgKTtcblx0fVxuXG5cdHJldHVybiBsZW4gPyBmbiggZWxlbXNbIDAgXSwga2V5ICkgOiBlbXB0eUdldDtcbn07XG5cblxuLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG52YXIgcm1zUHJlZml4ID0gL14tbXMtLyxcblx0cmRhc2hBbHBoYSA9IC8tKFthLXpdKS9nO1xuXG4vLyBVc2VkIGJ5IGNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcbmZ1bmN0aW9uIGZjYW1lbENhc2UoIGFsbCwgbGV0dGVyICkge1xuXHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8vIENvbnZlcnQgZGFzaGVkIHRvIGNhbWVsQ2FzZTsgdXNlZCBieSB0aGUgY3NzIGFuZCBkYXRhIG1vZHVsZXNcbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDExLCBFZGdlIDEyIC0gMTVcbi8vIE1pY3Jvc29mdCBmb3Jnb3QgdG8gaHVtcCB0aGVpciB2ZW5kb3IgcHJlZml4ICgjOTU3MilcbmZ1bmN0aW9uIGNhbWVsQ2FzZSggc3RyaW5nICkge1xuXHRyZXR1cm4gc3RyaW5nLnJlcGxhY2UoIHJtc1ByZWZpeCwgXCJtcy1cIiApLnJlcGxhY2UoIHJkYXNoQWxwaGEsIGZjYW1lbENhc2UgKTtcbn1cbnZhciBhY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXG5cdC8vIEFjY2VwdHMgb25seTpcblx0Ly8gIC0gTm9kZVxuXHQvLyAgICAtIE5vZGUuRUxFTUVOVF9OT0RFXG5cdC8vICAgIC0gTm9kZS5ET0NVTUVOVF9OT0RFXG5cdC8vICAtIE9iamVjdFxuXHQvLyAgICAtIEFueVxuXHRyZXR1cm4gb3duZXIubm9kZVR5cGUgPT09IDEgfHwgb3duZXIubm9kZVR5cGUgPT09IDkgfHwgISggK293bmVyLm5vZGVUeXBlICk7XG59O1xuXG5cblxuXG5mdW5jdGlvbiBEYXRhKCkge1xuXHR0aGlzLmV4cGFuZG8gPSBqUXVlcnkuZXhwYW5kbyArIERhdGEudWlkKys7XG59XG5cbkRhdGEudWlkID0gMTtcblxuRGF0YS5wcm90b3R5cGUgPSB7XG5cblx0Y2FjaGU6IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHRcdC8vIENoZWNrIGlmIHRoZSBvd25lciBvYmplY3QgYWxyZWFkeSBoYXMgYSBjYWNoZVxuXHRcdHZhciB2YWx1ZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdC8vIElmIG5vdCwgY3JlYXRlIG9uZVxuXHRcdGlmICggIXZhbHVlICkge1xuXHRcdFx0dmFsdWUgPSB7fTtcblxuXHRcdFx0Ly8gV2UgY2FuIGFjY2VwdCBkYXRhIGZvciBub24tZWxlbWVudCBub2RlcyBpbiBtb2Rlcm4gYnJvd3NlcnMsXG5cdFx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdFx0Ly8gQWx3YXlzIHJldHVybiBhbiBlbXB0eSBvYmplY3QuXG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIG93bmVyICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYgaXQgaXMgYSBub2RlIHVubGlrZWx5IHRvIGJlIHN0cmluZ2lmeS1lZCBvciBsb29wZWQgb3ZlclxuXHRcdFx0XHQvLyB1c2UgcGxhaW4gYXNzaWdubWVudFxuXHRcdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHZhbHVlO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBzZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eVxuXHRcdFx0XHQvLyBjb25maWd1cmFibGUgbXVzdCBiZSB0cnVlIHRvIGFsbG93IHRoZSBwcm9wZXJ0eSB0byBiZVxuXHRcdFx0XHQvLyBkZWxldGVkIHdoZW4gZGF0YSBpcyByZW1vdmVkXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBvd25lciwgdGhpcy5leHBhbmRvLCB7XG5cdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWVcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0sXG5cdHNldDogZnVuY3Rpb24oIG93bmVyLCBkYXRhLCB2YWx1ZSApIHtcblx0XHR2YXIgcHJvcCxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZSggb3duZXIgKTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwga2V5LCB2YWx1ZSBdIGFyZ3Ncblx0XHQvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBjYW1lbENhc2UoIGRhdGEgKSBdID0gdmFsdWU7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIHsgcHJvcGVydGllcyB9IF0gYXJnc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdGNhY2hlWyBjYW1lbENhc2UoIHByb3AgKSBdID0gZGF0YVsgcHJvcCBdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0cmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMuY2FjaGUoIG93bmVyICkgOlxuXG5cdFx0XHQvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpXG5cdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gJiYgb3duZXJbIHRoaXMuZXhwYW5kbyBdWyBjYW1lbENhc2UoIGtleSApIF07XG5cdH0sXG5cdGFjY2VzczogZnVuY3Rpb24oIG93bmVyLCBrZXksIHZhbHVlICkge1xuXG5cdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBObyBrZXkgd2FzIHNwZWNpZmllZFxuXHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdC8vXG5cdFx0Ly8gVGFrZSB0aGUgXCJyZWFkXCIgcGF0aCBhbmQgYWxsb3cgdGhlIGdldCBtZXRob2QgdG8gZGV0ZXJtaW5lXG5cdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBUaGUgZW50aXJlIGNhY2hlIG9iamVjdFxuXHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHQvL1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0KCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApICkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblx0XHR9XG5cblx0XHQvLyBXaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdGlmICggY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGtleSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Yga2V5c1xuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBrZXkgKSApIHtcblxuXHRcdFx0XHQvLyBJZiBrZXkgaXMgYW4gYXJyYXkgb2Yga2V5cy4uLlxuXHRcdFx0XHQvLyBXZSBhbHdheXMgc2V0IGNhbWVsQ2FzZSBrZXlzLCBzbyByZW1vdmUgdGhhdC5cblx0XHRcdFx0a2V5ID0ga2V5Lm1hcCggY2FtZWxDYXNlICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRrZXkgPSBjYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHRcdC8vIElmIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMsIHVzZSBpdC5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBjcmVhdGUgYW4gYXJyYXkgYnkgbWF0Y2hpbmcgbm9uLXdoaXRlc3BhY2Vcblx0XHRcdFx0a2V5ID0ga2V5IGluIGNhY2hlID9cblx0XHRcdFx0XHRbIGtleSBdIDpcblx0XHRcdFx0XHQoIGtleS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdICk7XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBrZXkubGVuZ3RoO1xuXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiB0aGVyZSdzIG5vIG1vcmUgZGF0YVxuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHwgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTM1IC0gNDVcblx0XHRcdC8vIFdlYmtpdCAmIEJsaW5rIHBlcmZvcm1hbmNlIHN1ZmZlcnMgd2hlbiBkZWxldGluZyBwcm9wZXJ0aWVzXG5cdFx0XHQvLyBmcm9tIERPTSBub2Rlcywgc28gc2V0IHRvIHVuZGVmaW5lZCBpbnN0ZWFkXG5cdFx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDcgKGJ1ZyByZXN0cmljdGVkKVxuXHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVsZXRlIG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHR2YXIgY2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0cmV0dXJuIGNhY2hlICE9PSB1bmRlZmluZWQgJiYgIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApO1xuXHR9XG59O1xudmFyIGRhdGFQcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFVc2VyID0gbmV3IERhdGEoKTtcblxuXG5cbi8vXHRJbXBsZW1lbnRhdGlvbiBTdW1tYXJ5XG4vL1xuLy9cdDEuIEVuZm9yY2UgQVBJIHN1cmZhY2UgYW5kIHNlbWFudGljIGNvbXBhdGliaWxpdHkgd2l0aCAxLjkueCBicmFuY2hcbi8vXHQyLiBJbXByb3ZlIHRoZSBtb2R1bGUncyBtYWludGFpbmFiaWxpdHkgYnkgcmVkdWNpbmcgdGhlIHN0b3JhZ2Vcbi8vXHRcdHBhdGhzIHRvIGEgc2luZ2xlIG1lY2hhbmlzbS5cbi8vXHQzLiBVc2UgdGhlIHNhbWUgc2luZ2xlIG1lY2hhbmlzbSB0byBzdXBwb3J0IFwicHJpdmF0ZVwiIGFuZCBcInVzZXJcIiBkYXRhLlxuLy9cdDQuIF9OZXZlcl8gZXhwb3NlIFwicHJpdmF0ZVwiIGRhdGEgdG8gdXNlciBjb2RlIChUT0RPOiBEcm9wIF9kYXRhLCBfcmVtb3ZlRGF0YSlcbi8vXHQ1LiBBdm9pZCBleHBvc2luZyBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIG9uIHVzZXIgb2JqZWN0cyAoZWcuIGV4cGFuZG8gcHJvcGVydGllcylcbi8vXHQ2LiBQcm92aWRlIGEgY2xlYXIgcGF0aCBmb3IgaW1wbGVtZW50YXRpb24gdXBncmFkZSB0byBXZWFrTWFwIGluIDIwMTRcblxudmFyIHJicmFjZSA9IC9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxcblx0cm11bHRpRGFzaCA9IC9bQS1aXS9nO1xuXG5mdW5jdGlvbiBnZXREYXRhKCBkYXRhICkge1xuXHRpZiAoIGRhdGEgPT09IFwidHJ1ZVwiICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKCBkYXRhID09PSBcImZhbHNlXCIgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0aWYgKCBkYXRhID09PSBcIm51bGxcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXG5cdGlmICggZGF0YSA9PT0gK2RhdGEgKyBcIlwiICkge1xuXHRcdHJldHVybiArZGF0YTtcblx0fVxuXG5cdGlmICggcmJyYWNlLnRlc3QoIGRhdGEgKSApIHtcblx0XHRyZXR1cm4gSlNPTi5wYXJzZSggZGF0YSApO1xuXHR9XG5cblx0cmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGRhdGFBdHRyKCBlbGVtLCBrZXksIGRhdGEgKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnlcblx0Ly8gZGF0YSBmcm9tIHRoZSBIVE1MNSBkYXRhLSogYXR0cmlidXRlXG5cdGlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0bmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKTtcblx0XHRkYXRhID0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKTtcblxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRhID0gZ2V0RGF0YSggZGF0YSApO1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFVc2VyLnNldCggZWxlbSwga2V5LCBkYXRhICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhVXNlci5oYXNEYXRhKCBlbGVtICkgfHwgZGF0YVByaXYuaGFzRGF0YSggZWxlbSApO1xuXHR9LFxuXG5cdGRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdHJldHVybiBkYXRhVXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhVXNlci5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fSxcblxuXHQvLyBUT0RPOiBOb3cgdGhhdCBhbGwgY2FsbHMgdG8gX2RhdGEgYW5kIF9yZW1vdmVEYXRhIGhhdmUgYmVlbiByZXBsYWNlZFxuXHQvLyB3aXRoIGRpcmVjdCBjYWxscyB0byBkYXRhUHJpdiBtZXRob2RzLCB0aGVzZSBjYW4gYmUgZGVwcmVjYXRlZC5cblx0X2RhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdHJldHVybiBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRkYXRhOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHR2YXIgaSwgbmFtZSwgZGF0YSxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzO1xuXG5cdFx0Ly8gR2V0cyBhbGwgdmFsdWVzXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggdGhpcy5sZW5ndGggKSB7XG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFQcml2LmdldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiApICkge1xuXHRcdFx0XHRcdGkgPSBhdHRycy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDExIG9ubHlcblx0XHRcdFx0XHRcdC8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KVxuXHRcdFx0XHRcdFx0aWYgKCBhdHRyc1sgaSBdICkge1xuXHRcdFx0XHRcdFx0XHRuYW1lID0gYXR0cnNbIGkgXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRpZiAoIG5hbWUuaW5kZXhPZiggXCJkYXRhLVwiICkgPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZSA9IGNhbWVsQ2FzZSggbmFtZS5zbGljZSggNSApICk7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YUF0dHIoIGVsZW0sIG5hbWUsIGRhdGFbIG5hbWUgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5ICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGRhdGE7XG5cblx0XHRcdC8vIFRoZSBjYWxsaW5nIGpRdWVyeSBvYmplY3QgKGVsZW1lbnQgbWF0Y2hlcykgaXMgbm90IGVtcHR5XG5cdFx0XHQvLyAoYW5kIHRoZXJlZm9yZSBoYXMgYW4gZWxlbWVudCBhcHBlYXJzIGF0IHRoaXNbIDAgXSkgYW5kIHRoZVxuXHRcdFx0Ly8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3Rcblx0XHRcdC8vIHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGZvciBlbGVtID0gdGhpc1sgMCBdIHdoaWNoIHdpbGxcblx0XHRcdC8vIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhbiBhdHRlbXB0IHRvIHJlYWQgYSBkYXRhIGNhY2hlIGlzIG1hZGUuXG5cdFx0XHRpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIFRoZSBrZXkgd2lsbCBhbHdheXMgYmUgY2FtZWxDYXNlZCBpbiBEYXRhXG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0sIGtleSApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gXCJkaXNjb3ZlclwiIHRoZSBkYXRhIGluXG5cdFx0XHRcdC8vIEhUTUw1IGN1c3RvbSBkYXRhLSogYXR0cnNcblx0XHRcdFx0ZGF0YSA9IGRhdGFBdHRyKCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFdlIGFsd2F5cyBzdG9yZSB0aGUgY2FtZWxDYXNlZCBrZXlcblx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXksIHZhbHVlICk7XG5cdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRhdGFVc2VyLnJlbW92ZSggdGhpcywga2V5ICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHF1ZXVlO1xuXG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0dHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcblx0XHRcdHF1ZXVlID0gZGF0YVByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgQXJyYXkuaXNBcnJheSggZGF0YSApICkge1xuXHRcdFx0XHRcdHF1ZXVlID0gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCB0eXBlLCBqUXVlcnkubWFrZUFycmF5KCBkYXRhICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YVByaXYuZ2V0KCBlbGVtLCBrZXkgKSB8fCBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIGtleSwge1xuXHRcdFx0ZW1wdHk6IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLmFkZCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSApXG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBzZXR0ZXIgPSAyO1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGRhdGEgPSB0eXBlO1xuXHRcdFx0dHlwZSA9IFwiZnhcIjtcblx0XHRcdHNldHRlci0tO1xuXHRcdH1cblxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucXVldWUoIHRoaXNbIDAgXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIGRhdGEgKTtcblxuXHRcdFx0XHQvLyBFbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZVxuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIHRoaXMsIHR5cGUgKTtcblxuXHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiAmJiBxdWV1ZVsgMCBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdH0sXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHR9ICk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblxuXHQvLyBHZXQgYSBwcm9taXNlIHJlc29sdmVkIHdoZW4gcXVldWVzIG9mIGEgY2VydGFpbiB0eXBlXG5cdC8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KVxuXHRwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkge1xuXHRcdHZhciB0bXAsXG5cdFx0XHRjb3VudCA9IDEsXG5cdFx0XHRkZWZlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0ZWxlbWVudHMgPSB0aGlzLFxuXHRcdFx0aSA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICEoIC0tY291bnQgKSApIHtcblx0XHRcdFx0XHRkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG9iaiA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRtcCA9IGRhdGFQcml2LmdldCggZWxlbWVudHNbIGkgXSwgdHlwZSArIFwicXVldWVIb29rc1wiICk7XG5cdFx0XHRpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7XG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdHRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzb2x2ZSgpO1xuXHRcdHJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTtcblx0fVxufSApO1xudmFyIHBudW0gPSAoIC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvICkuc291cmNlO1xuXG52YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICk7XG5cblxudmFyIGNzc0V4cGFuZCA9IFsgXCJUb3BcIiwgXCJSaWdodFwiLCBcIkJvdHRvbVwiLCBcIkxlZnRcIiBdO1xuXG52YXIgaXNIaWRkZW5XaXRoaW5UcmVlID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXG5cdFx0Ly8gaXNIaWRkZW5XaXRoaW5UcmVlIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cblx0XHQvLyBJbmxpbmUgc3R5bGUgdHJ1bXBzIGFsbFxuXHRcdHJldHVybiBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiIHx8XG5cdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiZcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBjaGVjayBjb21wdXRlZCBzdHlsZVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTQzIC0gNDVcblx0XHRcdC8vIERpc2Nvbm5lY3RlZCBlbGVtZW50cyBjYW4gaGF2ZSBjb21wdXRlZCBkaXNwbGF5OiBub25lLCBzbyBmaXJzdCBjb25maXJtIHRoYXQgZWxlbSBpc1xuXHRcdFx0Ly8gaW4gdGhlIGRvY3VtZW50LlxuXHRcdFx0alF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSAmJlxuXG5cdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIjtcblx0fTtcblxudmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdHZhciByZXQsIG5hbWUsXG5cdFx0b2xkID0ge307XG5cblx0Ly8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG5cdH1cblxuXHRyZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApO1xuXG5cdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcblxuXG5cblxuZnVuY3Rpb24gYWRqdXN0Q1NTKCBlbGVtLCBwcm9wLCB2YWx1ZVBhcnRzLCB0d2VlbiApIHtcblx0dmFyIGFkanVzdGVkLCBzY2FsZSxcblx0XHRtYXhJdGVyYXRpb25zID0gMjAsXG5cdFx0Y3VycmVudFZhbHVlID0gdHdlZW4gP1xuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5jdXIoKTtcblx0XHRcdH0gOlxuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wLCBcIlwiICk7XG5cdFx0XHR9LFxuXHRcdGluaXRpYWwgPSBjdXJyZW50VmFsdWUoKSxcblx0XHR1bml0ID0gdmFsdWVQYXJ0cyAmJiB2YWx1ZVBhcnRzWyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICksXG5cblx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdGluaXRpYWxJblVuaXQgPSAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSB8fCB1bml0ICE9PSBcInB4XCIgJiYgK2luaXRpYWwgKSAmJlxuXHRcdFx0cmNzc051bS5leGVjKCBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wICkgKTtcblxuXHRpZiAoIGluaXRpYWxJblVuaXQgJiYgaW5pdGlhbEluVW5pdFsgMyBdICE9PSB1bml0ICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTU0XG5cdFx0Ly8gSGFsdmUgdGhlIGl0ZXJhdGlvbiB0YXJnZXQgdmFsdWUgdG8gcHJldmVudCBpbnRlcmZlcmVuY2UgZnJvbSBDU1MgdXBwZXIgYm91bmRzIChnaC0yMTQ0KVxuXHRcdGluaXRpYWwgPSBpbml0aWFsIC8gMjtcblxuXHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHR1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07XG5cblx0XHQvLyBJdGVyYXRpdmVseSBhcHByb3hpbWF0ZSBmcm9tIGEgbm9uemVybyBzdGFydGluZyBwb2ludFxuXHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbCB8fCAxO1xuXG5cdFx0d2hpbGUgKCBtYXhJdGVyYXRpb25zLS0gKSB7XG5cblx0XHRcdC8vIEV2YWx1YXRlIGFuZCB1cGRhdGUgb3VyIGJlc3QgZ3Vlc3MgKGRvdWJsaW5nIGd1ZXNzZXMgdGhhdCB6ZXJvIG91dCkuXG5cdFx0XHQvLyBGaW5pc2ggaWYgdGhlIHNjYWxlIGVxdWFscyBvciBjcm9zc2VzIDEgKG1ha2luZyB0aGUgb2xkKm5ldyBwcm9kdWN0IG5vbi1wb3NpdGl2ZSkuXG5cdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7XG5cdFx0XHRpZiAoICggMSAtIHNjYWxlICkgKiAoIDEgLSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsIHx8IDAuNSApICkgPD0gMCApIHtcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDA7XG5cdFx0XHR9XG5cdFx0XHRpbml0aWFsSW5Vbml0ID0gaW5pdGlhbEluVW5pdCAvIHNjYWxlO1xuXG5cdFx0fVxuXG5cdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgKiAyO1xuXHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB3ZSB1cGRhdGUgdGhlIHR3ZWVuIHByb3BlcnRpZXMgbGF0ZXIgb25cblx0XHR2YWx1ZVBhcnRzID0gdmFsdWVQYXJ0cyB8fCBbXTtcblx0fVxuXG5cdGlmICggdmFsdWVQYXJ0cyApIHtcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWxJblVuaXQgfHwgK2luaXRpYWwgfHwgMDtcblxuXHRcdC8vIEFwcGx5IHJlbGF0aXZlIG9mZnNldCAoKz0vLT0pIGlmIHNwZWNpZmllZFxuXHRcdGFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID9cblx0XHRcdGluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6XG5cdFx0XHQrdmFsdWVQYXJ0c1sgMiBdO1xuXHRcdGlmICggdHdlZW4gKSB7XG5cdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdHR3ZWVuLnN0YXJ0ID0gaW5pdGlhbEluVW5pdDtcblx0XHRcdHR3ZWVuLmVuZCA9IGFkanVzdGVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gYWRqdXN0ZWQ7XG59XG5cblxudmFyIGRlZmF1bHREaXNwbGF5TWFwID0ge307XG5cbmZ1bmN0aW9uIGdldERlZmF1bHREaXNwbGF5KCBlbGVtICkge1xuXHR2YXIgdGVtcCxcblx0XHRkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQsXG5cdFx0bm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLFxuXHRcdGRpc3BsYXkgPSBkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXTtcblxuXHRpZiAoIGRpc3BsYXkgKSB7XG5cdFx0cmV0dXJuIGRpc3BsYXk7XG5cdH1cblxuXHR0ZW1wID0gZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVFbGVtZW50KCBub2RlTmFtZSApICk7XG5cdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCB0ZW1wLCBcImRpc3BsYXlcIiApO1xuXG5cdHRlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdGVtcCApO1xuXG5cdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0ZGlzcGxheSA9IFwiYmxvY2tcIjtcblx0fVxuXHRkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbmZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHtcblx0dmFyIGRpc3BsYXksIGVsZW0sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHQvLyBEZXRlcm1pbmUgbmV3IGRpc3BsYXkgdmFsdWUgZm9yIGVsZW1lbnRzIHRoYXQgbmVlZCB0byBjaGFuZ2Vcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG5cdFx0aWYgKCBzaG93ICkge1xuXG5cdFx0XHQvLyBTaW5jZSB3ZSBmb3JjZSB2aXNpYmlsaXR5IHVwb24gY2FzY2FkZS1oaWRkZW4gZWxlbWVudHMsIGFuIGltbWVkaWF0ZSAoYW5kIHNsb3cpXG5cdFx0XHQvLyBjaGVjayBpcyByZXF1aXJlZCBpbiB0aGlzIGZpcnN0IGxvb3AgdW5sZXNzIHdlIGhhdmUgYSBub25lbXB0eSBkaXNwbGF5IHZhbHVlIChlaXRoZXJcblx0XHRcdC8vIGlubGluZSBvciBhYm91dC10by1iZS1yZXN0b3JlZClcblx0XHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKSB8fCBudWxsO1xuXHRcdFx0XHRpZiAoICF2YWx1ZXNbIGluZGV4IF0gKSB7XG5cdFx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGdldERlZmF1bHREaXNwbGF5KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IFwibm9uZVwiO1xuXG5cdFx0XHRcdC8vIFJlbWVtYmVyIHdoYXQgd2UncmUgb3ZlcndyaXRpbmdcblx0XHRcdFx0ZGF0YVByaXYuc2V0KCBlbGVtLCBcImRpc3BsYXlcIiwgZGlzcGxheSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiB0aGUgZWxlbWVudHMgaW4gYSBzZWNvbmQgbG9vcCB0byBhdm9pZCBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoIHZhbHVlc1sgaW5kZXggXSAhPSBudWxsICkge1xuXHRcdFx0ZWxlbWVudHNbIGluZGV4IF0uc3R5bGUuZGlzcGxheSA9IHZhbHVlc1sgaW5kZXggXTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudHM7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2hvdzogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7XG5cdH0sXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcyApO1xuXHR9LFxuXHR0b2dnbGU6IGZ1bmN0aW9uKCBzdGF0ZSApIHtcblx0XHRpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRyZXR1cm4gc3RhdGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBpc0hpZGRlbldpdGhpblRyZWUoIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xudmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApO1xuXG52YXIgcnRhZ05hbWUgPSAoIC88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKykvaSApO1xuXG52YXIgcnNjcmlwdFR5cGUgPSAoIC9eJHxebW9kdWxlJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTtcblxuXG5cbi8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG52YXIgd3JhcE1hcCA9IHtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHQvLyBYSFRNTCBwYXJzZXJzIGRvIG5vdCBtYWdpY2FsbHkgaW5zZXJ0IGVsZW1lbnRzIGluIHRoZVxuXHQvLyBzYW1lIHdheSB0aGF0IHRhZyBzb3VwIHBhcnNlcnMgZG8uIFNvIHdlIGNhbm5vdCBzaG9ydGVuXG5cdC8vIHRoaXMgYnkgb21pdHRpbmcgPHRib2R5PiBvciBvdGhlciByZXF1aXJlZCBlbGVtZW50cy5cblx0dGhlYWQ6IFsgMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIiBdLFxuXHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHR0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG5cdHRkOiBbIDMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCIgXSxcblxuXHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cbn07XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFVzZSB0eXBlb2YgdG8gYXZvaWQgemVyby1hcmd1bWVudCBtZXRob2QgaW52b2NhdGlvbiBvbiBob3N0IG9iamVjdHMgKCMxNTE1MSlcblx0dmFyIHJldDtcblxuXHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApO1xuXG5cdH0gZWxzZSBpZiAoIHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0cmV0ID0gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgfHwgXCIqXCIgKTtcblxuXHR9IGVsc2Uge1xuXHRcdHJldCA9IFtdO1xuXHR9XG5cblx0aWYgKCB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgbm9kZU5hbWUoIGNvbnRleHQsIHRhZyApICkge1xuXHRcdHJldHVybiBqUXVlcnkubWVyZ2UoIFsgY29udGV4dCBdLCByZXQgKTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59XG5cblxuLy8gTWFyayBzY3JpcHRzIGFzIGhhdmluZyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkXG5mdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRkYXRhUHJpdi5zZXQoXG5cdFx0XHRlbGVtc1sgaSBdLFxuXHRcdFx0XCJnbG9iYWxFdmFsXCIsXG5cdFx0XHQhcmVmRWxlbWVudHMgfHwgZGF0YVByaXYuZ2V0KCByZWZFbGVtZW50c1sgaSBdLCBcImdsb2JhbEV2YWxcIiApXG5cdFx0KTtcblx0fVxufVxuXG5cbnZhciByaHRtbCA9IC88fCYjP1xcdys7LztcblxuZnVuY3Rpb24gYnVpbGRGcmFnbWVudCggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiwgaWdub3JlZCApIHtcblx0dmFyIGVsZW0sIHRtcCwgdGFnLCB3cmFwLCBjb250YWlucywgaixcblx0XHRmcmFnbWVudCA9IGNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdG5vZGVzID0gW10sXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1zWyBpIF07XG5cblx0XHRpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHtcblxuXHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRpZiAoIHRvVHlwZSggZWxlbSApID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0Ly8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG5cdFx0XHR9IGVsc2UgaWYgKCAhcmh0bWwudGVzdCggZWxlbSApICkge1xuXHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0Ly8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cblx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHR0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0d3JhcCA9IHdyYXBNYXBbIHRhZyBdIHx8IHdyYXBNYXAuX2RlZmF1bHQ7XG5cdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBqUXVlcnkuaHRtbFByZWZpbHRlciggZWxlbSApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdC8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudFxuXHRcdFx0XHRqID0gd3JhcFsgMCBdO1xuXHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAubGFzdENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTtcblxuXHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lclxuXHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSB0aGUgY3JlYXRlZCBub2RlcyBhcmUgb3JwaGFuZWQgKCMxMjM5Milcblx0XHRcdFx0dG1wLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdGZyYWdtZW50LnRleHRDb250ZW50ID0gXCJcIjtcblxuXHRpID0gMDtcblx0d2hpbGUgKCAoIGVsZW0gPSBub2Rlc1sgaSsrIF0gKSApIHtcblxuXHRcdC8vIFNraXAgZWxlbWVudHMgYWxyZWFkeSBpbiB0aGUgY29udGV4dCBjb2xsZWN0aW9uICh0cmFjLTQwODcpXG5cdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApID4gLTEgKSB7XG5cdFx0XHRpZiAoIGlnbm9yZWQgKSB7XG5cdFx0XHRcdGlnbm9yZWQucHVzaCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29udGFpbnMgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0dG1wID0gZ2V0QWxsKCBmcmFnbWVudC5hcHBlbmRDaGlsZCggZWxlbSApLCBcInNjcmlwdFwiICk7XG5cblx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIHRtcCApO1xuXHRcdH1cblxuXHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRpZiAoIHNjcmlwdHMgKSB7XG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdG1wWyBqKysgXSApICkge1xuXHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0c2NyaXB0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZnJhZ21lbnQ7XG59XG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdGRpdiA9IGZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKSxcblx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHlcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjEgb25seVxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBNYWtlIHN1cmUgdGV4dGFyZWEgKGFuZCBjaGVja2JveCkgZGVmYXVsdFZhbHVlIGlzIHByb3Blcmx5IGNsb25lZFxuXHRkaXYuaW5uZXJIVE1MID0gXCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCI7XG5cdHN1cHBvcnQubm9DbG9uZUNoZWNrZWQgPSAhIWRpdi5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO1xufSApKCk7XG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cblxudmFyXG5cdHJrZXlFdmVudCA9IC9ea2V5Lyxcblx0cm1vdXNlRXZlbnQgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sXG5cdHJ0eXBlbmFtZXNwYWNlID0gL14oW14uXSopKD86XFwuKC4rKXwpLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG4vLyBTZWUgIzEzMzkzIGZvciBtb3JlIGluZm9cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbmZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7XG5cdHZhciBvcmlnRm4sIHR5cGU7XG5cblx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdG9uKCBlbGVtLCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7XG5cdFx0fVxuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblxuXHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdGRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgZGF0YSwgZm4gKVxuXHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggb25lID09PSAxICkge1xuXHRcdG9yaWdGbiA9IGZuO1xuXHRcdGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdHJldHVybiBvcmlnRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH07XG5cblx0XHQvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGblxuXHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHR9XG5cdHJldHVybiBlbGVtLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0fSApO1xufVxuXG4vKlxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZXZlbnRzIC0tIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLlxuICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cbiAqL1xualF1ZXJ5LmV2ZW50ID0ge1xuXG5cdGdsb2JhbDoge30sXG5cblx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXG5cdFx0dmFyIGhhbmRsZU9iakluLCBldmVudEhhbmRsZSwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhhdCBpbnZhbGlkIHNlbGVjdG9ycyB0aHJvdyBleGNlcHRpb25zIGF0IGF0dGFjaCB0aW1lXG5cdFx0Ly8gRXZhbHVhdGUgYWdhaW5zdCBkb2N1bWVudEVsZW1lbnQgaW4gY2FzZSBlbGVtIGlzIGEgbm9uLWVsZW1lbnQgbm9kZSAoZS5nLiwgZG9jdW1lbnQpXG5cdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZG9jdW1lbnRFbGVtZW50LCBzZWxlY3RvciApO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuXHRcdGlmICggIWhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG5cdFx0fVxuXG5cdFx0Ly8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuXHRcdGlmICggISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSB7fTtcblx0XHR9XG5cdFx0aWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHQvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuXHRcdFx0XHQvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuXHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRzZWxlY3Rvcjogc2VsZWN0b3IsXG5cdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApXG5cdFx0XHR9LCBoYW5kbGVPYmpJbiApO1xuXG5cdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKCBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdICkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHxcblx0XHRcdFx0XHRzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0aWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnRcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107XG5cdFx0XHR0bXAgPSB0bXBbIDIgXSAmJlxuXHRcdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIG1hdGNoaW5nIGV2ZW50c1xuXHRcdFx0b3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaiBdO1xuXG5cdFx0XHRcdGlmICggKCBtYXBwZWRUeXBlcyB8fCBvcmlnVHlwZSA9PT0gaGFuZGxlT2JqLm9yaWdUeXBlICkgJiZcblx0XHRcdFx0XHQoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJlxuXHRcdFx0XHRcdCggIXRtcCB8fCB0bXAudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgJiZcblx0XHRcdFx0XHQoICFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gaGFuZGxlT2JqLnNlbGVjdG9yIHx8XG5cdFx0XHRcdFx0XHRzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC50ZWFyZG93bi5jYWxsKCBlbGVtLCBuYW1lc3BhY2VzLCBlbGVtRGF0YS5oYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVsZXRlIGV2ZW50c1sgdHlwZSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSBkYXRhIGFuZCB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkXG5cdFx0aWYgKCBqUXVlcnkuaXNFbXB0eU9iamVjdCggZXZlbnRzICkgKSB7XG5cdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiaGFuZGxlIGV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdGRpc3BhdGNoOiBmdW5jdGlvbiggbmF0aXZlRXZlbnQgKSB7XG5cblx0XHQvLyBNYWtlIGEgd3JpdGFibGUgalF1ZXJ5LkV2ZW50IGZyb20gdGhlIG5hdGl2ZSBldmVudCBvYmplY3Rcblx0XHR2YXIgZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBuYXRpdmVFdmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLCBoYW5kbGVyUXVldWUsXG5cdFx0XHRhcmdzID0gbmV3IEFycmF5KCBhcmd1bWVudHMubGVuZ3RoICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YVByaXYuZ2V0KCB0aGlzLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307XG5cblx0XHQvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuXHRcdGFyZ3NbIDAgXSA9IGV2ZW50O1xuXG5cdFx0Zm9yICggaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRhcmdzWyBpIF0gPSBhcmd1bWVudHNbIGkgXTtcblx0XHR9XG5cblx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cblx0XHQvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkXG5cdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGhhbmRsZXJzXG5cdFx0aGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApO1xuXG5cdFx0Ly8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXNcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBtYXRjaGVkLmVsZW07XG5cblx0XHRcdGogPSAwO1xuXHRcdFx0d2hpbGUgKCAoIGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdICkgJiZcblx0XHRcdFx0IWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQucm5hbWVzcGFjZSB8fCBldmVudC5ybmFtZXNwYWNlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblxuXHRcdFx0XHRcdGV2ZW50LmhhbmRsZU9iaiA9IGhhbmRsZU9iajtcblx0XHRcdFx0XHRldmVudC5kYXRhID0gaGFuZGxlT2JqLmRhdGE7XG5cblx0XHRcdFx0XHRyZXQgPSAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9ICkuaGFuZGxlIHx8XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlciApLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggcmV0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgaGFuZGxlT2JqLCBzZWwsIG1hdGNoZWRIYW5kbGVycywgbWF0Y2hlZFNlbGVjdG9ycyxcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0ZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsXG5cdFx0XHRjdXIgPSBldmVudC50YXJnZXQ7XG5cblx0XHQvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OVxuXHRcdFx0Ly8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKHRyYWMtMTMxODApXG5cdFx0XHRjdXIubm9kZVR5cGUgJiZcblxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTQyXG5cdFx0XHQvLyBTdXBwcmVzcyBzcGVjLXZpb2xhdGluZyBjbGlja3MgaW5kaWNhdGluZyBhIG5vbi1wcmltYXJ5IHBvaW50ZXIgYnV0dG9uICh0cmFjLTM4NjEpXG5cdFx0XHQvLyBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudC10eXBlLWNsaWNrXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHQvLyAuLi5idXQgbm90IGFycm93IGtleSBcImNsaWNrc1wiIG9mIHJhZGlvIGlucHV0cywgd2hpY2ggY2FuIGhhdmUgYGJ1dHRvbmAgLTEgKGdoLTIzNDMpXG5cdFx0XHQhKCBldmVudC50eXBlID09PSBcImNsaWNrXCIgJiYgZXZlbnQuYnV0dG9uID49IDEgKSApIHtcblxuXHRcdFx0Zm9yICggOyBjdXIgIT09IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgY2hlY2sgbm9uLWVsZW1lbnRzICgjMTMyMDgpXG5cdFx0XHRcdC8vIERvbid0IHByb2Nlc3MgY2xpY2tzIG9uIGRpc2FibGVkIGVsZW1lbnRzICgjNjkxMSwgIzgxNjUsICMxMTM4MiwgIzExNzY0KVxuXHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA9PT0gMSAmJiAhKCBldmVudC50eXBlID09PSBcImNsaWNrXCIgJiYgY3VyLmRpc2FibGVkID09PSB0cnVlICkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlZEhhbmRsZXJzID0gW107XG5cdFx0XHRcdFx0bWF0Y2hlZFNlbGVjdG9ycyA9IHt9O1xuXHRcdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGkgXTtcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMylcblx0XHRcdFx0XHRcdHNlbCA9IGhhbmRsZU9iai5zZWxlY3RvciArIFwiIFwiO1xuXG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdID0gaGFuZGxlT2JqLm5lZWRzQ29udGV4dCA/XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5KCBzZWwsIHRoaXMgKS5pbmRleCggY3VyICkgPiAtMSA6XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQoIHNlbCwgdGhpcywgbnVsbCwgWyBjdXIgXSApLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlZFNlbGVjdG9yc1sgc2VsIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG1hdGNoZWRIYW5kbGVycy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBtYXRjaGVkSGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogbWF0Y2hlZEhhbmRsZXJzIH0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIHJlbWFpbmluZyAoZGlyZWN0bHktYm91bmQpIGhhbmRsZXJzXG5cdFx0Y3VyID0gdGhpcztcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGFuZGxlclF1ZXVlO1xuXHR9LFxuXG5cdGFkZFByb3A6IGZ1bmN0aW9uKCBuYW1lLCBob29rICkge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSwgbmFtZSwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblxuXHRcdFx0Z2V0OiBpc0Z1bmN0aW9uKCBob29rICkgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGhvb2soIHRoaXMub3JpZ2luYWxFdmVudCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50WyBuYW1lIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCB0aGlzLCBuYW1lLCB7XG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cdFx0XHRcdFx0d3JpdGFibGU6IHRydWUsXG5cdFx0XHRcdFx0dmFsdWU6IHZhbHVlXG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggb3JpZ2luYWxFdmVudCApIHtcblx0XHRyZXR1cm4gb3JpZ2luYWxFdmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRvcmlnaW5hbEV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTtcblx0fSxcblxuXHRzcGVjaWFsOiB7XG5cdFx0bG9hZDoge1xuXG5cdFx0XHQvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkXG5cdFx0XHRub0J1YmJsZTogdHJ1ZVxuXHRcdH0sXG5cdFx0Zm9jdXM6IHtcblxuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXG5cdFx0XHQvLyBGb3IgY2hlY2tib3gsIGZpcmUgbmF0aXZlIGV2ZW50IHNvIGNoZWNrZWQgc3RhdGUgd2lsbCBiZSByaWdodFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcy50eXBlID09PSBcImNoZWNrYm94XCIgJiYgdGhpcy5jbGljayAmJiBub2RlTmFtZSggdGhpcywgXCJpbnB1dFwiICkgKSB7XG5cdFx0XHRcdFx0dGhpcy5jbGljaygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIGRvbid0IGZpcmUgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzXG5cdFx0XHRfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRyZXR1cm4gbm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkge1xuXG5cdC8vIFRoaXMgXCJpZlwiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0c1xuXHRpZiAoIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcblx0XHRlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApO1xuXHR9XG59O1xuXG5qUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcblxuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7XG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIEV2ZW50IG9iamVjdFxuXHRpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcblx0XHR0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG5cdFx0dGhpcy50eXBlID0gc3JjLnR5cGU7XG5cblx0XHQvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuXHRcdC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcblx0XHRcdFx0c3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seVxuXHRcdFx0XHRzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID9cblx0XHRcdHJldHVyblRydWUgOlxuXHRcdFx0cmV0dXJuRmFsc2U7XG5cblx0XHQvLyBDcmVhdGUgdGFyZ2V0IHByb3BlcnRpZXNcblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgPD02IC0gNyBvbmx5XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHR0aGlzLnRhcmdldCA9ICggc3JjLnRhcmdldCAmJiBzcmMudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkgP1xuXHRcdFx0c3JjLnRhcmdldC5wYXJlbnROb2RlIDpcblx0XHRcdHNyYy50YXJnZXQ7XG5cblx0XHR0aGlzLmN1cnJlbnRUYXJnZXQgPSBzcmMuY3VycmVudFRhcmdldDtcblx0XHR0aGlzLnJlbGF0ZWRUYXJnZXQgPSBzcmMucmVsYXRlZFRhcmdldDtcblxuXHQvLyBFdmVudCB0eXBlXG5cdH0gZWxzZSB7XG5cdFx0dGhpcy50eXBlID0gc3JjO1xuXHR9XG5cblx0Ly8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3Rcblx0aWYgKCBwcm9wcyApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0dGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuXG5cdC8vIE1hcmsgaXQgYXMgZml4ZWRcblx0dGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7XG59O1xuXG4vLyBqUXVlcnkuRXZlbnQgaXMgYmFzZWQgb24gRE9NMyBFdmVudHMgYXMgc3BlY2lmaWVkIGJ5IHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIEJpbmRpbmdcbi8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBqUXVlcnkuRXZlbnQsXG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRpc1NpbXVsYXRlZDogZmFsc2UsXG5cblx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gSW5jbHVkZXMgYWxsIGNvbW1vbiBldmVudCBwcm9wcyBpbmNsdWRpbmcgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnQgc3BlY2lmaWMgcHJvcHNcbmpRdWVyeS5lYWNoKCB7XG5cdGFsdEtleTogdHJ1ZSxcblx0YnViYmxlczogdHJ1ZSxcblx0Y2FuY2VsYWJsZTogdHJ1ZSxcblx0Y2hhbmdlZFRvdWNoZXM6IHRydWUsXG5cdGN0cmxLZXk6IHRydWUsXG5cdGRldGFpbDogdHJ1ZSxcblx0ZXZlbnRQaGFzZTogdHJ1ZSxcblx0bWV0YUtleTogdHJ1ZSxcblx0cGFnZVg6IHRydWUsXG5cdHBhZ2VZOiB0cnVlLFxuXHRzaGlmdEtleTogdHJ1ZSxcblx0dmlldzogdHJ1ZSxcblx0XCJjaGFyXCI6IHRydWUsXG5cdGNoYXJDb2RlOiB0cnVlLFxuXHRrZXk6IHRydWUsXG5cdGtleUNvZGU6IHRydWUsXG5cdGJ1dHRvbjogdHJ1ZSxcblx0YnV0dG9uczogdHJ1ZSxcblx0Y2xpZW50WDogdHJ1ZSxcblx0Y2xpZW50WTogdHJ1ZSxcblx0b2Zmc2V0WDogdHJ1ZSxcblx0b2Zmc2V0WTogdHJ1ZSxcblx0cG9pbnRlcklkOiB0cnVlLFxuXHRwb2ludGVyVHlwZTogdHJ1ZSxcblx0c2NyZWVuWDogdHJ1ZSxcblx0c2NyZWVuWTogdHJ1ZSxcblx0dGFyZ2V0VG91Y2hlczogdHJ1ZSxcblx0dG9FbGVtZW50OiB0cnVlLFxuXHR0b3VjaGVzOiB0cnVlLFxuXG5cdHdoaWNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcblxuXHRcdC8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50c1xuXHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCAmJiBya2V5RXZlbnQudGVzdCggZXZlbnQudHlwZSApICkge1xuXHRcdFx0cmV0dXJuIGV2ZW50LmNoYXJDb2RlICE9IG51bGwgPyBldmVudC5jaGFyQ29kZSA6IGV2ZW50LmtleUNvZGU7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIHJtb3VzZUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdGlmICggYnV0dG9uICYgMSApIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnV0dG9uICYgMiApIHtcblx0XHRcdFx0cmV0dXJuIDM7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnV0dG9uICYgNCApIHtcblx0XHRcdFx0cmV0dXJuIDI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC53aGljaDtcblx0fVxufSwgalF1ZXJ5LmV2ZW50LmFkZFByb3AgKTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBzbyB0aGF0IGV2ZW50IGRlbGVnYXRpb24gd29ya3MgaW4galF1ZXJ5LlxuLy8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXRcbi8vXG4vLyBTdXBwb3J0OiBTYWZhcmkgNyBvbmx5XG4vLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZTpcbi8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ3MDI1OFxuLy8gZm9yIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgYnVnIChpdCBleGlzdGVkIGluIG9sZGVyIENocm9tZSB2ZXJzaW9ucyBhcyB3ZWxsKS5cbmpRdWVyeS5lYWNoKCB7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cblx0XHRcdC8vIE5COiBObyByZWxhdGVkVGFyZ2V0IGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93XG5cdFx0XHRpZiAoICFyZWxhdGVkIHx8ICggcmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApICkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0b246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHRvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cblx0XHRcdC8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnRcblx0XHRcdGhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajtcblx0XHRcdGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG5cdFx0XHRcdGhhbmRsZU9iai5uYW1lc3BhY2UgP1xuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSArIFwiLlwiICsgaGFuZGxlT2JqLm5hbWVzcGFjZSA6XG5cdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLW9iamVjdCBbLCBzZWxlY3Rvcl0gKVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vZmYoIHR5cGUsIHNlbGVjdG9yLCB0eXBlc1sgdHlwZSBdICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMgWywgZm5dIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuXG52YXJcblxuXHQvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5cblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lc2xpbnQvZXNsaW50L2lzc3Vlcy8zMjI5XG5cdHJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLFxuXG5cdC8qIGVzbGludC1lbmFibGUgKi9cblxuXHQvLyBTdXBwb3J0OiBJRSA8PTEwIC0gMTEsIEVkZ2UgMTIgLSAxMyBvbmx5XG5cdC8vIEluIElFL0VkZ2UgdXNpbmcgcmVnZXggZ3JvdXBzIGhlcmUgY2F1c2VzIHNldmVyZSBzbG93ZG93bnMuXG5cdC8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvXG5cdHJub0lubmVyaHRtbCA9IC88c2NyaXB0fDxzdHlsZXw8bGluay9pLFxuXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJjbGVhblNjcmlwdCA9IC9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZztcblxuLy8gUHJlZmVyIGEgdGJvZHkgb3ZlciBpdHMgcGFyZW50IHRhYmxlIGZvciBjb250YWluaW5nIG5ldyByb3dzXG5mdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7XG5cdGlmICggbm9kZU5hbWUoIGVsZW0sIFwidGFibGVcIiApICYmXG5cdFx0bm9kZU5hbWUoIGNvbnRlbnQubm9kZVR5cGUgIT09IDExID8gY29udGVudCA6IGNvbnRlbnQuZmlyc3RDaGlsZCwgXCJ0clwiICkgKSB7XG5cblx0XHRyZXR1cm4galF1ZXJ5KCBlbGVtICkuY2hpbGRyZW4oIFwidGJvZHlcIiApWyAwIF0gfHwgZWxlbTtcblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG4vLyBSZXBsYWNlL3Jlc3RvcmUgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHNjcmlwdCBlbGVtZW50cyBmb3Igc2FmZSBET00gbWFuaXB1bGF0aW9uXG5mdW5jdGlvbiBkaXNhYmxlU2NyaXB0KCBlbGVtICkge1xuXHRlbGVtLnR5cGUgPSAoIGVsZW0uZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApICE9PSBudWxsICkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHRpZiAoICggZWxlbS50eXBlIHx8IFwiXCIgKS5zbGljZSggMCwgNSApID09PSBcInRydWUvXCIgKSB7XG5cdFx0ZWxlbS50eXBlID0gZWxlbS50eXBlLnNsaWNlKCA1ICk7XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIFwidHlwZVwiICk7XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YVByaXYuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0cGRhdGFPbGQgPSBkYXRhUHJpdi5hY2Nlc3MoIHNyYyApO1xuXHRcdHBkYXRhQ3VyID0gZGF0YVByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhVXNlci5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHR1ZGF0YU9sZCA9IGRhdGFVc2VyLmFjY2Vzcyggc3JjICk7XG5cdFx0dWRhdGFDdXIgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdWRhdGFPbGQgKTtcblxuXHRcdGRhdGFVc2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG4vLyBGaXggSUUgYnVncywgc2VlIHN1cHBvcnQgdGVzdHNcbmZ1bmN0aW9uIGZpeElucHV0KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHQvLyBGYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94IG9yIHJhZGlvIGJ1dHRvbi5cblx0aWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmIHJjaGVja2FibGVUeXBlLnRlc3QoIHNyYy50eXBlICkgKSB7XG5cdFx0ZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7XG5cblx0Ly8gRmFpbHMgdG8gcmV0dXJuIHRoZSBzZWxlY3RlZCBvcHRpb24gdG8gdGhlIGRlZmF1bHQgc2VsZWN0ZWQgc3RhdGUgd2hlbiBjbG9uaW5nIG9wdGlvbnNcblx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiB8fCBub2RlTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICkge1xuXHRcdGRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBkb21NYW5pcCggY29sbGVjdGlvbiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKSB7XG5cblx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApO1xuXG5cdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRpID0gMCxcblx0XHRsID0gY29sbGVjdGlvbi5sZW5ndGgsXG5cdFx0aU5vQ2xvbmUgPSBsIC0gMSxcblx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHR2YWx1ZUlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRpZiAoIHZhbHVlSXNGdW5jdGlvbiB8fFxuXHRcdFx0KCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7XG5cdFx0cmV0dXJuIGNvbGxlY3Rpb24uZWFjaCggZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdFx0dmFyIHNlbGYgPSBjb2xsZWN0aW9uLmVxKCBpbmRleCApO1xuXHRcdFx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdGFyZ3NbIDAgXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApO1xuXHRcdFx0fVxuXHRcdFx0ZG9tTWFuaXAoIHNlbGYsIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICk7XG5cdFx0fSApO1xuXHR9XG5cblx0aWYgKCBsICkge1xuXHRcdGZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7XG5cdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0aWYgKCBmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdGZyYWdtZW50ID0gZmlyc3Q7XG5cdFx0fVxuXG5cdFx0Ly8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrXG5cdFx0aWYgKCBmaXJzdCB8fCBpZ25vcmVkICkge1xuXHRcdFx0c2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuXHRcdFx0aGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXG5cdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtXG5cdFx0XHQvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcblx0XHRcdC8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuXG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdG5vZGUgPSBmcmFnbWVudDtcblxuXHRcdFx0XHRpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuXHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cblx0XHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBzY3JpcHRzLCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cblx0XHRcdFx0Ly8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRub2RlID0gc2NyaXB0c1sgaSBdO1xuXHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8IFwiXCIgKSAmJlxuXHRcdFx0XHRcdFx0IWRhdGFQcml2LmFjY2Vzcyggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBub2RlLnNyYyAmJiAoIG5vZGUudHlwZSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSAgIT09IFwibW9kdWxlXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gT3B0aW9uYWwgQUpBWCBkZXBlbmRlbmN5LCBidXQgd29uJ3QgcnVuIHNjcmlwdHMgaWYgbm90IHByZXNlbnRcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5Ll9ldmFsVXJsKCBub2RlLnNyYyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRET01FdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApLCBkb2MsIG5vZGUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY29sbGVjdGlvbjtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7XG5cdHZhciBub2RlLFxuXHRcdG5vZGVzID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSxcblx0XHRpID0gMDtcblxuXHRmb3IgKCA7ICggbm9kZSA9IG5vZGVzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0aWYgKCAha2VlcERhdGEgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggbm9kZSApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBub2RlLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggbm9kZS5vd25lckRvY3VtZW50LCBub2RlICkgKSB7XG5cdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHR9XG5cdFx0XHRub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIG5vZGUgKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRodG1sUHJlZmlsdGVyOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRyZXR1cm4gaHRtbC5yZXBsYWNlKCByeGh0bWxUYWcsIFwiPCQxPjwvJDI+XCIgKTtcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdHZhciBpLCBsLCBzcmNFbGVtZW50cywgZGVzdEVsZW1lbnRzLFxuXHRcdFx0Y2xvbmUgPSBlbGVtLmNsb25lTm9kZSggdHJ1ZSApLFxuXHRcdFx0aW5QYWdlID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEZpeCBJRSBjbG9uaW5nIGlzc3Vlc1xuXHRcdGlmICggIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQgJiYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiZcblx0XHRcdFx0IWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXG5cdFx0XHQvLyBXZSBlc2NoZXcgU2l6emxlIGhlcmUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM6IGh0dHBzOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTtcblx0XHRcdHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cblx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmaXhJbnB1dCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0aWYgKCBkYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0aWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZGVzdEVsZW1lbnRzIHx8IGdldEFsbCggY2xvbmUgKTtcblxuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIGVsZW0sIGNsb25lICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRpZiAoIGRlc3RFbGVtZW50cy5sZW5ndGggPiAwICkge1xuXHRcdFx0c2V0R2xvYmFsRXZhbCggZGVzdEVsZW1lbnRzLCAhaW5QYWdlICYmIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHRoZSBjbG9uZWQgc2V0XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9LFxuXG5cdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdHZhciBkYXRhLCBlbGVtLCB0eXBlLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPT0gdW5kZWZpbmVkOyBpKysgKSB7XG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0aWYgKCAoIGRhdGEgPSBlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBzcGVjaWFsWyB0eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgYSBzaG9ydGN1dCB0byBhdm9pZCBqUXVlcnkuZXZlbnQucmVtb3ZlJ3Mgb3ZlcmhlYWRcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSApIHtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTM1IC0gNDUrXG5cdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0ZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciApO1xuXHR9LFxuXG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fSxcblxuXHRhcHBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRwcmVwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGFmdGVyOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKCBlbGVtID0gdGhpc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uaW5uZXJIVE1MO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZWUgaWYgd2UgY2FuIHRha2UgYSBzaG9ydGN1dCBhbmQganVzdCB1c2UgaW5uZXJIVE1MXG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiZcblx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIHZhbHVlICk7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG5cdFx0XHRcdFx0XHRcdGVsZW0uaW5uZXJIVE1MID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbSA9IDA7XG5cblx0XHRcdFx0Ly8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kXG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpZ25vcmVkID0gW107XG5cblx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuXG5cdFx0XHRpZiAoIGpRdWVyeS5pbkFycmF5KCB0aGlzLCBpZ25vcmVkICkgPCAwICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIHRoaXMgKSApO1xuXHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0XHRwYXJlbnQucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb25cblx0XHR9LCBpZ25vcmVkICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHQvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcblx0fTtcbn0gKTtcbnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblxudmFyIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5LCBGaXJlZm94IDw9MzAgKCMxNTA5OCwgIzE0MTUwKVxuXHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdHZhciB2aWV3ID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG5cdFx0aWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7XG5cdFx0XHR2aWV3ID0gd2luZG93O1xuXHRcdH1cblxuXHRcdHJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcblx0fTtcblxudmFyIHJib3hTdHlsZSA9IG5ldyBSZWdFeHAoIGNzc0V4cGFuZC5qb2luKCBcInxcIiApLCBcImlcIiApO1xuXG5cblxuKCBmdW5jdGlvbigpIHtcblxuXHQvLyBFeGVjdXRpbmcgYm90aCBwaXhlbFBvc2l0aW9uICYgYm94U2l6aW5nUmVsaWFibGUgdGVzdHMgcmVxdWlyZSBvbmx5IG9uZSBsYXlvdXRcblx0Ly8gc28gdGhleSdyZSBleGVjdXRlZCBhdCB0aGUgc2FtZSB0aW1lIHRvIHNhdmUgdGhlIHNlY29uZCBjb21wdXRhdGlvbi5cblx0ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKSB7XG5cblx0XHQvLyBUaGlzIGlzIGEgc2luZ2xldG9uLCB3ZSBuZWVkIHRvIGV4ZWN1dGUgaXQgb25seSBvbmNlXG5cdFx0aWYgKCAhZGl2ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7XCIgK1xuXHRcdFx0XCJtYXJnaW4tdG9wOjFweDtwYWRkaW5nOjA7Ym9yZGVyOjBcIjtcblx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9XG5cdFx0XHRcInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDtcIiArXG5cdFx0XHRcIm1hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7XCIgK1xuXHRcdFx0XCJ3aWR0aDo2MCU7dG9wOjElXCI7XG5cdFx0ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0XHR2YXIgZGl2U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2ICk7XG5cdFx0cGl4ZWxQb3NpdGlvblZhbCA9IGRpdlN0eWxlLnRvcCAhPT0gXCIxJVwiO1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seSwgRmlyZWZveCA8PTMgLSA0NFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IHJvdW5kUGl4ZWxNZWFzdXJlcyggZGl2U3R5bGUubWFyZ2luTGVmdCApID09PSAxMjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIFNhZmFyaSA8PTkuMSAtIDEwLjEsIGlPUyA8PTcuMCAtIDkuM1xuXHRcdC8vIFNvbWUgc3R5bGVzIGNvbWUgYmFjayB3aXRoIHBlcmNlbnRhZ2UgdmFsdWVzLCBldmVuIHRob3VnaCB0aGV5IHNob3VsZG4ndFxuXHRcdGRpdi5zdHlsZS5yaWdodCA9IFwiNjAlXCI7XG5cdFx0cGl4ZWxCb3hTdHlsZXNWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLnJpZ2h0ICkgPT09IDM2O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHlcblx0XHQvLyBEZXRlY3QgbWlzcmVwb3J0aW5nIG9mIGNvbnRlbnQgZGltZW5zaW9ucyBmb3IgYm94LXNpemluZzpib3JkZXItYm94IGVsZW1lbnRzXG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLndpZHRoICkgPT09IDM2O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSBvbmx5XG5cdFx0Ly8gRGV0ZWN0IG92ZXJmbG93OnNjcm9sbCBzY3Jld2luZXNzIChnaC0zNjk5KVxuXHRcdGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRzY3JvbGxib3hTaXplVmFsID0gZGl2Lm9mZnNldFdpZHRoID09PSAzNiB8fCBcImFic29sdXRlXCI7XG5cblx0XHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0Ly8gTnVsbGlmeSB0aGUgZGl2IHNvIGl0IHdvdWxkbid0IGJlIHN0b3JlZCBpbiB0aGUgbWVtb3J5IGFuZFxuXHRcdC8vIGl0IHdpbGwgYWxzbyBiZSBhIHNpZ24gdGhhdCBjaGVja3MgYWxyZWFkeSBwZXJmb3JtZWRcblx0XHRkaXYgPSBudWxsO1xuXHR9XG5cblx0ZnVuY3Rpb24gcm91bmRQaXhlbE1lYXN1cmVzKCBtZWFzdXJlICkge1xuXHRcdHJldHVybiBNYXRoLnJvdW5kKCBwYXJzZUZsb2F0KCBtZWFzdXJlICkgKTtcblx0fVxuXG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCwgc2Nyb2xsYm94U2l6ZVZhbCwgcGl4ZWxCb3hTdHlsZXNWYWwsXG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0VmFsLFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0Ly8gRmluaXNoIGVhcmx5IGluIGxpbWl0ZWQgKG5vbi1icm93c2VyKSBlbnZpcm9ubWVudHNcblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0alF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwge1xuXHRcdGJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0fSxcblx0XHRwaXhlbEJveFN0eWxlczogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsQm94U3R5bGVzVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsUG9zaXRpb25WYWw7XG5cdFx0fSxcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiByZWxpYWJsZU1hcmdpbkxlZnRWYWw7XG5cdFx0fSxcblx0XHRzY3JvbGxib3hTaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gc2Nyb2xsYm94U2l6ZVZhbDtcblx0XHR9XG5cdH0gKTtcbn0gKSgpO1xuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDUxK1xuXHRcdC8vIFJldHJpZXZpbmcgc3R5bGUgYmVmb3JlIGNvbXB1dGVkIHNvbWVob3dcblx0XHQvLyBmaXhlcyBhbiBpc3N1ZSB3aXRoIGdldHRpbmcgd3JvbmcgdmFsdWVzXG5cdFx0Ly8gb24gZGV0YWNoZWQgZWxlbWVudHNcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0Y29tcHV0ZWQgPSBjb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKTtcblxuXHQvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG5lZWRlZCBmb3I6XG5cdC8vICAgLmNzcygnZmlsdGVyJykgKElFIDkgb25seSwgIzEyNTM3KVxuXHQvLyAgIC5jc3MoJy0tY3VzdG9tUHJvcGVydHkpICgjMzE0NClcblx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRyZXQgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXTtcblxuXHRcdGlmICggcmV0ID09PSBcIlwiICYmICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIEFuZHJvaWQgQnJvd3NlciByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIHNvbWUgdmFsdWVzLFxuXHRcdC8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMuXG5cdFx0Ly8gVGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOlxuXHRcdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5waXhlbEJveFN0eWxlcygpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiByYm94U3R5bGUudGVzdCggbmFtZSApICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR3aWR0aCA9IHN0eWxlLndpZHRoO1xuXHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdHJldCA9IGNvbXB1dGVkLndpZHRoO1xuXG5cdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRzdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID9cblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cblx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0cmV0dXJuIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXG5cdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmdldDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdHJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG52YXJcblxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlXG5cdC8vIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRyY3VzdG9tUHJvcCA9IC9eLS0vLFxuXHRjc3NTaG93ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSxcblx0Y3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuXHRcdGxldHRlclNwYWNpbmc6IFwiMFwiLFxuXHRcdGZvbnRXZWlnaHQ6IFwiNDAwXCJcblx0fSxcblxuXHRjc3NQcmVmaXhlcyA9IFsgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJtc1wiIF0sXG5cdGVtcHR5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkuc3R5bGU7XG5cbi8vIFJldHVybiBhIGNzcyBwcm9wZXJ0eSBtYXBwZWQgdG8gYSBwb3RlbnRpYWxseSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHlcbmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cblx0Ly8gQ2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuXHR2YXIgY2FwTmFtZSA9IG5hbWVbIDAgXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSggMSApLFxuXHRcdGkgPSBjc3NQcmVmaXhlcy5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0bmFtZSA9IGNzc1ByZWZpeGVzWyBpIF0gKyBjYXBOYW1lO1xuXHRcdGlmICggbmFtZSBpbiBlbXB0eVN0eWxlICkge1xuXHRcdFx0cmV0dXJuIG5hbWU7XG5cdFx0fVxuXHR9XG59XG5cbi8vIFJldHVybiBhIHByb3BlcnR5IG1hcHBlZCBhbG9uZyB3aGF0IGpRdWVyeS5jc3NQcm9wcyBzdWdnZXN0cyBvciB0b1xuLy8gYSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHkuXG5mdW5jdGlvbiBmaW5hbFByb3BOYW1lKCBuYW1lICkge1xuXHR2YXIgcmV0ID0galF1ZXJ5LmNzc1Byb3BzWyBuYW1lIF07XG5cdGlmICggIXJldCApIHtcblx0XHRyZXQgPSBqUXVlcnkuY3NzUHJvcHNbIG5hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBuYW1lICkgfHwgbmFtZTtcblx0fVxuXHRyZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICkge1xuXG5cdC8vIEFueSByZWxhdGl2ZSAoKy8tKSB2YWx1ZXMgaGF2ZSBhbHJlYWR5IGJlZW5cblx0Ly8gbm9ybWFsaXplZCBhdCB0aGlzIHBvaW50XG5cdHZhciBtYXRjaGVzID0gcmNzc051bS5leGVjKCB2YWx1ZSApO1xuXHRyZXR1cm4gbWF0Y2hlcyA/XG5cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAyIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAzIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBib3hNb2RlbEFkanVzdG1lbnQoIGVsZW0sIGRpbWVuc2lvbiwgYm94LCBpc0JvcmRlckJveCwgc3R5bGVzLCBjb21wdXRlZFZhbCApIHtcblx0dmFyIGkgPSBkaW1lbnNpb24gPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXHRcdGV4dHJhID0gMCxcblx0XHRkZWx0YSA9IDA7XG5cblx0Ly8gQWRqdXN0bWVudCBtYXkgbm90IGJlIG5lY2Vzc2FyeVxuXHRpZiAoIGJveCA9PT0gKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApICkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0Zm9yICggOyBpIDwgNDsgaSArPSAyICkge1xuXG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luXG5cdFx0aWYgKCBib3ggPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRkZWx0YSArPSBqUXVlcnkuY3NzKCBlbGVtLCBib3ggKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgd2UgZ2V0IGhlcmUgd2l0aCBhIGNvbnRlbnQtYm94LCB3ZSdyZSBzZWVraW5nIFwicGFkZGluZ1wiIG9yIFwiYm9yZGVyXCIgb3IgXCJtYXJnaW5cIlxuXHRcdGlmICggIWlzQm9yZGVyQm94ICkge1xuXG5cdFx0XHQvLyBBZGQgcGFkZGluZ1xuXHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEZvciBcImJvcmRlclwiIG9yIFwibWFyZ2luXCIsIGFkZCBib3JkZXJcblx0XHRcdGlmICggYm94ICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblxuXHRcdFx0Ly8gQnV0IHN0aWxsIGtlZXAgdHJhY2sgb2YgaXQgb3RoZXJ3aXNlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRleHRyYSArPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSWYgd2UgZ2V0IGhlcmUgd2l0aCBhIGJvcmRlci1ib3ggKGNvbnRlbnQgKyBwYWRkaW5nICsgYm9yZGVyKSwgd2UncmUgc2Vla2luZyBcImNvbnRlbnRcIiBvclxuXHRcdC8vIFwicGFkZGluZ1wiIG9yIFwibWFyZ2luXCJcblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBGb3IgXCJjb250ZW50XCIsIHN1YnRyYWN0IHBhZGRpbmdcblx0XHRcdGlmICggYm94ID09PSBcImNvbnRlbnRcIiApIHtcblx0XHRcdFx0ZGVsdGEgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZvciBcImNvbnRlbnRcIiBvciBcInBhZGRpbmdcIiwgc3VidHJhY3QgYm9yZGVyXG5cdFx0XHRpZiAoIGJveCAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdFx0ZGVsdGEgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBY2NvdW50IGZvciBwb3NpdGl2ZSBjb250ZW50LWJveCBzY3JvbGwgZ3V0dGVyIHdoZW4gcmVxdWVzdGVkIGJ5IHByb3ZpZGluZyBjb21wdXRlZFZhbFxuXHRpZiAoICFpc0JvcmRlckJveCAmJiBjb21wdXRlZFZhbCA+PSAwICkge1xuXG5cdFx0Ly8gb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGlzIGEgcm91bmRlZCBzdW0gb2YgY29udGVudCwgcGFkZGluZywgc2Nyb2xsIGd1dHRlciwgYW5kIGJvcmRlclxuXHRcdC8vIEFzc3VtaW5nIGludGVnZXIgc2Nyb2xsIGd1dHRlciwgc3VidHJhY3QgdGhlIHJlc3QgYW5kIHJvdW5kIGRvd25cblx0XHRkZWx0YSArPSBNYXRoLm1heCggMCwgTWF0aC5jZWlsKFxuXHRcdFx0ZWxlbVsgXCJvZmZzZXRcIiArIGRpbWVuc2lvblsgMCBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoIDEgKSBdIC1cblx0XHRcdGNvbXB1dGVkVmFsIC1cblx0XHRcdGRlbHRhIC1cblx0XHRcdGV4dHJhIC1cblx0XHRcdDAuNVxuXHRcdCkgKTtcblx0fVxuXG5cdHJldHVybiBkZWx0YTtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApIHtcblxuXHQvLyBTdGFydCB3aXRoIGNvbXB1dGVkIHN0eWxlXG5cdHZhciBzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIGRpbWVuc2lvbiwgc3R5bGVzICksXG5cdFx0aXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSBpc0JvcmRlckJveDtcblxuXHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NTRcblx0Ly8gUmV0dXJuIGEgY29uZm91bmRpbmcgbm9uLXBpeGVsIHZhbHVlIG9yIGZlaWduIGlnbm9yYW5jZSwgYXMgYXBwcm9wcmlhdGUuXG5cdGlmICggcm51bW5vbnB4LnRlc3QoIHZhbCApICkge1xuXHRcdGlmICggIWV4dHJhICkge1xuXHRcdFx0cmV0dXJuIHZhbDtcblx0XHR9XG5cdFx0dmFsID0gXCJhdXRvXCI7XG5cdH1cblxuXHQvLyBDaGVjayBmb3Igc3R5bGUgaW4gY2FzZSBhIGJyb3dzZXIgd2hpY2ggcmV0dXJucyB1bnJlbGlhYmxlIHZhbHVlc1xuXHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdHZhbHVlSXNCb3JkZXJCb3ggPSB2YWx1ZUlzQm9yZGVyQm94ICYmXG5cdFx0KCBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgdmFsID09PSBlbGVtLnN0eWxlWyBkaW1lbnNpb24gXSApO1xuXG5cdC8vIEZhbGwgYmFjayB0byBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgd2hlbiB2YWx1ZSBpcyBcImF1dG9cIlxuXHQvLyBUaGlzIGhhcHBlbnMgZm9yIGlubGluZSBlbGVtZW50cyB3aXRoIG5vIGV4cGxpY2l0IHNldHRpbmcgKGdoLTM1NzEpXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjEgLSA0LjMgb25seVxuXHQvLyBBbHNvIHVzZSBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgZm9yIG1pc3JlcG9ydGVkIGlubGluZSBkaW1lbnNpb25zIChnaC0zNjAyKVxuXHRpZiAoIHZhbCA9PT0gXCJhdXRvXCIgfHxcblx0XHQhcGFyc2VGbG9hdCggdmFsICkgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJpbmxpbmVcIiApIHtcblxuXHRcdHZhbCA9IGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXTtcblxuXHRcdC8vIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBwcm92aWRlIGJvcmRlci1ib3ggdmFsdWVzXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IHRydWU7XG5cdH1cblxuXHQvLyBOb3JtYWxpemUgXCJcIiBhbmQgYXV0b1xuXHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXG5cdC8vIEFkanVzdCBmb3IgdGhlIGVsZW1lbnQncyBib3ggbW9kZWxcblx0cmV0dXJuICggdmFsICtcblx0XHRib3hNb2RlbEFkanVzdG1lbnQoXG5cdFx0XHRlbGVtLFxuXHRcdFx0ZGltZW5zaW9uLFxuXHRcdFx0ZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApLFxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdHN0eWxlcyxcblxuXHRcdFx0Ly8gUHJvdmlkZSB0aGUgY3VycmVudCBjb21wdXRlZCBzaXplIHRvIHJlcXVlc3Qgc2Nyb2xsIGd1dHRlciBjYWxjdWxhdGlvbiAoZ2gtMzU4OSlcblx0XHRcdHZhbFxuXHRcdClcblx0KSArIFwicHhcIjtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0Y3NzSG9va3M6IHtcblx0XHRvcGFjaXR5OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0dmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0Y3NzTnVtYmVyOiB7XG5cdFx0XCJhbmltYXRpb25JdGVyYXRpb25Db3VudFwiOiB0cnVlLFxuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHt9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGNhbWVsQ2FzZSggbmFtZSApLFxuXHRcdFx0aXNDdXN0b21Qcm9wID0gcmN1c3RvbVByb3AudGVzdCggbmFtZSApLFxuXHRcdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lLiBXZSBkb24ndFxuXHRcdC8vIHdhbnQgdG8gcXVlcnkgdGhlIHZhbHVlIGlmIGl0IGlzIGEgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuXHRcdC8vIHNpbmNlIHRoZXkgYXJlIHVzZXItZGVmaW5lZC5cblx0XHRpZiAoICFpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRuYW1lID0gZmluYWxQcm9wTmFtZSggb3JpZ05hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBHZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uLCB0aGVuIHVucHJlZml4ZWQgdmVyc2lvblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgc2V0dGluZyBhIHZhbHVlXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdFx0Ly8gQ29udmVydCBcIis9XCIgb3IgXCItPVwiIHRvIHJlbGF0aXZlIG51bWJlcnMgKCM3MzQ1KVxuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICYmICggcmV0ID0gcmNzc051bS5leGVjKCB2YWx1ZSApICkgJiYgcmV0WyAxIF0gKSB7XG5cdFx0XHRcdHZhbHVlID0gYWRqdXN0Q1NTKCBlbGVtLCBuYW1lLCByZXQgKTtcblxuXHRcdFx0XHQvLyBGaXhlcyBidWcgIzkyMzdcblx0XHRcdFx0dHlwZSA9IFwibnVtYmVyXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IG51bGwgYW5kIE5hTiB2YWx1ZXMgYXJlbid0IHNldCAoIzcxMTYpXG5cdFx0XHRpZiAoIHZhbHVlID09IG51bGwgfHwgdmFsdWUgIT09IHZhbHVlICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKVxuXHRcdFx0aWYgKCB0eXBlID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWx1ZSArPSByZXQgJiYgcmV0WyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdID8gXCJcIiA6IFwicHhcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gXCJcIiAmJiBuYW1lLmluZGV4T2YoIFwiYmFja2dyb3VuZFwiICkgPT09IDAgKSB7XG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHxcblx0XHRcdFx0KCB2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0XHRcdHN0eWxlLnNldFByb3BlcnR5KCBuYW1lLCB2YWx1ZSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdGNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7XG5cdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0gY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRpc0N1c3RvbVByb3AgPSByY3VzdG9tUHJvcC50ZXN0KCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUuIFdlIGRvbid0XG5cdFx0Ly8gd2FudCB0byBtb2RpZnkgdGhlIHZhbHVlIGlmIGl0IGlzIGEgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuXHRcdC8vIHNpbmNlIHRoZXkgYXJlIHVzZXItZGVmaW5lZC5cblx0XHRpZiAoICFpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRuYW1lID0gZmluYWxQcm9wTmFtZSggb3JpZ05hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBUcnkgcHJlZml4ZWQgbmFtZSBmb2xsb3dlZCBieSB0aGUgdW5wcmVmaXhlZCBuYW1lXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbCA9IGhvb2tzLmdldCggZWxlbSwgdHJ1ZSwgZXh0cmEgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdFxuXHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgXCJub3JtYWxcIiB0byBjb21wdXRlZCB2YWx1ZVxuXHRcdGlmICggdmFsID09PSBcIm5vcm1hbFwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkge1xuXHRcdFx0dmFsID0gY3NzTm9ybWFsVHJhbnNmb3JtWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBudW1lcmljIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljXG5cdFx0aWYgKCBleHRyYSA9PT0gXCJcIiB8fCBleHRyYSApIHtcblx0XHRcdG51bSA9IHBhcnNlRmxvYXQoIHZhbCApO1xuXHRcdFx0cmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGlzRmluaXRlKCBudW0gKSA/IG51bSB8fCAwIDogdmFsO1xuXHRcdH1cblxuXHRcdHJldHVybiB2YWw7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBkaW1lbnNpb24gKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgZGltZW5zaW9uIF0gPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQsIGV4dHJhICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHQvLyBDZXJ0YWluIGVsZW1lbnRzIGNhbiBoYXZlIGRpbWVuc2lvbiBpbmZvIGlmIHdlIGludmlzaWJseSBzaG93IHRoZW1cblx0XHRcdFx0Ly8gYnV0IGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXRcblx0XHRcdFx0cmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICkgJiZcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4K1xuXHRcdFx0XHRcdC8vIFRhYmxlIGNvbHVtbnMgaW4gU2FmYXJpIGhhdmUgbm9uLXplcm8gb2Zmc2V0V2lkdGggJiB6ZXJvXG5cdFx0XHRcdFx0Ly8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggdW5sZXNzIGRpc3BsYXkgaXMgY2hhbmdlZC5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHRcdFx0XHQvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlXG5cdFx0XHRcdFx0Ly8gaW4gSUUgdGhyb3dzIGFuIGVycm9yLlxuXHRcdFx0XHRcdCggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggfHwgIWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKSA/XG5cdFx0XHRcdFx0XHRzd2FwKCBlbGVtLCBjc3NTaG93LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKTtcblx0XHRcdFx0XHRcdH0gKSA6XG5cdFx0XHRcdFx0XHRnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBkaW1lbnNpb24sIGV4dHJhICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcblx0XHRcdHZhciBtYXRjaGVzLFxuXHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRcdFx0aXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdFx0XHRzdWJ0cmFjdCA9IGV4dHJhICYmIGJveE1vZGVsQWRqdXN0bWVudChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdGRpbWVuc2lvbixcblx0XHRcdFx0XHRleHRyYSxcblx0XHRcdFx0XHRpc0JvcmRlckJveCxcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KTtcblxuXHRcdFx0Ly8gQWNjb3VudCBmb3IgdW5yZWxpYWJsZSBib3JkZXItYm94IGRpbWVuc2lvbnMgYnkgY29tcGFyaW5nIG9mZnNldCogdG8gY29tcHV0ZWQgYW5kXG5cdFx0XHQvLyBmYWtpbmcgYSBjb250ZW50LWJveCB0byBnZXQgYm9yZGVyIGFuZCBwYWRkaW5nIChnaC0zNjk5KVxuXHRcdFx0aWYgKCBpc0JvcmRlckJveCAmJiBzdXBwb3J0LnNjcm9sbGJveFNpemUoKSA9PT0gc3R5bGVzLnBvc2l0aW9uICkge1xuXHRcdFx0XHRzdWJ0cmFjdCAtPSBNYXRoLmNlaWwoXG5cdFx0XHRcdFx0ZWxlbVsgXCJvZmZzZXRcIiArIGRpbWVuc2lvblsgMCBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoIDEgKSBdIC1cblx0XHRcdFx0XHRwYXJzZUZsb2F0KCBzdHlsZXNbIGRpbWVuc2lvbiBdICkgLVxuXHRcdFx0XHRcdGJveE1vZGVsQWRqdXN0bWVudCggZWxlbSwgZGltZW5zaW9uLCBcImJvcmRlclwiLCBmYWxzZSwgc3R5bGVzICkgLVxuXHRcdFx0XHRcdDAuNVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IHRvIHBpeGVscyBpZiB2YWx1ZSBhZGp1c3RtZW50IGlzIG5lZWRlZFxuXHRcdFx0aWYgKCBzdWJ0cmFjdCAmJiAoIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJlxuXHRcdFx0XHQoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSAhPT0gXCJweFwiICkge1xuXG5cdFx0XHRcdGVsZW0uc3R5bGVbIGRpbWVuc2lvbiBdID0gdmFsdWU7XG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5LmNzcyggZWxlbSwgZGltZW5zaW9uICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICk7XG5cdFx0fVxuXHR9O1xufSApO1xuXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsXG5cdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0cmV0dXJuICggcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiApICkgfHxcblx0XHRcdFx0ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cblx0XHRcdFx0XHRzd2FwKCBlbGVtLCB7IG1hcmdpbkxlZnQ6IDAgfSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuXHRcdFx0XHRcdH0gKVxuXHRcdFx0XHQpICsgXCJweFwiO1xuXHRcdH1cblx0fVxuKTtcblxuLy8gVGhlc2UgaG9va3MgYXJlIHVzZWQgYnkgYW5pbWF0ZSB0byBleHBhbmQgcHJvcGVydGllc1xualF1ZXJ5LmVhY2goIHtcblx0bWFyZ2luOiBcIlwiLFxuXHRwYWRkaW5nOiBcIlwiLFxuXHRib3JkZXI6IFwiV2lkdGhcIlxufSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0ge1xuXHRcdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRleHBhbmRlZCA9IHt9LFxuXG5cdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlLnNwbGl0KCBcIiBcIiApIDogWyB2YWx1ZSBdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdGV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID1cblx0XHRcdFx0XHRwYXJ0c1sgaSBdIHx8IHBhcnRzWyBpIC0gMiBdIHx8IHBhcnRzWyAwIF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBleHBhbmRlZDtcblx0XHR9XG5cdH07XG5cblx0aWYgKCBwcmVmaXggIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXS5zZXQgPSBzZXRQb3NpdGl2ZU51bWJlcjtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGNzczogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdHZhciBzdHlsZXMsIGxlbixcblx0XHRcdFx0bWFwID0ge30sXG5cdFx0XHRcdGkgPSAwO1xuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9XG59ICk7XG5cblxuZnVuY3Rpb24gVHdlZW4oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICkge1xuXHRyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApO1xufVxualF1ZXJ5LlR3ZWVuID0gVHdlZW47XG5cblR3ZWVuLnByb3RvdHlwZSA9IHtcblx0Y29uc3RydWN0b3I6IFR3ZWVuLFxuXHRpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7XG5cdFx0dGhpcy5lbGVtID0gZWxlbTtcblx0XHR0aGlzLnByb3AgPSBwcm9wO1xuXHRcdHRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpO1xuXHRcdHRoaXMuZW5kID0gZW5kO1xuXHRcdHRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdH0sXG5cdGN1cjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdHJldHVybiBob29rcyAmJiBob29rcy5nZXQgP1xuXHRcdFx0aG9va3MuZ2V0KCB0aGlzICkgOlxuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApO1xuXHR9LFxuXHRydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdHZhciBlYXNlZCxcblx0XHRcdGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0oXG5cdFx0XHRcdHBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvblxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG5cdFx0fVxuXHRcdHRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBob29rcy5zZXQgKSB7XG5cdFx0XHRob29rcy5zZXQoIHRoaXMgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxuVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlO1xuXG5Ud2Vlbi5wcm9wSG9va3MgPSB7XG5cdF9kZWZhdWx0OiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0XHQvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LFxuXHRcdFx0Ly8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy5cblx0XHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fFxuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJiB0d2Vlbi5lbGVtLnN0eWxlWyB0d2Vlbi5wcm9wIF0gPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5XG5cdFx0XHQvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzLlxuXHRcdFx0Ly8gU2ltcGxlIHZhbHVlcyBzdWNoIGFzIFwiMTBweFwiIGFyZSBwYXJzZWQgdG8gRmxvYXQ7XG5cdFx0XHQvLyBjb21wbGV4IHZhbHVlcyBzdWNoIGFzIFwicm90YXRlKDFyYWQpXCIgYXJlIHJldHVybmVkIGFzLWlzLlxuXHRcdFx0cmVzdWx0ID0galF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgXCJcIiApO1xuXG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cblx0XHRcdC8vIFVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0LlxuXHRcdFx0Ly8gVXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlLlxuXHRcdFx0Ly8gVXNlIC5zdHlsZSBpZiBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZS5cblx0XHRcdGlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHtcblx0XHRcdFx0alF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSggdHdlZW4gKTtcblx0XHRcdH0gZWxzZSBpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0KCB0d2Vlbi5lbGVtLnN0eWxlWyBqUXVlcnkuY3NzUHJvcHNbIHR3ZWVuLnByb3AgXSBdICE9IG51bGwgfHxcblx0XHRcdFx0XHRqUXVlcnkuY3NzSG9va3NbIHR3ZWVuLnByb3AgXSApICkge1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9LFxuXHRfZGVmYXVsdDogXCJzd2luZ1wiXG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBjb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgaW5Qcm9ncmVzcyxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJydW4gPSAvcXVldWVIb29rcyQvO1xuXG5mdW5jdGlvbiBzY2hlZHVsZSgpIHtcblx0aWYgKCBpblByb2dyZXNzICkge1xuXHRcdGlmICggZG9jdW1lbnQuaGlkZGVuID09PSBmYWxzZSAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lICkge1xuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSggc2NoZWR1bGUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2luZG93LnNldFRpbWVvdXQoIHNjaGVkdWxlLCBqUXVlcnkuZnguaW50ZXJ2YWwgKTtcblx0XHR9XG5cblx0XHRqUXVlcnkuZngudGljaygpO1xuXHR9XG59XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0ZnhOb3cgPSB1bmRlZmluZWQ7XG5cdH0gKTtcblx0cmV0dXJuICggZnhOb3cgPSBEYXRlLm5vdygpICk7XG59XG5cbi8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uXG5mdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuXHR2YXIgd2hpY2gsXG5cdFx0aSA9IDAsXG5cdFx0YXR0cnMgPSB7IGhlaWdodDogdHlwZSB9O1xuXG5cdC8vIElmIHdlIGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMSB0byBkbyBhbGwgY3NzRXhwYW5kIHZhbHVlcyxcblx0Ly8gb3RoZXJ3aXNlIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHRcblx0aW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7XG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggQW5pbWF0aW9uLnR3ZWVuZXJzWyBcIipcIiBdICksXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7XG5cblx0XHRcdC8vIFdlJ3JlIGRvbmUgd2l0aCB0aGlzIHByb3BlcnR5XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoIGVsZW0sIHByb3BzLCBvcHRzICkge1xuXHR2YXIgcHJvcCwgdmFsdWUsIHRvZ2dsZSwgaG9va3MsIG9sZGZpcmUsIHByb3BUd2VlbiwgcmVzdG9yZURpc3BsYXksIGRpc3BsYXksXG5cdFx0aXNCb3ggPSBcIndpZHRoXCIgaW4gcHJvcHMgfHwgXCJoZWlnaHRcIiBpbiBwcm9wcyxcblx0XHRhbmltID0gdGhpcyxcblx0XHRvcmlnID0ge30sXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlLFxuXHRcdGhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICksXG5cdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZnhzaG93XCIgKTtcblxuXHQvLyBRdWV1ZS1za2lwcGluZyBhbmltYXRpb25zIGhpamFjayB0aGUgZnggaG9va3Ncblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aG9va3MudW5xdWV1ZWQtLTtcblx0XHRcdFx0aWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCBcImZ4XCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gRGV0ZWN0IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdGZvciAoIHByb3AgaW4gcHJvcHMgKSB7XG5cdFx0dmFsdWUgPSBwcm9wc1sgcHJvcCBdO1xuXHRcdGlmICggcmZ4dHlwZXMudGVzdCggdmFsdWUgKSApIHtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgcHJvcCBdO1xuXHRcdFx0dG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSBcInRvZ2dsZVwiO1xuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyBcImhpZGVcIiA6IFwic2hvd1wiICkgKSB7XG5cblx0XHRcdFx0Ly8gUHJldGVuZCB0byBiZSBoaWRkZW4gaWYgdGhpcyBpcyBhIFwic2hvd1wiIGFuZFxuXHRcdFx0XHQvLyB0aGVyZSBpcyBzdGlsbCBkYXRhIGZyb20gYSBzdG9wcGVkIHNob3cvaGlkZVxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSBcInNob3dcIiAmJiBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gdHJ1ZTtcblxuXHRcdFx0XHQvLyBJZ25vcmUgYWxsIG90aGVyIG5vLW9wIHNob3cvaGlkZSBkYXRhXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQmFpbCBvdXQgaWYgdGhpcyBpcyBhIG5vLW9wIGxpa2UgLmhpZGUoKS5oaWRlKClcblx0cHJvcFR3ZWVuID0gIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wcyApO1xuXHRpZiAoICFwcm9wVHdlZW4gJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBSZXN0cmljdCBcIm92ZXJmbG93XCIgYW5kIFwiZGlzcGxheVwiIHN0eWxlcyBkdXJpbmcgYm94IGFuaW1hdGlvbnNcblx0aWYgKCBpc0JveCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEsIEVkZ2UgMTIgLSAxNVxuXHRcdC8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUUgZG9lcyBub3QgaW5mZXIgdGhlIHNob3J0aGFuZFxuXHRcdC8vIGZyb20gaWRlbnRpY2FsbHktdmFsdWVkIG92ZXJmbG93WCBhbmQgb3ZlcmZsb3dZIGFuZCBFZGdlIGp1c3QgbWlycm9yc1xuXHRcdC8vIHRoZSBvdmVyZmxvd1ggdmFsdWUgdGhlcmUuXG5cdFx0b3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07XG5cblx0XHQvLyBJZGVudGlmeSBhIGRpc3BsYXkgdHlwZSwgcHJlZmVycmluZyBvbGQgc2hvdy9oaWRlIGRhdGEgb3ZlciB0aGUgQ1NTIGNhc2NhZGVcblx0XHRyZXN0b3JlRGlzcGxheSA9IGRhdGFTaG93ICYmIGRhdGFTaG93LmRpc3BsYXk7XG5cdFx0aWYgKCByZXN0b3JlRGlzcGxheSA9PSBudWxsICkge1xuXHRcdFx0cmVzdG9yZURpc3BsYXkgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0fVxuXHRcdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ICkge1xuXHRcdFx0XHRkaXNwbGF5ID0gcmVzdG9yZURpc3BsYXk7XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEdldCBub25lbXB0eSB2YWx1ZShzKSBieSB0ZW1wb3JhcmlseSBmb3JjaW5nIHZpc2liaWxpdHlcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdLCB0cnVlICk7XG5cdFx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5IHx8IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQW5pbWF0ZSBpbmxpbmUgZWxlbWVudHMgYXMgaW5saW5lLWJsb2NrXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcImlubGluZVwiIHx8IGRpc3BsYXkgPT09IFwiaW5saW5lLWJsb2NrXCIgJiYgcmVzdG9yZURpc3BsYXkgIT0gbnVsbCApIHtcblx0XHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXG5cdFx0XHRcdC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWUgYXQgdGhlIGVuZCBvZiBwdXJlIHNob3cvaGlkZSBhbmltYXRpb25zXG5cdFx0XHRcdGlmICggIXByb3BUd2VlbiApIHtcblx0XHRcdFx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c3R5bGUuZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRkaXNwbGF5ID0gc3R5bGUuZGlzcGxheTtcblx0XHRcdFx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgPyBcIlwiIDogZGlzcGxheTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBvcHRzLm92ZXJmbG93ICkge1xuXHRcdHN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WCA9IG9wdHMub3ZlcmZsb3dbIDEgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBJbXBsZW1lbnQgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0cHJvcFR3ZWVuID0gZmFsc2U7XG5cdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblxuXHRcdC8vIEdlbmVyYWwgc2hvdy9oaWRlIHNldHVwIGZvciB0aGlzIGVsZW1lbnQgYW5pbWF0aW9uXG5cdFx0aWYgKCAhcHJvcFR3ZWVuICkge1xuXHRcdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdFx0aWYgKCBcImhpZGRlblwiIGluIGRhdGFTaG93ICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IGRhdGFTaG93LmhpZGRlbjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHsgZGlzcGxheTogcmVzdG9yZURpc3BsYXkgfSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdG9yZSBoaWRkZW4vdmlzaWJsZSBmb3IgdG9nZ2xlIHNvIGAuc3RvcCgpLnRvZ2dsZSgpYCBcInJldmVyc2VzXCJcblx0XHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0XHRkYXRhU2hvdy5oaWRkZW4gPSAhaGlkZGVuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTaG93IGVsZW1lbnRzIGJlZm9yZSBhbmltYXRpbmcgdGhlbVxuXHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSwgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1sb29wLWZ1bmMgKi9cblxuXHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0LyogZXNsaW50LWVuYWJsZSBuby1sb29wLWZ1bmMgKi9cblxuXHRcdFx0XHQvLyBUaGUgZmluYWwgc3RlcCBvZiBhIFwiaGlkZVwiIGFuaW1hdGlvbiBpcyBhY3R1YWxseSBoaWRpbmcgdGhlIGVsZW1lbnRcblx0XHRcdFx0aWYgKCAhaGlkZGVuICkge1xuXHRcdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgXCJmeHNob3dcIiApO1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBvcmlnWyBwcm9wIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdC8vIFBlci1wcm9wZXJ0eSBzZXR1cFxuXHRcdHByb3BUd2VlbiA9IGNyZWF0ZVR3ZWVuKCBoaWRkZW4gPyBkYXRhU2hvd1sgcHJvcCBdIDogMCwgcHJvcCwgYW5pbSApO1xuXHRcdGlmICggISggcHJvcCBpbiBkYXRhU2hvdyApICkge1xuXHRcdFx0ZGF0YVNob3dbIHByb3AgXSA9IHByb3BUd2Vlbi5zdGFydDtcblx0XHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0XHRwcm9wVHdlZW4uZW5kID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRwcm9wVHdlZW4uc3RhcnQgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBwcm9wRmlsdGVyKCBwcm9wcywgc3BlY2lhbEVhc2luZyApIHtcblx0dmFyIGluZGV4LCBuYW1lLCBlYXNpbmcsIHZhbHVlLCBob29rcztcblxuXHQvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3Ncblx0Zm9yICggaW5kZXggaW4gcHJvcHMgKSB7XG5cdFx0bmFtZSA9IGNhbWVsQ2FzZSggaW5kZXggKTtcblx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzLmxlbmd0aCxcblx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9ICksXG5cdFx0dGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2YXIgY3VycmVudFRpbWUgPSBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0XHRyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjMgb25seVxuXHRcdFx0XHQvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpXG5cdFx0XHRcdHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcblx0XHRcdFx0cGVyY2VudCA9IDEgLSB0ZW1wLFxuXHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXG5cdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggcGVyY2VudCApO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0gKTtcblxuXHRcdFx0Ly8gSWYgdGhlcmUncyBtb3JlIHRvIGRvLCB5aWVsZFxuXHRcdFx0aWYgKCBwZXJjZW50IDwgMSAmJiBsZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiByZW1haW5pbmc7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoaXMgd2FzIGFuIGVtcHR5IGFuaW1hdGlvbiwgc3ludGhlc2l6ZSBhIGZpbmFsIHByb2dyZXNzIG5vdGlmaWNhdGlvblxuXHRcdFx0aWYgKCAhbGVuZ3RoICkge1xuXHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlc29sdmUgdGhlIGFuaW1hdGlvbiBhbmQgcmVwb3J0IGl0cyBjb25jbHVzaW9uXG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSgge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdHByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLFxuXHRcdFx0b3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwge1xuXHRcdFx0XHRzcGVjaWFsRWFzaW5nOiB7fSxcblx0XHRcdFx0ZWFzaW5nOiBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0XG5cdFx0XHR9LCBvcHRpb25zICksXG5cdFx0XHRvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG5cdFx0XHRvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsXG5cdFx0XHRzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRcdHR3ZWVuczogW10sXG5cdFx0XHRjcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLFxuXHRcdFx0XHRcdFx0YW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApO1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0sXG5cdFx0XHRzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gMCxcblxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZTsgb3RoZXJ3aXNlLCByZWplY3Rcblx0XHRcdFx0aWYgKCBnb3RvRW5kICkge1xuXHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9ICksXG5cdFx0cHJvcHMgPSBhbmltYXRpb24ucHJvcHM7XG5cblx0cHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7XG5cdFx0aWYgKCByZXN1bHQgKSB7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24oIHJlc3VsdC5zdG9wICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggYW5pbWF0aW9uLmVsZW0sIGFuaW1hdGlvbi5vcHRzLnF1ZXVlICkuc3RvcCA9XG5cdFx0XHRcdFx0cmVzdWx0LnN0b3AuYmluZCggcmVzdWx0ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0fVxuXG5cdGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cblx0aWYgKCBpc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0Ly8gQXR0YWNoIGNhbGxiYWNrcyBmcm9tIG9wdGlvbnNcblx0YW5pbWF0aW9uXG5cdFx0LnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG5cdFx0LmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlIClcblx0XHQuZmFpbCggYW5pbWF0aW9uLm9wdHMuZmFpbCApXG5cdFx0LmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9IClcblx0KTtcblxuXHRyZXR1cm4gYW5pbWF0aW9uO1xufVxuXG5qUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7XG5cblx0dHdlZW5lcnM6IHtcblx0XHRcIipcIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApO1xuXHRcdFx0YWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH0sXG5cblx0dHdlZW5lcjogZnVuY3Rpb24oIHByb3BzLCBjYWxsYmFjayApIHtcblx0XHRpZiAoIGlzRnVuY3Rpb24oIHByb3BzICkgKSB7XG5cdFx0XHRjYWxsYmFjayA9IHByb3BzO1xuXHRcdFx0cHJvcHMgPSBbIFwiKlwiIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByb3BzID0gcHJvcHMubWF0Y2goIHJub3RodG1sd2hpdGUgKTtcblx0XHR9XG5cblx0XHR2YXIgcHJvcCxcblx0XHRcdGluZGV4ID0gMCxcblx0XHRcdGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRwcm9wID0gcHJvcHNbIGluZGV4IF07XG5cdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH0sXG5cblx0cHJlZmlsdGVyczogWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cblx0cHJlZmlsdGVyOiBmdW5jdGlvbiggY2FsbGJhY2ssIHByZXBlbmQgKSB7XG5cdFx0aWYgKCBwcmVwZW5kICkge1xuXHRcdFx0QW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0QW5pbWF0aW9uLnByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxualF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkge1xuXHR2YXIgb3B0ID0gc3BlZWQgJiYgdHlwZW9mIHNwZWVkID09PSBcIm9iamVjdFwiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7XG5cdFx0Y29tcGxldGU6IGZuIHx8ICFmbiAmJiBlYXNpbmcgfHxcblx0XHRcdGlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG5cdH07XG5cblx0Ly8gR28gdG8gdGhlIGVuZCBzdGF0ZSBpZiBmeCBhcmUgb2ZmXG5cdGlmICggalF1ZXJ5LmZ4Lm9mZiApIHtcblx0XHRvcHQuZHVyYXRpb24gPSAwO1xuXG5cdH0gZWxzZSB7XG5cdFx0aWYgKCB0eXBlb2Ygb3B0LmR1cmF0aW9uICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0aWYgKCBvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyApIHtcblx0XHRcdFx0b3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7XG5cdFx0XHRvcHQub2xkLmNhbGwoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIG9wdC5xdWV1ZSApIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIG9wdDtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbldpdGhpblRyZWUgKS5jc3MoIFwib3BhY2l0eVwiLCAwICkuc2hvdygpXG5cblx0XHRcdC8vIEFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZFxuXHRcdFx0LmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fSxcblx0YW5pbWF0ZTogZnVuY3Rpb24oIHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG5cdFx0XHRvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksXG5cdFx0XHRkb0FuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0XG5cdFx0XHRcdHZhciBhbmltID0gQW5pbWF0aW9uKCB0aGlzLCBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcCApLCBvcHRhbGwgKTtcblxuXHRcdFx0XHQvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHlcblx0XHRcdFx0aWYgKCBlbXB0eSB8fCBkYXRhUHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGRlcXVldWUgPSB0cnVlLFxuXHRcdFx0XHRpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGRhdGEgPSBkYXRhUHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmXG5cdFx0XHRcdFx0KCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7XG5cblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cdGZpbmlzaDogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0aWYgKCB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaW5kZXgsXG5cdFx0XHRcdGRhdGEgPSBkYXRhUHJpdi5nZXQoIHRoaXMgKSxcblx0XHRcdFx0cXVldWUgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZVwiIF0sXG5cdFx0XHRcdGhvb2tzID0gZGF0YVsgdHlwZSArIFwicXVldWVIb29rc1wiIF0sXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDtcblxuXHRcdFx0Ly8gRW5hYmxlIGZpbmlzaGluZyBmbGFnIG9uIHByaXZhdGUgZGF0YVxuXHRcdFx0ZGF0YS5maW5pc2ggPSB0cnVlO1xuXG5cdFx0XHQvLyBFbXB0eSB0aGUgcXVldWUgZmlyc3Rcblx0XHRcdGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgW10gKTtcblxuXHRcdFx0aWYgKCBob29rcyAmJiBob29rcy5zdG9wICkge1xuXHRcdFx0XHRob29rcy5zdG9wLmNhbGwoIHRoaXMsIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFjdGl2ZSBhbmltYXRpb25zLCBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkge1xuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHtcblx0XHRcdFx0XHRxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFR1cm4gb2ZmIGZpbmlzaGluZyBmbGFnXG5cdFx0XHRkZWxldGUgZGF0YS5maW5pc2g7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwidG9nZ2xlXCIsIFwic2hvd1wiLCBcImhpZGVcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBzcGVlZCA9PSBudWxsIHx8IHR5cGVvZiBzcGVlZCA9PT0gXCJib29sZWFuXCIgP1xuXHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdHRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxuLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9uc1xualF1ZXJ5LmVhY2goIHtcblx0c2xpZGVEb3duOiBnZW5GeCggXCJzaG93XCIgKSxcblx0c2xpZGVVcDogZ2VuRngoIFwiaGlkZVwiICksXG5cdHNsaWRlVG9nZ2xlOiBnZW5GeCggXCJ0b2dnbGVcIiApLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxualF1ZXJ5LnRpbWVycyA9IFtdO1xualF1ZXJ5LmZ4LnRpY2sgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRpbWVyLFxuXHRcdGkgPSAwLFxuXHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnM7XG5cblx0ZnhOb3cgPSBEYXRlLm5vdygpO1xuXG5cdGZvciAoIDsgaSA8IHRpbWVycy5sZW5ndGg7IGkrKyApIHtcblx0XHR0aW1lciA9IHRpbWVyc1sgaSBdO1xuXG5cdFx0Ly8gUnVuIHRoZSB0aW1lciBhbmQgc2FmZWx5IHJlbW92ZSBpdCB3aGVuIGRvbmUgKGFsbG93aW5nIGZvciBleHRlcm5hbCByZW1vdmFsKVxuXHRcdGlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkge1xuXHRcdFx0dGltZXJzLnNwbGljZSggaS0tLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCAhdGltZXJzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZnguc3RvcCgpO1xuXHR9XG5cdGZ4Tm93ID0gdW5kZWZpbmVkO1xufTtcblxualF1ZXJ5LmZ4LnRpbWVyID0gZnVuY3Rpb24oIHRpbWVyICkge1xuXHRqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7XG5cdGpRdWVyeS5meC5zdGFydCgpO1xufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5qUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHtcblx0aWYgKCBpblByb2dyZXNzICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGluUHJvZ3Jlc3MgPSB0cnVlO1xuXHRzY2hlZHVsZSgpO1xufTtcblxualF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHtcblx0aW5Qcm9ncmVzcyA9IG51bGw7XG59O1xuXG5qUXVlcnkuZnguc3BlZWRzID0ge1xuXHRzbG93OiA2MDAsXG5cdGZhc3Q6IDIwMCxcblxuXHQvLyBEZWZhdWx0IHNwZWVkXG5cdF9kZWZhdWx0OiA0MDBcbn07XG5cblxuLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLlxuLy8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTAwMzI0MDE0NzQ3L2h0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cbmpRdWVyeS5mbi5kZWxheSA9IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkge1xuXHR0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lO1xuXHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcblx0XHR2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApO1xuXHRcdH07XG5cdH0gKTtcbn07XG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4zIG9ubHlcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgYSBjaGVja2JveCBzaG91bGQgYmUgXCJvblwiXG5cdHN1cHBvcnQuY2hlY2tPbiA9IGlucHV0LnZhbHVlICE9PSBcIlwiO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59ICkoKTtcblxuXG52YXIgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggdGhpcywgbmFtZSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgcmV0LCBob29rcyxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrIHRvIHByb3Agd2hlbiBhdHRyaWJ1dGVzIGFyZSBub3Qgc3VwcG9ydGVkXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXR0cmlidXRlIGhvb2tzIGFyZSBkZXRlcm1pbmVkIGJ5IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdGhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0KCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSA/IGJvb2xIb29rIDogdW5kZWZpbmVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0Ly8gTm9uLWV4aXN0ZW50IGF0dHJpYnV0ZXMgcmV0dXJuIG51bGwsIHdlIG5vcm1hbGl6ZSB0byB1bmRlZmluZWRcblx0XHRyZXR1cm4gcmV0ID09IG51bGwgPyB1bmRlZmluZWQgOiByZXQ7XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0bm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgdmFsdWUgKTtcblx0XHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsXG5cdFx0XHRpID0gMCxcblxuXHRcdFx0Ly8gQXR0cmlidXRlIG5hbWVzIGNhbiBjb250YWluIG5vbi1IVE1MIHdoaXRlc3BhY2UgY2hhcmFjdGVyc1xuXHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApO1xuXG5cdFx0aWYgKCBhdHRyTmFtZXMgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdHdoaWxlICggKCBuYW1lID0gYXR0ck5hbWVzWyBpKysgXSApICkge1xuXHRcdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggbmFtZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2Vcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lICk7XG5cdFx0fVxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG59O1xuXG5qUXVlcnkuZWFjaCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goIC9cXHcrL2cgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjtcblxuXHRhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHJldCwgaGFuZGxlLFxuXHRcdFx0bG93ZXJjYXNlTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHRcdGlmICggIWlzWE1MICkge1xuXG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdGxvd2VyY2FzZU5hbWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gaGFuZGxlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xufSApO1xuXG5cblxuXG52YXIgcmZvY3VzYWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJjbGlja2FibGUgPSAvXig/OmF8YXJlYSkkL2k7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRlbGV0ZSB0aGlzWyBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUgXTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1bIG5hbWUgXTtcblx0fSxcblxuXHRwcm9wSG9va3M6IHtcblx0XHR0YWJJbmRleDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdFx0XHRcdC8vIGVsZW0udGFiSW5kZXggZG9lc24ndCBhbHdheXMgcmV0dXJuIHRoZVxuXHRcdFx0XHQvLyBjb3JyZWN0IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXRcblx0XHRcdFx0Ly8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTQxMTE2MjMzMzQ3L2h0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvXG5cdFx0XHRcdC8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpXG5cdFx0XHRcdHZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidGFiaW5kZXhcIiApO1xuXG5cdFx0XHRcdGlmICggdGFiaW5kZXggKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KCB0YWJpbmRleCwgMTAgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fFxuXHRcdFx0XHRcdHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmXG5cdFx0XHRcdFx0ZWxlbS5ocmVmXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRwcm9wRml4OiB7XG5cdFx0XCJmb3JcIjogXCJodG1sRm9yXCIsXG5cdFx0XCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG5cdH1cbn0gKTtcblxuLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG4vLyBBY2Nlc3NpbmcgdGhlIHNlbGVjdGVkSW5kZXggcHJvcGVydHlcbi8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWRcbi8vIG9uIHRoZSBvcHRpb25cbi8vIFRoZSBnZXR0ZXIgZW5zdXJlcyBhIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkXG4vLyB3aGVuIGluIGFuIG9wdGdyb3VwXG4vLyBlc2xpbnQgcnVsZSBcIm5vLXVudXNlZC1leHByZXNzaW9uc1wiIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvZGVcbi8vIHNpbmNlIGl0IGNvbnNpZGVycyBzdWNoIGFjY2Vzc2lvbnMgbm9vcFxuaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcblx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHQvKiBlc2xpbnQgbm8tdW51c2VkLWV4cHJlc3Npb25zOiBcIm9mZlwiICovXG5cblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoIHBhcmVudCAmJiBwYXJlbnQucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogXCJvZmZcIiAqL1xuXG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdHBhcmVudC5zZWxlY3RlZEluZGV4O1xuXG5cdFx0XHRcdGlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxualF1ZXJ5LmVhY2goIFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59ICk7XG5cblxuXG5cblx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2UgYWNjb3JkaW5nIHRvIEhUTUwgc3BlY1xuXHQvLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLWFzY2lpLXdoaXRlc3BhY2Vcblx0ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSggdmFsdWUgKSB7XG5cdFx0dmFyIHRva2VucyA9IHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cdFx0cmV0dXJuIHRva2Vucy5qb2luKCBcIiBcIiApO1xuXHR9XG5cblxuZnVuY3Rpb24gZ2V0Q2xhc3MoIGVsZW0gKSB7XG5cdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggXCJjbGFzc1wiICkgfHwgXCJcIjtcbn1cblxuZnVuY3Rpb24gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICkge1xuXHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXHR9XG5cdHJldHVybiBbXTtcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRjbGFzc2VzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIGNsYXNzZXMubGVuZ3RoICkge1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGN1clZhbHVlICkgKyBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciArPSBjbGF6eiArIFwiIFwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB0aGlzLmF0dHIoIFwiY2xhc3NcIiwgXCJcIiApO1xuXHRcdH1cblxuXHRcdGNsYXNzZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdGlmICggY2xhc3Nlcy5sZW5ndGggKSB7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTtcblxuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBjdXJWYWx1ZSApICsgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzXG5cdFx0XHRcdFx0XHR3aGlsZSAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgPSBjdXIucmVwbGFjZSggXCIgXCIgKyBjbGF6eiArIFwiIFwiLCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0dmFyIHR5cGUgPSB0eXBlb2YgdmFsdWUsXG5cdFx0XHRpc1ZhbGlkVmFsdWUgPSB0eXBlID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgaXNWYWxpZFZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKFxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIHRoaXMsIGksIGdldENsYXNzKCB0aGlzICksIHN0YXRlVmFsICksXG5cdFx0XHRcdFx0c3RhdGVWYWxcblx0XHRcdFx0KTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjbGFzc05hbWUsIGksIHNlbGYsIGNsYXNzTmFtZXM7XG5cblx0XHRcdGlmICggaXNWYWxpZFZhbHVlICkge1xuXG5cdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICk7XG5cdFx0XHRcdGNsYXNzTmFtZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdFx0XHR3aGlsZSAoICggY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0gKSApIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRcdGlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG5cdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRjbGFzc05hbWUgPSBnZXRDbGFzcyggdGhpcyApO1xuXHRcdFx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdC8vIFN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0aWYgKCB0aGlzLnNldEF0dHJpYnV0ZSApIHtcblx0XHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRcdFx0XHRcIlwiIDpcblx0XHRcdFx0XHRcdGRhdGFQcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRoYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBjbGFzc05hbWUsIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIjtcblx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0KCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGdldENsYXNzKCBlbGVtICkgKSArIFwiIFwiICkuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIHJyZXR1cm4gPSAvXFxyL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIHZhbHVlSXNGdW5jdGlvbixcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF07XG5cblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgZWxlbS50eXBlIF0gfHxcblx0XHRcdFx0XHRqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiZcblx0XHRcdFx0XHRcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIFwidmFsdWVcIiApICkgIT09IHVuZGVmaW5lZFxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzXG5cdFx0XHRcdGlmICggdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0LnJlcGxhY2UoIHJyZXR1cm4sIFwiXCIgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRyZXR1cm4gcmV0ID09IG51bGwgPyBcIlwiIDogcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFsdWVJc0Z1bmN0aW9uID0gaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdmFsdWVJc0Z1bmN0aW9uICkge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZS5jYWxsKCB0aGlzLCBpLCBqUXVlcnkoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFsID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHZhbCA9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBBcnJheS5pc0FycmF5KCB2YWwgKSApIHtcblx0XHRcdFx0dmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyB0aGlzLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHQvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZ1xuXHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCBcInZhbHVlXCIgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHR0aGlzLnZhbHVlID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdHZhbEhvb2tzOiB7XG5cdFx0b3B0aW9uOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExIG9ubHlcblx0XHRcdFx0XHQvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpXG5cdFx0XHRcdFx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2Vcblx0XHRcdFx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNzdHJpcC1hbmQtY29sbGFwc2Utd2hpdGVzcGFjZVxuXHRcdFx0XHRcdHN0cmlwQW5kQ29sbGFwc2UoIGpRdWVyeS50ZXh0KCBlbGVtICkgKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNlbGVjdDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHZhbHVlLCBvcHRpb24sIGksXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHRpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCxcblx0XHRcdFx0XHRvbmUgPSBlbGVtLnR5cGUgPT09IFwic2VsZWN0LW9uZVwiLFxuXHRcdFx0XHRcdHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcblx0XHRcdFx0XHRtYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHRpZiAoIGluZGV4IDwgMCApIHtcblx0XHRcdFx0XHRpID0gbWF4O1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aSA9IG9uZSA/IGluZGV4IDogMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIHNlbGVjdGVkIG9wdGlvbnNcblx0XHRcdFx0Zm9yICggOyBpIDwgbWF4OyBpKysgKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHQvLyBJRTgtOSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcblx0XHRcdFx0XHRpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcblxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCFvcHRpb24uZGlzYWJsZWQgJiZcblx0XHRcdFx0XHRcdFx0KCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHxcblx0XHRcdFx0XHRcdFx0XHQhbm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cblx0XHRcdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXG5cdFx0XHRcdFx0aWYgKCBvcHRpb24uc2VsZWN0ZWQgPVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPiAtMVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uU2V0ID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldFxuXHRcdFx0XHRpZiAoICFvcHRpb25TZXQgKSB7XG5cdFx0XHRcdFx0ZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXJcbmpRdWVyeS5lYWNoKCBbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdGlmICggIXN1cHBvcnQuY2hlY2tPbiApIHtcblx0XHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXG5cbnN1cHBvcnQuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXG5cbnZhciByZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0c3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiggZSApIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9O1xuXG5qUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZXZlbnQsIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcblxuXHRcdHZhciBpLCBjdXIsIHRtcCwgYnViYmxlVHlwZSwgb250eXBlLCBoYW5kbGUsIHNwZWNpYWwsIGxhc3RFbGVtZW50LFxuXHRcdFx0ZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG5cdFx0XHR0eXBlID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcInR5cGVcIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LFxuXHRcdFx0bmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KCBcIi5cIiApIDogW107XG5cblx0XHRjdXIgPSBsYXN0RWxlbWVudCA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoIFwiLlwiICkgPiAtMSApIHtcblxuXHRcdFx0Ly8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKVxuXHRcdFx0bmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoIFwiLlwiICk7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZiggXCI6XCIgKSA8IDAgJiYgXCJvblwiICsgdHlwZTtcblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZ1xuXHRcdGV2ZW50ID0gZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0ZXZlbnQgOlxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSBcIm9iamVjdFwiICYmIGV2ZW50ICk7XG5cblx0XHQvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpXG5cdFx0ZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG5cdFx0ZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApO1xuXHRcdGV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgP1xuXHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICkgOlxuXHRcdFx0bnVsbDtcblxuXHRcdC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuXHRcdGV2ZW50LnJlc3VsdCA9IHVuZGVmaW5lZDtcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBlbGVtO1xuXHRcdH1cblxuXHRcdC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3Rcblx0XHRkYXRhID0gZGF0YSA9PSBudWxsID9cblx0XHRcdFsgZXZlbnQgXSA6XG5cdFx0XHRqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTtcblxuXHRcdC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcblx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcblx0XHQvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KVxuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhc3BlY2lhbC5ub0J1YmJsZSAmJiAhaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIGN1ciA9IGV2ZW50UGF0aFsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGxhc3RFbGVtZW50ID0gY3VyO1xuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YVByaXYuZ2V0KCBjdXIsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiZcblx0XHRcdFx0ZGF0YVByaXYuZ2V0KCBjdXIsIFwiaGFuZGxlXCIgKTtcblx0XHRcdGlmICggaGFuZGxlICkge1xuXHRcdFx0XHRoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOYXRpdmUgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG5cdFx0XHRpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCAhc3BlY2lhbC5fZGVmYXVsdCB8fFxuXHRcdFx0XHRzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UgKSAmJlxuXHRcdFx0XHRhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cblx0XHRcdFx0Ly8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBldmVudC5cblx0XHRcdFx0Ly8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKVxuXHRcdFx0XHRpZiAoIG9udHlwZSAmJiBpc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cblx0XHRcdFx0XHRpZiAoIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRcdFx0XHRsYXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBzdG9wUHJvcGFnYXRpb25DYWxsYmFjayApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW1bIHR5cGUgXSgpO1xuXG5cdFx0XHRcdFx0aWYgKCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0XHRcdFx0bGFzdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IHRtcDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZVxuXHQvLyBVc2VkIG9ubHkgZm9yIGBmb2N1cyhpbiB8IG91dClgIGV2ZW50c1xuXHRzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkge1xuXHRcdHZhciBlID0galF1ZXJ5LmV4dGVuZChcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoKSxcblx0XHRcdGV2ZW50LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRpc1NpbXVsYXRlZDogdHJ1ZVxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHR9XG5cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcblx0XHR9ICk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXTtcblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxuXG4vLyBTdXBwb3J0OiBGaXJlZm94IDw9NDRcbi8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHNcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3XG4vL1xuLy8gU3VwcG9ydDogQ2hyb21lIDw9NDggLSA0OSwgU2FmYXJpIDw9OS4wIC0gOS4xXG4vLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cyxcbi8vIHdoaWNoIGlzIHNwZWMgdmlvbGF0aW9uIC0gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudHMtZm9jdXNldmVudC1ldmVudC1vcmRlclxuLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTdcbmlmICggIXN1cHBvcnQuZm9jdXNpbiApIHtcblx0alF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblxuXHRcdC8vIEF0dGFjaCBhIHNpbmdsZSBjYXB0dXJpbmcgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQgd2hpbGUgc29tZW9uZSB3YW50cyBmb2N1c2luL2ZvY3Vzb3V0XG5cdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApICk7XG5cdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG5cdFx0XHR9LFxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgYXR0YWNoZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0gKTtcbn1cbnZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblxudmFyIG5vbmNlID0gRGF0ZS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICggL1xcPy8gKTtcblxuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sO1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHlcblx0Ly8gSUUgdGhyb3dzIG9uIHBhcnNlRnJvbVN0cmluZyB3aXRoIGludmFsaWQgaW5wdXQuXG5cdHRyeSB7XG5cdFx0eG1sID0gKCBuZXcgd2luZG93LkRPTVBhcnNlcigpICkucGFyc2VGcm9tU3RyaW5nKCBkYXRhLCBcInRleHQveG1sXCIgKTtcblx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0eG1sID0gdW5kZWZpbmVkO1xuXHR9XG5cblx0aWYgKCAheG1sIHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJwYXJzZXJlcnJvclwiICkubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5lcnJvciggXCJJbnZhbGlkIFhNTDogXCIgKyBkYXRhICk7XG5cdH1cblx0cmV0dXJuIHhtbDtcbn07XG5cblxudmFyXG5cdHJicmFja2V0ID0gL1xcW1xcXSQvLFxuXHRyQ1JMRiA9IC9cXHI/XFxuL2csXG5cdHJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxcblx0cnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO1xuXG5mdW5jdGlvbiBidWlsZFBhcmFtcyggcHJlZml4LCBvYmosIHRyYWRpdGlvbmFsLCBhZGQgKSB7XG5cdHZhciBuYW1lO1xuXG5cdGlmICggQXJyYXkuaXNBcnJheSggb2JqICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cblx0XHRcdFx0Ly8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLlxuXHRcdFx0XHRhZGQoIHByZWZpeCwgdiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LlxuXHRcdFx0XHRidWlsZFBhcmFtcyhcblx0XHRcdFx0XHRwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPSBudWxsID8gaSA6IFwiXCIgKSArIFwiXVwiLFxuXHRcdFx0XHRcdHYsXG5cdFx0XHRcdFx0dHJhZGl0aW9uYWwsXG5cdFx0XHRcdFx0YWRkXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdH0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiB0b1R5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIG9iamVjdCBpdGVtLlxuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgbmFtZSArIFwiXVwiLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHNjYWxhciBpdGVtLlxuXHRcdGFkZCggcHJlZml4LCBvYmogKTtcblx0fVxufVxuXG4vLyBTZXJpYWxpemUgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cyBvciBhIHNldCBvZlxuLy8ga2V5L3ZhbHVlcyBpbnRvIGEgcXVlcnkgc3RyaW5nXG5qUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7XG5cdHZhciBwcmVmaXgsXG5cdFx0cyA9IFtdLFxuXHRcdGFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlT3JGdW5jdGlvbiApIHtcblxuXHRcdFx0Ly8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCB1c2UgaXRzIHJldHVybiB2YWx1ZVxuXHRcdFx0dmFyIHZhbHVlID0gaXNGdW5jdGlvbiggdmFsdWVPckZ1bmN0aW9uICkgP1xuXHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb24oKSA6XG5cdFx0XHRcdHZhbHVlT3JGdW5jdGlvbjtcblxuXHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSApO1xuXHRcdH07XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBBcnJheS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0alF1ZXJ5LmVhY2goIGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0YWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTtcblx0XHR9ICk7XG5cblx0fSBlbHNlIHtcblxuXHRcdC8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlIFwib2xkXCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyXG5cdFx0Ly8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuXG5cdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb25cblx0cmV0dXJuIHMuam9pbiggXCImXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2VyaWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTtcblx0fSxcblx0c2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIENhbiBhZGQgcHJvcEhvb2sgZm9yIFwiZWxlbWVudHNcIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHNcblx0XHRcdHZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCBcImVsZW1lbnRzXCIgKTtcblx0XHRcdHJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzO1xuXHRcdH0gKVxuXHRcdC5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9IClcblx0XHQubWFwKCBmdW5jdGlvbiggaSwgZWxlbSApIHtcblx0XHRcdHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsICkgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdH0gKS5nZXQoKTtcblx0fVxufSApO1xuXG5cbnZhclxuXHRyMjAgPSAvJTIwL2csXG5cdHJoYXNoID0gLyMuKiQvLFxuXHRyYW50aUNhY2hlID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cblx0Ly8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uXG5cdHJsb2NhbFByb3RvY29sID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sXG5cdHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuXHRycHJvdG9jb2wgPSAvXlxcL1xcLy8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBBbmNob3IgdGFnIGZvciBwYXJzaW5nIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b3JpZ2luQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblx0b3JpZ2luQW5jaG9yLmhyZWYgPSBsb2NhdGlvbi5ocmVmO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggZnVuYyApICkge1xuXG5cdFx0XHQvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG5cdFx0XHR3aGlsZSAoICggZGF0YVR5cGUgPSBkYXRhVHlwZXNbIGkrKyBdICkgKSB7XG5cblx0XHRcdFx0Ly8gUHJlcGVuZCBpZiByZXF1ZXN0ZWRcblx0XHRcdFx0aWYgKCBkYXRhVHlwZVsgMCBdID09PSBcIitcIiApIHtcblx0XHRcdFx0XHRkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgXCIqXCI7XG5cdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG4vLyBCYXNlIGluc3BlY3Rpb24gZnVuY3Rpb24gZm9yIHByZWZpbHRlcnMgYW5kIHRyYW5zcG9ydHNcbmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7XG5cblx0dmFyIGluc3BlY3RlZCA9IHt9LFxuXHRcdHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXG5cdGZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkge1xuXHRcdHZhciBzZWxlY3RlZDtcblx0XHRpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlO1xuXHRcdGpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7XG5cdFx0XHR2YXIgZGF0YVR5cGVPclRyYW5zcG9ydCA9IHByZWZpbHRlck9yRmFjdG9yeSggb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApO1xuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVPclRyYW5zcG9ydCA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQhc2Vla2luZ1RyYW5zcG9ydCAmJiAhaW5zcGVjdGVkWyBkYXRhVHlwZU9yVHJhbnNwb3J0IF0gKSB7XG5cblx0XHRcdFx0b3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRpbnNwZWN0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG5cdFx0XHRcdHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdFx0cmV0dXJuIHNlbGVjdGVkO1xuXHR9XG5cblx0cmV0dXJuIGluc3BlY3QoIG9wdGlvbnMuZGF0YVR5cGVzWyAwIF0gKSB8fCAhaW5zcGVjdGVkWyBcIipcIiBdICYmIGluc3BlY3QoIFwiKlwiICk7XG59XG5cbi8vIEEgc3BlY2lhbCBleHRlbmQgZm9yIGFqYXggb3B0aW9uc1xuLy8gdGhhdCB0YWtlcyBcImZsYXRcIiBvcHRpb25zIChub3QgdG8gYmUgZGVlcCBleHRlbmRlZClcbi8vIEZpeGVzICM5ODg3XG5mdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHtcblx0dmFyIGtleSwgZGVlcCxcblx0XHRmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307XG5cblx0Zm9yICgga2V5IGluIHNyYyApIHtcblx0XHRpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdCggZmxhdE9wdGlvbnNbIGtleSBdID8gdGFyZ2V0IDogKCBkZWVwIHx8ICggZGVlcCA9IHt9ICkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG5cdFx0fVxuXHR9XG5cdGlmICggZGVlcCApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXQ7XG59XG5cbi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAqIC0gZmluZHMgdGhlIHJpZ2h0IGRhdGFUeXBlIChtZWRpYXRlcyBiZXR3ZWVuIGNvbnRlbnQtdHlwZSBhbmQgZXhwZWN0ZWQgZGF0YVR5cGUpXG4gKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApIHtcblxuXHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0Y29udGVudHMgPSBzLmNvbnRlbnRzLFxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzO1xuXG5cdC8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzXG5cdHdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09IFwiKlwiICkge1xuXHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdGlmICggY3QgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJDb250ZW50LVR5cGVcIiApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuXHRcdGZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkge1xuXHRcdFx0aWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbIDAgXSBdICkge1xuXHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRmaXJzdERhdGFUeXBlID0gdHlwZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblxuXHRcdC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpO1xuXG5cdC8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5c1xuXHRpZiAoIGRhdGFUeXBlc1sgMSBdICkge1xuXHRcdGZvciAoIGNvbnYgaW4gcy5jb252ZXJ0ZXJzICkge1xuXHRcdFx0Y29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTtcblx0XHR9XG5cdH1cblxuXHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0Ly8gQ29udmVydCB0byBlYWNoIHNlcXVlbnRpYWwgZGF0YVR5cGVcblx0d2hpbGUgKCBjdXJyZW50ICkge1xuXG5cdFx0aWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG5cdFx0XHRqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSB0aGUgZGF0YUZpbHRlciBpZiBwcm92aWRlZFxuXHRcdGlmICggIXByZXYgJiYgaXNTdWNjZXNzICYmIHMuZGF0YUZpbHRlciApIHtcblx0XHRcdHJlc3BvbnNlID0gcy5kYXRhRmlsdGVyKCByZXNwb25zZSwgcy5kYXRhVHlwZSApO1xuXHRcdH1cblxuXHRcdHByZXYgPSBjdXJyZW50O1xuXHRcdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHRcdGlmICggY3VycmVudCApIHtcblxuXHRcdFx0Ly8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0b1xuXHRcdFx0aWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblxuXHRcdFx0XHRjdXJyZW50ID0gcHJldjtcblxuXHRcdFx0Ly8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudFxuXHRcdFx0fSBlbHNlIGlmICggcHJldiAhPT0gXCIqXCIgJiYgcHJldiAhPT0gY3VycmVudCApIHtcblxuXHRcdFx0XHQvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuXHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbIFwiKiBcIiArIGN1cnJlbnQgXTtcblxuXHRcdFx0XHQvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuXHRcdFx0XHRpZiAoICFjb252ICkge1xuXHRcdFx0XHRcdGZvciAoIGNvbnYyIGluIGNvbnZlcnRlcnMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudFxuXHRcdFx0XHRcdFx0dG1wID0gY29udjIuc3BsaXQoIFwiIFwiICk7XG5cdFx0XHRcdFx0XHRpZiAoIHRtcFsgMSBdID09PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dFxuXHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgdG1wWyAwIF0gXSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnZlcnRlcnNbIFwiKiBcIiArIHRtcFsgMCBdIF07XG5cdFx0XHRcdFx0XHRcdGlmICggY29udiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgcy50aHJvd3MgKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXRlOiBcInBhcnNlcmVycm9yXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzXG5cdGFjdGl2ZTogMCxcblxuXHQvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0XG5cdGxhc3RNb2RpZmllZDoge30sXG5cdGV0YWc6IHt9LFxuXG5cdGFqYXhTZXR0aW5nczoge1xuXHRcdHVybDogbG9jYXRpb24uaHJlZixcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGxvY2F0aW9uLnByb3RvY29sICksXG5cdFx0Z2xvYmFsOiB0cnVlLFxuXHRcdHByb2Nlc3NEYXRhOiB0cnVlLFxuXHRcdGFzeW5jOiB0cnVlLFxuXHRcdGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLFxuXG5cdFx0Lypcblx0XHR0aW1lb3V0OiAwLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0ZGF0YVR5cGU6IG51bGwsXG5cdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0cGFzc3dvcmQ6IG51bGwsXG5cdFx0Y2FjaGU6IG51bGwsXG5cdFx0dGhyb3dzOiBmYWxzZSxcblx0XHR0cmFkaXRpb25hbDogZmFsc2UsXG5cdFx0aGVhZGVyczoge30sXG5cdFx0Ki9cblxuXHRcdGFjY2VwdHM6IHtcblx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdHRleHQ6IFwidGV4dC9wbGFpblwiLFxuXHRcdFx0aHRtbDogXCJ0ZXh0L2h0bWxcIixcblx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiXG5cdFx0fSxcblxuXHRcdGNvbnRlbnRzOiB7XG5cdFx0XHR4bWw6IC9cXGJ4bWxcXGIvLFxuXHRcdFx0aHRtbDogL1xcYmh0bWwvLFxuXHRcdFx0anNvbjogL1xcYmpzb25cXGIvXG5cdFx0fSxcblxuXHRcdHJlc3BvbnNlRmllbGRzOiB7XG5cdFx0XHR4bWw6IFwicmVzcG9uc2VYTUxcIixcblx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRqc29uOiBcInJlc3BvbnNlSlNPTlwiXG5cdFx0fSxcblxuXHRcdC8vIERhdGEgY29udmVydGVyc1xuXHRcdC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2Vcblx0XHRjb252ZXJ0ZXJzOiB7XG5cblx0XHRcdC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuXHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXG5cdFx0XHQvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbilcblx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cblx0XHRcdC8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb25cblx0XHRcdFwidGV4dCBqc29uXCI6IEpTT04ucGFyc2UsXG5cblx0XHRcdC8vIFBhcnNlIHRleHQgYXMgeG1sXG5cdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdH0sXG5cblx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdC8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWZcblx0XHQvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuXHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdGZsYXRPcHRpb25zOiB7XG5cdFx0XHR1cmw6IHRydWUsXG5cdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0fVxuXHR9LFxuXG5cdC8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0XG5cdC8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy5cblx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0YWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHtcblx0XHRyZXR1cm4gc2V0dGluZ3MgP1xuXG5cdFx0XHQvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdFxuXHRcdFx0YWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG5cdFx0XHQvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzXG5cdFx0XHRhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTtcblx0fSxcblxuXHRhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSxcblx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cblx0Ly8gTWFpbiBtZXRob2Rcblx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblxuXHRcdC8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlXG5cdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0b3B0aW9ucyA9IHVybDtcblx0XHRcdHVybCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0dmFyIHRyYW5zcG9ydCxcblxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cblx0XHRcdC8vIFJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyxcblx0XHRcdHJlc3BvbnNlSGVhZGVycyxcblxuXHRcdFx0Ly8gdGltZW91dCBoYW5kbGVcblx0XHRcdHRpbWVvdXRUaW1lcixcblxuXHRcdFx0Ly8gVXJsIGNsZWFudXAgdmFyXG5cdFx0XHR1cmxBbmNob3IsXG5cblx0XHRcdC8vIFJlcXVlc3Qgc3RhdGUgKGJlY29tZXMgZmFsc2UgdXBvbiBzZW5kIGFuZCB0cnVlIHVwb24gY29tcGxldGlvbilcblx0XHRcdGNvbXBsZXRlZCxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG5cdFx0XHRmaXJlR2xvYmFscyxcblxuXHRcdFx0Ly8gTG9vcCB2YXJpYWJsZVxuXHRcdFx0aSxcblxuXHRcdFx0Ly8gdW5jYWNoZWQgcGFydCBvZiB0aGUgdXJsXG5cdFx0XHR1bmNhY2hlZCxcblxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cblx0XHRcdC8vIENhbGxiYWNrcyBjb250ZXh0XG5cdFx0XHRjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcblxuXHRcdFx0Ly8gQ29udGV4dCBmb3IgZ2xvYmFsIGV2ZW50cyBpcyBjYWxsYmFja0NvbnRleHQgaWYgaXQgaXMgYSBET00gbm9kZSBvciBqUXVlcnkgY29sbGVjdGlvblxuXHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0ID0gcy5jb250ZXh0ICYmXG5cdFx0XHRcdCggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LFxuXG5cdFx0XHQvLyBEZWZlcnJlZHNcblx0XHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkID0galF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LFxuXG5cdFx0XHQvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKVxuXHRcdFx0cmVxdWVzdEhlYWRlcnMgPSB7fSxcblx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXMgPSB7fSxcblxuXHRcdFx0Ly8gRGVmYXVsdCBhYm9ydCBtZXNzYWdlXG5cdFx0XHRzdHJBYm9ydCA9IFwiY2FuY2VsZWRcIixcblxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAoIG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBtYXRjaCA9PSBudWxsID8gbnVsbCA6IG1hdGNoO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFJhdyBzdHJpbmdcblx0XHRcdFx0Z2V0QWxsUmVzcG9uc2VIZWFkZXJzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29tcGxldGVkID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdG5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSA9XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXNbIG5hbWUudG9Mb3dlckNhc2UoKSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRzLm1pbWVUeXBlID0gdHlwZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdFx0c3RhdHVzQ29kZTogZnVuY3Rpb24oIG1hcCApIHtcblx0XHRcdFx0XHR2YXIgY29kZTtcblx0XHRcdFx0XHRpZiAoIG1hcCApIHtcblx0XHRcdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrc1xuXHRcdFx0XHRcdFx0XHRqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFja3MgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXNcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdHVzQ29kZVsgY29kZSBdID0gWyBzdGF0dXNDb2RlWyBjb2RlIF0sIG1hcFsgY29kZSBdIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FuY2VsIHRoZSByZXF1ZXN0XG5cdFx0XHRcdGFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHR2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDtcblx0XHRcdFx0XHRpZiAoIHRyYW5zcG9ydCApIHtcblx0XHRcdFx0XHRcdHRyYW5zcG9ydC5hYm9ydCggZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRvbmUoIDAsIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0Ly8gQXR0YWNoIGRlZmVycmVkc1xuXHRcdGRlZmVycmVkLnByb21pc2UoIGpxWEhSICk7XG5cblx0XHQvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkIChwcmVmaWx0ZXJzIG1pZ2h0IGV4cGVjdCBpdClcblx0XHQvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuXHRcdC8vIFdlIGFsc28gdXNlIHRoZSB1cmwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxuXHRcdHMudXJsID0gKCAoIHVybCB8fCBzLnVybCB8fCBsb2NhdGlvbi5ocmVmICkgKyBcIlwiIClcblx0XHRcdC5yZXBsYWNlKCBycHJvdG9jb2wsIGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICk7XG5cblx0XHQvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDRcblx0XHRzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlO1xuXG5cdFx0Ly8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuXHRcdHMuZGF0YVR5cGVzID0gKCBzLmRhdGFUeXBlIHx8IFwiKlwiICkudG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHRoZSBvcmlnaW4gZG9lc24ndCBtYXRjaCB0aGUgY3VycmVudCBvcmlnaW4uXG5cdFx0aWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7XG5cdFx0XHR1cmxBbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggLSAxMSwgRWRnZSAxMiAtIDE1XG5cdFx0XHQvLyBJRSB0aHJvd3MgZXhjZXB0aW9uIG9uIGFjY2Vzc2luZyB0aGUgaHJlZiBwcm9wZXJ0eSBpZiB1cmwgaXMgbWFsZm9ybWVkLFxuXHRcdFx0Ly8gZS5nLiBodHRwOi8vZXhhbXBsZS5jb206ODB4L1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dXJsQW5jaG9yLmhyZWYgPSBzLnVybDtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTggLSAxMSBvbmx5XG5cdFx0XHRcdC8vIEFuY2hvcidzIGhvc3QgcHJvcGVydHkgaXNuJ3QgY29ycmVjdGx5IHNldCB3aGVuIHMudXJsIGlzIHJlbGF0aXZlXG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gdXJsQW5jaG9yLmhyZWY7XG5cdFx0XHRcdHMuY3Jvc3NEb21haW4gPSBvcmlnaW5BbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyBvcmlnaW5BbmNob3IuaG9zdCAhPT1cblx0XHRcdFx0XHR1cmxBbmNob3IucHJvdG9jb2wgKyBcIi8vXCIgKyB1cmxBbmNob3IuaG9zdDtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGFuIGVycm9yIHBhcnNpbmcgdGhlIFVSTCwgYXNzdW1lIGl0IGlzIGNyb3NzRG9tYWluLFxuXHRcdFx0XHQvLyBpdCBjYW4gYmUgcmVqZWN0ZWQgYnkgdGhlIHRyYW5zcG9ydCBpZiBpdCBpcyBpbnZhbGlkXG5cdFx0XHRcdHMuY3Jvc3NEb21haW4gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZ1xuXHRcdGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcHJlZmlsdGVyc1xuXHRcdGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYSBwcmVmaWx0ZXIsIHN0b3AgdGhlcmVcblx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RhcnRcIiApO1xuXHRcdH1cblxuXHRcdC8vIFVwcGVyY2FzZSB0aGUgdHlwZVxuXHRcdHMudHlwZSA9IHMudHlwZS50b1VwcGVyQ2FzZSgpO1xuXG5cdFx0Ly8gRGV0ZXJtaW5lIGlmIHJlcXVlc3QgaGFzIGNvbnRlbnRcblx0XHRzLmhhc0NvbnRlbnQgPSAhcm5vQ29udGVudC50ZXN0KCBzLnR5cGUgKTtcblxuXHRcdC8vIFNhdmUgdGhlIFVSTCBpbiBjYXNlIHdlJ3JlIHRveWluZyB3aXRoIHRoZSBJZi1Nb2RpZmllZC1TaW5jZVxuXHRcdC8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvblxuXHRcdC8vIFJlbW92ZSBoYXNoIHRvIHNpbXBsaWZ5IHVybCBtYW5pcHVsYXRpb25cblx0XHRjYWNoZVVSTCA9IHMudXJsLnJlcGxhY2UoIHJoYXNoLCBcIlwiICk7XG5cblx0XHQvLyBNb3JlIG9wdGlvbnMgaGFuZGxpbmcgZm9yIHJlcXVlc3RzIHdpdGggbm8gY29udGVudFxuXHRcdGlmICggIXMuaGFzQ29udGVudCApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIGhhc2ggc28gd2UgY2FuIHB1dCBpdCBiYWNrXG5cdFx0XHR1bmNhY2hlZCA9IHMudXJsLnNsaWNlKCBjYWNoZVVSTC5sZW5ndGggKTtcblxuXHRcdFx0Ly8gSWYgZGF0YSBpcyBhdmFpbGFibGUgYW5kIHNob3VsZCBiZSBwcm9jZXNzZWQsIGFwcGVuZCBkYXRhIHRvIHVybFxuXHRcdFx0aWYgKCBzLmRhdGEgJiYgKCBzLnByb2Nlc3NEYXRhIHx8IHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgKSApIHtcblx0XHRcdFx0Y2FjaGVVUkwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YTtcblxuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvciB1cGRhdGUgYW50aS1jYWNoZSBwYXJhbSBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdGNhY2hlVVJMID0gY2FjaGVVUkwucmVwbGFjZSggcmFudGlDYWNoZSwgXCIkMVwiICk7XG5cdFx0XHRcdHVuY2FjaGVkID0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIFwiXz1cIiArICggbm9uY2UrKyApICsgdW5jYWNoZWQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFB1dCBoYXNoIGFuZCBhbnRpLWNhY2hlIG9uIHRoZSBVUkwgdGhhdCB3aWxsIGJlIHJlcXVlc3RlZCAoZ2gtMTczMilcblx0XHRcdHMudXJsID0gY2FjaGVVUkwgKyB1bmNhY2hlZDtcblxuXHRcdC8vIENoYW5nZSAnJTIwJyB0byAnKycgaWYgdGhpcyBpcyBlbmNvZGVkIGZvcm0gYm9keSBjb250ZW50IChnaC0yNjU4KVxuXHRcdH0gZWxzZSBpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmXG5cdFx0XHQoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgKSA9PT0gMCApIHtcblx0XHRcdHMuZGF0YSA9IHMuZGF0YS5yZXBsYWNlKCByMjAsIFwiK1wiICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdGlmICggalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Nb2RpZmllZC1TaW5jZVwiLCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU5vbmUtTWF0Y2hcIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIGNvcnJlY3QgaGVhZGVyLCBpZiBkYXRhIGlzIGJlaW5nIHNlbnRcblx0XHRpZiAoIHMuZGF0YSAmJiBzLmhhc0NvbnRlbnQgJiYgcy5jb250ZW50VHlwZSAhPT0gZmFsc2UgfHwgb3B0aW9ucy5jb250ZW50VHlwZSApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIsIHMuY29udGVudFR5cGUgKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlXG5cdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlcihcblx0XHRcdFwiQWNjZXB0XCIsXG5cdFx0XHRzLmRhdGFUeXBlc1sgMCBdICYmIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdID9cblx0XHRcdFx0cy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gK1xuXHRcdFx0XHRcdCggcy5kYXRhVHlwZXNbIDAgXSAhPT0gXCIqXCIgPyBcIiwgXCIgKyBhbGxUeXBlcyArIFwiOyBxPTAuMDFcIiA6IFwiXCIgKSA6XG5cdFx0XHRcdHMuYWNjZXB0c1sgXCIqXCIgXVxuXHRcdCk7XG5cblx0XHQvLyBDaGVjayBmb3IgaGVhZGVycyBvcHRpb25cblx0XHRmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcblx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIGksIHMuaGVhZGVyc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsb3cgY3VzdG9tIGhlYWRlcnMvbWltZXR5cGVzIGFuZCBlYXJseSBhYm9ydFxuXHRcdGlmICggcy5iZWZvcmVTZW5kICYmXG5cdFx0XHQoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IGNvbXBsZXRlZCApICkge1xuXG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Y29tcGxldGVEZWZlcnJlZC5hZGQoIHMuY29tcGxldGUgKTtcblx0XHRqcVhIUi5kb25lKCBzLnN1Y2Nlc3MgKTtcblx0XHRqcVhIUi5mYWlsKCBzLmVycm9yICk7XG5cblx0XHQvLyBHZXQgdHJhbnNwb3J0XG5cdFx0dHJhbnNwb3J0ID0gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiBubyB0cmFuc3BvcnQsIHdlIGF1dG8tYWJvcnRcblx0XHRpZiAoICF0cmFuc3BvcnQgKSB7XG5cdFx0XHRkb25lKCAtMSwgXCJObyBUcmFuc3BvcnRcIiApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gMTtcblxuXHRcdFx0Ly8gU2VuZCBnbG9iYWwgZXZlbnRcblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhTZW5kXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhamF4U2VuZCwgc3RvcCB0aGVyZVxuXHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdHJldHVybiBqcVhIUjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVGltZW91dFxuXHRcdFx0aWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7XG5cdFx0XHRcdHRpbWVvdXRUaW1lciA9IHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRqcVhIUi5hYm9ydCggXCJ0aW1lb3V0XCIgKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGNvbXBsZXRlZCA9IGZhbHNlO1xuXHRcdFx0XHR0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdC8vIFJldGhyb3cgcG9zdC1jb21wbGV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFByb3BhZ2F0ZSBvdGhlcnMgYXMgcmVzdWx0c1xuXHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGxiYWNrIGZvciB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZVxuXHRcdGZ1bmN0aW9uIGRvbmUoIHN0YXR1cywgbmF0aXZlU3RhdHVzVGV4dCwgcmVzcG9uc2VzLCBoZWFkZXJzICkge1xuXHRcdFx0dmFyIGlzU3VjY2Vzcywgc3VjY2VzcywgZXJyb3IsIHJlc3BvbnNlLCBtb2RpZmllZCxcblx0XHRcdFx0c3RhdHVzVGV4dCA9IG5hdGl2ZVN0YXR1c1RleHQ7XG5cblx0XHRcdC8vIElnbm9yZSByZXBlYXQgaW52b2NhdGlvbnNcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbXBsZXRlZCA9IHRydWU7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dFRpbWVyICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlcmVmZXJlbmNlIHRyYW5zcG9ydCBmb3IgZWFybHkgZ2FyYmFnZSBjb2xsZWN0aW9uXG5cdFx0XHQvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKVxuXHRcdFx0dHJhbnNwb3J0ID0gdW5kZWZpbmVkO1xuXG5cdFx0XHQvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcgPSBoZWFkZXJzIHx8IFwiXCI7XG5cblx0XHRcdC8vIFNldCByZWFkeVN0YXRlXG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gc3RhdHVzID4gMCA/IDQgOiAwO1xuXG5cdFx0XHQvLyBEZXRlcm1pbmUgaWYgc3VjY2Vzc2Z1bFxuXHRcdFx0aXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cblx0XHRcdC8vIEdldCByZXNwb25zZSBkYXRhXG5cdFx0XHRpZiAoIHJlc3BvbnNlcyApIHtcblx0XHRcdFx0cmVzcG9uc2UgPSBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldClcblx0XHRcdHJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7XG5cblx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblxuXHRcdFx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcIkxhc3QtTW9kaWZpZWRcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiZXRhZ1wiICk7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaWYgbm8gY29udGVudFxuXHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gMjA0IHx8IHMudHlwZSA9PT0gXCJIRUFEXCIgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm9jb250ZW50XCI7XG5cblx0XHRcdFx0Ly8gaWYgbm90IG1vZGlmaWVkXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHN0YXR1cyA9PT0gMzA0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vdG1vZGlmaWVkXCI7XG5cblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBkYXRhLCBsZXQncyBjb252ZXJ0IGl0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlO1xuXHRcdFx0XHRcdHN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhO1xuXHRcdFx0XHRcdGVycm9yID0gcmVzcG9uc2UuZXJyb3I7XG5cdFx0XHRcdFx0aXNTdWNjZXNzID0gIWVycm9yO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0IGFuZCBub3JtYWxpemUgZm9yIG5vbi1hYm9ydHNcblx0XHRcdFx0ZXJyb3IgPSBzdGF0dXNUZXh0O1xuXHRcdFx0XHRpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJlcnJvclwiO1xuXHRcdFx0XHRcdGlmICggc3RhdHVzIDwgMCApIHtcblx0XHRcdFx0XHRcdHN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0XG5cdFx0XHRqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHRqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArIFwiXCI7XG5cblx0XHRcdC8vIFN1Y2Nlc3MvRXJyb3Jcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0anFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApO1xuXHRcdFx0c3RhdHVzQ29kZSA9IHVuZGVmaW5lZDtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG5cdFx0XHRcdFx0WyBqcVhIUiwgcywgaXNTdWNjZXNzID8gc3VjY2VzcyA6IGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29tcGxldGVcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggXCJhamF4U3RvcFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ganFYSFI7XG5cdH0sXG5cblx0Z2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssIFwianNvblwiICk7XG5cdH0sXG5cblx0Z2V0U2NyaXB0OiBmdW5jdGlvbiggdXJsLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCB1bmRlZmluZWQsIGNhbGxiYWNrLCBcInNjcmlwdFwiICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXG5cdFx0Ly8gU2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWRcblx0XHRpZiAoIGlzRnVuY3Rpb24oIGRhdGEgKSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrO1xuXHRcdFx0Y2FsbGJhY2sgPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBUaGUgdXJsIGNhbiBiZSBhbiBvcHRpb25zIG9iamVjdCAod2hpY2ggdGhlbiBtdXN0IGhhdmUgLnVybClcblx0XHRyZXR1cm4galF1ZXJ5LmFqYXgoIGpRdWVyeS5leHRlbmQoIHtcblx0XHRcdHVybDogdXJsLFxuXHRcdFx0dHlwZTogbWV0aG9kLFxuXHRcdFx0ZGF0YVR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0c3VjY2VzczogY2FsbGJhY2tcblx0XHR9LCBqUXVlcnkuaXNQbGFpbk9iamVjdCggdXJsICkgJiYgdXJsICkgKTtcblx0fTtcbn0gKTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoIHtcblx0XHR1cmw6IHVybCxcblxuXHRcdC8vIE1ha2UgdGhpcyBleHBsaWNpdCwgc2luY2UgdXNlciBjYW4gb3ZlcnJpZGUgdGhpcyB0aHJvdWdoIGFqYXhTZXR1cCAoIzExMjY0KVxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0Y2FjaGU6IHRydWUsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XCJ0aHJvd3NcIjogdHJ1ZVxuXHR9ICk7XG59O1xuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0d3JhcEFsbDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIHdyYXA7XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblx0XHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0XHRodG1sID0gaHRtbC5jYWxsKCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xuXG5cdFx0XHRcdHdoaWxlICggZWxlbS5maXJzdEVsZW1lbnRDaGlsZCApIHtcblx0XHRcdFx0XHRlbGVtID0gZWxlbS5maXJzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbGVtO1xuXHRcdFx0fSApLmFwcGVuZCggdGhpcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciBodG1sSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIGh0bWwgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbElzRnVuY3Rpb24gPyBodG1sLmNhbGwoIHRoaXMsIGkgKSA6IGh0bWwgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dGhpcy5wYXJlbnQoIHNlbGVjdG9yICkubm90KCBcImJvZHlcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApO1xuXHRcdH0gKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHByLnBzZXVkb3MuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhalF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlKCBlbGVtICk7XG59O1xualF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhISggZWxlbS5vZmZzZXRXaWR0aCB8fCBlbGVtLm9mZnNldEhlaWdodCB8fCBlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICk7XG59O1xuXG5cblxuXG5qUXVlcnkuYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2ggKCBlICkge31cbn07XG5cbnZhciB4aHJTdWNjZXNzU3RhdHVzID0ge1xuXG5cdFx0Ly8gRmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdC8vICMxNDUwOiBzb21ldGltZXMgSUUgcmV0dXJucyAxMjIzIHdoZW4gaXQgc2hvdWxkIGJlIDIwNFxuXHRcdDEyMjM6IDIwNFxuXHR9LFxuXHR4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpO1xuXG5zdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoIFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyU3VwcG9ydGVkICk7XG5zdXBwb3J0LmFqYXggPSB4aHJTdXBwb3J0ZWQgPSAhIXhoclN1cHBvcnRlZDtcblxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKTtcblxuXHRcdFx0XHR4aHIub3Blbihcblx0XHRcdFx0XHRvcHRpb25zLnR5cGUsXG5cdFx0XHRcdFx0b3B0aW9ucy51cmwsXG5cdFx0XHRcdFx0b3B0aW9ucy5hc3luYyxcblx0XHRcdFx0XHRvcHRpb25zLnVzZXJuYW1lLFxuXHRcdFx0XHRcdG9wdGlvbnMucGFzc3dvcmRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gKSB7XG5cdFx0XHRcdFx0aGVhZGVyc1sgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNldCBoZWFkZXJzXG5cdFx0XHRcdGZvciAoIGkgaW4gaGVhZGVycyApIHtcblx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gZXJyb3JDYWxsYmFjayA9IHhoci5vbmxvYWQgPVxuXHRcdFx0XHRcdFx0XHRcdHhoci5vbmVycm9yID0geGhyLm9uYWJvcnQgPSB4aHIub250aW1lb3V0ID1cblx0XHRcdFx0XHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIE9uIGEgbWFudWFsIG5hdGl2ZSBhYm9ydCwgSUU5IHRocm93c1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVycm9ycyBvbiBhbnkgcHJvcGVydHkgYWNjZXNzIHRoYXQgaXMgbm90IHJlYWR5U3RhdGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIDAsIFwiZXJyb3JcIiApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0LFxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSUU5IGhhcyBubyBYSFIyIGJ1dCB0aHJvd3Mgb24gYmluYXJ5ICh0cmFjLTExNDI2KVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIFhIUjIgbm9uLXRleHQsIGxldCB0aGUgY2FsbGVyIGhhbmRsZSBpdCAoZ2gtMjQ5OClcblx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0eyBiaW5hcnk6IHhoci5yZXNwb25zZSB9IDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gZXZlbnRzXG5cdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRlcnJvckNhbGxiYWNrID0geGhyLm9uZXJyb3IgPSB4aHIub250aW1lb3V0ID0gY2FsbGJhY2soIFwiZXJyb3JcIiApO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdFx0XHQvLyBVc2Ugb25yZWFkeXN0YXRlY2hhbmdlIHRvIHJlcGxhY2Ugb25hYm9ydFxuXHRcdFx0XHQvLyB0byBoYW5kbGUgdW5jYXVnaHQgYWJvcnRzXG5cdFx0XHRcdGlmICggeGhyLm9uYWJvcnQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR4aHIub25hYm9ydCA9IGVycm9yQ2FsbGJhY2s7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHQvLyBDaGVjayByZWFkeVN0YXRlIGJlZm9yZSB0aW1lb3V0IGFzIGl0IGNoYW5nZXNcblx0XHRcdFx0XHRcdGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQWxsb3cgb25lcnJvciB0byBiZSBjYWxsZWQgZmlyc3QsXG5cdFx0XHRcdFx0XHRcdC8vIGJ1dCB0aGF0IHdpbGwgbm90IGhhbmRsZSBhIG5hdGl2ZSBhYm9ydFxuXHRcdFx0XHRcdFx0XHQvLyBBbHNvLCBzYXZlIGVycm9yQ2FsbGJhY2sgdG8gYSB2YXJpYWJsZVxuXHRcdFx0XHRcdFx0XHQvLyBhcyB4aHIub25lcnJvciBjYW5ub3QgYmUgYWNjZXNzZWRcblx0XHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJvckNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayggXCJhYm9ydFwiICk7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHR4aHIuc2VuZCggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSB8fCBudWxsICk7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG4vLyBQcmV2ZW50IGF1dG8tZXhlY3V0aW9uIG9mIHNjcmlwdHMgd2hlbiBubyBleHBsaWNpdCBkYXRhVHlwZSB3YXMgcHJvdmlkZWQgKFNlZSBnaC0yNDMyKVxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy5jb250ZW50cy5zY3JpcHQgPSBmYWxzZTtcblx0fVxufSApO1xuXG4vLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZVxualF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRhY2NlcHRzOiB7XG5cdFx0c2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgXCIgK1xuXHRcdFx0XCJhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIlxuXHR9LFxuXHRjb250ZW50czoge1xuXHRcdHNjcmlwdDogL1xcYig/OmphdmF8ZWNtYSlzY3JpcHRcXGIvXG5cdH0sXG5cdGNvbnZlcnRlcnM6IHtcblx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIHRleHQgKTtcblx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGNyb3NzRG9tYWluXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHMuY2FjaGUgPSBmYWxzZTtcblx0fVxuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy50eXBlID0gXCJHRVRcIjtcblx0fVxufSApO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblxuXHQvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIHJlcXVlc3RzXG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHR2YXIgc2NyaXB0LCBjYWxsYmFjaztcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIF8sIGNvbXBsZXRlICkge1xuXHRcdFx0XHRzY3JpcHQgPSBqUXVlcnkoIFwiPHNjcmlwdD5cIiApLnByb3AoIHtcblx0XHRcdFx0XHRjaGFyc2V0OiBzLnNjcmlwdENoYXJzZXQsXG5cdFx0XHRcdFx0c3JjOiBzLnVybFxuXHRcdFx0XHR9ICkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnlcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIG9sZENhbGxiYWNrcyA9IFtdLFxuXHRyanNvbnAgPSAvKD0pXFw/KD89JnwkKXxcXD9cXD8vO1xuXG4vLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzXG5qUXVlcnkuYWpheFNldHVwKCB7XG5cdGpzb25wOiBcImNhbGxiYWNrXCIsXG5cdGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIG5vbmNlKysgKSApO1xuXHRcdHRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlO1xuXHRcdHJldHVybiBjYWxsYmFjaztcblx0fVxufSApO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiIClcblx0XHRcdFx0XHQuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICYmXG5cdFx0XHRcdHJqc29ucC50ZXN0KCBzLmRhdGEgKSAmJiBcImRhdGFcIlxuXHRcdCk7XG5cblx0Ly8gSGFuZGxlIGlmZiB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlIGlzIFwianNvbnBcIiBvciB3ZSBoYXZlIGEgcGFyYW1ldGVyIHRvIHNldFxuXHRpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09IFwianNvbnBcIiApIHtcblxuXHRcdC8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXRcblx0XHRjYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbIFwic2NyaXB0IGpzb25cIiBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcblx0XHRcdFx0alF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcblx0XHR9O1xuXG5cdFx0Ly8gRm9yY2UganNvbiBkYXRhVHlwZVxuXHRcdHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tcblx0XHRvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG5cdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG5cdFx0fTtcblxuXHRcdC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuXHRcdGpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdFxuXHRcdFx0aWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRqUXVlcnkoIHdpbmRvdyApLnJlbW92ZVByb3AoIGNhbGxiYWNrTmFtZSApO1xuXG5cdFx0XHQvLyBPdGhlcndpc2UgcmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTYXZlIGJhY2sgYXMgZnJlZVxuXHRcdFx0aWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIFNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHtcblx0XHRcdFx0b3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBvdmVyd3JpdHRlbiA9IHVuZGVmaW5lZDtcblx0XHR9ICk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSApO1xuXG5cblxuXG4vLyBTdXBwb3J0OiBTYWZhcmkgOCBvbmx5XG4vLyBJbiBTYWZhcmkgOCBkb2N1bWVudHMgY3JlYXRlZCB2aWEgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50XG4vLyBjb2xsYXBzZSBzaWJsaW5nIGZvcm1zOiB0aGUgc2Vjb25kIG9uZSBiZWNvbWVzIGEgY2hpbGQgb2YgdGhlIGZpcnN0IG9uZS5cbi8vIEJlY2F1c2Ugb2YgdGhhdCwgdGhpcyBzZWN1cml0eSBtZWFzdXJlIGhhcyB0byBiZSBkaXNhYmxlZCBpbiBTYWZhcmkgOC5cbi8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzczMzdcbnN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ID0gKCBmdW5jdGlvbigpIHtcblx0dmFyIGJvZHkgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIFwiXCIgKS5ib2R5O1xuXHRib2R5LmlubmVySFRNTCA9IFwiPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT5cIjtcblx0cmV0dXJuIGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggPT09IDI7XG59ICkoKTtcblxuXG4vLyBBcmd1bWVudCBcImRhdGFcIiBzaG91bGQgYmUgc3RyaW5nIG9mIGh0bWxcbi8vIGNvbnRleHQgKG9wdGlvbmFsKTogSWYgc3BlY2lmaWVkLCB0aGUgZnJhZ21lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoaXMgY29udGV4dCxcbi8vIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoIHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBbXTtcblx0fVxuXHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRrZWVwU2NyaXB0cyA9IGNvbnRleHQ7XG5cdFx0Y29udGV4dCA9IGZhbHNlO1xuXHR9XG5cblx0dmFyIGJhc2UsIHBhcnNlZCwgc2NyaXB0cztcblxuXHRpZiAoICFjb250ZXh0ICkge1xuXG5cdFx0Ly8gU3RvcCBzY3JpcHRzIG9yIGlubGluZSBldmVudCBoYW5kbGVycyBmcm9tIGJlaW5nIGV4ZWN1dGVkIGltbWVkaWF0ZWx5XG5cdFx0Ly8gYnkgdXNpbmcgZG9jdW1lbnQuaW1wbGVtZW50YXRpb25cblx0XHRpZiAoIHN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ICkge1xuXHRcdFx0Y29udGV4dCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggXCJcIiApO1xuXG5cdFx0XHQvLyBTZXQgdGhlIGJhc2UgaHJlZiBmb3IgdGhlIGNyZWF0ZWQgZG9jdW1lbnRcblx0XHRcdC8vIHNvIGFueSBwYXJzZWQgZWxlbWVudHMgd2l0aCBVUkxzXG5cdFx0XHQvLyBhcmUgYmFzZWQgb24gdGhlIGRvY3VtZW50J3MgVVJMIChnaC0yOTY1KVxuXHRcdFx0YmFzZSA9IGNvbnRleHQuY3JlYXRlRWxlbWVudCggXCJiYXNlXCIgKTtcblx0XHRcdGJhc2UuaHJlZiA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7XG5cdFx0XHRjb250ZXh0LmhlYWQuYXBwZW5kQ2hpbGQoIGJhc2UgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29udGV4dCA9IGRvY3VtZW50O1xuXHRcdH1cblx0fVxuXG5cdHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApO1xuXHRzY3JpcHRzID0gIWtlZXBTY3JpcHRzICYmIFtdO1xuXG5cdC8vIFNpbmdsZSB0YWdcblx0aWYgKCBwYXJzZWQgKSB7XG5cdFx0cmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbIDEgXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBidWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuXG5cdGlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApO1xufTtcblxuXG4vKipcbiAqIExvYWQgYSB1cmwgaW50byBhIHBhZ2VcbiAqL1xualF1ZXJ5LmZuLmxvYWQgPSBmdW5jdGlvbiggdXJsLCBwYXJhbXMsIGNhbGxiYWNrICkge1xuXHR2YXIgc2VsZWN0b3IsIHR5cGUsIHJlc3BvbnNlLFxuXHRcdHNlbGYgPSB0aGlzLFxuXHRcdG9mZiA9IHVybC5pbmRleE9mKCBcIiBcIiApO1xuXG5cdGlmICggb2ZmID4gLTEgKSB7XG5cdFx0c2VsZWN0b3IgPSBzdHJpcEFuZENvbGxhcHNlKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGlzRnVuY3Rpb24oIHBhcmFtcyApICkge1xuXG5cdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRjYWxsYmFjayA9IHBhcmFtcztcblx0XHRwYXJhbXMgPSB1bmRlZmluZWQ7XG5cblx0Ly8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZ1xuXHR9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdH1cblxuXHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRpZiAoIHNlbGYubGVuZ3RoID4gMCApIHtcblx0XHRqUXVlcnkuYWpheCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIElmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWQuXG5cdFx0XHQvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2Vcblx0XHRcdC8vIHVzZXIgY2FuIG92ZXJyaWRlIGl0IHRocm91Z2ggYWpheFNldHVwIG1ldGhvZFxuXHRcdFx0dHlwZTogdHlwZSB8fCBcIkdFVFwiLFxuXHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0fSApLmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KCBcIjxkaXY+XCIgKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHRcblx0XHRcdFx0cmVzcG9uc2VUZXh0ICk7XG5cblx0XHQvLyBJZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgdGhpcyBmdW5jdGlvbiBnZXRzIFwiZGF0YVwiLCBcInN0YXR1c1wiLCBcImpxWEhSXCJcblx0XHQvLyBidXQgdGhleSBhcmUgaWdub3JlZCBiZWNhdXNlIHJlc3BvbnNlIHdhcyBzZXQgYWJvdmUuXG5cdFx0Ly8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImpxWEhSXCIsIFwic3RhdHVzXCIsIFwiZXJyb3JcIlxuXHRcdH0gKS5hbHdheXMoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuXG5cbi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzXG5qUXVlcnkuZWFjaCggW1xuXHRcImFqYXhTdGFydFwiLFxuXHRcImFqYXhTdG9wXCIsXG5cdFwiYWpheENvbXBsZXRlXCIsXG5cdFwiYWpheEVycm9yXCIsXG5cdFwiYWpheFN1Y2Nlc3NcIixcblx0XCJhamF4U2VuZFwiXG5dLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59ICk7XG5cblxuXG5cbmpRdWVyeS5leHByLnBzZXVkb3MuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdH0gKS5sZW5ndGg7XG59O1xuXG5cblxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoIFwiYXV0b1wiICkgPiAtMTtcblxuXHRcdC8vIE5lZWQgdG8gYmUgYWJsZSB0byBjYWxjdWxhdGUgcG9zaXRpb24gaWYgZWl0aGVyXG5cdFx0Ly8gdG9wIG9yIGxlZnQgaXMgYXV0byBhbmQgcG9zaXRpb24gaXMgZWl0aGVyIGFic29sdXRlIG9yIGZpeGVkXG5cdFx0aWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHtcblx0XHRcdGN1clBvc2l0aW9uID0gY3VyRWxlbS5wb3NpdGlvbigpO1xuXHRcdFx0Y3VyVG9wID0gY3VyUG9zaXRpb24udG9wO1xuXHRcdFx0Y3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcblx0XHRcdGN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDtcblx0XHR9XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHtcblxuXHRcdFx0Ly8gVXNlIGpRdWVyeS5leHRlbmQgaGVyZSB0byBhbGxvdyBtb2RpZmljYXRpb24gb2YgY29vcmRpbmF0ZXMgYXJndW1lbnQgKGdoLTE4NDgpXG5cdFx0XHRvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyT2Zmc2V0ICkgKTtcblx0XHR9XG5cblx0XHRpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy50b3AgPSAoIG9wdGlvbnMudG9wIC0gY3VyT2Zmc2V0LnRvcCApICsgY3VyVG9wO1xuXHRcdH1cblx0XHRpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7XG5cdFx0fVxuXG5cdFx0aWYgKCBcInVzaW5nXCIgaW4gb3B0aW9ucyApIHtcblx0XHRcdG9wdGlvbnMudXNpbmcuY2FsbCggZWxlbSwgcHJvcHMgKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJFbGVtLmNzcyggcHJvcHMgKTtcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHQvLyBvZmZzZXQoKSByZWxhdGVzIGFuIGVsZW1lbnQncyBib3JkZXIgYm94IHRvIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuXHRcdC8vIFByZXNlcnZlIGNoYWluaW5nIGZvciBzZXR0ZXJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5Lm9mZnNldC5zZXRPZmZzZXQoIHRoaXMsIG9wdGlvbnMsIGkgKTtcblx0XHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHZhciByZWN0LCB3aW4sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gemVyb3MgZm9yIGRpc2Nvbm5lY3RlZCBhbmQgaGlkZGVuIChkaXNwbGF5OiBub25lKSBlbGVtZW50cyAoZ2gtMjMxMClcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHQvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhXG5cdFx0Ly8gZGlzY29ubmVjdGVkIG5vZGUgaW4gSUUgdGhyb3dzIGFuIGVycm9yXG5cdFx0aWYgKCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcdH1cblxuXHRcdC8vIEdldCBkb2N1bWVudC1yZWxhdGl2ZSBwb3NpdGlvbiBieSBhZGRpbmcgdmlld3BvcnQgc2Nyb2xsIHRvIHZpZXdwb3J0LXJlbGF0aXZlIGdCQ1Jcblx0XHRyZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR3aW4gPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogcmVjdC50b3AgKyB3aW4ucGFnZVlPZmZzZXQsXG5cdFx0XHRsZWZ0OiByZWN0LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXRcblx0XHR9O1xuXHR9LFxuXG5cdC8vIHBvc2l0aW9uKCkgcmVsYXRlcyBhbiBlbGVtZW50J3MgbWFyZ2luIGJveCB0byBpdHMgb2Zmc2V0IHBhcmVudCdzIHBhZGRpbmcgYm94XG5cdC8vIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIGJlaGF2aW9yIG9mIENTUyBhYnNvbHV0ZSBwb3NpdGlvbmluZ1xuXHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAhdGhpc1sgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCwgZG9jLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cblx0XHQvLyBwb3NpdGlvbjpmaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gdGhlIHZpZXdwb3J0LCB3aGljaCBpdHNlbGYgYWx3YXlzIGhhcyB6ZXJvIG9mZnNldFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblxuXHRcdFx0Ly8gQXNzdW1lIHBvc2l0aW9uOmZpeGVkIGltcGxpZXMgYXZhaWxhYmlsaXR5IG9mIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRvZmZzZXQgPSB0aGlzLm9mZnNldCgpO1xuXG5cdFx0XHQvLyBBY2NvdW50IGZvciB0aGUgKnJlYWwqIG9mZnNldCBwYXJlbnQsIHdoaWNoIGNhbiBiZSB0aGUgZG9jdW1lbnQgb3IgaXRzIHJvb3QgZWxlbWVudFxuXHRcdFx0Ly8gd2hlbiBhIHN0YXRpY2FsbHkgcG9zaXRpb25lZCBlbGVtZW50IGlzIGlkZW50aWZpZWRcblx0XHRcdGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcblx0XHRcdG9mZnNldFBhcmVudCA9IGVsZW0ub2Zmc2V0UGFyZW50IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJlxuXHRcdFx0XHQoIG9mZnNldFBhcmVudCA9PT0gZG9jLmJvZHkgfHwgb2Zmc2V0UGFyZW50ID09PSBkb2MuZG9jdW1lbnRFbGVtZW50ICkgJiZcblx0XHRcdFx0alF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblxuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGlmICggb2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudCAhPT0gZWxlbSAmJiBvZmZzZXRQYXJlbnQubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgYm9yZGVycyBpbnRvIGl0cyBvZmZzZXQsIHNpbmNlIHRoZXkgYXJlIG91dHNpZGUgaXRzIGNvbnRlbnQgb3JpZ2luXG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IGpRdWVyeSggb2Zmc2V0UGFyZW50ICkub2Zmc2V0KCk7XG5cdFx0XHRcdHBhcmVudE9mZnNldC50b3AgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdFx0cGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdC8vIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGRvY3VtZW50RWxlbWVudCBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOlxuXHQvLyAxKSBGb3IgdGhlIGVsZW1lbnQgaW5zaWRlIHRoZSBpZnJhbWUgd2l0aG91dCBvZmZzZXRQYXJlbnQsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuXG5cdC8vICAgIGRvY3VtZW50RWxlbWVudCBvZiB0aGUgcGFyZW50IHdpbmRvd1xuXHQvLyAyKSBGb3IgdGhlIGhpZGRlbiBvciBkZXRhY2hlZCBlbGVtZW50XG5cdC8vIDMpIEZvciBib2R5IG9yIGh0bWwgZWxlbWVudCwgaS5lLiBpbiBjYXNlIG9mIHRoZSBodG1sIG5vZGUgLSBpdCB3aWxsIHJldHVybiBpdHNlbGZcblx0Ly9cblx0Ly8gYnV0IHRob3NlIGV4Y2VwdGlvbnMgd2VyZSBuZXZlciBwcmVzZW50ZWQgYXMgYSByZWFsIGxpZmUgdXNlLWNhc2VzXG5cdC8vIGFuZCBtaWdodCBiZSBjb25zaWRlcmVkIGFzIG1vcmUgcHJlZmVyYWJsZSByZXN1bHRzLlxuXHQvL1xuXHQvLyBUaGlzIGxvZ2ljLCBob3dldmVyLCBpcyBub3QgZ3VhcmFudGVlZCBhbmQgY2FuIGNoYW5nZSBhdCBhbnkgcG9pbnQgaW4gdGhlIGZ1dHVyZVxuXHRvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQ7XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRcdG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnRFbGVtZW50O1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG4vLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgcHJvcCApIHtcblx0dmFyIHRvcCA9IFwicGFnZVlPZmZzZXRcIiA9PT0gcHJvcDtcblxuXHRqUXVlcnkuZm5bIG1ldGhvZCBdID0gZnVuY3Rpb24oIHZhbCApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7XG5cblx0XHRcdC8vIENvYWxlc2NlIGRvY3VtZW50cyBhbmQgd2luZG93c1xuXHRcdFx0dmFyIHdpbjtcblx0XHRcdGlmICggaXNXaW5kb3coIGVsZW0gKSApIHtcblx0XHRcdFx0d2luID0gZWxlbTtcblx0XHRcdH0gZWxzZSBpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHdpbiA9IGVsZW0uZGVmYXVsdFZpZXc7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiB3aW4gPyB3aW5bIHByb3AgXSA6IGVsZW1bIG1ldGhvZCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHdpbiApIHtcblx0XHRcdFx0d2luLnNjcm9sbFRvKFxuXHRcdFx0XHRcdCF0b3AgPyB2YWwgOiB3aW4ucGFnZVhPZmZzZXQsXG5cdFx0XHRcdFx0dG9wID8gdmFsIDogd2luLnBhZ2VZT2Zmc2V0XG5cdFx0XHRcdCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1bIG1ldGhvZCBdID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0sIG1ldGhvZCwgdmFsLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH07XG59ICk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaSA8PTcgLSA5LjEsIENocm9tZSA8PTM3IC0gNDlcbi8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uXG4vLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODRcbi8vIEJsaW5rIGJ1ZzogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTg5MzQ3XG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cblx0XHRcdFx0Ly8gSWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG5cdFx0XHRcdHJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgXCJweFwiIDpcblx0XHRcdFx0XHRjb21wdXRlZDtcblx0XHRcdH1cblx0XHR9XG5cdCk7XG59ICk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSxcblx0XHRmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcblxuXHRcdC8vIE1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aFxuXHRcdGpRdWVyeS5mblsgZnVuY05hbWUgXSA9IGZ1bmN0aW9uKCBtYXJnaW4sIHZhbHVlICkge1xuXHRcdFx0dmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gXCJib29sZWFuXCIgKSxcblx0XHRcdFx0ZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyBcIm1hcmdpblwiIDogXCJib3JkZXJcIiApO1xuXG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgdHlwZSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBkb2M7XG5cblx0XHRcdFx0aWYgKCBpc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRcdFx0Ly8gJCggd2luZG93ICkub3V0ZXJXaWR0aC9IZWlnaHQgcmV0dXJuIHcvaCBpbmNsdWRpbmcgc2Nyb2xsYmFycyAoZ2gtMTcyOSlcblx0XHRcdFx0XHRyZXR1cm4gZnVuY05hbWUuaW5kZXhPZiggXCJvdXRlclwiICkgPT09IDAgP1xuXHRcdFx0XHRcdFx0ZWxlbVsgXCJpbm5lclwiICsgbmFtZSBdIDpcblx0XHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cblx0XHRcdFx0XHQvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cblx0XHRcdFx0XHQvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcblx0XHRcdH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlICk7XG5cdFx0fTtcblx0fSApO1xufSApO1xuXG5cbmpRdWVyeS5lYWNoKCAoIFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgXCIgK1xuXHRcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcblx0XCJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51XCIgKS5zcGxpdCggXCIgXCIgKSxcblx0ZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cblx0Ly8gSGFuZGxlIGV2ZW50IGJpbmRpbmdcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdHRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOlxuXHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0aG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuXHRcdHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuXHR9XG59ICk7XG5cblxuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHRiaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7XG5cdH0sXG5cblx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkge1xuXG5cdFx0Ly8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cblx0XHRcdHRoaXMub2ZmKCBzZWxlY3RvciwgXCIqKlwiICkgOlxuXHRcdFx0dGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0gKTtcblxuLy8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG4vLyBhcmd1bWVudHMuXG4vLyBqUXVlcnkucHJveHkgaXMgZGVwcmVjYXRlZCB0byBwcm9tb3RlIHN0YW5kYXJkcyAoc3BlY2lmaWNhbGx5IEZ1bmN0aW9uI2JpbmQpXG4vLyBIb3dldmVyLCBpdCBpcyBub3Qgc2xhdGVkIGZvciByZW1vdmFsIGFueSB0aW1lIHNvb25cbmpRdWVyeS5wcm94eSA9IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcblx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHR0bXAgPSBmblsgY29udGV4dCBdO1xuXHRcdGNvbnRleHQgPSBmbjtcblx0XHRmbiA9IHRtcDtcblx0fVxuXG5cdC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG5cdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdGlmICggIWlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXG5cdC8vIFNpbXVsYXRlZCBiaW5kXG5cdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcblx0cHJveHkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0fTtcblxuXHQvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcblx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0cmV0dXJuIHByb3h5O1xufTtcblxualF1ZXJ5LmhvbGRSZWFkeSA9IGZ1bmN0aW9uKCBob2xkICkge1xuXHRpZiAoIGhvbGQgKSB7XG5cdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHR9IGVsc2Uge1xuXHRcdGpRdWVyeS5yZWFkeSggdHJ1ZSApO1xuXHR9XG59O1xualF1ZXJ5LmlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xualF1ZXJ5LnBhcnNlSlNPTiA9IEpTT04ucGFyc2U7XG5qUXVlcnkubm9kZU5hbWUgPSBub2RlTmFtZTtcbmpRdWVyeS5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbmpRdWVyeS5pc1dpbmRvdyA9IGlzV2luZG93O1xualF1ZXJ5LmNhbWVsQ2FzZSA9IGNhbWVsQ2FzZTtcbmpRdWVyeS50eXBlID0gdG9UeXBlO1xuXG5qUXVlcnkubm93ID0gRGF0ZS5ub3c7XG5cbmpRdWVyeS5pc051bWVyaWMgPSBmdW5jdGlvbiggb2JqICkge1xuXG5cdC8vIEFzIG9mIGpRdWVyeSAzLjAsIGlzTnVtZXJpYyBpcyBsaW1pdGVkIHRvXG5cdC8vIHN0cmluZ3MgYW5kIG51bWJlcnMgKHByaW1pdGl2ZXMgb3Igb2JqZWN0cylcblx0Ly8gdGhhdCBjYW4gYmUgY29lcmNlZCB0byBmaW5pdGUgbnVtYmVycyAoZ2gtMjY2Milcblx0dmFyIHR5cGUgPSBqUXVlcnkudHlwZSggb2JqICk7XG5cdHJldHVybiAoIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJzdHJpbmdcIiApICYmXG5cblx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAoXCJcIilcblx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0Ly8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdFx0IWlzTmFOKCBvYmogLSBwYXJzZUZsb2F0KCBvYmogKSApO1xufTtcblxuXG5cblxuLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4vLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG4vLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3Rcbi8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbi8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzXG4vLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cbi8vIE5vdGUgdGhhdCBmb3IgbWF4aW11bSBwb3J0YWJpbGl0eSwgbGlicmFyaWVzIHRoYXQgYXJlIG5vdCBqUXVlcnkgc2hvdWxkXG4vLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG4vLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL3dpa2kvVXBkYXRpbmctZXhpc3RpbmctbGlicmFyaWVzI3dpa2ktYW5vblxuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5O1xuXHR9ICk7XG59XG5cblxuXG5cbnZhclxuXG5cdC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuXHQvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuXHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LiQgPSBfJDtcblx0fVxuXG5cdGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTURcbi8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggIW5vR2xvYmFsICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG59ICk7XG4iLCIvKiEgTWFnbmlmaWMgUG9wdXAgLSB2MS4xLjAgLSAyMDE2LTAyLTIwXG4qIGh0dHA6Ly9kaW1zZW1lbm92LmNvbS9wbHVnaW5zL21hZ25pZmljLXBvcHVwL1xuKiBDb3B5cmlnaHQgKGMpIDIwMTYgRG1pdHJ5IFNlbWVub3Y7ICovXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7IFxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgeyBcbiAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuIFxuIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTsgXG4gfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHsgXG4gLy8gTm9kZS9Db21tb25KUyBcbiBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTsgXG4gfSBlbHNlIHsgXG4gLy8gQnJvd3NlciBnbG9iYWxzIFxuIGZhY3Rvcnkod2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8pOyBcbiB9IFxuIH0oZnVuY3Rpb24oJCkgeyBcblxuLyo+PmNvcmUqL1xuLyoqXG4gKiBcbiAqIE1hZ25pZmljIFBvcHVwIENvcmUgSlMgZmlsZVxuICogXG4gKi9cblxuXG4vKipcbiAqIFByaXZhdGUgc3RhdGljIGNvbnN0YW50c1xuICovXG52YXIgQ0xPU0VfRVZFTlQgPSAnQ2xvc2UnLFxuXHRCRUZPUkVfQ0xPU0VfRVZFTlQgPSAnQmVmb3JlQ2xvc2UnLFxuXHRBRlRFUl9DTE9TRV9FVkVOVCA9ICdBZnRlckNsb3NlJyxcblx0QkVGT1JFX0FQUEVORF9FVkVOVCA9ICdCZWZvcmVBcHBlbmQnLFxuXHRNQVJLVVBfUEFSU0VfRVZFTlQgPSAnTWFya3VwUGFyc2UnLFxuXHRPUEVOX0VWRU5UID0gJ09wZW4nLFxuXHRDSEFOR0VfRVZFTlQgPSAnQ2hhbmdlJyxcblx0TlMgPSAnbWZwJyxcblx0RVZFTlRfTlMgPSAnLicgKyBOUyxcblx0UkVBRFlfQ0xBU1MgPSAnbWZwLXJlYWR5Jyxcblx0UkVNT1ZJTkdfQ0xBU1MgPSAnbWZwLXJlbW92aW5nJyxcblx0UFJFVkVOVF9DTE9TRV9DTEFTUyA9ICdtZnAtcHJldmVudC1jbG9zZSc7XG5cblxuLyoqXG4gKiBQcml2YXRlIHZhcnMgXG4gKi9cbi8qanNoaW50IC1XMDc5ICovXG52YXIgbWZwLCAvLyBBcyB3ZSBoYXZlIG9ubHkgb25lIGluc3RhbmNlIG9mIE1hZ25pZmljUG9wdXAgb2JqZWN0LCB3ZSBkZWZpbmUgaXQgbG9jYWxseSB0byBub3QgdG8gdXNlICd0aGlzJ1xuXHRNYWduaWZpY1BvcHVwID0gZnVuY3Rpb24oKXt9LFxuXHRfaXNKUSA9ICEhKHdpbmRvdy5qUXVlcnkpLFxuXHRfcHJldlN0YXR1cyxcblx0X3dpbmRvdyA9ICQod2luZG93KSxcblx0X2RvY3VtZW50LFxuXHRfcHJldkNvbnRlbnRUeXBlLFxuXHRfd3JhcENsYXNzZXMsXG5cdF9jdXJyUG9wdXBUeXBlO1xuXG5cbi8qKlxuICogUHJpdmF0ZSBmdW5jdGlvbnNcbiAqL1xudmFyIF9tZnBPbiA9IGZ1bmN0aW9uKG5hbWUsIGYpIHtcblx0XHRtZnAuZXYub24oTlMgKyBuYW1lICsgRVZFTlRfTlMsIGYpO1xuXHR9LFxuXHRfZ2V0RWwgPSBmdW5jdGlvbihjbGFzc05hbWUsIGFwcGVuZFRvLCBodG1sLCByYXcpIHtcblx0XHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRlbC5jbGFzc05hbWUgPSAnbWZwLScrY2xhc3NOYW1lO1xuXHRcdGlmKGh0bWwpIHtcblx0XHRcdGVsLmlubmVySFRNTCA9IGh0bWw7XG5cdFx0fVxuXHRcdGlmKCFyYXcpIHtcblx0XHRcdGVsID0gJChlbCk7XG5cdFx0XHRpZihhcHBlbmRUbykge1xuXHRcdFx0XHRlbC5hcHBlbmRUbyhhcHBlbmRUbyk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKGFwcGVuZFRvKSB7XG5cdFx0XHRhcHBlbmRUby5hcHBlbmRDaGlsZChlbCk7XG5cdFx0fVxuXHRcdHJldHVybiBlbDtcblx0fSxcblx0X21mcFRyaWdnZXIgPSBmdW5jdGlvbihlLCBkYXRhKSB7XG5cdFx0bWZwLmV2LnRyaWdnZXJIYW5kbGVyKE5TICsgZSwgZGF0YSk7XG5cblx0XHRpZihtZnAuc3QuY2FsbGJhY2tzKSB7XG5cdFx0XHQvLyBjb252ZXJ0cyBcIm1mcEV2ZW50TmFtZVwiIHRvIFwiZXZlbnROYW1lXCIgY2FsbGJhY2sgYW5kIHRyaWdnZXJzIGl0IGlmIGl0J3MgcHJlc2VudFxuXHRcdFx0ZSA9IGUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBlLnNsaWNlKDEpO1xuXHRcdFx0aWYobWZwLnN0LmNhbGxiYWNrc1tlXSkge1xuXHRcdFx0XHRtZnAuc3QuY2FsbGJhY2tzW2VdLmFwcGx5KG1mcCwgJC5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRfZ2V0Q2xvc2VCdG4gPSBmdW5jdGlvbih0eXBlKSB7XG5cdFx0aWYodHlwZSAhPT0gX2N1cnJQb3B1cFR5cGUgfHwgIW1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4pIHtcblx0XHRcdG1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4gPSAkKCBtZnAuc3QuY2xvc2VNYXJrdXAucmVwbGFjZSgnJXRpdGxlJScsIG1mcC5zdC50Q2xvc2UgKSApO1xuXHRcdFx0X2N1cnJQb3B1cFR5cGUgPSB0eXBlO1xuXHRcdH1cblx0XHRyZXR1cm4gbWZwLmN1cnJUZW1wbGF0ZS5jbG9zZUJ0bjtcblx0fSxcblx0Ly8gSW5pdGlhbGl6ZSBNYWduaWZpYyBQb3B1cCBvbmx5IHdoZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2Vcblx0X2NoZWNrSW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcblx0XHRpZighJC5tYWduaWZpY1BvcHVwLmluc3RhbmNlKSB7XG5cdFx0XHQvKmpzaGludCAtVzAyMCAqL1xuXHRcdFx0bWZwID0gbmV3IE1hZ25pZmljUG9wdXAoKTtcblx0XHRcdG1mcC5pbml0KCk7XG5cdFx0XHQkLm1hZ25pZmljUG9wdXAuaW5zdGFuY2UgPSBtZnA7XG5cdFx0fVxuXHR9LFxuXHQvLyBDU1MgdHJhbnNpdGlvbiBkZXRlY3Rpb24sIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzI2NDg5OS9kZXRlY3QtY3NzLXRyYW5zaXRpb25zLXVzaW5nLWphdmFzY3JpcHQtYW5kLXdpdGhvdXQtbW9kZXJuaXpyXG5cdHN1cHBvcnRzVHJhbnNpdGlvbnMgPSBmdW5jdGlvbigpIHtcblx0XHR2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKS5zdHlsZSwgLy8gJ3MnIGZvciBzdHlsZS4gYmV0dGVyIHRvIGNyZWF0ZSBhbiBlbGVtZW50IGlmIGJvZHkgeWV0IHRvIGV4aXN0XG5cdFx0XHR2ID0gWydtcycsJ08nLCdNb3onLCdXZWJraXQnXTsgLy8gJ3YnIGZvciB2ZW5kb3JcblxuXHRcdGlmKCBzWyd0cmFuc2l0aW9uJ10gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiB0cnVlOyBcblx0XHR9XG5cdFx0XHRcblx0XHR3aGlsZSggdi5sZW5ndGggKSB7XG5cdFx0XHRpZiggdi5wb3AoKSArICdUcmFuc2l0aW9uJyBpbiBzICkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XHRcdFxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcblxuXG5cbi8qKlxuICogUHVibGljIGZ1bmN0aW9uc1xuICovXG5NYWduaWZpY1BvcHVwLnByb3RvdHlwZSA9IHtcblxuXHRjb25zdHJ1Y3RvcjogTWFnbmlmaWNQb3B1cCxcblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgTWFnbmlmaWMgUG9wdXAgcGx1Z2luLiBcblx0ICogVGhpcyBmdW5jdGlvbiBpcyB0cmlnZ2VyZWQgb25seSBvbmNlIHdoZW4gJC5mbi5tYWduaWZpY1BvcHVwIG9yICQubWFnbmlmaWNQb3B1cCBpcyBleGVjdXRlZFxuXHQgKi9cblx0aW5pdDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGFwcFZlcnNpb24gPSBuYXZpZ2F0b3IuYXBwVmVyc2lvbjtcblx0XHRtZnAuaXNMb3dJRSA9IG1mcC5pc0lFOCA9IGRvY3VtZW50LmFsbCAmJiAhZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcjtcblx0XHRtZnAuaXNBbmRyb2lkID0gKC9hbmRyb2lkL2dpKS50ZXN0KGFwcFZlcnNpb24pO1xuXHRcdG1mcC5pc0lPUyA9ICgvaXBob25lfGlwYWR8aXBvZC9naSkudGVzdChhcHBWZXJzaW9uKTtcblx0XHRtZnAuc3VwcG9ydHNUcmFuc2l0aW9uID0gc3VwcG9ydHNUcmFuc2l0aW9ucygpO1xuXG5cdFx0Ly8gV2UgZGlzYWJsZSBmaXhlZCBwb3NpdGlvbmVkIGxpZ2h0Ym94IG9uIGRldmljZXMgdGhhdCBkb24ndCBoYW5kbGUgaXQgbmljZWx5LlxuXHRcdC8vIElmIHlvdSBrbm93IGEgYmV0dGVyIHdheSBvZiBkZXRlY3RpbmcgdGhpcyAtIGxldCBtZSBrbm93LlxuXHRcdG1mcC5wcm9iYWJseU1vYmlsZSA9IChtZnAuaXNBbmRyb2lkIHx8IG1mcC5pc0lPUyB8fCAvKE9wZXJhIE1pbmkpfEtpbmRsZXx3ZWJPU3xCbGFja0JlcnJ5fChPcGVyYSBNb2JpKXwoV2luZG93cyBQaG9uZSl8SUVNb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICk7XG5cdFx0X2RvY3VtZW50ID0gJChkb2N1bWVudCk7XG5cblx0XHRtZnAucG9wdXBzQ2FjaGUgPSB7fTtcblx0fSxcblxuXHQvKipcblx0ICogT3BlbnMgcG9wdXBcblx0ICogQHBhcmFtICBkYXRhIFtkZXNjcmlwdGlvbl1cblx0ICovXG5cdG9wZW46IGZ1bmN0aW9uKGRhdGEpIHtcblxuXHRcdHZhciBpO1xuXG5cdFx0aWYoZGF0YS5pc09iaiA9PT0gZmFsc2UpIHsgXG5cdFx0XHQvLyBjb252ZXJ0IGpRdWVyeSBjb2xsZWN0aW9uIHRvIGFycmF5IHRvIGF2b2lkIGNvbmZsaWN0cyBsYXRlclxuXHRcdFx0bWZwLml0ZW1zID0gZGF0YS5pdGVtcy50b0FycmF5KCk7XG5cblx0XHRcdG1mcC5pbmRleCA9IDA7XG5cdFx0XHR2YXIgaXRlbXMgPSBkYXRhLml0ZW1zLFxuXHRcdFx0XHRpdGVtO1xuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aXRlbSA9IGl0ZW1zW2ldO1xuXHRcdFx0XHRpZihpdGVtLnBhcnNlZCkge1xuXHRcdFx0XHRcdGl0ZW0gPSBpdGVtLmVsWzBdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGl0ZW0gPT09IGRhdGEuZWxbMF0pIHtcblx0XHRcdFx0XHRtZnAuaW5kZXggPSBpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1mcC5pdGVtcyA9ICQuaXNBcnJheShkYXRhLml0ZW1zKSA/IGRhdGEuaXRlbXMgOiBbZGF0YS5pdGVtc107XG5cdFx0XHRtZnAuaW5kZXggPSBkYXRhLmluZGV4IHx8IDA7XG5cdFx0fVxuXG5cdFx0Ly8gaWYgcG9wdXAgaXMgYWxyZWFkeSBvcGVuZWQgLSB3ZSBqdXN0IHVwZGF0ZSB0aGUgY29udGVudFxuXHRcdGlmKG1mcC5pc09wZW4pIHtcblx0XHRcdG1mcC51cGRhdGVJdGVtSFRNTCgpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRtZnAudHlwZXMgPSBbXTsgXG5cdFx0X3dyYXBDbGFzc2VzID0gJyc7XG5cdFx0aWYoZGF0YS5tYWluRWwgJiYgZGF0YS5tYWluRWwubGVuZ3RoKSB7XG5cdFx0XHRtZnAuZXYgPSBkYXRhLm1haW5FbC5lcSgwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWZwLmV2ID0gX2RvY3VtZW50O1xuXHRcdH1cblxuXHRcdGlmKGRhdGEua2V5KSB7XG5cdFx0XHRpZighbWZwLnBvcHVwc0NhY2hlW2RhdGEua2V5XSkge1xuXHRcdFx0XHRtZnAucG9wdXBzQ2FjaGVbZGF0YS5rZXldID0ge307XG5cdFx0XHR9XG5cdFx0XHRtZnAuY3VyclRlbXBsYXRlID0gbWZwLnBvcHVwc0NhY2hlW2RhdGEua2V5XTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWZwLmN1cnJUZW1wbGF0ZSA9IHt9O1xuXHRcdH1cblxuXG5cblx0XHRtZnAuc3QgPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5tYWduaWZpY1BvcHVwLmRlZmF1bHRzLCBkYXRhICk7IFxuXHRcdG1mcC5maXhlZENvbnRlbnRQb3MgPSBtZnAuc3QuZml4ZWRDb250ZW50UG9zID09PSAnYXV0bycgPyAhbWZwLnByb2JhYmx5TW9iaWxlIDogbWZwLnN0LmZpeGVkQ29udGVudFBvcztcblxuXHRcdGlmKG1mcC5zdC5tb2RhbCkge1xuXHRcdFx0bWZwLnN0LmNsb3NlT25Db250ZW50Q2xpY2sgPSBmYWxzZTtcblx0XHRcdG1mcC5zdC5jbG9zZU9uQmdDbGljayA9IGZhbHNlO1xuXHRcdFx0bWZwLnN0LnNob3dDbG9zZUJ0biA9IGZhbHNlO1xuXHRcdFx0bWZwLnN0LmVuYWJsZUVzY2FwZUtleSA9IGZhbHNlO1xuXHRcdH1cblx0XHRcblxuXHRcdC8vIEJ1aWxkaW5nIG1hcmt1cFxuXHRcdC8vIG1haW4gY29udGFpbmVycyBhcmUgY3JlYXRlZCBvbmx5IG9uY2Vcblx0XHRpZighbWZwLmJnT3ZlcmxheSkge1xuXG5cdFx0XHQvLyBEYXJrIG92ZXJsYXlcblx0XHRcdG1mcC5iZ092ZXJsYXkgPSBfZ2V0RWwoJ2JnJykub24oJ2NsaWNrJytFVkVOVF9OUywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG1mcC5jbG9zZSgpO1xuXHRcdFx0fSk7XG5cblx0XHRcdG1mcC53cmFwID0gX2dldEVsKCd3cmFwJykuYXR0cigndGFiaW5kZXgnLCAtMSkub24oJ2NsaWNrJytFVkVOVF9OUywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRpZihtZnAuX2NoZWNrSWZDbG9zZShlLnRhcmdldCkpIHtcblx0XHRcdFx0XHRtZnAuY2xvc2UoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1mcC5jb250YWluZXIgPSBfZ2V0RWwoJ2NvbnRhaW5lcicsIG1mcC53cmFwKTtcblx0XHR9XG5cblx0XHRtZnAuY29udGVudENvbnRhaW5lciA9IF9nZXRFbCgnY29udGVudCcpO1xuXHRcdGlmKG1mcC5zdC5wcmVsb2FkZXIpIHtcblx0XHRcdG1mcC5wcmVsb2FkZXIgPSBfZ2V0RWwoJ3ByZWxvYWRlcicsIG1mcC5jb250YWluZXIsIG1mcC5zdC50TG9hZGluZyk7XG5cdFx0fVxuXG5cblx0XHQvLyBJbml0aWFsaXppbmcgbW9kdWxlc1xuXHRcdHZhciBtb2R1bGVzID0gJC5tYWduaWZpY1BvcHVwLm1vZHVsZXM7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIG4gPSBtb2R1bGVzW2ldO1xuXHRcdFx0biA9IG4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuLnNsaWNlKDEpO1xuXHRcdFx0bWZwWydpbml0JytuXS5jYWxsKG1mcCk7XG5cdFx0fVxuXHRcdF9tZnBUcmlnZ2VyKCdCZWZvcmVPcGVuJyk7XG5cblxuXHRcdGlmKG1mcC5zdC5zaG93Q2xvc2VCdG4pIHtcblx0XHRcdC8vIENsb3NlIGJ1dHRvblxuXHRcdFx0aWYoIW1mcC5zdC5jbG9zZUJ0bkluc2lkZSkge1xuXHRcdFx0XHRtZnAud3JhcC5hcHBlbmQoIF9nZXRDbG9zZUJ0bigpICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRfbWZwT24oTUFSS1VQX1BBUlNFX0VWRU5ULCBmdW5jdGlvbihlLCB0ZW1wbGF0ZSwgdmFsdWVzLCBpdGVtKSB7XG5cdFx0XHRcdFx0dmFsdWVzLmNsb3NlX3JlcGxhY2VXaXRoID0gX2dldENsb3NlQnRuKGl0ZW0udHlwZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRfd3JhcENsYXNzZXMgKz0gJyBtZnAtY2xvc2UtYnRuLWluJztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihtZnAuc3QuYWxpZ25Ub3ApIHtcblx0XHRcdF93cmFwQ2xhc3NlcyArPSAnIG1mcC1hbGlnbi10b3AnO1xuXHRcdH1cblxuXHRcblxuXHRcdGlmKG1mcC5maXhlZENvbnRlbnRQb3MpIHtcblx0XHRcdG1mcC53cmFwLmNzcyh7XG5cdFx0XHRcdG92ZXJmbG93OiBtZnAuc3Qub3ZlcmZsb3dZLFxuXHRcdFx0XHRvdmVyZmxvd1g6ICdoaWRkZW4nLFxuXHRcdFx0XHRvdmVyZmxvd1k6IG1mcC5zdC5vdmVyZmxvd1lcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtZnAud3JhcC5jc3MoeyBcblx0XHRcdFx0dG9wOiBfd2luZG93LnNjcm9sbFRvcCgpLFxuXHRcdFx0XHRwb3NpdGlvbjogJ2Fic29sdXRlJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmKCBtZnAuc3QuZml4ZWRCZ1BvcyA9PT0gZmFsc2UgfHwgKG1mcC5zdC5maXhlZEJnUG9zID09PSAnYXV0bycgJiYgIW1mcC5maXhlZENvbnRlbnRQb3MpICkge1xuXHRcdFx0bWZwLmJnT3ZlcmxheS5jc3Moe1xuXHRcdFx0XHRoZWlnaHQ6IF9kb2N1bWVudC5oZWlnaHQoKSxcblx0XHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZSdcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdFxuXG5cdFx0aWYobWZwLnN0LmVuYWJsZUVzY2FwZUtleSkge1xuXHRcdFx0Ly8gQ2xvc2Ugb24gRVNDIGtleVxuXHRcdFx0X2RvY3VtZW50Lm9uKCdrZXl1cCcgKyBFVkVOVF9OUywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRpZihlLmtleUNvZGUgPT09IDI3KSB7XG5cdFx0XHRcdFx0bWZwLmNsb3NlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdF93aW5kb3cub24oJ3Jlc2l6ZScgKyBFVkVOVF9OUywgZnVuY3Rpb24oKSB7XG5cdFx0XHRtZnAudXBkYXRlU2l6ZSgpO1xuXHRcdH0pO1xuXG5cblx0XHRpZighbWZwLnN0LmNsb3NlT25Db250ZW50Q2xpY2spIHtcblx0XHRcdF93cmFwQ2xhc3NlcyArPSAnIG1mcC1hdXRvLWN1cnNvcic7XG5cdFx0fVxuXHRcdFxuXHRcdGlmKF93cmFwQ2xhc3Nlcylcblx0XHRcdG1mcC53cmFwLmFkZENsYXNzKF93cmFwQ2xhc3Nlcyk7XG5cblxuXHRcdC8vIHRoaXMgdHJpZ2dlcnMgcmVjYWxjdWxhdGlvbiBvZiBsYXlvdXQsIHNvIHdlIGdldCBpdCBvbmNlIHRvIG5vdCB0byB0cmlnZ2VyIHR3aWNlXG5cdFx0dmFyIHdpbmRvd0hlaWdodCA9IG1mcC53SCA9IF93aW5kb3cuaGVpZ2h0KCk7XG5cblx0XHRcblx0XHR2YXIgd2luZG93U3R5bGVzID0ge307XG5cblx0XHRpZiggbWZwLmZpeGVkQ29udGVudFBvcyApIHtcbiAgICAgICAgICAgIGlmKG1mcC5faGFzU2Nyb2xsQmFyKHdpbmRvd0hlaWdodCkpe1xuICAgICAgICAgICAgICAgIHZhciBzID0gbWZwLl9nZXRTY3JvbGxiYXJTaXplKCk7XG4gICAgICAgICAgICAgICAgaWYocykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dTdHlsZXMubWFyZ2luUmlnaHQgPSBzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cdFx0aWYobWZwLmZpeGVkQ29udGVudFBvcykge1xuXHRcdFx0aWYoIW1mcC5pc0lFNykge1xuXHRcdFx0XHR3aW5kb3dTdHlsZXMub3ZlcmZsb3cgPSAnaGlkZGVuJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIGllNyBkb3VibGUtc2Nyb2xsIGJ1Z1xuXHRcdFx0XHQkKCdib2R5LCBodG1sJykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRcblx0XHRcblx0XHR2YXIgY2xhc3Nlc1RvYWRkID0gbWZwLnN0Lm1haW5DbGFzcztcblx0XHRpZihtZnAuaXNJRTcpIHtcblx0XHRcdGNsYXNzZXNUb2FkZCArPSAnIG1mcC1pZTcnO1xuXHRcdH1cblx0XHRpZihjbGFzc2VzVG9hZGQpIHtcblx0XHRcdG1mcC5fYWRkQ2xhc3NUb01GUCggY2xhc3Nlc1RvYWRkICk7XG5cdFx0fVxuXG5cdFx0Ly8gYWRkIGNvbnRlbnRcblx0XHRtZnAudXBkYXRlSXRlbUhUTUwoKTtcblxuXHRcdF9tZnBUcmlnZ2VyKCdCdWlsZENvbnRyb2xzJyk7XG5cblx0XHQvLyByZW1vdmUgc2Nyb2xsYmFyLCBhZGQgbWFyZ2luIGUudC5jXG5cdFx0JCgnaHRtbCcpLmNzcyh3aW5kb3dTdHlsZXMpO1xuXHRcdFxuXHRcdC8vIGFkZCBldmVyeXRoaW5nIHRvIERPTVxuXHRcdG1mcC5iZ092ZXJsYXkuYWRkKG1mcC53cmFwKS5wcmVwZW5kVG8oIG1mcC5zdC5wcmVwZW5kVG8gfHwgJChkb2N1bWVudC5ib2R5KSApO1xuXG5cdFx0Ly8gU2F2ZSBsYXN0IGZvY3VzZWQgZWxlbWVudFxuXHRcdG1mcC5fbGFzdEZvY3VzZWRFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cdFx0XG5cdFx0Ly8gV2FpdCBmb3IgbmV4dCBjeWNsZSB0byBhbGxvdyBDU1MgdHJhbnNpdGlvblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcblx0XHRcdGlmKG1mcC5jb250ZW50KSB7XG5cdFx0XHRcdG1mcC5fYWRkQ2xhc3NUb01GUChSRUFEWV9DTEFTUyk7XG5cdFx0XHRcdG1mcC5fc2V0Rm9jdXMoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIGlmIGNvbnRlbnQgaXMgbm90IGRlZmluZWQgKG5vdCBsb2FkZWQgZS50LmMpIHdlIGFkZCBjbGFzcyBvbmx5IGZvciBCR1xuXHRcdFx0XHRtZnAuYmdPdmVybGF5LmFkZENsYXNzKFJFQURZX0NMQVNTKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gVHJhcCB0aGUgZm9jdXMgaW4gcG9wdXBcblx0XHRcdF9kb2N1bWVudC5vbignZm9jdXNpbicgKyBFVkVOVF9OUywgbWZwLl9vbkZvY3VzSW4pO1xuXG5cdFx0fSwgMTYpO1xuXG5cdFx0bWZwLmlzT3BlbiA9IHRydWU7XG5cdFx0bWZwLnVwZGF0ZVNpemUod2luZG93SGVpZ2h0KTtcblx0XHRfbWZwVHJpZ2dlcihPUEVOX0VWRU5UKTtcblxuXHRcdHJldHVybiBkYXRhO1xuXHR9LFxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgdGhlIHBvcHVwXG5cdCAqL1xuXHRjbG9zZTogZnVuY3Rpb24oKSB7XG5cdFx0aWYoIW1mcC5pc09wZW4pIHJldHVybjtcblx0XHRfbWZwVHJpZ2dlcihCRUZPUkVfQ0xPU0VfRVZFTlQpO1xuXG5cdFx0bWZwLmlzT3BlbiA9IGZhbHNlO1xuXHRcdC8vIGZvciBDU1MzIGFuaW1hdGlvblxuXHRcdGlmKG1mcC5zdC5yZW1vdmFsRGVsYXkgJiYgIW1mcC5pc0xvd0lFICYmIG1mcC5zdXBwb3J0c1RyYW5zaXRpb24gKSAge1xuXHRcdFx0bWZwLl9hZGRDbGFzc1RvTUZQKFJFTU9WSU5HX0NMQVNTKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG1mcC5fY2xvc2UoKTtcblx0XHRcdH0sIG1mcC5zdC5yZW1vdmFsRGVsYXkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtZnAuX2Nsb3NlKCk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qKlxuXHQgKiBIZWxwZXIgZm9yIGNsb3NlKCkgZnVuY3Rpb25cblx0ICovXG5cdF9jbG9zZTogZnVuY3Rpb24oKSB7XG5cdFx0X21mcFRyaWdnZXIoQ0xPU0VfRVZFTlQpO1xuXG5cdFx0dmFyIGNsYXNzZXNUb1JlbW92ZSA9IFJFTU9WSU5HX0NMQVNTICsgJyAnICsgUkVBRFlfQ0xBU1MgKyAnICc7XG5cblx0XHRtZnAuYmdPdmVybGF5LmRldGFjaCgpO1xuXHRcdG1mcC53cmFwLmRldGFjaCgpO1xuXHRcdG1mcC5jb250YWluZXIuZW1wdHkoKTtcblxuXHRcdGlmKG1mcC5zdC5tYWluQ2xhc3MpIHtcblx0XHRcdGNsYXNzZXNUb1JlbW92ZSArPSBtZnAuc3QubWFpbkNsYXNzICsgJyAnO1xuXHRcdH1cblxuXHRcdG1mcC5fcmVtb3ZlQ2xhc3NGcm9tTUZQKGNsYXNzZXNUb1JlbW92ZSk7XG5cblx0XHRpZihtZnAuZml4ZWRDb250ZW50UG9zKSB7XG5cdFx0XHR2YXIgd2luZG93U3R5bGVzID0ge21hcmdpblJpZ2h0OiAnJ307XG5cdFx0XHRpZihtZnAuaXNJRTcpIHtcblx0XHRcdFx0JCgnYm9keSwgaHRtbCcpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aW5kb3dTdHlsZXMub3ZlcmZsb3cgPSAnJztcblx0XHRcdH1cblx0XHRcdCQoJ2h0bWwnKS5jc3Mod2luZG93U3R5bGVzKTtcblx0XHR9XG5cdFx0XG5cdFx0X2RvY3VtZW50Lm9mZigna2V5dXAnICsgRVZFTlRfTlMgKyAnIGZvY3VzaW4nICsgRVZFTlRfTlMpO1xuXHRcdG1mcC5ldi5vZmYoRVZFTlRfTlMpO1xuXG5cdFx0Ly8gY2xlYW4gdXAgRE9NIGVsZW1lbnRzIHRoYXQgYXJlbid0IHJlbW92ZWRcblx0XHRtZnAud3JhcC5hdHRyKCdjbGFzcycsICdtZnAtd3JhcCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0bWZwLmJnT3ZlcmxheS5hdHRyKCdjbGFzcycsICdtZnAtYmcnKTtcblx0XHRtZnAuY29udGFpbmVyLmF0dHIoJ2NsYXNzJywgJ21mcC1jb250YWluZXInKTtcblxuXHRcdC8vIHJlbW92ZSBjbG9zZSBidXR0b24gZnJvbSB0YXJnZXQgZWxlbWVudFxuXHRcdGlmKG1mcC5zdC5zaG93Q2xvc2VCdG4gJiZcblx0XHQoIW1mcC5zdC5jbG9zZUJ0bkluc2lkZSB8fCBtZnAuY3VyclRlbXBsYXRlW21mcC5jdXJySXRlbS50eXBlXSA9PT0gdHJ1ZSkpIHtcblx0XHRcdGlmKG1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4pXG5cdFx0XHRcdG1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4uZGV0YWNoKCk7XG5cdFx0fVxuXG5cblx0XHRpZihtZnAuc3QuYXV0b0ZvY3VzTGFzdCAmJiBtZnAuX2xhc3RGb2N1c2VkRWwpIHtcblx0XHRcdCQobWZwLl9sYXN0Rm9jdXNlZEVsKS5mb2N1cygpOyAvLyBwdXQgdGFiIGZvY3VzIGJhY2tcblx0XHR9XG5cdFx0bWZwLmN1cnJJdGVtID0gbnVsbDtcdFxuXHRcdG1mcC5jb250ZW50ID0gbnVsbDtcblx0XHRtZnAuY3VyclRlbXBsYXRlID0gbnVsbDtcblx0XHRtZnAucHJldkhlaWdodCA9IDA7XG5cblx0XHRfbWZwVHJpZ2dlcihBRlRFUl9DTE9TRV9FVkVOVCk7XG5cdH0sXG5cdFxuXHR1cGRhdGVTaXplOiBmdW5jdGlvbih3aW5IZWlnaHQpIHtcblxuXHRcdGlmKG1mcC5pc0lPUykge1xuXHRcdFx0Ly8gZml4ZXMgaU9TIG5hdiBiYXJzIGh0dHBzOi8vZ2l0aHViLmNvbS9kaW1zZW1lbm92L01hZ25pZmljLVBvcHVwL2lzc3Vlcy8yXG5cdFx0XHR2YXIgem9vbUxldmVsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIC8gd2luZG93LmlubmVyV2lkdGg7XG5cdFx0XHR2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICogem9vbUxldmVsO1xuXHRcdFx0bWZwLndyYXAuY3NzKCdoZWlnaHQnLCBoZWlnaHQpO1xuXHRcdFx0bWZwLndIID0gaGVpZ2h0O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtZnAud0ggPSB3aW5IZWlnaHQgfHwgX3dpbmRvdy5oZWlnaHQoKTtcblx0XHR9XG5cdFx0Ly8gRml4ZXMgIzg0OiBwb3B1cCBpbmNvcnJlY3RseSBwb3NpdGlvbmVkIHdpdGggcG9zaXRpb246cmVsYXRpdmUgb24gYm9keVxuXHRcdGlmKCFtZnAuZml4ZWRDb250ZW50UG9zKSB7XG5cdFx0XHRtZnAud3JhcC5jc3MoJ2hlaWdodCcsIG1mcC53SCk7XG5cdFx0fVxuXG5cdFx0X21mcFRyaWdnZXIoJ1Jlc2l6ZScpO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFNldCBjb250ZW50IG9mIHBvcHVwIGJhc2VkIG9uIGN1cnJlbnQgaW5kZXhcblx0ICovXG5cdHVwZGF0ZUl0ZW1IVE1MOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaXRlbSA9IG1mcC5pdGVtc1ttZnAuaW5kZXhdO1xuXG5cdFx0Ly8gRGV0YWNoIGFuZCBwZXJmb3JtIG1vZGlmaWNhdGlvbnNcblx0XHRtZnAuY29udGVudENvbnRhaW5lci5kZXRhY2goKTtcblxuXHRcdGlmKG1mcC5jb250ZW50KVxuXHRcdFx0bWZwLmNvbnRlbnQuZGV0YWNoKCk7XG5cblx0XHRpZighaXRlbS5wYXJzZWQpIHtcblx0XHRcdGl0ZW0gPSBtZnAucGFyc2VFbCggbWZwLmluZGV4ICk7XG5cdFx0fVxuXG5cdFx0dmFyIHR5cGUgPSBpdGVtLnR5cGU7XG5cblx0XHRfbWZwVHJpZ2dlcignQmVmb3JlQ2hhbmdlJywgW21mcC5jdXJySXRlbSA/IG1mcC5jdXJySXRlbS50eXBlIDogJycsIHR5cGVdKTtcblx0XHQvLyBCZWZvcmVDaGFuZ2UgZXZlbnQgd29ya3MgbGlrZSBzbzpcblx0XHQvLyBfbWZwT24oJ0JlZm9yZUNoYW5nZScsIGZ1bmN0aW9uKGUsIHByZXZUeXBlLCBuZXdUeXBlKSB7IH0pO1xuXG5cdFx0bWZwLmN1cnJJdGVtID0gaXRlbTtcblxuXHRcdGlmKCFtZnAuY3VyclRlbXBsYXRlW3R5cGVdKSB7XG5cdFx0XHR2YXIgbWFya3VwID0gbWZwLnN0W3R5cGVdID8gbWZwLnN0W3R5cGVdLm1hcmt1cCA6IGZhbHNlO1xuXG5cdFx0XHQvLyBhbGxvd3MgdG8gbW9kaWZ5IG1hcmt1cFxuXHRcdFx0X21mcFRyaWdnZXIoJ0ZpcnN0TWFya3VwUGFyc2UnLCBtYXJrdXApO1xuXG5cdFx0XHRpZihtYXJrdXApIHtcblx0XHRcdFx0bWZwLmN1cnJUZW1wbGF0ZVt0eXBlXSA9ICQobWFya3VwKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIG1hcmt1cCBmb3VuZCB3ZSBqdXN0IGRlZmluZSB0aGF0IHRlbXBsYXRlIGlzIHBhcnNlZFxuXHRcdFx0XHRtZnAuY3VyclRlbXBsYXRlW3R5cGVdID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihfcHJldkNvbnRlbnRUeXBlICYmIF9wcmV2Q29udGVudFR5cGUgIT09IGl0ZW0udHlwZSkge1xuXHRcdFx0bWZwLmNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWZwLScrX3ByZXZDb250ZW50VHlwZSsnLWhvbGRlcicpO1xuXHRcdH1cblxuXHRcdHZhciBuZXdDb250ZW50ID0gbWZwWydnZXQnICsgdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSldKGl0ZW0sIG1mcC5jdXJyVGVtcGxhdGVbdHlwZV0pO1xuXHRcdG1mcC5hcHBlbmRDb250ZW50KG5ld0NvbnRlbnQsIHR5cGUpO1xuXG5cdFx0aXRlbS5wcmVsb2FkZWQgPSB0cnVlO1xuXG5cdFx0X21mcFRyaWdnZXIoQ0hBTkdFX0VWRU5ULCBpdGVtKTtcblx0XHRfcHJldkNvbnRlbnRUeXBlID0gaXRlbS50eXBlO1xuXG5cdFx0Ly8gQXBwZW5kIGNvbnRhaW5lciBiYWNrIGFmdGVyIGl0cyBjb250ZW50IGNoYW5nZWRcblx0XHRtZnAuY29udGFpbmVyLnByZXBlbmQobWZwLmNvbnRlbnRDb250YWluZXIpO1xuXG5cdFx0X21mcFRyaWdnZXIoJ0FmdGVyQ2hhbmdlJyk7XG5cdH0sXG5cblxuXHQvKipcblx0ICogU2V0IEhUTUwgY29udGVudCBvZiBwb3B1cFxuXHQgKi9cblx0YXBwZW5kQ29udGVudDogZnVuY3Rpb24obmV3Q29udGVudCwgdHlwZSkge1xuXHRcdG1mcC5jb250ZW50ID0gbmV3Q29udGVudDtcblxuXHRcdGlmKG5ld0NvbnRlbnQpIHtcblx0XHRcdGlmKG1mcC5zdC5zaG93Q2xvc2VCdG4gJiYgbWZwLnN0LmNsb3NlQnRuSW5zaWRlICYmXG5cdFx0XHRcdG1mcC5jdXJyVGVtcGxhdGVbdHlwZV0gPT09IHRydWUpIHtcblx0XHRcdFx0Ly8gaWYgdGhlcmUgaXMgbm8gbWFya3VwLCB3ZSBqdXN0IGFwcGVuZCBjbG9zZSBidXR0b24gZWxlbWVudCBpbnNpZGVcblx0XHRcdFx0aWYoIW1mcC5jb250ZW50LmZpbmQoJy5tZnAtY2xvc2UnKS5sZW5ndGgpIHtcblx0XHRcdFx0XHRtZnAuY29udGVudC5hcHBlbmQoX2dldENsb3NlQnRuKCkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtZnAuY29udGVudCA9IG5ld0NvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1mcC5jb250ZW50ID0gJyc7XG5cdFx0fVxuXG5cdFx0X21mcFRyaWdnZXIoQkVGT1JFX0FQUEVORF9FVkVOVCk7XG5cdFx0bWZwLmNvbnRhaW5lci5hZGRDbGFzcygnbWZwLScrdHlwZSsnLWhvbGRlcicpO1xuXG5cdFx0bWZwLmNvbnRlbnRDb250YWluZXIuYXBwZW5kKG1mcC5jb250ZW50KTtcblx0fSxcblxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIE1hZ25pZmljIFBvcHVwIGRhdGEgb2JqZWN0IGJhc2VkIG9uIGdpdmVuIGRhdGFcblx0ICogQHBhcmFtICB7aW50fSBpbmRleCBJbmRleCBvZiBpdGVtIHRvIHBhcnNlXG5cdCAqL1xuXHRwYXJzZUVsOiBmdW5jdGlvbihpbmRleCkge1xuXHRcdHZhciBpdGVtID0gbWZwLml0ZW1zW2luZGV4XSxcblx0XHRcdHR5cGU7XG5cblx0XHRpZihpdGVtLnRhZ05hbWUpIHtcblx0XHRcdGl0ZW0gPSB7IGVsOiAkKGl0ZW0pIH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHR5cGUgPSBpdGVtLnR5cGU7XG5cdFx0XHRpdGVtID0geyBkYXRhOiBpdGVtLCBzcmM6IGl0ZW0uc3JjIH07XG5cdFx0fVxuXG5cdFx0aWYoaXRlbS5lbCkge1xuXHRcdFx0dmFyIHR5cGVzID0gbWZwLnR5cGVzO1xuXG5cdFx0XHQvLyBjaGVjayBmb3IgJ21mcC1UWVBFJyBjbGFzc1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmKCBpdGVtLmVsLmhhc0NsYXNzKCdtZnAtJyt0eXBlc1tpXSkgKSB7XG5cdFx0XHRcdFx0dHlwZSA9IHR5cGVzW2ldO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGl0ZW0uc3JjID0gaXRlbS5lbC5hdHRyKCdkYXRhLW1mcC1zcmMnKTtcblx0XHRcdGlmKCFpdGVtLnNyYykge1xuXHRcdFx0XHRpdGVtLnNyYyA9IGl0ZW0uZWwuYXR0cignaHJlZicpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGl0ZW0udHlwZSA9IHR5cGUgfHwgbWZwLnN0LnR5cGUgfHwgJ2lubGluZSc7XG5cdFx0aXRlbS5pbmRleCA9IGluZGV4O1xuXHRcdGl0ZW0ucGFyc2VkID0gdHJ1ZTtcblx0XHRtZnAuaXRlbXNbaW5kZXhdID0gaXRlbTtcblx0XHRfbWZwVHJpZ2dlcignRWxlbWVudFBhcnNlJywgaXRlbSk7XG5cblx0XHRyZXR1cm4gbWZwLml0ZW1zW2luZGV4XTtcblx0fSxcblxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyBzaW5nbGUgcG9wdXAgb3IgYSBncm91cCBvZiBwb3B1cHNcblx0ICovXG5cdGFkZEdyb3VwOiBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xuXHRcdHZhciBlSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdGUubWZwRWwgPSB0aGlzO1xuXHRcdFx0bWZwLl9vcGVuQ2xpY2soZSwgZWwsIG9wdGlvbnMpO1xuXHRcdH07XG5cblx0XHRpZighb3B0aW9ucykge1xuXHRcdFx0b3B0aW9ucyA9IHt9O1xuXHRcdH1cblxuXHRcdHZhciBlTmFtZSA9ICdjbGljay5tYWduaWZpY1BvcHVwJztcblx0XHRvcHRpb25zLm1haW5FbCA9IGVsO1xuXG5cdFx0aWYob3B0aW9ucy5pdGVtcykge1xuXHRcdFx0b3B0aW9ucy5pc09iaiA9IHRydWU7XG5cdFx0XHRlbC5vZmYoZU5hbWUpLm9uKGVOYW1lLCBlSGFuZGxlcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9wdGlvbnMuaXNPYmogPSBmYWxzZTtcblx0XHRcdGlmKG9wdGlvbnMuZGVsZWdhdGUpIHtcblx0XHRcdFx0ZWwub2ZmKGVOYW1lKS5vbihlTmFtZSwgb3B0aW9ucy5kZWxlZ2F0ZSAsIGVIYW5kbGVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9wdGlvbnMuaXRlbXMgPSBlbDtcblx0XHRcdFx0ZWwub2ZmKGVOYW1lKS5vbihlTmFtZSwgZUhhbmRsZXIpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0X29wZW5DbGljazogZnVuY3Rpb24oZSwgZWwsIG9wdGlvbnMpIHtcblx0XHR2YXIgbWlkQ2xpY2sgPSBvcHRpb25zLm1pZENsaWNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pZENsaWNrIDogJC5tYWduaWZpY1BvcHVwLmRlZmF1bHRzLm1pZENsaWNrO1xuXG5cblx0XHRpZighbWlkQ2xpY2sgJiYgKCBlLndoaWNoID09PSAyIHx8IGUuY3RybEtleSB8fCBlLm1ldGFLZXkgfHwgZS5hbHRLZXkgfHwgZS5zaGlmdEtleSApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBkaXNhYmxlT24gPSBvcHRpb25zLmRpc2FibGVPbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kaXNhYmxlT24gOiAkLm1hZ25pZmljUG9wdXAuZGVmYXVsdHMuZGlzYWJsZU9uO1xuXG5cdFx0aWYoZGlzYWJsZU9uKSB7XG5cdFx0XHRpZigkLmlzRnVuY3Rpb24oZGlzYWJsZU9uKSkge1xuXHRcdFx0XHRpZiggIWRpc2FibGVPbi5jYWxsKG1mcCkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7IC8vIGVsc2UgaXQncyBudW1iZXJcblx0XHRcdFx0aWYoIF93aW5kb3cud2lkdGgoKSA8IGRpc2FibGVPbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmKGUudHlwZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHQvLyBUaGlzIHdpbGwgcHJldmVudCBwb3B1cCBmcm9tIGNsb3NpbmcgaWYgZWxlbWVudCBpcyBpbnNpZGUgYW5kIHBvcHVwIGlzIGFscmVhZHkgb3BlbmVkXG5cdFx0XHRpZihtZnAuaXNPcGVuKSB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0b3B0aW9ucy5lbCA9ICQoZS5tZnBFbCk7XG5cdFx0aWYob3B0aW9ucy5kZWxlZ2F0ZSkge1xuXHRcdFx0b3B0aW9ucy5pdGVtcyA9IGVsLmZpbmQob3B0aW9ucy5kZWxlZ2F0ZSk7XG5cdFx0fVxuXHRcdG1mcC5vcGVuKG9wdGlvbnMpO1xuXHR9LFxuXG5cblx0LyoqXG5cdCAqIFVwZGF0ZXMgdGV4dCBvbiBwcmVsb2FkZXJcblx0ICovXG5cdHVwZGF0ZVN0YXR1czogZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7XG5cblx0XHRpZihtZnAucHJlbG9hZGVyKSB7XG5cdFx0XHRpZihfcHJldlN0YXR1cyAhPT0gc3RhdHVzKSB7XG5cdFx0XHRcdG1mcC5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ21mcC1zLScrX3ByZXZTdGF0dXMpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZighdGV4dCAmJiBzdGF0dXMgPT09ICdsb2FkaW5nJykge1xuXHRcdFx0XHR0ZXh0ID0gbWZwLnN0LnRMb2FkaW5nO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0c3RhdHVzOiBzdGF0dXMsXG5cdFx0XHRcdHRleHQ6IHRleHRcblx0XHRcdH07XG5cdFx0XHQvLyBhbGxvd3MgdG8gbW9kaWZ5IHN0YXR1c1xuXHRcdFx0X21mcFRyaWdnZXIoJ1VwZGF0ZVN0YXR1cycsIGRhdGEpO1xuXG5cdFx0XHRzdGF0dXMgPSBkYXRhLnN0YXR1cztcblx0XHRcdHRleHQgPSBkYXRhLnRleHQ7XG5cblx0XHRcdG1mcC5wcmVsb2FkZXIuaHRtbCh0ZXh0KTtcblxuXHRcdFx0bWZwLnByZWxvYWRlci5maW5kKCdhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0fSk7XG5cblx0XHRcdG1mcC5jb250YWluZXIuYWRkQ2xhc3MoJ21mcC1zLScrc3RhdHVzKTtcblx0XHRcdF9wcmV2U3RhdHVzID0gc3RhdHVzO1xuXHRcdH1cblx0fSxcblxuXG5cdC8qXG5cdFx0XCJQcml2YXRlXCIgaGVscGVycyB0aGF0IGFyZW4ndCBwcml2YXRlIGF0IGFsbFxuXHQgKi9cblx0Ly8gQ2hlY2sgdG8gY2xvc2UgcG9wdXAgb3Igbm90XG5cdC8vIFwidGFyZ2V0XCIgaXMgYW4gZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkXG5cdF9jaGVja0lmQ2xvc2U6IGZ1bmN0aW9uKHRhcmdldCkge1xuXG5cdFx0aWYoJCh0YXJnZXQpLmhhc0NsYXNzKFBSRVZFTlRfQ0xPU0VfQ0xBU1MpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIGNsb3NlT25Db250ZW50ID0gbWZwLnN0LmNsb3NlT25Db250ZW50Q2xpY2s7XG5cdFx0dmFyIGNsb3NlT25CZyA9IG1mcC5zdC5jbG9zZU9uQmdDbGljaztcblxuXHRcdGlmKGNsb3NlT25Db250ZW50ICYmIGNsb3NlT25CZykge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gV2UgY2xvc2UgdGhlIHBvcHVwIGlmIGNsaWNrIGlzIG9uIGNsb3NlIGJ1dHRvbiBvciBvbiBwcmVsb2FkZXIuIE9yIGlmIHRoZXJlIGlzIG5vIGNvbnRlbnQuXG5cdFx0XHRpZighbWZwLmNvbnRlbnQgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKCdtZnAtY2xvc2UnKSB8fCAobWZwLnByZWxvYWRlciAmJiB0YXJnZXQgPT09IG1mcC5wcmVsb2FkZXJbMF0pICkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWYgY2xpY2sgaXMgb3V0c2lkZSB0aGUgY29udGVudFxuXHRcdFx0aWYoICAodGFyZ2V0ICE9PSBtZnAuY29udGVudFswXSAmJiAhJC5jb250YWlucyhtZnAuY29udGVudFswXSwgdGFyZ2V0KSkgICkge1xuXHRcdFx0XHRpZihjbG9zZU9uQmcpIHtcblx0XHRcdFx0XHQvLyBsYXN0IGNoZWNrLCBpZiB0aGUgY2xpY2tlZCBlbGVtZW50IGlzIGluIERPTSwgKGluIGNhc2UgaXQncyByZW1vdmVkIG9uY2xpY2spXG5cdFx0XHRcdFx0aWYoICQuY29udGFpbnMoZG9jdW1lbnQsIHRhcmdldCkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihjbG9zZU9uQ29udGVudCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0sXG5cdF9hZGRDbGFzc1RvTUZQOiBmdW5jdGlvbihjTmFtZSkge1xuXHRcdG1mcC5iZ092ZXJsYXkuYWRkQ2xhc3MoY05hbWUpO1xuXHRcdG1mcC53cmFwLmFkZENsYXNzKGNOYW1lKTtcblx0fSxcblx0X3JlbW92ZUNsYXNzRnJvbU1GUDogZnVuY3Rpb24oY05hbWUpIHtcblx0XHR0aGlzLmJnT3ZlcmxheS5yZW1vdmVDbGFzcyhjTmFtZSk7XG5cdFx0bWZwLndyYXAucmVtb3ZlQ2xhc3MoY05hbWUpO1xuXHR9LFxuXHRfaGFzU2Nyb2xsQmFyOiBmdW5jdGlvbih3aW5IZWlnaHQpIHtcblx0XHRyZXR1cm4gKCAgKG1mcC5pc0lFNyA/IF9kb2N1bWVudC5oZWlnaHQoKSA6IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KSA+ICh3aW5IZWlnaHQgfHwgX3dpbmRvdy5oZWlnaHQoKSkgKTtcblx0fSxcblx0X3NldEZvY3VzOiBmdW5jdGlvbigpIHtcblx0XHQobWZwLnN0LmZvY3VzID8gbWZwLmNvbnRlbnQuZmluZChtZnAuc3QuZm9jdXMpLmVxKDApIDogbWZwLndyYXApLmZvY3VzKCk7XG5cdH0sXG5cdF9vbkZvY3VzSW46IGZ1bmN0aW9uKGUpIHtcblx0XHRpZiggZS50YXJnZXQgIT09IG1mcC53cmFwWzBdICYmICEkLmNvbnRhaW5zKG1mcC53cmFwWzBdLCBlLnRhcmdldCkgKSB7XG5cdFx0XHRtZnAuX3NldEZvY3VzKCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9LFxuXHRfcGFyc2VNYXJrdXA6IGZ1bmN0aW9uKHRlbXBsYXRlLCB2YWx1ZXMsIGl0ZW0pIHtcblx0XHR2YXIgYXJyO1xuXHRcdGlmKGl0ZW0uZGF0YSkge1xuXHRcdFx0dmFsdWVzID0gJC5leHRlbmQoaXRlbS5kYXRhLCB2YWx1ZXMpO1xuXHRcdH1cblx0XHRfbWZwVHJpZ2dlcihNQVJLVVBfUEFSU0VfRVZFTlQsIFt0ZW1wbGF0ZSwgdmFsdWVzLCBpdGVtXSApO1xuXG5cdFx0JC5lYWNoKHZhbHVlcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdFx0aWYodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRhcnIgPSBrZXkuc3BsaXQoJ18nKTtcblx0XHRcdGlmKGFyci5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdHZhciBlbCA9IHRlbXBsYXRlLmZpbmQoRVZFTlRfTlMgKyAnLScrYXJyWzBdKTtcblxuXHRcdFx0XHRpZihlbC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0dmFyIGF0dHIgPSBhcnJbMV07XG5cdFx0XHRcdFx0aWYoYXR0ciA9PT0gJ3JlcGxhY2VXaXRoJykge1xuXHRcdFx0XHRcdFx0aWYoZWxbMF0gIT09IHZhbHVlWzBdKSB7XG5cdFx0XHRcdFx0XHRcdGVsLnJlcGxhY2VXaXRoKHZhbHVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYoYXR0ciA9PT0gJ2ltZycpIHtcblx0XHRcdFx0XHRcdGlmKGVsLmlzKCdpbWcnKSkge1xuXHRcdFx0XHRcdFx0XHRlbC5hdHRyKCdzcmMnLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlbC5yZXBsYWNlV2l0aCggJCgnPGltZz4nKS5hdHRyKCdzcmMnLCB2YWx1ZSkuYXR0cignY2xhc3MnLCBlbC5hdHRyKCdjbGFzcycpKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbC5hdHRyKGFyclsxXSwgdmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0ZW1wbGF0ZS5maW5kKEVWRU5UX05TICsgJy0nK2tleSkuaHRtbCh2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0X2dldFNjcm9sbGJhclNpemU6IGZ1bmN0aW9uKCkge1xuXHRcdC8vIHRoeCBEYXZpZFxuXHRcdGlmKG1mcC5zY3JvbGxiYXJTaXplID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0c2Nyb2xsRGl2LnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6IDk5cHg7IGhlaWdodDogOTlweDsgb3ZlcmZsb3c6IHNjcm9sbDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IC05OTk5cHg7Jztcblx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTtcblx0XHRcdG1mcC5zY3JvbGxiYXJTaXplID0gc2Nyb2xsRGl2Lm9mZnNldFdpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuXHRcdH1cblx0XHRyZXR1cm4gbWZwLnNjcm9sbGJhclNpemU7XG5cdH1cblxufTsgLyogTWFnbmlmaWNQb3B1cCBjb3JlIHByb3RvdHlwZSBlbmQgKi9cblxuXG5cblxuLyoqXG4gKiBQdWJsaWMgc3RhdGljIGZ1bmN0aW9uc1xuICovXG4kLm1hZ25pZmljUG9wdXAgPSB7XG5cdGluc3RhbmNlOiBudWxsLFxuXHRwcm90bzogTWFnbmlmaWNQb3B1cC5wcm90b3R5cGUsXG5cdG1vZHVsZXM6IFtdLFxuXG5cdG9wZW46IGZ1bmN0aW9uKG9wdGlvbnMsIGluZGV4KSB7XG5cdFx0X2NoZWNrSW5zdGFuY2UoKTtcblxuXHRcdGlmKCFvcHRpb25zKSB7XG5cdFx0XHRvcHRpb25zID0ge307XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0b3B0aW9ucy5pc09iaiA9IHRydWU7XG5cdFx0b3B0aW9ucy5pbmRleCA9IGluZGV4IHx8IDA7XG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2Uub3BlbihvcHRpb25zKTtcblx0fSxcblxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICQubWFnbmlmaWNQb3B1cC5pbnN0YW5jZSAmJiAkLm1hZ25pZmljUG9wdXAuaW5zdGFuY2UuY2xvc2UoKTtcblx0fSxcblxuXHRyZWdpc3Rlck1vZHVsZTogZnVuY3Rpb24obmFtZSwgbW9kdWxlKSB7XG5cdFx0aWYobW9kdWxlLm9wdGlvbnMpIHtcblx0XHRcdCQubWFnbmlmaWNQb3B1cC5kZWZhdWx0c1tuYW1lXSA9IG1vZHVsZS5vcHRpb25zO1xuXHRcdH1cblx0XHQkLmV4dGVuZCh0aGlzLnByb3RvLCBtb2R1bGUucHJvdG8pO1xuXHRcdHRoaXMubW9kdWxlcy5wdXNoKG5hbWUpO1xuXHR9LFxuXG5cdGRlZmF1bHRzOiB7XG5cblx0XHQvLyBJbmZvIGFib3V0IG9wdGlvbnMgaXMgaW4gZG9jczpcblx0XHQvLyBodHRwOi8vZGltc2VtZW5vdi5jb20vcGx1Z2lucy9tYWduaWZpYy1wb3B1cC9kb2N1bWVudGF0aW9uLmh0bWwjb3B0aW9uc1xuXG5cdFx0ZGlzYWJsZU9uOiAwLFxuXG5cdFx0a2V5OiBudWxsLFxuXG5cdFx0bWlkQ2xpY2s6IGZhbHNlLFxuXG5cdFx0bWFpbkNsYXNzOiAnJyxcblxuXHRcdHByZWxvYWRlcjogdHJ1ZSxcblxuXHRcdGZvY3VzOiAnJywgLy8gQ1NTIHNlbGVjdG9yIG9mIGlucHV0IHRvIGZvY3VzIGFmdGVyIHBvcHVwIGlzIG9wZW5lZFxuXG5cdFx0Y2xvc2VPbkNvbnRlbnRDbGljazogZmFsc2UsXG5cblx0XHRjbG9zZU9uQmdDbGljazogdHJ1ZSxcblxuXHRcdGNsb3NlQnRuSW5zaWRlOiB0cnVlLFxuXG5cdFx0c2hvd0Nsb3NlQnRuOiB0cnVlLFxuXG5cdFx0ZW5hYmxlRXNjYXBlS2V5OiB0cnVlLFxuXG5cdFx0bW9kYWw6IGZhbHNlLFxuXG5cdFx0YWxpZ25Ub3A6IGZhbHNlLFxuXG5cdFx0cmVtb3ZhbERlbGF5OiAwLFxuXG5cdFx0cHJlcGVuZFRvOiBudWxsLFxuXG5cdFx0Zml4ZWRDb250ZW50UG9zOiAnYXV0bycsXG5cblx0XHRmaXhlZEJnUG9zOiAnYXV0bycsXG5cblx0XHRvdmVyZmxvd1k6ICdhdXRvJyxcblxuXHRcdGNsb3NlTWFya3VwOiAnPGJ1dHRvbiB0aXRsZT1cIiV0aXRsZSVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtZnAtY2xvc2VcIj4mIzIxNTs8L2J1dHRvbj4nLFxuXG5cdFx0dENsb3NlOiAnQ2xvc2UgKEVzYyknLFxuXG5cdFx0dExvYWRpbmc6ICdMb2FkaW5nLi4uJyxcblxuXHRcdGF1dG9Gb2N1c0xhc3Q6IHRydWVcblxuXHR9XG59O1xuXG5cblxuJC5mbi5tYWduaWZpY1BvcHVwID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHRfY2hlY2tJbnN0YW5jZSgpO1xuXG5cdHZhciBqcUVsID0gJCh0aGlzKTtcblxuXHQvLyBXZSBjYWxsIHNvbWUgQVBJIG1ldGhvZCBvZiBmaXJzdCBwYXJhbSBpcyBhIHN0cmluZ1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRpZihvcHRpb25zID09PSAnb3BlbicpIHtcblx0XHRcdHZhciBpdGVtcyxcblx0XHRcdFx0aXRlbU9wdHMgPSBfaXNKUSA/IGpxRWwuZGF0YSgnbWFnbmlmaWNQb3B1cCcpIDoganFFbFswXS5tYWduaWZpY1BvcHVwLFxuXHRcdFx0XHRpbmRleCA9IHBhcnNlSW50KGFyZ3VtZW50c1sxXSwgMTApIHx8IDA7XG5cblx0XHRcdGlmKGl0ZW1PcHRzLml0ZW1zKSB7XG5cdFx0XHRcdGl0ZW1zID0gaXRlbU9wdHMuaXRlbXNbaW5kZXhdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aXRlbXMgPSBqcUVsO1xuXHRcdFx0XHRpZihpdGVtT3B0cy5kZWxlZ2F0ZSkge1xuXHRcdFx0XHRcdGl0ZW1zID0gaXRlbXMuZmluZChpdGVtT3B0cy5kZWxlZ2F0ZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aXRlbXMgPSBpdGVtcy5lcSggaW5kZXggKTtcblx0XHRcdH1cblx0XHRcdG1mcC5fb3BlbkNsaWNrKHttZnBFbDppdGVtc30sIGpxRWwsIGl0ZW1PcHRzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYobWZwLmlzT3Blbilcblx0XHRcdFx0bWZwW29wdGlvbnNdLmFwcGx5KG1mcCwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG5cdFx0fVxuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gY2xvbmUgb3B0aW9ucyBvYmpcblx0XHRvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpO1xuXG5cdFx0Lypcblx0XHQgKiBBcyBaZXB0byBkb2Vzbid0IHN1cHBvcnQgLmRhdGEoKSBtZXRob2QgZm9yIG9iamVjdHNcblx0XHQgKiBhbmQgaXQgd29ya3Mgb25seSBpbiBub3JtYWwgYnJvd3NlcnNcblx0XHQgKiB3ZSBhc3NpZ24gXCJvcHRpb25zXCIgb2JqZWN0IGRpcmVjdGx5IHRvIHRoZSBET00gZWxlbWVudC4gRlRXIVxuXHRcdCAqL1xuXHRcdGlmKF9pc0pRKSB7XG5cdFx0XHRqcUVsLmRhdGEoJ21hZ25pZmljUG9wdXAnLCBvcHRpb25zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFFbFswXS5tYWduaWZpY1BvcHVwID0gb3B0aW9ucztcblx0XHR9XG5cblx0XHRtZnAuYWRkR3JvdXAoanFFbCwgb3B0aW9ucyk7XG5cblx0fVxuXHRyZXR1cm4ganFFbDtcbn07XG5cbi8qPj5jb3JlKi9cblxuLyo+PmlubGluZSovXG5cbnZhciBJTkxJTkVfTlMgPSAnaW5saW5lJyxcblx0X2hpZGRlbkNsYXNzLFxuXHRfaW5saW5lUGxhY2Vob2xkZXIsXG5cdF9sYXN0SW5saW5lRWxlbWVudCxcblx0X3B1dElubGluZUVsZW1lbnRzQmFjayA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKF9sYXN0SW5saW5lRWxlbWVudCkge1xuXHRcdFx0X2lubGluZVBsYWNlaG9sZGVyLmFmdGVyKCBfbGFzdElubGluZUVsZW1lbnQuYWRkQ2xhc3MoX2hpZGRlbkNsYXNzKSApLmRldGFjaCgpO1xuXHRcdFx0X2xhc3RJbmxpbmVFbGVtZW50ID0gbnVsbDtcblx0XHR9XG5cdH07XG5cbiQubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShJTkxJTkVfTlMsIHtcblx0b3B0aW9uczoge1xuXHRcdGhpZGRlbkNsYXNzOiAnaGlkZScsIC8vIHdpbGwgYmUgYXBwZW5kZWQgd2l0aCBgbWZwLWAgcHJlZml4XG5cdFx0bWFya3VwOiAnJyxcblx0XHR0Tm90Rm91bmQ6ICdDb250ZW50IG5vdCBmb3VuZCdcblx0fSxcblx0cHJvdG86IHtcblxuXHRcdGluaXRJbmxpbmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0bWZwLnR5cGVzLnB1c2goSU5MSU5FX05TKTtcblxuXHRcdFx0X21mcE9uKENMT1NFX0VWRU5UKycuJytJTkxJTkVfTlMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRfcHV0SW5saW5lRWxlbWVudHNCYWNrKCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0SW5saW5lOiBmdW5jdGlvbihpdGVtLCB0ZW1wbGF0ZSkge1xuXG5cdFx0XHRfcHV0SW5saW5lRWxlbWVudHNCYWNrKCk7XG5cblx0XHRcdGlmKGl0ZW0uc3JjKSB7XG5cdFx0XHRcdHZhciBpbmxpbmVTdCA9IG1mcC5zdC5pbmxpbmUsXG5cdFx0XHRcdFx0ZWwgPSAkKGl0ZW0uc3JjKTtcblxuXHRcdFx0XHRpZihlbC5sZW5ndGgpIHtcblxuXHRcdFx0XHRcdC8vIElmIHRhcmdldCBlbGVtZW50IGhhcyBwYXJlbnQgLSB3ZSByZXBsYWNlIGl0IHdpdGggcGxhY2Vob2xkZXIgYW5kIHB1dCBpdCBiYWNrIGFmdGVyIHBvcHVwIGlzIGNsb3NlZFxuXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBlbFswXS5wYXJlbnROb2RlO1xuXHRcdFx0XHRcdGlmKHBhcmVudCAmJiBwYXJlbnQudGFnTmFtZSkge1xuXHRcdFx0XHRcdFx0aWYoIV9pbmxpbmVQbGFjZWhvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRfaGlkZGVuQ2xhc3MgPSBpbmxpbmVTdC5oaWRkZW5DbGFzcztcblx0XHRcdFx0XHRcdFx0X2lubGluZVBsYWNlaG9sZGVyID0gX2dldEVsKF9oaWRkZW5DbGFzcyk7XG5cdFx0XHRcdFx0XHRcdF9oaWRkZW5DbGFzcyA9ICdtZnAtJytfaGlkZGVuQ2xhc3M7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvLyByZXBsYWNlIHRhcmdldCBpbmxpbmUgZWxlbWVudCB3aXRoIHBsYWNlaG9sZGVyXG5cdFx0XHRcdFx0XHRfbGFzdElubGluZUVsZW1lbnQgPSBlbC5hZnRlcihfaW5saW5lUGxhY2Vob2xkZXIpLmRldGFjaCgpLnJlbW92ZUNsYXNzKF9oaWRkZW5DbGFzcyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bWZwLnVwZGF0ZVN0YXR1cygncmVhZHknKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRtZnAudXBkYXRlU3RhdHVzKCdlcnJvcicsIGlubGluZVN0LnROb3RGb3VuZCk7XG5cdFx0XHRcdFx0ZWwgPSAkKCc8ZGl2PicpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aXRlbS5pbmxpbmVFbGVtZW50ID0gZWw7XG5cdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdH1cblxuXHRcdFx0bWZwLnVwZGF0ZVN0YXR1cygncmVhZHknKTtcblx0XHRcdG1mcC5fcGFyc2VNYXJrdXAodGVtcGxhdGUsIHt9LCBpdGVtKTtcblx0XHRcdHJldHVybiB0ZW1wbGF0ZTtcblx0XHR9XG5cdH1cbn0pO1xuXG4vKj4+aW5saW5lKi9cblxuLyo+PmFqYXgqL1xudmFyIEFKQVhfTlMgPSAnYWpheCcsXG5cdF9hamF4Q3VyLFxuXHRfcmVtb3ZlQWpheEN1cnNvciA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKF9hamF4Q3VyKSB7XG5cdFx0XHQkKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKF9hamF4Q3VyKTtcblx0XHR9XG5cdH0sXG5cdF9kZXN0cm95QWpheFJlcXVlc3QgPSBmdW5jdGlvbigpIHtcblx0XHRfcmVtb3ZlQWpheEN1cnNvcigpO1xuXHRcdGlmKG1mcC5yZXEpIHtcblx0XHRcdG1mcC5yZXEuYWJvcnQoKTtcblx0XHR9XG5cdH07XG5cbiQubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShBSkFYX05TLCB7XG5cblx0b3B0aW9uczoge1xuXHRcdHNldHRpbmdzOiBudWxsLFxuXHRcdGN1cnNvcjogJ21mcC1hamF4LWN1cicsXG5cdFx0dEVycm9yOiAnPGEgaHJlZj1cIiV1cmwlXCI+VGhlIGNvbnRlbnQ8L2E+IGNvdWxkIG5vdCBiZSBsb2FkZWQuJ1xuXHR9LFxuXG5cdHByb3RvOiB7XG5cdFx0aW5pdEFqYXg6IGZ1bmN0aW9uKCkge1xuXHRcdFx0bWZwLnR5cGVzLnB1c2goQUpBWF9OUyk7XG5cdFx0XHRfYWpheEN1ciA9IG1mcC5zdC5hamF4LmN1cnNvcjtcblxuXHRcdFx0X21mcE9uKENMT1NFX0VWRU5UKycuJytBSkFYX05TLCBfZGVzdHJveUFqYXhSZXF1ZXN0KTtcblx0XHRcdF9tZnBPbignQmVmb3JlQ2hhbmdlLicgKyBBSkFYX05TLCBfZGVzdHJveUFqYXhSZXF1ZXN0KTtcblx0XHR9LFxuXHRcdGdldEFqYXg6IGZ1bmN0aW9uKGl0ZW0pIHtcblxuXHRcdFx0aWYoX2FqYXhDdXIpIHtcblx0XHRcdFx0JChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhfYWpheEN1cik7XG5cdFx0XHR9XG5cblx0XHRcdG1mcC51cGRhdGVTdGF0dXMoJ2xvYWRpbmcnKTtcblxuXHRcdFx0dmFyIG9wdHMgPSAkLmV4dGVuZCh7XG5cdFx0XHRcdHVybDogaXRlbS5zcmMsXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG5cdFx0XHRcdFx0dmFyIHRlbXAgPSB7XG5cdFx0XHRcdFx0XHRkYXRhOmRhdGEsXG5cdFx0XHRcdFx0XHR4aHI6anFYSFJcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0X21mcFRyaWdnZXIoJ1BhcnNlQWpheCcsIHRlbXApO1xuXG5cdFx0XHRcdFx0bWZwLmFwcGVuZENvbnRlbnQoICQodGVtcC5kYXRhKSwgQUpBWF9OUyApO1xuXG5cdFx0XHRcdFx0aXRlbS5maW5pc2hlZCA9IHRydWU7XG5cblx0XHRcdFx0XHRfcmVtb3ZlQWpheEN1cnNvcigpO1xuXG5cdFx0XHRcdFx0bWZwLl9zZXRGb2N1cygpO1xuXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdG1mcC53cmFwLmFkZENsYXNzKFJFQURZX0NMQVNTKTtcblx0XHRcdFx0XHR9LCAxNik7XG5cblx0XHRcdFx0XHRtZnAudXBkYXRlU3RhdHVzKCdyZWFkeScpO1xuXG5cdFx0XHRcdFx0X21mcFRyaWdnZXIoJ0FqYXhDb250ZW50QWRkZWQnKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdF9yZW1vdmVBamF4Q3Vyc29yKCk7XG5cdFx0XHRcdFx0aXRlbS5maW5pc2hlZCA9IGl0ZW0ubG9hZEVycm9yID0gdHJ1ZTtcblx0XHRcdFx0XHRtZnAudXBkYXRlU3RhdHVzKCdlcnJvcicsIG1mcC5zdC5hamF4LnRFcnJvci5yZXBsYWNlKCcldXJsJScsIGl0ZW0uc3JjKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIG1mcC5zdC5hamF4LnNldHRpbmdzKTtcblxuXHRcdFx0bWZwLnJlcSA9ICQuYWpheChvcHRzKTtcblxuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qPj5hamF4Ki9cblxuLyo+PmltYWdlKi9cbnZhciBfaW1nSW50ZXJ2YWwsXG5cdF9nZXRUaXRsZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRpZihpdGVtLmRhdGEgJiYgaXRlbS5kYXRhLnRpdGxlICE9PSB1bmRlZmluZWQpXG5cdFx0XHRyZXR1cm4gaXRlbS5kYXRhLnRpdGxlO1xuXG5cdFx0dmFyIHNyYyA9IG1mcC5zdC5pbWFnZS50aXRsZVNyYztcblxuXHRcdGlmKHNyYykge1xuXHRcdFx0aWYoJC5pc0Z1bmN0aW9uKHNyYykpIHtcblx0XHRcdFx0cmV0dXJuIHNyYy5jYWxsKG1mcCwgaXRlbSk7XG5cdFx0XHR9IGVsc2UgaWYoaXRlbS5lbCkge1xuXHRcdFx0XHRyZXR1cm4gaXRlbS5lbC5hdHRyKHNyYykgfHwgJyc7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAnJztcblx0fTtcblxuJC5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKCdpbWFnZScsIHtcblxuXHRvcHRpb25zOiB7XG5cdFx0bWFya3VwOiAnPGRpdiBjbGFzcz1cIm1mcC1maWd1cmVcIj4nK1xuXHRcdFx0XHRcdCc8ZGl2IGNsYXNzPVwibWZwLWNsb3NlXCI+PC9kaXY+Jytcblx0XHRcdFx0XHQnPGZpZ3VyZT4nK1xuXHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtZnAtaW1nXCI+PC9kaXY+Jytcblx0XHRcdFx0XHRcdCc8ZmlnY2FwdGlvbj4nK1xuXHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1mcC1ib3R0b20tYmFyXCI+Jytcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIm1mcC10aXRsZVwiPjwvZGl2PicrXG5cdFx0XHRcdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtZnAtY291bnRlclwiPjwvZGl2PicrXG5cdFx0XHRcdFx0XHRcdCc8L2Rpdj4nK1xuXHRcdFx0XHRcdFx0JzwvZmlnY2FwdGlvbj4nK1xuXHRcdFx0XHRcdCc8L2ZpZ3VyZT4nK1xuXHRcdFx0XHQnPC9kaXY+Jyxcblx0XHRjdXJzb3I6ICdtZnAtem9vbS1vdXQtY3VyJyxcblx0XHR0aXRsZVNyYzogJ3RpdGxlJyxcblx0XHR2ZXJ0aWNhbEZpdDogdHJ1ZSxcblx0XHR0RXJyb3I6ICc8YSBocmVmPVwiJXVybCVcIj5UaGUgaW1hZ2U8L2E+IGNvdWxkIG5vdCBiZSBsb2FkZWQuJ1xuXHR9LFxuXG5cdHByb3RvOiB7XG5cdFx0aW5pdEltYWdlOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpbWdTdCA9IG1mcC5zdC5pbWFnZSxcblx0XHRcdFx0bnMgPSAnLmltYWdlJztcblxuXHRcdFx0bWZwLnR5cGVzLnB1c2goJ2ltYWdlJyk7XG5cblx0XHRcdF9tZnBPbihPUEVOX0VWRU5UK25zLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYobWZwLmN1cnJJdGVtLnR5cGUgPT09ICdpbWFnZScgJiYgaW1nU3QuY3Vyc29yKSB7XG5cdFx0XHRcdFx0JChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhpbWdTdC5jdXJzb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0X21mcE9uKENMT1NFX0VWRU5UK25zLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoaW1nU3QuY3Vyc29yKSB7XG5cdFx0XHRcdFx0JChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhpbWdTdC5jdXJzb3IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdF93aW5kb3cub2ZmKCdyZXNpemUnICsgRVZFTlRfTlMpO1xuXHRcdFx0fSk7XG5cblx0XHRcdF9tZnBPbignUmVzaXplJytucywgbWZwLnJlc2l6ZUltYWdlKTtcblx0XHRcdGlmKG1mcC5pc0xvd0lFKSB7XG5cdFx0XHRcdF9tZnBPbignQWZ0ZXJDaGFuZ2UnLCBtZnAucmVzaXplSW1hZ2UpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmVzaXplSW1hZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGl0ZW0gPSBtZnAuY3Vyckl0ZW07XG5cdFx0XHRpZighaXRlbSB8fCAhaXRlbS5pbWcpIHJldHVybjtcblxuXHRcdFx0aWYobWZwLnN0LmltYWdlLnZlcnRpY2FsRml0KSB7XG5cdFx0XHRcdHZhciBkZWNyID0gMDtcblx0XHRcdFx0Ly8gZml4IGJveC1zaXppbmcgaW4gaWU3Lzhcblx0XHRcdFx0aWYobWZwLmlzTG93SUUpIHtcblx0XHRcdFx0XHRkZWNyID0gcGFyc2VJbnQoaXRlbS5pbWcuY3NzKCdwYWRkaW5nLXRvcCcpLCAxMCkgKyBwYXJzZUludChpdGVtLmltZy5jc3MoJ3BhZGRpbmctYm90dG9tJyksMTApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGl0ZW0uaW1nLmNzcygnbWF4LWhlaWdodCcsIG1mcC53SC1kZWNyKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdF9vbkltYWdlSGFzU2l6ZTogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYoaXRlbS5pbWcpIHtcblxuXHRcdFx0XHRpdGVtLmhhc1NpemUgPSB0cnVlO1xuXG5cdFx0XHRcdGlmKF9pbWdJbnRlcnZhbCkge1xuXHRcdFx0XHRcdGNsZWFySW50ZXJ2YWwoX2ltZ0ludGVydmFsKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGl0ZW0uaXNDaGVja2luZ0ltZ1NpemUgPSBmYWxzZTtcblxuXHRcdFx0XHRfbWZwVHJpZ2dlcignSW1hZ2VIYXNTaXplJywgaXRlbSk7XG5cblx0XHRcdFx0aWYoaXRlbS5pbWdIaWRkZW4pIHtcblx0XHRcdFx0XHRpZihtZnAuY29udGVudClcblx0XHRcdFx0XHRcdG1mcC5jb250ZW50LnJlbW92ZUNsYXNzKCdtZnAtbG9hZGluZycpO1xuXG5cdFx0XHRcdFx0aXRlbS5pbWdIaWRkZW4gPSBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEZ1bmN0aW9uIHRoYXQgbG9vcHMgdW50aWwgdGhlIGltYWdlIGhhcyBzaXplIHRvIGRpc3BsYXkgZWxlbWVudHMgdGhhdCByZWx5IG9uIGl0IGFzYXBcblx0XHQgKi9cblx0XHRmaW5kSW1hZ2VTaXplOiBmdW5jdGlvbihpdGVtKSB7XG5cblx0XHRcdHZhciBjb3VudGVyID0gMCxcblx0XHRcdFx0aW1nID0gaXRlbS5pbWdbMF0sXG5cdFx0XHRcdG1mcFNldEludGVydmFsID0gZnVuY3Rpb24oZGVsYXkpIHtcblxuXHRcdFx0XHRcdGlmKF9pbWdJbnRlcnZhbCkge1xuXHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbChfaW1nSW50ZXJ2YWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBkZWNlbGVyYXRpbmcgaW50ZXJ2YWwgdGhhdCBjaGVja3MgZm9yIHNpemUgb2YgYW4gaW1hZ2Vcblx0XHRcdFx0XHRfaW1nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmKGltZy5uYXR1cmFsV2lkdGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdG1mcC5fb25JbWFnZUhhc1NpemUoaXRlbSk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYoY291bnRlciA+IDIwMCkge1xuXHRcdFx0XHRcdFx0XHRjbGVhckludGVydmFsKF9pbWdJbnRlcnZhbCk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvdW50ZXIrKztcblx0XHRcdFx0XHRcdGlmKGNvdW50ZXIgPT09IDMpIHtcblx0XHRcdFx0XHRcdFx0bWZwU2V0SW50ZXJ2YWwoMTApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGNvdW50ZXIgPT09IDQwKSB7XG5cdFx0XHRcdFx0XHRcdG1mcFNldEludGVydmFsKDUwKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihjb3VudGVyID09PSAxMDApIHtcblx0XHRcdFx0XHRcdFx0bWZwU2V0SW50ZXJ2YWwoNTAwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LCBkZWxheSk7XG5cdFx0XHRcdH07XG5cblx0XHRcdG1mcFNldEludGVydmFsKDEpO1xuXHRcdH0sXG5cblx0XHRnZXRJbWFnZTogZnVuY3Rpb24oaXRlbSwgdGVtcGxhdGUpIHtcblxuXHRcdFx0dmFyIGd1YXJkID0gMCxcblxuXHRcdFx0XHQvLyBpbWFnZSBsb2FkIGNvbXBsZXRlIGhhbmRsZXJcblx0XHRcdFx0b25Mb2FkQ29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZihpdGVtKSB7XG5cdFx0XHRcdFx0XHRpZiAoaXRlbS5pbWdbMF0uY29tcGxldGUpIHtcblx0XHRcdFx0XHRcdFx0aXRlbS5pbWcub2ZmKCcubWZwbG9hZGVyJyk7XG5cblx0XHRcdFx0XHRcdFx0aWYoaXRlbSA9PT0gbWZwLmN1cnJJdGVtKXtcblx0XHRcdFx0XHRcdFx0XHRtZnAuX29uSW1hZ2VIYXNTaXplKGl0ZW0pO1xuXG5cdFx0XHRcdFx0XHRcdFx0bWZwLnVwZGF0ZVN0YXR1cygncmVhZHknKTtcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdGl0ZW0uaGFzU2l6ZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGl0ZW0ubG9hZGVkID0gdHJ1ZTtcblxuXHRcdFx0XHRcdFx0XHRfbWZwVHJpZ2dlcignSW1hZ2VMb2FkQ29tcGxldGUnKTtcblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIGlmIGltYWdlIGNvbXBsZXRlIGNoZWNrIGZhaWxzIDIwMCB0aW1lcyAoMjAgc2VjKSwgd2UgYXNzdW1lIHRoYXQgdGhlcmUgd2FzIGFuIGVycm9yLlxuXHRcdFx0XHRcdFx0XHRndWFyZCsrO1xuXHRcdFx0XHRcdFx0XHRpZihndWFyZCA8IDIwMCkge1xuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQob25Mb2FkQ29tcGxldGUsMTAwKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRvbkxvYWRFcnJvcigpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIGltYWdlIGVycm9yIGhhbmRsZXJcblx0XHRcdFx0b25Mb2FkRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZihpdGVtKSB7XG5cdFx0XHRcdFx0XHRpdGVtLmltZy5vZmYoJy5tZnBsb2FkZXInKTtcblx0XHRcdFx0XHRcdGlmKGl0ZW0gPT09IG1mcC5jdXJySXRlbSl7XG5cdFx0XHRcdFx0XHRcdG1mcC5fb25JbWFnZUhhc1NpemUoaXRlbSk7XG5cdFx0XHRcdFx0XHRcdG1mcC51cGRhdGVTdGF0dXMoJ2Vycm9yJywgaW1nU3QudEVycm9yLnJlcGxhY2UoJyV1cmwlJywgaXRlbS5zcmMpICk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGl0ZW0uaGFzU2l6ZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRpdGVtLmxvYWRlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRpdGVtLmxvYWRFcnJvciA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpbWdTdCA9IG1mcC5zdC5pbWFnZTtcblxuXG5cdFx0XHR2YXIgZWwgPSB0ZW1wbGF0ZS5maW5kKCcubWZwLWltZycpO1xuXHRcdFx0aWYoZWwubGVuZ3RoKSB7XG5cdFx0XHRcdHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0XHRcdFx0aW1nLmNsYXNzTmFtZSA9ICdtZnAtaW1nJztcblx0XHRcdFx0aWYoaXRlbS5lbCAmJiBpdGVtLmVsLmZpbmQoJ2ltZycpLmxlbmd0aCkge1xuXHRcdFx0XHRcdGltZy5hbHQgPSBpdGVtLmVsLmZpbmQoJ2ltZycpLmF0dHIoJ2FsdCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGl0ZW0uaW1nID0gJChpbWcpLm9uKCdsb2FkLm1mcGxvYWRlcicsIG9uTG9hZENvbXBsZXRlKS5vbignZXJyb3IubWZwbG9hZGVyJywgb25Mb2FkRXJyb3IpO1xuXHRcdFx0XHRpbWcuc3JjID0gaXRlbS5zcmM7XG5cblx0XHRcdFx0Ly8gd2l0aG91dCBjbG9uZSgpIFwiZXJyb3JcIiBldmVudCBpcyBub3QgZmlyaW5nIHdoZW4gSU1HIGlzIHJlcGxhY2VkIGJ5IG5ldyBJTUdcblx0XHRcdFx0Ly8gVE9ETzogZmluZCBhIHdheSB0byBhdm9pZCBzdWNoIGNsb25pbmdcblx0XHRcdFx0aWYoZWwuaXMoJ2ltZycpKSB7XG5cdFx0XHRcdFx0aXRlbS5pbWcgPSBpdGVtLmltZy5jbG9uZSgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aW1nID0gaXRlbS5pbWdbMF07XG5cdFx0XHRcdGlmKGltZy5uYXR1cmFsV2lkdGggPiAwKSB7XG5cdFx0XHRcdFx0aXRlbS5oYXNTaXplID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIGlmKCFpbWcud2lkdGgpIHtcblx0XHRcdFx0XHRpdGVtLmhhc1NpemUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRtZnAuX3BhcnNlTWFya3VwKHRlbXBsYXRlLCB7XG5cdFx0XHRcdHRpdGxlOiBfZ2V0VGl0bGUoaXRlbSksXG5cdFx0XHRcdGltZ19yZXBsYWNlV2l0aDogaXRlbS5pbWdcblx0XHRcdH0sIGl0ZW0pO1xuXG5cdFx0XHRtZnAucmVzaXplSW1hZ2UoKTtcblxuXHRcdFx0aWYoaXRlbS5oYXNTaXplKSB7XG5cdFx0XHRcdGlmKF9pbWdJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbChfaW1nSW50ZXJ2YWwpO1xuXG5cdFx0XHRcdGlmKGl0ZW0ubG9hZEVycm9yKSB7XG5cdFx0XHRcdFx0dGVtcGxhdGUuYWRkQ2xhc3MoJ21mcC1sb2FkaW5nJyk7XG5cdFx0XHRcdFx0bWZwLnVwZGF0ZVN0YXR1cygnZXJyb3InLCBpbWdTdC50RXJyb3IucmVwbGFjZSgnJXVybCUnLCBpdGVtLnNyYykgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0ZW1wbGF0ZS5yZW1vdmVDbGFzcygnbWZwLWxvYWRpbmcnKTtcblx0XHRcdFx0XHRtZnAudXBkYXRlU3RhdHVzKCdyZWFkeScpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0ZW1wbGF0ZTtcblx0XHRcdH1cblxuXHRcdFx0bWZwLnVwZGF0ZVN0YXR1cygnbG9hZGluZycpO1xuXHRcdFx0aXRlbS5sb2FkaW5nID0gdHJ1ZTtcblxuXHRcdFx0aWYoIWl0ZW0uaGFzU2l6ZSkge1xuXHRcdFx0XHRpdGVtLmltZ0hpZGRlbiA9IHRydWU7XG5cdFx0XHRcdHRlbXBsYXRlLmFkZENsYXNzKCdtZnAtbG9hZGluZycpO1xuXHRcdFx0XHRtZnAuZmluZEltYWdlU2l6ZShpdGVtKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRlbXBsYXRlO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qPj5pbWFnZSovXG5cbi8qPj56b29tKi9cbnZhciBoYXNNb3pUcmFuc2Zvcm0sXG5cdGdldEhhc01velRyYW5zZm9ybSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKGhhc01velRyYW5zZm9ybSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRoYXNNb3pUcmFuc2Zvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGUuTW96VHJhbnNmb3JtICE9PSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdHJldHVybiBoYXNNb3pUcmFuc2Zvcm07XG5cdH07XG5cbiQubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZSgnem9vbScsIHtcblxuXHRvcHRpb25zOiB7XG5cdFx0ZW5hYmxlZDogZmFsc2UsXG5cdFx0ZWFzaW5nOiAnZWFzZS1pbi1vdXQnLFxuXHRcdGR1cmF0aW9uOiAzMDAsXG5cdFx0b3BlbmVyOiBmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRyZXR1cm4gZWxlbWVudC5pcygnaW1nJykgPyBlbGVtZW50IDogZWxlbWVudC5maW5kKCdpbWcnKTtcblx0XHR9XG5cdH0sXG5cblx0cHJvdG86IHtcblxuXHRcdGluaXRab29tOiBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB6b29tU3QgPSBtZnAuc3Quem9vbSxcblx0XHRcdFx0bnMgPSAnLnpvb20nLFxuXHRcdFx0XHRpbWFnZTtcblxuXHRcdFx0aWYoIXpvb21TdC5lbmFibGVkIHx8ICFtZnAuc3VwcG9ydHNUcmFuc2l0aW9uKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGR1cmF0aW9uID0gem9vbVN0LmR1cmF0aW9uLFxuXHRcdFx0XHRnZXRFbFRvQW5pbWF0ZSA9IGZ1bmN0aW9uKGltYWdlKSB7XG5cdFx0XHRcdFx0dmFyIG5ld0ltZyA9IGltYWdlLmNsb25lKCkucmVtb3ZlQXR0cignc3R5bGUnKS5yZW1vdmVBdHRyKCdjbGFzcycpLmFkZENsYXNzKCdtZnAtYW5pbWF0ZWQtaW1hZ2UnKSxcblx0XHRcdFx0XHRcdHRyYW5zaXRpb24gPSAnYWxsICcrKHpvb21TdC5kdXJhdGlvbi8xMDAwKSsncyAnICsgem9vbVN0LmVhc2luZyxcblx0XHRcdFx0XHRcdGNzc09iaiA9IHtcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246ICdmaXhlZCcsXG5cdFx0XHRcdFx0XHRcdHpJbmRleDogOTk5OSxcblx0XHRcdFx0XHRcdFx0bGVmdDogMCxcblx0XHRcdFx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHRcdFx0XHQnLXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5JzogJ2hpZGRlbidcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0ID0gJ3RyYW5zaXRpb24nO1xuXG5cdFx0XHRcdFx0Y3NzT2JqWyctd2Via2l0LScrdF0gPSBjc3NPYmpbJy1tb3otJyt0XSA9IGNzc09ialsnLW8tJyt0XSA9IGNzc09ialt0XSA9IHRyYW5zaXRpb247XG5cblx0XHRcdFx0XHRuZXdJbWcuY3NzKGNzc09iaik7XG5cdFx0XHRcdFx0cmV0dXJuIG5ld0ltZztcblx0XHRcdFx0fSxcblx0XHRcdFx0c2hvd01haW5Db250ZW50ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0bWZwLmNvbnRlbnQuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0b3BlblRpbWVvdXQsXG5cdFx0XHRcdGFuaW1hdGVkSW1nO1xuXG5cdFx0XHRfbWZwT24oJ0J1aWxkQ29udHJvbHMnK25zLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYobWZwLl9hbGxvd1pvb20oKSkge1xuXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KG9wZW5UaW1lb3V0KTtcblx0XHRcdFx0XHRtZnAuY29udGVudC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG5cblx0XHRcdFx0XHQvLyBCYXNpY2FsbHksIGFsbCBjb2RlIGJlbG93IGRvZXMgaXMgY2xvbmVzIGV4aXN0aW5nIGltYWdlLCBwdXRzIGluIG9uIHRvcCBvZiB0aGUgY3VycmVudCBvbmUgYW5kIGFuaW1hdGVkIGl0XG5cblx0XHRcdFx0XHRpbWFnZSA9IG1mcC5fZ2V0SXRlbVRvWm9vbSgpO1xuXG5cdFx0XHRcdFx0aWYoIWltYWdlKSB7XG5cdFx0XHRcdFx0XHRzaG93TWFpbkNvbnRlbnQoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRhbmltYXRlZEltZyA9IGdldEVsVG9BbmltYXRlKGltYWdlKTtcblxuXHRcdFx0XHRcdGFuaW1hdGVkSW1nLmNzcyggbWZwLl9nZXRPZmZzZXQoKSApO1xuXG5cdFx0XHRcdFx0bWZwLndyYXAuYXBwZW5kKGFuaW1hdGVkSW1nKTtcblxuXHRcdFx0XHRcdG9wZW5UaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGFuaW1hdGVkSW1nLmNzcyggbWZwLl9nZXRPZmZzZXQoIHRydWUgKSApO1xuXHRcdFx0XHRcdFx0b3BlblRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHRcdHNob3dNYWluQ29udGVudCgpO1xuXG5cdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0YW5pbWF0ZWRJbWcucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0aW1hZ2UgPSBhbmltYXRlZEltZyA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdFx0X21mcFRyaWdnZXIoJ1pvb21BbmltYXRpb25FbmRlZCcpO1xuXHRcdFx0XHRcdFx0XHR9LCAxNik7IC8vIGF2b2lkIGJsaW5rIHdoZW4gc3dpdGNoaW5nIGltYWdlc1xuXG5cdFx0XHRcdFx0XHR9LCBkdXJhdGlvbik7IC8vIHRoaXMgdGltZW91dCBlcXVhbHMgYW5pbWF0aW9uIGR1cmF0aW9uXG5cblx0XHRcdFx0XHR9LCAxNik7IC8vIGJ5IGFkZGluZyB0aGlzIHRpbWVvdXQgd2UgYXZvaWQgc2hvcnQgZ2xpdGNoIGF0IHRoZSBiZWdpbm5pbmcgb2YgYW5pbWF0aW9uXG5cblxuXHRcdFx0XHRcdC8vIExvdHMgb2YgdGltZW91dHMuLi5cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRfbWZwT24oQkVGT1JFX0NMT1NFX0VWRU5UK25zLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYobWZwLl9hbGxvd1pvb20oKSkge1xuXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KG9wZW5UaW1lb3V0KTtcblxuXHRcdFx0XHRcdG1mcC5zdC5yZW1vdmFsRGVsYXkgPSBkdXJhdGlvbjtcblxuXHRcdFx0XHRcdGlmKCFpbWFnZSkge1xuXHRcdFx0XHRcdFx0aW1hZ2UgPSBtZnAuX2dldEl0ZW1Ub1pvb20oKTtcblx0XHRcdFx0XHRcdGlmKCFpbWFnZSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRhbmltYXRlZEltZyA9IGdldEVsVG9BbmltYXRlKGltYWdlKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRhbmltYXRlZEltZy5jc3MoIG1mcC5fZ2V0T2Zmc2V0KHRydWUpICk7XG5cdFx0XHRcdFx0bWZwLndyYXAuYXBwZW5kKGFuaW1hdGVkSW1nKTtcblx0XHRcdFx0XHRtZnAuY29udGVudC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7XG5cblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0YW5pbWF0ZWRJbWcuY3NzKCBtZnAuX2dldE9mZnNldCgpICk7XG5cdFx0XHRcdFx0fSwgMTYpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRfbWZwT24oQ0xPU0VfRVZFTlQrbnMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZihtZnAuX2FsbG93Wm9vbSgpKSB7XG5cdFx0XHRcdFx0c2hvd01haW5Db250ZW50KCk7XG5cdFx0XHRcdFx0aWYoYW5pbWF0ZWRJbWcpIHtcblx0XHRcdFx0XHRcdGFuaW1hdGVkSW1nLnJlbW92ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpbWFnZSA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRfYWxsb3dab29tOiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBtZnAuY3Vyckl0ZW0udHlwZSA9PT0gJ2ltYWdlJztcblx0XHR9LFxuXG5cdFx0X2dldEl0ZW1Ub1pvb206IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYobWZwLmN1cnJJdGVtLmhhc1NpemUpIHtcblx0XHRcdFx0cmV0dXJuIG1mcC5jdXJySXRlbS5pbWc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIEdldCBlbGVtZW50IHBvc3Rpb24gcmVsYXRpdmUgdG8gdmlld3BvcnRcblx0XHRfZ2V0T2Zmc2V0OiBmdW5jdGlvbihpc0xhcmdlKSB7XG5cdFx0XHR2YXIgZWw7XG5cdFx0XHRpZihpc0xhcmdlKSB7XG5cdFx0XHRcdGVsID0gbWZwLmN1cnJJdGVtLmltZztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsID0gbWZwLnN0Lnpvb20ub3BlbmVyKG1mcC5jdXJySXRlbS5lbCB8fCBtZnAuY3Vyckl0ZW0pO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgb2Zmc2V0ID0gZWwub2Zmc2V0KCk7XG5cdFx0XHR2YXIgcGFkZGluZ1RvcCA9IHBhcnNlSW50KGVsLmNzcygncGFkZGluZy10b3AnKSwxMCk7XG5cdFx0XHR2YXIgcGFkZGluZ0JvdHRvbSA9IHBhcnNlSW50KGVsLmNzcygncGFkZGluZy1ib3R0b20nKSwxMCk7XG5cdFx0XHRvZmZzZXQudG9wIC09ICggJCh3aW5kb3cpLnNjcm9sbFRvcCgpIC0gcGFkZGluZ1RvcCApO1xuXG5cblx0XHRcdC8qXG5cblx0XHRcdEFuaW1hdGluZyBsZWZ0ICsgdG9wICsgd2lkdGgvaGVpZ2h0IGxvb2tzIGdsaXRjaHkgaW4gRmlyZWZveCwgYnV0IHBlcmZlY3QgaW4gQ2hyb21lLiBBbmQgdmljZS12ZXJzYS5cblxuXHRcdFx0ICovXG5cdFx0XHR2YXIgb2JqID0ge1xuXHRcdFx0XHR3aWR0aDogZWwud2lkdGgoKSxcblx0XHRcdFx0Ly8gZml4IFplcHRvIGhlaWdodCtwYWRkaW5nIGlzc3VlXG5cdFx0XHRcdGhlaWdodDogKF9pc0pRID8gZWwuaW5uZXJIZWlnaHQoKSA6IGVsWzBdLm9mZnNldEhlaWdodCkgLSBwYWRkaW5nQm90dG9tIC0gcGFkZGluZ1RvcFxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gSSBoYXRlIHRvIGRvIHRoaXMsIGJ1dCB0aGVyZSBpcyBubyBhbm90aGVyIG9wdGlvblxuXHRcdFx0aWYoIGdldEhhc01velRyYW5zZm9ybSgpICkge1xuXHRcdFx0XHRvYmpbJy1tb3otdHJhbnNmb3JtJ10gPSBvYmpbJ3RyYW5zZm9ybSddID0gJ3RyYW5zbGF0ZSgnICsgb2Zmc2V0LmxlZnQgKyAncHgsJyArIG9mZnNldC50b3AgKyAncHgpJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9iai5sZWZ0ID0gb2Zmc2V0LmxlZnQ7XG5cdFx0XHRcdG9iai50b3AgPSBvZmZzZXQudG9wO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9XG5cblx0fVxufSk7XG5cblxuXG4vKj4+em9vbSovXG5cbi8qPj5pZnJhbWUqL1xuXG52YXIgSUZSQU1FX05TID0gJ2lmcmFtZScsXG5cdF9lbXB0eVBhZ2UgPSAnLy9hYm91dDpibGFuaycsXG5cblx0X2ZpeElmcmFtZUJ1Z3MgPSBmdW5jdGlvbihpc1Nob3dpbmcpIHtcblx0XHRpZihtZnAuY3VyclRlbXBsYXRlW0lGUkFNRV9OU10pIHtcblx0XHRcdHZhciBlbCA9IG1mcC5jdXJyVGVtcGxhdGVbSUZSQU1FX05TXS5maW5kKCdpZnJhbWUnKTtcblx0XHRcdGlmKGVsLmxlbmd0aCkge1xuXHRcdFx0XHQvLyByZXNldCBzcmMgYWZ0ZXIgdGhlIHBvcHVwIGlzIGNsb3NlZCB0byBhdm9pZCBcInZpZGVvIGtlZXBzIHBsYXlpbmcgYWZ0ZXIgcG9wdXAgaXMgY2xvc2VkXCIgYnVnXG5cdFx0XHRcdGlmKCFpc1Nob3dpbmcpIHtcblx0XHRcdFx0XHRlbFswXS5zcmMgPSBfZW1wdHlQYWdlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSUU4IGJsYWNrIHNjcmVlbiBidWcgZml4XG5cdFx0XHRcdGlmKG1mcC5pc0lFOCkge1xuXHRcdFx0XHRcdGVsLmNzcygnZGlzcGxheScsIGlzU2hvd2luZyA/ICdibG9jaycgOiAnbm9uZScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG4kLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoSUZSQU1FX05TLCB7XG5cblx0b3B0aW9uczoge1xuXHRcdG1hcmt1cDogJzxkaXYgY2xhc3M9XCJtZnAtaWZyYW1lLXNjYWxlclwiPicrXG5cdFx0XHRcdFx0JzxkaXYgY2xhc3M9XCJtZnAtY2xvc2VcIj48L2Rpdj4nK1xuXHRcdFx0XHRcdCc8aWZyYW1lIGNsYXNzPVwibWZwLWlmcmFtZVwiIHNyYz1cIi8vYWJvdXQ6YmxhbmtcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+Jytcblx0XHRcdFx0JzwvZGl2PicsXG5cblx0XHRzcmNBY3Rpb246ICdpZnJhbWVfc3JjJyxcblxuXHRcdC8vIHdlIGRvbid0IGNhcmUgYW5kIHN1cHBvcnQgb25seSBvbmUgZGVmYXVsdCB0eXBlIG9mIFVSTCBieSBkZWZhdWx0XG5cdFx0cGF0dGVybnM6IHtcblx0XHRcdHlvdXR1YmU6IHtcblx0XHRcdFx0aW5kZXg6ICd5b3V0dWJlLmNvbScsXG5cdFx0XHRcdGlkOiAndj0nLFxuXHRcdFx0XHRzcmM6ICcvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8laWQlP2F1dG9wbGF5PTEnXG5cdFx0XHR9LFxuXHRcdFx0dmltZW86IHtcblx0XHRcdFx0aW5kZXg6ICd2aW1lby5jb20vJyxcblx0XHRcdFx0aWQ6ICcvJyxcblx0XHRcdFx0c3JjOiAnLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyVpZCU/YXV0b3BsYXk9MSdcblx0XHRcdH0sXG5cdFx0XHRnbWFwczoge1xuXHRcdFx0XHRpbmRleDogJy8vbWFwcy5nb29nbGUuJyxcblx0XHRcdFx0c3JjOiAnJWlkJSZvdXRwdXQ9ZW1iZWQnXG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHByb3RvOiB7XG5cdFx0aW5pdElmcmFtZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRtZnAudHlwZXMucHVzaChJRlJBTUVfTlMpO1xuXG5cdFx0XHRfbWZwT24oJ0JlZm9yZUNoYW5nZScsIGZ1bmN0aW9uKGUsIHByZXZUeXBlLCBuZXdUeXBlKSB7XG5cdFx0XHRcdGlmKHByZXZUeXBlICE9PSBuZXdUeXBlKSB7XG5cdFx0XHRcdFx0aWYocHJldlR5cGUgPT09IElGUkFNRV9OUykge1xuXHRcdFx0XHRcdFx0X2ZpeElmcmFtZUJ1Z3MoKTsgLy8gaWZyYW1lIGlmIHJlbW92ZWRcblx0XHRcdFx0XHR9IGVsc2UgaWYobmV3VHlwZSA9PT0gSUZSQU1FX05TKSB7XG5cdFx0XHRcdFx0XHRfZml4SWZyYW1lQnVncyh0cnVlKTsgLy8gaWZyYW1lIGlzIHNob3dpbmdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0vLyBlbHNlIHtcblx0XHRcdFx0XHQvLyBpZnJhbWUgc291cmNlIGlzIHN3aXRjaGVkLCBkb24ndCBkbyBhbnl0aGluZ1xuXHRcdFx0XHQvL31cblx0XHRcdH0pO1xuXG5cdFx0XHRfbWZwT24oQ0xPU0VfRVZFTlQgKyAnLicgKyBJRlJBTUVfTlMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRfZml4SWZyYW1lQnVncygpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldElmcmFtZTogZnVuY3Rpb24oaXRlbSwgdGVtcGxhdGUpIHtcblx0XHRcdHZhciBlbWJlZFNyYyA9IGl0ZW0uc3JjO1xuXHRcdFx0dmFyIGlmcmFtZVN0ID0gbWZwLnN0LmlmcmFtZTtcblxuXHRcdFx0JC5lYWNoKGlmcmFtZVN0LnBhdHRlcm5zLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoZW1iZWRTcmMuaW5kZXhPZiggdGhpcy5pbmRleCApID4gLTEpIHtcblx0XHRcdFx0XHRpZih0aGlzLmlkKSB7XG5cdFx0XHRcdFx0XHRpZih0eXBlb2YgdGhpcy5pZCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHRcdFx0ZW1iZWRTcmMgPSBlbWJlZFNyYy5zdWJzdHIoZW1iZWRTcmMubGFzdEluZGV4T2YodGhpcy5pZCkrdGhpcy5pZC5sZW5ndGgsIGVtYmVkU3JjLmxlbmd0aCk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlbWJlZFNyYyA9IHRoaXMuaWQuY2FsbCggdGhpcywgZW1iZWRTcmMgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZW1iZWRTcmMgPSB0aGlzLnNyYy5yZXBsYWNlKCclaWQlJywgZW1iZWRTcmMgKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyIGRhdGFPYmogPSB7fTtcblx0XHRcdGlmKGlmcmFtZVN0LnNyY0FjdGlvbikge1xuXHRcdFx0XHRkYXRhT2JqW2lmcmFtZVN0LnNyY0FjdGlvbl0gPSBlbWJlZFNyYztcblx0XHRcdH1cblx0XHRcdG1mcC5fcGFyc2VNYXJrdXAodGVtcGxhdGUsIGRhdGFPYmosIGl0ZW0pO1xuXG5cdFx0XHRtZnAudXBkYXRlU3RhdHVzKCdyZWFkeScpO1xuXG5cdFx0XHRyZXR1cm4gdGVtcGxhdGU7XG5cdFx0fVxuXHR9XG59KTtcblxuXG5cbi8qPj5pZnJhbWUqL1xuXG4vKj4+Z2FsbGVyeSovXG4vKipcbiAqIEdldCBsb29wZWQgaW5kZXggZGVwZW5kaW5nIG9uIG51bWJlciBvZiBzbGlkZXNcbiAqL1xudmFyIF9nZXRMb29wZWRJZCA9IGZ1bmN0aW9uKGluZGV4KSB7XG5cdFx0dmFyIG51bVNsaWRlcyA9IG1mcC5pdGVtcy5sZW5ndGg7XG5cdFx0aWYoaW5kZXggPiBudW1TbGlkZXMgLSAxKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXggLSBudW1TbGlkZXM7XG5cdFx0fSBlbHNlICBpZihpbmRleCA8IDApIHtcblx0XHRcdHJldHVybiBudW1TbGlkZXMgKyBpbmRleDtcblx0XHR9XG5cdFx0cmV0dXJuIGluZGV4O1xuXHR9LFxuXHRfcmVwbGFjZUN1cnJUb3RhbCA9IGZ1bmN0aW9uKHRleHQsIGN1cnIsIHRvdGFsKSB7XG5cdFx0cmV0dXJuIHRleHQucmVwbGFjZSgvJWN1cnIlL2dpLCBjdXJyICsgMSkucmVwbGFjZSgvJXRvdGFsJS9naSwgdG90YWwpO1xuXHR9O1xuXG4kLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoJ2dhbGxlcnknLCB7XG5cblx0b3B0aW9uczoge1xuXHRcdGVuYWJsZWQ6IGZhbHNlLFxuXHRcdGFycm93TWFya3VwOiAnPGJ1dHRvbiB0aXRsZT1cIiV0aXRsZSVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJtZnAtYXJyb3cgbWZwLWFycm93LSVkaXIlXCI+PC9idXR0b24+Jyxcblx0XHRwcmVsb2FkOiBbMCwyXSxcblx0XHRuYXZpZ2F0ZUJ5SW1nQ2xpY2s6IHRydWUsXG5cdFx0YXJyb3dzOiB0cnVlLFxuXG5cdFx0dFByZXY6ICdQcmV2aW91cyAoTGVmdCBhcnJvdyBrZXkpJyxcblx0XHR0TmV4dDogJ05leHQgKFJpZ2h0IGFycm93IGtleSknLFxuXHRcdHRDb3VudGVyOiAnJWN1cnIlIG9mICV0b3RhbCUnXG5cdH0sXG5cblx0cHJvdG86IHtcblx0XHRpbml0R2FsbGVyeTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBnU3QgPSBtZnAuc3QuZ2FsbGVyeSxcblx0XHRcdFx0bnMgPSAnLm1mcC1nYWxsZXJ5JztcblxuXHRcdFx0bWZwLmRpcmVjdGlvbiA9IHRydWU7IC8vIHRydWUgLSBuZXh0LCBmYWxzZSAtIHByZXZcblxuXHRcdFx0aWYoIWdTdCB8fCAhZ1N0LmVuYWJsZWQgKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdF93cmFwQ2xhc3NlcyArPSAnIG1mcC1nYWxsZXJ5JztcblxuXHRcdFx0X21mcE9uKE9QRU5fRVZFTlQrbnMsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGlmKGdTdC5uYXZpZ2F0ZUJ5SW1nQ2xpY2spIHtcblx0XHRcdFx0XHRtZnAud3JhcC5vbignY2xpY2snK25zLCAnLm1mcC1pbWcnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmKG1mcC5pdGVtcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0XHRcdG1mcC5uZXh0KCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdF9kb2N1bWVudC5vbigna2V5ZG93bicrbnMsIGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0XHRpZiAoZS5rZXlDb2RlID09PSAzNykge1xuXHRcdFx0XHRcdFx0bWZwLnByZXYoKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcblx0XHRcdFx0XHRcdG1mcC5uZXh0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRfbWZwT24oJ1VwZGF0ZVN0YXR1cycrbnMsIGZ1bmN0aW9uKGUsIGRhdGEpIHtcblx0XHRcdFx0aWYoZGF0YS50ZXh0KSB7XG5cdFx0XHRcdFx0ZGF0YS50ZXh0ID0gX3JlcGxhY2VDdXJyVG90YWwoZGF0YS50ZXh0LCBtZnAuY3Vyckl0ZW0uaW5kZXgsIG1mcC5pdGVtcy5sZW5ndGgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0X21mcE9uKE1BUktVUF9QQVJTRV9FVkVOVCtucywgZnVuY3Rpb24oZSwgZWxlbWVudCwgdmFsdWVzLCBpdGVtKSB7XG5cdFx0XHRcdHZhciBsID0gbWZwLml0ZW1zLmxlbmd0aDtcblx0XHRcdFx0dmFsdWVzLmNvdW50ZXIgPSBsID4gMSA/IF9yZXBsYWNlQ3VyclRvdGFsKGdTdC50Q291bnRlciwgaXRlbS5pbmRleCwgbCkgOiAnJztcblx0XHRcdH0pO1xuXG5cdFx0XHRfbWZwT24oJ0J1aWxkQ29udHJvbHMnICsgbnMsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZihtZnAuaXRlbXMubGVuZ3RoID4gMSAmJiBnU3QuYXJyb3dzICYmICFtZnAuYXJyb3dMZWZ0KSB7XG5cdFx0XHRcdFx0dmFyIG1hcmt1cCA9IGdTdC5hcnJvd01hcmt1cCxcblx0XHRcdFx0XHRcdGFycm93TGVmdCA9IG1mcC5hcnJvd0xlZnQgPSAkKCBtYXJrdXAucmVwbGFjZSgvJXRpdGxlJS9naSwgZ1N0LnRQcmV2KS5yZXBsYWNlKC8lZGlyJS9naSwgJ2xlZnQnKSApLmFkZENsYXNzKFBSRVZFTlRfQ0xPU0VfQ0xBU1MpLFxuXHRcdFx0XHRcdFx0YXJyb3dSaWdodCA9IG1mcC5hcnJvd1JpZ2h0ID0gJCggbWFya3VwLnJlcGxhY2UoLyV0aXRsZSUvZ2ksIGdTdC50TmV4dCkucmVwbGFjZSgvJWRpciUvZ2ksICdyaWdodCcpICkuYWRkQ2xhc3MoUFJFVkVOVF9DTE9TRV9DTEFTUyk7XG5cblx0XHRcdFx0XHRhcnJvd0xlZnQuY2xpY2soZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRtZnAucHJldigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGFycm93UmlnaHQuY2xpY2soZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRtZnAubmV4dCgpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0bWZwLmNvbnRhaW5lci5hcHBlbmQoYXJyb3dMZWZ0LmFkZChhcnJvd1JpZ2h0KSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRfbWZwT24oQ0hBTkdFX0VWRU5UK25zLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYobWZwLl9wcmVsb2FkVGltZW91dCkgY2xlYXJUaW1lb3V0KG1mcC5fcHJlbG9hZFRpbWVvdXQpO1xuXG5cdFx0XHRcdG1mcC5fcHJlbG9hZFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdG1mcC5wcmVsb2FkTmVhcmJ5SW1hZ2VzKCk7XG5cdFx0XHRcdFx0bWZwLl9wcmVsb2FkVGltZW91dCA9IG51bGw7XG5cdFx0XHRcdH0sIDE2KTtcblx0XHRcdH0pO1xuXG5cblx0XHRcdF9tZnBPbihDTE9TRV9FVkVOVCtucywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdF9kb2N1bWVudC5vZmYobnMpO1xuXHRcdFx0XHRtZnAud3JhcC5vZmYoJ2NsaWNrJytucyk7XG5cdFx0XHRcdG1mcC5hcnJvd1JpZ2h0ID0gbWZwLmFycm93TGVmdCA9IG51bGw7XG5cdFx0XHR9KTtcblxuXHRcdH0sXG5cdFx0bmV4dDogZnVuY3Rpb24oKSB7XG5cdFx0XHRtZnAuZGlyZWN0aW9uID0gdHJ1ZTtcblx0XHRcdG1mcC5pbmRleCA9IF9nZXRMb29wZWRJZChtZnAuaW5kZXggKyAxKTtcblx0XHRcdG1mcC51cGRhdGVJdGVtSFRNTCgpO1xuXHRcdH0sXG5cdFx0cHJldjogZnVuY3Rpb24oKSB7XG5cdFx0XHRtZnAuZGlyZWN0aW9uID0gZmFsc2U7XG5cdFx0XHRtZnAuaW5kZXggPSBfZ2V0TG9vcGVkSWQobWZwLmluZGV4IC0gMSk7XG5cdFx0XHRtZnAudXBkYXRlSXRlbUhUTUwoKTtcblx0XHR9LFxuXHRcdGdvVG86IGZ1bmN0aW9uKG5ld0luZGV4KSB7XG5cdFx0XHRtZnAuZGlyZWN0aW9uID0gKG5ld0luZGV4ID49IG1mcC5pbmRleCk7XG5cdFx0XHRtZnAuaW5kZXggPSBuZXdJbmRleDtcblx0XHRcdG1mcC51cGRhdGVJdGVtSFRNTCgpO1xuXHRcdH0sXG5cdFx0cHJlbG9hZE5lYXJieUltYWdlczogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcCA9IG1mcC5zdC5nYWxsZXJ5LnByZWxvYWQsXG5cdFx0XHRcdHByZWxvYWRCZWZvcmUgPSBNYXRoLm1pbihwWzBdLCBtZnAuaXRlbXMubGVuZ3RoKSxcblx0XHRcdFx0cHJlbG9hZEFmdGVyID0gTWF0aC5taW4ocFsxXSwgbWZwLml0ZW1zLmxlbmd0aCksXG5cdFx0XHRcdGk7XG5cblx0XHRcdGZvcihpID0gMTsgaSA8PSAobWZwLmRpcmVjdGlvbiA/IHByZWxvYWRBZnRlciA6IHByZWxvYWRCZWZvcmUpOyBpKyspIHtcblx0XHRcdFx0bWZwLl9wcmVsb2FkSXRlbShtZnAuaW5kZXgraSk7XG5cdFx0XHR9XG5cdFx0XHRmb3IoaSA9IDE7IGkgPD0gKG1mcC5kaXJlY3Rpb24gPyBwcmVsb2FkQmVmb3JlIDogcHJlbG9hZEFmdGVyKTsgaSsrKSB7XG5cdFx0XHRcdG1mcC5fcHJlbG9hZEl0ZW0obWZwLmluZGV4LWkpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0X3ByZWxvYWRJdGVtOiBmdW5jdGlvbihpbmRleCkge1xuXHRcdFx0aW5kZXggPSBfZ2V0TG9vcGVkSWQoaW5kZXgpO1xuXG5cdFx0XHRpZihtZnAuaXRlbXNbaW5kZXhdLnByZWxvYWRlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBpdGVtID0gbWZwLml0ZW1zW2luZGV4XTtcblx0XHRcdGlmKCFpdGVtLnBhcnNlZCkge1xuXHRcdFx0XHRpdGVtID0gbWZwLnBhcnNlRWwoIGluZGV4ICk7XG5cdFx0XHR9XG5cblx0XHRcdF9tZnBUcmlnZ2VyKCdMYXp5TG9hZCcsIGl0ZW0pO1xuXG5cdFx0XHRpZihpdGVtLnR5cGUgPT09ICdpbWFnZScpIHtcblx0XHRcdFx0aXRlbS5pbWcgPSAkKCc8aW1nIGNsYXNzPVwibWZwLWltZ1wiIC8+Jykub24oJ2xvYWQubWZwbG9hZGVyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aXRlbS5oYXNTaXplID0gdHJ1ZTtcblx0XHRcdFx0fSkub24oJ2Vycm9yLm1mcGxvYWRlcicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGl0ZW0uaGFzU2l6ZSA9IHRydWU7XG5cdFx0XHRcdFx0aXRlbS5sb2FkRXJyb3IgPSB0cnVlO1xuXHRcdFx0XHRcdF9tZnBUcmlnZ2VyKCdMYXp5TG9hZEVycm9yJywgaXRlbSk7XG5cdFx0XHRcdH0pLmF0dHIoJ3NyYycsIGl0ZW0uc3JjKTtcblx0XHRcdH1cblxuXG5cdFx0XHRpdGVtLnByZWxvYWRlZCA9IHRydWU7XG5cdFx0fVxuXHR9XG59KTtcblxuLyo+PmdhbGxlcnkqL1xuXG4vKj4+cmV0aW5hKi9cblxudmFyIFJFVElOQV9OUyA9ICdyZXRpbmEnO1xuXG4kLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoUkVUSU5BX05TLCB7XG5cdG9wdGlvbnM6IHtcblx0XHRyZXBsYWNlU3JjOiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRyZXR1cm4gaXRlbS5zcmMucmVwbGFjZSgvXFwuXFx3KyQvLCBmdW5jdGlvbihtKSB7IHJldHVybiAnQDJ4JyArIG07IH0pO1xuXHRcdH0sXG5cdFx0cmF0aW86IDEgLy8gRnVuY3Rpb24gb3IgbnVtYmVyLiAgU2V0IHRvIDEgdG8gZGlzYWJsZS5cblx0fSxcblx0cHJvdG86IHtcblx0XHRpbml0UmV0aW5hOiBmdW5jdGlvbigpIHtcblx0XHRcdGlmKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSkge1xuXG5cdFx0XHRcdHZhciBzdCA9IG1mcC5zdC5yZXRpbmEsXG5cdFx0XHRcdFx0cmF0aW8gPSBzdC5yYXRpbztcblxuXHRcdFx0XHRyYXRpbyA9ICFpc05hTihyYXRpbykgPyByYXRpbyA6IHJhdGlvKCk7XG5cblx0XHRcdFx0aWYocmF0aW8gPiAxKSB7XG5cdFx0XHRcdFx0X21mcE9uKCdJbWFnZUhhc1NpemUnICsgJy4nICsgUkVUSU5BX05TLCBmdW5jdGlvbihlLCBpdGVtKSB7XG5cdFx0XHRcdFx0XHRpdGVtLmltZy5jc3Moe1xuXHRcdFx0XHRcdFx0XHQnbWF4LXdpZHRoJzogaXRlbS5pbWdbMF0ubmF0dXJhbFdpZHRoIC8gcmF0aW8sXG5cdFx0XHRcdFx0XHRcdCd3aWR0aCc6ICcxMDAlJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0X21mcE9uKCdFbGVtZW50UGFyc2UnICsgJy4nICsgUkVUSU5BX05TLCBmdW5jdGlvbihlLCBpdGVtKSB7XG5cdFx0XHRcdFx0XHRpdGVtLnNyYyA9IHN0LnJlcGxhY2VTcmMoaXRlbSwgcmF0aW8pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cdH1cbn0pO1xuXG4vKj4+cmV0aW5hKi9cbiBfY2hlY2tJbnN0YW5jZSgpOyB9KSk7IiwiaW1wb3J0ICQgZnJvbSBcImpxdWVyeVwiO1xyXG5pbXBvcnQgeyBpbWFnZUNyb3BwZXIsIG11bHRpcGxlSW5pdCB9IGZyb20gXCIuL2NvbXBvbmVudHMvaW1hZ2VDcm9wcGVyXCI7XHJcbmltcG9ydCBpbml0Q2tlZGl0b3JzIGZyb20gXCIuL2NvbXBvbmVudHMvY2tlZGl0b3JcIjtcclxuaW1wb3J0IHB1Ymxpc2ggZnJvbSBcIi4vbWV0aG9kcy9wdWJsaXNoXCI7XHJcblxyXG5pbml0Q2tlZGl0b3JzKCk7XHJcblxyXG5yZXF1aXJlKCcuL2NvbXBvbmVudHMvZmxvYXRDb250ZW50Jyk7XHJcblxyXG4kKFwiLmNvbmZpcm1cIikuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gIGlmICghY29uZmlybShcItCj0LTQsNC70LjRgtGMINC90L7QstC+0YHRgtGMP1wiKSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG59KTtcclxuXHJcbiQoXCIuaW1hZ2VfcGlja1wiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgaW1hZ2VDcm9wcGVyKHRoaXMpO1xyXG59KTtcclxuXHJcbiQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLmltYWdlX3BpY2tfbXVsdGlwbGUnLCBmdW5jdGlvbigpIHsgXHJcbiAgbXVsdGlwbGVJbml0KHRoaXMpO1xyXG59KTtcclxuXHJcbiQoXCIucHVibGlzaF9jaGVja2JveFwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICBsZXQgeyBtb2RlbCwgaWQgfSA9IHRoaXMuZGF0YXNldDtcclxuICBsZXQgdmFsdWUgPSB0aGlzLmNoZWNrZWQ7XHJcbiAgcHVibGlzaCh7IG1vZGVsLCBpZCwgdmFsdWUgfSk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgQ2xhc3NpY0VkaXRvciBmcm9tIFwiQGNrZWRpdG9yL2NrZWRpdG9yNS1idWlsZC1jbGFzc2ljXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0Q2tlZGl0b3JzKCkge1xyXG4gIHZhciBja2UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY2tlZGl0b3JfaXRlbVwiKTtcclxuICBbXS5mb3JFYWNoLmNhbGwoY2tlLCBmdW5jdGlvbihlbCkge1xyXG4gICAgQ2xhc3NpY0VkaXRvci5jcmVhdGUoZWwsIHtcclxuXHRcdHJlbW92ZVBsdWdpbnM6IFtcIkhlYWRpbmdcIiwgXCJpdGFsaWNcIl0sXHJcblx0XHR0b29sYmFyOiBbJ2JvbGQnLCAnbGluaycsICdidWxsZXRlZExpc3QnLCAnbnVtYmVyZWRMaXN0JywgJ2Jsb2NrUXVvdGUnIF0sXHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XHJcblxyXG5jb25zdCBjb25zdHJCb2R5ID0gXCIuY29uc3RydWN0b3JfYm9keVwiO1xyXG5cclxuJChcIi5hZGRfaXRlbVwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICBjb25zdCBpbmRleCA9ICQoXCIuY29uc3RydWN0b3JfaXRlbVwiKS5sZW5ndGg7XHJcbiAgY29uc3QgdHlwZSA9ICQodGhpcykuYXR0cihcImRhdGEtdHlwZVwiKTtcclxuICAkKGNvbnN0ckJvZHkpLmFwcGVuZChgPGRpdiBjbGFzcz1cImNvbnN0cnVjdG9yX2l0ZW1cIj5cclxuXHRcdDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImZsb2F0Q29udGVudFske2luZGV4fV1bY29udGVudFR5cGVdXCIgdmFsdWU9XCIke3R5cGV9XCIgLz5cclxuXHRcdCR7Z2FsbGVyeVRlbXBsYXRlKGluZGV4KX1cclxuXHQ8L2Rpdj5gKTtcclxufSk7XHJcblxyXG5sZXQgZ2FsbGVyeVRlbXBsYXRlID0gKGluZGV4KSA9PiB7XHJcbiAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwLWltYWdlLXBpY2tcIj5cclxuXHQ8bGFiZWw+R2FsbGVyeV9pbWFnZTwvbGFiZWw+XHJcblx0PGlucHV0IGNsYXNzPVwiaW1hZ2VfcGlja19tdWx0aXBsZVwiIGRhdGEtaWQ9XCIke2luZGV4fVwiIHR5cGU9XCJmaWxlXCIgYWNjZXB0PVwiaW1hZ2UvXCIgbXVsdGlwbGU+XHJcblx0PGRpdiBjbGFzcz1cImltYWdlc19ib3hcIj48L2Rpdj5cclxuXHQ8L2Rpdj5gO1xyXG59O1xyXG4iLCJpbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XHJcbmltcG9ydCBsb2FkZXIgZnJvbSBcIi4vbG9hZGVyXCI7XHJcblxyXG5yZXF1aXJlKFwibWFnbmlmaWMtcG9wdXBcIik7XHJcbnJlcXVpcmUoXCJjcm9wcGVyXCIpO1xyXG5cclxuY29uc3QgcG9wdXBJZCA9IFwiY3JvcHBlclBvcHVwXCI7XHJcbmNvbnN0IGltZ0lkID0gXCJjcm9wcGVySW1hZ2VcIjtcclxubGV0ICRpbWc7XHJcbmxldCBjdXJyZW50UGlja2VyO1xyXG5cclxuLyogV2hlbiB1c2VyIGlzIHVwZGF0aW5nIGltYWdlcyB0aGUgb2xkIGltYWdlcyBuZWVkIHRvIGJlIGRlbGV0ZWQgZnJvbSBzZXJ2ZXIuXHJcbkFycmF5IG9mIGltYWdlcyB3aGljaCB3aWxsIGJlIGRlbGV0ZWQgKi9cclxubGV0IHByZXZpb3VzSW1hZ2VzID0gW107XHJcbmxldCBwcmV2aW91c0ltYWdlID0gbnVsbDtcclxuXHJcbmxldCBnYWxsZXJ5VXBkYXRpbmcgPSBmYWxzZSxcclxuICBnYWxsZXJ5SW1hZ2VJbmRleCxcclxuICBnYWxsZXJ5SW5wdXQsXHJcbiAgZ2FsbGVyeUJveDtcclxuXHJcbmNvbnN0IGltYWdlQ3JvcHBlciA9IGlucHV0ID0+IHtcclxuICBnYWxsZXJ5VXBkYXRpbmcgPSBmYWxzZTtcclxuXHJcbiAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XHJcbiAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICBsb2FkZXIuc2hvdygpO1xyXG5cclxuICAgIHJlYWRlci5vbmxvYWQgPSBlID0+IHtcclxuICAgICAgaW5pdENyb3BwZXJQb3B1cChlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XHJcblxyXG4gICAgY3VycmVudFBpY2tlciA9IGlucHV0O1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGluaXRDcm9wcGVyUG9wdXAgPSBpbWFnZVNyYyA9PiB7XHJcbiAgbGV0IGltYWdlVGVtcGxhdGUgPSBgPGltZyBpZD1cIiR7aW1nSWR9XCIgc3JjPVwiJHtpbWFnZVNyY31cIiAvPmA7XHJcbiAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtwb3B1cElkfWApKSB7XHJcbiAgICBsZXQgcG9wdXBUZW1wbGF0ZSA9IGA8ZGl2IGlkPVwiJHtwb3B1cElkfVwiIGNsYXNzPVwibWZwLWhpZGVcIj4ke2ltYWdlVGVtcGxhdGV9PGJ1dHRvbiBjbGFzcz1cInNhdmVfY3JvcHBlZFwiPtCe0LHRgNC10LfQsNGC0Yw8L2J1dHRvbj48L2Rpdj5gO1xyXG4gICAgbGV0ICRwb3B1cCA9ICQocG9wdXBUZW1wbGF0ZSk7XHJcbiAgICAkcG9wdXAuYXBwZW5kVG8oXCJib2R5XCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKGAjJHtwb3B1cElkfWApLnByZXBlbmQoaW1hZ2VUZW1wbGF0ZSk7XHJcbiAgfVxyXG5cclxuICAkLm1hZ25pZmljUG9wdXAub3Blbih7XHJcbiAgICBpdGVtczoge1xyXG4gICAgICBzcmM6IGAjJHtwb3B1cElkfWBcclxuICAgIH0sXHJcbiAgICBjYWxsYmFja3M6IHtcclxuICAgICAgb3BlbjogKCkgPT4ge1xyXG4gICAgICAgIGxvYWRlci5oaWRlKCk7XHJcbiAgICAgICAgJGltZyA9ICQoYCMke2ltZ0lkfWApO1xyXG4gICAgICAgIGluaXRDcm9wcGVyKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGNsb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgZGVzdHJveUNyb3BwZXIoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgaW5pdENyb3BwZXIgPSAoKSA9PiB7XHJcbiAgJGltZy5jcm9wcGVyKHtcclxuICAgIGFzcGVjdFJhdGlvOiAxNiAvIDksXHJcbiAgICB2aWV3TW9kZTogMlxyXG4gIH0pO1xyXG59O1xyXG5cclxuJChcImJvZHlcIikub24oXCJjbGlja1wiLCBcIi5zYXZlX2Nyb3BwZWRcIiwgKCkgPT4ge1xyXG4gIGlmIChwcmV2aW91c0ltYWdlICYmIHByZXZpb3VzSW1hZ2UuaW5kZXhPZihcIi90ZW1wL1wiKSAhPT0gLTEpIHtcclxuICAgIHByZXZpb3VzSW1hZ2VzLnB1c2gocHJldmlvdXNJbWFnZSk7XHJcbiAgfSBlbHNlIGlmIChwcmV2aW91c0ltYWdlKSB7XHJcbiAgICBkZWxldGVJbWFnZShwcmV2aW91c0ltYWdlKTtcclxuICB9XHJcbiAgcHJldmlvdXNJbWFnZSA9IG51bGw7XHJcbiAgZ2V0SW1hZ2UoKTtcclxufSk7XHJcblxyXG4kKFwiLnVwZGF0ZV9mb3JtXCIpLnN1Ym1pdChmdW5jdGlvbihlKSB7XHJcbiAgcHJldmlvdXNJbWFnZXMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAkKHRoaXMpLmFwcGVuZChcclxuICAgICAgYDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImZpbGVGb3JEZWxldGVbXVwiIHZhbHVlPVwiJHtlbH1cIiAvPmBcclxuICAgICk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHRydWU7XHJcbn0pO1xyXG5cclxuY29uc3QgZ2V0SW1hZ2UgPSAoKSA9PiB7XHJcbiAgJGltZy5jcm9wcGVyKFwiZ2V0Q3JvcHBlZENhbnZhc1wiKS50b0Jsb2IoZnVuY3Rpb24oYmxvYikge1xyXG4gICAgaWYgKCFnYWxsZXJ5VXBkYXRpbmcpIHtcclxuICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImNyb3BwZWRJbWFnZVwiLCBibG9iKTtcclxuICAgICAgbG9hZGVyLmhpZGUoKTtcclxuICAgICAgJC5tYWduaWZpY1BvcHVwLmNsb3NlKCk7XHJcbiAgICAgICQuYWpheChcIi9hcGkvdXBsb2FkL2Nyb3BwZWQtaW1hZ2VcIiwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgZGF0YTogZm9ybURhdGEsXHJcbiAgICAgICAgcHJvY2Vzc0RhdGE6IGZhbHNlLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiBmYWxzZSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICBpbnNlcnRDcm9wcGVkSW1hZ2UoZGF0YS5maWxlTmFtZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXBsb2FkIGVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1cGxvYWRJbWFnZShibG9iLCBnYWxsZXJ5SW1hZ2VJbmRleCwgZ2FsbGVyeUlucHV0KTtcclxuICAgICAgJC5tYWduaWZpY1BvcHVwLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBkZXN0cm95Q3JvcHBlciA9ICgpID0+IHtcclxuICAkaW1nLmNyb3BwZXIoXCJkZXN0cm95XCIpO1xyXG4gICQoYCMke2ltZ0lkfWApLnJlbW92ZSgpO1xyXG4gICQoXCIuaW1hZ2VfcGlja1wiKS52YWwoXCJcIik7XHJcbn07XHJcblxyXG5jb25zdCBpbnNlcnRDcm9wcGVkSW1hZ2UgPSBwYXRoID0+IHtcclxuICBsZXQgJGlucHV0ID0gJChjdXJyZW50UGlja2VyKTtcclxuICBsZXQgaW1nID0gJGlucHV0LnNpYmxpbmdzKFwiaW1nXCIpO1xyXG5cclxuICAkaW5wdXQuY2xvc2VzdChcIi5pbWFnZV9waWNrX2FyZWFcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgJGlucHV0LnNpYmxpbmdzKFwiLmRlbGV0ZV9pbWFnZVwiKS5hdHRyKFwiZGF0YS11cmxcIiwgcGF0aCk7XHJcbiAgJGlucHV0LnNpYmxpbmdzKFwiLmhpZGRlbl9pbWFnZV91cmxcIikudmFsKHBhdGgpO1xyXG4gICRpbnB1dC5zaWJsaW5ncyhcIi51cGxvYWRfbmV3X2ltYWdlXCIpLmF0dHIoXCJkYXRhLWRlbC11cmxcIiwgcGF0aCk7XHJcbiAgaWYgKCFpbWcubGVuZ3RoKSB7XHJcbiAgICAkKGA8aW1nIHNyYz1cIi91cGxvYWRzJHtwYXRofVwiPmApLmluc2VydEFmdGVyKGN1cnJlbnRQaWNrZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpbWcuYXR0cihcInNyY1wiLCBgL3VwbG9hZHMke3BhdGh9YCk7XHJcbiAgfVxyXG59O1xyXG5cclxuJChcImJvZHlcIikub24oXCJjbGlja1wiLCBcIi5kZWxldGVfaW1hZ2VcIiwgZnVuY3Rpb24oZSkge1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBsZXQgJHRoaXMgPSAkKHRoaXMpO1xyXG4gIFxyXG4gIGxldCB1cmwgPVxyXG4gICAgJHRoaXMuYXR0cihcImRhdGEtdXJsXCIpIHx8ICR0aGlzLmNsb3Nlc3QoXCIuZ2FsbGVyeV9pbWFnZVwiKS5hdHRyKFwiZGF0YS11cmxcIik7XHJcblxyXG4gIGxldCBpbmRleCA9ICR0aGlzLmNsb3Nlc3QoXCIuZ2FsbGVyeV9pbWFnZVwiKS5hdHRyKFwiZGF0YS1pZFwiKTtcclxuXHJcbiAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICR0aGlzXHJcbiAgICAgIC5jbG9zZXN0KFwiLmdhbGxlcnlfaW1hZ2VcIilcclxuICAgICAgLm5leHRBbGwoKVxyXG4gICAgICAuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAkKHRoaXMpLmF0dHIoXCJkYXRhLWlkXCIsICskKHRoaXMpLmF0dHIoXCJkYXRhLWlkXCIpIC0gMSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICBpZiAoXHJcbiAgICAkdGhpcy5jbG9zZXN0KFwiZm9ybVwiKS5oYXNDbGFzcyhcInVwZGF0ZV9mb3JtXCIpICYmXHJcbiAgICB1cmwuaW5kZXhPZihcIi90ZW1wL1wiKSA9PT0gLTFcclxuICApIHtcclxuICAgIHByZXZpb3VzSW1hZ2VzLnB1c2godXJsKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZGVsZXRlSW1hZ2UodXJsKTtcclxuICB9XHJcblxyXG4gICR0aGlzLmNsb3Nlc3QoXCIuaW1hZ2VfcGlja19hcmVhXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICR0aGlzLnNpYmxpbmdzKFwiLmhpZGRlbl9pbWFnZV91cmxcIikudmFsKFwiXCIpO1xyXG4gICR0aGlzLnNpYmxpbmdzKFwiaW1nXCIpLnJlbW92ZSgpO1xyXG4gICR0aGlzLnBhcmVudChcIi5nYWxsZXJ5X2ltYWdlXCIpLnJlbW92ZSgpO1xyXG4gIFxyXG59KTtcclxuXHJcbiQoXCIudXBsb2FkX25ld19pbWFnZVwiKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHByZXZpb3VzSW1hZ2UgPSAkKHRoaXMpLmF0dHIoXCJkYXRhLWRlbC11cmxcIik7XHJcbiAgJCh0aGlzKVxyXG4gICAgLnNpYmxpbmdzKFwiLmltYWdlX3BpY2tcIilcclxuICAgIC5jbGljaygpO1xyXG59KTtcclxuXHJcbi8q0KPQtNCw0LvQuNGC0Ywg0YDQsNC90LXQtSDQt9Cw0LPRgNGD0LbQtdC90L3Rg9GOINC60LDRgNGC0LjQvdC60YMqL1xyXG5jb25zdCBkZWxldGVJbWFnZSA9IHVybCA9PiB7XHJcbiAgJC5hamF4KFwiL2FwaS9maWxlL2RlbGV0ZS9cIiwge1xyXG4gICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgIGRhdGE6IHtcclxuICAgICAgdXJsXHJcbiAgICB9LFxyXG4gICAgc3VjY2VzczogZGF0YSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgfSxcclxuICAgIGVycm9yOiBlcnJvciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmxldCBhc3luY1VwbG9hZEltYWdlQ291bnRlciA9IDA7XHJcblxyXG5jb25zdCBtdWx0aXBsZUluaXQgPSBpbnB1dCA9PiB7XHJcbiAgZ2FsbGVyeVVwZGF0aW5nID0gZmFsc2U7XHJcblxyXG4gIGFzeW5jVXBsb2FkSW1hZ2VDb3VudGVyID0gMDtcclxuXHJcbiAgbGV0IGltYWdlc0JveCA9ICQoaW5wdXQpLnNpYmxpbmdzKFwiLmltYWdlc19ib3hcIik7XHJcbiAgbGV0IGdhbGVyeUltYWdlc0xlbmd0aCA9IGltYWdlc0JveC5maW5kKFwiLmdhbGxlcnlfaW1hZ2VcIikubGVuZ3RoO1xyXG5cclxuICBbXS5mb3JFYWNoLmNhbGwoaW5wdXQuZmlsZXMsIChlbCwgaW5kZXgpID0+IHtcclxuICAgIHVwbG9hZEltYWdlKGVsLCBpbmRleCArIGdhbGVyeUltYWdlc0xlbmd0aCwgaW5wdXQpO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgdXBsb2FkSW1hZ2UgPSAoaW1hZ2VEYXRhLCBpbmRleCwgaW5wdXQpID0+IHtcclxuICBsZXQgZmQgPSBuZXcgRm9ybURhdGEoKTtcclxuICBsZXQgaW1hZ2VzQm94O1xyXG4gIGxldCBnbG9iYWxJbmRleCA9ICQoaW5wdXQpLmF0dHIoJ2RhdGEtaWQnKTtcclxuICBpZiAoIWdhbGxlcnlVcGRhdGluZykge1xyXG4gICAgaW1hZ2VzQm94ID0gJChpbnB1dCkuc2libGluZ3MoXCIuaW1hZ2VzX2JveFwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaW1hZ2VzQm94ID0gZ2FsbGVyeUJveDtcclxuICAgIGZkLmFwcGVuZChcclxuICAgICAgXCJ1cmxcIixcclxuICAgICAgaW1hZ2VzQm94LmZpbmQoYC5nYWxsZXJ5X2ltYWdlW2RhdGEtaWQ9XCIke2luZGV4fVwiXWApLmF0dHIoXCJkYXRhLXVybFwiKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGZkLmFwcGVuZChcImltYWdlXCIsIGltYWdlRGF0YSk7XHJcbiAgZmQuYXBwZW5kKFwiaW5kZXhcIiwgaW5kZXgpO1xyXG5cclxuICBpZiAoIWdhbGxlcnlVcGRhdGluZykge1xyXG4gICAgaW1hZ2VzQm94LmFwcGVuZChgPGRpdiBjbGFzcz1cImdhbGxlcnlfaW1hZ2VcIiBkYXRhLWlkPVwiJHtpbmRleH1cIiBkYXRhLXVybD1cIlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiaW1hZ2UgbG9hZGluZ1wiIHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKC9pbWcvbG9hZGVyLnN2ZylcIj48L2Rpdj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBjbGFzcz1cImhpZGRlbl9pbWFnZV91cmxcIiB2YWx1ZT1cIlwiIG5hbWU9XCJmbG9hdENvbnRlbnRbJHtnbG9iYWxJbmRleH1dW2dhbGxlcnldW11cIiAvPlxyXG4gICAgICA8YSBjbGFzcz1cInVwZGF0ZV9pbWFnZVwiIGRhdGEtdXJsPVwiXCIgaHJlZj1cIiNcIj51cGRhdGVfaW1hZ2U8L2E+XHJcbiAgICAgIDxhIGNsYXNzPVwiZGVsZXRlX2ltYWdlXCIgZGF0YS11cmw9XCJcIiBocmVmPVwiI1wiPmRlbGV0ZV9pbWFnZTwvYT5cclxuICAgIDwvZGl2PmApO1xyXG4gIH1cclxuXHJcbiAgJC5hamF4KHtcclxuICAgIHVybDogXCIvYXBpL3VwbG9hZC9jb25zdHJ1Y3Rvcl9pbWFnZVwiLFxyXG4gICAgZGF0YTogZmQsXHJcbiAgICBwcm9jZXNzRGF0YTogZmFsc2UsXHJcbiAgICBjb250ZW50VHlwZTogZmFsc2UsXHJcbiAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgbGV0IGN1cnJlbnRJbWFnZSA9IGltYWdlc0JveC5maW5kKFxyXG4gICAgICAgIGAuZ2FsbGVyeV9pbWFnZVtkYXRhLWlkPVwiJHtkYXRhLmluZGV4fVwiXWBcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgdXJsID0gZGF0YS5maWxlTmFtZTtcclxuICAgICAgY3VycmVudEltYWdlXHJcbiAgICAgICAgLmZpbmQoYC5pbWFnZWApXHJcbiAgICAgICAgLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKVxyXG4gICAgICAgIC5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIGB1cmwoL3VwbG9hZHMke3VybH0pYCk7XHJcbiAgICAgIGN1cnJlbnRJbWFnZS5hdHRyKFwiZGF0YS11cmxcIiwgdXJsKTtcclxuICAgICAgY3VycmVudEltYWdlLmZpbmQoXCIuaGlkZGVuX2ltYWdlX3VybFwiKS52YWwodXJsKTtcclxuXHJcbiAgICAgIGlmICghZ2FsbGVyeVVwZGF0aW5nICYmIGlucHV0LmZpbGVzLmxlbmd0aCA9PT0gKythc3luY1VwbG9hZEltYWdlQ291bnRlcilcclxuICAgICAgICAkKGlucHV0KS52YWwoXCJcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4kKFwiYm9keVwiKS5vbihcImNsaWNrXCIsIFwiLnVwZGF0ZV9pbWFnZVwiLCBmdW5jdGlvbigpIHtcclxuICBnYWxsZXJ5VXBkYXRpbmcgPSB0cnVlO1xyXG5cclxuICBjb25zb2xlLmxvZygkKHRoaXMpLmNsb3Nlc3QoXCIuZ2FsbGVyeV9pbWFnZVwiKSk7XHJcblxyXG4gIGNvbnN0IGltYWdlQmxvY2sgPSAkKHRoaXMpLmNsb3Nlc3QoXCIuZ2FsbGVyeV9pbWFnZVwiKTtcclxuXHJcbiAgbGV0IHVybCA9IGltYWdlQmxvY2suYXR0cihcImRhdGEtdXJsXCIpLFxyXG4gICAgaW5kZXggPSBpbWFnZUJsb2NrLmF0dHIoXCJkYXRhLWlkXCIpO1xyXG5cclxuICBjb25zb2xlLmxvZyh1cmwpO1xyXG5cclxuICBnYWxsZXJ5Qm94ID0gJCh0aGlzKS5jbG9zZXN0KFwiLmltYWdlc19ib3hcIik7XHJcbiAgZ2FsbGVyeUlucHV0ID0gZ2FsbGVyeUJveC5zaWJsaW5ncyhcImlucHV0XCIpO1xyXG4gIGdhbGxlcnlJbWFnZUluZGV4ID0gaW5kZXg7XHJcbiAgaW5pdENyb3BwZXJQb3B1cChgL3VwbG9hZHMke3VybH1gKTtcclxufSk7XHJcblxyXG5leHBvcnQgeyBpbWFnZUNyb3BwZXIsIG11bHRpcGxlSW5pdCB9O1xyXG4iLCJpbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XHJcblxyXG5jb25zdCBsb2FkZXIgPSB7XHJcbiAgc2hvdzogKCkgPT4ge1xyXG4gICAgJChcImJvZHlcIikuYXBwZW5kKGA8ZGl2IGlkPVwiZml4ZWRfcHJlbG9hZGVyXCIgY2xhc3M9XCJmaXhlZC1wcmVsb2FkZXJcIj5cclxuXHRcdDxpbWcgc3JjPVwiL2ltZy9sb2FkZXIuc3ZnXCIgLz5cclxuXHQgPC9kaXY+YCk7XHJcbiAgfSxcclxuICBoaWRlOiAoKSA9PiB7XHJcbiAgICAkKFwiI2ZpeGVkX3ByZWxvYWRlclwiKS5yZW1vdmUoKTtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBsb2FkZXI7XHJcbiIsImltcG9ydCAkIGZyb20gXCJqcXVlcnlcIjtcclxuXHJcbmNvbnN0IHB1Ymxpc2ggPSAoeyBtb2RlbCwgaWQsIHZhbHVlIH0pID0+IHtcclxuICBsZXQgdXJsID0gXCIvYXBpL3B1Ymxpc2gvXCI7XHJcbiAgJC5hamF4KHtcclxuICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgdXJsLFxyXG4gICAgZGF0YToge1xyXG4gICAgICBtb2RlbCxcclxuICAgICAgaWQsXHJcbiAgICAgIHZhbHVlXHJcbiAgICB9LFxyXG4gICAgc3VjY2VzczogKCkgPT4gY29uc29sZS5sb2coXCJva1wiKSxcclxuICAgIGVycm9yOiBlcnJvciA9PiBjb25zb2xlLmxvZyh2YWx1ZSlcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHB1Ymxpc2g7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=